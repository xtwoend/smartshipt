var ME=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);import"./toast-fd51308c.js";import"./popper-b924b727.js";var Wz=ME((Xz,hy)=>{var Jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AE(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var a=function d(){if(this instanceof d){var _=[null];_.push.apply(_,arguments);var x=Function.bind.apply(r,_);return new x}return r.apply(this,arguments)};a.prototype=r.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var _=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(a,d,_.get?_:{enumerable:!0,get:function(){return e[d]}})}),a}var fy={},IE={get exports(){return fy},set exports(e){fy=e}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,r){(function(){var a,d="4.17.21",_=200,x="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",E="Expected a function",o="Invalid `variable` option passed into `_.template`",D="__lodash_hash_undefined__",V=500,X="__lodash_placeholder__",Z=1,he=2,Se=4,_e=1,Re=2,nt=1,ke=2,Le=4,$e=8,Et=16,Fe=32,z=64,Lt=128,ot=256,bt=512,Ht=30,Yt="...",Wt=800,hi=16,ri=1,fi=2,pn=3,mn=1/0,tn=9007199254740991,ts=17976931348623157e292,Fn=0/0,Nn=4294967295,Is=Nn-1,xs=Nn>>>1,zs=[["ary",Lt],["bind",nt],["bindKey",ke],["curry",$e],["curryRight",Et],["flip",bt],["partial",Fe],["partialRight",z],["rearg",ot]],Bs="[object Arguments]",Hr="[object Array]",Zr="[object AsyncFunction]",ds="[object Boolean]",Sr="[object Date]",bs="[object DOMException]",Uo="[object Error]",Ce="[object Function]",Ve="[object GeneratorFunction]",tt="[object Map]",kt="[object Number]",ct="[object Null]",zt="[object Object]",ui="[object Promise]",Xt="[object Proxy]",Kt="[object RegExp]",Nt="[object Set]",pi="[object String]",di="[object Symbol]",Ti="[object Undefined]",Di="[object WeakMap]",Yi="[object WeakSet]",_n="[object ArrayBuffer]",cn="[object DataView]",Yn="[object Float32Array]",nr="[object Float64Array]",Zs="[object Int8Array]",ks="[object Int16Array]",Yr="[object Int32Array]",Ys="[object Uint8Array]",Or="[object Uint8ClampedArray]",rr="[object Uint16Array]",Cr="[object Uint32Array]",ia=/\b__p \+= '';/g,Yl=/\b(__p \+=) '' \+/g,dl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oo=/&(?:amp|lt|gt|quot|#39);/g,Eo=/[&<>"']/g,Ea=RegExp(oo.source),Xl=RegExp(Eo.source),hl=/<%-([\s\S]+?)%>/g,Na=/<%([\s\S]+?)%>/g,Fs=/<%=([\s\S]+?)%>/g,Ua=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mc=/^\w*$/,pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,Q=RegExp(q.source),fe=/^\s+/,ve=/\s/,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,He=/\{\n\/\* \[wrapped with (.+)\] \*/,Ye=/,? & /,Be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Qe=/[()=,{}\[\]\/\s]/,Tt=/\\(\\)?/g,ii=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ot=/\w*$/,Ai=/^[-+]0x[0-9a-f]+$/i,Ci=/^0b[01]+$/i,yi=/^\[object .+?Constructor\]$/,Li=/^0o[0-7]+$/i,an=/^(?:0|[1-9]\d*)$/,Mn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bi=/($^)/,Xn=/['\n\r\u2028\u2029\\]/g,Rn="\\ud800-\\udfff",na="\\u0300-\\u036f",ja="\\ufe20-\\ufe2f",ao="\\u20d0-\\u20ff",yt=na+ja+ao,So="\\u2700-\\u27bf",zr="a-z\\xdf-\\xf6\\xf8-\\xff",Br="\\xac\\xb1\\xd7\\xf7",Kl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ds="\\u2000-\\u206f",Jc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ou="A-Z\\xc0-\\xd6\\xd8-\\xde",hs="\\ufe0e\\ufe0f",ti=Br+Kl+Ds+Jc,on="['’]",ln="["+Rn+"]",Co="["+ti+"]",ra="["+yt+"]",Ui="\\d+",Jl="["+So+"]",jo="["+zr+"]",Sa="[^"+Rn+ti+Ui+So+zr+Ou+"]",is="\\ud83c[\\udffb-\\udfff]",Wn="(?:"+ra+"|"+is+")",ws="[^"+Rn+"]",Ca="(?:\\ud83c[\\udde6-\\uddff]){2}",fl="[\\ud800-\\udbff][\\udc00-\\udfff]",Vo="["+Ou+"]",pl="\\u200d",Va="(?:"+jo+"|"+Sa+")",Ma="(?:"+Vo+"|"+Sa+")",$a="(?:"+on+"(?:d|ll|m|re|s|t|ve))?",Ac="(?:"+on+"(?:D|LL|M|RE|S|T|VE))?",Ic=Wn+"?",Ns="["+hs+"]?",kr="(?:"+pl+"(?:"+[ws,Ca,fl].join("|")+")"+Ns+Ic+")*",ml="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fs=Ns+Ic+kr,Mo="(?:"+[Jl,Ca,fl].join("|")+")"+fs,Dd="(?:"+[ws+ra+"?",ra,Ca,fl,ln].join("|")+")",Qc=RegExp(on,"g"),Xr=RegExp(ra,"g"),_l=RegExp(is+"(?="+is+")|"+Dd+fs,"g"),eu=RegExp([Vo+"?"+jo+"+"+$a+"(?="+[Co,Vo,"$"].join("|")+")",Ma+"+"+Ac+"(?="+[Co,Vo+Va,"$"].join("|")+")",Vo+"?"+Va+"+"+$a,Vo+"+"+Ac,zu,ml,Ui,Mo].join("|"),"g"),gl=RegExp("["+pl+Rn+yt+hs+"]"),ns=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ga=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tu=-1,kn={};kn[Yn]=kn[nr]=kn[Zs]=kn[ks]=kn[Yr]=kn[Ys]=kn[Or]=kn[rr]=kn[Cr]=!0,kn[Bs]=kn[Hr]=kn[_n]=kn[ds]=kn[cn]=kn[Sr]=kn[Uo]=kn[Ce]=kn[tt]=kn[kt]=kn[zt]=kn[Kt]=kn[Nt]=kn[pi]=kn[Di]=!1;var Un={};Un[Bs]=Un[Hr]=Un[_n]=Un[cn]=Un[ds]=Un[Sr]=Un[Yn]=Un[nr]=Un[Zs]=Un[ks]=Un[Yr]=Un[tt]=Un[kt]=Un[zt]=Un[Kt]=Un[Nt]=Un[pi]=Un[di]=Un[Ys]=Un[Or]=Un[rr]=Un[Cr]=!0,Un[Uo]=Un[Ce]=Un[Di]=!1;var iu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Oh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$o={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kc=parseFloat,nu=parseInt,yl=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo,qa=typeof self=="object"&&self&&self.Object===Object&&self,Kr=yl||qa||Function("return this")(),T=r&&!r.nodeType&&r,I=T&&!0&&e&&!e.nodeType&&e,R=I&&I.exports===T,F=R&&yl.process,H=function(){try{var qe=I&&I.require&&I.require("util").types;return qe||F&&F.binding&&F.binding("util")}catch{}}(),K=H&&H.isArrayBuffer,te=H&&H.isDate,ze=H&&H.isMap,Me=H&&H.isRegExp,et=H&&H.isSet,gt=H&&H.isTypedArray;function Dt(qe,St,_t){switch(_t.length){case 0:return qe.call(St);case 1:return qe.call(St,_t[0]);case 2:return qe.call(St,_t[0],_t[1]);case 3:return qe.call(St,_t[0],_t[1],_t[2])}return qe.apply(St,_t)}function ht(qe,St,_t,vi){for(var Qi=-1,On=qe==null?0:qe.length;++Qi<On;){var Vr=qe[Qi];St(vi,Vr,_t(Vr),qe)}return vi}function mt(qe,St){for(var _t=-1,vi=qe==null?0:qe.length;++_t<vi&&St(qe[_t],_t,qe)!==!1;);return qe}function Jt(qe,St){for(var _t=qe==null?0:qe.length;_t--&&St(qe[_t],_t,qe)!==!1;);return qe}function nn(qe,St){for(var _t=-1,vi=qe==null?0:qe.length;++_t<vi;)if(!St(qe[_t],_t,qe))return!1;return!0}function wi(qe,St){for(var _t=-1,vi=qe==null?0:qe.length,Qi=0,On=[];++_t<vi;){var Vr=qe[_t];St(Vr,_t,qe)&&(On[Qi++]=Vr)}return On}function Mr(qe,St){var _t=qe==null?0:qe.length;return!!_t&&Ji(qe,St,0)>-1}function lr(qe,St,_t){for(var vi=-1,Qi=qe==null?0:qe.length;++vi<Qi;)if(_t(St,qe[vi]))return!0;return!1}function gn(qe,St){for(var _t=-1,vi=qe==null?0:qe.length,Qi=Array(vi);++_t<vi;)Qi[_t]=St(qe[_t],_t,qe);return Qi}function yn(qe,St){for(var _t=-1,vi=St.length,Qi=qe.length;++_t<vi;)qe[Qi+_t]=St[_t];return qe}function Gi(qe,St,_t,vi){var Qi=-1,On=qe==null?0:qe.length;for(vi&&On&&(_t=qe[++Qi]);++Qi<On;)_t=St(_t,qe[Qi],Qi,qe);return _t}function Ps(qe,St,_t,vi){var Qi=qe==null?0:qe.length;for(vi&&Qi&&(_t=qe[--Qi]);Qi--;)_t=St(_t,qe[Qi],Qi,qe);return _t}function bn(qe,St){for(var _t=-1,vi=qe==null?0:qe.length;++_t<vi;)if(St(qe[_t],_t,qe))return!0;return!1}var Qn=Ao("length");function sa(qe){return qe.split("")}function vl(qe){return qe.match(Be)||[]}function ps(qe,St,_t){var vi;return _t(qe,function(Qi,On,Vr){if(St(Qi,On,Vr))return vi=On,!1}),vi}function lo(qe,St,_t,vi){for(var Qi=qe.length,On=_t+(vi?1:-1);vi?On--:++On<Qi;)if(St(qe[On],On,qe))return On;return-1}function Ji(qe,St,_t){return St===St?Pc(qe,St,_t):lo(qe,Go,_t)}function Ts(qe,St,_t,vi){for(var Qi=_t-1,On=qe.length;++Qi<On;)if(vi(qe[Qi],St))return Qi;return-1}function Go(qe){return qe!==qe}function Xs(qe,St){var _t=qe==null?0:qe.length;return _t?jn(qe,St)/_t:Fn}function Ao(qe){return function(St){return St==null?a:St[qe]}}function xl(qe){return function(St){return qe==null?a:qe[St]}}function Aa(qe,St,_t,vi,Qi){return Qi(qe,function(On,Vr,Vn){_t=vi?(vi=!1,On):St(_t,On,Vr,Vn)}),_t}function ru(qe,St){var _t=qe.length;for(qe.sort(St);_t--;)qe[_t]=qe[_t].value;return qe}function jn(qe,St){for(var _t,vi=-1,Qi=qe.length;++vi<Qi;){var On=St(qe[vi]);On!==a&&(_t=_t===a?On:_t+On)}return _t}function Io(qe,St){for(var _t=-1,vi=Array(qe);++_t<qe;)vi[_t]=St(_t);return vi}function Dc(qe,St){return gn(St,function(_t){return[_t,qe[_t]]})}function Ql(qe){return qe&&qe.slice(0,Ss(qe)+1).replace(fe,"")}function Us(qe){return function(St){return qe(St)}}function bl(qe,St){return gn(St,function(_t){return qe[_t]})}function ec(qe,St){return qe.has(St)}function Fu(qe,St){for(var _t=-1,vi=qe.length;++_t<vi&&Ji(St,qe[_t],0)>-1;);return _t}function tc(qe,St){for(var _t=qe.length;_t--&&Ji(St,qe[_t],0)>-1;);return _t}function ic(qe,St){for(var _t=qe.length,vi=0;_t--;)qe[_t]===St&&++vi;return vi}var Pd=xl(iu),wl=xl(Oh);function Nu(qe){return"\\"+$o[qe]}function oa(qe,St){return qe==null?a:qe[St]}function Ia(qe){return gl.test(qe)}function Tl(qe){return ns.test(qe)}function su(qe){for(var St,_t=[];!(St=qe.next()).done;)_t.push(St.value);return _t}function nc(qe){var St=-1,_t=Array(qe.size);return qe.forEach(function(vi,Qi){_t[++St]=[Qi,vi]}),_t}function ko(qe,St){return function(_t){return qe(St(_t))}}function Es(qe,St){for(var _t=-1,vi=qe.length,Qi=0,On=[];++_t<vi;){var Vr=qe[_t];(Vr===St||Vr===X)&&(qe[_t]=X,On[Qi++]=_t)}return On}function Wa(qe){var St=-1,_t=Array(qe.size);return qe.forEach(function(vi){_t[++St]=vi}),_t}function Uu(qe){var St=-1,_t=Array(qe.size);return qe.forEach(function(vi){_t[++St]=[vi,vi]}),_t}function Pc(qe,St,_t){for(var vi=_t-1,Qi=qe.length;++vi<Qi;)if(qe[vi]===St)return vi;return-1}function zh(qe,St,_t){for(var vi=_t+1;vi--;)if(qe[vi]===St)return vi;return vi}function Dn(qe){return Ia(qe)?El(qe):Qn(qe)}function Ks(qe){return Ia(qe)?Ld(qe):sa(qe)}function Ss(qe){for(var St=qe.length;St--&&ve.test(qe.charAt(St)););return St}var co=xl(Bu);function El(qe){for(var St=_l.lastIndex=0;_l.test(qe);)++St;return St}function Ld(qe){return qe.match(_l)||[]}function Rd(qe){return qe.match(eu)||[]}var Od=function qe(St){St=St==null?Kr:uo.defaults(Kr.Object(),St,uo.pick(Kr,Ga));var _t=St.Array,vi=St.Date,Qi=St.Error,On=St.Function,Vr=St.Math,Vn=St.Object,rc=St.RegExp,ou=St.String,Js=St.TypeError,oe=_t.prototype,Ae=On.prototype,je=Vn.prototype,Ct=St["__core-js_shared__"],We=Ae.toString,pt=je.hasOwnProperty,$t=0,oi=function(){var h=/[^.]+$/.exec(Ct&&Ct.keys&&Ct.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),Ut=je.toString,Bi=We.call(Vn),ji=Kr._,$i=rc("^"+We.call(pt).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rn=R?St.Buffer:a,Sn=St.Symbol,Fi=St.Uint8Array,Fr=rn?rn.allocUnsafe:a,$r=ko(Vn.getPrototypeOf,Vn),Cs=Vn.create,er=je.propertyIsEnumerable,js=oe.splice,ho=Sn?Sn.isConcatSpreadable:a,Jr=Sn?Sn.iterator:a,Sl=Sn?Sn.toStringTag:a,Cl=function(){try{var h=Ju(Vn,"defineProperty");return h({},"",{}),h}catch{}}(),ju=St.clearTimeout!==Kr.clearTimeout&&St.clearTimeout,li=vi&&vi.now!==Kr.Date.now&&vi.now,aa=St.setTimeout!==Kr.setTimeout&&St.setTimeout,sc=Vr.ceil,Vu=Vr.floor,zd=Vn.getOwnPropertySymbols,au=rn?rn.isBuffer:a,Bh=St.isFinite,Bd=oe.join,lu=ko(Vn.keys,Vn),Dr=Vr.max,cr=Vr.min,$u=vi.now,cu=St.parseInt,op=Vr.random,q0=oe.reverse,Fd=Ju(St,"DataView"),Ha=Ju(St,"Map"),Gu=Ju(St,"Promise"),Ml=Ju(St,"Set"),uu=Ju(St,"WeakMap"),oc=Ju(Vn,"create"),ac=uu&&new uu,Lc={},Fh=Ol(Fd),Nh=Ol(Ha),ap=Ol(Gu),Nd=Ol(Ml),Al=Ol(uu),du=Sn?Sn.prototype:a,hu=du?du.valueOf:a,Uh=du?du.toString:a;function re(h){if(os(h)&&!hn(h)&&!(h instanceof Wi)){if(h instanceof qo)return h;if(pt.call(h,"__wrapped__"))return Jd(h)}return new qo(h)}var Il=function(){function h(){}return function(y){if(!qr(y))return{};if(Cs)return Cs(y);h.prototype=y;var A=new h;return h.prototype=a,A}}();function qu(){}function qo(h,y){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=a}re.templateSettings={escape:hl,evaluate:Na,interpolate:Fs,variable:"",imports:{_:re}},re.prototype=qu.prototype,re.prototype.constructor=re,qo.prototype=Il(qu.prototype),qo.prototype.constructor=qo;function Wi(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nn,this.__views__=[]}function W0(){var h=new Wi(this.__wrapped__);return h.__actions__=ms(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=ms(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=ms(this.__views__),h}function jh(){if(this.__filtered__){var h=new Wi(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function H0(){var h=this.__wrapped__.value(),y=this.__dir__,A=hn(h),U=y<0,J=A?h.length:0,ae=cm(0,J,this.__views__),Te=ae.start,Ne=ae.end,Xe=Ne-Te,Pt=U?Ne:Te-1,Ft=this.__iteratees__,Zt=Ft.length,gi=0,Ri=cr(Xe,this.__takeCount__);if(!A||!U&&J==Xe&&Ri==Xe)return Zu(h,this.__actions__);var Xi=[];e:for(;Xe--&&gi<Ri;){Pt+=y;for(var Cn=-1,en=h[Pt];++Cn<Zt;){var Ln=Ft[Cn],$n=Ln.iteratee,fa=Ln.type,Fo=$n(en);if(fa==fi)en=Fo;else if(!Fo){if(fa==ri)continue e;break e}}Xi[gi++]=en}return Xi}Wi.prototype=Il(qu.prototype),Wi.prototype.constructor=Wi;function Rc(h){var y=-1,A=h==null?0:h.length;for(this.clear();++y<A;){var U=h[y];this.set(U[0],U[1])}}function kl(){this.__data__=oc?oc(null):{},this.size=0}function lp(h){var y=this.has(h)&&delete this.__data__[h];return this.size-=y?1:0,y}function fu(h){var y=this.__data__;if(oc){var A=y[h];return A===D?a:A}return pt.call(y,h)?y[h]:a}function Za(h){var y=this.__data__;return oc?y[h]!==a:pt.call(y,h)}function Ud(h,y){var A=this.__data__;return this.size+=this.has(h)?0:1,A[h]=oc&&y===a?D:y,this}Rc.prototype.clear=kl,Rc.prototype.delete=lp,Rc.prototype.get=fu,Rc.prototype.has=Za,Rc.prototype.set=Ud;function ni(h){var y=-1,A=h==null?0:h.length;for(this.clear();++y<A;){var U=h[y];this.set(U[0],U[1])}}function cp(){this.__data__=[],this.size=0}function up(h){var y=this.__data__,A=s(y,h);if(A<0)return!1;var U=y.length-1;return A==U?y.pop():js.call(y,A,1),--this.size,!0}function lc(h){var y=this.__data__,A=s(y,h);return A<0?a:y[A][1]}function Wu(h){return s(this.__data__,h)>-1}function Vh(h,y){var A=this.__data__,U=s(A,h);return U<0?(++this.size,A.push([h,y])):A[U][1]=y,this}ni.prototype.clear=cp,ni.prototype.delete=up,ni.prototype.get=lc,ni.prototype.has=Wu,ni.prototype.set=Vh;function Ya(h){var y=-1,A=h==null?0:h.length;for(this.clear();++y<A;){var U=h[y];this.set(U[0],U[1])}}function $h(){this.size=0,this.__data__={hash:new Rc,map:new(Ha||ni),string:new Rc}}function Gh(h){var y=Wd(this,h).delete(h);return this.size-=y?1:0,y}function qh(h){return Wd(this,h).get(h)}function Wh(h){return Wd(this,h).has(h)}function pu(h,y){var A=Wd(this,h),U=A.size;return A.set(h,y),this.size+=A.size==U?0:1,this}Ya.prototype.clear=$h,Ya.prototype.delete=Gh,Ya.prototype.get=qh,Ya.prototype.has=Wh,Ya.prototype.set=pu;function ka(h){var y=-1,A=h==null?0:h.length;for(this.__data__=new Ya;++y<A;)this.add(h[y])}function jd(h){return this.__data__.set(h,D),this}function dp(h){return this.__data__.has(h)}ka.prototype.add=ka.prototype.push=jd,ka.prototype.has=dp;function Wo(h){var y=this.__data__=new ni(h);this.size=y.size}function hp(){this.__data__=new ni,this.size=0}function fp(h){var y=this.__data__,A=y.delete(h);return this.size=y.size,A}function pp(h){return this.__data__.get(h)}function mp(h){return this.__data__.has(h)}function _p(h,y){var A=this.__data__;if(A instanceof ni){var U=A.__data__;if(!Ha||U.length<_-1)return U.push([h,y]),this.size=++A.size,this;A=this.__data__=new Ya(U)}return A.set(h,y),this.size=A.size,this}Wo.prototype.clear=hp,Wo.prototype.delete=fp,Wo.prototype.get=pp,Wo.prototype.has=mp,Wo.prototype.set=_p;function Vd(h,y){var A=hn(h),U=!A&&sd(h),J=!A&&!U&&Fl(h),ae=!A&&!U&&!J&&Nl(h),Te=A||U||J||ae,Ne=Te?Io(h.length,ou):[],Xe=Ne.length;for(var Pt in h)(y||pt.call(h,Pt))&&!(Te&&(Pt=="length"||J&&(Pt=="offset"||Pt=="parent")||ae&&(Pt=="buffer"||Pt=="byteLength"||Pt=="byteOffset")||fc(Pt,Xe)))&&Ne.push(Pt);return Ne}function Hh(h){var y=h.length;return y?h[Po(0,y-1)]:a}function gp(h,y){return Kd(ms(h),k(y,0,h.length))}function Zh(h){return Kd(ms(h))}function Oc(h,y,A){(A!==a&&!Bl(h[y],A)||A===a&&!(y in h))&&w(h,y,A)}function f(h,y,A){var U=h[y];(!(pt.call(h,y)&&Bl(U,A))||A===a&&!(y in h))&&w(h,y,A)}function s(h,y){for(var A=h.length;A--;)if(Bl(h[A][0],y))return A;return-1}function c(h,y,A,U){return le(h,function(J,ae,Te){y(U,J,A(J),Te)}),U}function m(h,y){return h&&Ls(y,as(y),h)}function v(h,y){return h&&Ls(y,Yo(y),h)}function w(h,y,A){y=="__proto__"&&Cl?Cl(h,y,{configurable:!0,enumerable:!0,value:A,writable:!0}):h[y]=A}function M(h,y){for(var A=-1,U=y.length,J=_t(U),ae=h==null;++A<U;)J[A]=ae?a:Zp(h,y[A]);return J}function k(h,y,A){return h===h&&(A!==a&&(h=h<=A?h:A),y!==a&&(h=h>=y?h:y)),h}function L(h,y,A,U,J,ae){var Te,Ne=y&Z,Xe=y&he,Pt=y&Se;if(A&&(Te=J?A(h,U,J,ae):A(h)),Te!==a)return Te;if(!qr(h))return h;var Ft=hn(h);if(Ft){if(Te=Qu(h),!Ne)return ms(h,Te)}else{var Zt=Lo(h),gi=Zt==Ce||Zt==Ve;if(Fl(h))return uc(h,Ne);if(Zt==zt||Zt==Bs||gi&&!J){if(Te=Xe||gi?{}:dm(h),!Ne)return Xe?gu(h,v(Te,h)):_u(h,m(Te,h))}else{if(!Un[Zt])return J?h:{};Te=B2(h,Zt,Ne)}}ae||(ae=new Wo);var Ri=ae.get(h);if(Ri)return Ri;ae.set(h,Te),ag(h)?h.forEach(function(en){Te.add(L(en,y,A,en,h,ae))}):Um(h)&&h.forEach(function(en,Ln){Te.set(Ln,L(en,y,A,Ln,h,ae))});var Xi=Pt?Xe?am:Tp:Xe?Yo:as,Cn=Ft?a:Xi(h);return mt(Cn||h,function(en,Ln){Cn&&(Ln=en,en=h[Ln]),f(Te,Ln,L(en,y,A,Ln,h,ae))}),Te}function j(h){var y=as(h);return function(A){return N(A,h,y)}}function N(h,y,A){var U=A.length;if(h==null)return!U;for(h=Vn(h);U--;){var J=A[U],ae=y[J],Te=h[J];if(Te===a&&!(J in h)||!ae(Te))return!1}return!0}function W(h,y,A){if(typeof h!="function")throw new Js(E);return Xd(function(){h.apply(a,A)},y)}function ee(h,y,A,U){var J=-1,ae=Mr,Te=!0,Ne=h.length,Xe=[],Pt=y.length;if(!Ne)return Xe;A&&(y=gn(y,Us(A))),U?(ae=lr,Te=!1):y.length>=_&&(ae=ec,Te=!1,y=new ka(y));e:for(;++J<Ne;){var Ft=h[J],Zt=A==null?Ft:A(Ft);if(Ft=U||Ft!==0?Ft:0,Te&&Zt===Zt){for(var gi=Pt;gi--;)if(y[gi]===Zt)continue e;Xe.push(Ft)}else ae(y,Zt,U)||Xe.push(Ft)}return Xe}var le=T_(we),ce=T_(Ue,!0);function de(h,y){var A=!0;return le(h,function(U,J,ae){return A=!!y(U,J,ae),A}),A}function ie(h,y,A){for(var U=-1,J=h.length;++U<J;){var ae=h[U],Te=y(ae);if(Te!=null&&(Ne===a?Te===Te&&!Bo(Te):A(Te,Ne)))var Ne=Te,Xe=ae}return Xe}function se(h,y,A,U){var J=h.length;for(A=Hi(A),A<0&&(A=-A>J?0:J+A),U=U===a||U>J?J:Hi(U),U<0&&(U+=J),U=A>U?0:sh(U);A<U;)h[A++]=y;return h}function me(h,y){var A=[];return le(h,function(U,J,ae){y(U,J,ae)&&A.push(U)}),A}function ue(h,y,A,U,J){var ae=-1,Te=h.length;for(A||(A=Cp),J||(J=[]);++ae<Te;){var Ne=h[ae];y>0&&A(Ne)?y>1?ue(Ne,y-1,A,U,J):yn(J,Ne):U||(J[J.length]=Ne)}return J}var xe=E_(),De=E_(!0);function we(h,y){return h&&xe(h,y,as)}function Ue(h,y){return h&&De(h,y,as)}function st(h,y){return wi(y,function(A){return mc(h[A])})}function Je(h,y){y=Dl(y,h);for(var A=0,U=y.length;h!=null&&A<U;)h=h[da(y[A++])];return A&&A==U?h:a}function Ge(h,y,A){var U=y(h);return hn(h)?U:yn(U,A(h))}function It(h){return h==null?h===a?Ti:ct:Sl&&Sl in Vn(h)?C_(h):fm(h)}function Ke(h,y){return h>y}function vt(h,y){return h!=null&&pt.call(h,y)}function lt(h,y){return h!=null&&y in Vn(h)}function Bt(h,y,A){return h>=cr(y,A)&&h<Dr(y,A)}function ut(h,y,A){for(var U=A?lr:Mr,J=h[0].length,ae=h.length,Te=ae,Ne=_t(ae),Xe=1/0,Pt=[];Te--;){var Ft=h[Te];Te&&y&&(Ft=gn(Ft,Us(y))),Xe=cr(Ft.length,Xe),Ne[Te]=!A&&(y||J>=120&&Ft.length>=120)?new ka(Te&&Ft):a}Ft=h[0];var Zt=-1,gi=Ne[0];e:for(;++Zt<J&&Pt.length<Xe;){var Ri=Ft[Zt],Xi=y?y(Ri):Ri;if(Ri=A||Ri!==0?Ri:0,!(gi?ec(gi,Xi):U(Pt,Xi,A))){for(Te=ae;--Te;){var Cn=Ne[Te];if(!(Cn?ec(Cn,Xi):U(h[Te],Xi,A)))continue e}gi&&gi.push(Xi),Pt.push(Ri)}}return Pt}function Mt(h,y,A,U){return we(h,function(J,ae,Te){y(U,A(J),ae,Te)}),U}function jt(h,y,A){y=Dl(y,h),h=pm(h,y);var U=h==null?h:h[da(el(y))];return U==null?a:Dt(U,h,A)}function Ze(h){return os(h)&&It(h)==Bs}function at(h){return os(h)&&It(h)==_n}function mi(h){return os(h)&&It(h)==Sr}function Ei(h,y,A,U,J){return h===y?!0:h==null||y==null||!os(h)&&!os(y)?h!==h&&y!==y:_i(h,y,A,U,Ei,J)}function _i(h,y,A,U,J,ae){var Te=hn(h),Ne=hn(y),Xe=Te?Hr:Lo(h),Pt=Ne?Hr:Lo(y);Xe=Xe==Bs?zt:Xe,Pt=Pt==Bs?zt:Pt;var Ft=Xe==zt,Zt=Pt==zt,gi=Xe==Pt;if(gi&&Fl(h)){if(!Fl(y))return!1;Te=!0,Ft=!1}if(gi&&!Ft)return ae||(ae=new Wo),Te||Nl(h)?sm(h,y,A,U,J,ae):om(h,y,Xe,A,U,J,ae);if(!(A&_e)){var Ri=Ft&&pt.call(h,"__wrapped__"),Xi=Zt&&pt.call(y,"__wrapped__");if(Ri||Xi){var Cn=Ri?h.value():h,en=Xi?y.value():y;return ae||(ae=new Wo),J(Cn,en,A,U,ae)}}return gi?(ae||(ae=new Wo),z2(h,y,A,U,J,ae)):!1}function zi(h){return os(h)&&Lo(h)==tt}function sn(h,y,A,U){var J=A.length,ae=J,Te=!U;if(h==null)return!ae;for(h=Vn(h);J--;){var Ne=A[J];if(Te&&Ne[2]?Ne[1]!==h[Ne[0]]:!(Ne[0]in h))return!1}for(;++J<ae;){Ne=A[J];var Xe=Ne[0],Pt=h[Xe],Ft=Ne[1];if(Te&&Ne[2]){if(Pt===a&&!(Xe in h))return!1}else{var Zt=new Wo;if(U)var gi=U(Pt,Ft,Xe,h,y,Zt);if(!(gi===a?Ei(Ft,Pt,_e|Re,U,Zt):gi))return!1}}return!0}function Mi(h){if(!qr(h)||ua(h))return!1;var y=mc(h)?$i:yi;return y.test(Ol(h))}function ci(h){return os(h)&&It(h)==Kt}function Kn(h){return os(h)&&Lo(h)==Nt}function zn(h){return os(h)&&Jn(h.length)&&!!kn[It(h)]}function tr(h){return typeof h=="function"?h:h==null?Ms:typeof h=="object"?hn(h)?ur(h[0],h[1]):Da(h):a1(h)}function Hn(h){if(!Yd(h))return lu(h);var y=[];for(var A in Vn(h))pt.call(h,A)&&A!="constructor"&&y.push(A);return y}function Do(h){if(!qr(h))return td(h);var y=Yd(h),A=[];for(var U in h)U=="constructor"&&(y||!pt.call(h,U))||A.push(U);return A}function fo(h,y){return h<y}function Qs(h,y){var A=-1,U=hr(h)?_t(h.length):[];return le(h,function(J,ae,Te){U[++A]=y(J,ae,Te)}),U}function Da(h){var y=Ep(h);return y.length==1&&y[0][2]?Mp(y[0][0],y[0][1]):function(A){return A===h||sn(A,h,y)}}function ur(h,y){return hm(h)&&Ja(y)?Mp(da(h),y):function(A){var U=Zp(A,h);return U===a&&U===y?od(A,h):Ei(y,U,_e|Re)}}function Zn(h,y,A,U,J){h!==y&&xe(y,function(ae,Te){if(J||(J=new Wo),qr(ae))Pn(h,y,Te,A,Zn,U,J);else{var Ne=U?U(mm(h,Te),ae,Te+"",h,y,J):a;Ne===a&&(Ne=ae),Oc(h,Te,Ne)}},Yo)}function Pn(h,y,A,U,J,ae,Te){var Ne=mm(h,A),Xe=mm(y,A),Pt=Te.get(Xe);if(Pt){Oc(h,A,Pt);return}var Ft=ae?ae(Ne,Xe,A+"",h,y,Te):a,Zt=Ft===a;if(Zt){var gi=hn(Xe),Ri=!gi&&Fl(Xe),Xi=!gi&&!Ri&&Nl(Xe);Ft=Xe,gi||Ri||Xi?hn(Ne)?Ft=Ne:yr(Ne)?Ft=ms(Ne):Ri?(Zt=!1,Ft=uc(Xe,!0)):Xi?(Zt=!1,Ft=b_(Xe,!0)):Ft=[]:pf(Xe)||sd(Xe)?(Ft=Ne,sd(Ne)?Ft=qp(Ne):(!qr(Ne)||mc(Ne))&&(Ft=dm(Xe))):Zt=!1}Zt&&(Te.set(Xe,Ft),J(Ft,Xe,U,ae,Te),Te.delete(Xe)),Oc(h,A,Ft)}function Gr(h,y){var A=h.length;if(A)return y+=y<0?A:0,fc(y,A)?h[y]:a}function Vs(h,y,A){y.length?y=gn(y,function(ae){return hn(ae)?function(Te){return Je(Te,ae.length===1?ae[0]:ae)}:ae}):y=[Ms];var U=-1;y=gn(y,Us(qi()));var J=Qs(h,function(ae,Te,Ne){var Xe=gn(y,function(Pt){return Pt(ae)});return{criteria:Xe,index:++U,value:ae}});return ru(J,function(ae,Te){return Q0(ae,Te,A)})}function dr(h,y){return eo(h,y,function(A,U){return od(h,U)})}function eo(h,y,A){for(var U=-1,J=y.length,ae={};++U<J;){var Te=y[U],Ne=Je(h,Te);A(Ne,Te)&&zc(ae,Dl(Te,h),Ne)}return ae}function Hu(h){return function(y){return Je(y,h)}}function Pa(h,y,A,U){var J=U?Ts:Ji,ae=-1,Te=y.length,Ne=h;for(h===y&&(y=ms(y)),A&&(Ne=gn(h,Us(A)));++ae<Te;)for(var Xe=0,Pt=y[ae],Ft=A?A(Pt):Pt;(Xe=J(Ne,Ft,Xe,U))>-1;)Ne!==h&&js.call(Ne,Xe,1),js.call(h,Xe,1);return h}function $s(h,y){for(var A=h?y.length:0,U=A-1;A--;){var J=y[A];if(A==U||J!==ae){var ae=J;fc(J)?js.call(h,J,1):vp(h,J)}}return h}function Po(h,y){return h+Vu(op()*(y-h+1))}function Xa(h,y,A,U){for(var J=-1,ae=Dr(sc((y-h)/(A||1)),0),Te=_t(ae);ae--;)Te[U?ae:++J]=h,h+=A;return Te}function la(h,y){var A="";if(!h||y<1||y>tn)return A;do y%2&&(A+=h),y=Vu(y/2),y&&(h+=h);while(y);return A}function dn(h,y){return id(ef(h,y,Ms),h+"")}function mu(h){return Hh(ad(h))}function Ka(h,y){var A=ad(h);return Kd(A,k(y,0,A.length))}function zc(h,y,A,U){if(!qr(h))return h;y=Dl(y,h);for(var J=-1,ae=y.length,Te=ae-1,Ne=h;Ne!=null&&++J<ae;){var Xe=da(y[J]),Pt=A;if(Xe==="__proto__"||Xe==="constructor"||Xe==="prototype")return h;if(J!=Te){var Ft=Ne[Xe];Pt=U?U(Ft,Xe,Ne):a,Pt===a&&(Pt=qr(Ft)?Ft:fc(y[J+1])?[]:{})}f(Ne,Xe,Pt),Ne=Ne[Xe]}return h}var Yh=ac?function(h,y){return ac.set(h,y),h}:Ms,m_=Cl?function(h,y){return Cl(h,"toString",{configurable:!0,enumerable:!1,value:r1(y),writable:!0})}:Ms;function Z0(h){return Kd(ad(h))}function La(h,y,A){var U=-1,J=h.length;y<0&&(y=-y>J?0:J+y),A=A>J?J:A,A<0&&(A+=J),J=y>A?0:A-y>>>0,y>>>=0;for(var ae=_t(J);++U<J;)ae[U]=h[U+y];return ae}function __(h,y){var A;return le(h,function(U,J,ae){return A=y(U,J,ae),!A}),!!A}function Xh(h,y,A){var U=0,J=h==null?U:h.length;if(typeof y=="number"&&y===y&&J<=xs){for(;U<J;){var ae=U+J>>>1,Te=h[ae];Te!==null&&!Bo(Te)&&(A?Te<=y:Te<y)?U=ae+1:J=ae}return J}return yp(h,y,Ms,A)}function yp(h,y,A,U){var J=0,ae=h==null?0:h.length;if(ae===0)return 0;y=A(y);for(var Te=y!==y,Ne=y===null,Xe=Bo(y),Pt=y===a;J<ae;){var Ft=Vu((J+ae)/2),Zt=A(h[Ft]),gi=Zt!==a,Ri=Zt===null,Xi=Zt===Zt,Cn=Bo(Zt);if(Te)var en=U||Xi;else Pt?en=Xi&&(U||gi):Ne?en=Xi&&gi&&(U||!Ri):Xe?en=Xi&&gi&&!Ri&&(U||!Cn):Ri||Cn?en=!1:en=U?Zt<=y:Zt<y;en?J=Ft+1:ae=Ft}return cr(ae,Is)}function Y0(h,y){for(var A=-1,U=h.length,J=0,ae=[];++A<U;){var Te=h[A],Ne=y?y(Te):Te;if(!A||!Bl(Ne,Xe)){var Xe=Ne;ae[J++]=Te===0?0:Te}}return ae}function X0(h){return typeof h=="number"?h:Bo(h)?Fn:+h}function ca(h){if(typeof h=="string")return h;if(hn(h))return gn(h,ca)+"";if(Bo(h))return Uh?Uh.call(h):"";var y=h+"";return y=="0"&&1/h==-mn?"-0":y}function Bc(h,y,A){var U=-1,J=Mr,ae=h.length,Te=!0,Ne=[],Xe=Ne;if(A)Te=!1,J=lr;else if(ae>=_){var Pt=y?null:to(h);if(Pt)return Wa(Pt);Te=!1,J=ec,Xe=new ka}else Xe=y?[]:Ne;e:for(;++U<ae;){var Ft=h[U],Zt=y?y(Ft):Ft;if(Ft=A||Ft!==0?Ft:0,Te&&Zt===Zt){for(var gi=Xe.length;gi--;)if(Xe[gi]===Zt)continue e;y&&Xe.push(Zt),Ne.push(Ft)}else J(Xe,Zt,A)||(Xe!==Ne&&Xe.push(Zt),Ne.push(Ft))}return Ne}function vp(h,y){return y=Dl(y,h),h=pm(h,y),h==null||delete h[da(el(y))]}function g_(h,y,A,U){return zc(h,y,A(Je(h,y)),U)}function xp(h,y,A,U){for(var J=h.length,ae=U?J:-1;(U?ae--:++ae<J)&&y(h[ae],ae,h););return A?La(h,U?0:ae,U?ae+1:J):La(h,U?ae+1:0,U?J:ae)}function Zu(h,y){var A=h;return A instanceof Wi&&(A=A.value()),Gi(y,function(U,J){return J.func.apply(J.thisArg,yn([U],J.args))},A)}function bp(h,y,A){var U=h.length;if(U<2)return U?Bc(h[0]):[];for(var J=-1,ae=_t(U);++J<U;)for(var Te=h[J],Ne=-1;++Ne<U;)Ne!=J&&(ae[J]=ee(ae[J]||Te,h[Ne],y,A));return Bc(ue(ae,1),y,A)}function K0(h,y,A){for(var U=-1,J=h.length,ae=y.length,Te={};++U<J;){var Ne=U<ae?y[U]:a;A(Te,h[U],Ne)}return Te}function wp(h){return yr(h)?h:[]}function J0(h){return typeof h=="function"?h:Ms}function Dl(h,y){return hn(h)?h:hm(h,y)?[h]:_m(vr(h))}var y_=dn;function cc(h,y,A){var U=h.length;return A=A===a?U:A,!y&&A>=U?h:La(h,y,A)}var Kh=ju||function(h){return Kr.clearTimeout(h)};function uc(h,y){if(y)return h.slice();var A=h.length,U=Fr?Fr(A):new h.constructor(A);return h.copy(U),U}function $d(h){var y=new h.constructor(h.byteLength);return new Fi(y).set(new Fi(h)),y}function v_(h,y){var A=y?$d(h.buffer):h.buffer;return new h.constructor(A,h.byteOffset,h.byteLength)}function x_(h){var y=new h.constructor(h.source,Ot.exec(h));return y.lastIndex=h.lastIndex,y}function L2(h){return hu?Vn(hu.call(h)):{}}function b_(h,y){var A=y?$d(h.buffer):h.buffer;return new h.constructor(A,h.byteOffset,h.length)}function w_(h,y){if(h!==y){var A=h!==a,U=h===null,J=h===h,ae=Bo(h),Te=y!==a,Ne=y===null,Xe=y===y,Pt=Bo(y);if(!Ne&&!Pt&&!ae&&h>y||ae&&Te&&Xe&&!Ne&&!Pt||U&&Te&&Xe||!A&&Xe||!J)return 1;if(!U&&!ae&&!Pt&&h<y||Pt&&A&&J&&!U&&!ae||Ne&&A&&J||!Te&&J||!Xe)return-1}return 0}function Q0(h,y,A){for(var U=-1,J=h.criteria,ae=y.criteria,Te=J.length,Ne=A.length;++U<Te;){var Xe=w_(J[U],ae[U]);if(Xe){if(U>=Ne)return Xe;var Pt=A[U];return Xe*(Pt=="desc"?-1:1)}}return h.index-y.index}function Gd(h,y,A,U){for(var J=-1,ae=h.length,Te=A.length,Ne=-1,Xe=y.length,Pt=Dr(ae-Te,0),Ft=_t(Xe+Pt),Zt=!U;++Ne<Xe;)Ft[Ne]=y[Ne];for(;++J<Te;)(Zt||J<ae)&&(Ft[A[J]]=h[J]);for(;Pt--;)Ft[Ne++]=h[J++];return Ft}function Yu(h,y,A,U){for(var J=-1,ae=h.length,Te=-1,Ne=A.length,Xe=-1,Pt=y.length,Ft=Dr(ae-Ne,0),Zt=_t(Ft+Pt),gi=!U;++J<Ft;)Zt[J]=h[J];for(var Ri=J;++Xe<Pt;)Zt[Ri+Xe]=y[Xe];for(;++Te<Ne;)(gi||J<ae)&&(Zt[Ri+A[Te]]=h[J++]);return Zt}function ms(h,y){var A=-1,U=h.length;for(y||(y=_t(U));++A<U;)y[A]=h[A];return y}function Ls(h,y,A,U){var J=!A;A||(A={});for(var ae=-1,Te=y.length;++ae<Te;){var Ne=y[ae],Xe=U?U(A[Ne],h[Ne],Ne,A,h):a;Xe===a&&(Xe=h[Ne]),J?w(A,Ne,Xe):f(A,Ne,Xe)}return A}function _u(h,y){return Ls(h,lm(h),y)}function gu(h,y){return Ls(h,Sp(h),y)}function dc(h,y){return function(A,U){var J=hn(A)?ht:c,ae=y?y():{};return J(A,h,qi(U,2),ae)}}function qd(h){return dn(function(y,A){var U=-1,J=A.length,ae=J>1?A[J-1]:a,Te=J>2?A[2]:a;for(ae=h.length>3&&typeof ae=="function"?(J--,ae):a,Te&&Ro(A[0],A[1],Te)&&(ae=J<3?a:ae,J=1),y=Vn(y);++U<J;){var Ne=A[U];Ne&&h(y,Ne,U,ae)}return y})}function T_(h,y){return function(A,U){if(A==null)return A;if(!hr(A))return h(A,U);for(var J=A.length,ae=y?J:-1,Te=Vn(A);(y?ae--:++ae<J)&&U(Te[ae],ae,Te)!==!1;);return A}}function E_(h){return function(y,A,U){for(var J=-1,ae=Vn(y),Te=U(y),Ne=Te.length;Ne--;){var Xe=Te[h?Ne:++J];if(A(ae[Xe],Xe,ae)===!1)break}return y}}function R2(h,y,A){var U=y&nt,J=Ho(h);function ae(){var Te=this&&this!==Kr&&this instanceof ae?J:h;return Te.apply(U?A:this,arguments)}return ae}function em(h){return function(y){y=vr(y);var A=Ia(y)?Ks(y):a,U=A?A[0]:y.charAt(0),J=A?cc(A,1).join(""):y.slice(1);return U[h]()+J}}function Fc(h){return function(y){return Gi(cd(Km(y).replace(Qc,"")),h,"")}}function Ho(h){return function(){var y=arguments;switch(y.length){case 0:return new h;case 1:return new h(y[0]);case 2:return new h(y[0],y[1]);case 3:return new h(y[0],y[1],y[2]);case 4:return new h(y[0],y[1],y[2],y[3]);case 5:return new h(y[0],y[1],y[2],y[3],y[4]);case 6:return new h(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new h(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var A=Il(h.prototype),U=h.apply(A,y);return qr(U)?U:A}}function O2(h,y,A){var U=Ho(h);function J(){for(var ae=arguments.length,Te=_t(ae),Ne=ae,Xe=Uc(J);Ne--;)Te[Ne]=arguments[Ne];var Pt=ae<3&&Te[0]!==Xe&&Te[ae-1]!==Xe?[]:Es(Te,Xe);if(ae-=Pt.length,ae<A)return Oa(h,y,Pi,J.placeholder,a,Te,Pt,a,a,A-ae);var Ft=this&&this!==Kr&&this instanceof J?U:h;return Dt(Ft,this,Te)}return J}function S_(h){return function(y,A,U){var J=Vn(y);if(!hr(y)){var ae=qi(A,3);y=as(y),A=function(Ne){return ae(J[Ne],Ne,J)}}var Te=h(y,A,U);return Te>-1?J[ae?y[Te]:Te]:a}}function rs(h){return Ll(function(y){var A=y.length,U=A,J=qo.prototype.thru;for(h&&y.reverse();U--;){var ae=y[U];if(typeof ae!="function")throw new Js(E);if(J&&!Te&&hc(ae)=="wrapper")var Te=new qo([],!0)}for(U=Te?U:A;++U<A;){ae=y[U];var Ne=hc(ae),Xe=Ne=="wrapper"?Rl(ae):a;Xe&&Zd(Xe[0])&&Xe[1]==(Lt|$e|Fe|ot)&&!Xe[4].length&&Xe[9]==1?Te=Te[hc(Xe[0])].apply(Te,Xe[3]):Te=ae.length==1&&Zd(ae)?Te[Ne]():Te.thru(ae)}return function(){var Pt=arguments,Ft=Pt[0];if(Te&&Pt.length==1&&hn(Ft))return Te.plant(Ft).value();for(var Zt=0,gi=A?y[Zt].apply(this,Pt):Ft;++Zt<A;)gi=y[Zt].call(this,gi);return gi}})}function Pi(h,y,A,U,J,ae,Te,Ne,Xe,Pt){var Ft=y&Lt,Zt=y&nt,gi=y&ke,Ri=y&($e|Et),Xi=y&bt,Cn=gi?a:Ho(h);function en(){for(var Ln=arguments.length,$n=_t(Ln),fa=Ln;fa--;)$n[fa]=arguments[fa];if(Ri)var Fo=Uc(en),pa=ic($n,Fo);if(U&&($n=Gd($n,U,J,Ri)),ae&&($n=Yu($n,ae,Te,Ri)),Ln-=pa,Ri&&Ln<Pt){var _s=Es($n,Fo);return Oa(h,y,Pi,en.placeholder,A,$n,_s,Ne,Xe,Pt-Ln)}var no=Zt?A:this,yc=gi?no[h]:h;return Ln=$n.length,Ne?$n=I_($n,Ne):Xi&&Ln>1&&$n.reverse(),Ft&&Xe<Ln&&($n.length=Xe),this&&this!==Kr&&this instanceof en&&(yc=Cn||Ho(yc)),yc.apply(no,$n)}return en}function Nc(h,y){return function(A,U){return Mt(A,h,y(U),{})}}function Xu(h,y){return function(A,U){var J;if(A===a&&U===a)return y;if(A!==a&&(J=A),U!==a){if(J===a)return U;typeof A=="string"||typeof U=="string"?(A=ca(A),U=ca(U)):(A=X0(A),U=X0(U)),J=h(A,U)}return J}}function En(h){return Ll(function(y){return y=gn(y,Us(qi())),dn(function(A){var U=this;return h(y,function(J){return Dt(J,U,A)})})})}function Jh(h,y){y=y===a?" ":ca(y);var A=y.length;if(A<2)return A?la(y,h):y;var U=la(y,sc(h/Dn(y)));return Ia(y)?cc(Ks(U),0,h).join(""):U.slice(0,h)}function tm(h,y,A,U){var J=y&nt,ae=Ho(h);function Te(){for(var Ne=-1,Xe=arguments.length,Pt=-1,Ft=U.length,Zt=_t(Ft+Xe),gi=this&&this!==Kr&&this instanceof Te?ae:h;++Pt<Ft;)Zt[Pt]=U[Pt];for(;Xe--;)Zt[Pt++]=arguments[++Ne];return Dt(gi,J?A:this,Zt)}return Te}function Pl(h){return function(y,A,U){return U&&typeof U!="number"&&Ro(y,A,U)&&(A=U=a),y=_c(y),A===a?(A=y,y=0):A=_c(A),U=U===a?y<A?1:-1:_c(U),Xa(y,A,U,h)}}function Ra(h){return function(y,A){return typeof y=="string"&&typeof A=="string"||(y=po(y),A=po(A)),h(y,A)}}function Oa(h,y,A,U,J,ae,Te,Ne,Xe,Pt){var Ft=y&$e,Zt=Ft?Te:a,gi=Ft?a:Te,Ri=Ft?ae:a,Xi=Ft?a:ae;y|=Ft?Fe:z,y&=~(Ft?z:Fe),y&Le||(y&=~(nt|ke));var Cn=[h,y,J,Ri,Zt,Xi,gi,Ne,Xe,Pt],en=A.apply(a,Cn);return Zd(h)&&Ap(en,Cn),en.placeholder=U,nd(en,h,y)}function Zo(h){var y=Vr[h];return function(A,U){if(A=po(A),U=U==null?0:cr(Hi(U),292),U&&Bh(A)){var J=(vr(A)+"e").split("e"),ae=y(J[0]+"e"+(+J[1]+U));return J=(vr(ae)+"e").split("e"),+(J[0]+"e"+(+J[1]-U))}return y(A)}}var to=Ml&&1/Wa(new Ml([,-0]))[1]==mn?function(h){return new Ml(h)}:o1;function im(h){return function(y){var A=Lo(y);return A==tt?nc(y):A==Nt?Uu(y):Dc(y,h(y))}}function io(h,y,A,U,J,ae,Te,Ne){var Xe=y&ke;if(!Xe&&typeof h!="function")throw new Js(E);var Pt=U?U.length:0;if(Pt||(y&=~(Fe|z),U=J=a),Te=Te===a?Te:Dr(Hi(Te),0),Ne=Ne===a?Ne:Hi(Ne),Pt-=J?J.length:0,y&z){var Ft=U,Zt=J;U=J=a}var gi=Xe?a:Rl(h),Ri=[h,y,A,U,J,Ft,Zt,ae,Te,Ne];if(gi&&Qh(Ri,gi),h=Ri[0],y=Ri[1],A=Ri[2],U=Ri[3],J=Ri[4],Ne=Ri[9]=Ri[9]===a?Xe?0:h.length:Dr(Ri[9]-Pt,0),!Ne&&y&($e|Et)&&(y&=~($e|Et)),!y||y==nt)var Xi=R2(h,y,A);else y==$e||y==Et?Xi=O2(h,y,Ne):(y==Fe||y==(nt|Fe))&&!J.length?Xi=tm(h,y,A,U):Xi=Pi.apply(a,Ri);var Cn=gi?Yh:Ap;return nd(Cn(Xi,Ri),h,y)}function nm(h,y,A,U){return h===a||Bl(h,je[A])&&!pt.call(U,A)?y:h}function Ku(h,y,A,U,J,ae){return qr(h)&&qr(y)&&(ae.set(y,h),Zn(h,y,a,Ku,ae),ae.delete(y)),h}function rm(h){return pf(h)?a:h}function sm(h,y,A,U,J,ae){var Te=A&_e,Ne=h.length,Xe=y.length;if(Ne!=Xe&&!(Te&&Xe>Ne))return!1;var Pt=ae.get(h),Ft=ae.get(y);if(Pt&&Ft)return Pt==y&&Ft==h;var Zt=-1,gi=!0,Ri=A&Re?new ka:a;for(ae.set(h,y),ae.set(y,h);++Zt<Ne;){var Xi=h[Zt],Cn=y[Zt];if(U)var en=Te?U(Cn,Xi,Zt,y,h,ae):U(Xi,Cn,Zt,h,y,ae);if(en!==a){if(en)continue;gi=!1;break}if(Ri){if(!bn(y,function(Ln,$n){if(!ec(Ri,$n)&&(Xi===Ln||J(Xi,Ln,A,U,ae)))return Ri.push($n)})){gi=!1;break}}else if(!(Xi===Cn||J(Xi,Cn,A,U,ae))){gi=!1;break}}return ae.delete(h),ae.delete(y),gi}function om(h,y,A,U,J,ae,Te){switch(A){case cn:if(h.byteLength!=y.byteLength||h.byteOffset!=y.byteOffset)return!1;h=h.buffer,y=y.buffer;case _n:return!(h.byteLength!=y.byteLength||!ae(new Fi(h),new Fi(y)));case ds:case Sr:case kt:return Bl(+h,+y);case Uo:return h.name==y.name&&h.message==y.message;case Kt:case pi:return h==y+"";case tt:var Ne=nc;case Nt:var Xe=U&_e;if(Ne||(Ne=Wa),h.size!=y.size&&!Xe)return!1;var Pt=Te.get(h);if(Pt)return Pt==y;U|=Re,Te.set(h,y);var Ft=sm(Ne(h),Ne(y),U,J,ae,Te);return Te.delete(h),Ft;case di:if(hu)return hu.call(h)==hu.call(y)}return!1}function z2(h,y,A,U,J,ae){var Te=A&_e,Ne=Tp(h),Xe=Ne.length,Pt=Tp(y),Ft=Pt.length;if(Xe!=Ft&&!Te)return!1;for(var Zt=Xe;Zt--;){var gi=Ne[Zt];if(!(Te?gi in y:pt.call(y,gi)))return!1}var Ri=ae.get(h),Xi=ae.get(y);if(Ri&&Xi)return Ri==y&&Xi==h;var Cn=!0;ae.set(h,y),ae.set(y,h);for(var en=Te;++Zt<Xe;){gi=Ne[Zt];var Ln=h[gi],$n=y[gi];if(U)var fa=Te?U($n,Ln,gi,y,h,ae):U(Ln,$n,gi,h,y,ae);if(!(fa===a?Ln===$n||J(Ln,$n,A,U,ae):fa)){Cn=!1;break}en||(en=gi=="constructor")}if(Cn&&!en){var Fo=h.constructor,pa=y.constructor;Fo!=pa&&"constructor"in h&&"constructor"in y&&!(typeof Fo=="function"&&Fo instanceof Fo&&typeof pa=="function"&&pa instanceof pa)&&(Cn=!1)}return ae.delete(h),ae.delete(y),Cn}function Ll(h){return id(ef(h,a,vm),h+"")}function Tp(h){return Ge(h,as,lm)}function am(h){return Ge(h,Yo,Sp)}var Rl=ac?function(h){return ac.get(h)}:o1;function hc(h){for(var y=h.name+"",A=Lc[y],U=pt.call(Lc,y)?A.length:0;U--;){var J=A[U],ae=J.func;if(ae==null||ae==h)return J.name}return y}function Uc(h){var y=pt.call(re,"placeholder")?re:h;return y.placeholder}function qi(){var h=re.iteratee||s1;return h=h===s1?tr:h,arguments.length?h(arguments[0],arguments[1]):h}function Wd(h,y){var A=h.__data__;return F2(y)?A[typeof y=="string"?"string":"hash"]:A.map}function Ep(h){for(var y=as(h),A=y.length;A--;){var U=y[A],J=h[U];y[A]=[U,J,Ja(J)]}return y}function Ju(h,y){var A=oa(h,y);return Mi(A)?A:a}function C_(h){var y=pt.call(h,Sl),A=h[Sl];try{h[Sl]=a;var U=!0}catch{}var J=Ut.call(h);return U&&(y?h[Sl]=A:delete h[Sl]),J}var lm=zd?function(h){return h==null?[]:(h=Vn(h),wi(zd(h),function(y){return er.call(h,y)}))}:i0,Sp=zd?function(h){for(var y=[];h;)yn(y,lm(h)),h=$r(h);return y}:i0,Lo=It;(Fd&&Lo(new Fd(new ArrayBuffer(1)))!=cn||Ha&&Lo(new Ha)!=tt||Gu&&Lo(Gu.resolve())!=ui||Ml&&Lo(new Ml)!=Nt||uu&&Lo(new uu)!=Di)&&(Lo=function(h){var y=It(h),A=y==zt?h.constructor:a,U=A?Ol(A):"";if(U)switch(U){case Fh:return cn;case Nh:return tt;case ap:return ui;case Nd:return Nt;case Al:return Di}return y});function cm(h,y,A){for(var U=-1,J=A.length;++U<J;){var ae=A[U],Te=ae.size;switch(ae.type){case"drop":h+=Te;break;case"dropRight":y-=Te;break;case"take":y=cr(y,h+Te);break;case"takeRight":h=Dr(h,y-Te);break}}return{start:h,end:y}}function M_(h){var y=h.match(He);return y?y[1].split(Ye):[]}function um(h,y,A){y=Dl(y,h);for(var U=-1,J=y.length,ae=!1;++U<J;){var Te=da(y[U]);if(!(ae=h!=null&&A(h,Te)))break;h=h[Te]}return ae||++U!=J?ae:(J=h==null?0:h.length,!!J&&Jn(J)&&fc(Te,J)&&(hn(h)||sd(h)))}function Qu(h){var y=h.length,A=new h.constructor(y);return y&&typeof h[0]=="string"&&pt.call(h,"index")&&(A.index=h.index,A.input=h.input),A}function dm(h){return typeof h.constructor=="function"&&!Yd(h)?Il($r(h)):{}}function B2(h,y,A){var U=h.constructor;switch(y){case _n:return $d(h);case ds:case Sr:return new U(+h);case cn:return v_(h,A);case Yn:case nr:case Zs:case ks:case Yr:case Ys:case Or:case rr:case Cr:return b_(h,A);case tt:return new U;case kt:case pi:return new U(h);case Kt:return x_(h);case Nt:return new U;case di:return L2(h)}}function Hd(h,y){var A=y.length;if(!A)return h;var U=A-1;return y[U]=(A>1?"& ":"")+y[U],y=y.join(A>2?", ":" "),h.replace(Oe,`{
/* [wrapped with `+y+`] */
`)}function Cp(h){return hn(h)||sd(h)||!!(ho&&h&&h[ho])}function fc(h,y){var A=typeof h;return y=y??tn,!!y&&(A=="number"||A!="symbol"&&an.test(h))&&h>-1&&h%1==0&&h<y}function Ro(h,y,A){if(!qr(A))return!1;var U=typeof y;return(U=="number"?hr(A)&&fc(y,A.length):U=="string"&&y in A)?Bl(A[y],h):!1}function hm(h,y){if(hn(h))return!1;var A=typeof h;return A=="number"||A=="symbol"||A=="boolean"||h==null||Bo(h)?!0:Mc.test(h)||!Ua.test(h)||y!=null&&h in Vn(y)}function F2(h){var y=typeof h;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?h!=="__proto__":h===null}function Zd(h){var y=hc(h),A=re[y];if(typeof A!="function"||!(y in Wi.prototype))return!1;if(h===A)return!0;var U=Rl(A);return!!U&&h===U[0]}function ua(h){return!!oi&&oi in h}var A_=Ct?mc:l1;function Yd(h){var y=h&&h.constructor,A=typeof y=="function"&&y.prototype||je;return h===A}function Ja(h){return h===h&&!qr(h)}function Mp(h,y){return function(A){return A==null?!1:A[h]===y&&(y!==a||h in Vn(A))}}function ed(h){var y=Gs(h,function(U){return A.size===V&&A.clear(),U}),A=y.cache;return y}function Qh(h,y){var A=h[1],U=y[1],J=A|U,ae=J<(nt|ke|Lt),Te=U==Lt&&A==$e||U==Lt&&A==ot&&h[7].length<=y[8]||U==(Lt|ot)&&y[7].length<=y[8]&&A==$e;if(!(ae||Te))return h;U&nt&&(h[2]=y[2],J|=A&nt?0:Le);var Ne=y[3];if(Ne){var Xe=h[3];h[3]=Xe?Gd(Xe,Ne,y[4]):Ne,h[4]=Xe?Es(h[3],X):y[4]}return Ne=y[5],Ne&&(Xe=h[5],h[5]=Xe?Yu(Xe,Ne,y[6]):Ne,h[6]=Xe?Es(h[5],X):y[6]),Ne=y[7],Ne&&(h[7]=Ne),U&Lt&&(h[8]=h[8]==null?y[8]:cr(h[8],y[8])),h[9]==null&&(h[9]=y[9]),h[0]=y[0],h[1]=J,h}function td(h){var y=[];if(h!=null)for(var A in Vn(h))y.push(A);return y}function fm(h){return Ut.call(h)}function ef(h,y,A){return y=Dr(y===a?h.length-1:y,0),function(){for(var U=arguments,J=-1,ae=Dr(U.length-y,0),Te=_t(ae);++J<ae;)Te[J]=U[y+J];J=-1;for(var Ne=_t(y+1);++J<y;)Ne[J]=U[J];return Ne[y]=A(Te),Dt(h,this,Ne)}}function pm(h,y){return y.length<2?h:Je(h,La(y,0,-1))}function I_(h,y){for(var A=h.length,U=cr(y.length,A),J=ms(h);U--;){var ae=y[U];h[U]=fc(ae,A)?J[ae]:a}return h}function mm(h,y){if(!(y==="constructor"&&typeof h[y]=="function")&&y!="__proto__")return h[y]}var Ap=pc(Yh),Xd=aa||function(h,y){return Kr.setTimeout(h,y)},id=pc(m_);function nd(h,y,A){var U=y+"";return id(h,Hd(U,za(M_(U),A)))}function pc(h){var y=0,A=0;return function(){var U=$u(),J=hi-(U-A);if(A=U,J>0){if(++y>=Wt)return arguments[0]}else y=0;return h.apply(a,arguments)}}function Kd(h,y){var A=-1,U=h.length,J=U-1;for(y=y===a?U:y;++A<y;){var ae=Po(A,J),Te=h[ae];h[ae]=h[A],h[A]=Te}return h.length=y,h}var _m=ed(function(h){var y=[];return h.charCodeAt(0)===46&&y.push(""),h.replace(pe,function(A,U,J,ae){y.push(J?ae.replace(Tt,"$1"):U||A)}),y});function da(h){if(typeof h=="string"||Bo(h))return h;var y=h+"";return y=="0"&&1/h==-mn?"-0":y}function Ol(h){if(h!=null){try{return We.call(h)}catch{}try{return h+""}catch{}}return""}function za(h,y){return mt(zs,function(A){var U="_."+A[0];y&A[1]&&!Mr(h,U)&&h.push(U)}),h.sort()}function Jd(h){if(h instanceof Wi)return h.clone();var y=new qo(h.__wrapped__,h.__chain__);return y.__actions__=ms(h.__actions__),y.__index__=h.__index__,y.__values__=h.__values__,y}function Oo(h,y,A){(A?Ro(h,y,A):y===a)?y=1:y=Dr(Hi(y),0);var U=h==null?0:h.length;if(!U||y<1)return[];for(var J=0,ae=0,Te=_t(sc(U/y));J<U;)Te[ae++]=La(h,J,J+=y);return Te}function Qa(h){for(var y=-1,A=h==null?0:h.length,U=0,J=[];++y<A;){var ae=h[y];ae&&(J[U++]=ae)}return J}function gm(){var h=arguments.length;if(!h)return[];for(var y=_t(h-1),A=arguments[0],U=h;U--;)y[U-1]=arguments[U];return yn(hn(A)?ms(A):[A],ue(y,1))}var Qr=dn(function(h,y){return yr(h)?ee(h,ue(y,1,yr,!0)):[]}),k_=dn(function(h,y){var A=el(y);return yr(A)&&(A=a),yr(h)?ee(h,ue(y,1,yr,!0),qi(A,2)):[]}),tf=dn(function(h,y){var A=el(y);return yr(A)&&(A=a),yr(h)?ee(h,ue(y,1,yr,!0),a,A):[]});function zl(h,y,A){var U=h==null?0:h.length;return U?(y=A||y===a?1:Hi(y),La(h,y<0?0:y,U)):[]}function N2(h,y,A){var U=h==null?0:h.length;return U?(y=A||y===a?1:Hi(y),y=U-y,La(h,0,y<0?0:y)):[]}function U2(h,y){return h&&h.length?xp(h,qi(y,3),!0,!0):[]}function D_(h,y){return h&&h.length?xp(h,qi(y,3),!0):[]}function P_(h,y,A,U){var J=h==null?0:h.length;return J?(A&&typeof A!="number"&&Ro(h,y,A)&&(A=0,U=J),se(h,y,A,U)):[]}function yu(h,y,A){var U=h==null?0:h.length;if(!U)return-1;var J=A==null?0:Hi(A);return J<0&&(J=Dr(U+J,0)),lo(h,qi(y,3),J)}function ym(h,y,A){var U=h==null?0:h.length;if(!U)return-1;var J=U-1;return A!==a&&(J=Hi(A),J=A<0?Dr(U+J,0):cr(J,U-1)),lo(h,qi(y,3),J,!0)}function vm(h){var y=h==null?0:h.length;return y?ue(h,1):[]}function L_(h){var y=h==null?0:h.length;return y?ue(h,mn):[]}function R_(h,y){var A=h==null?0:h.length;return A?(y=y===a?1:Hi(y),ue(h,y)):[]}function j2(h){for(var y=-1,A=h==null?0:h.length,U={};++y<A;){var J=h[y];U[J[0]]=J[1]}return U}function Ip(h){return h&&h.length?h[0]:a}function xm(h,y,A){var U=h==null?0:h.length;if(!U)return-1;var J=A==null?0:Hi(A);return J<0&&(J=Dr(U+J,0)),Ji(h,y,J)}function bm(h){var y=h==null?0:h.length;return y?La(h,0,-1):[]}var zo=dn(function(h){var y=gn(h,wp);return y.length&&y[0]===h[0]?ut(y):[]}),O_=dn(function(h){var y=el(h),A=gn(h,wp);return y===el(A)?y=a:A.pop(),A.length&&A[0]===h[0]?ut(A,qi(y,2)):[]}),V2=dn(function(h){var y=el(h),A=gn(h,wp);return y=typeof y=="function"?y:a,y&&A.pop(),A.length&&A[0]===h[0]?ut(A,a,y):[]});function z_(h,y){return h==null?"":Bd.call(h,y)}function el(h){var y=h==null?0:h.length;return y?h[y-1]:a}function $2(h,y,A){var U=h==null?0:h.length;if(!U)return-1;var J=U;return A!==a&&(J=Hi(A),J=J<0?Dr(U+J,0):cr(J,U-1)),y===y?zh(h,y,J):lo(h,Go,J,!0)}function B_(h,y){return h&&h.length?Gr(h,Hi(y)):a}var F_=dn(wm);function wm(h,y){return h&&h.length&&y&&y.length?Pa(h,y):h}function Tm(h,y,A){return h&&h.length&&y&&y.length?Pa(h,y,qi(A,2)):h}function jc(h,y,A){return h&&h.length&&y&&y.length?Pa(h,y,a,A):h}var ha=Ll(function(h,y){var A=h==null?0:h.length,U=M(h,y);return $s(h,gn(y,function(J){return fc(J,A)?+J:J}).sort(w_)),U});function G2(h,y){var A=[];if(!(h&&h.length))return A;var U=-1,J=[],ae=h.length;for(y=qi(y,3);++U<ae;){var Te=h[U];y(Te,U,h)&&(A.push(Te),J.push(U))}return $s(h,J),A}function nf(h){return h==null?h:q0.call(h)}function q2(h,y,A){var U=h==null?0:h.length;return U?(A&&typeof A!="number"&&Ro(h,y,A)?(y=0,A=U):(y=y==null?0:Hi(y),A=A===a?U:Hi(A)),La(h,y,A)):[]}function W2(h,y){return Xh(h,y)}function H2(h,y,A){return yp(h,y,qi(A,2))}function rf(h,y){var A=h==null?0:h.length;if(A){var U=Xh(h,y);if(U<A&&Bl(h[U],y))return U}return-1}function kp(h,y){return Xh(h,y,!0)}function N_(h,y,A){return yp(h,y,qi(A,2),!0)}function rd(h,y){var A=h==null?0:h.length;if(A){var U=Xh(h,y,!0)-1;if(Bl(h[U],y))return U}return-1}function sf(h){return h&&h.length?Y0(h):[]}function Z2(h,y){return h&&h.length?Y0(h,qi(y,2)):[]}function Y2(h){var y=h==null?0:h.length;return y?La(h,1,y):[]}function X2(h,y,A){return h&&h.length?(y=A||y===a?1:Hi(y),La(h,0,y<0?0:y)):[]}function K2(h,y,A){var U=h==null?0:h.length;return U?(y=A||y===a?1:Hi(y),y=U-y,La(h,y<0?0:y,U)):[]}function J2(h,y){return h&&h.length?xp(h,qi(y,3),!1,!0):[]}function Q2(h,y){return h&&h.length?xp(h,qi(y,3)):[]}var ev=dn(function(h){return Bc(ue(h,1,yr,!0))}),Em=dn(function(h){var y=el(h);return yr(y)&&(y=a),Bc(ue(h,1,yr,!0),qi(y,2))}),tv=dn(function(h){var y=el(h);return y=typeof y=="function"?y:a,Bc(ue(h,1,yr,!0),a,y)});function Qd(h){return h&&h.length?Bc(h):[]}function iv(h,y){return h&&h.length?Bc(h,qi(y,2)):[]}function ss(h,y){return y=typeof y=="function"?y:a,h&&h.length?Bc(h,a,y):[]}function eh(h){if(!(h&&h.length))return[];var y=0;return h=wi(h,function(A){if(yr(A))return y=Dr(A.length,y),!0}),Io(y,function(A){return gn(h,Ao(A))})}function Sm(h,y){if(!(h&&h.length))return[];var A=eh(h);return y==null?A:gn(A,function(U){return Dt(y,a,U)})}var Dp=dn(function(h,y){return yr(h)?ee(h,y):[]}),Pp=dn(function(h){return bp(wi(h,yr))}),of=dn(function(h){var y=el(h);return yr(y)&&(y=a),bp(wi(h,yr),qi(y,2))}),U_=dn(function(h){var y=el(h);return y=typeof y=="function"?y:a,bp(wi(h,yr),a,y)}),j_=dn(eh);function af(h,y){return K0(h||[],y||[],f)}function Cm(h,y){return K0(h||[],y||[],zc)}var Mm=dn(function(h){var y=h.length,A=y>1?h[y-1]:a;return A=typeof A=="function"?(h.pop(),A):a,Sm(h,A)});function V_(h){var y=re(h);return y.__chain__=!0,y}function $_(h,y){return y(h),h}function vu(h,y){return y(h)}var nv=Ll(function(h){var y=h.length,A=y?h[0]:0,U=this.__wrapped__,J=function(ae){return M(ae,h)};return y>1||this.__actions__.length||!(U instanceof Wi)||!fc(A)?this.thru(J):(U=U.slice(A,+A+(y?1:0)),U.__actions__.push({func:vu,args:[J],thisArg:a}),new qo(U,this.__chain__).thru(function(ae){return y&&!ae.length&&ae.push(a),ae}))});function Am(){return V_(this)}function rv(){return new qo(this.value(),this.__chain__)}function Im(){this.__values__===a&&(this.__values__=Gp(this.value()));var h=this.__index__>=this.__values__.length,y=h?a:this.__values__[this.__index__++];return{done:h,value:y}}function km(){return this}function Lp(h){for(var y,A=this;A instanceof qu;){var U=Jd(A);U.__index__=0,U.__values__=a,y?J.__wrapped__=U:y=U;var J=U;A=A.__wrapped__}return J.__wrapped__=h,y}function sv(){var h=this.__wrapped__;if(h instanceof Wi){var y=h;return this.__actions__.length&&(y=new Wi(this)),y=y.reverse(),y.__actions__.push({func:vu,args:[nf],thisArg:a}),new qo(y,this.__chain__)}return this.thru(nf)}function ov(){return Zu(this.__wrapped__,this.__actions__)}var av=dc(function(h,y,A){pt.call(h,A)?++h[A]:w(h,A,1)});function lv(h,y,A){var U=hn(h)?nn:de;return A&&Ro(h,y,A)&&(y=a),U(h,qi(y,3))}function cv(h,y){var A=hn(h)?wi:me;return A(h,qi(y,3))}var uv=S_(yu),Rp=S_(ym);function dv(h,y){return ue(Op(h,y),1)}function G_(h,y){return ue(Op(h,y),mn)}function th(h,y,A){return A=A===a?1:Hi(A),ue(Op(h,y),A)}function q_(h,y){var A=hn(h)?mt:le;return A(h,qi(y,3))}function W_(h,y){var A=hn(h)?Jt:ce;return A(h,qi(y,3))}var hv=dc(function(h,y,A){pt.call(h,A)?h[A].push(y):w(h,A,[y])});function H_(h,y,A,U){h=hr(h)?h:ad(h),A=A&&!U?Hi(A):0;var J=h.length;return A<0&&(A=Dr(J+A,0)),$p(h)?A<=J&&h.indexOf(y,A)>-1:!!J&&Ji(h,y,A)>-1}var Z_=dn(function(h,y,A){var U=-1,J=typeof y=="function",ae=hr(h)?_t(h.length):[];return le(h,function(Te){ae[++U]=J?Dt(y,Te,A):jt(Te,y,A)}),ae}),fv=dc(function(h,y,A){w(h,A,y)});function Op(h,y){var A=hn(h)?gn:Qs;return A(h,qi(y,3))}function pv(h,y,A,U){return h==null?[]:(hn(y)||(y=y==null?[]:[y]),A=U?a:A,hn(A)||(A=A==null?[]:[A]),Vs(h,y,A))}var Dm=dc(function(h,y,A){h[A?0:1].push(y)},function(){return[[],[]]});function zp(h,y,A){var U=hn(h)?Gi:Aa,J=arguments.length<3;return U(h,qi(y,4),A,J,le)}function Bp(h,y,A){var U=hn(h)?Ps:Aa,J=arguments.length<3;return U(h,qi(y,4),A,J,ce)}function mv(h,y){var A=hn(h)?wi:me;return A(h,xu(qi(y,3)))}function _v(h){var y=hn(h)?Hh:mu;return y(h)}function lf(h,y,A){(A?Ro(h,y,A):y===a)?y=1:y=Hi(y);var U=hn(h)?gp:Ka;return U(h,y)}function cf(h){var y=hn(h)?Zh:Z0;return y(h)}function Y_(h){if(h==null)return 0;if(hr(h))return $p(h)?Dn(h):h.length;var y=Lo(h);return y==tt||y==Nt?h.size:Hn(h).length}function uf(h,y,A){var U=hn(h)?bn:__;return A&&Ro(h,y,A)&&(y=a),U(h,qi(y,3))}var X_=dn(function(h,y){if(h==null)return[];var A=y.length;return A>1&&Ro(h,y[0],y[1])?y=[]:A>2&&Ro(y[0],y[1],y[2])&&(y=[y[0]]),Vs(h,ue(y,1),[])}),Fp=li||function(){return Kr.Date.now()};function K_(h,y){if(typeof y!="function")throw new Js(E);return h=Hi(h),function(){if(--h<1)return y.apply(this,arguments)}}function Pm(h,y,A){return y=A?a:y,y=h&&y==null?h.length:y,io(h,Lt,a,a,a,a,y)}function Lm(h,y){var A;if(typeof y!="function")throw new Js(E);return h=Hi(h),function(){return--h>0&&(A=y.apply(this,arguments)),h<=1&&(y=a),A}}var Np=dn(function(h,y,A){var U=nt;if(A.length){var J=Es(A,Uc(Np));U|=Fe}return io(h,U,y,A,J)}),Rm=dn(function(h,y,A){var U=nt|ke;if(A.length){var J=Es(A,Uc(Rm));U|=Fe}return io(y,U,h,A,J)});function Om(h,y,A){y=A?a:y;var U=io(h,$e,a,a,a,a,a,y);return U.placeholder=Om.placeholder,U}function J_(h,y,A){y=A?a:y;var U=io(h,Et,a,a,a,a,a,y);return U.placeholder=J_.placeholder,U}function Q_(h,y,A){var U,J,ae,Te,Ne,Xe,Pt=0,Ft=!1,Zt=!1,gi=!0;if(typeof h!="function")throw new Js(E);y=po(y)||0,qr(A)&&(Ft=!!A.leading,Zt="maxWait"in A,ae=Zt?Dr(po(A.maxWait)||0,y):ae,gi="trailing"in A?!!A.trailing:gi);function Ri(_s){var no=U,yc=J;return U=J=a,Pt=_s,Te=h.apply(yc,no),Te}function Xi(_s){return Pt=_s,Ne=Xd(Ln,y),Ft?Ri(_s):Te}function Cn(_s){var no=_s-Xe,yc=_s-Pt,Sf=y-no;return Zt?cr(Sf,ae-yc):Sf}function en(_s){var no=_s-Xe,yc=_s-Pt;return Xe===a||no>=y||no<0||Zt&&yc>=ae}function Ln(){var _s=Fp();if(en(_s))return $n(_s);Ne=Xd(Ln,Cn(_s))}function $n(_s){return Ne=a,gi&&U?Ri(_s):(U=J=a,Te)}function fa(){Ne!==a&&Kh(Ne),Pt=0,U=Xe=J=Ne=a}function Fo(){return Ne===a?Te:$n(Fp())}function pa(){var _s=Fp(),no=en(_s);if(U=arguments,J=this,Xe=_s,no){if(Ne===a)return Xi(Xe);if(Zt)return Kh(Ne),Ne=Xd(Ln,y),Ri(Xe)}return Ne===a&&(Ne=Xd(Ln,y)),Te}return pa.cancel=fa,pa.flush=Fo,pa}var eg=dn(function(h,y){return W(h,1,y)}),Up=dn(function(h,y,A){return W(h,po(y)||0,A)});function tg(h){return io(h,bt)}function Gs(h,y){if(typeof h!="function"||y!=null&&typeof y!="function")throw new Js(E);var A=function(){var U=arguments,J=y?y.apply(this,U):U[0],ae=A.cache;if(ae.has(J))return ae.get(J);var Te=h.apply(this,U);return A.cache=ae.set(J,Te)||ae,Te};return A.cache=new(Gs.Cache||Ya),A}Gs.Cache=Ya;function xu(h){if(typeof h!="function")throw new Js(E);return function(){var y=arguments;switch(y.length){case 0:return!h.call(this);case 1:return!h.call(this,y[0]);case 2:return!h.call(this,y[0],y[1]);case 3:return!h.call(this,y[0],y[1],y[2])}return!h.apply(this,y)}}function ih(h){return Lm(2,h)}var df=y_(function(h,y){y=y.length==1&&hn(y[0])?gn(y[0],Us(qi())):gn(ue(y,1),Us(qi()));var A=y.length;return dn(function(U){for(var J=-1,ae=cr(U.length,A);++J<ae;)U[J]=y[J].call(this,U[J]);return Dt(h,this,U)})}),jp=dn(function(h,y){var A=Es(y,Uc(jp));return io(h,Fe,a,y,A)}),zm=dn(function(h,y){var A=Es(y,Uc(zm));return io(h,z,a,y,A)}),gv=Ll(function(h,y){return io(h,ot,a,a,a,y)});function yv(h,y){if(typeof h!="function")throw new Js(E);return y=y===a?y:Hi(y),dn(h,y)}function vv(h,y){if(typeof h!="function")throw new Js(E);return y=y==null?0:Dr(Hi(y),0),dn(function(A){var U=A[y],J=cc(A,0,y);return U&&yn(J,U),Dt(h,this,J)})}function xv(h,y,A){var U=!0,J=!0;if(typeof h!="function")throw new Js(E);return qr(A)&&(U="leading"in A?!!A.leading:U,J="trailing"in A?!!A.trailing:J),Q_(h,y,{leading:U,maxWait:y,trailing:J})}function bv(h){return Pm(h,1)}function wv(h,y){return jp(J0(y),h)}function Vp(){if(!arguments.length)return[];var h=arguments[0];return hn(h)?h:[h]}function Tv(h){return L(h,Se)}function ig(h,y){return y=typeof y=="function"?y:a,L(h,Se,y)}function ng(h){return L(h,Z|Se)}function rg(h,y){return y=typeof y=="function"?y:a,L(h,Z|Se,y)}function Ev(h,y){return y==null||N(h,y,as(y))}function Bl(h,y){return h===y||h!==h&&y!==y}var Sv=Ra(Ke),Cv=Ra(function(h,y){return h>=y}),sd=Ze(function(){return arguments}())?Ze:function(h){return os(h)&&pt.call(h,"callee")&&!er.call(h,"callee")},hn=_t.isArray,Mv=K?Us(K):at;function hr(h){return h!=null&&Jn(h.length)&&!mc(h)}function yr(h){return os(h)&&hr(h)}function Bm(h){return h===!0||h===!1||os(h)&&It(h)==ds}var Fl=au||l1,nh=te?Us(te):mi;function Av(h){return os(h)&&h.nodeType===1&&!pf(h)}function Iv(h){if(h==null)return!0;if(hr(h)&&(hn(h)||typeof h=="string"||typeof h.splice=="function"||Fl(h)||Nl(h)||sd(h)))return!h.length;var y=Lo(h);if(y==tt||y==Nt)return!h.size;if(Yd(h))return!Hn(h).length;for(var A in h)if(pt.call(h,A))return!1;return!0}function hf(h,y){return Ei(h,y)}function kv(h,y,A){A=typeof A=="function"?A:a;var U=A?A(h,y):a;return U===a?Ei(h,y,a,A):!!U}function Fm(h){if(!os(h))return!1;var y=It(h);return y==Uo||y==bs||typeof h.message=="string"&&typeof h.name=="string"&&!pf(h)}function ff(h){return typeof h=="number"&&Bh(h)}function mc(h){if(!qr(h))return!1;var y=It(h);return y==Ce||y==Ve||y==Zr||y==Xt}function Nm(h){return typeof h=="number"&&h==Hi(h)}function Jn(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=tn}function qr(h){var y=typeof h;return h!=null&&(y=="object"||y=="function")}function os(h){return h!=null&&typeof h=="object"}var Um=ze?Us(ze):zi;function Vc(h,y){return h===y||sn(h,y,Ep(y))}function rh(h,y,A){return A=typeof A=="function"?A:a,sn(h,y,Ep(y),A)}function sg(h){return og(h)&&h!=+h}function Dv(h){if(A_(h))throw new Qi(x);return Mi(h)}function Pv(h){return h===null}function Lv(h){return h==null}function og(h){return typeof h=="number"||os(h)&&It(h)==kt}function pf(h){if(!os(h)||It(h)!=zt)return!1;var y=$r(h);if(y===null)return!0;var A=pt.call(y,"constructor")&&y.constructor;return typeof A=="function"&&A instanceof A&&We.call(A)==Bi}var jm=Me?Us(Me):ci;function Rv(h){return Nm(h)&&h>=-tn&&h<=tn}var ag=et?Us(et):Kn;function $p(h){return typeof h=="string"||!hn(h)&&os(h)&&It(h)==pi}function Bo(h){return typeof h=="symbol"||os(h)&&It(h)==di}var Nl=gt?Us(gt):zn;function lg(h){return h===a}function Ov(h){return os(h)&&Lo(h)==Di}function zv(h){return os(h)&&It(h)==Yi}var Bv=Ra(fo),Vm=Ra(function(h,y){return h<=y});function Gp(h){if(!h)return[];if(hr(h))return $p(h)?Ks(h):ms(h);if(Jr&&h[Jr])return su(h[Jr]());var y=Lo(h),A=y==tt?nc:y==Nt?Wa:ad;return A(h)}function _c(h){if(!h)return h===0?h:0;if(h=po(h),h===mn||h===-mn){var y=h<0?-1:1;return y*ts}return h===h?h:0}function Hi(h){var y=_c(h),A=y%1;return y===y?A?y-A:y:0}function sh(h){return h?k(Hi(h),0,Nn):0}function po(h){if(typeof h=="number")return h;if(Bo(h))return Fn;if(qr(h)){var y=typeof h.valueOf=="function"?h.valueOf():h;h=qr(y)?y+"":y}if(typeof h!="string")return h===0?h:+h;h=Ql(h);var A=Ci.test(h);return A||Li.test(h)?nu(h.slice(2),A?2:8):Ai.test(h)?Fn:+h}function qp(h){return Ls(h,Yo(h))}function Wp(h){return h?k(Hi(h),-tn,tn):h===0?h:0}function vr(h){return h==null?"":ca(h)}var cg=qd(function(h,y){if(Yd(y)||hr(y)){Ls(y,as(y),h);return}for(var A in y)pt.call(y,A)&&f(h,A,y[A])}),$m=qd(function(h,y){Ls(y,Yo(y),h)}),Hp=qd(function(h,y,A,U){Ls(y,Yo(y),h,U)}),ug=qd(function(h,y,A,U){Ls(y,as(y),h,U)}),dg=Ll(M);function Gm(h,y){var A=Il(h);return y==null?A:m(A,y)}var hg=dn(function(h,y){h=Vn(h);var A=-1,U=y.length,J=U>2?y[2]:a;for(J&&Ro(y[0],y[1],J)&&(U=1);++A<U;)for(var ae=y[A],Te=Yo(ae),Ne=-1,Xe=Te.length;++Ne<Xe;){var Pt=Te[Ne],Ft=h[Pt];(Ft===a||Bl(Ft,je[Pt])&&!pt.call(h,Pt))&&(h[Pt]=ae[Pt])}return h}),Fv=dn(function(h){return h.push(a,Ku),Dt(mf,a,h)});function fg(h,y){return ps(h,qi(y,3),we)}function $c(h,y){return ps(h,qi(y,3),Ue)}function pg(h,y){return h==null?h:xe(h,qi(y,3),Yo)}function mg(h,y){return h==null?h:De(h,qi(y,3),Yo)}function _g(h,y){return h&&we(h,qi(y,3))}function gg(h,y){return h&&Ue(h,qi(y,3))}function Nv(h){return h==null?[]:st(h,as(h))}function Uv(h){return h==null?[]:st(h,Yo(h))}function Zp(h,y,A){var U=h==null?a:Je(h,y);return U===a?A:U}function yg(h,y){return h!=null&&um(h,y,vt)}function od(h,y){return h!=null&&um(h,y,lt)}var vg=Nc(function(h,y,A){y!=null&&typeof y.toString!="function"&&(y=Ut.call(y)),h[y]=A},r1(Ms)),xg=Nc(function(h,y,A){y!=null&&typeof y.toString!="function"&&(y=Ut.call(y)),pt.call(h,y)?h[y].push(A):h[y]=[A]},qi),qm=dn(jt);function as(h){return hr(h)?Vd(h):Hn(h)}function Yo(h){return hr(h)?Vd(h,!0):Do(h)}function Yp(h,y){var A={};return y=qi(y,3),we(h,function(U,J,ae){w(A,y(U,J,ae),U)}),A}function bg(h,y){var A={};return y=qi(y,3),we(h,function(U,J,ae){w(A,J,y(U,J,ae))}),A}var Xp=qd(function(h,y,A){Zn(h,y,A)}),mf=qd(function(h,y,A,U){Zn(h,y,A,U)}),jv=Ll(function(h,y){var A={};if(h==null)return A;var U=!1;y=gn(y,function(ae){return ae=Dl(ae,h),U||(U=ae.length>1),ae}),Ls(h,am(h),A),U&&(A=L(A,Z|he|Se,rm));for(var J=y.length;J--;)vp(A,y[J]);return A});function Vv(h,y){return wg(h,xu(qi(y)))}var $v=Ll(function(h,y){return h==null?{}:dr(h,y)});function wg(h,y){if(h==null)return{};var A=gn(am(h),function(U){return[U]});return y=qi(y),eo(h,A,function(U,J){return y(U,J[0])})}function Gv(h,y,A){y=Dl(y,h);var U=-1,J=y.length;for(J||(J=1,h=a);++U<J;){var ae=h==null?a:h[da(y[U])];ae===a&&(U=J,ae=A),h=mc(ae)?ae.call(h):ae}return h}function oh(h,y,A){return h==null?h:zc(h,y,A)}function Wm(h,y,A,U){return U=typeof U=="function"?U:a,h==null?h:zc(h,y,A,U)}var Tg=im(as),Hm=im(Yo);function qv(h,y,A){var U=hn(h),J=U||Fl(h)||Nl(h);if(y=qi(y,4),A==null){var ae=h&&h.constructor;J?A=U?new ae:[]:qr(h)?A=mc(ae)?Il($r(h)):{}:A={}}return(J?mt:we)(h,function(Te,Ne,Xe){return y(A,Te,Ne,Xe)}),A}function Zm(h,y){return h==null?!0:vp(h,y)}function Wv(h,y,A){return h==null?h:g_(h,y,J0(A))}function bu(h,y,A,U){return U=typeof U=="function"?U:a,h==null?h:g_(h,y,J0(A),U)}function ad(h){return h==null?[]:bl(h,as(h))}function Eg(h){return h==null?[]:bl(h,Yo(h))}function Kp(h,y,A){return A===a&&(A=y,y=a),A!==a&&(A=po(A),A=A===A?A:0),y!==a&&(y=po(y),y=y===y?y:0),k(po(h),y,A)}function Ym(h,y,A){return y=_c(y),A===a?(A=y,y=0):A=_c(A),h=po(h),Bt(h,y,A)}function Hv(h,y,A){if(A&&typeof A!="boolean"&&Ro(h,y,A)&&(y=A=a),A===a&&(typeof y=="boolean"?(A=y,y=a):typeof h=="boolean"&&(A=h,h=a)),h===a&&y===a?(h=0,y=1):(h=_c(h),y===a?(y=h,h=0):y=_c(y)),h>y){var U=h;h=y,y=U}if(A||h%1||y%1){var J=op();return cr(h+J*(y-h+kc("1e-"+((J+"").length-1))),y)}return Po(h,y)}var Zv=Fc(function(h,y,A){return y=y.toLowerCase(),h+(A?Xm(y):y)});function Xm(h){return e0(vr(h).toLowerCase())}function Km(h){return h=vr(h),h&&h.replace(Mn,Pd).replace(Xr,"")}function _f(h,y,A){h=vr(h),y=ca(y);var U=h.length;A=A===a?U:k(Hi(A),0,U);var J=A;return A-=y.length,A>=0&&h.slice(A,J)==y}function Gc(h){return h=vr(h),h&&Xl.test(h)?h.replace(Eo,wl):h}function Jm(h){return h=vr(h),h&&Q.test(h)?h.replace(q,"\\$&"):h}var ah=Fc(function(h,y,A){return h+(A?"-":"")+y.toLowerCase()}),lh=Fc(function(h,y,A){return h+(A?" ":"")+y.toLowerCase()}),tl=em("toLowerCase");function il(h,y,A){h=vr(h),y=Hi(y);var U=y?Dn(h):0;if(!y||U>=y)return h;var J=(y-U)/2;return Jh(Vu(J),A)+h+Jh(sc(J),A)}function Yv(h,y,A){h=vr(h),y=Hi(y);var U=y?Dn(h):0;return y&&U<y?h+Jh(y-U,A):h}function Sg(h,y,A){h=vr(h),y=Hi(y);var U=y?Dn(h):0;return y&&U<y?Jh(y-U,A)+h:h}function Xv(h,y,A){return A||y==null?y=0:y&&(y=+y),cu(vr(h).replace(fe,""),y||0)}function Qm(h,y,A){return(A?Ro(h,y,A):y===a)?y=1:y=Hi(y),la(vr(h),y)}function gc(){var h=arguments,y=vr(h[0]);return h.length<3?y:y.replace(h[1],h[2])}var ld=Fc(function(h,y,A){return h+(A?"_":"")+y.toLowerCase()});function Cg(h,y,A){return A&&typeof A!="number"&&Ro(h,y,A)&&(y=A=a),A=A===a?Nn:A>>>0,A?(h=vr(h),h&&(typeof y=="string"||y!=null&&!jm(y))&&(y=ca(y),!y&&Ia(h))?cc(Ks(h),0,A):h.split(y,A)):[]}var Mg=Fc(function(h,y,A){return h+(A?" ":"")+e0(y)});function Kv(h,y,A){return h=vr(h),A=A==null?0:k(Hi(A),0,h.length),y=ca(y),h.slice(A,A+y.length)==y}function Jp(h,y,A){var U=re.templateSettings;A&&Ro(h,y,A)&&(y=a),h=vr(h),y=Hp({},y,U,nm);var J=Hp({},y.imports,U.imports,nm),ae=as(J),Te=bl(J,ae),Ne,Xe,Pt=0,Ft=y.interpolate||bi,Zt="__p += '",gi=rc((y.escape||bi).source+"|"+Ft.source+"|"+(Ft===Fs?ii:bi).source+"|"+(y.evaluate||bi).source+"|$","g"),Ri="//# sourceURL="+(pt.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tu+"]")+`
`;h.replace(gi,function(en,Ln,$n,fa,Fo,pa){return $n||($n=fa),Zt+=h.slice(Pt,pa).replace(Xn,Nu),Ln&&(Ne=!0,Zt+=`' +
__e(`+Ln+`) +
'`),Fo&&(Xe=!0,Zt+=`';
`+Fo+`;
__p += '`),$n&&(Zt+=`' +
((__t = (`+$n+`)) == null ? '' : __t) +
'`),Pt=pa+en.length,en}),Zt+=`';
`;var Xi=pt.call(y,"variable")&&y.variable;if(!Xi)Zt=`with (obj) {
`+Zt+`
}
`;else if(Qe.test(Xi))throw new Qi(o);Zt=(Xe?Zt.replace(ia,""):Zt).replace(Yl,"$1").replace(dl,"$1;"),Zt="function("+(Xi||"obj")+`) {
`+(Xi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ne?", __e = _.escape":"")+(Xe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Zt+`return __p
}`;var Cn=i1(function(){return On(ae,Ri+"return "+Zt).apply(a,Te)});if(Cn.source=Zt,Fm(Cn))throw Cn;return Cn}function e1(h){return vr(h).toLowerCase()}function ch(h){return vr(h).toUpperCase()}function gf(h,y,A){if(h=vr(h),h&&(A||y===a))return Ql(h);if(!h||!(y=ca(y)))return h;var U=Ks(h),J=Ks(y),ae=Fu(U,J),Te=tc(U,J)+1;return cc(U,ae,Te).join("")}function yf(h,y,A){if(h=vr(h),h&&(A||y===a))return h.slice(0,Ss(h)+1);if(!h||!(y=ca(y)))return h;var U=Ks(h),J=tc(U,Ks(y))+1;return cc(U,0,J).join("")}function Qp(h,y,A){if(h=vr(h),h&&(A||y===a))return h.replace(fe,"");if(!h||!(y=ca(y)))return h;var U=Ks(h),J=Fu(U,Ks(y));return cc(U,J).join("")}function Ag(h,y){var A=Ht,U=Yt;if(qr(y)){var J="separator"in y?y.separator:J;A="length"in y?Hi(y.length):A,U="omission"in y?ca(y.omission):U}h=vr(h);var ae=h.length;if(Ia(h)){var Te=Ks(h);ae=Te.length}if(A>=ae)return h;var Ne=A-Dn(U);if(Ne<1)return U;var Xe=Te?cc(Te,0,Ne).join(""):h.slice(0,Ne);if(J===a)return Xe+U;if(Te&&(Ne+=Xe.length-Ne),jm(J)){if(h.slice(Ne).search(J)){var Pt,Ft=Xe;for(J.global||(J=rc(J.source,vr(Ot.exec(J))+"g")),J.lastIndex=0;Pt=J.exec(Ft);)var Zt=Pt.index;Xe=Xe.slice(0,Zt===a?Ne:Zt)}}else if(h.indexOf(ca(J),Ne)!=Ne){var gi=Xe.lastIndexOf(J);gi>-1&&(Xe=Xe.slice(0,gi))}return Xe+U}function vf(h){return h=vr(h),h&&Ea.test(h)?h.replace(oo,co):h}var t1=Fc(function(h,y,A){return h+(A?" ":"")+y.toUpperCase()}),e0=em("toUpperCase");function cd(h,y,A){return h=vr(h),y=A?a:y,y===a?Tl(h)?Rd(h):vl(h):h.match(y)||[]}var i1=dn(function(h,y){try{return Dt(h,a,y)}catch(A){return Fm(A)?A:new Qi(A)}}),n1=Ll(function(h,y){return mt(y,function(A){A=da(A),w(h,A,Np(h[A],h))}),h});function Ig(h){var y=h==null?0:h.length,A=qi();return h=y?gn(h,function(U){if(typeof U[1]!="function")throw new Js(E);return[A(U[0]),U[1]]}):[],dn(function(U){for(var J=-1;++J<y;){var ae=h[J];if(Dt(ae[0],this,U))return Dt(ae[1],this,U)}})}function Jv(h){return j(L(h,Z))}function r1(h){return function(){return h}}function kg(h,y){return h==null||h!==h?y:h}var ud=rs(),Qv=rs(!0);function Ms(h){return h}function s1(h){return tr(typeof h=="function"?h:L(h,Z))}function xf(h){return Da(L(h,Z))}function bf(h,y){return ur(h,L(y,Z))}var wf=dn(function(h,y){return function(A){return jt(A,h,y)}}),Tf=dn(function(h,y){return function(A){return jt(h,A,y)}});function uh(h,y,A){var U=as(y),J=st(y,U);A==null&&!(qr(y)&&(J.length||!U.length))&&(A=y,y=h,h=this,J=st(y,as(y)));var ae=!(qr(A)&&"chain"in A)||!!A.chain,Te=mc(h);return mt(J,function(Ne){var Xe=y[Ne];h[Ne]=Xe,Te&&(h.prototype[Ne]=function(){var Pt=this.__chain__;if(ae||Pt){var Ft=h(this.__wrapped__),Zt=Ft.__actions__=ms(this.__actions__);return Zt.push({func:Xe,args:arguments,thisArg:h}),Ft.__chain__=Pt,Ft}return Xe.apply(h,yn([this.value()],arguments))})}),h}function ex(){return Kr._===this&&(Kr._=ji),this}function o1(){}function dh(h){return h=Hi(h),dn(function(y){return Gr(y,h)})}var t0=En(gn),tx=En(nn),Dg=En(bn);function a1(h){return hm(h)?Ao(da(h)):Hu(h)}function ix(h){return function(y){return h==null?a:Je(h,y)}}var Pg=Pl(),nx=Pl(!0);function i0(){return[]}function l1(){return!1}function Lg(){return{}}function rx(){return""}function sx(){return!0}function n0(h,y){if(h=Hi(h),h<1||h>tn)return[];var A=Nn,U=cr(h,Nn);y=qi(y),h-=Nn;for(var J=Io(U,y);++A<h;)y(A);return J}function r0(h){return hn(h)?gn(h,da):Bo(h)?[h]:ms(_m(vr(h)))}function s0(h){var y=++$t;return vr(h)+y}var ox=Xu(function(h,y){return h+y},0),c1=Zo("ceil"),u1=Xu(function(h,y){return h/y},1),wu=Zo("floor");function ax(h){return h&&h.length?ie(h,Ms,Ke):a}function d1(h,y){return h&&h.length?ie(h,qi(y,2),Ke):a}function Rg(h){return Xs(h,Ms)}function o0(h,y){return Xs(h,qi(y,2))}function lx(h){return h&&h.length?ie(h,Ms,fo):a}function cx(h,y){return h&&h.length?ie(h,qi(y,2),fo):a}var ux=Xu(function(h,y){return h*y},1),dx=Zo("round"),h1=Xu(function(h,y){return h-y},0);function hx(h){return h&&h.length?jn(h,Ms):0}function Ef(h,y){return h&&h.length?jn(h,qi(y,2)):0}return re.after=K_,re.ary=Pm,re.assign=cg,re.assignIn=$m,re.assignInWith=Hp,re.assignWith=ug,re.at=dg,re.before=Lm,re.bind=Np,re.bindAll=n1,re.bindKey=Rm,re.castArray=Vp,re.chain=V_,re.chunk=Oo,re.compact=Qa,re.concat=gm,re.cond=Ig,re.conforms=Jv,re.constant=r1,re.countBy=av,re.create=Gm,re.curry=Om,re.curryRight=J_,re.debounce=Q_,re.defaults=hg,re.defaultsDeep=Fv,re.defer=eg,re.delay=Up,re.difference=Qr,re.differenceBy=k_,re.differenceWith=tf,re.drop=zl,re.dropRight=N2,re.dropRightWhile=U2,re.dropWhile=D_,re.fill=P_,re.filter=cv,re.flatMap=dv,re.flatMapDeep=G_,re.flatMapDepth=th,re.flatten=vm,re.flattenDeep=L_,re.flattenDepth=R_,re.flip=tg,re.flow=ud,re.flowRight=Qv,re.fromPairs=j2,re.functions=Nv,re.functionsIn=Uv,re.groupBy=hv,re.initial=bm,re.intersection=zo,re.intersectionBy=O_,re.intersectionWith=V2,re.invert=vg,re.invertBy=xg,re.invokeMap=Z_,re.iteratee=s1,re.keyBy=fv,re.keys=as,re.keysIn=Yo,re.map=Op,re.mapKeys=Yp,re.mapValues=bg,re.matches=xf,re.matchesProperty=bf,re.memoize=Gs,re.merge=Xp,re.mergeWith=mf,re.method=wf,re.methodOf=Tf,re.mixin=uh,re.negate=xu,re.nthArg=dh,re.omit=jv,re.omitBy=Vv,re.once=ih,re.orderBy=pv,re.over=t0,re.overArgs=df,re.overEvery=tx,re.overSome=Dg,re.partial=jp,re.partialRight=zm,re.partition=Dm,re.pick=$v,re.pickBy=wg,re.property=a1,re.propertyOf=ix,re.pull=F_,re.pullAll=wm,re.pullAllBy=Tm,re.pullAllWith=jc,re.pullAt=ha,re.range=Pg,re.rangeRight=nx,re.rearg=gv,re.reject=mv,re.remove=G2,re.rest=yv,re.reverse=nf,re.sampleSize=lf,re.set=oh,re.setWith=Wm,re.shuffle=cf,re.slice=q2,re.sortBy=X_,re.sortedUniq=sf,re.sortedUniqBy=Z2,re.split=Cg,re.spread=vv,re.tail=Y2,re.take=X2,re.takeRight=K2,re.takeRightWhile=J2,re.takeWhile=Q2,re.tap=$_,re.throttle=xv,re.thru=vu,re.toArray=Gp,re.toPairs=Tg,re.toPairsIn=Hm,re.toPath=r0,re.toPlainObject=qp,re.transform=qv,re.unary=bv,re.union=ev,re.unionBy=Em,re.unionWith=tv,re.uniq=Qd,re.uniqBy=iv,re.uniqWith=ss,re.unset=Zm,re.unzip=eh,re.unzipWith=Sm,re.update=Wv,re.updateWith=bu,re.values=ad,re.valuesIn=Eg,re.without=Dp,re.words=cd,re.wrap=wv,re.xor=Pp,re.xorBy=of,re.xorWith=U_,re.zip=j_,re.zipObject=af,re.zipObjectDeep=Cm,re.zipWith=Mm,re.entries=Tg,re.entriesIn=Hm,re.extend=$m,re.extendWith=Hp,uh(re,re),re.add=ox,re.attempt=i1,re.camelCase=Zv,re.capitalize=Xm,re.ceil=c1,re.clamp=Kp,re.clone=Tv,re.cloneDeep=ng,re.cloneDeepWith=rg,re.cloneWith=ig,re.conformsTo=Ev,re.deburr=Km,re.defaultTo=kg,re.divide=u1,re.endsWith=_f,re.eq=Bl,re.escape=Gc,re.escapeRegExp=Jm,re.every=lv,re.find=uv,re.findIndex=yu,re.findKey=fg,re.findLast=Rp,re.findLastIndex=ym,re.findLastKey=$c,re.floor=wu,re.forEach=q_,re.forEachRight=W_,re.forIn=pg,re.forInRight=mg,re.forOwn=_g,re.forOwnRight=gg,re.get=Zp,re.gt=Sv,re.gte=Cv,re.has=yg,re.hasIn=od,re.head=Ip,re.identity=Ms,re.includes=H_,re.indexOf=xm,re.inRange=Ym,re.invoke=qm,re.isArguments=sd,re.isArray=hn,re.isArrayBuffer=Mv,re.isArrayLike=hr,re.isArrayLikeObject=yr,re.isBoolean=Bm,re.isBuffer=Fl,re.isDate=nh,re.isElement=Av,re.isEmpty=Iv,re.isEqual=hf,re.isEqualWith=kv,re.isError=Fm,re.isFinite=ff,re.isFunction=mc,re.isInteger=Nm,re.isLength=Jn,re.isMap=Um,re.isMatch=Vc,re.isMatchWith=rh,re.isNaN=sg,re.isNative=Dv,re.isNil=Lv,re.isNull=Pv,re.isNumber=og,re.isObject=qr,re.isObjectLike=os,re.isPlainObject=pf,re.isRegExp=jm,re.isSafeInteger=Rv,re.isSet=ag,re.isString=$p,re.isSymbol=Bo,re.isTypedArray=Nl,re.isUndefined=lg,re.isWeakMap=Ov,re.isWeakSet=zv,re.join=z_,re.kebabCase=ah,re.last=el,re.lastIndexOf=$2,re.lowerCase=lh,re.lowerFirst=tl,re.lt=Bv,re.lte=Vm,re.max=ax,re.maxBy=d1,re.mean=Rg,re.meanBy=o0,re.min=lx,re.minBy=cx,re.stubArray=i0,re.stubFalse=l1,re.stubObject=Lg,re.stubString=rx,re.stubTrue=sx,re.multiply=ux,re.nth=B_,re.noConflict=ex,re.noop=o1,re.now=Fp,re.pad=il,re.padEnd=Yv,re.padStart=Sg,re.parseInt=Xv,re.random=Hv,re.reduce=zp,re.reduceRight=Bp,re.repeat=Qm,re.replace=gc,re.result=Gv,re.round=dx,re.runInContext=qe,re.sample=_v,re.size=Y_,re.snakeCase=ld,re.some=uf,re.sortedIndex=W2,re.sortedIndexBy=H2,re.sortedIndexOf=rf,re.sortedLastIndex=kp,re.sortedLastIndexBy=N_,re.sortedLastIndexOf=rd,re.startCase=Mg,re.startsWith=Kv,re.subtract=h1,re.sum=hx,re.sumBy=Ef,re.template=Jp,re.times=n0,re.toFinite=_c,re.toInteger=Hi,re.toLength=sh,re.toLower=e1,re.toNumber=po,re.toSafeInteger=Wp,re.toString=vr,re.toUpper=ch,re.trim=gf,re.trimEnd=yf,re.trimStart=Qp,re.truncate=Ag,re.unescape=vf,re.uniqueId=s0,re.upperCase=t1,re.upperFirst=e0,re.each=q_,re.eachRight=W_,re.first=Ip,uh(re,function(){var h={};return we(re,function(y,A){pt.call(re.prototype,A)||(h[A]=y)}),h}(),{chain:!1}),re.VERSION=d,mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){re[h].placeholder=re}),mt(["drop","take"],function(h,y){Wi.prototype[h]=function(A){A=A===a?1:Dr(Hi(A),0);var U=this.__filtered__&&!y?new Wi(this):this.clone();return U.__filtered__?U.__takeCount__=cr(A,U.__takeCount__):U.__views__.push({size:cr(A,Nn),type:h+(U.__dir__<0?"Right":"")}),U},Wi.prototype[h+"Right"]=function(A){return this.reverse()[h](A).reverse()}}),mt(["filter","map","takeWhile"],function(h,y){var A=y+1,U=A==ri||A==pn;Wi.prototype[h]=function(J){var ae=this.clone();return ae.__iteratees__.push({iteratee:qi(J,3),type:A}),ae.__filtered__=ae.__filtered__||U,ae}}),mt(["head","last"],function(h,y){var A="take"+(y?"Right":"");Wi.prototype[h]=function(){return this[A](1).value()[0]}}),mt(["initial","tail"],function(h,y){var A="drop"+(y?"":"Right");Wi.prototype[h]=function(){return this.__filtered__?new Wi(this):this[A](1)}}),Wi.prototype.compact=function(){return this.filter(Ms)},Wi.prototype.find=function(h){return this.filter(h).head()},Wi.prototype.findLast=function(h){return this.reverse().find(h)},Wi.prototype.invokeMap=dn(function(h,y){return typeof h=="function"?new Wi(this):this.map(function(A){return jt(A,h,y)})}),Wi.prototype.reject=function(h){return this.filter(xu(qi(h)))},Wi.prototype.slice=function(h,y){h=Hi(h);var A=this;return A.__filtered__&&(h>0||y<0)?new Wi(A):(h<0?A=A.takeRight(-h):h&&(A=A.drop(h)),y!==a&&(y=Hi(y),A=y<0?A.dropRight(-y):A.take(y-h)),A)},Wi.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},Wi.prototype.toArray=function(){return this.take(Nn)},we(Wi.prototype,function(h,y){var A=/^(?:filter|find|map|reject)|While$/.test(y),U=/^(?:head|last)$/.test(y),J=re[U?"take"+(y=="last"?"Right":""):y],ae=U||/^find/.test(y);J&&(re.prototype[y]=function(){var Te=this.__wrapped__,Ne=U?[1]:arguments,Xe=Te instanceof Wi,Pt=Ne[0],Ft=Xe||hn(Te),Zt=function(Ln){var $n=J.apply(re,yn([Ln],Ne));return U&&gi?$n[0]:$n};Ft&&A&&typeof Pt=="function"&&Pt.length!=1&&(Xe=Ft=!1);var gi=this.__chain__,Ri=!!this.__actions__.length,Xi=ae&&!gi,Cn=Xe&&!Ri;if(!ae&&Ft){Te=Cn?Te:new Wi(this);var en=h.apply(Te,Ne);return en.__actions__.push({func:vu,args:[Zt],thisArg:a}),new qo(en,gi)}return Xi&&Cn?h.apply(this,Ne):(en=this.thru(Zt),Xi?U?en.value()[0]:en.value():en)})}),mt(["pop","push","shift","sort","splice","unshift"],function(h){var y=oe[h],A=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",U=/^(?:pop|shift)$/.test(h);re.prototype[h]=function(){var J=arguments;if(U&&!this.__chain__){var ae=this.value();return y.apply(hn(ae)?ae:[],J)}return this[A](function(Te){return y.apply(hn(Te)?Te:[],J)})}}),we(Wi.prototype,function(h,y){var A=re[y];if(A){var U=A.name+"";pt.call(Lc,U)||(Lc[U]=[]),Lc[U].push({name:y,func:A})}}),Lc[Pi(a,ke).name]=[{name:"wrapper",func:a}],Wi.prototype.clone=W0,Wi.prototype.reverse=jh,Wi.prototype.value=H0,re.prototype.at=nv,re.prototype.chain=Am,re.prototype.commit=rv,re.prototype.next=Im,re.prototype.plant=Lp,re.prototype.reverse=sv,re.prototype.toJSON=re.prototype.valueOf=re.prototype.value=ov,re.prototype.first=re.prototype.head,Jr&&(re.prototype[Jr]=km),re},uo=Od();I?((I.exports=uo)._=uo,T._=uo):Kr._=uo}).call(Jo)})(IE,fy);const kE=fy;var Zx={},DE={get exports(){return Zx},set exports(e){Zx=e}};/*!
 * jQuery JavaScript Library v3.6.3
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2022-12-20T21:28Z
 */(function(e){(function(r,a){e.exports=r.document?a(r,!0):function(d){if(!d.document)throw new Error("jQuery requires a window with a document");return a(d)}})(typeof window<"u"?window:Jo,function(r,a){var d=[],_=Object.getPrototypeOf,x=d.slice,E=d.flat?function(T){return d.flat.call(T)}:function(T){return d.concat.apply([],T)},o=d.push,D=d.indexOf,V={},X=V.toString,Z=V.hasOwnProperty,he=Z.toString,Se=he.call(Object),_e={},Re=function(I){return typeof I=="function"&&typeof I.nodeType!="number"&&typeof I.item!="function"},nt=function(I){return I!=null&&I===I.window},ke=r.document,Le={type:!0,src:!0,nonce:!0,noModule:!0};function $e(T,I,R){R=R||ke;var F,H,K=R.createElement("script");if(K.text=T,I)for(F in Le)H=I[F]||I.getAttribute&&I.getAttribute(F),H&&K.setAttribute(F,H);R.head.appendChild(K).parentNode.removeChild(K)}function Et(T){return T==null?T+"":typeof T=="object"||typeof T=="function"?V[X.call(T)]||"object":typeof T}var Fe="3.6.3",z=function(T,I){return new z.fn.init(T,I)};z.fn=z.prototype={jquery:Fe,constructor:z,length:0,toArray:function(){return x.call(this)},get:function(T){return T==null?x.call(this):T<0?this[T+this.length]:this[T]},pushStack:function(T){var I=z.merge(this.constructor(),T);return I.prevObject=this,I},each:function(T){return z.each(this,T)},map:function(T){return this.pushStack(z.map(this,function(I,R){return T.call(I,R,I)}))},slice:function(){return this.pushStack(x.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(z.grep(this,function(T,I){return(I+1)%2}))},odd:function(){return this.pushStack(z.grep(this,function(T,I){return I%2}))},eq:function(T){var I=this.length,R=+T+(T<0?I:0);return this.pushStack(R>=0&&R<I?[this[R]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:d.sort,splice:d.splice},z.extend=z.fn.extend=function(){var T,I,R,F,H,K,te=arguments[0]||{},ze=1,Me=arguments.length,et=!1;for(typeof te=="boolean"&&(et=te,te=arguments[ze]||{},ze++),typeof te!="object"&&!Re(te)&&(te={}),ze===Me&&(te=this,ze--);ze<Me;ze++)if((T=arguments[ze])!=null)for(I in T)F=T[I],!(I==="__proto__"||te===F)&&(et&&F&&(z.isPlainObject(F)||(H=Array.isArray(F)))?(R=te[I],H&&!Array.isArray(R)?K=[]:!H&&!z.isPlainObject(R)?K={}:K=R,H=!1,te[I]=z.extend(et,K,F)):F!==void 0&&(te[I]=F));return te},z.extend({expando:"jQuery"+(Fe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(T){throw new Error(T)},noop:function(){},isPlainObject:function(T){var I,R;return!T||X.call(T)!=="[object Object]"?!1:(I=_(T),I?(R=Z.call(I,"constructor")&&I.constructor,typeof R=="function"&&he.call(R)===Se):!0)},isEmptyObject:function(T){var I;for(I in T)return!1;return!0},globalEval:function(T,I,R){$e(T,{nonce:I&&I.nonce},R)},each:function(T,I){var R,F=0;if(Lt(T))for(R=T.length;F<R&&I.call(T[F],F,T[F])!==!1;F++);else for(F in T)if(I.call(T[F],F,T[F])===!1)break;return T},makeArray:function(T,I){var R=I||[];return T!=null&&(Lt(Object(T))?z.merge(R,typeof T=="string"?[T]:T):o.call(R,T)),R},inArray:function(T,I,R){return I==null?-1:D.call(I,T,R)},merge:function(T,I){for(var R=+I.length,F=0,H=T.length;F<R;F++)T[H++]=I[F];return T.length=H,T},grep:function(T,I,R){for(var F,H=[],K=0,te=T.length,ze=!R;K<te;K++)F=!I(T[K],K),F!==ze&&H.push(T[K]);return H},map:function(T,I,R){var F,H,K=0,te=[];if(Lt(T))for(F=T.length;K<F;K++)H=I(T[K],K,R),H!=null&&te.push(H);else for(K in T)H=I(T[K],K,R),H!=null&&te.push(H);return E(te)},guid:1,support:_e}),typeof Symbol=="function"&&(z.fn[Symbol.iterator]=d[Symbol.iterator]),z.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(T,I){V["[object "+I+"]"]=I.toLowerCase()});function Lt(T){var I=!!T&&"length"in T&&T.length,R=Et(T);return Re(T)||nt(T)?!1:R==="array"||I===0||typeof I=="number"&&I>0&&I-1 in T}var ot=function(T){var I,R,F,H,K,te,ze,Me,et,gt,Dt,ht,mt,Jt,nn,wi,Mr,lr,gn,yn="sizzle"+1*new Date,Gi=T.document,Ps=0,bn=0,Qn=Ks(),sa=Ks(),vl=Ks(),ps=Ks(),lo=function(oe,Ae){return oe===Ae&&(Dt=!0),0},Ji={}.hasOwnProperty,Ts=[],Go=Ts.pop,Xs=Ts.push,Ao=Ts.push,xl=Ts.slice,Aa=function(oe,Ae){for(var je=0,Ct=oe.length;je<Ct;je++)if(oe[je]===Ae)return je;return-1},ru="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",jn="[\\x20\\t\\r\\n\\f]",Io="(?:\\\\[\\da-fA-F]{1,6}"+jn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Dc="\\["+jn+"*("+Io+")(?:"+jn+"*([*^$|!~]?=)"+jn+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Io+"))|)"+jn+"*\\]",Ql=":("+Io+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Dc+")*)|.*)\\)|)",Us=new RegExp(jn+"+","g"),bl=new RegExp("^"+jn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+jn+"+$","g"),ec=new RegExp("^"+jn+"*,"+jn+"*"),Fu=new RegExp("^"+jn+"*([>+~]|"+jn+")"+jn+"*"),tc=new RegExp(jn+"|>"),ic=new RegExp(Ql),Pd=new RegExp("^"+Io+"$"),wl={ID:new RegExp("^#("+Io+")"),CLASS:new RegExp("^\\.("+Io+")"),TAG:new RegExp("^("+Io+"|[*])"),ATTR:new RegExp("^"+Dc),PSEUDO:new RegExp("^"+Ql),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+jn+"*(even|odd|(([+-]|)(\\d*)n|)"+jn+"*(?:([+-]|)"+jn+"*(\\d+)|))"+jn+"*\\)|)","i"),bool:new RegExp("^(?:"+ru+")$","i"),needsContext:new RegExp("^"+jn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+jn+"*((?:-\\d)?\\d*)"+jn+"*\\)|)(?=[^-]|$)","i")},Nu=/HTML$/i,oa=/^(?:input|select|textarea|button)$/i,Ia=/^h\d$/i,Tl=/^[^{]+\{\s*\[native \w/,su=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nc=/[+~]/,ko=new RegExp("\\\\[\\da-fA-F]{1,6}"+jn+"?|\\\\([^\\r\\n\\f])","g"),Es=function(oe,Ae){var je="0x"+oe.slice(1)-65536;return Ae||(je<0?String.fromCharCode(je+65536):String.fromCharCode(je>>10|55296,je&1023|56320))},Wa=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Uu=function(oe,Ae){return Ae?oe==="\0"?"�":oe.slice(0,-1)+"\\"+oe.charCodeAt(oe.length-1).toString(16)+" ":"\\"+oe},Pc=function(){ht()},zh=Qi(function(oe){return oe.disabled===!0&&oe.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Ao.apply(Ts=xl.call(Gi.childNodes),Gi.childNodes),Ts[Gi.childNodes.length].nodeType}catch{Ao={apply:Ts.length?function(Ae,je){Xs.apply(Ae,xl.call(je))}:function(Ae,je){for(var Ct=Ae.length,We=0;Ae[Ct++]=je[We++];);Ae.length=Ct-1}}}function Dn(oe,Ae,je,Ct){var We,pt,$t,oi,Ut,Bi,ji,$i=Ae&&Ae.ownerDocument,rn=Ae?Ae.nodeType:9;if(je=je||[],typeof oe!="string"||!oe||rn!==1&&rn!==9&&rn!==11)return je;if(!Ct&&(ht(Ae),Ae=Ae||mt,nn)){if(rn!==11&&(Ut=su.exec(oe)))if(We=Ut[1]){if(rn===9)if($t=Ae.getElementById(We)){if($t.id===We)return je.push($t),je}else return je;else if($i&&($t=$i.getElementById(We))&&gn(Ae,$t)&&$t.id===We)return je.push($t),je}else{if(Ut[2])return Ao.apply(je,Ae.getElementsByTagName(oe)),je;if((We=Ut[3])&&R.getElementsByClassName&&Ae.getElementsByClassName)return Ao.apply(je,Ae.getElementsByClassName(We)),je}if(R.qsa&&!ps[oe+" "]&&(!wi||!wi.test(oe))&&(rn!==1||Ae.nodeName.toLowerCase()!=="object")){if(ji=oe,$i=Ae,rn===1&&(tc.test(oe)||Fu.test(oe))){for($i=nc.test(oe)&&St(Ae.parentNode)||Ae,($i!==Ae||!R.scope)&&((oi=Ae.getAttribute("id"))?oi=oi.replace(Wa,Uu):Ae.setAttribute("id",oi=yn)),Bi=te(oe),pt=Bi.length;pt--;)Bi[pt]=(oi?"#"+oi:":scope")+" "+vi(Bi[pt]);ji=Bi.join(",")}try{if(R.cssSupportsSelector&&!CSS.supports("selector(:is("+ji+"))"))throw new Error;return Ao.apply(je,$i.querySelectorAll(ji)),je}catch{ps(oe,!0)}finally{oi===yn&&Ae.removeAttribute("id")}}}return Me(oe.replace(bl,"$1"),Ae,je,Ct)}function Ks(){var oe=[];function Ae(je,Ct){return oe.push(je+" ")>F.cacheLength&&delete Ae[oe.shift()],Ae[je+" "]=Ct}return Ae}function Ss(oe){return oe[yn]=!0,oe}function co(oe){var Ae=mt.createElement("fieldset");try{return!!oe(Ae)}catch{return!1}finally{Ae.parentNode&&Ae.parentNode.removeChild(Ae),Ae=null}}function El(oe,Ae){for(var je=oe.split("|"),Ct=je.length;Ct--;)F.attrHandle[je[Ct]]=Ae}function Ld(oe,Ae){var je=Ae&&oe,Ct=je&&oe.nodeType===1&&Ae.nodeType===1&&oe.sourceIndex-Ae.sourceIndex;if(Ct)return Ct;if(je){for(;je=je.nextSibling;)if(je===Ae)return-1}return oe?1:-1}function Rd(oe){return function(Ae){var je=Ae.nodeName.toLowerCase();return je==="input"&&Ae.type===oe}}function Od(oe){return function(Ae){var je=Ae.nodeName.toLowerCase();return(je==="input"||je==="button")&&Ae.type===oe}}function uo(oe){return function(Ae){return"form"in Ae?Ae.parentNode&&Ae.disabled===!1?"label"in Ae?"label"in Ae.parentNode?Ae.parentNode.disabled===oe:Ae.disabled===oe:Ae.isDisabled===oe||Ae.isDisabled!==!oe&&zh(Ae)===oe:Ae.disabled===oe:"label"in Ae?Ae.disabled===oe:!1}}function qe(oe){return Ss(function(Ae){return Ae=+Ae,Ss(function(je,Ct){for(var We,pt=oe([],je.length,Ae),$t=pt.length;$t--;)je[We=pt[$t]]&&(je[We]=!(Ct[We]=je[We]))})})}function St(oe){return oe&&typeof oe.getElementsByTagName<"u"&&oe}R=Dn.support={},K=Dn.isXML=function(oe){var Ae=oe&&oe.namespaceURI,je=oe&&(oe.ownerDocument||oe).documentElement;return!Nu.test(Ae||je&&je.nodeName||"HTML")},ht=Dn.setDocument=function(oe){var Ae,je,Ct=oe?oe.ownerDocument||oe:Gi;return Ct==mt||Ct.nodeType!==9||!Ct.documentElement||(mt=Ct,Jt=mt.documentElement,nn=!K(mt),Gi!=mt&&(je=mt.defaultView)&&je.top!==je&&(je.addEventListener?je.addEventListener("unload",Pc,!1):je.attachEvent&&je.attachEvent("onunload",Pc)),R.scope=co(function(We){return Jt.appendChild(We).appendChild(mt.createElement("div")),typeof We.querySelectorAll<"u"&&!We.querySelectorAll(":scope fieldset div").length}),R.cssSupportsSelector=co(function(){return CSS.supports("selector(*)")&&mt.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),R.attributes=co(function(We){return We.className="i",!We.getAttribute("className")}),R.getElementsByTagName=co(function(We){return We.appendChild(mt.createComment("")),!We.getElementsByTagName("*").length}),R.getElementsByClassName=Tl.test(mt.getElementsByClassName),R.getById=co(function(We){return Jt.appendChild(We).id=yn,!mt.getElementsByName||!mt.getElementsByName(yn).length}),R.getById?(F.filter.ID=function(We){var pt=We.replace(ko,Es);return function($t){return $t.getAttribute("id")===pt}},F.find.ID=function(We,pt){if(typeof pt.getElementById<"u"&&nn){var $t=pt.getElementById(We);return $t?[$t]:[]}}):(F.filter.ID=function(We){var pt=We.replace(ko,Es);return function($t){var oi=typeof $t.getAttributeNode<"u"&&$t.getAttributeNode("id");return oi&&oi.value===pt}},F.find.ID=function(We,pt){if(typeof pt.getElementById<"u"&&nn){var $t,oi,Ut,Bi=pt.getElementById(We);if(Bi){if($t=Bi.getAttributeNode("id"),$t&&$t.value===We)return[Bi];for(Ut=pt.getElementsByName(We),oi=0;Bi=Ut[oi++];)if($t=Bi.getAttributeNode("id"),$t&&$t.value===We)return[Bi]}return[]}}),F.find.TAG=R.getElementsByTagName?function(We,pt){if(typeof pt.getElementsByTagName<"u")return pt.getElementsByTagName(We);if(R.qsa)return pt.querySelectorAll(We)}:function(We,pt){var $t,oi=[],Ut=0,Bi=pt.getElementsByTagName(We);if(We==="*"){for(;$t=Bi[Ut++];)$t.nodeType===1&&oi.push($t);return oi}return Bi},F.find.CLASS=R.getElementsByClassName&&function(We,pt){if(typeof pt.getElementsByClassName<"u"&&nn)return pt.getElementsByClassName(We)},Mr=[],wi=[],(R.qsa=Tl.test(mt.querySelectorAll))&&(co(function(We){var pt;Jt.appendChild(We).innerHTML="<a id='"+yn+"'></a><select id='"+yn+"-\r\\' msallowcapture=''><option selected=''></option></select>",We.querySelectorAll("[msallowcapture^='']").length&&wi.push("[*^$]="+jn+`*(?:''|"")`),We.querySelectorAll("[selected]").length||wi.push("\\["+jn+"*(?:value|"+ru+")"),We.querySelectorAll("[id~="+yn+"-]").length||wi.push("~="),pt=mt.createElement("input"),pt.setAttribute("name",""),We.appendChild(pt),We.querySelectorAll("[name='']").length||wi.push("\\["+jn+"*name"+jn+"*="+jn+`*(?:''|"")`),We.querySelectorAll(":checked").length||wi.push(":checked"),We.querySelectorAll("a#"+yn+"+*").length||wi.push(".#.+[+~]"),We.querySelectorAll("\\\f"),wi.push("[\\r\\n\\f]")}),co(function(We){We.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var pt=mt.createElement("input");pt.setAttribute("type","hidden"),We.appendChild(pt).setAttribute("name","D"),We.querySelectorAll("[name=d]").length&&wi.push("name"+jn+"*[*^$|!~]?="),We.querySelectorAll(":enabled").length!==2&&wi.push(":enabled",":disabled"),Jt.appendChild(We).disabled=!0,We.querySelectorAll(":disabled").length!==2&&wi.push(":enabled",":disabled"),We.querySelectorAll("*,:x"),wi.push(",.*:")})),(R.matchesSelector=Tl.test(lr=Jt.matches||Jt.webkitMatchesSelector||Jt.mozMatchesSelector||Jt.oMatchesSelector||Jt.msMatchesSelector))&&co(function(We){R.disconnectedMatch=lr.call(We,"*"),lr.call(We,"[s!='']:x"),Mr.push("!=",Ql)}),R.cssSupportsSelector||wi.push(":has"),wi=wi.length&&new RegExp(wi.join("|")),Mr=Mr.length&&new RegExp(Mr.join("|")),Ae=Tl.test(Jt.compareDocumentPosition),gn=Ae||Tl.test(Jt.contains)?function(We,pt){var $t=We.nodeType===9&&We.documentElement||We,oi=pt&&pt.parentNode;return We===oi||!!(oi&&oi.nodeType===1&&($t.contains?$t.contains(oi):We.compareDocumentPosition&&We.compareDocumentPosition(oi)&16))}:function(We,pt){if(pt){for(;pt=pt.parentNode;)if(pt===We)return!0}return!1},lo=Ae?function(We,pt){if(We===pt)return Dt=!0,0;var $t=!We.compareDocumentPosition-!pt.compareDocumentPosition;return $t||($t=(We.ownerDocument||We)==(pt.ownerDocument||pt)?We.compareDocumentPosition(pt):1,$t&1||!R.sortDetached&&pt.compareDocumentPosition(We)===$t?We==mt||We.ownerDocument==Gi&&gn(Gi,We)?-1:pt==mt||pt.ownerDocument==Gi&&gn(Gi,pt)?1:gt?Aa(gt,We)-Aa(gt,pt):0:$t&4?-1:1)}:function(We,pt){if(We===pt)return Dt=!0,0;var $t,oi=0,Ut=We.parentNode,Bi=pt.parentNode,ji=[We],$i=[pt];if(!Ut||!Bi)return We==mt?-1:pt==mt?1:Ut?-1:Bi?1:gt?Aa(gt,We)-Aa(gt,pt):0;if(Ut===Bi)return Ld(We,pt);for($t=We;$t=$t.parentNode;)ji.unshift($t);for($t=pt;$t=$t.parentNode;)$i.unshift($t);for(;ji[oi]===$i[oi];)oi++;return oi?Ld(ji[oi],$i[oi]):ji[oi]==Gi?-1:$i[oi]==Gi?1:0}),mt},Dn.matches=function(oe,Ae){return Dn(oe,null,null,Ae)},Dn.matchesSelector=function(oe,Ae){if(ht(oe),R.matchesSelector&&nn&&!ps[Ae+" "]&&(!Mr||!Mr.test(Ae))&&(!wi||!wi.test(Ae)))try{var je=lr.call(oe,Ae);if(je||R.disconnectedMatch||oe.document&&oe.document.nodeType!==11)return je}catch{ps(Ae,!0)}return Dn(Ae,mt,null,[oe]).length>0},Dn.contains=function(oe,Ae){return(oe.ownerDocument||oe)!=mt&&ht(oe),gn(oe,Ae)},Dn.attr=function(oe,Ae){(oe.ownerDocument||oe)!=mt&&ht(oe);var je=F.attrHandle[Ae.toLowerCase()],Ct=je&&Ji.call(F.attrHandle,Ae.toLowerCase())?je(oe,Ae,!nn):void 0;return Ct!==void 0?Ct:R.attributes||!nn?oe.getAttribute(Ae):(Ct=oe.getAttributeNode(Ae))&&Ct.specified?Ct.value:null},Dn.escape=function(oe){return(oe+"").replace(Wa,Uu)},Dn.error=function(oe){throw new Error("Syntax error, unrecognized expression: "+oe)},Dn.uniqueSort=function(oe){var Ae,je=[],Ct=0,We=0;if(Dt=!R.detectDuplicates,gt=!R.sortStable&&oe.slice(0),oe.sort(lo),Dt){for(;Ae=oe[We++];)Ae===oe[We]&&(Ct=je.push(We));for(;Ct--;)oe.splice(je[Ct],1)}return gt=null,oe},H=Dn.getText=function(oe){var Ae,je="",Ct=0,We=oe.nodeType;if(We){if(We===1||We===9||We===11){if(typeof oe.textContent=="string")return oe.textContent;for(oe=oe.firstChild;oe;oe=oe.nextSibling)je+=H(oe)}else if(We===3||We===4)return oe.nodeValue}else for(;Ae=oe[Ct++];)je+=H(Ae);return je},F=Dn.selectors={cacheLength:50,createPseudo:Ss,match:wl,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(oe){return oe[1]=oe[1].replace(ko,Es),oe[3]=(oe[3]||oe[4]||oe[5]||"").replace(ko,Es),oe[2]==="~="&&(oe[3]=" "+oe[3]+" "),oe.slice(0,4)},CHILD:function(oe){return oe[1]=oe[1].toLowerCase(),oe[1].slice(0,3)==="nth"?(oe[3]||Dn.error(oe[0]),oe[4]=+(oe[4]?oe[5]+(oe[6]||1):2*(oe[3]==="even"||oe[3]==="odd")),oe[5]=+(oe[7]+oe[8]||oe[3]==="odd")):oe[3]&&Dn.error(oe[0]),oe},PSEUDO:function(oe){var Ae,je=!oe[6]&&oe[2];return wl.CHILD.test(oe[0])?null:(oe[3]?oe[2]=oe[4]||oe[5]||"":je&&ic.test(je)&&(Ae=te(je,!0))&&(Ae=je.indexOf(")",je.length-Ae)-je.length)&&(oe[0]=oe[0].slice(0,Ae),oe[2]=je.slice(0,Ae)),oe.slice(0,3))}},filter:{TAG:function(oe){var Ae=oe.replace(ko,Es).toLowerCase();return oe==="*"?function(){return!0}:function(je){return je.nodeName&&je.nodeName.toLowerCase()===Ae}},CLASS:function(oe){var Ae=Qn[oe+" "];return Ae||(Ae=new RegExp("(^|"+jn+")"+oe+"("+jn+"|$)"))&&Qn(oe,function(je){return Ae.test(typeof je.className=="string"&&je.className||typeof je.getAttribute<"u"&&je.getAttribute("class")||"")})},ATTR:function(oe,Ae,je){return function(Ct){var We=Dn.attr(Ct,oe);return We==null?Ae==="!=":Ae?(We+="",Ae==="="?We===je:Ae==="!="?We!==je:Ae==="^="?je&&We.indexOf(je)===0:Ae==="*="?je&&We.indexOf(je)>-1:Ae==="$="?je&&We.slice(-je.length)===je:Ae==="~="?(" "+We.replace(Us," ")+" ").indexOf(je)>-1:Ae==="|="?We===je||We.slice(0,je.length+1)===je+"-":!1):!0}},CHILD:function(oe,Ae,je,Ct,We){var pt=oe.slice(0,3)!=="nth",$t=oe.slice(-4)!=="last",oi=Ae==="of-type";return Ct===1&&We===0?function(Ut){return!!Ut.parentNode}:function(Ut,Bi,ji){var $i,rn,Sn,Fi,Fr,$r,Cs=pt!==$t?"nextSibling":"previousSibling",er=Ut.parentNode,js=oi&&Ut.nodeName.toLowerCase(),ho=!ji&&!oi,Jr=!1;if(er){if(pt){for(;Cs;){for(Fi=Ut;Fi=Fi[Cs];)if(oi?Fi.nodeName.toLowerCase()===js:Fi.nodeType===1)return!1;$r=Cs=oe==="only"&&!$r&&"nextSibling"}return!0}if($r=[$t?er.firstChild:er.lastChild],$t&&ho){for(Fi=er,Sn=Fi[yn]||(Fi[yn]={}),rn=Sn[Fi.uniqueID]||(Sn[Fi.uniqueID]={}),$i=rn[oe]||[],Fr=$i[0]===Ps&&$i[1],Jr=Fr&&$i[2],Fi=Fr&&er.childNodes[Fr];Fi=++Fr&&Fi&&Fi[Cs]||(Jr=Fr=0)||$r.pop();)if(Fi.nodeType===1&&++Jr&&Fi===Ut){rn[oe]=[Ps,Fr,Jr];break}}else if(ho&&(Fi=Ut,Sn=Fi[yn]||(Fi[yn]={}),rn=Sn[Fi.uniqueID]||(Sn[Fi.uniqueID]={}),$i=rn[oe]||[],Fr=$i[0]===Ps&&$i[1],Jr=Fr),Jr===!1)for(;(Fi=++Fr&&Fi&&Fi[Cs]||(Jr=Fr=0)||$r.pop())&&!((oi?Fi.nodeName.toLowerCase()===js:Fi.nodeType===1)&&++Jr&&(ho&&(Sn=Fi[yn]||(Fi[yn]={}),rn=Sn[Fi.uniqueID]||(Sn[Fi.uniqueID]={}),rn[oe]=[Ps,Jr]),Fi===Ut)););return Jr-=We,Jr===Ct||Jr%Ct===0&&Jr/Ct>=0}}},PSEUDO:function(oe,Ae){var je,Ct=F.pseudos[oe]||F.setFilters[oe.toLowerCase()]||Dn.error("unsupported pseudo: "+oe);return Ct[yn]?Ct(Ae):Ct.length>1?(je=[oe,oe,"",Ae],F.setFilters.hasOwnProperty(oe.toLowerCase())?Ss(function(We,pt){for(var $t,oi=Ct(We,Ae),Ut=oi.length;Ut--;)$t=Aa(We,oi[Ut]),We[$t]=!(pt[$t]=oi[Ut])}):function(We){return Ct(We,0,je)}):Ct}},pseudos:{not:Ss(function(oe){var Ae=[],je=[],Ct=ze(oe.replace(bl,"$1"));return Ct[yn]?Ss(function(We,pt,$t,oi){for(var Ut,Bi=Ct(We,null,oi,[]),ji=We.length;ji--;)(Ut=Bi[ji])&&(We[ji]=!(pt[ji]=Ut))}):function(We,pt,$t){return Ae[0]=We,Ct(Ae,null,$t,je),Ae[0]=null,!je.pop()}}),has:Ss(function(oe){return function(Ae){return Dn(oe,Ae).length>0}}),contains:Ss(function(oe){return oe=oe.replace(ko,Es),function(Ae){return(Ae.textContent||H(Ae)).indexOf(oe)>-1}}),lang:Ss(function(oe){return Pd.test(oe||"")||Dn.error("unsupported lang: "+oe),oe=oe.replace(ko,Es).toLowerCase(),function(Ae){var je;do if(je=nn?Ae.lang:Ae.getAttribute("xml:lang")||Ae.getAttribute("lang"))return je=je.toLowerCase(),je===oe||je.indexOf(oe+"-")===0;while((Ae=Ae.parentNode)&&Ae.nodeType===1);return!1}}),target:function(oe){var Ae=T.location&&T.location.hash;return Ae&&Ae.slice(1)===oe.id},root:function(oe){return oe===Jt},focus:function(oe){return oe===mt.activeElement&&(!mt.hasFocus||mt.hasFocus())&&!!(oe.type||oe.href||~oe.tabIndex)},enabled:uo(!1),disabled:uo(!0),checked:function(oe){var Ae=oe.nodeName.toLowerCase();return Ae==="input"&&!!oe.checked||Ae==="option"&&!!oe.selected},selected:function(oe){return oe.parentNode&&oe.parentNode.selectedIndex,oe.selected===!0},empty:function(oe){for(oe=oe.firstChild;oe;oe=oe.nextSibling)if(oe.nodeType<6)return!1;return!0},parent:function(oe){return!F.pseudos.empty(oe)},header:function(oe){return Ia.test(oe.nodeName)},input:function(oe){return oa.test(oe.nodeName)},button:function(oe){var Ae=oe.nodeName.toLowerCase();return Ae==="input"&&oe.type==="button"||Ae==="button"},text:function(oe){var Ae;return oe.nodeName.toLowerCase()==="input"&&oe.type==="text"&&((Ae=oe.getAttribute("type"))==null||Ae.toLowerCase()==="text")},first:qe(function(){return[0]}),last:qe(function(oe,Ae){return[Ae-1]}),eq:qe(function(oe,Ae,je){return[je<0?je+Ae:je]}),even:qe(function(oe,Ae){for(var je=0;je<Ae;je+=2)oe.push(je);return oe}),odd:qe(function(oe,Ae){for(var je=1;je<Ae;je+=2)oe.push(je);return oe}),lt:qe(function(oe,Ae,je){for(var Ct=je<0?je+Ae:je>Ae?Ae:je;--Ct>=0;)oe.push(Ct);return oe}),gt:qe(function(oe,Ae,je){for(var Ct=je<0?je+Ae:je;++Ct<Ae;)oe.push(Ct);return oe})}},F.pseudos.nth=F.pseudos.eq;for(I in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})F.pseudos[I]=Rd(I);for(I in{submit:!0,reset:!0})F.pseudos[I]=Od(I);function _t(){}_t.prototype=F.filters=F.pseudos,F.setFilters=new _t,te=Dn.tokenize=function(oe,Ae){var je,Ct,We,pt,$t,oi,Ut,Bi=sa[oe+" "];if(Bi)return Ae?0:Bi.slice(0);for($t=oe,oi=[],Ut=F.preFilter;$t;){(!je||(Ct=ec.exec($t)))&&(Ct&&($t=$t.slice(Ct[0].length)||$t),oi.push(We=[])),je=!1,(Ct=Fu.exec($t))&&(je=Ct.shift(),We.push({value:je,type:Ct[0].replace(bl," ")}),$t=$t.slice(je.length));for(pt in F.filter)(Ct=wl[pt].exec($t))&&(!Ut[pt]||(Ct=Ut[pt](Ct)))&&(je=Ct.shift(),We.push({value:je,type:pt,matches:Ct}),$t=$t.slice(je.length));if(!je)break}return Ae?$t.length:$t?Dn.error(oe):sa(oe,oi).slice(0)};function vi(oe){for(var Ae=0,je=oe.length,Ct="";Ae<je;Ae++)Ct+=oe[Ae].value;return Ct}function Qi(oe,Ae,je){var Ct=Ae.dir,We=Ae.next,pt=We||Ct,$t=je&&pt==="parentNode",oi=bn++;return Ae.first?function(Ut,Bi,ji){for(;Ut=Ut[Ct];)if(Ut.nodeType===1||$t)return oe(Ut,Bi,ji);return!1}:function(Ut,Bi,ji){var $i,rn,Sn,Fi=[Ps,oi];if(ji){for(;Ut=Ut[Ct];)if((Ut.nodeType===1||$t)&&oe(Ut,Bi,ji))return!0}else for(;Ut=Ut[Ct];)if(Ut.nodeType===1||$t)if(Sn=Ut[yn]||(Ut[yn]={}),rn=Sn[Ut.uniqueID]||(Sn[Ut.uniqueID]={}),We&&We===Ut.nodeName.toLowerCase())Ut=Ut[Ct]||Ut;else{if(($i=rn[pt])&&$i[0]===Ps&&$i[1]===oi)return Fi[2]=$i[2];if(rn[pt]=Fi,Fi[2]=oe(Ut,Bi,ji))return!0}return!1}}function On(oe){return oe.length>1?function(Ae,je,Ct){for(var We=oe.length;We--;)if(!oe[We](Ae,je,Ct))return!1;return!0}:oe[0]}function Vr(oe,Ae,je){for(var Ct=0,We=Ae.length;Ct<We;Ct++)Dn(oe,Ae[Ct],je);return je}function Vn(oe,Ae,je,Ct,We){for(var pt,$t=[],oi=0,Ut=oe.length,Bi=Ae!=null;oi<Ut;oi++)(pt=oe[oi])&&(!je||je(pt,Ct,We))&&($t.push(pt),Bi&&Ae.push(oi));return $t}function rc(oe,Ae,je,Ct,We,pt){return Ct&&!Ct[yn]&&(Ct=rc(Ct)),We&&!We[yn]&&(We=rc(We,pt)),Ss(function($t,oi,Ut,Bi){var ji,$i,rn,Sn=[],Fi=[],Fr=oi.length,$r=$t||Vr(Ae||"*",Ut.nodeType?[Ut]:Ut,[]),Cs=oe&&($t||!Ae)?Vn($r,Sn,oe,Ut,Bi):$r,er=je?We||($t?oe:Fr||Ct)?[]:oi:Cs;if(je&&je(Cs,er,Ut,Bi),Ct)for(ji=Vn(er,Fi),Ct(ji,[],Ut,Bi),$i=ji.length;$i--;)(rn=ji[$i])&&(er[Fi[$i]]=!(Cs[Fi[$i]]=rn));if($t){if(We||oe){if(We){for(ji=[],$i=er.length;$i--;)(rn=er[$i])&&ji.push(Cs[$i]=rn);We(null,er=[],ji,Bi)}for($i=er.length;$i--;)(rn=er[$i])&&(ji=We?Aa($t,rn):Sn[$i])>-1&&($t[ji]=!(oi[ji]=rn))}}else er=Vn(er===oi?er.splice(Fr,er.length):er),We?We(null,oi,er,Bi):Ao.apply(oi,er)})}function ou(oe){for(var Ae,je,Ct,We=oe.length,pt=F.relative[oe[0].type],$t=pt||F.relative[" "],oi=pt?1:0,Ut=Qi(function($i){return $i===Ae},$t,!0),Bi=Qi(function($i){return Aa(Ae,$i)>-1},$t,!0),ji=[function($i,rn,Sn){var Fi=!pt&&(Sn||rn!==et)||((Ae=rn).nodeType?Ut($i,rn,Sn):Bi($i,rn,Sn));return Ae=null,Fi}];oi<We;oi++)if(je=F.relative[oe[oi].type])ji=[Qi(On(ji),je)];else{if(je=F.filter[oe[oi].type].apply(null,oe[oi].matches),je[yn]){for(Ct=++oi;Ct<We&&!F.relative[oe[Ct].type];Ct++);return rc(oi>1&&On(ji),oi>1&&vi(oe.slice(0,oi-1).concat({value:oe[oi-2].type===" "?"*":""})).replace(bl,"$1"),je,oi<Ct&&ou(oe.slice(oi,Ct)),Ct<We&&ou(oe=oe.slice(Ct)),Ct<We&&vi(oe))}ji.push(je)}return On(ji)}function Js(oe,Ae){var je=Ae.length>0,Ct=oe.length>0,We=function(pt,$t,oi,Ut,Bi){var ji,$i,rn,Sn=0,Fi="0",Fr=pt&&[],$r=[],Cs=et,er=pt||Ct&&F.find.TAG("*",Bi),js=Ps+=Cs==null?1:Math.random()||.1,ho=er.length;for(Bi&&(et=$t==mt||$t||Bi);Fi!==ho&&(ji=er[Fi])!=null;Fi++){if(Ct&&ji){for($i=0,!$t&&ji.ownerDocument!=mt&&(ht(ji),oi=!nn);rn=oe[$i++];)if(rn(ji,$t||mt,oi)){Ut.push(ji);break}Bi&&(Ps=js)}je&&((ji=!rn&&ji)&&Sn--,pt&&Fr.push(ji))}if(Sn+=Fi,je&&Fi!==Sn){for($i=0;rn=Ae[$i++];)rn(Fr,$r,$t,oi);if(pt){if(Sn>0)for(;Fi--;)Fr[Fi]||$r[Fi]||($r[Fi]=Go.call(Ut));$r=Vn($r)}Ao.apply(Ut,$r),Bi&&!pt&&$r.length>0&&Sn+Ae.length>1&&Dn.uniqueSort(Ut)}return Bi&&(Ps=js,et=Cs),Fr};return je?Ss(We):We}return ze=Dn.compile=function(oe,Ae){var je,Ct=[],We=[],pt=vl[oe+" "];if(!pt){for(Ae||(Ae=te(oe)),je=Ae.length;je--;)pt=ou(Ae[je]),pt[yn]?Ct.push(pt):We.push(pt);pt=vl(oe,Js(We,Ct)),pt.selector=oe}return pt},Me=Dn.select=function(oe,Ae,je,Ct){var We,pt,$t,oi,Ut,Bi=typeof oe=="function"&&oe,ji=!Ct&&te(oe=Bi.selector||oe);if(je=je||[],ji.length===1){if(pt=ji[0]=ji[0].slice(0),pt.length>2&&($t=pt[0]).type==="ID"&&Ae.nodeType===9&&nn&&F.relative[pt[1].type]){if(Ae=(F.find.ID($t.matches[0].replace(ko,Es),Ae)||[])[0],Ae)Bi&&(Ae=Ae.parentNode);else return je;oe=oe.slice(pt.shift().value.length)}for(We=wl.needsContext.test(oe)?0:pt.length;We--&&($t=pt[We],!F.relative[oi=$t.type]);)if((Ut=F.find[oi])&&(Ct=Ut($t.matches[0].replace(ko,Es),nc.test(pt[0].type)&&St(Ae.parentNode)||Ae))){if(pt.splice(We,1),oe=Ct.length&&vi(pt),!oe)return Ao.apply(je,Ct),je;break}}return(Bi||ze(oe,ji))(Ct,Ae,!nn,je,!Ae||nc.test(oe)&&St(Ae.parentNode)||Ae),je},R.sortStable=yn.split("").sort(lo).join("")===yn,R.detectDuplicates=!!Dt,ht(),R.sortDetached=co(function(oe){return oe.compareDocumentPosition(mt.createElement("fieldset"))&1}),co(function(oe){return oe.innerHTML="<a href='#'></a>",oe.firstChild.getAttribute("href")==="#"})||El("type|href|height|width",function(oe,Ae,je){if(!je)return oe.getAttribute(Ae,Ae.toLowerCase()==="type"?1:2)}),(!R.attributes||!co(function(oe){return oe.innerHTML="<input/>",oe.firstChild.setAttribute("value",""),oe.firstChild.getAttribute("value")===""}))&&El("value",function(oe,Ae,je){if(!je&&oe.nodeName.toLowerCase()==="input")return oe.defaultValue}),co(function(oe){return oe.getAttribute("disabled")==null})||El(ru,function(oe,Ae,je){var Ct;if(!je)return oe[Ae]===!0?Ae.toLowerCase():(Ct=oe.getAttributeNode(Ae))&&Ct.specified?Ct.value:null}),Dn}(r);z.find=ot,z.expr=ot.selectors,z.expr[":"]=z.expr.pseudos,z.uniqueSort=z.unique=ot.uniqueSort,z.text=ot.getText,z.isXMLDoc=ot.isXML,z.contains=ot.contains,z.escapeSelector=ot.escape;var bt=function(T,I,R){for(var F=[],H=R!==void 0;(T=T[I])&&T.nodeType!==9;)if(T.nodeType===1){if(H&&z(T).is(R))break;F.push(T)}return F},Ht=function(T,I){for(var R=[];T;T=T.nextSibling)T.nodeType===1&&T!==I&&R.push(T);return R},Yt=z.expr.match.needsContext;function Wt(T,I){return T.nodeName&&T.nodeName.toLowerCase()===I.toLowerCase()}var hi=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ri(T,I,R){return Re(I)?z.grep(T,function(F,H){return!!I.call(F,H,F)!==R}):I.nodeType?z.grep(T,function(F){return F===I!==R}):typeof I!="string"?z.grep(T,function(F){return D.call(I,F)>-1!==R}):z.filter(I,T,R)}z.filter=function(T,I,R){var F=I[0];return R&&(T=":not("+T+")"),I.length===1&&F.nodeType===1?z.find.matchesSelector(F,T)?[F]:[]:z.find.matches(T,z.grep(I,function(H){return H.nodeType===1}))},z.fn.extend({find:function(T){var I,R,F=this.length,H=this;if(typeof T!="string")return this.pushStack(z(T).filter(function(){for(I=0;I<F;I++)if(z.contains(H[I],this))return!0}));for(R=this.pushStack([]),I=0;I<F;I++)z.find(T,H[I],R);return F>1?z.uniqueSort(R):R},filter:function(T){return this.pushStack(ri(this,T||[],!1))},not:function(T){return this.pushStack(ri(this,T||[],!0))},is:function(T){return!!ri(this,typeof T=="string"&&Yt.test(T)?z(T):T||[],!1).length}});var fi,pn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,mn=z.fn.init=function(T,I,R){var F,H;if(!T)return this;if(R=R||fi,typeof T=="string")if(T[0]==="<"&&T[T.length-1]===">"&&T.length>=3?F=[null,T,null]:F=pn.exec(T),F&&(F[1]||!I))if(F[1]){if(I=I instanceof z?I[0]:I,z.merge(this,z.parseHTML(F[1],I&&I.nodeType?I.ownerDocument||I:ke,!0)),hi.test(F[1])&&z.isPlainObject(I))for(F in I)Re(this[F])?this[F](I[F]):this.attr(F,I[F]);return this}else return H=ke.getElementById(F[2]),H&&(this[0]=H,this.length=1),this;else return!I||I.jquery?(I||R).find(T):this.constructor(I).find(T);else{if(T.nodeType)return this[0]=T,this.length=1,this;if(Re(T))return R.ready!==void 0?R.ready(T):T(z)}return z.makeArray(T,this)};mn.prototype=z.fn,fi=z(ke);var tn=/^(?:parents|prev(?:Until|All))/,ts={children:!0,contents:!0,next:!0,prev:!0};z.fn.extend({has:function(T){var I=z(T,this),R=I.length;return this.filter(function(){for(var F=0;F<R;F++)if(z.contains(this,I[F]))return!0})},closest:function(T,I){var R,F=0,H=this.length,K=[],te=typeof T!="string"&&z(T);if(!Yt.test(T)){for(;F<H;F++)for(R=this[F];R&&R!==I;R=R.parentNode)if(R.nodeType<11&&(te?te.index(R)>-1:R.nodeType===1&&z.find.matchesSelector(R,T))){K.push(R);break}}return this.pushStack(K.length>1?z.uniqueSort(K):K)},index:function(T){return T?typeof T=="string"?D.call(z(T),this[0]):D.call(this,T.jquery?T[0]:T):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(T,I){return this.pushStack(z.uniqueSort(z.merge(this.get(),z(T,I))))},addBack:function(T){return this.add(T==null?this.prevObject:this.prevObject.filter(T))}});function Fn(T,I){for(;(T=T[I])&&T.nodeType!==1;);return T}z.each({parent:function(T){var I=T.parentNode;return I&&I.nodeType!==11?I:null},parents:function(T){return bt(T,"parentNode")},parentsUntil:function(T,I,R){return bt(T,"parentNode",R)},next:function(T){return Fn(T,"nextSibling")},prev:function(T){return Fn(T,"previousSibling")},nextAll:function(T){return bt(T,"nextSibling")},prevAll:function(T){return bt(T,"previousSibling")},nextUntil:function(T,I,R){return bt(T,"nextSibling",R)},prevUntil:function(T,I,R){return bt(T,"previousSibling",R)},siblings:function(T){return Ht((T.parentNode||{}).firstChild,T)},children:function(T){return Ht(T.firstChild)},contents:function(T){return T.contentDocument!=null&&_(T.contentDocument)?T.contentDocument:(Wt(T,"template")&&(T=T.content||T),z.merge([],T.childNodes))}},function(T,I){z.fn[T]=function(R,F){var H=z.map(this,I,R);return T.slice(-5)!=="Until"&&(F=R),F&&typeof F=="string"&&(H=z.filter(F,H)),this.length>1&&(ts[T]||z.uniqueSort(H),tn.test(T)&&H.reverse()),this.pushStack(H)}});var Nn=/[^\x20\t\r\n\f]+/g;function Is(T){var I={};return z.each(T.match(Nn)||[],function(R,F){I[F]=!0}),I}z.Callbacks=function(T){T=typeof T=="string"?Is(T):z.extend({},T);var I,R,F,H,K=[],te=[],ze=-1,Me=function(){for(H=H||T.once,F=I=!0;te.length;ze=-1)for(R=te.shift();++ze<K.length;)K[ze].apply(R[0],R[1])===!1&&T.stopOnFalse&&(ze=K.length,R=!1);T.memory||(R=!1),I=!1,H&&(R?K=[]:K="")},et={add:function(){return K&&(R&&!I&&(ze=K.length-1,te.push(R)),function gt(Dt){z.each(Dt,function(ht,mt){Re(mt)?(!T.unique||!et.has(mt))&&K.push(mt):mt&&mt.length&&Et(mt)!=="string"&&gt(mt)})}(arguments),R&&!I&&Me()),this},remove:function(){return z.each(arguments,function(gt,Dt){for(var ht;(ht=z.inArray(Dt,K,ht))>-1;)K.splice(ht,1),ht<=ze&&ze--}),this},has:function(gt){return gt?z.inArray(gt,K)>-1:K.length>0},empty:function(){return K&&(K=[]),this},disable:function(){return H=te=[],K=R="",this},disabled:function(){return!K},lock:function(){return H=te=[],!R&&!I&&(K=R=""),this},locked:function(){return!!H},fireWith:function(gt,Dt){return H||(Dt=Dt||[],Dt=[gt,Dt.slice?Dt.slice():Dt],te.push(Dt),I||Me()),this},fire:function(){return et.fireWith(this,arguments),this},fired:function(){return!!F}};return et};function xs(T){return T}function zs(T){throw T}function Bs(T,I,R,F){var H;try{T&&Re(H=T.promise)?H.call(T).done(I).fail(R):T&&Re(H=T.then)?H.call(T,I,R):I.apply(void 0,[T].slice(F))}catch(K){R.apply(void 0,[K])}}z.extend({Deferred:function(T){var I=[["notify","progress",z.Callbacks("memory"),z.Callbacks("memory"),2],["resolve","done",z.Callbacks("once memory"),z.Callbacks("once memory"),0,"resolved"],["reject","fail",z.Callbacks("once memory"),z.Callbacks("once memory"),1,"rejected"]],R="pending",F={state:function(){return R},always:function(){return H.done(arguments).fail(arguments),this},catch:function(K){return F.then(null,K)},pipe:function(){var K=arguments;return z.Deferred(function(te){z.each(I,function(ze,Me){var et=Re(K[Me[4]])&&K[Me[4]];H[Me[1]](function(){var gt=et&&et.apply(this,arguments);gt&&Re(gt.promise)?gt.promise().progress(te.notify).done(te.resolve).fail(te.reject):te[Me[0]+"With"](this,et?[gt]:arguments)})}),K=null}).promise()},then:function(K,te,ze){var Me=0;function et(gt,Dt,ht,mt){return function(){var Jt=this,nn=arguments,wi=function(){var lr,gn;if(!(gt<Me)){if(lr=ht.apply(Jt,nn),lr===Dt.promise())throw new TypeError("Thenable self-resolution");gn=lr&&(typeof lr=="object"||typeof lr=="function")&&lr.then,Re(gn)?mt?gn.call(lr,et(Me,Dt,xs,mt),et(Me,Dt,zs,mt)):(Me++,gn.call(lr,et(Me,Dt,xs,mt),et(Me,Dt,zs,mt),et(Me,Dt,xs,Dt.notifyWith))):(ht!==xs&&(Jt=void 0,nn=[lr]),(mt||Dt.resolveWith)(Jt,nn))}},Mr=mt?wi:function(){try{wi()}catch(lr){z.Deferred.exceptionHook&&z.Deferred.exceptionHook(lr,Mr.stackTrace),gt+1>=Me&&(ht!==zs&&(Jt=void 0,nn=[lr]),Dt.rejectWith(Jt,nn))}};gt?Mr():(z.Deferred.getStackHook&&(Mr.stackTrace=z.Deferred.getStackHook()),r.setTimeout(Mr))}}return z.Deferred(function(gt){I[0][3].add(et(0,gt,Re(ze)?ze:xs,gt.notifyWith)),I[1][3].add(et(0,gt,Re(K)?K:xs)),I[2][3].add(et(0,gt,Re(te)?te:zs))}).promise()},promise:function(K){return K!=null?z.extend(K,F):F}},H={};return z.each(I,function(K,te){var ze=te[2],Me=te[5];F[te[1]]=ze.add,Me&&ze.add(function(){R=Me},I[3-K][2].disable,I[3-K][3].disable,I[0][2].lock,I[0][3].lock),ze.add(te[3].fire),H[te[0]]=function(){return H[te[0]+"With"](this===H?void 0:this,arguments),this},H[te[0]+"With"]=ze.fireWith}),F.promise(H),T&&T.call(H,H),H},when:function(T){var I=arguments.length,R=I,F=Array(R),H=x.call(arguments),K=z.Deferred(),te=function(ze){return function(Me){F[ze]=this,H[ze]=arguments.length>1?x.call(arguments):Me,--I||K.resolveWith(F,H)}};if(I<=1&&(Bs(T,K.done(te(R)).resolve,K.reject,!I),K.state()==="pending"||Re(H[R]&&H[R].then)))return K.then();for(;R--;)Bs(H[R],te(R),K.reject);return K.promise()}});var Hr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;z.Deferred.exceptionHook=function(T,I){r.console&&r.console.warn&&T&&Hr.test(T.name)&&r.console.warn("jQuery.Deferred exception: "+T.message,T.stack,I)},z.readyException=function(T){r.setTimeout(function(){throw T})};var Zr=z.Deferred();z.fn.ready=function(T){return Zr.then(T).catch(function(I){z.readyException(I)}),this},z.extend({isReady:!1,readyWait:1,ready:function(T){(T===!0?--z.readyWait:z.isReady)||(z.isReady=!0,!(T!==!0&&--z.readyWait>0)&&Zr.resolveWith(ke,[z]))}}),z.ready.then=Zr.then;function ds(){ke.removeEventListener("DOMContentLoaded",ds),r.removeEventListener("load",ds),z.ready()}ke.readyState==="complete"||ke.readyState!=="loading"&&!ke.documentElement.doScroll?r.setTimeout(z.ready):(ke.addEventListener("DOMContentLoaded",ds),r.addEventListener("load",ds));var Sr=function(T,I,R,F,H,K,te){var ze=0,Me=T.length,et=R==null;if(Et(R)==="object"){H=!0;for(ze in R)Sr(T,I,ze,R[ze],!0,K,te)}else if(F!==void 0&&(H=!0,Re(F)||(te=!0),et&&(te?(I.call(T,F),I=null):(et=I,I=function(gt,Dt,ht){return et.call(z(gt),ht)})),I))for(;ze<Me;ze++)I(T[ze],R,te?F:F.call(T[ze],ze,I(T[ze],R)));return H?T:et?I.call(T):Me?I(T[0],R):K},bs=/^-ms-/,Uo=/-([a-z])/g;function Ce(T,I){return I.toUpperCase()}function Ve(T){return T.replace(bs,"ms-").replace(Uo,Ce)}var tt=function(T){return T.nodeType===1||T.nodeType===9||!+T.nodeType};function kt(){this.expando=z.expando+kt.uid++}kt.uid=1,kt.prototype={cache:function(T){var I=T[this.expando];return I||(I={},tt(T)&&(T.nodeType?T[this.expando]=I:Object.defineProperty(T,this.expando,{value:I,configurable:!0}))),I},set:function(T,I,R){var F,H=this.cache(T);if(typeof I=="string")H[Ve(I)]=R;else for(F in I)H[Ve(F)]=I[F];return H},get:function(T,I){return I===void 0?this.cache(T):T[this.expando]&&T[this.expando][Ve(I)]},access:function(T,I,R){return I===void 0||I&&typeof I=="string"&&R===void 0?this.get(T,I):(this.set(T,I,R),R!==void 0?R:I)},remove:function(T,I){var R,F=T[this.expando];if(F!==void 0){if(I!==void 0)for(Array.isArray(I)?I=I.map(Ve):(I=Ve(I),I=I in F?[I]:I.match(Nn)||[]),R=I.length;R--;)delete F[I[R]];(I===void 0||z.isEmptyObject(F))&&(T.nodeType?T[this.expando]=void 0:delete T[this.expando])}},hasData:function(T){var I=T[this.expando];return I!==void 0&&!z.isEmptyObject(I)}};var ct=new kt,zt=new kt,ui=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Xt=/[A-Z]/g;function Kt(T){return T==="true"?!0:T==="false"?!1:T==="null"?null:T===+T+""?+T:ui.test(T)?JSON.parse(T):T}function Nt(T,I,R){var F;if(R===void 0&&T.nodeType===1)if(F="data-"+I.replace(Xt,"-$&").toLowerCase(),R=T.getAttribute(F),typeof R=="string"){try{R=Kt(R)}catch{}zt.set(T,I,R)}else R=void 0;return R}z.extend({hasData:function(T){return zt.hasData(T)||ct.hasData(T)},data:function(T,I,R){return zt.access(T,I,R)},removeData:function(T,I){zt.remove(T,I)},_data:function(T,I,R){return ct.access(T,I,R)},_removeData:function(T,I){ct.remove(T,I)}}),z.fn.extend({data:function(T,I){var R,F,H,K=this[0],te=K&&K.attributes;if(T===void 0){if(this.length&&(H=zt.get(K),K.nodeType===1&&!ct.get(K,"hasDataAttrs"))){for(R=te.length;R--;)te[R]&&(F=te[R].name,F.indexOf("data-")===0&&(F=Ve(F.slice(5)),Nt(K,F,H[F])));ct.set(K,"hasDataAttrs",!0)}return H}return typeof T=="object"?this.each(function(){zt.set(this,T)}):Sr(this,function(ze){var Me;if(K&&ze===void 0)return Me=zt.get(K,T),Me!==void 0||(Me=Nt(K,T),Me!==void 0)?Me:void 0;this.each(function(){zt.set(this,T,ze)})},null,I,arguments.length>1,null,!0)},removeData:function(T){return this.each(function(){zt.remove(this,T)})}}),z.extend({queue:function(T,I,R){var F;if(T)return I=(I||"fx")+"queue",F=ct.get(T,I),R&&(!F||Array.isArray(R)?F=ct.access(T,I,z.makeArray(R)):F.push(R)),F||[]},dequeue:function(T,I){I=I||"fx";var R=z.queue(T,I),F=R.length,H=R.shift(),K=z._queueHooks(T,I),te=function(){z.dequeue(T,I)};H==="inprogress"&&(H=R.shift(),F--),H&&(I==="fx"&&R.unshift("inprogress"),delete K.stop,H.call(T,te,K)),!F&&K&&K.empty.fire()},_queueHooks:function(T,I){var R=I+"queueHooks";return ct.get(T,R)||ct.access(T,R,{empty:z.Callbacks("once memory").add(function(){ct.remove(T,[I+"queue",R])})})}}),z.fn.extend({queue:function(T,I){var R=2;return typeof T!="string"&&(I=T,T="fx",R--),arguments.length<R?z.queue(this[0],T):I===void 0?this:this.each(function(){var F=z.queue(this,T,I);z._queueHooks(this,T),T==="fx"&&F[0]!=="inprogress"&&z.dequeue(this,T)})},dequeue:function(T){return this.each(function(){z.dequeue(this,T)})},clearQueue:function(T){return this.queue(T||"fx",[])},promise:function(T,I){var R,F=1,H=z.Deferred(),K=this,te=this.length,ze=function(){--F||H.resolveWith(K,[K])};for(typeof T!="string"&&(I=T,T=void 0),T=T||"fx";te--;)R=ct.get(K[te],T+"queueHooks"),R&&R.empty&&(F++,R.empty.add(ze));return ze(),H.promise(I)}});var pi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,di=new RegExp("^(?:([+-])=|)("+pi+")([a-z%]*)$","i"),Ti=["Top","Right","Bottom","Left"],Di=ke.documentElement,Yi=function(T){return z.contains(T.ownerDocument,T)},_n={composed:!0};Di.getRootNode&&(Yi=function(T){return z.contains(T.ownerDocument,T)||T.getRootNode(_n)===T.ownerDocument});var cn=function(T,I){return T=I||T,T.style.display==="none"||T.style.display===""&&Yi(T)&&z.css(T,"display")==="none"};function Yn(T,I,R,F){var H,K,te=20,ze=F?function(){return F.cur()}:function(){return z.css(T,I,"")},Me=ze(),et=R&&R[3]||(z.cssNumber[I]?"":"px"),gt=T.nodeType&&(z.cssNumber[I]||et!=="px"&&+Me)&&di.exec(z.css(T,I));if(gt&&gt[3]!==et){for(Me=Me/2,et=et||gt[3],gt=+Me||1;te--;)z.style(T,I,gt+et),(1-K)*(1-(K=ze()/Me||.5))<=0&&(te=0),gt=gt/K;gt=gt*2,z.style(T,I,gt+et),R=R||[]}return R&&(gt=+gt||+Me||0,H=R[1]?gt+(R[1]+1)*R[2]:+R[2],F&&(F.unit=et,F.start=gt,F.end=H)),H}var nr={};function Zs(T){var I,R=T.ownerDocument,F=T.nodeName,H=nr[F];return H||(I=R.body.appendChild(R.createElement(F)),H=z.css(I,"display"),I.parentNode.removeChild(I),H==="none"&&(H="block"),nr[F]=H,H)}function ks(T,I){for(var R,F,H=[],K=0,te=T.length;K<te;K++)F=T[K],F.style&&(R=F.style.display,I?(R==="none"&&(H[K]=ct.get(F,"display")||null,H[K]||(F.style.display="")),F.style.display===""&&cn(F)&&(H[K]=Zs(F))):R!=="none"&&(H[K]="none",ct.set(F,"display",R)));for(K=0;K<te;K++)H[K]!=null&&(T[K].style.display=H[K]);return T}z.fn.extend({show:function(){return ks(this,!0)},hide:function(){return ks(this)},toggle:function(T){return typeof T=="boolean"?T?this.show():this.hide():this.each(function(){cn(this)?z(this).show():z(this).hide()})}});var Yr=/^(?:checkbox|radio)$/i,Ys=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Or=/^$|^module$|\/(?:java|ecma)script/i;(function(){var T=ke.createDocumentFragment(),I=T.appendChild(ke.createElement("div")),R=ke.createElement("input");R.setAttribute("type","radio"),R.setAttribute("checked","checked"),R.setAttribute("name","t"),I.appendChild(R),_e.checkClone=I.cloneNode(!0).cloneNode(!0).lastChild.checked,I.innerHTML="<textarea>x</textarea>",_e.noCloneChecked=!!I.cloneNode(!0).lastChild.defaultValue,I.innerHTML="<option></option>",_e.option=!!I.lastChild})();var rr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};rr.tbody=rr.tfoot=rr.colgroup=rr.caption=rr.thead,rr.th=rr.td,_e.option||(rr.optgroup=rr.option=[1,"<select multiple='multiple'>","</select>"]);function Cr(T,I){var R;return typeof T.getElementsByTagName<"u"?R=T.getElementsByTagName(I||"*"):typeof T.querySelectorAll<"u"?R=T.querySelectorAll(I||"*"):R=[],I===void 0||I&&Wt(T,I)?z.merge([T],R):R}function ia(T,I){for(var R=0,F=T.length;R<F;R++)ct.set(T[R],"globalEval",!I||ct.get(I[R],"globalEval"))}var Yl=/<|&#?\w+;/;function dl(T,I,R,F,H){for(var K,te,ze,Me,et,gt,Dt=I.createDocumentFragment(),ht=[],mt=0,Jt=T.length;mt<Jt;mt++)if(K=T[mt],K||K===0)if(Et(K)==="object")z.merge(ht,K.nodeType?[K]:K);else if(!Yl.test(K))ht.push(I.createTextNode(K));else{for(te=te||Dt.appendChild(I.createElement("div")),ze=(Ys.exec(K)||["",""])[1].toLowerCase(),Me=rr[ze]||rr._default,te.innerHTML=Me[1]+z.htmlPrefilter(K)+Me[2],gt=Me[0];gt--;)te=te.lastChild;z.merge(ht,te.childNodes),te=Dt.firstChild,te.textContent=""}for(Dt.textContent="",mt=0;K=ht[mt++];){if(F&&z.inArray(K,F)>-1){H&&H.push(K);continue}if(et=Yi(K),te=Cr(Dt.appendChild(K),"script"),et&&ia(te),R)for(gt=0;K=te[gt++];)Or.test(K.type||"")&&R.push(K)}return Dt}var oo=/^([^.]*)(?:\.(.+)|)/;function Eo(){return!0}function Ea(){return!1}function Xl(T,I){return T===hl()==(I==="focus")}function hl(){try{return ke.activeElement}catch{}}function Na(T,I,R,F,H,K){var te,ze;if(typeof I=="object"){typeof R!="string"&&(F=F||R,R=void 0);for(ze in I)Na(T,ze,R,F,I[ze],K);return T}if(F==null&&H==null?(H=R,F=R=void 0):H==null&&(typeof R=="string"?(H=F,F=void 0):(H=F,F=R,R=void 0)),H===!1)H=Ea;else if(!H)return T;return K===1&&(te=H,H=function(Me){return z().off(Me),te.apply(this,arguments)},H.guid=te.guid||(te.guid=z.guid++)),T.each(function(){z.event.add(this,I,H,F,R)})}z.event={global:{},add:function(T,I,R,F,H){var K,te,ze,Me,et,gt,Dt,ht,mt,Jt,nn,wi=ct.get(T);if(tt(T))for(R.handler&&(K=R,R=K.handler,H=K.selector),H&&z.find.matchesSelector(Di,H),R.guid||(R.guid=z.guid++),(Me=wi.events)||(Me=wi.events=Object.create(null)),(te=wi.handle)||(te=wi.handle=function(Mr){return typeof z<"u"&&z.event.triggered!==Mr.type?z.event.dispatch.apply(T,arguments):void 0}),I=(I||"").match(Nn)||[""],et=I.length;et--;)ze=oo.exec(I[et])||[],mt=nn=ze[1],Jt=(ze[2]||"").split(".").sort(),mt&&(Dt=z.event.special[mt]||{},mt=(H?Dt.delegateType:Dt.bindType)||mt,Dt=z.event.special[mt]||{},gt=z.extend({type:mt,origType:nn,data:F,handler:R,guid:R.guid,selector:H,needsContext:H&&z.expr.match.needsContext.test(H),namespace:Jt.join(".")},K),(ht=Me[mt])||(ht=Me[mt]=[],ht.delegateCount=0,(!Dt.setup||Dt.setup.call(T,F,Jt,te)===!1)&&T.addEventListener&&T.addEventListener(mt,te)),Dt.add&&(Dt.add.call(T,gt),gt.handler.guid||(gt.handler.guid=R.guid)),H?ht.splice(ht.delegateCount++,0,gt):ht.push(gt),z.event.global[mt]=!0)},remove:function(T,I,R,F,H){var K,te,ze,Me,et,gt,Dt,ht,mt,Jt,nn,wi=ct.hasData(T)&&ct.get(T);if(!(!wi||!(Me=wi.events))){for(I=(I||"").match(Nn)||[""],et=I.length;et--;){if(ze=oo.exec(I[et])||[],mt=nn=ze[1],Jt=(ze[2]||"").split(".").sort(),!mt){for(mt in Me)z.event.remove(T,mt+I[et],R,F,!0);continue}for(Dt=z.event.special[mt]||{},mt=(F?Dt.delegateType:Dt.bindType)||mt,ht=Me[mt]||[],ze=ze[2]&&new RegExp("(^|\\.)"+Jt.join("\\.(?:.*\\.|)")+"(\\.|$)"),te=K=ht.length;K--;)gt=ht[K],(H||nn===gt.origType)&&(!R||R.guid===gt.guid)&&(!ze||ze.test(gt.namespace))&&(!F||F===gt.selector||F==="**"&&gt.selector)&&(ht.splice(K,1),gt.selector&&ht.delegateCount--,Dt.remove&&Dt.remove.call(T,gt));te&&!ht.length&&((!Dt.teardown||Dt.teardown.call(T,Jt,wi.handle)===!1)&&z.removeEvent(T,mt,wi.handle),delete Me[mt])}z.isEmptyObject(Me)&&ct.remove(T,"handle events")}},dispatch:function(T){var I,R,F,H,K,te,ze=new Array(arguments.length),Me=z.event.fix(T),et=(ct.get(this,"events")||Object.create(null))[Me.type]||[],gt=z.event.special[Me.type]||{};for(ze[0]=Me,I=1;I<arguments.length;I++)ze[I]=arguments[I];if(Me.delegateTarget=this,!(gt.preDispatch&&gt.preDispatch.call(this,Me)===!1)){for(te=z.event.handlers.call(this,Me,et),I=0;(H=te[I++])&&!Me.isPropagationStopped();)for(Me.currentTarget=H.elem,R=0;(K=H.handlers[R++])&&!Me.isImmediatePropagationStopped();)(!Me.rnamespace||K.namespace===!1||Me.rnamespace.test(K.namespace))&&(Me.handleObj=K,Me.data=K.data,F=((z.event.special[K.origType]||{}).handle||K.handler).apply(H.elem,ze),F!==void 0&&(Me.result=F)===!1&&(Me.preventDefault(),Me.stopPropagation()));return gt.postDispatch&&gt.postDispatch.call(this,Me),Me.result}},handlers:function(T,I){var R,F,H,K,te,ze=[],Me=I.delegateCount,et=T.target;if(Me&&et.nodeType&&!(T.type==="click"&&T.button>=1)){for(;et!==this;et=et.parentNode||this)if(et.nodeType===1&&!(T.type==="click"&&et.disabled===!0)){for(K=[],te={},R=0;R<Me;R++)F=I[R],H=F.selector+" ",te[H]===void 0&&(te[H]=F.needsContext?z(H,this).index(et)>-1:z.find(H,this,null,[et]).length),te[H]&&K.push(F);K.length&&ze.push({elem:et,handlers:K})}}return et=this,Me<I.length&&ze.push({elem:et,handlers:I.slice(Me)}),ze},addProp:function(T,I){Object.defineProperty(z.Event.prototype,T,{enumerable:!0,configurable:!0,get:Re(I)?function(){if(this.originalEvent)return I(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[T]},set:function(R){Object.defineProperty(this,T,{enumerable:!0,configurable:!0,writable:!0,value:R})}})},fix:function(T){return T[z.expando]?T:new z.Event(T)},special:{load:{noBubble:!0},click:{setup:function(T){var I=this||T;return Yr.test(I.type)&&I.click&&Wt(I,"input")&&Fs(I,"click",Eo),!1},trigger:function(T){var I=this||T;return Yr.test(I.type)&&I.click&&Wt(I,"input")&&Fs(I,"click"),!0},_default:function(T){var I=T.target;return Yr.test(I.type)&&I.click&&Wt(I,"input")&&ct.get(I,"click")||Wt(I,"a")}},beforeunload:{postDispatch:function(T){T.result!==void 0&&T.originalEvent&&(T.originalEvent.returnValue=T.result)}}}};function Fs(T,I,R){if(!R){ct.get(T,I)===void 0&&z.event.add(T,I,Eo);return}ct.set(T,I,!1),z.event.add(T,I,{namespace:!1,handler:function(F){var H,K,te=ct.get(this,I);if(F.isTrigger&1&&this[I]){if(te.length)(z.event.special[I]||{}).delegateType&&F.stopPropagation();else if(te=x.call(arguments),ct.set(this,I,te),H=R(this,I),this[I](),K=ct.get(this,I),te!==K||H?ct.set(this,I,!1):K={},te!==K)return F.stopImmediatePropagation(),F.preventDefault(),K&&K.value}else te.length&&(ct.set(this,I,{value:z.event.trigger(z.extend(te[0],z.Event.prototype),te.slice(1),this)}),F.stopImmediatePropagation())}})}z.removeEvent=function(T,I,R){T.removeEventListener&&T.removeEventListener(I,R)},z.Event=function(T,I){if(!(this instanceof z.Event))return new z.Event(T,I);T&&T.type?(this.originalEvent=T,this.type=T.type,this.isDefaultPrevented=T.defaultPrevented||T.defaultPrevented===void 0&&T.returnValue===!1?Eo:Ea,this.target=T.target&&T.target.nodeType===3?T.target.parentNode:T.target,this.currentTarget=T.currentTarget,this.relatedTarget=T.relatedTarget):this.type=T,I&&z.extend(this,I),this.timeStamp=T&&T.timeStamp||Date.now(),this[z.expando]=!0},z.Event.prototype={constructor:z.Event,isDefaultPrevented:Ea,isPropagationStopped:Ea,isImmediatePropagationStopped:Ea,isSimulated:!1,preventDefault:function(){var T=this.originalEvent;this.isDefaultPrevented=Eo,T&&!this.isSimulated&&T.preventDefault()},stopPropagation:function(){var T=this.originalEvent;this.isPropagationStopped=Eo,T&&!this.isSimulated&&T.stopPropagation()},stopImmediatePropagation:function(){var T=this.originalEvent;this.isImmediatePropagationStopped=Eo,T&&!this.isSimulated&&T.stopImmediatePropagation(),this.stopPropagation()}},z.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},z.event.addProp),z.each({focus:"focusin",blur:"focusout"},function(T,I){z.event.special[T]={setup:function(){return Fs(this,T,Xl),!1},trigger:function(){return Fs(this,T),!0},_default:function(R){return ct.get(R.target,T)},delegateType:I}}),z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(T,I){z.event.special[T]={delegateType:I,bindType:I,handle:function(R){var F,H=this,K=R.relatedTarget,te=R.handleObj;return(!K||K!==H&&!z.contains(H,K))&&(R.type=te.origType,F=te.handler.apply(this,arguments),R.type=I),F}}}),z.fn.extend({on:function(T,I,R,F){return Na(this,T,I,R,F)},one:function(T,I,R,F){return Na(this,T,I,R,F,1)},off:function(T,I,R){var F,H;if(T&&T.preventDefault&&T.handleObj)return F=T.handleObj,z(T.delegateTarget).off(F.namespace?F.origType+"."+F.namespace:F.origType,F.selector,F.handler),this;if(typeof T=="object"){for(H in T)this.off(H,I,T[H]);return this}return(I===!1||typeof I=="function")&&(R=I,I=void 0),R===!1&&(R=Ea),this.each(function(){z.event.remove(this,T,R,I)})}});var Ua=/<script|<style|<link/i,Mc=/checked\s*(?:[^=]|=\s*.checked.)/i,pe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function q(T,I){return Wt(T,"table")&&Wt(I.nodeType!==11?I:I.firstChild,"tr")&&z(T).children("tbody")[0]||T}function Q(T){return T.type=(T.getAttribute("type")!==null)+"/"+T.type,T}function fe(T){return(T.type||"").slice(0,5)==="true/"?T.type=T.type.slice(5):T.removeAttribute("type"),T}function ve(T,I){var R,F,H,K,te,ze,Me;if(I.nodeType===1){if(ct.hasData(T)&&(K=ct.get(T),Me=K.events,Me)){ct.remove(I,"handle events");for(H in Me)for(R=0,F=Me[H].length;R<F;R++)z.event.add(I,H,Me[H][R])}zt.hasData(T)&&(te=zt.access(T),ze=z.extend({},te),zt.set(I,ze))}}function Oe(T,I){var R=I.nodeName.toLowerCase();R==="input"&&Yr.test(T.type)?I.checked=T.checked:(R==="input"||R==="textarea")&&(I.defaultValue=T.defaultValue)}function He(T,I,R,F){I=E(I);var H,K,te,ze,Me,et,gt=0,Dt=T.length,ht=Dt-1,mt=I[0],Jt=Re(mt);if(Jt||Dt>1&&typeof mt=="string"&&!_e.checkClone&&Mc.test(mt))return T.each(function(nn){var wi=T.eq(nn);Jt&&(I[0]=mt.call(this,nn,wi.html())),He(wi,I,R,F)});if(Dt&&(H=dl(I,T[0].ownerDocument,!1,T,F),K=H.firstChild,H.childNodes.length===1&&(H=K),K||F)){for(te=z.map(Cr(H,"script"),Q),ze=te.length;gt<Dt;gt++)Me=H,gt!==ht&&(Me=z.clone(Me,!0,!0),ze&&z.merge(te,Cr(Me,"script"))),R.call(T[gt],Me,gt);if(ze)for(et=te[te.length-1].ownerDocument,z.map(te,fe),gt=0;gt<ze;gt++)Me=te[gt],Or.test(Me.type||"")&&!ct.access(Me,"globalEval")&&z.contains(et,Me)&&(Me.src&&(Me.type||"").toLowerCase()!=="module"?z._evalUrl&&!Me.noModule&&z._evalUrl(Me.src,{nonce:Me.nonce||Me.getAttribute("nonce")},et):$e(Me.textContent.replace(pe,""),Me,et))}return T}function Ye(T,I,R){for(var F,H=I?z.filter(I,T):T,K=0;(F=H[K])!=null;K++)!R&&F.nodeType===1&&z.cleanData(Cr(F)),F.parentNode&&(R&&Yi(F)&&ia(Cr(F,"script")),F.parentNode.removeChild(F));return T}z.extend({htmlPrefilter:function(T){return T},clone:function(T,I,R){var F,H,K,te,ze=T.cloneNode(!0),Me=Yi(T);if(!_e.noCloneChecked&&(T.nodeType===1||T.nodeType===11)&&!z.isXMLDoc(T))for(te=Cr(ze),K=Cr(T),F=0,H=K.length;F<H;F++)Oe(K[F],te[F]);if(I)if(R)for(K=K||Cr(T),te=te||Cr(ze),F=0,H=K.length;F<H;F++)ve(K[F],te[F]);else ve(T,ze);return te=Cr(ze,"script"),te.length>0&&ia(te,!Me&&Cr(T,"script")),ze},cleanData:function(T){for(var I,R,F,H=z.event.special,K=0;(R=T[K])!==void 0;K++)if(tt(R)){if(I=R[ct.expando]){if(I.events)for(F in I.events)H[F]?z.event.remove(R,F):z.removeEvent(R,F,I.handle);R[ct.expando]=void 0}R[zt.expando]&&(R[zt.expando]=void 0)}}}),z.fn.extend({detach:function(T){return Ye(this,T,!0)},remove:function(T){return Ye(this,T)},text:function(T){return Sr(this,function(I){return I===void 0?z.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=I)})},null,T,arguments.length)},append:function(){return He(this,arguments,function(T){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var I=q(this,T);I.appendChild(T)}})},prepend:function(){return He(this,arguments,function(T){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var I=q(this,T);I.insertBefore(T,I.firstChild)}})},before:function(){return He(this,arguments,function(T){this.parentNode&&this.parentNode.insertBefore(T,this)})},after:function(){return He(this,arguments,function(T){this.parentNode&&this.parentNode.insertBefore(T,this.nextSibling)})},empty:function(){for(var T,I=0;(T=this[I])!=null;I++)T.nodeType===1&&(z.cleanData(Cr(T,!1)),T.textContent="");return this},clone:function(T,I){return T=T??!1,I=I??T,this.map(function(){return z.clone(this,T,I)})},html:function(T){return Sr(this,function(I){var R=this[0]||{},F=0,H=this.length;if(I===void 0&&R.nodeType===1)return R.innerHTML;if(typeof I=="string"&&!Ua.test(I)&&!rr[(Ys.exec(I)||["",""])[1].toLowerCase()]){I=z.htmlPrefilter(I);try{for(;F<H;F++)R=this[F]||{},R.nodeType===1&&(z.cleanData(Cr(R,!1)),R.innerHTML=I);R=0}catch{}}R&&this.empty().append(I)},null,T,arguments.length)},replaceWith:function(){var T=[];return He(this,arguments,function(I){var R=this.parentNode;z.inArray(this,T)<0&&(z.cleanData(Cr(this)),R&&R.replaceChild(I,this))},T)}}),z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(T,I){z.fn[T]=function(R){for(var F,H=[],K=z(R),te=K.length-1,ze=0;ze<=te;ze++)F=ze===te?this:this.clone(!0),z(K[ze])[I](F),o.apply(H,F.get());return this.pushStack(H)}});var Be=new RegExp("^("+pi+")(?!px)[a-z%]+$","i"),Qe=/^--/,Tt=function(T){var I=T.ownerDocument.defaultView;return(!I||!I.opener)&&(I=r),I.getComputedStyle(T)},ii=function(T,I,R){var F,H,K={};for(H in I)K[H]=T.style[H],T.style[H]=I[H];F=R.call(T);for(H in I)T.style[H]=K[H];return F},Ot=new RegExp(Ti.join("|"),"i"),Ai="[\\x20\\t\\r\\n\\f]",Ci=new RegExp("^"+Ai+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ai+"+$","g");(function(){function T(){if(et){Me.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",et.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Di.appendChild(Me).appendChild(et);var gt=r.getComputedStyle(et);R=gt.top!=="1%",ze=I(gt.marginLeft)===12,et.style.right="60%",K=I(gt.right)===36,F=I(gt.width)===36,et.style.position="absolute",H=I(et.offsetWidth/3)===12,Di.removeChild(Me),et=null}}function I(gt){return Math.round(parseFloat(gt))}var R,F,H,K,te,ze,Me=ke.createElement("div"),et=ke.createElement("div");et.style&&(et.style.backgroundClip="content-box",et.cloneNode(!0).style.backgroundClip="",_e.clearCloneStyle=et.style.backgroundClip==="content-box",z.extend(_e,{boxSizingReliable:function(){return T(),F},pixelBoxStyles:function(){return T(),K},pixelPosition:function(){return T(),R},reliableMarginLeft:function(){return T(),ze},scrollboxSize:function(){return T(),H},reliableTrDimensions:function(){var gt,Dt,ht,mt;return te==null&&(gt=ke.createElement("table"),Dt=ke.createElement("tr"),ht=ke.createElement("div"),gt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Dt.style.cssText="border:1px solid",Dt.style.height="1px",ht.style.height="9px",ht.style.display="block",Di.appendChild(gt).appendChild(Dt).appendChild(ht),mt=r.getComputedStyle(Dt),te=parseInt(mt.height,10)+parseInt(mt.borderTopWidth,10)+parseInt(mt.borderBottomWidth,10)===Dt.offsetHeight,Di.removeChild(gt)),te}}))})();function yi(T,I,R){var F,H,K,te,ze=Qe.test(I),Me=T.style;return R=R||Tt(T),R&&(te=R.getPropertyValue(I)||R[I],ze&&te&&(te=te.replace(Ci,"$1")||void 0),te===""&&!Yi(T)&&(te=z.style(T,I)),!_e.pixelBoxStyles()&&Be.test(te)&&Ot.test(I)&&(F=Me.width,H=Me.minWidth,K=Me.maxWidth,Me.minWidth=Me.maxWidth=Me.width=te,te=R.width,Me.width=F,Me.minWidth=H,Me.maxWidth=K)),te!==void 0?te+"":te}function Li(T,I){return{get:function(){if(T()){delete this.get;return}return(this.get=I).apply(this,arguments)}}}var an=["Webkit","Moz","ms"],Mn=ke.createElement("div").style,bi={};function Xn(T){for(var I=T[0].toUpperCase()+T.slice(1),R=an.length;R--;)if(T=an[R]+I,T in Mn)return T}function Rn(T){var I=z.cssProps[T]||bi[T];return I||(T in Mn?T:bi[T]=Xn(T)||T)}var na=/^(none|table(?!-c[ea]).+)/,ja={position:"absolute",visibility:"hidden",display:"block"},ao={letterSpacing:"0",fontWeight:"400"};function yt(T,I,R){var F=di.exec(I);return F?Math.max(0,F[2]-(R||0))+(F[3]||"px"):I}function So(T,I,R,F,H,K){var te=I==="width"?1:0,ze=0,Me=0;if(R===(F?"border":"content"))return 0;for(;te<4;te+=2)R==="margin"&&(Me+=z.css(T,R+Ti[te],!0,H)),F?(R==="content"&&(Me-=z.css(T,"padding"+Ti[te],!0,H)),R!=="margin"&&(Me-=z.css(T,"border"+Ti[te]+"Width",!0,H))):(Me+=z.css(T,"padding"+Ti[te],!0,H),R!=="padding"?Me+=z.css(T,"border"+Ti[te]+"Width",!0,H):ze+=z.css(T,"border"+Ti[te]+"Width",!0,H));return!F&&K>=0&&(Me+=Math.max(0,Math.ceil(T["offset"+I[0].toUpperCase()+I.slice(1)]-K-Me-ze-.5))||0),Me}function zr(T,I,R){var F=Tt(T),H=!_e.boxSizingReliable()||R,K=H&&z.css(T,"boxSizing",!1,F)==="border-box",te=K,ze=yi(T,I,F),Me="offset"+I[0].toUpperCase()+I.slice(1);if(Be.test(ze)){if(!R)return ze;ze="auto"}return(!_e.boxSizingReliable()&&K||!_e.reliableTrDimensions()&&Wt(T,"tr")||ze==="auto"||!parseFloat(ze)&&z.css(T,"display",!1,F)==="inline")&&T.getClientRects().length&&(K=z.css(T,"boxSizing",!1,F)==="border-box",te=Me in T,te&&(ze=T[Me])),ze=parseFloat(ze)||0,ze+So(T,I,R||(K?"border":"content"),te,F,ze)+"px"}z.extend({cssHooks:{opacity:{get:function(T,I){if(I){var R=yi(T,"opacity");return R===""?"1":R}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(T,I,R,F){if(!(!T||T.nodeType===3||T.nodeType===8||!T.style)){var H,K,te,ze=Ve(I),Me=Qe.test(I),et=T.style;if(Me||(I=Rn(ze)),te=z.cssHooks[I]||z.cssHooks[ze],R!==void 0){if(K=typeof R,K==="string"&&(H=di.exec(R))&&H[1]&&(R=Yn(T,I,H),K="number"),R==null||R!==R)return;K==="number"&&!Me&&(R+=H&&H[3]||(z.cssNumber[ze]?"":"px")),!_e.clearCloneStyle&&R===""&&I.indexOf("background")===0&&(et[I]="inherit"),(!te||!("set"in te)||(R=te.set(T,R,F))!==void 0)&&(Me?et.setProperty(I,R):et[I]=R)}else return te&&"get"in te&&(H=te.get(T,!1,F))!==void 0?H:et[I]}},css:function(T,I,R,F){var H,K,te,ze=Ve(I),Me=Qe.test(I);return Me||(I=Rn(ze)),te=z.cssHooks[I]||z.cssHooks[ze],te&&"get"in te&&(H=te.get(T,!0,R)),H===void 0&&(H=yi(T,I,F)),H==="normal"&&I in ao&&(H=ao[I]),R===""||R?(K=parseFloat(H),R===!0||isFinite(K)?K||0:H):H}}),z.each(["height","width"],function(T,I){z.cssHooks[I]={get:function(R,F,H){if(F)return na.test(z.css(R,"display"))&&(!R.getClientRects().length||!R.getBoundingClientRect().width)?ii(R,ja,function(){return zr(R,I,H)}):zr(R,I,H)},set:function(R,F,H){var K,te=Tt(R),ze=!_e.scrollboxSize()&&te.position==="absolute",Me=ze||H,et=Me&&z.css(R,"boxSizing",!1,te)==="border-box",gt=H?So(R,I,H,et,te):0;return et&&ze&&(gt-=Math.ceil(R["offset"+I[0].toUpperCase()+I.slice(1)]-parseFloat(te[I])-So(R,I,"border",!1,te)-.5)),gt&&(K=di.exec(F))&&(K[3]||"px")!=="px"&&(R.style[I]=F,F=z.css(R,I)),yt(R,F,gt)}}}),z.cssHooks.marginLeft=Li(_e.reliableMarginLeft,function(T,I){if(I)return(parseFloat(yi(T,"marginLeft"))||T.getBoundingClientRect().left-ii(T,{marginLeft:0},function(){return T.getBoundingClientRect().left}))+"px"}),z.each({margin:"",padding:"",border:"Width"},function(T,I){z.cssHooks[T+I]={expand:function(R){for(var F=0,H={},K=typeof R=="string"?R.split(" "):[R];F<4;F++)H[T+Ti[F]+I]=K[F]||K[F-2]||K[0];return H}},T!=="margin"&&(z.cssHooks[T+I].set=yt)}),z.fn.extend({css:function(T,I){return Sr(this,function(R,F,H){var K,te,ze={},Me=0;if(Array.isArray(F)){for(K=Tt(R),te=F.length;Me<te;Me++)ze[F[Me]]=z.css(R,F[Me],!1,K);return ze}return H!==void 0?z.style(R,F,H):z.css(R,F)},T,I,arguments.length>1)}});function Br(T,I,R,F,H){return new Br.prototype.init(T,I,R,F,H)}z.Tween=Br,Br.prototype={constructor:Br,init:function(T,I,R,F,H,K){this.elem=T,this.prop=R,this.easing=H||z.easing._default,this.options=I,this.start=this.now=this.cur(),this.end=F,this.unit=K||(z.cssNumber[R]?"":"px")},cur:function(){var T=Br.propHooks[this.prop];return T&&T.get?T.get(this):Br.propHooks._default.get(this)},run:function(T){var I,R=Br.propHooks[this.prop];return this.options.duration?this.pos=I=z.easing[this.easing](T,this.options.duration*T,0,1,this.options.duration):this.pos=I=T,this.now=(this.end-this.start)*I+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),R&&R.set?R.set(this):Br.propHooks._default.set(this),this}},Br.prototype.init.prototype=Br.prototype,Br.propHooks={_default:{get:function(T){var I;return T.elem.nodeType!==1||T.elem[T.prop]!=null&&T.elem.style[T.prop]==null?T.elem[T.prop]:(I=z.css(T.elem,T.prop,""),!I||I==="auto"?0:I)},set:function(T){z.fx.step[T.prop]?z.fx.step[T.prop](T):T.elem.nodeType===1&&(z.cssHooks[T.prop]||T.elem.style[Rn(T.prop)]!=null)?z.style(T.elem,T.prop,T.now+T.unit):T.elem[T.prop]=T.now}}},Br.propHooks.scrollTop=Br.propHooks.scrollLeft={set:function(T){T.elem.nodeType&&T.elem.parentNode&&(T.elem[T.prop]=T.now)}},z.easing={linear:function(T){return T},swing:function(T){return .5-Math.cos(T*Math.PI)/2},_default:"swing"},z.fx=Br.prototype.init,z.fx.step={};var Kl,Ds,Jc=/^(?:toggle|show|hide)$/,Ou=/queueHooks$/;function hs(){Ds&&(ke.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(hs):r.setTimeout(hs,z.fx.interval),z.fx.tick())}function ti(){return r.setTimeout(function(){Kl=void 0}),Kl=Date.now()}function on(T,I){var R,F=0,H={height:T};for(I=I?1:0;F<4;F+=2-I)R=Ti[F],H["margin"+R]=H["padding"+R]=T;return I&&(H.opacity=H.width=T),H}function ln(T,I,R){for(var F,H=(Ui.tweeners[I]||[]).concat(Ui.tweeners["*"]),K=0,te=H.length;K<te;K++)if(F=H[K].call(R,I,T))return F}function Co(T,I,R){var F,H,K,te,ze,Me,et,gt,Dt="width"in I||"height"in I,ht=this,mt={},Jt=T.style,nn=T.nodeType&&cn(T),wi=ct.get(T,"fxshow");R.queue||(te=z._queueHooks(T,"fx"),te.unqueued==null&&(te.unqueued=0,ze=te.empty.fire,te.empty.fire=function(){te.unqueued||ze()}),te.unqueued++,ht.always(function(){ht.always(function(){te.unqueued--,z.queue(T,"fx").length||te.empty.fire()})}));for(F in I)if(H=I[F],Jc.test(H)){if(delete I[F],K=K||H==="toggle",H===(nn?"hide":"show"))if(H==="show"&&wi&&wi[F]!==void 0)nn=!0;else continue;mt[F]=wi&&wi[F]||z.style(T,F)}if(Me=!z.isEmptyObject(I),!(!Me&&z.isEmptyObject(mt))){Dt&&T.nodeType===1&&(R.overflow=[Jt.overflow,Jt.overflowX,Jt.overflowY],et=wi&&wi.display,et==null&&(et=ct.get(T,"display")),gt=z.css(T,"display"),gt==="none"&&(et?gt=et:(ks([T],!0),et=T.style.display||et,gt=z.css(T,"display"),ks([T]))),(gt==="inline"||gt==="inline-block"&&et!=null)&&z.css(T,"float")==="none"&&(Me||(ht.done(function(){Jt.display=et}),et==null&&(gt=Jt.display,et=gt==="none"?"":gt)),Jt.display="inline-block")),R.overflow&&(Jt.overflow="hidden",ht.always(function(){Jt.overflow=R.overflow[0],Jt.overflowX=R.overflow[1],Jt.overflowY=R.overflow[2]})),Me=!1;for(F in mt)Me||(wi?"hidden"in wi&&(nn=wi.hidden):wi=ct.access(T,"fxshow",{display:et}),K&&(wi.hidden=!nn),nn&&ks([T],!0),ht.done(function(){nn||ks([T]),ct.remove(T,"fxshow");for(F in mt)z.style(T,F,mt[F])})),Me=ln(nn?wi[F]:0,F,ht),F in wi||(wi[F]=Me.start,nn&&(Me.end=Me.start,Me.start=0))}}function ra(T,I){var R,F,H,K,te;for(R in T)if(F=Ve(R),H=I[F],K=T[R],Array.isArray(K)&&(H=K[1],K=T[R]=K[0]),R!==F&&(T[F]=K,delete T[R]),te=z.cssHooks[F],te&&"expand"in te){K=te.expand(K),delete T[F];for(R in K)R in T||(T[R]=K[R],I[R]=H)}else I[F]=H}function Ui(T,I,R){var F,H,K=0,te=Ui.prefilters.length,ze=z.Deferred().always(function(){delete Me.elem}),Me=function(){if(H)return!1;for(var Dt=Kl||ti(),ht=Math.max(0,et.startTime+et.duration-Dt),mt=ht/et.duration||0,Jt=1-mt,nn=0,wi=et.tweens.length;nn<wi;nn++)et.tweens[nn].run(Jt);return ze.notifyWith(T,[et,Jt,ht]),Jt<1&&wi?ht:(wi||ze.notifyWith(T,[et,1,0]),ze.resolveWith(T,[et]),!1)},et=ze.promise({elem:T,props:z.extend({},I),opts:z.extend(!0,{specialEasing:{},easing:z.easing._default},R),originalProperties:I,originalOptions:R,startTime:Kl||ti(),duration:R.duration,tweens:[],createTween:function(Dt,ht){var mt=z.Tween(T,et.opts,Dt,ht,et.opts.specialEasing[Dt]||et.opts.easing);return et.tweens.push(mt),mt},stop:function(Dt){var ht=0,mt=Dt?et.tweens.length:0;if(H)return this;for(H=!0;ht<mt;ht++)et.tweens[ht].run(1);return Dt?(ze.notifyWith(T,[et,1,0]),ze.resolveWith(T,[et,Dt])):ze.rejectWith(T,[et,Dt]),this}}),gt=et.props;for(ra(gt,et.opts.specialEasing);K<te;K++)if(F=Ui.prefilters[K].call(et,T,gt,et.opts),F)return Re(F.stop)&&(z._queueHooks(et.elem,et.opts.queue).stop=F.stop.bind(F)),F;return z.map(gt,ln,et),Re(et.opts.start)&&et.opts.start.call(T,et),et.progress(et.opts.progress).done(et.opts.done,et.opts.complete).fail(et.opts.fail).always(et.opts.always),z.fx.timer(z.extend(Me,{elem:T,anim:et,queue:et.opts.queue})),et}z.Animation=z.extend(Ui,{tweeners:{"*":[function(T,I){var R=this.createTween(T,I);return Yn(R.elem,T,di.exec(I),R),R}]},tweener:function(T,I){Re(T)?(I=T,T=["*"]):T=T.match(Nn);for(var R,F=0,H=T.length;F<H;F++)R=T[F],Ui.tweeners[R]=Ui.tweeners[R]||[],Ui.tweeners[R].unshift(I)},prefilters:[Co],prefilter:function(T,I){I?Ui.prefilters.unshift(T):Ui.prefilters.push(T)}}),z.speed=function(T,I,R){var F=T&&typeof T=="object"?z.extend({},T):{complete:R||!R&&I||Re(T)&&T,duration:T,easing:R&&I||I&&!Re(I)&&I};return z.fx.off?F.duration=0:typeof F.duration!="number"&&(F.duration in z.fx.speeds?F.duration=z.fx.speeds[F.duration]:F.duration=z.fx.speeds._default),(F.queue==null||F.queue===!0)&&(F.queue="fx"),F.old=F.complete,F.complete=function(){Re(F.old)&&F.old.call(this),F.queue&&z.dequeue(this,F.queue)},F},z.fn.extend({fadeTo:function(T,I,R,F){return this.filter(cn).css("opacity",0).show().end().animate({opacity:I},T,R,F)},animate:function(T,I,R,F){var H=z.isEmptyObject(T),K=z.speed(I,R,F),te=function(){var ze=Ui(this,z.extend({},T),K);(H||ct.get(this,"finish"))&&ze.stop(!0)};return te.finish=te,H||K.queue===!1?this.each(te):this.queue(K.queue,te)},stop:function(T,I,R){var F=function(H){var K=H.stop;delete H.stop,K(R)};return typeof T!="string"&&(R=I,I=T,T=void 0),I&&this.queue(T||"fx",[]),this.each(function(){var H=!0,K=T!=null&&T+"queueHooks",te=z.timers,ze=ct.get(this);if(K)ze[K]&&ze[K].stop&&F(ze[K]);else for(K in ze)ze[K]&&ze[K].stop&&Ou.test(K)&&F(ze[K]);for(K=te.length;K--;)te[K].elem===this&&(T==null||te[K].queue===T)&&(te[K].anim.stop(R),H=!1,te.splice(K,1));(H||!R)&&z.dequeue(this,T)})},finish:function(T){return T!==!1&&(T=T||"fx"),this.each(function(){var I,R=ct.get(this),F=R[T+"queue"],H=R[T+"queueHooks"],K=z.timers,te=F?F.length:0;for(R.finish=!0,z.queue(this,T,[]),H&&H.stop&&H.stop.call(this,!0),I=K.length;I--;)K[I].elem===this&&K[I].queue===T&&(K[I].anim.stop(!0),K.splice(I,1));for(I=0;I<te;I++)F[I]&&F[I].finish&&F[I].finish.call(this);delete R.finish})}}),z.each(["toggle","show","hide"],function(T,I){var R=z.fn[I];z.fn[I]=function(F,H,K){return F==null||typeof F=="boolean"?R.apply(this,arguments):this.animate(on(I,!0),F,H,K)}}),z.each({slideDown:on("show"),slideUp:on("hide"),slideToggle:on("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(T,I){z.fn[T]=function(R,F,H){return this.animate(I,R,F,H)}}),z.timers=[],z.fx.tick=function(){var T,I=0,R=z.timers;for(Kl=Date.now();I<R.length;I++)T=R[I],!T()&&R[I]===T&&R.splice(I--,1);R.length||z.fx.stop(),Kl=void 0},z.fx.timer=function(T){z.timers.push(T),z.fx.start()},z.fx.interval=13,z.fx.start=function(){Ds||(Ds=!0,hs())},z.fx.stop=function(){Ds=null},z.fx.speeds={slow:600,fast:200,_default:400},z.fn.delay=function(T,I){return T=z.fx&&z.fx.speeds[T]||T,I=I||"fx",this.queue(I,function(R,F){var H=r.setTimeout(R,T);F.stop=function(){r.clearTimeout(H)}})},function(){var T=ke.createElement("input"),I=ke.createElement("select"),R=I.appendChild(ke.createElement("option"));T.type="checkbox",_e.checkOn=T.value!=="",_e.optSelected=R.selected,T=ke.createElement("input"),T.value="t",T.type="radio",_e.radioValue=T.value==="t"}();var Jl,jo=z.expr.attrHandle;z.fn.extend({attr:function(T,I){return Sr(this,z.attr,T,I,arguments.length>1)},removeAttr:function(T){return this.each(function(){z.removeAttr(this,T)})}}),z.extend({attr:function(T,I,R){var F,H,K=T.nodeType;if(!(K===3||K===8||K===2)){if(typeof T.getAttribute>"u")return z.prop(T,I,R);if((K!==1||!z.isXMLDoc(T))&&(H=z.attrHooks[I.toLowerCase()]||(z.expr.match.bool.test(I)?Jl:void 0)),R!==void 0){if(R===null){z.removeAttr(T,I);return}return H&&"set"in H&&(F=H.set(T,R,I))!==void 0?F:(T.setAttribute(I,R+""),R)}return H&&"get"in H&&(F=H.get(T,I))!==null?F:(F=z.find.attr(T,I),F??void 0)}},attrHooks:{type:{set:function(T,I){if(!_e.radioValue&&I==="radio"&&Wt(T,"input")){var R=T.value;return T.setAttribute("type",I),R&&(T.value=R),I}}}},removeAttr:function(T,I){var R,F=0,H=I&&I.match(Nn);if(H&&T.nodeType===1)for(;R=H[F++];)T.removeAttribute(R)}}),Jl={set:function(T,I,R){return I===!1?z.removeAttr(T,R):T.setAttribute(R,R),R}},z.each(z.expr.match.bool.source.match(/\w+/g),function(T,I){var R=jo[I]||z.find.attr;jo[I]=function(F,H,K){var te,ze,Me=H.toLowerCase();return K||(ze=jo[Me],jo[Me]=te,te=R(F,H,K)!=null?Me:null,jo[Me]=ze),te}});var Sa=/^(?:input|select|textarea|button)$/i,is=/^(?:a|area)$/i;z.fn.extend({prop:function(T,I){return Sr(this,z.prop,T,I,arguments.length>1)},removeProp:function(T){return this.each(function(){delete this[z.propFix[T]||T]})}}),z.extend({prop:function(T,I,R){var F,H,K=T.nodeType;if(!(K===3||K===8||K===2))return(K!==1||!z.isXMLDoc(T))&&(I=z.propFix[I]||I,H=z.propHooks[I]),R!==void 0?H&&"set"in H&&(F=H.set(T,R,I))!==void 0?F:T[I]=R:H&&"get"in H&&(F=H.get(T,I))!==null?F:T[I]},propHooks:{tabIndex:{get:function(T){var I=z.find.attr(T,"tabindex");return I?parseInt(I,10):Sa.test(T.nodeName)||is.test(T.nodeName)&&T.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_e.optSelected||(z.propHooks.selected={get:function(T){var I=T.parentNode;return I&&I.parentNode&&I.parentNode.selectedIndex,null},set:function(T){var I=T.parentNode;I&&(I.selectedIndex,I.parentNode&&I.parentNode.selectedIndex)}}),z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){z.propFix[this.toLowerCase()]=this});function Wn(T){var I=T.match(Nn)||[];return I.join(" ")}function ws(T){return T.getAttribute&&T.getAttribute("class")||""}function Ca(T){return Array.isArray(T)?T:typeof T=="string"?T.match(Nn)||[]:[]}z.fn.extend({addClass:function(T){var I,R,F,H,K,te;return Re(T)?this.each(function(ze){z(this).addClass(T.call(this,ze,ws(this)))}):(I=Ca(T),I.length?this.each(function(){if(F=ws(this),R=this.nodeType===1&&" "+Wn(F)+" ",R){for(K=0;K<I.length;K++)H=I[K],R.indexOf(" "+H+" ")<0&&(R+=H+" ");te=Wn(R),F!==te&&this.setAttribute("class",te)}}):this)},removeClass:function(T){var I,R,F,H,K,te;return Re(T)?this.each(function(ze){z(this).removeClass(T.call(this,ze,ws(this)))}):arguments.length?(I=Ca(T),I.length?this.each(function(){if(F=ws(this),R=this.nodeType===1&&" "+Wn(F)+" ",R){for(K=0;K<I.length;K++)for(H=I[K];R.indexOf(" "+H+" ")>-1;)R=R.replace(" "+H+" "," ");te=Wn(R),F!==te&&this.setAttribute("class",te)}}):this):this.attr("class","")},toggleClass:function(T,I){var R,F,H,K,te=typeof T,ze=te==="string"||Array.isArray(T);return Re(T)?this.each(function(Me){z(this).toggleClass(T.call(this,Me,ws(this),I),I)}):typeof I=="boolean"&&ze?I?this.addClass(T):this.removeClass(T):(R=Ca(T),this.each(function(){if(ze)for(K=z(this),H=0;H<R.length;H++)F=R[H],K.hasClass(F)?K.removeClass(F):K.addClass(F);else(T===void 0||te==="boolean")&&(F=ws(this),F&&ct.set(this,"__className__",F),this.setAttribute&&this.setAttribute("class",F||T===!1?"":ct.get(this,"__className__")||""))}))},hasClass:function(T){var I,R,F=0;for(I=" "+T+" ";R=this[F++];)if(R.nodeType===1&&(" "+Wn(ws(R))+" ").indexOf(I)>-1)return!0;return!1}});var fl=/\r/g;z.fn.extend({val:function(T){var I,R,F,H=this[0];return arguments.length?(F=Re(T),this.each(function(K){var te;this.nodeType===1&&(F?te=T.call(this,K,z(this).val()):te=T,te==null?te="":typeof te=="number"?te+="":Array.isArray(te)&&(te=z.map(te,function(ze){return ze==null?"":ze+""})),I=z.valHooks[this.type]||z.valHooks[this.nodeName.toLowerCase()],(!I||!("set"in I)||I.set(this,te,"value")===void 0)&&(this.value=te))})):H?(I=z.valHooks[H.type]||z.valHooks[H.nodeName.toLowerCase()],I&&"get"in I&&(R=I.get(H,"value"))!==void 0?R:(R=H.value,typeof R=="string"?R.replace(fl,""):R??"")):void 0}}),z.extend({valHooks:{option:{get:function(T){var I=z.find.attr(T,"value");return I??Wn(z.text(T))}},select:{get:function(T){var I,R,F,H=T.options,K=T.selectedIndex,te=T.type==="select-one",ze=te?null:[],Me=te?K+1:H.length;for(K<0?F=Me:F=te?K:0;F<Me;F++)if(R=H[F],(R.selected||F===K)&&!R.disabled&&(!R.parentNode.disabled||!Wt(R.parentNode,"optgroup"))){if(I=z(R).val(),te)return I;ze.push(I)}return ze},set:function(T,I){for(var R,F,H=T.options,K=z.makeArray(I),te=H.length;te--;)F=H[te],(F.selected=z.inArray(z.valHooks.option.get(F),K)>-1)&&(R=!0);return R||(T.selectedIndex=-1),K}}}}),z.each(["radio","checkbox"],function(){z.valHooks[this]={set:function(T,I){if(Array.isArray(I))return T.checked=z.inArray(z(T).val(),I)>-1}},_e.checkOn||(z.valHooks[this].get=function(T){return T.getAttribute("value")===null?"on":T.value})}),_e.focusin="onfocusin"in r;var Vo=/^(?:focusinfocus|focusoutblur)$/,pl=function(T){T.stopPropagation()};z.extend(z.event,{trigger:function(T,I,R,F){var H,K,te,ze,Me,et,gt,Dt,ht=[R||ke],mt=Z.call(T,"type")?T.type:T,Jt=Z.call(T,"namespace")?T.namespace.split("."):[];if(K=Dt=te=R=R||ke,!(R.nodeType===3||R.nodeType===8)&&!Vo.test(mt+z.event.triggered)&&(mt.indexOf(".")>-1&&(Jt=mt.split("."),mt=Jt.shift(),Jt.sort()),Me=mt.indexOf(":")<0&&"on"+mt,T=T[z.expando]?T:new z.Event(mt,typeof T=="object"&&T),T.isTrigger=F?2:3,T.namespace=Jt.join("."),T.rnamespace=T.namespace?new RegExp("(^|\\.)"+Jt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,T.result=void 0,T.target||(T.target=R),I=I==null?[T]:z.makeArray(I,[T]),gt=z.event.special[mt]||{},!(!F&&gt.trigger&&gt.trigger.apply(R,I)===!1))){if(!F&&!gt.noBubble&&!nt(R)){for(ze=gt.delegateType||mt,Vo.test(ze+mt)||(K=K.parentNode);K;K=K.parentNode)ht.push(K),te=K;te===(R.ownerDocument||ke)&&ht.push(te.defaultView||te.parentWindow||r)}for(H=0;(K=ht[H++])&&!T.isPropagationStopped();)Dt=K,T.type=H>1?ze:gt.bindType||mt,et=(ct.get(K,"events")||Object.create(null))[T.type]&&ct.get(K,"handle"),et&&et.apply(K,I),et=Me&&K[Me],et&&et.apply&&tt(K)&&(T.result=et.apply(K,I),T.result===!1&&T.preventDefault());return T.type=mt,!F&&!T.isDefaultPrevented()&&(!gt._default||gt._default.apply(ht.pop(),I)===!1)&&tt(R)&&Me&&Re(R[mt])&&!nt(R)&&(te=R[Me],te&&(R[Me]=null),z.event.triggered=mt,T.isPropagationStopped()&&Dt.addEventListener(mt,pl),R[mt](),T.isPropagationStopped()&&Dt.removeEventListener(mt,pl),z.event.triggered=void 0,te&&(R[Me]=te)),T.result}},simulate:function(T,I,R){var F=z.extend(new z.Event,R,{type:T,isSimulated:!0});z.event.trigger(F,null,I)}}),z.fn.extend({trigger:function(T,I){return this.each(function(){z.event.trigger(T,I,this)})},triggerHandler:function(T,I){var R=this[0];if(R)return z.event.trigger(T,I,R,!0)}}),_e.focusin||z.each({focus:"focusin",blur:"focusout"},function(T,I){var R=function(F){z.event.simulate(I,F.target,z.event.fix(F))};z.event.special[I]={setup:function(){var F=this.ownerDocument||this.document||this,H=ct.access(F,I);H||F.addEventListener(T,R,!0),ct.access(F,I,(H||0)+1)},teardown:function(){var F=this.ownerDocument||this.document||this,H=ct.access(F,I)-1;H?ct.access(F,I,H):(F.removeEventListener(T,R,!0),ct.remove(F,I))}}});var Va=r.location,Ma={guid:Date.now()},$a=/\?/;z.parseXML=function(T){var I,R;if(!T||typeof T!="string")return null;try{I=new r.DOMParser().parseFromString(T,"text/xml")}catch{}return R=I&&I.getElementsByTagName("parsererror")[0],(!I||R)&&z.error("Invalid XML: "+(R?z.map(R.childNodes,function(F){return F.textContent}).join(`
`):T)),I};var Ac=/\[\]$/,Ic=/\r?\n/g,Ns=/^(?:submit|button|image|reset|file)$/i,kr=/^(?:input|select|textarea|keygen)/i;function ml(T,I,R,F){var H;if(Array.isArray(I))z.each(I,function(K,te){R||Ac.test(T)?F(T,te):ml(T+"["+(typeof te=="object"&&te!=null?K:"")+"]",te,R,F)});else if(!R&&Et(I)==="object")for(H in I)ml(T+"["+H+"]",I[H],R,F);else F(T,I)}z.param=function(T,I){var R,F=[],H=function(K,te){var ze=Re(te)?te():te;F[F.length]=encodeURIComponent(K)+"="+encodeURIComponent(ze??"")};if(T==null)return"";if(Array.isArray(T)||T.jquery&&!z.isPlainObject(T))z.each(T,function(){H(this.name,this.value)});else for(R in T)ml(R,T[R],I,H);return F.join("&")},z.fn.extend({serialize:function(){return z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var T=z.prop(this,"elements");return T?z.makeArray(T):this}).filter(function(){var T=this.type;return this.name&&!z(this).is(":disabled")&&kr.test(this.nodeName)&&!Ns.test(T)&&(this.checked||!Yr.test(T))}).map(function(T,I){var R=z(this).val();return R==null?null:Array.isArray(R)?z.map(R,function(F){return{name:I.name,value:F.replace(Ic,`\r
`)}}):{name:I.name,value:R.replace(Ic,`\r
`)}}).get()}});var zu=/%20/g,fs=/#.*$/,Mo=/([?&])_=[^&]*/,Dd=/^(.*?):[ \t]*([^\r\n]*)$/mg,Qc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Xr=/^(?:GET|HEAD)$/,_l=/^\/\//,eu={},gl={},ns="*/".concat("*"),Ga=ke.createElement("a");Ga.href=Va.href;function tu(T){return function(I,R){typeof I!="string"&&(R=I,I="*");var F,H=0,K=I.toLowerCase().match(Nn)||[];if(Re(R))for(;F=K[H++];)F[0]==="+"?(F=F.slice(1)||"*",(T[F]=T[F]||[]).unshift(R)):(T[F]=T[F]||[]).push(R)}}function kn(T,I,R,F){var H={},K=T===gl;function te(ze){var Me;return H[ze]=!0,z.each(T[ze]||[],function(et,gt){var Dt=gt(I,R,F);if(typeof Dt=="string"&&!K&&!H[Dt])return I.dataTypes.unshift(Dt),te(Dt),!1;if(K)return!(Me=Dt)}),Me}return te(I.dataTypes[0])||!H["*"]&&te("*")}function Un(T,I){var R,F,H=z.ajaxSettings.flatOptions||{};for(R in I)I[R]!==void 0&&((H[R]?T:F||(F={}))[R]=I[R]);return F&&z.extend(!0,T,F),T}function iu(T,I,R){for(var F,H,K,te,ze=T.contents,Me=T.dataTypes;Me[0]==="*";)Me.shift(),F===void 0&&(F=T.mimeType||I.getResponseHeader("Content-Type"));if(F){for(H in ze)if(ze[H]&&ze[H].test(F)){Me.unshift(H);break}}if(Me[0]in R)K=Me[0];else{for(H in R){if(!Me[0]||T.converters[H+" "+Me[0]]){K=H;break}te||(te=H)}K=K||te}if(K)return K!==Me[0]&&Me.unshift(K),R[K]}function Oh(T,I,R,F){var H,K,te,ze,Me,et={},gt=T.dataTypes.slice();if(gt[1])for(te in T.converters)et[te.toLowerCase()]=T.converters[te];for(K=gt.shift();K;)if(T.responseFields[K]&&(R[T.responseFields[K]]=I),!Me&&F&&T.dataFilter&&(I=T.dataFilter(I,T.dataType)),Me=K,K=gt.shift(),K){if(K==="*")K=Me;else if(Me!=="*"&&Me!==K){if(te=et[Me+" "+K]||et["* "+K],!te){for(H in et)if(ze=H.split(" "),ze[1]===K&&(te=et[Me+" "+ze[0]]||et["* "+ze[0]],te)){te===!0?te=et[H]:et[H]!==!0&&(K=ze[0],gt.unshift(ze[1]));break}}if(te!==!0)if(te&&T.throws)I=te(I);else try{I=te(I)}catch(Dt){return{state:"parsererror",error:te?Dt:"No conversion from "+Me+" to "+K}}}}return{state:"success",data:I}}z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Va.href,type:"GET",isLocal:Qc.test(Va.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ns,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(T,I){return I?Un(Un(T,z.ajaxSettings),I):Un(z.ajaxSettings,T)},ajaxPrefilter:tu(eu),ajaxTransport:tu(gl),ajax:function(T,I){typeof T=="object"&&(I=T,T=void 0),I=I||{};var R,F,H,K,te,ze,Me,et,gt,Dt,ht=z.ajaxSetup({},I),mt=ht.context||ht,Jt=ht.context&&(mt.nodeType||mt.jquery)?z(mt):z.event,nn=z.Deferred(),wi=z.Callbacks("once memory"),Mr=ht.statusCode||{},lr={},gn={},yn="canceled",Gi={readyState:0,getResponseHeader:function(bn){var Qn;if(Me){if(!K)for(K={};Qn=Dd.exec(H);)K[Qn[1].toLowerCase()+" "]=(K[Qn[1].toLowerCase()+" "]||[]).concat(Qn[2]);Qn=K[bn.toLowerCase()+" "]}return Qn==null?null:Qn.join(", ")},getAllResponseHeaders:function(){return Me?H:null},setRequestHeader:function(bn,Qn){return Me==null&&(bn=gn[bn.toLowerCase()]=gn[bn.toLowerCase()]||bn,lr[bn]=Qn),this},overrideMimeType:function(bn){return Me==null&&(ht.mimeType=bn),this},statusCode:function(bn){var Qn;if(bn)if(Me)Gi.always(bn[Gi.status]);else for(Qn in bn)Mr[Qn]=[Mr[Qn],bn[Qn]];return this},abort:function(bn){var Qn=bn||yn;return R&&R.abort(Qn),Ps(0,Qn),this}};if(nn.promise(Gi),ht.url=((T||ht.url||Va.href)+"").replace(_l,Va.protocol+"//"),ht.type=I.method||I.type||ht.method||ht.type,ht.dataTypes=(ht.dataType||"*").toLowerCase().match(Nn)||[""],ht.crossDomain==null){ze=ke.createElement("a");try{ze.href=ht.url,ze.href=ze.href,ht.crossDomain=Ga.protocol+"//"+Ga.host!=ze.protocol+"//"+ze.host}catch{ht.crossDomain=!0}}if(ht.data&&ht.processData&&typeof ht.data!="string"&&(ht.data=z.param(ht.data,ht.traditional)),kn(eu,ht,I,Gi),Me)return Gi;et=z.event&&ht.global,et&&z.active++===0&&z.event.trigger("ajaxStart"),ht.type=ht.type.toUpperCase(),ht.hasContent=!Xr.test(ht.type),F=ht.url.replace(fs,""),ht.hasContent?ht.data&&ht.processData&&(ht.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ht.data=ht.data.replace(zu,"+")):(Dt=ht.url.slice(F.length),ht.data&&(ht.processData||typeof ht.data=="string")&&(F+=($a.test(F)?"&":"?")+ht.data,delete ht.data),ht.cache===!1&&(F=F.replace(Mo,"$1"),Dt=($a.test(F)?"&":"?")+"_="+Ma.guid+++Dt),ht.url=F+Dt),ht.ifModified&&(z.lastModified[F]&&Gi.setRequestHeader("If-Modified-Since",z.lastModified[F]),z.etag[F]&&Gi.setRequestHeader("If-None-Match",z.etag[F])),(ht.data&&ht.hasContent&&ht.contentType!==!1||I.contentType)&&Gi.setRequestHeader("Content-Type",ht.contentType),Gi.setRequestHeader("Accept",ht.dataTypes[0]&&ht.accepts[ht.dataTypes[0]]?ht.accepts[ht.dataTypes[0]]+(ht.dataTypes[0]!=="*"?", "+ns+"; q=0.01":""):ht.accepts["*"]);for(gt in ht.headers)Gi.setRequestHeader(gt,ht.headers[gt]);if(ht.beforeSend&&(ht.beforeSend.call(mt,Gi,ht)===!1||Me))return Gi.abort();if(yn="abort",wi.add(ht.complete),Gi.done(ht.success),Gi.fail(ht.error),R=kn(gl,ht,I,Gi),!R)Ps(-1,"No Transport");else{if(Gi.readyState=1,et&&Jt.trigger("ajaxSend",[Gi,ht]),Me)return Gi;ht.async&&ht.timeout>0&&(te=r.setTimeout(function(){Gi.abort("timeout")},ht.timeout));try{Me=!1,R.send(lr,Ps)}catch(bn){if(Me)throw bn;Ps(-1,bn)}}function Ps(bn,Qn,sa,vl){var ps,lo,Ji,Ts,Go,Xs=Qn;Me||(Me=!0,te&&r.clearTimeout(te),R=void 0,H=vl||"",Gi.readyState=bn>0?4:0,ps=bn>=200&&bn<300||bn===304,sa&&(Ts=iu(ht,Gi,sa)),!ps&&z.inArray("script",ht.dataTypes)>-1&&z.inArray("json",ht.dataTypes)<0&&(ht.converters["text script"]=function(){}),Ts=Oh(ht,Ts,Gi,ps),ps?(ht.ifModified&&(Go=Gi.getResponseHeader("Last-Modified"),Go&&(z.lastModified[F]=Go),Go=Gi.getResponseHeader("etag"),Go&&(z.etag[F]=Go)),bn===204||ht.type==="HEAD"?Xs="nocontent":bn===304?Xs="notmodified":(Xs=Ts.state,lo=Ts.data,Ji=Ts.error,ps=!Ji)):(Ji=Xs,(bn||!Xs)&&(Xs="error",bn<0&&(bn=0))),Gi.status=bn,Gi.statusText=(Qn||Xs)+"",ps?nn.resolveWith(mt,[lo,Xs,Gi]):nn.rejectWith(mt,[Gi,Xs,Ji]),Gi.statusCode(Mr),Mr=void 0,et&&Jt.trigger(ps?"ajaxSuccess":"ajaxError",[Gi,ht,ps?lo:Ji]),wi.fireWith(mt,[Gi,Xs]),et&&(Jt.trigger("ajaxComplete",[Gi,ht]),--z.active||z.event.trigger("ajaxStop")))}return Gi},getJSON:function(T,I,R){return z.get(T,I,R,"json")},getScript:function(T,I){return z.get(T,void 0,I,"script")}}),z.each(["get","post"],function(T,I){z[I]=function(R,F,H,K){return Re(F)&&(K=K||H,H=F,F=void 0),z.ajax(z.extend({url:R,type:I,dataType:K,data:F,success:H},z.isPlainObject(R)&&R))}}),z.ajaxPrefilter(function(T){var I;for(I in T.headers)I.toLowerCase()==="content-type"&&(T.contentType=T.headers[I]||"")}),z._evalUrl=function(T,I,R){return z.ajax({url:T,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(F){z.globalEval(F,I,R)}})},z.fn.extend({wrapAll:function(T){var I;return this[0]&&(Re(T)&&(T=T.call(this[0])),I=z(T,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&I.insertBefore(this[0]),I.map(function(){for(var R=this;R.firstElementChild;)R=R.firstElementChild;return R}).append(this)),this},wrapInner:function(T){return Re(T)?this.each(function(I){z(this).wrapInner(T.call(this,I))}):this.each(function(){var I=z(this),R=I.contents();R.length?R.wrapAll(T):I.append(T)})},wrap:function(T){var I=Re(T);return this.each(function(R){z(this).wrapAll(I?T.call(this,R):T)})},unwrap:function(T){return this.parent(T).not("body").each(function(){z(this).replaceWith(this.childNodes)}),this}}),z.expr.pseudos.hidden=function(T){return!z.expr.pseudos.visible(T)},z.expr.pseudos.visible=function(T){return!!(T.offsetWidth||T.offsetHeight||T.getClientRects().length)},z.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var Bu={0:200,1223:204},$o=z.ajaxSettings.xhr();_e.cors=!!$o&&"withCredentials"in $o,_e.ajax=$o=!!$o,z.ajaxTransport(function(T){var I,R;if(_e.cors||$o&&!T.crossDomain)return{send:function(F,H){var K,te=T.xhr();if(te.open(T.type,T.url,T.async,T.username,T.password),T.xhrFields)for(K in T.xhrFields)te[K]=T.xhrFields[K];T.mimeType&&te.overrideMimeType&&te.overrideMimeType(T.mimeType),!T.crossDomain&&!F["X-Requested-With"]&&(F["X-Requested-With"]="XMLHttpRequest");for(K in F)te.setRequestHeader(K,F[K]);I=function(ze){return function(){I&&(I=R=te.onload=te.onerror=te.onabort=te.ontimeout=te.onreadystatechange=null,ze==="abort"?te.abort():ze==="error"?typeof te.status!="number"?H(0,"error"):H(te.status,te.statusText):H(Bu[te.status]||te.status,te.statusText,(te.responseType||"text")!=="text"||typeof te.responseText!="string"?{binary:te.response}:{text:te.responseText},te.getAllResponseHeaders()))}},te.onload=I(),R=te.onerror=te.ontimeout=I("error"),te.onabort!==void 0?te.onabort=R:te.onreadystatechange=function(){te.readyState===4&&r.setTimeout(function(){I&&R()})},I=I("abort");try{te.send(T.hasContent&&T.data||null)}catch(ze){if(I)throw ze}},abort:function(){I&&I()}}}),z.ajaxPrefilter(function(T){T.crossDomain&&(T.contents.script=!1)}),z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(T){return z.globalEval(T),T}}}),z.ajaxPrefilter("script",function(T){T.cache===void 0&&(T.cache=!1),T.crossDomain&&(T.type="GET")}),z.ajaxTransport("script",function(T){if(T.crossDomain||T.scriptAttrs){var I,R;return{send:function(F,H){I=z("<script>").attr(T.scriptAttrs||{}).prop({charset:T.scriptCharset,src:T.url}).on("load error",R=function(K){I.remove(),R=null,K&&H(K.type==="error"?404:200,K.type)}),ke.head.appendChild(I[0])},abort:function(){R&&R()}}}});var kc=[],nu=/(=)\?(?=&|$)|\?\?/;z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var T=kc.pop()||z.expando+"_"+Ma.guid++;return this[T]=!0,T}}),z.ajaxPrefilter("json jsonp",function(T,I,R){var F,H,K,te=T.jsonp!==!1&&(nu.test(T.url)?"url":typeof T.data=="string"&&(T.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&nu.test(T.data)&&"data");if(te||T.dataTypes[0]==="jsonp")return F=T.jsonpCallback=Re(T.jsonpCallback)?T.jsonpCallback():T.jsonpCallback,te?T[te]=T[te].replace(nu,"$1"+F):T.jsonp!==!1&&(T.url+=($a.test(T.url)?"&":"?")+T.jsonp+"="+F),T.converters["script json"]=function(){return K||z.error(F+" was not called"),K[0]},T.dataTypes[0]="json",H=r[F],r[F]=function(){K=arguments},R.always(function(){H===void 0?z(r).removeProp(F):r[F]=H,T[F]&&(T.jsonpCallback=I.jsonpCallback,kc.push(F)),K&&Re(H)&&H(K[0]),K=H=void 0}),"script"}),_e.createHTMLDocument=function(){var T=ke.implementation.createHTMLDocument("").body;return T.innerHTML="<form></form><form></form>",T.childNodes.length===2}(),z.parseHTML=function(T,I,R){if(typeof T!="string")return[];typeof I=="boolean"&&(R=I,I=!1);var F,H,K;return I||(_e.createHTMLDocument?(I=ke.implementation.createHTMLDocument(""),F=I.createElement("base"),F.href=ke.location.href,I.head.appendChild(F)):I=ke),H=hi.exec(T),K=!R&&[],H?[I.createElement(H[1])]:(H=dl([T],I,K),K&&K.length&&z(K).remove(),z.merge([],H.childNodes))},z.fn.load=function(T,I,R){var F,H,K,te=this,ze=T.indexOf(" ");return ze>-1&&(F=Wn(T.slice(ze)),T=T.slice(0,ze)),Re(I)?(R=I,I=void 0):I&&typeof I=="object"&&(H="POST"),te.length>0&&z.ajax({url:T,type:H||"GET",dataType:"html",data:I}).done(function(Me){K=arguments,te.html(F?z("<div>").append(z.parseHTML(Me)).find(F):Me)}).always(R&&function(Me,et){te.each(function(){R.apply(this,K||[Me.responseText,et,Me])})}),this},z.expr.pseudos.animated=function(T){return z.grep(z.timers,function(I){return T===I.elem}).length},z.offset={setOffset:function(T,I,R){var F,H,K,te,ze,Me,et,gt=z.css(T,"position"),Dt=z(T),ht={};gt==="static"&&(T.style.position="relative"),ze=Dt.offset(),K=z.css(T,"top"),Me=z.css(T,"left"),et=(gt==="absolute"||gt==="fixed")&&(K+Me).indexOf("auto")>-1,et?(F=Dt.position(),te=F.top,H=F.left):(te=parseFloat(K)||0,H=parseFloat(Me)||0),Re(I)&&(I=I.call(T,R,z.extend({},ze))),I.top!=null&&(ht.top=I.top-ze.top+te),I.left!=null&&(ht.left=I.left-ze.left+H),"using"in I?I.using.call(T,ht):Dt.css(ht)}},z.fn.extend({offset:function(T){if(arguments.length)return T===void 0?this:this.each(function(H){z.offset.setOffset(this,T,H)});var I,R,F=this[0];if(F)return F.getClientRects().length?(I=F.getBoundingClientRect(),R=F.ownerDocument.defaultView,{top:I.top+R.pageYOffset,left:I.left+R.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var T,I,R,F=this[0],H={top:0,left:0};if(z.css(F,"position")==="fixed")I=F.getBoundingClientRect();else{for(I=this.offset(),R=F.ownerDocument,T=F.offsetParent||R.documentElement;T&&(T===R.body||T===R.documentElement)&&z.css(T,"position")==="static";)T=T.parentNode;T&&T!==F&&T.nodeType===1&&(H=z(T).offset(),H.top+=z.css(T,"borderTopWidth",!0),H.left+=z.css(T,"borderLeftWidth",!0))}return{top:I.top-H.top-z.css(F,"marginTop",!0),left:I.left-H.left-z.css(F,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var T=this.offsetParent;T&&z.css(T,"position")==="static";)T=T.offsetParent;return T||Di})}}),z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(T,I){var R=I==="pageYOffset";z.fn[T]=function(F){return Sr(this,function(H,K,te){var ze;if(nt(H)?ze=H:H.nodeType===9&&(ze=H.defaultView),te===void 0)return ze?ze[I]:H[K];ze?ze.scrollTo(R?ze.pageXOffset:te,R?te:ze.pageYOffset):H[K]=te},T,F,arguments.length)}}),z.each(["top","left"],function(T,I){z.cssHooks[I]=Li(_e.pixelPosition,function(R,F){if(F)return F=yi(R,I),Be.test(F)?z(R).position()[I]+"px":F})}),z.each({Height:"height",Width:"width"},function(T,I){z.each({padding:"inner"+T,content:I,"":"outer"+T},function(R,F){z.fn[F]=function(H,K){var te=arguments.length&&(R||typeof H!="boolean"),ze=R||(H===!0||K===!0?"margin":"border");return Sr(this,function(Me,et,gt){var Dt;return nt(Me)?F.indexOf("outer")===0?Me["inner"+T]:Me.document.documentElement["client"+T]:Me.nodeType===9?(Dt=Me.documentElement,Math.max(Me.body["scroll"+T],Dt["scroll"+T],Me.body["offset"+T],Dt["offset"+T],Dt["client"+T])):gt===void 0?z.css(Me,et,ze):z.style(Me,et,gt,ze)},I,te?H:void 0,te)}})}),z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(T,I){z.fn[I]=function(R){return this.on(I,R)}}),z.fn.extend({bind:function(T,I,R){return this.on(T,null,I,R)},unbind:function(T,I){return this.off(T,null,I)},delegate:function(T,I,R,F){return this.on(I,T,R,F)},undelegate:function(T,I,R){return arguments.length===1?this.off(T,"**"):this.off(I,T||"**",R)},hover:function(T,I){return this.mouseenter(T).mouseleave(I||T)}}),z.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(T,I){z.fn[I]=function(R,F){return arguments.length>0?this.on(I,null,R,F):this.trigger(I)}});var yl=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;z.proxy=function(T,I){var R,F,H;if(typeof I=="string"&&(R=T[I],I=T,T=R),!!Re(T))return F=x.call(arguments,2),H=function(){return T.apply(I||this,F.concat(x.call(arguments)))},H.guid=T.guid=T.guid||z.guid++,H},z.holdReady=function(T){T?z.readyWait++:z.ready(!0)},z.isArray=Array.isArray,z.parseJSON=JSON.parse,z.nodeName=Wt,z.isFunction=Re,z.isWindow=nt,z.camelCase=Ve,z.type=Et,z.now=Date.now,z.isNumeric=function(T){var I=z.type(T);return(I==="number"||I==="string")&&!isNaN(T-parseFloat(T))},z.trim=function(T){return T==null?"":(T+"").replace(yl,"$1")};var qa=r.jQuery,Kr=r.$;return z.noConflict=function(T){return r.$===z&&(r.$=Kr),T&&r.jQuery===z&&(r.jQuery=qa),z},typeof a>"u"&&(r.jQuery=r.$=z),z})})(DE);const PE=Zx;function a8(e,r){return function(){return e.apply(r,arguments)}}const{toString:l8}=Object.prototype,{getPrototypeOf:U3}=Object,j3=(e=>r=>{const a=l8.call(r);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Md=e=>(e=e.toLowerCase(),r=>j3(r)===e),Uy=e=>r=>typeof r===e,{isArray:B0}=Array,R1=Uy("undefined");function LE(e){return e!==null&&!R1(e)&&e.constructor!==null&&!R1(e.constructor)&&Zf(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const c8=Md("ArrayBuffer");function RE(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&c8(e.buffer),r}const OE=Uy("string"),Zf=Uy("function"),u8=Uy("number"),V3=e=>e!==null&&typeof e=="object",zE=e=>e===!0||e===!1,Qg=e=>{if(j3(e)!=="object")return!1;const r=U3(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},BE=Md("Date"),FE=Md("File"),NE=Md("Blob"),UE=Md("FileList"),jE=e=>V3(e)&&Zf(e.pipe),VE=e=>{const r="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||l8.call(e)===r||Zf(e.toString)&&e.toString()===r)},$E=Md("URLSearchParams"),GE=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function J1(e,r,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let d,_;if(typeof e!="object"&&(e=[e]),B0(e))for(d=0,_=e.length;d<_;d++)r.call(null,e[d],d,e);else{const x=a?Object.getOwnPropertyNames(e):Object.keys(e),E=x.length;let o;for(d=0;d<E;d++)o=x[d],r.call(null,e[o],o,e)}}function d8(e,r){r=r.toLowerCase();const a=Object.keys(e);let d=a.length,_;for(;d-- >0;)if(_=a[d],r===_.toLowerCase())return _;return null}const h8=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),f8=e=>!R1(e)&&e!==h8;function Yx(){const{caseless:e}=f8(this)&&this||{},r={},a=(d,_)=>{const x=e&&d8(r,_)||_;Qg(r[x])&&Qg(d)?r[x]=Yx(r[x],d):Qg(d)?r[x]=Yx({},d):B0(d)?r[x]=d.slice():r[x]=d};for(let d=0,_=arguments.length;d<_;d++)arguments[d]&&J1(arguments[d],a);return r}const qE=(e,r,a,{allOwnKeys:d}={})=>(J1(r,(_,x)=>{a&&Zf(_)?e[x]=a8(_,a):e[x]=_},{allOwnKeys:d}),e),WE=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),HE=(e,r,a,d)=>{e.prototype=Object.create(r.prototype,d),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),a&&Object.assign(e.prototype,a)},ZE=(e,r,a,d)=>{let _,x,E;const o={};if(r=r||{},e==null)return r;do{for(_=Object.getOwnPropertyNames(e),x=_.length;x-- >0;)E=_[x],(!d||d(E,e,r))&&!o[E]&&(r[E]=e[E],o[E]=!0);e=a!==!1&&U3(e)}while(e&&(!a||a(e,r))&&e!==Object.prototype);return r},YE=(e,r,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=r.length;const d=e.indexOf(r,a);return d!==-1&&d===a},XE=e=>{if(!e)return null;if(B0(e))return e;let r=e.length;if(!u8(r))return null;const a=new Array(r);for(;r-- >0;)a[r]=e[r];return a},KE=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&U3(Uint8Array)),JE=(e,r)=>{const d=(e&&e[Symbol.iterator]).call(e);let _;for(;(_=d.next())&&!_.done;){const x=_.value;r.call(e,x[0],x[1])}},QE=(e,r)=>{let a;const d=[];for(;(a=e.exec(r))!==null;)d.push(a);return d},e9=Md("HTMLFormElement"),t9=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(a,d,_){return d.toUpperCase()+_}),kw=(({hasOwnProperty:e})=>(r,a)=>e.call(r,a))(Object.prototype),i9=Md("RegExp"),p8=(e,r)=>{const a=Object.getOwnPropertyDescriptors(e),d={};J1(a,(_,x)=>{r(_,x,e)!==!1&&(d[x]=_)}),Object.defineProperties(e,d)},n9=e=>{p8(e,(r,a)=>{if(Zf(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const d=e[a];if(Zf(d)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},r9=(e,r)=>{const a={},d=_=>{_.forEach(x=>{a[x]=!0})};return B0(e)?d(e):d(String(e).split(r)),a},s9=()=>{},o9=(e,r)=>(e=+e,Number.isFinite(e)?e:r),a9=e=>{const r=new Array(10),a=(d,_)=>{if(V3(d)){if(r.indexOf(d)>=0)return;if(!("toJSON"in d)){r[_]=d;const x=B0(d)?[]:{};return J1(d,(E,o)=>{const D=a(E,_+1);!R1(D)&&(x[o]=D)}),r[_]=void 0,x}}return d};return a(e,0)},Vt={isArray:B0,isArrayBuffer:c8,isBuffer:LE,isFormData:VE,isArrayBufferView:RE,isString:OE,isNumber:u8,isBoolean:zE,isObject:V3,isPlainObject:Qg,isUndefined:R1,isDate:BE,isFile:FE,isBlob:NE,isRegExp:i9,isFunction:Zf,isStream:jE,isURLSearchParams:$E,isTypedArray:KE,isFileList:UE,forEach:J1,merge:Yx,extend:qE,trim:GE,stripBOM:WE,inherits:HE,toFlatObject:ZE,kindOf:j3,kindOfTest:Md,endsWith:YE,toArray:XE,forEachEntry:JE,matchAll:QE,isHTMLForm:e9,hasOwnProperty:kw,hasOwnProp:kw,reduceDescriptors:p8,freezeMethods:n9,toObjectSet:r9,toCamelCase:t9,noop:s9,toFiniteNumber:o9,findKey:d8,global:h8,isContextDefined:f8,toJSONObject:a9};function _r(e,r,a,d,_){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),a&&(this.config=a),d&&(this.request=d),_&&(this.response=_)}Vt.inherits(_r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Vt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const m8=_r.prototype,_8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_8[e]={value:e}});Object.defineProperties(_r,_8);Object.defineProperty(m8,"isAxiosError",{value:!0});_r.from=(e,r,a,d,_,x)=>{const E=Object.create(m8);return Vt.toFlatObject(e,E,function(D){return D!==Error.prototype},o=>o!=="isAxiosError"),_r.call(E,e.message,r,a,d,_),E.cause=e,E.name=e.name,x&&Object.assign(E,x),E};var l9=typeof self=="object"?self.FormData:window.FormData;const c9=l9;function Xx(e){return Vt.isPlainObject(e)||Vt.isArray(e)}function g8(e){return Vt.endsWith(e,"[]")?e.slice(0,-2):e}function Dw(e,r,a){return e?e.concat(r).map(function(_,x){return _=g8(_),!a&&x?"["+_+"]":_}).join(a?".":""):r}function u9(e){return Vt.isArray(e)&&!e.some(Xx)}const d9=Vt.toFlatObject(Vt,{},null,function(r){return/^is[A-Z]/.test(r)});function h9(e){return e&&Vt.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function jy(e,r,a){if(!Vt.isObject(e))throw new TypeError("target must be an object");r=r||new(c9||FormData),a=Vt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Re,nt){return!Vt.isUndefined(nt[Re])});const d=a.metaTokens,_=a.visitor||X,x=a.dots,E=a.indexes,D=(a.Blob||typeof Blob<"u"&&Blob)&&h9(r);if(!Vt.isFunction(_))throw new TypeError("visitor must be a function");function V(_e){if(_e===null)return"";if(Vt.isDate(_e))return _e.toISOString();if(!D&&Vt.isBlob(_e))throw new _r("Blob is not supported. Use a Buffer instead.");return Vt.isArrayBuffer(_e)||Vt.isTypedArray(_e)?D&&typeof Blob=="function"?new Blob([_e]):Buffer.from(_e):_e}function X(_e,Re,nt){let ke=_e;if(_e&&!nt&&typeof _e=="object"){if(Vt.endsWith(Re,"{}"))Re=d?Re:Re.slice(0,-2),_e=JSON.stringify(_e);else if(Vt.isArray(_e)&&u9(_e)||Vt.isFileList(_e)||Vt.endsWith(Re,"[]")&&(ke=Vt.toArray(_e)))return Re=g8(Re),ke.forEach(function($e,Et){!(Vt.isUndefined($e)||$e===null)&&r.append(E===!0?Dw([Re],Et,x):E===null?Re:Re+"[]",V($e))}),!1}return Xx(_e)?!0:(r.append(Dw(nt,Re,x),V(_e)),!1)}const Z=[],he=Object.assign(d9,{defaultVisitor:X,convertValue:V,isVisitable:Xx});function Se(_e,Re){if(!Vt.isUndefined(_e)){if(Z.indexOf(_e)!==-1)throw Error("Circular reference detected in "+Re.join("."));Z.push(_e),Vt.forEach(_e,function(ke,Le){(!(Vt.isUndefined(ke)||ke===null)&&_.call(r,ke,Vt.isString(Le)?Le.trim():Le,Re,he))===!0&&Se(ke,Re?Re.concat(Le):[Le])}),Z.pop()}}if(!Vt.isObject(e))throw new TypeError("data must be an object");return Se(e),r}function Pw(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(d){return r[d]})}function $3(e,r){this._pairs=[],e&&jy(e,this,r)}const y8=$3.prototype;y8.append=function(r,a){this._pairs.push([r,a])};y8.toString=function(r){const a=r?function(d){return r.call(this,d,Pw)}:Pw;return this._pairs.map(function(_){return a(_[0])+"="+a(_[1])},"").join("&")};function f9(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function v8(e,r,a){if(!r)return e;const d=a&&a.encode||f9,_=a&&a.serialize;let x;if(_?x=_(r,a):x=Vt.isURLSearchParams(r)?r.toString():new $3(r,a).toString(d),x){const E=e.indexOf("#");E!==-1&&(e=e.slice(0,E)),e+=(e.indexOf("?")===-1?"?":"&")+x}return e}class p9{constructor(){this.handlers=[]}use(r,a,d){return this.handlers.push({fulfilled:r,rejected:a,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Vt.forEach(this.handlers,function(d){d!==null&&r(d)})}}const Lw=p9,x8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},m9=typeof URLSearchParams<"u"?URLSearchParams:$3,_9=FormData,g9=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),y9=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Iu={isBrowser:!0,classes:{URLSearchParams:m9,FormData:_9,Blob},isStandardBrowserEnv:g9,isStandardBrowserWebWorkerEnv:y9,protocols:["http","https","file","blob","url","data"]};function v9(e,r){return jy(e,new Iu.classes.URLSearchParams,Object.assign({visitor:function(a,d,_,x){return Iu.isNode&&Vt.isBuffer(a)?(this.append(d,a.toString("base64")),!1):x.defaultVisitor.apply(this,arguments)}},r))}function x9(e){return Vt.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function b9(e){const r={},a=Object.keys(e);let d;const _=a.length;let x;for(d=0;d<_;d++)x=a[d],r[x]=e[x];return r}function b8(e){function r(a,d,_,x){let E=a[x++];const o=Number.isFinite(+E),D=x>=a.length;return E=!E&&Vt.isArray(_)?_.length:E,D?(Vt.hasOwnProp(_,E)?_[E]=[_[E],d]:_[E]=d,!o):((!_[E]||!Vt.isObject(_[E]))&&(_[E]=[]),r(a,d,_[E],x)&&Vt.isArray(_[E])&&(_[E]=b9(_[E])),!o)}if(Vt.isFormData(e)&&Vt.isFunction(e.entries)){const a={};return Vt.forEachEntry(e,(d,_)=>{r(x9(d),_,a,0)}),a}return null}const w9={"Content-Type":void 0};function T9(e,r,a){if(Vt.isString(e))try{return(r||JSON.parse)(e),Vt.trim(e)}catch(d){if(d.name!=="SyntaxError")throw d}return(a||JSON.stringify)(e)}const Vy={transitional:x8,adapter:["xhr","http"],transformRequest:[function(r,a){const d=a.getContentType()||"",_=d.indexOf("application/json")>-1,x=Vt.isObject(r);if(x&&Vt.isHTMLForm(r)&&(r=new FormData(r)),Vt.isFormData(r))return _&&_?JSON.stringify(b8(r)):r;if(Vt.isArrayBuffer(r)||Vt.isBuffer(r)||Vt.isStream(r)||Vt.isFile(r)||Vt.isBlob(r))return r;if(Vt.isArrayBufferView(r))return r.buffer;if(Vt.isURLSearchParams(r))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let o;if(x){if(d.indexOf("application/x-www-form-urlencoded")>-1)return v9(r,this.formSerializer).toString();if((o=Vt.isFileList(r))||d.indexOf("multipart/form-data")>-1){const D=this.env&&this.env.FormData;return jy(o?{"files[]":r}:r,D&&new D,this.formSerializer)}}return x||_?(a.setContentType("application/json",!1),T9(r)):r}],transformResponse:[function(r){const a=this.transitional||Vy.transitional,d=a&&a.forcedJSONParsing,_=this.responseType==="json";if(r&&Vt.isString(r)&&(d&&!this.responseType||_)){const E=!(a&&a.silentJSONParsing)&&_;try{return JSON.parse(r)}catch(o){if(E)throw o.name==="SyntaxError"?_r.from(o,_r.ERR_BAD_RESPONSE,this,null,this.response):o}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Iu.classes.FormData,Blob:Iu.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Vt.forEach(["delete","get","head"],function(r){Vy.headers[r]={}});Vt.forEach(["post","put","patch"],function(r){Vy.headers[r]=Vt.merge(w9)});const G3=Vy,E9=Vt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),S9=e=>{const r={};let a,d,_;return e&&e.split(`
`).forEach(function(E){_=E.indexOf(":"),a=E.substring(0,_).trim().toLowerCase(),d=E.substring(_+1).trim(),!(!a||r[a]&&E9[a])&&(a==="set-cookie"?r[a]?r[a].push(d):r[a]=[d]:r[a]=r[a]?r[a]+", "+d:d)}),r},Rw=Symbol("internals");function g1(e){return e&&String(e).trim().toLowerCase()}function ey(e){return e===!1||e==null?e:Vt.isArray(e)?e.map(ey):String(e)}function C9(e){const r=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=a.exec(e);)r[d[1]]=d[2];return r}function M9(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function Ow(e,r,a,d){if(Vt.isFunction(d))return d.call(this,r,a);if(Vt.isString(r)){if(Vt.isString(d))return r.indexOf(d)!==-1;if(Vt.isRegExp(d))return d.test(r)}}function A9(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,a,d)=>a.toUpperCase()+d)}function I9(e,r){const a=Vt.toCamelCase(" "+r);["get","set","has"].forEach(d=>{Object.defineProperty(e,d+a,{value:function(_,x,E){return this[d].call(this,r,_,x,E)},configurable:!0})})}class $y{constructor(r){r&&this.set(r)}set(r,a,d){const _=this;function x(o,D,V){const X=g1(D);if(!X)throw new Error("header name must be a non-empty string");const Z=Vt.findKey(_,X);(!Z||_[Z]===void 0||V===!0||V===void 0&&_[Z]!==!1)&&(_[Z||D]=ey(o))}const E=(o,D)=>Vt.forEach(o,(V,X)=>x(V,X,D));return Vt.isPlainObject(r)||r instanceof this.constructor?E(r,a):Vt.isString(r)&&(r=r.trim())&&!M9(r)?E(S9(r),a):r!=null&&x(a,r,d),this}get(r,a){if(r=g1(r),r){const d=Vt.findKey(this,r);if(d){const _=this[d];if(!a)return _;if(a===!0)return C9(_);if(Vt.isFunction(a))return a.call(this,_,d);if(Vt.isRegExp(a))return a.exec(_);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,a){if(r=g1(r),r){const d=Vt.findKey(this,r);return!!(d&&(!a||Ow(this,this[d],d,a)))}return!1}delete(r,a){const d=this;let _=!1;function x(E){if(E=g1(E),E){const o=Vt.findKey(d,E);o&&(!a||Ow(d,d[o],o,a))&&(delete d[o],_=!0)}}return Vt.isArray(r)?r.forEach(x):x(r),_}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(r){const a=this,d={};return Vt.forEach(this,(_,x)=>{const E=Vt.findKey(d,x);if(E){a[E]=ey(_),delete a[x];return}const o=r?A9(x):String(x).trim();o!==x&&delete a[x],a[o]=ey(_),d[o]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const a=Object.create(null);return Vt.forEach(this,(d,_)=>{d!=null&&d!==!1&&(a[_]=r&&Vt.isArray(d)?d.join(", "):d)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,a])=>r+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...a){const d=new this(r);return a.forEach(_=>d.set(_)),d}static accessor(r){const d=(this[Rw]=this[Rw]={accessors:{}}).accessors,_=this.prototype;function x(E){const o=g1(E);d[o]||(I9(_,E),d[o]=!0)}return Vt.isArray(r)?r.forEach(x):x(r),this}}$y.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);Vt.freezeMethods($y.prototype);Vt.freezeMethods($y);const vd=$y;function Ex(e,r){const a=this||G3,d=r||a,_=vd.from(d.headers);let x=d.data;return Vt.forEach(e,function(o){x=o.call(a,x,_.normalize(),r?r.status:void 0)}),_.normalize(),x}function w8(e){return!!(e&&e.__CANCEL__)}function Q1(e,r,a){_r.call(this,e??"canceled",_r.ERR_CANCELED,r,a),this.name="CanceledError"}Vt.inherits(Q1,_r,{__CANCEL__:!0});const k9=null;function D9(e,r,a){const d=a.config.validateStatus;!a.status||!d||d(a.status)?e(a):r(new _r("Request failed with status code "+a.status,[_r.ERR_BAD_REQUEST,_r.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}const P9=Iu.isStandardBrowserEnv?function(){return{write:function(a,d,_,x,E,o){const D=[];D.push(a+"="+encodeURIComponent(d)),Vt.isNumber(_)&&D.push("expires="+new Date(_).toGMTString()),Vt.isString(x)&&D.push("path="+x),Vt.isString(E)&&D.push("domain="+E),o===!0&&D.push("secure"),document.cookie=D.join("; ")},read:function(a){const d=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return d?decodeURIComponent(d[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function L9(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function R9(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}function T8(e,r){return e&&!L9(r)?R9(e,r):r}const O9=Iu.isStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");let d;function _(x){let E=x;return r&&(a.setAttribute("href",E),E=a.href),a.setAttribute("href",E),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return d=_(window.location.href),function(E){const o=Vt.isString(E)?_(E):E;return o.protocol===d.protocol&&o.host===d.host}}():function(){return function(){return!0}}();function z9(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function B9(e,r){e=e||10;const a=new Array(e),d=new Array(e);let _=0,x=0,E;return r=r!==void 0?r:1e3,function(D){const V=Date.now(),X=d[x];E||(E=V),a[_]=D,d[_]=V;let Z=x,he=0;for(;Z!==_;)he+=a[Z++],Z=Z%e;if(_=(_+1)%e,_===x&&(x=(x+1)%e),V-E<r)return;const Se=X&&V-X;return Se?Math.round(he*1e3/Se):void 0}}function zw(e,r){let a=0;const d=B9(50,250);return _=>{const x=_.loaded,E=_.lengthComputable?_.total:void 0,o=x-a,D=d(o),V=x<=E;a=x;const X={loaded:x,total:E,progress:E?x/E:void 0,bytes:o,rate:D||void 0,estimated:D&&E&&V?(E-x)/D:void 0,event:_};X[r?"download":"upload"]=!0,e(X)}}const F9=typeof XMLHttpRequest<"u",N9=F9&&function(e){return new Promise(function(a,d){let _=e.data;const x=vd.from(e.headers).normalize(),E=e.responseType;let o;function D(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}Vt.isFormData(_)&&(Iu.isStandardBrowserEnv||Iu.isStandardBrowserWebWorkerEnv)&&x.setContentType(!1);let V=new XMLHttpRequest;if(e.auth){const Se=e.auth.username||"",_e=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";x.set("Authorization","Basic "+btoa(Se+":"+_e))}const X=T8(e.baseURL,e.url);V.open(e.method.toUpperCase(),v8(X,e.params,e.paramsSerializer),!0),V.timeout=e.timeout;function Z(){if(!V)return;const Se=vd.from("getAllResponseHeaders"in V&&V.getAllResponseHeaders()),Re={data:!E||E==="text"||E==="json"?V.responseText:V.response,status:V.status,statusText:V.statusText,headers:Se,config:e,request:V};D9(function(ke){a(ke),D()},function(ke){d(ke),D()},Re),V=null}if("onloadend"in V?V.onloadend=Z:V.onreadystatechange=function(){!V||V.readyState!==4||V.status===0&&!(V.responseURL&&V.responseURL.indexOf("file:")===0)||setTimeout(Z)},V.onabort=function(){V&&(d(new _r("Request aborted",_r.ECONNABORTED,e,V)),V=null)},V.onerror=function(){d(new _r("Network Error",_r.ERR_NETWORK,e,V)),V=null},V.ontimeout=function(){let _e=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const Re=e.transitional||x8;e.timeoutErrorMessage&&(_e=e.timeoutErrorMessage),d(new _r(_e,Re.clarifyTimeoutError?_r.ETIMEDOUT:_r.ECONNABORTED,e,V)),V=null},Iu.isStandardBrowserEnv){const Se=(e.withCredentials||O9(X))&&e.xsrfCookieName&&P9.read(e.xsrfCookieName);Se&&x.set(e.xsrfHeaderName,Se)}_===void 0&&x.setContentType(null),"setRequestHeader"in V&&Vt.forEach(x.toJSON(),function(_e,Re){V.setRequestHeader(Re,_e)}),Vt.isUndefined(e.withCredentials)||(V.withCredentials=!!e.withCredentials),E&&E!=="json"&&(V.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&V.addEventListener("progress",zw(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&V.upload&&V.upload.addEventListener("progress",zw(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=Se=>{V&&(d(!Se||Se.type?new Q1(null,e,V):Se),V.abort(),V=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const he=z9(X);if(he&&Iu.protocols.indexOf(he)===-1){d(new _r("Unsupported protocol "+he+":",_r.ERR_BAD_REQUEST,e));return}V.send(_||null)})},ty={http:k9,xhr:N9};Vt.forEach(ty,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const U9={getAdapter:e=>{e=Vt.isArray(e)?e:[e];const{length:r}=e;let a,d;for(let _=0;_<r&&(a=e[_],!(d=Vt.isString(a)?ty[a.toLowerCase()]:a));_++);if(!d)throw d===!1?new _r(`Adapter ${a} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Vt.hasOwnProp(ty,a)?`Adapter '${a}' is not available in the build`:`Unknown adapter '${a}'`);if(!Vt.isFunction(d))throw new TypeError("adapter is not a function");return d},adapters:ty};function Sx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Q1(null,e)}function Bw(e){return Sx(e),e.headers=vd.from(e.headers),e.data=Ex.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),U9.getAdapter(e.adapter||G3.adapter)(e).then(function(d){return Sx(e),d.data=Ex.call(e,e.transformResponse,d),d.headers=vd.from(d.headers),d},function(d){return w8(d)||(Sx(e),d&&d.response&&(d.response.data=Ex.call(e,e.transformResponse,d.response),d.response.headers=vd.from(d.response.headers))),Promise.reject(d)})}const Fw=e=>e instanceof vd?e.toJSON():e;function M0(e,r){r=r||{};const a={};function d(V,X,Z){return Vt.isPlainObject(V)&&Vt.isPlainObject(X)?Vt.merge.call({caseless:Z},V,X):Vt.isPlainObject(X)?Vt.merge({},X):Vt.isArray(X)?X.slice():X}function _(V,X,Z){if(Vt.isUndefined(X)){if(!Vt.isUndefined(V))return d(void 0,V,Z)}else return d(V,X,Z)}function x(V,X){if(!Vt.isUndefined(X))return d(void 0,X)}function E(V,X){if(Vt.isUndefined(X)){if(!Vt.isUndefined(V))return d(void 0,V)}else return d(void 0,X)}function o(V,X,Z){if(Z in r)return d(V,X);if(Z in e)return d(void 0,V)}const D={url:x,method:x,data:x,baseURL:E,transformRequest:E,transformResponse:E,paramsSerializer:E,timeout:E,timeoutMessage:E,withCredentials:E,adapter:E,responseType:E,xsrfCookieName:E,xsrfHeaderName:E,onUploadProgress:E,onDownloadProgress:E,decompress:E,maxContentLength:E,maxBodyLength:E,beforeRedirect:E,transport:E,httpAgent:E,httpsAgent:E,cancelToken:E,socketPath:E,responseEncoding:E,validateStatus:o,headers:(V,X)=>_(Fw(V),Fw(X),!0)};return Vt.forEach(Object.keys(e).concat(Object.keys(r)),function(X){const Z=D[X]||_,he=Z(e[X],r[X],X);Vt.isUndefined(he)&&Z!==o||(a[X]=he)}),a}const E8="1.2.2",q3={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{q3[e]=function(d){return typeof d===e||"a"+(r<1?"n ":" ")+e}});const Nw={};q3.transitional=function(r,a,d){function _(x,E){return"[Axios v"+E8+"] Transitional option '"+x+"'"+E+(d?". "+d:"")}return(x,E,o)=>{if(r===!1)throw new _r(_(E," has been removed"+(a?" in "+a:"")),_r.ERR_DEPRECATED);return a&&!Nw[E]&&(Nw[E]=!0,console.warn(_(E," has been deprecated since v"+a+" and will be removed in the near future"))),r?r(x,E,o):!0}};function j9(e,r,a){if(typeof e!="object")throw new _r("options must be an object",_r.ERR_BAD_OPTION_VALUE);const d=Object.keys(e);let _=d.length;for(;_-- >0;){const x=d[_],E=r[x];if(E){const o=e[x],D=o===void 0||E(o,x,e);if(D!==!0)throw new _r("option "+x+" must be "+D,_r.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new _r("Unknown option "+x,_r.ERR_BAD_OPTION)}}const Kx={assertOptions:j9,validators:q3},fh=Kx.validators;class py{constructor(r){this.defaults=r,this.interceptors={request:new Lw,response:new Lw}}request(r,a){typeof r=="string"?(a=a||{},a.url=r):a=r||{},a=M0(this.defaults,a);const{transitional:d,paramsSerializer:_,headers:x}=a;d!==void 0&&Kx.assertOptions(d,{silentJSONParsing:fh.transitional(fh.boolean),forcedJSONParsing:fh.transitional(fh.boolean),clarifyTimeoutError:fh.transitional(fh.boolean)},!1),_!==void 0&&Kx.assertOptions(_,{encode:fh.function,serialize:fh.function},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let E;E=x&&Vt.merge(x.common,x[a.method]),E&&Vt.forEach(["delete","get","head","post","put","patch","common"],_e=>{delete x[_e]}),a.headers=vd.concat(E,x);const o=[];let D=!0;this.interceptors.request.forEach(function(Re){typeof Re.runWhen=="function"&&Re.runWhen(a)===!1||(D=D&&Re.synchronous,o.unshift(Re.fulfilled,Re.rejected))});const V=[];this.interceptors.response.forEach(function(Re){V.push(Re.fulfilled,Re.rejected)});let X,Z=0,he;if(!D){const _e=[Bw.bind(this),void 0];for(_e.unshift.apply(_e,o),_e.push.apply(_e,V),he=_e.length,X=Promise.resolve(a);Z<he;)X=X.then(_e[Z++],_e[Z++]);return X}he=o.length;let Se=a;for(Z=0;Z<he;){const _e=o[Z++],Re=o[Z++];try{Se=_e(Se)}catch(nt){Re.call(this,nt);break}}try{X=Bw.call(this,Se)}catch(_e){return Promise.reject(_e)}for(Z=0,he=V.length;Z<he;)X=X.then(V[Z++],V[Z++]);return X}getUri(r){r=M0(this.defaults,r);const a=T8(r.baseURL,r.url);return v8(a,r.params,r.paramsSerializer)}}Vt.forEach(["delete","get","head","options"],function(r){py.prototype[r]=function(a,d){return this.request(M0(d||{},{method:r,url:a,data:(d||{}).data}))}});Vt.forEach(["post","put","patch"],function(r){function a(d){return function(x,E,o){return this.request(M0(o||{},{method:r,headers:d?{"Content-Type":"multipart/form-data"}:{},url:x,data:E}))}}py.prototype[r]=a(),py.prototype[r+"Form"]=a(!0)});const iy=py;class W3{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(x){a=x});const d=this;this.promise.then(_=>{if(!d._listeners)return;let x=d._listeners.length;for(;x-- >0;)d._listeners[x](_);d._listeners=null}),this.promise.then=_=>{let x;const E=new Promise(o=>{d.subscribe(o),x=o}).then(_);return E.cancel=function(){d.unsubscribe(x)},E},r(function(x,E,o){d.reason||(d.reason=new Q1(x,E,o),a(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const a=this._listeners.indexOf(r);a!==-1&&this._listeners.splice(a,1)}static source(){let r;return{token:new W3(function(_){r=_}),cancel:r}}}const V9=W3;function $9(e){return function(a){return e.apply(null,a)}}function G9(e){return Vt.isObject(e)&&e.isAxiosError===!0}const Jx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jx).forEach(([e,r])=>{Jx[r]=e});const q9=Jx;function S8(e){const r=new iy(e),a=a8(iy.prototype.request,r);return Vt.extend(a,iy.prototype,r,{allOwnKeys:!0}),Vt.extend(a,r,null,{allOwnKeys:!0}),a.create=function(_){return S8(M0(e,_))},a}const To=S8(G3);To.Axios=iy;To.CanceledError=Q1;To.CancelToken=V9;To.isCancel=w8;To.VERSION=E8;To.toFormData=jy;To.AxiosError=_r;To.Cancel=To.CanceledError;To.all=function(r){return Promise.all(r)};To.spread=$9;To.isAxiosError=G9;To.mergeConfig=M0;To.AxiosHeaders=vd;To.formToJSON=e=>b8(Vt.isHTMLForm(e)?new FormData(e):e);To.HttpStatusCode=q9;To.default=To;const W9=To;window._=kE;window.$=PE;window.axios=W9;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function cl(e,r){const a=Object.create(null),d=e.split(",");for(let _=0;_<d.length;_++)a[d[_]]=!0;return r?_=>!!a[_.toLowerCase()]:_=>!!a[_]}const H9="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",Z9=cl(H9);function e_(e){if(Ii(e)){const r={};for(let a=0;a<e.length;a++){const d=e[a],_=In(d)?C8(d):e_(d);if(_)for(const x in _)r[x]=_[x]}return r}else{if(In(e))return e;if(Nr(e))return e}}const Y9=/;(?![^(]*\))/g,X9=/:([^]+)/,K9=/\/\*.*?\*\//gs;function C8(e){const r={};return e.replace(K9,"").split(Y9).forEach(a=>{if(a){const d=a.split(X9);d.length>1&&(r[d[0].trim()]=d[1].trim())}}),r}function t_(e){let r="";if(In(e))r=e;else if(Ii(e))for(let a=0;a<e.length;a++){const d=t_(e[a]);d&&(r+=d+" ")}else if(Nr(e))for(const a in e)e[a]&&(r+=a+" ");return r.trim()}function J9(e){if(!e)return null;let{class:r,style:a}=e;return r&&!In(r)&&(e.class=t_(r)),a&&(e.style=e_(a)),e}const Q9="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",eS="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",tS="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",iS=cl(Q9),nS=cl(eS),rS=cl(tS),sS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",oS=cl(sS);function M8(e){return!!e||e===""}function aS(e,r){if(e.length!==r.length)return!1;let a=!0;for(let d=0;a&&d<e.length;d++)a=Ch(e[d],r[d]);return a}function Ch(e,r){if(e===r)return!0;let a=Uw(e),d=Uw(r);if(a||d)return a&&d?e.getTime()===r.getTime():!1;if(a=Mh(e),d=Mh(r),a||d)return e===r;if(a=Ii(e),d=Ii(r),a||d)return a&&d?aS(e,r):!1;if(a=Nr(e),d=Nr(r),a||d){if(!a||!d)return!1;const _=Object.keys(e).length,x=Object.keys(r).length;if(_!==x)return!1;for(const E in e){const o=e.hasOwnProperty(E),D=r.hasOwnProperty(E);if(o&&!D||!o&&D||!Ch(e[E],r[E]))return!1}}return String(e)===String(r)}function Gy(e,r){return e.findIndex(a=>Ch(a,r))}const T1=e=>In(e)?e:e==null?"":Ii(e)||Nr(e)&&(e.toString===I8||!xn(e.toString))?JSON.stringify(e,A8,2):String(e),A8=(e,r)=>r&&r.__v_isRef?A8(e,r.value):_0(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((a,[d,_])=>(a[`${d} =>`]=_,a),{})}:tp(r)?{[`Set(${r.size})`]:[...r.values()]}:Nr(r)&&!Ii(r)&&!k8(r)?String(r):r,Rr={},m0=[],Fa=()=>{},ny=()=>!1,lS=/^on[^a-z]/,ep=e=>lS.test(e),H3=e=>e.startsWith("onUpdate:"),Er=Object.assign,Z3=(e,r)=>{const a=e.indexOf(r);a>-1&&e.splice(a,1)},cS=Object.prototype.hasOwnProperty,mr=(e,r)=>cS.call(e,r),Ii=Array.isArray,_0=e=>i_(e)==="[object Map]",tp=e=>i_(e)==="[object Set]",Uw=e=>i_(e)==="[object Date]",xn=e=>typeof e=="function",In=e=>typeof e=="string",Mh=e=>typeof e=="symbol",Nr=e=>e!==null&&typeof e=="object",Y3=e=>Nr(e)&&xn(e.then)&&xn(e.catch),I8=Object.prototype.toString,i_=e=>I8.call(e),uS=e=>i_(e).slice(8,-1),k8=e=>i_(e)==="[object Object]",X3=e=>In(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,jf=cl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dS=cl("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),qy=e=>{const r=Object.create(null);return a=>r[a]||(r[a]=e(a))},hS=/-(\w)/g,ta=qy(e=>e.replace(hS,(r,a)=>a?a.toUpperCase():"")),fS=/\B([A-Z])/g,$l=qy(e=>e.replace(fS,"-$1").toLowerCase()),ip=qy(e=>e.charAt(0).toUpperCase()+e.slice(1)),g0=qy(e=>e?`on${ip(e)}`:""),A0=(e,r)=>!Object.is(e,r),y0=(e,r)=>{for(let a=0;a<e.length;a++)e[a](r)},my=(e,r,a)=>{Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value:a})},Td=e=>{const r=parseFloat(e);return isNaN(r)?e:r};let jw;const pS=()=>jw||(jw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Ul;class K3{constructor(r=!1){this.detached=r,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ul,!r&&Ul&&(this.index=(Ul.scopes||(Ul.scopes=[])).push(this)-1)}run(r){if(this.active){const a=Ul;try{return Ul=this,r()}finally{Ul=a}}}on(){Ul=this}off(){Ul=this.parent}stop(r){if(this.active){let a,d;for(a=0,d=this.effects.length;a<d;a++)this.effects[a].stop();for(a=0,d=this.cleanups.length;a<d;a++)this.cleanups[a]();if(this.scopes)for(a=0,d=this.scopes.length;a<d;a++)this.scopes[a].stop(!0);if(!this.detached&&this.parent&&!r){const _=this.parent.scopes.pop();_&&_!==this&&(this.parent.scopes[this.index]=_,_.index=this.index)}this.parent=void 0,this.active=!1}}}function mS(e){return new K3(e)}function D8(e,r=Ul){r&&r.active&&r.effects.push(e)}function _S(){return Ul}function gS(e){Ul&&Ul.cleanups.push(e)}const J3=e=>{const r=new Set(e);return r.w=0,r.n=0,r},P8=e=>(e.w&Ah)>0,L8=e=>(e.n&Ah)>0,yS=({deps:e})=>{if(e.length)for(let r=0;r<e.length;r++)e[r].w|=Ah},vS=e=>{const{deps:r}=e;if(r.length){let a=0;for(let d=0;d<r.length;d++){const _=r[d];P8(_)&&!L8(_)?_.delete(e):r[a++]=_,_.w&=~Ah,_.n&=~Ah}r.length=a}},Qx=new WeakMap;let E1=0,Ah=1;const e3=30;let Wc;const Vf=Symbol(""),t3=Symbol("");class n_{constructor(r,a=null,d){this.fn=r,this.scheduler=a,this.active=!0,this.deps=[],this.parent=void 0,D8(this,d)}run(){if(!this.active)return this.fn();let r=Wc,a=wh;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=Wc,Wc=this,wh=!0,Ah=1<<++E1,E1<=e3?yS(this):Vw(this),this.fn()}finally{E1<=e3&&vS(this),Ah=1<<--E1,Wc=this.parent,wh=a,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Wc===this?this.deferStop=!0:this.active&&(Vw(this),this.onStop&&this.onStop(),this.active=!1)}}function Vw(e){const{deps:r}=e;if(r.length){for(let a=0;a<r.length;a++)r[a].delete(e);r.length=0}}function xS(e,r){e.effect&&(e=e.effect.fn);const a=new n_(e);r&&(Er(a,r),r.scope&&D8(a,r.scope)),(!r||!r.lazy)&&a.run();const d=a.run.bind(a);return d.effect=a,d}function bS(e){e.effect.stop()}let wh=!0;const R8=[];function F0(){R8.push(wh),wh=!1}function N0(){const e=R8.pop();wh=e===void 0?!0:e}function Wl(e,r,a){if(wh&&Wc){let d=Qx.get(e);d||Qx.set(e,d=new Map);let _=d.get(a);_||d.set(a,_=J3()),O8(_)}}function O8(e,r){let a=!1;E1<=e3?L8(e)||(e.n|=Ah,a=!P8(e)):a=!e.has(Wc),a&&(e.add(Wc),Wc.deps.push(e))}function Ed(e,r,a,d,_,x){const E=Qx.get(e);if(!E)return;let o=[];if(r==="clear")o=[...E.values()];else if(a==="length"&&Ii(e)){const D=Td(d);E.forEach((V,X)=>{(X==="length"||X>=D)&&o.push(V)})}else switch(a!==void 0&&o.push(E.get(a)),r){case"add":Ii(e)?X3(a)&&o.push(E.get("length")):(o.push(E.get(Vf)),_0(e)&&o.push(E.get(t3)));break;case"delete":Ii(e)||(o.push(E.get(Vf)),_0(e)&&o.push(E.get(t3)));break;case"set":_0(e)&&o.push(E.get(Vf));break}if(o.length===1)o[0]&&i3(o[0]);else{const D=[];for(const V of o)V&&D.push(...V);i3(J3(D))}}function i3(e,r){const a=Ii(e)?e:[...e];for(const d of a)d.computed&&$w(d);for(const d of a)d.computed||$w(d)}function $w(e,r){(e!==Wc||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const wS=cl("__proto__,__v_isRef,__isVue"),z8=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mh)),TS=Wy(),ES=Wy(!1,!0),SS=Wy(!0),CS=Wy(!0,!0),Gw=MS();function MS(){const e={};return["includes","indexOf","lastIndexOf"].forEach(r=>{e[r]=function(...a){const d=gr(this);for(let x=0,E=this.length;x<E;x++)Wl(d,"get",x+"");const _=d[r](...a);return _===-1||_===!1?d[r](...a.map(gr)):_}}),["push","pop","shift","unshift","splice"].forEach(r=>{e[r]=function(...a){F0();const d=gr(this)[r].apply(this,a);return N0(),d}}),e}function Wy(e=!1,r=!1){return function(d,_,x){if(_==="__v_isReactive")return!e;if(_==="__v_isReadonly")return e;if(_==="__v_isShallow")return r;if(_==="__v_raw"&&x===(e?r?$8:V8:r?j8:U8).get(d))return d;const E=Ii(d);if(!e&&E&&mr(Gw,_))return Reflect.get(Gw,_,x);const o=Reflect.get(d,_,x);return(Mh(_)?z8.has(_):wS(_))||(e||Wl(d,"get",_),r)?o:No(o)?E&&X3(_)?o:o.value:Nr(o)?e?eb(o):Yy(o):o}}const AS=B8(),IS=B8(!0);function B8(e=!1){return function(a,d,_,x){let E=a[d];if(Yf(E)&&No(E)&&!No(_))return!1;if(!e&&(!O1(_)&&!Yf(_)&&(E=gr(E),_=gr(_)),!Ii(a)&&No(E)&&!No(_)))return E.value=_,!0;const o=Ii(a)&&X3(d)?Number(d)<a.length:mr(a,d),D=Reflect.set(a,d,_,x);return a===gr(x)&&(o?A0(_,E)&&Ed(a,"set",d,_):Ed(a,"add",d,_)),D}}function kS(e,r){const a=mr(e,r);e[r];const d=Reflect.deleteProperty(e,r);return d&&a&&Ed(e,"delete",r,void 0),d}function DS(e,r){const a=Reflect.has(e,r);return(!Mh(r)||!z8.has(r))&&Wl(e,"has",r),a}function PS(e){return Wl(e,"iterate",Ii(e)?"length":Vf),Reflect.ownKeys(e)}const F8={get:TS,set:AS,deleteProperty:kS,has:DS,ownKeys:PS},N8={get:SS,set(e,r){return!0},deleteProperty(e,r){return!0}},LS=Er({},F8,{get:ES,set:IS}),RS=Er({},N8,{get:CS}),Q3=e=>e,Hy=e=>Reflect.getPrototypeOf(e);function zg(e,r,a=!1,d=!1){e=e.__v_raw;const _=gr(e),x=gr(r);a||(r!==x&&Wl(_,"get",r),Wl(_,"get",x));const{has:E}=Hy(_),o=d?Q3:a?nb:z1;if(E.call(_,r))return o(e.get(r));if(E.call(_,x))return o(e.get(x));e!==_&&e.get(r)}function Bg(e,r=!1){const a=this.__v_raw,d=gr(a),_=gr(e);return r||(e!==_&&Wl(d,"has",e),Wl(d,"has",_)),e===_?a.has(e):a.has(e)||a.has(_)}function Fg(e,r=!1){return e=e.__v_raw,!r&&Wl(gr(e),"iterate",Vf),Reflect.get(e,"size",e)}function qw(e){e=gr(e);const r=gr(this);return Hy(r).has.call(r,e)||(r.add(e),Ed(r,"add",e,e)),this}function Ww(e,r){r=gr(r);const a=gr(this),{has:d,get:_}=Hy(a);let x=d.call(a,e);x||(e=gr(e),x=d.call(a,e));const E=_.call(a,e);return a.set(e,r),x?A0(r,E)&&Ed(a,"set",e,r):Ed(a,"add",e,r),this}function Hw(e){const r=gr(this),{has:a,get:d}=Hy(r);let _=a.call(r,e);_||(e=gr(e),_=a.call(r,e)),d&&d.call(r,e);const x=r.delete(e);return _&&Ed(r,"delete",e,void 0),x}function Zw(){const e=gr(this),r=e.size!==0,a=e.clear();return r&&Ed(e,"clear",void 0,void 0),a}function Ng(e,r){return function(d,_){const x=this,E=x.__v_raw,o=gr(E),D=r?Q3:e?nb:z1;return!e&&Wl(o,"iterate",Vf),E.forEach((V,X)=>d.call(_,D(V),D(X),x))}}function Ug(e,r,a){return function(...d){const _=this.__v_raw,x=gr(_),E=_0(x),o=e==="entries"||e===Symbol.iterator&&E,D=e==="keys"&&E,V=_[e](...d),X=a?Q3:r?nb:z1;return!r&&Wl(x,"iterate",D?t3:Vf),{next(){const{value:Z,done:he}=V.next();return he?{value:Z,done:he}:{value:o?[X(Z[0]),X(Z[1])]:X(Z),done:he}},[Symbol.iterator](){return this}}}}function ph(e){return function(...r){return e==="delete"?!1:this}}function OS(){const e={get(x){return zg(this,x)},get size(){return Fg(this)},has:Bg,add:qw,set:Ww,delete:Hw,clear:Zw,forEach:Ng(!1,!1)},r={get(x){return zg(this,x,!1,!0)},get size(){return Fg(this)},has:Bg,add:qw,set:Ww,delete:Hw,clear:Zw,forEach:Ng(!1,!0)},a={get(x){return zg(this,x,!0)},get size(){return Fg(this,!0)},has(x){return Bg.call(this,x,!0)},add:ph("add"),set:ph("set"),delete:ph("delete"),clear:ph("clear"),forEach:Ng(!0,!1)},d={get(x){return zg(this,x,!0,!0)},get size(){return Fg(this,!0)},has(x){return Bg.call(this,x,!0)},add:ph("add"),set:ph("set"),delete:ph("delete"),clear:ph("clear"),forEach:Ng(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(x=>{e[x]=Ug(x,!1,!1),a[x]=Ug(x,!0,!1),r[x]=Ug(x,!1,!0),d[x]=Ug(x,!0,!0)}),[e,a,r,d]}const[zS,BS,FS,NS]=OS();function Zy(e,r){const a=r?e?NS:FS:e?BS:zS;return(d,_,x)=>_==="__v_isReactive"?!e:_==="__v_isReadonly"?e:_==="__v_raw"?d:Reflect.get(mr(a,_)&&_ in d?a:d,_,x)}const US={get:Zy(!1,!1)},jS={get:Zy(!1,!0)},VS={get:Zy(!0,!1)},$S={get:Zy(!0,!0)},U8=new WeakMap,j8=new WeakMap,V8=new WeakMap,$8=new WeakMap;function GS(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qS(e){return e.__v_skip||!Object.isExtensible(e)?0:GS(uS(e))}function Yy(e){return Yf(e)?e:Xy(e,!1,F8,US,U8)}function G8(e){return Xy(e,!1,LS,jS,j8)}function eb(e){return Xy(e,!0,N8,VS,V8)}function WS(e){return Xy(e,!0,RS,$S,$8)}function Xy(e,r,a,d,_){if(!Nr(e)||e.__v_raw&&!(r&&e.__v_isReactive))return e;const x=_.get(e);if(x)return x;const E=qS(e);if(E===0)return e;const o=new Proxy(e,E===2?d:a);return _.set(e,o),o}function $f(e){return Yf(e)?$f(e.__v_raw):!!(e&&e.__v_isReactive)}function Yf(e){return!!(e&&e.__v_isReadonly)}function O1(e){return!!(e&&e.__v_isShallow)}function tb(e){return $f(e)||Yf(e)}function gr(e){const r=e&&e.__v_raw;return r?gr(r):e}function ib(e){return my(e,"__v_skip",!0),e}const z1=e=>Nr(e)?Yy(e):e,nb=e=>Nr(e)?eb(e):e;function rb(e){wh&&Wc&&(e=gr(e),O8(e.dep||(e.dep=J3())))}function Ky(e,r){e=gr(e),e.dep&&i3(e.dep)}function No(e){return!!(e&&e.__v_isRef===!0)}function Th(e){return q8(e,!1)}function HS(e){return q8(e,!0)}function q8(e,r){return No(e)?e:new ZS(e,r)}class ZS{constructor(r,a){this.__v_isShallow=a,this.dep=void 0,this.__v_isRef=!0,this._rawValue=a?r:gr(r),this._value=a?r:z1(r)}get value(){return rb(this),this._value}set value(r){const a=this.__v_isShallow||O1(r)||Yf(r);r=a?r:gr(r),A0(r,this._rawValue)&&(this._rawValue=r,this._value=a?r:z1(r),Ky(this))}}function YS(e){Ky(e)}function vo(e){return No(e)?e.value:e}const XS={get:(e,r,a)=>vo(Reflect.get(e,r,a)),set:(e,r,a,d)=>{const _=e[r];return No(_)&&!No(a)?(_.value=a,!0):Reflect.set(e,r,a,d)}};function sb(e){return $f(e)?e:new Proxy(e,XS)}class KS{constructor(r){this.dep=void 0,this.__v_isRef=!0;const{get:a,set:d}=r(()=>rb(this),()=>Ky(this));this._get=a,this._set=d}get value(){return this._get()}set value(r){this._set(r)}}function JS(e){return new KS(e)}function QS(e){const r=Ii(e)?new Array(e.length):{};for(const a in e)r[a]=W8(e,a);return r}class e7{constructor(r,a,d){this._object=r,this._key=a,this._defaultValue=d,this.__v_isRef=!0}get value(){const r=this._object[this._key];return r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}}function W8(e,r,a){const d=e[r];return No(d)?d:new e7(e,r,a)}var H8;class t7{constructor(r,a,d,_){this._setter=a,this.dep=void 0,this.__v_isRef=!0,this[H8]=!1,this._dirty=!0,this.effect=new n_(r,()=>{this._dirty||(this._dirty=!0,Ky(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!_,this.__v_isReadonly=d}get value(){const r=gr(this);return rb(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}H8="__v_isReadonly";function i7(e,r,a=!1){let d,_;const x=xn(e);return x?(d=e,_=Fa):(d=e.get,_=e.set),new t7(d,_,x||!_,a)}function n7(e,...r){}function xd(e,r,a,d){let _;try{_=d?e(...d):e()}catch(x){np(x,r,a)}return _}function Gl(e,r,a,d){if(xn(e)){const x=xd(e,r,a,d);return x&&Y3(x)&&x.catch(E=>{np(E,r,a)}),x}const _=[];for(let x=0;x<e.length;x++)_.push(Gl(e[x],r,a,d));return _}function np(e,r,a,d=!0){const _=r?r.vnode:null;if(r){let x=r.parent;const E=r.proxy,o=a;for(;x;){const V=x.ec;if(V){for(let X=0;X<V.length;X++)if(V[X](e,E,o)===!1)return}x=x.parent}const D=r.appContext.config.errorHandler;if(D){xd(D,null,10,[e,E,o]);return}}r7(e,a,_,d)}function r7(e,r,a,d=!0){console.error(e)}let B1=!1,n3=!1;const _a=[];let Cu=0;const v0=[];let pd=null,Of=0;const Z8=Promise.resolve();let ob=null;function Jy(e){const r=ob||Z8;return e?r.then(this?e.bind(this):e):r}function s7(e){let r=Cu+1,a=_a.length;for(;r<a;){const d=r+a>>>1;F1(_a[d])<e?r=d+1:a=d}return r}function Qy(e){(!_a.length||!_a.includes(e,B1&&e.allowRecurse?Cu+1:Cu))&&(e.id==null?_a.push(e):_a.splice(s7(e.id),0,e),Y8())}function Y8(){!B1&&!n3&&(n3=!0,ob=Z8.then(X8))}function o7(e){const r=_a.indexOf(e);r>Cu&&_a.splice(r,1)}function ab(e){Ii(e)?v0.push(...e):(!pd||!pd.includes(e,e.allowRecurse?Of+1:Of))&&v0.push(e),Y8()}function Yw(e,r=B1?Cu+1:0){for(;r<_a.length;r++){const a=_a[r];a&&a.pre&&(_a.splice(r,1),r--,a())}}function _y(e){if(v0.length){const r=[...new Set(v0)];if(v0.length=0,pd){pd.push(...r);return}for(pd=r,pd.sort((a,d)=>F1(a)-F1(d)),Of=0;Of<pd.length;Of++)pd[Of]();pd=null,Of=0}}const F1=e=>e.id==null?1/0:e.id,a7=(e,r)=>{const a=F1(e)-F1(r);if(a===0){if(e.pre&&!r.pre)return-1;if(r.pre&&!e.pre)return 1}return a};function X8(e){n3=!1,B1=!0,_a.sort(a7);const r=Fa;try{for(Cu=0;Cu<_a.length;Cu++){const a=_a[Cu];a&&a.active!==!1&&xd(a,null,14)}}finally{Cu=0,_a.length=0,_y(),B1=!1,ob=null,(_a.length||v0.length)&&X8()}}let d0,jg=[];function K8(e,r){var a,d;d0=e,d0?(d0.enabled=!0,jg.forEach(({event:_,args:x})=>d0.emit(_,...x)),jg=[]):typeof window<"u"&&window.HTMLElement&&!(!((d=(a=window.navigator)===null||a===void 0?void 0:a.userAgent)===null||d===void 0)&&d.includes("jsdom"))?((r.__VUE_DEVTOOLS_HOOK_REPLAY__=r.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(x=>{K8(x,r)}),setTimeout(()=>{d0||(r.__VUE_DEVTOOLS_HOOK_REPLAY__=null,jg=[])},3e3)):jg=[]}function l7(e,r,...a){if(e.isUnmounted)return;const d=e.vnode.props||Rr;let _=a;const x=r.startsWith("update:"),E=x&&r.slice(7);if(E&&E in d){const X=`${E==="modelValue"?"model":E}Modifiers`,{number:Z,trim:he}=d[X]||Rr;he&&(_=a.map(Se=>In(Se)?Se.trim():Se)),Z&&(_=a.map(Td))}let o,D=d[o=g0(r)]||d[o=g0(ta(r))];!D&&x&&(D=d[o=g0($l(r))]),D&&Gl(D,e,6,_);const V=d[o+"Once"];if(V){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Gl(V,e,6,_)}}function J8(e,r,a=!1){const d=r.emitsCache,_=d.get(e);if(_!==void 0)return _;const x=e.emits;let E={},o=!1;if(!xn(e)){const D=V=>{const X=J8(V,r,!0);X&&(o=!0,Er(E,X))};!a&&r.mixins.length&&r.mixins.forEach(D),e.extends&&D(e.extends),e.mixins&&e.mixins.forEach(D)}return!x&&!o?(Nr(e)&&d.set(e,null),null):(Ii(x)?x.forEach(D=>E[D]=null):Er(E,x),Nr(e)&&d.set(e,E),E)}function e2(e,r){return!e||!ep(r)?!1:(r=r.slice(2).replace(/Once$/,""),mr(e,r[0].toLowerCase()+r.slice(1))||mr(e,$l(r))||mr(e,r))}let Qo=null,t2=null;function N1(e){const r=Qo;return Qo=e,t2=e&&e.type.__scopeId||null,r}function lb(e){t2=e}function cb(){t2=null}const c7=e=>r_;function r_(e,r=Qo,a){if(!r||e._n)return e;const d=(..._)=>{d._d&&d3(-1);const x=N1(r);let E;try{E=e(..._)}finally{N1(x),d._d&&d3(1)}return E};return d._n=!0,d._c=!0,d._d=!0,d}function ry(e){const{type:r,vnode:a,proxy:d,withProxy:_,props:x,propsOptions:[E],slots:o,attrs:D,emit:V,render:X,renderCache:Z,data:he,setupState:Se,ctx:_e,inheritAttrs:Re}=e;let nt,ke;const Le=N1(e);try{if(a.shapeFlag&4){const Et=_||d;nt=jl(X.call(Et,Et,Z,x,Se,he,_e)),ke=D}else{const Et=r;nt=jl(Et.length>1?Et(x,{attrs:D,slots:o,emit:V}):Et(x,null)),ke=r.props?D:d7(D)}}catch(Et){A1.length=0,np(Et,e,1),nt=Tr(ya)}let $e=nt;if(ke&&Re!==!1){const Et=Object.keys(ke),{shapeFlag:Fe}=$e;Et.length&&Fe&7&&(E&&Et.some(H3)&&(ke=h7(ke,E)),$e=Du($e,ke))}return a.dirs&&($e=Du($e),$e.dirs=$e.dirs?$e.dirs.concat(a.dirs):a.dirs),a.transition&&($e.transition=a.transition),nt=$e,N1(Le),nt}function u7(e){let r;for(let a=0;a<e.length;a++){const d=e[a];if(Ih(d)){if(d.type!==ya||d.children==="v-if"){if(r)return;r=d}}else return}return r}const d7=e=>{let r;for(const a in e)(a==="class"||a==="style"||ep(a))&&((r||(r={}))[a]=e[a]);return r},h7=(e,r)=>{const a={};for(const d in e)(!H3(d)||!(d.slice(9)in r))&&(a[d]=e[d]);return a};function f7(e,r,a){const{props:d,children:_,component:x}=e,{props:E,children:o,patchFlag:D}=r,V=x.emitsOptions;if(r.dirs||r.transition)return!0;if(a&&D>=0){if(D&1024)return!0;if(D&16)return d?Xw(d,E,V):!!E;if(D&8){const X=r.dynamicProps;for(let Z=0;Z<X.length;Z++){const he=X[Z];if(E[he]!==d[he]&&!e2(V,he))return!0}}}else return(_||o)&&(!o||!o.$stable)?!0:d===E?!1:d?E?Xw(d,E,V):!0:!!E;return!1}function Xw(e,r,a){const d=Object.keys(r);if(d.length!==Object.keys(e).length)return!0;for(let _=0;_<d.length;_++){const x=d[_];if(r[x]!==e[x]&&!e2(a,x))return!0}return!1}function ub({vnode:e,parent:r},a){for(;r&&r.subTree===e;)(e=r.vnode).el=a,r=r.parent}const Q8=e=>e.__isSuspense,p7={name:"Suspense",__isSuspense:!0,process(e,r,a,d,_,x,E,o,D,V){e==null?_7(r,a,d,_,x,E,o,D,V):g7(e,r,a,d,_,E,o,D,V)},hydrate:y7,create:db,normalize:v7},m7=p7;function U1(e,r){const a=e.props&&e.props[r];xn(a)&&a()}function _7(e,r,a,d,_,x,E,o,D){const{p:V,o:{createElement:X}}=D,Z=X("div"),he=e.suspense=db(e,_,d,r,Z,a,x,E,o,D);V(null,he.pendingBranch=e.ssContent,Z,null,d,he,x,E),he.deps>0?(U1(e,"onPending"),U1(e,"onFallback"),V(null,e.ssFallback,r,a,d,null,x,E),x0(he,e.ssFallback)):he.resolve()}function g7(e,r,a,d,_,x,E,o,{p:D,um:V,o:{createElement:X}}){const Z=r.suspense=e.suspense;Z.vnode=r,r.el=e.el;const he=r.ssContent,Se=r.ssFallback,{activeBranch:_e,pendingBranch:Re,isInFallback:nt,isHydrating:ke}=Z;if(Re)Z.pendingBranch=he,Mu(he,Re)?(D(Re,he,Z.hiddenContainer,null,_,Z,x,E,o),Z.deps<=0?Z.resolve():nt&&(D(_e,Se,a,d,_,null,x,E,o),x0(Z,Se))):(Z.pendingId++,ke?(Z.isHydrating=!1,Z.activeBranch=Re):V(Re,_,Z),Z.deps=0,Z.effects.length=0,Z.hiddenContainer=X("div"),nt?(D(null,he,Z.hiddenContainer,null,_,Z,x,E,o),Z.deps<=0?Z.resolve():(D(_e,Se,a,d,_,null,x,E,o),x0(Z,Se))):_e&&Mu(he,_e)?(D(_e,he,a,d,_,Z,x,E,o),Z.resolve(!0)):(D(null,he,Z.hiddenContainer,null,_,Z,x,E,o),Z.deps<=0&&Z.resolve()));else if(_e&&Mu(he,_e))D(_e,he,a,d,_,Z,x,E,o),x0(Z,he);else if(U1(r,"onPending"),Z.pendingBranch=he,Z.pendingId++,D(null,he,Z.hiddenContainer,null,_,Z,x,E,o),Z.deps<=0)Z.resolve();else{const{timeout:Le,pendingId:$e}=Z;Le>0?setTimeout(()=>{Z.pendingId===$e&&Z.fallback(Se)},Le):Le===0&&Z.fallback(Se)}}function db(e,r,a,d,_,x,E,o,D,V,X=!1){const{p:Z,m:he,um:Se,n:_e,o:{parentNode:Re,remove:nt}}=V,ke=Td(e.props&&e.props.timeout),Le={vnode:e,parent:r,parentComponent:a,isSVG:E,container:d,hiddenContainer:_,anchor:x,deps:0,pendingId:0,timeout:typeof ke=="number"?ke:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:X,isUnmounted:!1,effects:[],resolve($e=!1){const{vnode:Et,activeBranch:Fe,pendingBranch:z,pendingId:Lt,effects:ot,parentComponent:bt,container:Ht}=Le;if(Le.isHydrating)Le.isHydrating=!1;else if(!$e){const hi=Fe&&z.transition&&z.transition.mode==="out-in";hi&&(Fe.transition.afterLeave=()=>{Lt===Le.pendingId&&he(z,Ht,ri,0)});let{anchor:ri}=Le;Fe&&(ri=_e(Fe),Se(Fe,bt,Le,!0)),hi||he(z,Ht,ri,0)}x0(Le,z),Le.pendingBranch=null,Le.isInFallback=!1;let Yt=Le.parent,Wt=!1;for(;Yt;){if(Yt.pendingBranch){Yt.effects.push(...ot),Wt=!0;break}Yt=Yt.parent}Wt||ab(ot),Le.effects=[],U1(Et,"onResolve")},fallback($e){if(!Le.pendingBranch)return;const{vnode:Et,activeBranch:Fe,parentComponent:z,container:Lt,isSVG:ot}=Le;U1(Et,"onFallback");const bt=_e(Fe),Ht=()=>{Le.isInFallback&&(Z(null,$e,Lt,bt,z,null,ot,o,D),x0(Le,$e))},Yt=$e.transition&&$e.transition.mode==="out-in";Yt&&(Fe.transition.afterLeave=Ht),Le.isInFallback=!0,Se(Fe,z,null,!0),Yt||Ht()},move($e,Et,Fe){Le.activeBranch&&he(Le.activeBranch,$e,Et,Fe),Le.container=$e},next(){return Le.activeBranch&&_e(Le.activeBranch)},registerDep($e,Et){const Fe=!!Le.pendingBranch;Fe&&Le.deps++;const z=$e.vnode.el;$e.asyncDep.catch(Lt=>{np(Lt,$e,0)}).then(Lt=>{if($e.isUnmounted||Le.isUnmounted||Le.pendingId!==$e.suspenseId)return;$e.asyncResolved=!0;const{vnode:ot}=$e;h3($e,Lt,!1),z&&(ot.el=z);const bt=!z&&$e.subTree.el;Et($e,ot,Re(z||$e.subTree.el),z?null:_e($e.subTree),Le,E,D),bt&&nt(bt),ub($e,ot.el),Fe&&--Le.deps===0&&Le.resolve()})},unmount($e,Et){Le.isUnmounted=!0,Le.activeBranch&&Se(Le.activeBranch,a,$e,Et),Le.pendingBranch&&Se(Le.pendingBranch,a,$e,Et)}};return Le}function y7(e,r,a,d,_,x,E,o,D){const V=r.suspense=db(r,d,a,e.parentNode,document.createElement("div"),null,_,x,E,o,!0),X=D(e,V.pendingBranch=r.ssContent,a,V,x,E);return V.deps===0&&V.resolve(),X}function v7(e){const{shapeFlag:r,children:a}=e,d=r&32;e.ssContent=Kw(d?a.default:a),e.ssFallback=d?Kw(a.fallback):Tr(ya)}function Kw(e){let r;if(xn(e)){const a=Jf&&e._c;a&&(e._d=!1,so()),e=e(),a&&(e._d=!0,r=al,M4())}return Ii(e)&&(e=u7(e)),e=jl(e),r&&!e.dynamicChildren&&(e.dynamicChildren=r.filter(a=>a!==e)),e}function e4(e,r){r&&r.pendingBranch?Ii(e)?r.effects.push(...e):r.effects.push(e):ab(e)}function x0(e,r){e.activeBranch=r;const{vnode:a,parentComponent:d}=e,_=a.el=r.el;d&&d.subTree===a&&(d.vnode.el=_,ub(d,_))}function hb(e,r){if(xo){let a=xo.provides;const d=xo.parent&&xo.parent.provides;d===a&&(a=xo.provides=Object.create(d)),a[e]=r}}function b0(e,r,a=!1){const d=xo||Qo;if(d){const _=d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides;if(_&&e in _)return _[e];if(arguments.length>1)return a&&xn(r)?r.call(d.proxy):r}}function x7(e,r){return s_(e,null,r)}function t4(e,r){return s_(e,null,{flush:"post"})}function b7(e,r){return s_(e,null,{flush:"sync"})}const Vg={};function ku(e,r,a){return s_(e,r,a)}function s_(e,r,{immediate:a,deep:d,flush:_,onTrack:x,onTrigger:E}=Rr){const o=xo;let D,V=!1,X=!1;if(No(e)?(D=()=>e.value,V=O1(e)):$f(e)?(D=()=>e,d=!0):Ii(e)?(X=!0,V=e.some($e=>$f($e)||O1($e)),D=()=>e.map($e=>{if(No($e))return $e.value;if($f($e))return Bf($e);if(xn($e))return xd($e,o,2)})):xn(e)?r?D=()=>xd(e,o,2):D=()=>{if(!(o&&o.isUnmounted))return Z&&Z(),Gl(e,o,3,[he])}:D=Fa,r&&d){const $e=D;D=()=>Bf($e())}let Z,he=$e=>{Z=ke.onStop=()=>{xd($e,o,4)}},Se;if(k0)if(he=Fa,r?a&&Gl(r,o,3,[D(),X?[]:void 0,he]):D(),_==="sync"){const $e=j4();Se=$e.__watcherHandles||($e.__watcherHandles=[])}else return Fa;let _e=X?new Array(e.length).fill(Vg):Vg;const Re=()=>{if(ke.active)if(r){const $e=ke.run();(d||V||(X?$e.some((Et,Fe)=>A0(Et,_e[Fe])):A0($e,_e)))&&(Z&&Z(),Gl(r,o,3,[$e,_e===Vg?void 0:X&&_e[0]===Vg?[]:_e,he]),_e=$e)}else ke.run()};Re.allowRecurse=!!r;let nt;_==="sync"?nt=Re:_==="post"?nt=()=>Ko(Re,o&&o.suspense):(Re.pre=!0,o&&(Re.id=o.uid),nt=()=>Qy(Re));const ke=new n_(D,nt);r?a?Re():_e=ke.run():_==="post"?Ko(ke.run.bind(ke),o&&o.suspense):ke.run();const Le=()=>{ke.stop(),o&&o.scope&&Z3(o.scope.effects,ke)};return Se&&Se.push(Le),Le}function w7(e,r,a){const d=this.proxy,_=In(e)?e.includes(".")?i4(d,e):()=>d[e]:e.bind(d,d);let x;xn(r)?x=r:(x=r.handler,a=r);const E=xo;kh(this);const o=s_(_,x.bind(d),a);return E?kh(E):Eh(),o}function i4(e,r){const a=r.split(".");return()=>{let d=e;for(let _=0;_<a.length&&d;_++)d=d[a[_]];return d}}function Bf(e,r){if(!Nr(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),No(e))Bf(e.value,r);else if(Ii(e))for(let a=0;a<e.length;a++)Bf(e[a],r);else if(tp(e)||_0(e))e.forEach(a=>{Bf(a,r)});else if(k8(e))for(const a in e)Bf(e[a],r);return e}function fb(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return rp(()=>{e.isMounted=!0}),s2(()=>{e.isUnmounting=!0}),e}const vc=[Function,Array],T7={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:vc,onEnter:vc,onAfterEnter:vc,onEnterCancelled:vc,onBeforeLeave:vc,onLeave:vc,onAfterLeave:vc,onLeaveCancelled:vc,onBeforeAppear:vc,onAppear:vc,onAfterAppear:vc,onAppearCancelled:vc},setup(e,{slots:r}){const a=Rh(),d=fb();let _;return()=>{const x=r.default&&i2(r.default(),!0);if(!x||!x.length)return;let E=x[0];if(x.length>1){for(const Re of x)if(Re.type!==ya){E=Re;break}}const o=gr(e),{mode:D}=o;if(d.isLeaving)return Cx(E);const V=Jw(E);if(!V)return Cx(E);const X=I0(V,o,d,a);Xf(V,X);const Z=a.subTree,he=Z&&Jw(Z);let Se=!1;const{getTransitionKey:_e}=V.type;if(_e){const Re=_e();_===void 0?_=Re:Re!==_&&(_=Re,Se=!0)}if(he&&he.type!==ya&&(!Mu(V,he)||Se)){const Re=I0(he,o,d,a);if(Xf(he,Re),D==="out-in")return d.isLeaving=!0,Re.afterLeave=()=>{d.isLeaving=!1,a.update.active!==!1&&a.update()},Cx(E);D==="in-out"&&V.type!==ya&&(Re.delayLeave=(nt,ke,Le)=>{const $e=n4(d,he);$e[String(he.key)]=he,nt._leaveCb=()=>{ke(),nt._leaveCb=void 0,delete X.delayedLeave},X.delayedLeave=Le})}return E}}},pb=T7;function n4(e,r){const{leavingVNodes:a}=e;let d=a.get(r.type);return d||(d=Object.create(null),a.set(r.type,d)),d}function I0(e,r,a,d){const{appear:_,mode:x,persisted:E=!1,onBeforeEnter:o,onEnter:D,onAfterEnter:V,onEnterCancelled:X,onBeforeLeave:Z,onLeave:he,onAfterLeave:Se,onLeaveCancelled:_e,onBeforeAppear:Re,onAppear:nt,onAfterAppear:ke,onAppearCancelled:Le}=r,$e=String(e.key),Et=n4(a,e),Fe=(ot,bt)=>{ot&&Gl(ot,d,9,bt)},z=(ot,bt)=>{const Ht=bt[1];Fe(ot,bt),Ii(ot)?ot.every(Yt=>Yt.length<=1)&&Ht():ot.length<=1&&Ht()},Lt={mode:x,persisted:E,beforeEnter(ot){let bt=o;if(!a.isMounted)if(_)bt=Re||o;else return;ot._leaveCb&&ot._leaveCb(!0);const Ht=Et[$e];Ht&&Mu(e,Ht)&&Ht.el._leaveCb&&Ht.el._leaveCb(),Fe(bt,[ot])},enter(ot){let bt=D,Ht=V,Yt=X;if(!a.isMounted)if(_)bt=nt||D,Ht=ke||V,Yt=Le||X;else return;let Wt=!1;const hi=ot._enterCb=ri=>{Wt||(Wt=!0,ri?Fe(Yt,[ot]):Fe(Ht,[ot]),Lt.delayedLeave&&Lt.delayedLeave(),ot._enterCb=void 0)};bt?z(bt,[ot,hi]):hi()},leave(ot,bt){const Ht=String(e.key);if(ot._enterCb&&ot._enterCb(!0),a.isUnmounting)return bt();Fe(Z,[ot]);let Yt=!1;const Wt=ot._leaveCb=hi=>{Yt||(Yt=!0,bt(),hi?Fe(_e,[ot]):Fe(Se,[ot]),ot._leaveCb=void 0,Et[Ht]===e&&delete Et[Ht])};Et[Ht]=e,he?z(he,[ot,Wt]):Wt()},clone(ot){return I0(ot,r,a,d)}};return Lt}function Cx(e){if(o_(e))return e=Du(e),e.children=null,e}function Jw(e){return o_(e)?e.children?e.children[0]:void 0:e}function Xf(e,r){e.shapeFlag&6&&e.component?Xf(e.component.subTree,r):e.shapeFlag&128?(e.ssContent.transition=r.clone(e.ssContent),e.ssFallback.transition=r.clone(e.ssFallback)):e.transition=r}function i2(e,r=!1,a){let d=[],_=0;for(let x=0;x<e.length;x++){let E=e[x];const o=a==null?E.key:String(a)+String(E.key!=null?E.key:x);E.type===Hs?(E.patchFlag&128&&_++,d=d.concat(i2(E.children,r,o))):(r||E.type!==ya)&&d.push(o!=null?Du(E,{key:o}):E)}if(_>1)for(let x=0;x<d.length;x++)d[x].patchFlag=-2;return d}function mb(e){return xn(e)?{setup:e,name:e.name}:e}const Gf=e=>!!e.type.__asyncLoader;function E7(e){xn(e)&&(e={loader:e});const{loader:r,loadingComponent:a,errorComponent:d,delay:_=200,timeout:x,suspensible:E=!0,onError:o}=e;let D=null,V,X=0;const Z=()=>(X++,D=null,he()),he=()=>{let Se;return D||(Se=D=r().catch(_e=>{if(_e=_e instanceof Error?_e:new Error(String(_e)),o)return new Promise((Re,nt)=>{o(_e,()=>Re(Z()),()=>nt(_e),X+1)});throw _e}).then(_e=>Se!==D&&D?D:(_e&&(_e.__esModule||_e[Symbol.toStringTag]==="Module")&&(_e=_e.default),V=_e,_e)))};return mb({name:"AsyncComponentWrapper",__asyncLoader:he,get __asyncResolved(){return V},setup(){const Se=xo;if(V)return()=>Mx(V,Se);const _e=Le=>{D=null,np(Le,Se,13,!d)};if(E&&Se.suspense||k0)return he().then(Le=>()=>Mx(Le,Se)).catch(Le=>(_e(Le),()=>d?Tr(d,{error:Le}):null));const Re=Th(!1),nt=Th(),ke=Th(!!_);return _&&setTimeout(()=>{ke.value=!1},_),x!=null&&setTimeout(()=>{if(!Re.value&&!nt.value){const Le=new Error(`Async component timed out after ${x}ms.`);_e(Le),nt.value=Le}},x),he().then(()=>{Re.value=!0,Se.parent&&o_(Se.parent.vnode)&&Qy(Se.parent.update)}).catch(Le=>{_e(Le),nt.value=Le}),()=>{if(Re.value&&V)return Mx(V,Se);if(nt.value&&d)return Tr(d,{error:nt.value});if(a&&!ke.value)return Tr(a)}}})}function Mx(e,r){const{ref:a,props:d,children:_,ce:x}=r.vnode,E=Tr(e,d,_);return E.ref=a,E.ce=x,delete r.vnode.ce,E}const o_=e=>e.type.__isKeepAlive,S7={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:r}){const a=Rh(),d=a.ctx;if(!d.renderer)return()=>{const Le=r.default&&r.default();return Le&&Le.length===1?Le[0]:Le};const _=new Map,x=new Set;let E=null;const o=a.suspense,{renderer:{p:D,m:V,um:X,o:{createElement:Z}}}=d,he=Z("div");d.activate=(Le,$e,Et,Fe,z)=>{const Lt=Le.component;V(Le,$e,Et,0,o),D(Lt.vnode,Le,$e,Et,Lt,o,Fe,Le.slotScopeIds,z),Ko(()=>{Lt.isDeactivated=!1,Lt.a&&y0(Lt.a);const ot=Le.props&&Le.props.onVnodeMounted;ot&&ol(ot,Lt.parent,Le)},o)},d.deactivate=Le=>{const $e=Le.component;V(Le,he,null,1,o),Ko(()=>{$e.da&&y0($e.da);const Et=Le.props&&Le.props.onVnodeUnmounted;Et&&ol(Et,$e.parent,Le),$e.isDeactivated=!0},o)};function Se(Le){Ax(Le),X(Le,a,o,!0)}function _e(Le){_.forEach(($e,Et)=>{const Fe=p3($e.type);Fe&&(!Le||!Le(Fe))&&Re(Et)})}function Re(Le){const $e=_.get(Le);!E||$e.type!==E.type?Se($e):E&&Ax(E),_.delete(Le),x.delete(Le)}ku(()=>[e.include,e.exclude],([Le,$e])=>{Le&&_e(Et=>S1(Le,Et)),$e&&_e(Et=>!S1($e,Et))},{flush:"post",deep:!0});let nt=null;const ke=()=>{nt!=null&&_.set(nt,Ix(a.subTree))};return rp(ke),r2(ke),s2(()=>{_.forEach(Le=>{const{subTree:$e,suspense:Et}=a,Fe=Ix($e);if(Le.type===Fe.type){Ax(Fe);const z=Fe.component.da;z&&Ko(z,Et);return}Se(Le)})}),()=>{if(nt=null,!r.default)return null;const Le=r.default(),$e=Le[0];if(Le.length>1)return E=null,Le;if(!Ih($e)||!($e.shapeFlag&4)&&!($e.shapeFlag&128))return E=null,$e;let Et=Ix($e);const Fe=Et.type,z=p3(Gf(Et)?Et.type.__asyncResolved||{}:Fe),{include:Lt,exclude:ot,max:bt}=e;if(Lt&&(!z||!S1(Lt,z))||ot&&z&&S1(ot,z))return E=Et,$e;const Ht=Et.key==null?Fe:Et.key,Yt=_.get(Ht);return Et.el&&(Et=Du(Et),$e.shapeFlag&128&&($e.ssContent=Et)),nt=Ht,Yt?(Et.el=Yt.el,Et.component=Yt.component,Et.transition&&Xf(Et,Et.transition),Et.shapeFlag|=512,x.delete(Ht),x.add(Ht)):(x.add(Ht),bt&&x.size>parseInt(bt,10)&&Re(x.values().next().value)),Et.shapeFlag|=256,E=Et,Q8($e.type)?$e:Et}}},C7=S7;function S1(e,r){return Ii(e)?e.some(a=>S1(a,r)):In(e)?e.split(",").includes(r):e.test?e.test(r):!1}function r4(e,r){o4(e,"a",r)}function s4(e,r){o4(e,"da",r)}function o4(e,r,a=xo){const d=e.__wdc||(e.__wdc=()=>{let _=a;for(;_;){if(_.isDeactivated)return;_=_.parent}return e()});if(n2(r,d,a),a){let _=a.parent;for(;_&&_.parent;)o_(_.parent.vnode)&&M7(d,r,a,_),_=_.parent}}function M7(e,r,a,d){const _=n2(r,e,d,!0);U0(()=>{Z3(d[r],_)},a)}function Ax(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Ix(e){return e.shapeFlag&128?e.ssContent:e}function n2(e,r,a=xo,d=!1){if(a){const _=a[e]||(a[e]=[]),x=r.__weh||(r.__weh=(...E)=>{if(a.isUnmounted)return;F0(),kh(a);const o=Gl(r,a,e,E);return Eh(),N0(),o});return d?_.unshift(x):_.push(x),x}}const Ad=e=>(r,a=xo)=>(!k0||e==="sp")&&n2(e,(...d)=>r(...d),a),a4=Ad("bm"),rp=Ad("m"),l4=Ad("bu"),r2=Ad("u"),s2=Ad("bum"),U0=Ad("um"),c4=Ad("sp"),u4=Ad("rtg"),d4=Ad("rtc");function h4(e,r=xo){n2("ec",e,r)}function f4(e,r){const a=Qo;if(a===null)return e;const d=l2(a)||a.proxy,_=e.dirs||(e.dirs=[]);for(let x=0;x<r.length;x++){let[E,o,D,V=Rr]=r[x];E&&(xn(E)&&(E={mounted:E,updated:E}),E.deep&&Bf(o),_.push({dir:E,instance:d,value:o,oldValue:void 0,arg:D,modifiers:V}))}return e}function Su(e,r,a,d){const _=e.dirs,x=r&&r.dirs;for(let E=0;E<_.length;E++){const o=_[E];x&&(o.oldValue=x[E].value);let D=o.dir[d];D&&(F0(),Gl(D,a,8,[e.el,o,e,r]),N0())}}const _b="components",A7="directives";function Ff(e,r){return gb(_b,e,!0,r)||e}const p4=Symbol();function I7(e){return In(e)?gb(_b,e,!1)||e:e||p4}function k7(e){return gb(A7,e)}function gb(e,r,a=!0,d=!1){const _=Qo||xo;if(_){const x=_.type;if(e===_b){const o=p3(x,!1);if(o&&(o===r||o===ta(r)||o===ip(ta(r))))return x}const E=Qw(_[e]||x[e],r)||Qw(_.appContext[e],r);return!E&&d?x:E}}function Qw(e,r){return e&&(e[r]||e[ta(r)]||e[ip(ta(r))])}function o2(e,r,a,d){let _;const x=a&&a[d];if(Ii(e)||In(e)){_=new Array(e.length);for(let E=0,o=e.length;E<o;E++)_[E]=r(e[E],E,void 0,x&&x[E])}else if(typeof e=="number"){_=new Array(e);for(let E=0;E<e;E++)_[E]=r(E+1,E,void 0,x&&x[E])}else if(Nr(e))if(e[Symbol.iterator])_=Array.from(e,(E,o)=>r(E,o,void 0,x&&x[o]));else{const E=Object.keys(e);_=new Array(E.length);for(let o=0,D=E.length;o<D;o++){const V=E[o];_[o]=r(e[V],V,o,x&&x[o])}}else _=[];return a&&(a[d]=_),_}function D7(e,r){for(let a=0;a<r.length;a++){const d=r[a];if(Ii(d))for(let _=0;_<d.length;_++)e[d[_].name]=d[_].fn;else d&&(e[d.name]=d.key?(..._)=>{const x=d.fn(..._);return x&&(x.key=d.key),x}:d.fn)}return e}function r3(e,r,a={},d,_){if(Qo.isCE||Qo.parent&&Gf(Qo.parent)&&Qo.parent.isCE)return r!=="default"&&(a.name=r),Tr("slot",a,d&&d());let x=e[r];x&&x._c&&(x._d=!1),so();const E=x&&m4(x(a)),o=bb(Hs,{key:a.key||E&&E.key||`_${r}`},E||(d?d():[]),E&&e._===1?64:-2);return!_&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),x&&x._c&&(x._d=!0),o}function m4(e){return e.some(r=>Ih(r)?!(r.type===ya||r.type===Hs&&!m4(r.children)):!0)?e:null}function P7(e,r){const a={};for(const d in e)a[r&&/[A-Z]/.test(d)?`on:${d}`:g0(d)]=e[d];return a}const s3=e=>e?P4(e)?l2(e)||e.proxy:s3(e.parent):null,C1=Er(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>s3(e.parent),$root:e=>s3(e.root),$emit:e=>e.emit,$options:e=>yb(e),$forceUpdate:e=>e.f||(e.f=()=>Qy(e.update)),$nextTick:e=>e.n||(e.n=Jy.bind(e.proxy)),$watch:e=>w7.bind(e)}),kx=(e,r)=>e!==Rr&&!e.__isScriptSetup&&mr(e,r),o3={get({_:e},r){const{ctx:a,setupState:d,data:_,props:x,accessCache:E,type:o,appContext:D}=e;let V;if(r[0]!=="$"){const Se=E[r];if(Se!==void 0)switch(Se){case 1:return d[r];case 2:return _[r];case 4:return a[r];case 3:return x[r]}else{if(kx(d,r))return E[r]=1,d[r];if(_!==Rr&&mr(_,r))return E[r]=2,_[r];if((V=e.propsOptions[0])&&mr(V,r))return E[r]=3,x[r];if(a!==Rr&&mr(a,r))return E[r]=4,a[r];a3&&(E[r]=0)}}const X=C1[r];let Z,he;if(X)return r==="$attrs"&&Wl(e,"get",r),X(e);if((Z=o.__cssModules)&&(Z=Z[r]))return Z;if(a!==Rr&&mr(a,r))return E[r]=4,a[r];if(he=D.config.globalProperties,mr(he,r))return he[r]},set({_:e},r,a){const{data:d,setupState:_,ctx:x}=e;return kx(_,r)?(_[r]=a,!0):d!==Rr&&mr(d,r)?(d[r]=a,!0):mr(e.props,r)||r[0]==="$"&&r.slice(1)in e?!1:(x[r]=a,!0)},has({_:{data:e,setupState:r,accessCache:a,ctx:d,appContext:_,propsOptions:x}},E){let o;return!!a[E]||e!==Rr&&mr(e,E)||kx(r,E)||(o=x[0])&&mr(o,E)||mr(d,E)||mr(C1,E)||mr(_.config.globalProperties,E)},defineProperty(e,r,a){return a.get!=null?e._.accessCache[r]=0:mr(a,"value")&&this.set(e,r,a.value,null),Reflect.defineProperty(e,r,a)}},L7=Er({},o3,{get(e,r){if(r!==Symbol.unscopables)return o3.get(e,r,e)},has(e,r){return r[0]!=="_"&&!Z9(r)}});let a3=!0;function R7(e){const r=yb(e),a=e.proxy,d=e.ctx;a3=!1,r.beforeCreate&&e5(r.beforeCreate,e,"bc");const{data:_,computed:x,methods:E,watch:o,provide:D,inject:V,created:X,beforeMount:Z,mounted:he,beforeUpdate:Se,updated:_e,activated:Re,deactivated:nt,beforeDestroy:ke,beforeUnmount:Le,destroyed:$e,unmounted:Et,render:Fe,renderTracked:z,renderTriggered:Lt,errorCaptured:ot,serverPrefetch:bt,expose:Ht,inheritAttrs:Yt,components:Wt,directives:hi,filters:ri}=r;if(V&&O7(V,d,null,e.appContext.config.unwrapInjectedRef),E)for(const mn in E){const tn=E[mn];xn(tn)&&(d[mn]=tn.bind(a))}if(_){const mn=_.call(a,a);Nr(mn)&&(e.data=Yy(mn))}if(a3=!0,x)for(const mn in x){const tn=x[mn],ts=xn(tn)?tn.bind(a,a):xn(tn.get)?tn.get.bind(a,a):Fa,Fn=!xn(tn)&&xn(tn.set)?tn.set.bind(a):Fa,Nn=c2({get:ts,set:Fn});Object.defineProperty(d,mn,{enumerable:!0,configurable:!0,get:()=>Nn.value,set:Is=>Nn.value=Is})}if(o)for(const mn in o)_4(o[mn],d,a,mn);if(D){const mn=xn(D)?D.call(a):D;Reflect.ownKeys(mn).forEach(tn=>{hb(tn,mn[tn])})}X&&e5(X,e,"c");function pn(mn,tn){Ii(tn)?tn.forEach(ts=>mn(ts.bind(a))):tn&&mn(tn.bind(a))}if(pn(a4,Z),pn(rp,he),pn(l4,Se),pn(r2,_e),pn(r4,Re),pn(s4,nt),pn(h4,ot),pn(d4,z),pn(u4,Lt),pn(s2,Le),pn(U0,Et),pn(c4,bt),Ii(Ht))if(Ht.length){const mn=e.exposed||(e.exposed={});Ht.forEach(tn=>{Object.defineProperty(mn,tn,{get:()=>a[tn],set:ts=>a[tn]=ts})})}else e.exposed||(e.exposed={});Fe&&e.render===Fa&&(e.render=Fe),Yt!=null&&(e.inheritAttrs=Yt),Wt&&(e.components=Wt),hi&&(e.directives=hi)}function O7(e,r,a=Fa,d=!1){Ii(e)&&(e=l3(e));for(const _ in e){const x=e[_];let E;Nr(x)?"default"in x?E=b0(x.from||_,x.default,!0):E=b0(x.from||_):E=b0(x),No(E)&&d?Object.defineProperty(r,_,{enumerable:!0,configurable:!0,get:()=>E.value,set:o=>E.value=o}):r[_]=E}}function e5(e,r,a){Gl(Ii(e)?e.map(d=>d.bind(r.proxy)):e.bind(r.proxy),r,a)}function _4(e,r,a,d){const _=d.includes(".")?i4(a,d):()=>a[d];if(In(e)){const x=r[e];xn(x)&&ku(_,x)}else if(xn(e))ku(_,e.bind(a));else if(Nr(e))if(Ii(e))e.forEach(x=>_4(x,r,a,d));else{const x=xn(e.handler)?e.handler.bind(a):r[e.handler];xn(x)&&ku(_,x,e)}}function yb(e){const r=e.type,{mixins:a,extends:d}=r,{mixins:_,optionsCache:x,config:{optionMergeStrategies:E}}=e.appContext,o=x.get(r);let D;return o?D=o:!_.length&&!a&&!d?D=r:(D={},_.length&&_.forEach(V=>gy(D,V,E,!0)),gy(D,r,E)),Nr(r)&&x.set(r,D),D}function gy(e,r,a,d=!1){const{mixins:_,extends:x}=r;x&&gy(e,x,a,!0),_&&_.forEach(E=>gy(e,E,a,!0));for(const E in r)if(!(d&&E==="expose")){const o=z7[E]||a&&a[E];e[E]=o?o(e[E],r[E]):r[E]}return e}const z7={data:t5,props:Lf,emits:Lf,methods:Lf,computed:Lf,beforeCreate:Ba,created:Ba,beforeMount:Ba,mounted:Ba,beforeUpdate:Ba,updated:Ba,beforeDestroy:Ba,beforeUnmount:Ba,destroyed:Ba,unmounted:Ba,activated:Ba,deactivated:Ba,errorCaptured:Ba,serverPrefetch:Ba,components:Lf,directives:Lf,watch:F7,provide:t5,inject:B7};function t5(e,r){return r?e?function(){return Er(xn(e)?e.call(this,this):e,xn(r)?r.call(this,this):r)}:r:e}function B7(e,r){return Lf(l3(e),l3(r))}function l3(e){if(Ii(e)){const r={};for(let a=0;a<e.length;a++)r[e[a]]=e[a];return r}return e}function Ba(e,r){return e?[...new Set([].concat(e,r))]:r}function Lf(e,r){return e?Er(Er(Object.create(null),e),r):r}function F7(e,r){if(!e)return r;if(!r)return e;const a=Er(Object.create(null),e);for(const d in r)a[d]=Ba(e[d],r[d]);return a}function N7(e,r,a,d=!1){const _={},x={};my(x,a2,1),e.propsDefaults=Object.create(null),g4(e,r,_,x);for(const E in e.propsOptions[0])E in _||(_[E]=void 0);a?e.props=d?_:G8(_):e.type.props?e.props=_:e.props=x,e.attrs=x}function U7(e,r,a,d){const{props:_,attrs:x,vnode:{patchFlag:E}}=e,o=gr(_),[D]=e.propsOptions;let V=!1;if((d||E>0)&&!(E&16)){if(E&8){const X=e.vnode.dynamicProps;for(let Z=0;Z<X.length;Z++){let he=X[Z];if(e2(e.emitsOptions,he))continue;const Se=r[he];if(D)if(mr(x,he))Se!==x[he]&&(x[he]=Se,V=!0);else{const _e=ta(he);_[_e]=c3(D,o,_e,Se,e,!1)}else Se!==x[he]&&(x[he]=Se,V=!0)}}}else{g4(e,r,_,x)&&(V=!0);let X;for(const Z in o)(!r||!mr(r,Z)&&((X=$l(Z))===Z||!mr(r,X)))&&(D?a&&(a[Z]!==void 0||a[X]!==void 0)&&(_[Z]=c3(D,o,Z,void 0,e,!0)):delete _[Z]);if(x!==o)for(const Z in x)(!r||!mr(r,Z))&&(delete x[Z],V=!0)}V&&Ed(e,"set","$attrs")}function g4(e,r,a,d){const[_,x]=e.propsOptions;let E=!1,o;if(r)for(let D in r){if(jf(D))continue;const V=r[D];let X;_&&mr(_,X=ta(D))?!x||!x.includes(X)?a[X]=V:(o||(o={}))[X]=V:e2(e.emitsOptions,D)||(!(D in d)||V!==d[D])&&(d[D]=V,E=!0)}if(x){const D=gr(a),V=o||Rr;for(let X=0;X<x.length;X++){const Z=x[X];a[Z]=c3(_,D,Z,V[Z],e,!mr(V,Z))}}return E}function c3(e,r,a,d,_,x){const E=e[a];if(E!=null){const o=mr(E,"default");if(o&&d===void 0){const D=E.default;if(E.type!==Function&&xn(D)){const{propsDefaults:V}=_;a in V?d=V[a]:(kh(_),d=V[a]=D.call(null,r),Eh())}else d=D}E[0]&&(x&&!o?d=!1:E[1]&&(d===""||d===$l(a))&&(d=!0))}return d}function y4(e,r,a=!1){const d=r.propsCache,_=d.get(e);if(_)return _;const x=e.props,E={},o=[];let D=!1;if(!xn(e)){const X=Z=>{D=!0;const[he,Se]=y4(Z,r,!0);Er(E,he),Se&&o.push(...Se)};!a&&r.mixins.length&&r.mixins.forEach(X),e.extends&&X(e.extends),e.mixins&&e.mixins.forEach(X)}if(!x&&!D)return Nr(e)&&d.set(e,m0),m0;if(Ii(x))for(let X=0;X<x.length;X++){const Z=ta(x[X]);i5(Z)&&(E[Z]=Rr)}else if(x)for(const X in x){const Z=ta(X);if(i5(Z)){const he=x[X],Se=E[Z]=Ii(he)||xn(he)?{type:he}:Object.assign({},he);if(Se){const _e=s5(Boolean,Se.type),Re=s5(String,Se.type);Se[0]=_e>-1,Se[1]=Re<0||_e<Re,(_e>-1||mr(Se,"default"))&&o.push(Z)}}}const V=[E,o];return Nr(e)&&d.set(e,V),V}function i5(e){return e[0]!=="$"}function n5(e){const r=e&&e.toString().match(/^\s*function (\w+)/);return r?r[1]:e===null?"null":""}function r5(e,r){return n5(e)===n5(r)}function s5(e,r){return Ii(r)?r.findIndex(a=>r5(a,e)):xn(r)&&r5(r,e)?0:-1}const v4=e=>e[0]==="_"||e==="$stable",vb=e=>Ii(e)?e.map(jl):[jl(e)],j7=(e,r,a)=>{if(r._n)return r;const d=r_((..._)=>vb(r(..._)),a);return d._c=!1,d},x4=(e,r,a)=>{const d=e._ctx;for(const _ in e){if(v4(_))continue;const x=e[_];if(xn(x))r[_]=j7(_,x,d);else if(x!=null){const E=vb(x);r[_]=()=>E}}},b4=(e,r)=>{const a=vb(r);e.slots.default=()=>a},V7=(e,r)=>{if(e.vnode.shapeFlag&32){const a=r._;a?(e.slots=gr(r),my(r,"_",a)):x4(r,e.slots={})}else e.slots={},r&&b4(e,r);my(e.slots,a2,1)},$7=(e,r,a)=>{const{vnode:d,slots:_}=e;let x=!0,E=Rr;if(d.shapeFlag&32){const o=r._;o?a&&o===1?x=!1:(Er(_,r),!a&&o===1&&delete _._):(x=!r.$stable,x4(r,_)),E=r}else r&&(b4(e,r),E={default:1});if(x)for(const o in _)!v4(o)&&!(o in E)&&delete _[o]};function w4(){return{app:null,config:{isNativeTag:ny,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let G7=0;function q7(e,r){return function(d,_=null){xn(d)||(d=Object.assign({},d)),_!=null&&!Nr(_)&&(_=null);const x=w4(),E=new Set;let o=!1;const D=x.app={_uid:G7++,_component:d,_props:_,_container:null,_context:x,_instance:null,version:$4,get config(){return x.config},set config(V){},use(V,...X){return E.has(V)||(V&&xn(V.install)?(E.add(V),V.install(D,...X)):xn(V)&&(E.add(V),V(D,...X))),D},mixin(V){return x.mixins.includes(V)||x.mixins.push(V),D},component(V,X){return X?(x.components[V]=X,D):x.components[V]},directive(V,X){return X?(x.directives[V]=X,D):x.directives[V]},mount(V,X,Z){if(!o){const he=Tr(d,_);return he.appContext=x,X&&r?r(he,V):e(he,V,Z),o=!0,D._container=V,V.__vue_app__=D,l2(he.component)||he.component.proxy}},unmount(){o&&(e(null,D._container),delete D._container.__vue_app__)},provide(V,X){return x.provides[V]=X,D}};return D}}function yy(e,r,a,d,_=!1){if(Ii(e)){e.forEach((he,Se)=>yy(he,r&&(Ii(r)?r[Se]:r),a,d,_));return}if(Gf(d)&&!_)return;const x=d.shapeFlag&4?l2(d.component)||d.component.proxy:d.el,E=_?null:x,{i:o,r:D}=e,V=r&&r.r,X=o.refs===Rr?o.refs={}:o.refs,Z=o.setupState;if(V!=null&&V!==D&&(In(V)?(X[V]=null,mr(Z,V)&&(Z[V]=null)):No(V)&&(V.value=null)),xn(D))xd(D,o,12,[E,X]);else{const he=In(D),Se=No(D);if(he||Se){const _e=()=>{if(e.f){const Re=he?mr(Z,D)?Z[D]:X[D]:D.value;_?Ii(Re)&&Z3(Re,x):Ii(Re)?Re.includes(x)||Re.push(x):he?(X[D]=[x],mr(Z,D)&&(Z[D]=X[D])):(D.value=[x],e.k&&(X[e.k]=D.value))}else he?(X[D]=E,mr(Z,D)&&(Z[D]=E)):Se&&(D.value=E,e.k&&(X[e.k]=E))};E?(_e.id=-1,Ko(_e,a)):_e()}}}let mh=!1;const $g=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",Gg=e=>e.nodeType===8;function W7(e){const{mt:r,p:a,o:{patchProp:d,createText:_,nextSibling:x,parentNode:E,remove:o,insert:D,createComment:V}}=e,X=(ke,Le)=>{if(!Le.hasChildNodes()){a(null,ke,Le),_y(),Le._vnode=ke;return}mh=!1,Z(Le.firstChild,ke,null,null,null),_y(),Le._vnode=ke,mh&&console.error("Hydration completed but contains mismatches.")},Z=(ke,Le,$e,Et,Fe,z=!1)=>{const Lt=Gg(ke)&&ke.data==="[",ot=()=>Re(ke,Le,$e,Et,Fe,Lt),{type:bt,ref:Ht,shapeFlag:Yt,patchFlag:Wt}=Le;let hi=ke.nodeType;Le.el=ke,Wt===-2&&(z=!1,Le.dynamicChildren=null);let ri=null;switch(bt){case Kf:hi!==3?Le.children===""?(D(Le.el=_(""),E(ke),ke),ri=ke):ri=ot():(ke.data!==Le.children&&(mh=!0,ke.data=Le.children),ri=x(ke));break;case ya:hi!==8||Lt?ri=ot():ri=x(ke);break;case qf:if(Lt&&(ke=x(ke),hi=ke.nodeType),hi===1||hi===3){ri=ke;const fi=!Le.children.length;for(let pn=0;pn<Le.staticCount;pn++)fi&&(Le.children+=ri.nodeType===1?ri.outerHTML:ri.data),pn===Le.staticCount-1&&(Le.anchor=ri),ri=x(ri);return Lt?x(ri):ri}else ot();break;case Hs:Lt?ri=_e(ke,Le,$e,Et,Fe,z):ri=ot();break;default:if(Yt&1)hi!==1||Le.type.toLowerCase()!==ke.tagName.toLowerCase()?ri=ot():ri=he(ke,Le,$e,Et,Fe,z);else if(Yt&6){Le.slotScopeIds=Fe;const fi=E(ke);if(r(Le,fi,null,$e,Et,$g(fi),z),ri=Lt?nt(ke):x(ke),ri&&Gg(ri)&&ri.data==="teleport end"&&(ri=x(ri)),Gf(Le)){let pn;Lt?(pn=Tr(Hs),pn.anchor=ri?ri.previousSibling:fi.lastChild):pn=ke.nodeType===3?wb(""):Tr("div"),pn.el=ke,Le.component.subTree=pn}}else Yt&64?hi!==8?ri=ot():ri=Le.type.hydrate(ke,Le,$e,Et,Fe,z,e,Se):Yt&128&&(ri=Le.type.hydrate(ke,Le,$e,Et,$g(E(ke)),Fe,z,e,Z))}return Ht!=null&&yy(Ht,null,Et,Le),ri},he=(ke,Le,$e,Et,Fe,z)=>{z=z||!!Le.dynamicChildren;const{type:Lt,props:ot,patchFlag:bt,shapeFlag:Ht,dirs:Yt}=Le,Wt=Lt==="input"&&Yt||Lt==="option";if(Wt||bt!==-1){if(Yt&&Su(Le,null,$e,"created"),ot)if(Wt||!z||bt&48)for(const ri in ot)(Wt&&ri.endsWith("value")||ep(ri)&&!jf(ri))&&d(ke,ri,null,ot[ri],!1,void 0,$e);else ot.onClick&&d(ke,"onClick",null,ot.onClick,!1,void 0,$e);let hi;if((hi=ot&&ot.onVnodeBeforeMount)&&ol(hi,$e,Le),Yt&&Su(Le,null,$e,"beforeMount"),((hi=ot&&ot.onVnodeMounted)||Yt)&&e4(()=>{hi&&ol(hi,$e,Le),Yt&&Su(Le,null,$e,"mounted")},Et),Ht&16&&!(ot&&(ot.innerHTML||ot.textContent))){let ri=Se(ke.firstChild,Le,ke,$e,Et,Fe,z);for(;ri;){mh=!0;const fi=ri;ri=ri.nextSibling,o(fi)}}else Ht&8&&ke.textContent!==Le.children&&(mh=!0,ke.textContent=Le.children)}return ke.nextSibling},Se=(ke,Le,$e,Et,Fe,z,Lt)=>{Lt=Lt||!!Le.dynamicChildren;const ot=Le.children,bt=ot.length;for(let Ht=0;Ht<bt;Ht++){const Yt=Lt?ot[Ht]:ot[Ht]=jl(ot[Ht]);if(ke)ke=Z(ke,Yt,Et,Fe,z,Lt);else{if(Yt.type===Kf&&!Yt.children)continue;mh=!0,a(null,Yt,$e,null,Et,Fe,$g($e),z)}}return ke},_e=(ke,Le,$e,Et,Fe,z)=>{const{slotScopeIds:Lt}=Le;Lt&&(Fe=Fe?Fe.concat(Lt):Lt);const ot=E(ke),bt=Se(x(ke),Le,ot,$e,Et,Fe,z);return bt&&Gg(bt)&&bt.data==="]"?x(Le.anchor=bt):(mh=!0,D(Le.anchor=V("]"),ot,bt),bt)},Re=(ke,Le,$e,Et,Fe,z)=>{if(mh=!0,Le.el=null,z){const bt=nt(ke);for(;;){const Ht=x(ke);if(Ht&&Ht!==bt)o(Ht);else break}}const Lt=x(ke),ot=E(ke);return o(ke),a(null,Le,ot,Lt,$e,Et,$g(ot),Fe),Lt},nt=ke=>{let Le=0;for(;ke;)if(ke=x(ke),ke&&Gg(ke)&&(ke.data==="["&&Le++,ke.data==="]")){if(Le===0)return x(ke);Le--}return ke};return[X,Z]}const Ko=e4;function T4(e){return S4(e)}function E4(e){return S4(e,W7)}function S4(e,r){const a=pS();a.__VUE__=!0;const{insert:d,remove:_,patchProp:x,createElement:E,createText:o,createComment:D,setText:V,setElementText:X,parentNode:Z,nextSibling:he,setScopeId:Se=Fa,insertStaticContent:_e}=e,Re=(Ce,Ve,tt,kt=null,ct=null,zt=null,ui=!1,Xt=null,Kt=!!Ve.dynamicChildren)=>{if(Ce===Ve)return;Ce&&!Mu(Ce,Ve)&&(kt=Zr(Ce),Is(Ce,ct,zt,!0),Ce=null),Ve.patchFlag===-2&&(Kt=!1,Ve.dynamicChildren=null);const{type:Nt,ref:pi,shapeFlag:di}=Ve;switch(Nt){case Kf:nt(Ce,Ve,tt,kt);break;case ya:ke(Ce,Ve,tt,kt);break;case qf:Ce==null&&Le(Ve,tt,kt,ui);break;case Hs:Wt(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt);break;default:di&1?Fe(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt):di&6?hi(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt):(di&64||di&128)&&Nt.process(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt,Sr)}pi!=null&&ct&&yy(pi,Ce&&Ce.ref,zt,Ve||Ce,!Ve)},nt=(Ce,Ve,tt,kt)=>{if(Ce==null)d(Ve.el=o(Ve.children),tt,kt);else{const ct=Ve.el=Ce.el;Ve.children!==Ce.children&&V(ct,Ve.children)}},ke=(Ce,Ve,tt,kt)=>{Ce==null?d(Ve.el=D(Ve.children||""),tt,kt):Ve.el=Ce.el},Le=(Ce,Ve,tt,kt)=>{[Ce.el,Ce.anchor]=_e(Ce.children,Ve,tt,kt,Ce.el,Ce.anchor)},$e=({el:Ce,anchor:Ve},tt,kt)=>{let ct;for(;Ce&&Ce!==Ve;)ct=he(Ce),d(Ce,tt,kt),Ce=ct;d(Ve,tt,kt)},Et=({el:Ce,anchor:Ve})=>{let tt;for(;Ce&&Ce!==Ve;)tt=he(Ce),_(Ce),Ce=tt;_(Ve)},Fe=(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt)=>{ui=ui||Ve.type==="svg",Ce==null?z(Ve,tt,kt,ct,zt,ui,Xt,Kt):bt(Ce,Ve,ct,zt,ui,Xt,Kt)},z=(Ce,Ve,tt,kt,ct,zt,ui,Xt)=>{let Kt,Nt;const{type:pi,props:di,shapeFlag:Ti,transition:Di,dirs:Yi}=Ce;if(Kt=Ce.el=E(Ce.type,zt,di&&di.is,di),Ti&8?X(Kt,Ce.children):Ti&16&&ot(Ce.children,Kt,null,kt,ct,zt&&pi!=="foreignObject",ui,Xt),Yi&&Su(Ce,null,kt,"created"),di){for(const cn in di)cn!=="value"&&!jf(cn)&&x(Kt,cn,null,di[cn],zt,Ce.children,kt,ct,Hr);"value"in di&&x(Kt,"value",null,di.value),(Nt=di.onVnodeBeforeMount)&&ol(Nt,kt,Ce)}Lt(Kt,Ce,Ce.scopeId,ui,kt),Yi&&Su(Ce,null,kt,"beforeMount");const _n=(!ct||ct&&!ct.pendingBranch)&&Di&&!Di.persisted;_n&&Di.beforeEnter(Kt),d(Kt,Ve,tt),((Nt=di&&di.onVnodeMounted)||_n||Yi)&&Ko(()=>{Nt&&ol(Nt,kt,Ce),_n&&Di.enter(Kt),Yi&&Su(Ce,null,kt,"mounted")},ct)},Lt=(Ce,Ve,tt,kt,ct)=>{if(tt&&Se(Ce,tt),kt)for(let zt=0;zt<kt.length;zt++)Se(Ce,kt[zt]);if(ct){let zt=ct.subTree;if(Ve===zt){const ui=ct.vnode;Lt(Ce,ui,ui.scopeId,ui.slotScopeIds,ct.parent)}}},ot=(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt=0)=>{for(let Nt=Kt;Nt<Ce.length;Nt++){const pi=Ce[Nt]=Xt?vh(Ce[Nt]):jl(Ce[Nt]);Re(null,pi,Ve,tt,kt,ct,zt,ui,Xt)}},bt=(Ce,Ve,tt,kt,ct,zt,ui)=>{const Xt=Ve.el=Ce.el;let{patchFlag:Kt,dynamicChildren:Nt,dirs:pi}=Ve;Kt|=Ce.patchFlag&16;const di=Ce.props||Rr,Ti=Ve.props||Rr;let Di;tt&&If(tt,!1),(Di=Ti.onVnodeBeforeUpdate)&&ol(Di,tt,Ve,Ce),pi&&Su(Ve,Ce,tt,"beforeUpdate"),tt&&If(tt,!0);const Yi=ct&&Ve.type!=="foreignObject";if(Nt?Ht(Ce.dynamicChildren,Nt,Xt,tt,kt,Yi,zt):ui||tn(Ce,Ve,Xt,null,tt,kt,Yi,zt,!1),Kt>0){if(Kt&16)Yt(Xt,Ve,di,Ti,tt,kt,ct);else if(Kt&2&&di.class!==Ti.class&&x(Xt,"class",null,Ti.class,ct),Kt&4&&x(Xt,"style",di.style,Ti.style,ct),Kt&8){const _n=Ve.dynamicProps;for(let cn=0;cn<_n.length;cn++){const Yn=_n[cn],nr=di[Yn],Zs=Ti[Yn];(Zs!==nr||Yn==="value")&&x(Xt,Yn,nr,Zs,ct,Ce.children,tt,kt,Hr)}}Kt&1&&Ce.children!==Ve.children&&X(Xt,Ve.children)}else!ui&&Nt==null&&Yt(Xt,Ve,di,Ti,tt,kt,ct);((Di=Ti.onVnodeUpdated)||pi)&&Ko(()=>{Di&&ol(Di,tt,Ve,Ce),pi&&Su(Ve,Ce,tt,"updated")},kt)},Ht=(Ce,Ve,tt,kt,ct,zt,ui)=>{for(let Xt=0;Xt<Ve.length;Xt++){const Kt=Ce[Xt],Nt=Ve[Xt],pi=Kt.el&&(Kt.type===Hs||!Mu(Kt,Nt)||Kt.shapeFlag&70)?Z(Kt.el):tt;Re(Kt,Nt,pi,null,kt,ct,zt,ui,!0)}},Yt=(Ce,Ve,tt,kt,ct,zt,ui)=>{if(tt!==kt){if(tt!==Rr)for(const Xt in tt)!jf(Xt)&&!(Xt in kt)&&x(Ce,Xt,tt[Xt],null,ui,Ve.children,ct,zt,Hr);for(const Xt in kt){if(jf(Xt))continue;const Kt=kt[Xt],Nt=tt[Xt];Kt!==Nt&&Xt!=="value"&&x(Ce,Xt,Nt,Kt,ui,Ve.children,ct,zt,Hr)}"value"in kt&&x(Ce,"value",tt.value,kt.value)}},Wt=(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt)=>{const Nt=Ve.el=Ce?Ce.el:o(""),pi=Ve.anchor=Ce?Ce.anchor:o("");let{patchFlag:di,dynamicChildren:Ti,slotScopeIds:Di}=Ve;Di&&(Xt=Xt?Xt.concat(Di):Di),Ce==null?(d(Nt,tt,kt),d(pi,tt,kt),ot(Ve.children,tt,pi,ct,zt,ui,Xt,Kt)):di>0&&di&64&&Ti&&Ce.dynamicChildren?(Ht(Ce.dynamicChildren,Ti,tt,ct,zt,ui,Xt),(Ve.key!=null||ct&&Ve===ct.subTree)&&xb(Ce,Ve,!0)):tn(Ce,Ve,tt,pi,ct,zt,ui,Xt,Kt)},hi=(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt)=>{Ve.slotScopeIds=Xt,Ce==null?Ve.shapeFlag&512?ct.ctx.activate(Ve,tt,kt,ui,Kt):ri(Ve,tt,kt,ct,zt,ui,Kt):fi(Ce,Ve,Kt)},ri=(Ce,Ve,tt,kt,ct,zt,ui)=>{const Xt=Ce.component=D4(Ce,kt,ct);if(o_(Ce)&&(Xt.ctx.renderer=Sr),L4(Xt),Xt.asyncDep){if(ct&&ct.registerDep(Xt,pn),!Ce.el){const Kt=Xt.subTree=Tr(ya);ke(null,Kt,Ve,tt)}return}pn(Xt,Ce,Ve,tt,ct,zt,ui)},fi=(Ce,Ve,tt)=>{const kt=Ve.component=Ce.component;if(f7(Ce,Ve,tt))if(kt.asyncDep&&!kt.asyncResolved){mn(kt,Ve,tt);return}else kt.next=Ve,o7(kt.update),kt.update();else Ve.el=Ce.el,kt.vnode=Ve},pn=(Ce,Ve,tt,kt,ct,zt,ui)=>{const Xt=()=>{if(Ce.isMounted){let{next:pi,bu:di,u:Ti,parent:Di,vnode:Yi}=Ce,_n=pi,cn;If(Ce,!1),pi?(pi.el=Yi.el,mn(Ce,pi,ui)):pi=Yi,di&&y0(di),(cn=pi.props&&pi.props.onVnodeBeforeUpdate)&&ol(cn,Di,pi,Yi),If(Ce,!0);const Yn=ry(Ce),nr=Ce.subTree;Ce.subTree=Yn,Re(nr,Yn,Z(nr.el),Zr(nr),Ce,ct,zt),pi.el=Yn.el,_n===null&&ub(Ce,Yn.el),Ti&&Ko(Ti,ct),(cn=pi.props&&pi.props.onVnodeUpdated)&&Ko(()=>ol(cn,Di,pi,Yi),ct)}else{let pi;const{el:di,props:Ti}=Ve,{bm:Di,m:Yi,parent:_n}=Ce,cn=Gf(Ve);if(If(Ce,!1),Di&&y0(Di),!cn&&(pi=Ti&&Ti.onVnodeBeforeMount)&&ol(pi,_n,Ve),If(Ce,!0),di&&Uo){const Yn=()=>{Ce.subTree=ry(Ce),Uo(di,Ce.subTree,Ce,ct,null)};cn?Ve.type.__asyncLoader().then(()=>!Ce.isUnmounted&&Yn()):Yn()}else{const Yn=Ce.subTree=ry(Ce);Re(null,Yn,tt,kt,Ce,ct,zt),Ve.el=Yn.el}if(Yi&&Ko(Yi,ct),!cn&&(pi=Ti&&Ti.onVnodeMounted)){const Yn=Ve;Ko(()=>ol(pi,_n,Yn),ct)}(Ve.shapeFlag&256||_n&&Gf(_n.vnode)&&_n.vnode.shapeFlag&256)&&Ce.a&&Ko(Ce.a,ct),Ce.isMounted=!0,Ve=tt=kt=null}},Kt=Ce.effect=new n_(Xt,()=>Qy(Nt),Ce.scope),Nt=Ce.update=()=>Kt.run();Nt.id=Ce.uid,If(Ce,!0),Nt()},mn=(Ce,Ve,tt)=>{Ve.component=Ce;const kt=Ce.vnode.props;Ce.vnode=Ve,Ce.next=null,U7(Ce,Ve.props,kt,tt),$7(Ce,Ve.children,tt),F0(),Yw(),N0()},tn=(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt=!1)=>{const Nt=Ce&&Ce.children,pi=Ce?Ce.shapeFlag:0,di=Ve.children,{patchFlag:Ti,shapeFlag:Di}=Ve;if(Ti>0){if(Ti&128){Fn(Nt,di,tt,kt,ct,zt,ui,Xt,Kt);return}else if(Ti&256){ts(Nt,di,tt,kt,ct,zt,ui,Xt,Kt);return}}Di&8?(pi&16&&Hr(Nt,ct,zt),di!==Nt&&X(tt,di)):pi&16?Di&16?Fn(Nt,di,tt,kt,ct,zt,ui,Xt,Kt):Hr(Nt,ct,zt,!0):(pi&8&&X(tt,""),Di&16&&ot(di,tt,kt,ct,zt,ui,Xt,Kt))},ts=(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt)=>{Ce=Ce||m0,Ve=Ve||m0;const Nt=Ce.length,pi=Ve.length,di=Math.min(Nt,pi);let Ti;for(Ti=0;Ti<di;Ti++){const Di=Ve[Ti]=Kt?vh(Ve[Ti]):jl(Ve[Ti]);Re(Ce[Ti],Di,tt,null,ct,zt,ui,Xt,Kt)}Nt>pi?Hr(Ce,ct,zt,!0,!1,di):ot(Ve,tt,kt,ct,zt,ui,Xt,Kt,di)},Fn=(Ce,Ve,tt,kt,ct,zt,ui,Xt,Kt)=>{let Nt=0;const pi=Ve.length;let di=Ce.length-1,Ti=pi-1;for(;Nt<=di&&Nt<=Ti;){const Di=Ce[Nt],Yi=Ve[Nt]=Kt?vh(Ve[Nt]):jl(Ve[Nt]);if(Mu(Di,Yi))Re(Di,Yi,tt,null,ct,zt,ui,Xt,Kt);else break;Nt++}for(;Nt<=di&&Nt<=Ti;){const Di=Ce[di],Yi=Ve[Ti]=Kt?vh(Ve[Ti]):jl(Ve[Ti]);if(Mu(Di,Yi))Re(Di,Yi,tt,null,ct,zt,ui,Xt,Kt);else break;di--,Ti--}if(Nt>di){if(Nt<=Ti){const Di=Ti+1,Yi=Di<pi?Ve[Di].el:kt;for(;Nt<=Ti;)Re(null,Ve[Nt]=Kt?vh(Ve[Nt]):jl(Ve[Nt]),tt,Yi,ct,zt,ui,Xt,Kt),Nt++}}else if(Nt>Ti)for(;Nt<=di;)Is(Ce[Nt],ct,zt,!0),Nt++;else{const Di=Nt,Yi=Nt,_n=new Map;for(Nt=Yi;Nt<=Ti;Nt++){const Or=Ve[Nt]=Kt?vh(Ve[Nt]):jl(Ve[Nt]);Or.key!=null&&_n.set(Or.key,Nt)}let cn,Yn=0;const nr=Ti-Yi+1;let Zs=!1,ks=0;const Yr=new Array(nr);for(Nt=0;Nt<nr;Nt++)Yr[Nt]=0;for(Nt=Di;Nt<=di;Nt++){const Or=Ce[Nt];if(Yn>=nr){Is(Or,ct,zt,!0);continue}let rr;if(Or.key!=null)rr=_n.get(Or.key);else for(cn=Yi;cn<=Ti;cn++)if(Yr[cn-Yi]===0&&Mu(Or,Ve[cn])){rr=cn;break}rr===void 0?Is(Or,ct,zt,!0):(Yr[rr-Yi]=Nt+1,rr>=ks?ks=rr:Zs=!0,Re(Or,Ve[rr],tt,null,ct,zt,ui,Xt,Kt),Yn++)}const Ys=Zs?H7(Yr):m0;for(cn=Ys.length-1,Nt=nr-1;Nt>=0;Nt--){const Or=Yi+Nt,rr=Ve[Or],Cr=Or+1<pi?Ve[Or+1].el:kt;Yr[Nt]===0?Re(null,rr,tt,Cr,ct,zt,ui,Xt,Kt):Zs&&(cn<0||Nt!==Ys[cn]?Nn(rr,tt,Cr,2):cn--)}}},Nn=(Ce,Ve,tt,kt,ct=null)=>{const{el:zt,type:ui,transition:Xt,children:Kt,shapeFlag:Nt}=Ce;if(Nt&6){Nn(Ce.component.subTree,Ve,tt,kt);return}if(Nt&128){Ce.suspense.move(Ve,tt,kt);return}if(Nt&64){ui.move(Ce,Ve,tt,Sr);return}if(ui===Hs){d(zt,Ve,tt);for(let di=0;di<Kt.length;di++)Nn(Kt[di],Ve,tt,kt);d(Ce.anchor,Ve,tt);return}if(ui===qf){$e(Ce,Ve,tt);return}if(kt!==2&&Nt&1&&Xt)if(kt===0)Xt.beforeEnter(zt),d(zt,Ve,tt),Ko(()=>Xt.enter(zt),ct);else{const{leave:di,delayLeave:Ti,afterLeave:Di}=Xt,Yi=()=>d(zt,Ve,tt),_n=()=>{di(zt,()=>{Yi(),Di&&Di()})};Ti?Ti(zt,Yi,_n):_n()}else d(zt,Ve,tt)},Is=(Ce,Ve,tt,kt=!1,ct=!1)=>{const{type:zt,props:ui,ref:Xt,children:Kt,dynamicChildren:Nt,shapeFlag:pi,patchFlag:di,dirs:Ti}=Ce;if(Xt!=null&&yy(Xt,null,tt,Ce,!0),pi&256){Ve.ctx.deactivate(Ce);return}const Di=pi&1&&Ti,Yi=!Gf(Ce);let _n;if(Yi&&(_n=ui&&ui.onVnodeBeforeUnmount)&&ol(_n,Ve,Ce),pi&6)Bs(Ce.component,tt,kt);else{if(pi&128){Ce.suspense.unmount(tt,kt);return}Di&&Su(Ce,null,Ve,"beforeUnmount"),pi&64?Ce.type.remove(Ce,Ve,tt,ct,Sr,kt):Nt&&(zt!==Hs||di>0&&di&64)?Hr(Nt,Ve,tt,!1,!0):(zt===Hs&&di&384||!ct&&pi&16)&&Hr(Kt,Ve,tt),kt&&xs(Ce)}(Yi&&(_n=ui&&ui.onVnodeUnmounted)||Di)&&Ko(()=>{_n&&ol(_n,Ve,Ce),Di&&Su(Ce,null,Ve,"unmounted")},tt)},xs=Ce=>{const{type:Ve,el:tt,anchor:kt,transition:ct}=Ce;if(Ve===Hs){zs(tt,kt);return}if(Ve===qf){Et(Ce);return}const zt=()=>{_(tt),ct&&!ct.persisted&&ct.afterLeave&&ct.afterLeave()};if(Ce.shapeFlag&1&&ct&&!ct.persisted){const{leave:ui,delayLeave:Xt}=ct,Kt=()=>ui(tt,zt);Xt?Xt(Ce.el,zt,Kt):Kt()}else zt()},zs=(Ce,Ve)=>{let tt;for(;Ce!==Ve;)tt=he(Ce),_(Ce),Ce=tt;_(Ve)},Bs=(Ce,Ve,tt)=>{const{bum:kt,scope:ct,update:zt,subTree:ui,um:Xt}=Ce;kt&&y0(kt),ct.stop(),zt&&(zt.active=!1,Is(ui,Ce,Ve,tt)),Xt&&Ko(Xt,Ve),Ko(()=>{Ce.isUnmounted=!0},Ve),Ve&&Ve.pendingBranch&&!Ve.isUnmounted&&Ce.asyncDep&&!Ce.asyncResolved&&Ce.suspenseId===Ve.pendingId&&(Ve.deps--,Ve.deps===0&&Ve.resolve())},Hr=(Ce,Ve,tt,kt=!1,ct=!1,zt=0)=>{for(let ui=zt;ui<Ce.length;ui++)Is(Ce[ui],Ve,tt,kt,ct)},Zr=Ce=>Ce.shapeFlag&6?Zr(Ce.component.subTree):Ce.shapeFlag&128?Ce.suspense.next():he(Ce.anchor||Ce.el),ds=(Ce,Ve,tt)=>{Ce==null?Ve._vnode&&Is(Ve._vnode,null,null,!0):Re(Ve._vnode||null,Ce,Ve,null,null,null,tt),Yw(),_y(),Ve._vnode=Ce},Sr={p:Re,um:Is,m:Nn,r:xs,mt:ri,mc:ot,pc:tn,pbc:Ht,n:Zr,o:e};let bs,Uo;return r&&([bs,Uo]=r(Sr)),{render:ds,hydrate:bs,createApp:q7(ds,bs)}}function If({effect:e,update:r},a){e.allowRecurse=r.allowRecurse=a}function xb(e,r,a=!1){const d=e.children,_=r.children;if(Ii(d)&&Ii(_))for(let x=0;x<d.length;x++){const E=d[x];let o=_[x];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=_[x]=vh(_[x]),o.el=E.el),a||xb(E,o)),o.type===Kf&&(o.el=E.el)}}function H7(e){const r=e.slice(),a=[0];let d,_,x,E,o;const D=e.length;for(d=0;d<D;d++){const V=e[d];if(V!==0){if(_=a[a.length-1],e[_]<V){r[d]=_,a.push(d);continue}for(x=0,E=a.length-1;x<E;)o=x+E>>1,e[a[o]]<V?x=o+1:E=o;V<e[a[x]]&&(x>0&&(r[d]=a[x-1]),a[x]=d)}}for(x=a.length,E=a[x-1];x-- >0;)a[x]=E,E=r[E];return a}const Z7=e=>e.__isTeleport,M1=e=>e&&(e.disabled||e.disabled===""),o5=e=>typeof SVGElement<"u"&&e instanceof SVGElement,u3=(e,r)=>{const a=e&&e.to;return In(a)?r?r(a):null:a},Y7={__isTeleport:!0,process(e,r,a,d,_,x,E,o,D,V){const{mc:X,pc:Z,pbc:he,o:{insert:Se,querySelector:_e,createText:Re,createComment:nt}}=V,ke=M1(r.props);let{shapeFlag:Le,children:$e,dynamicChildren:Et}=r;if(e==null){const Fe=r.el=Re(""),z=r.anchor=Re("");Se(Fe,a,d),Se(z,a,d);const Lt=r.target=u3(r.props,_e),ot=r.targetAnchor=Re("");Lt&&(Se(ot,Lt),E=E||o5(Lt));const bt=(Ht,Yt)=>{Le&16&&X($e,Ht,Yt,_,x,E,o,D)};ke?bt(a,z):Lt&&bt(Lt,ot)}else{r.el=e.el;const Fe=r.anchor=e.anchor,z=r.target=e.target,Lt=r.targetAnchor=e.targetAnchor,ot=M1(e.props),bt=ot?a:z,Ht=ot?Fe:Lt;if(E=E||o5(z),Et?(he(e.dynamicChildren,Et,bt,_,x,E,o),xb(e,r,!0)):D||Z(e,r,bt,Ht,_,x,E,o,!1),ke)ot||qg(r,a,Fe,V,1);else if((r.props&&r.props.to)!==(e.props&&e.props.to)){const Yt=r.target=u3(r.props,_e);Yt&&qg(r,Yt,null,V,0)}else ot&&qg(r,z,Lt,V,1)}C4(r)},remove(e,r,a,d,{um:_,o:{remove:x}},E){const{shapeFlag:o,children:D,anchor:V,targetAnchor:X,target:Z,props:he}=e;if(Z&&x(X),(E||!M1(he))&&(x(V),o&16))for(let Se=0;Se<D.length;Se++){const _e=D[Se];_(_e,r,a,!0,!!_e.dynamicChildren)}},move:qg,hydrate:X7};function qg(e,r,a,{o:{insert:d},m:_},x=2){x===0&&d(e.targetAnchor,r,a);const{el:E,anchor:o,shapeFlag:D,children:V,props:X}=e,Z=x===2;if(Z&&d(E,r,a),(!Z||M1(X))&&D&16)for(let he=0;he<V.length;he++)_(V[he],r,a,2);Z&&d(o,r,a)}function X7(e,r,a,d,_,x,{o:{nextSibling:E,parentNode:o,querySelector:D}},V){const X=r.target=u3(r.props,D);if(X){const Z=X._lpa||X.firstChild;if(r.shapeFlag&16)if(M1(r.props))r.anchor=V(E(e),r,o(e),a,d,_,x),r.targetAnchor=Z;else{r.anchor=E(e);let he=Z;for(;he;)if(he=E(he),he&&he.nodeType===8&&he.data==="teleport anchor"){r.targetAnchor=he,X._lpa=r.targetAnchor&&E(r.targetAnchor);break}V(Z,r,X,a,d,_,x)}C4(r)}return r.anchor&&E(r.anchor)}const K7=Y7;function C4(e){const r=e.ctx;if(r&&r.ut){let a=e.children[0].el;for(;a!==e.targetAnchor;)a.nodeType===1&&a.setAttribute("data-v-owner",r.uid),a=a.nextSibling;r.ut()}}const Hs=Symbol(void 0),Kf=Symbol(void 0),ya=Symbol(void 0),qf=Symbol(void 0),A1=[];let al=null;function so(e=!1){A1.push(al=e?null:[])}function M4(){A1.pop(),al=A1[A1.length-1]||null}let Jf=1;function d3(e){Jf+=e}function A4(e){return e.dynamicChildren=Jf>0?al||m0:null,M4(),Jf>0&&al&&al.push(e),e}function ea(e,r,a,d,_,x){return A4(un(e,r,a,d,_,x,!0))}function bb(e,r,a,d,_){return A4(Tr(e,r,a,d,_,!0))}function Ih(e){return e?e.__v_isVNode===!0:!1}function Mu(e,r){return e.type===r.type&&e.key===r.key}function J7(e){}const a2="__vInternal",I4=({key:e})=>e??null,sy=({ref:e,ref_key:r,ref_for:a})=>e!=null?In(e)||No(e)||xn(e)?{i:Qo,r:e,k:r,f:!!a}:e:null;function un(e,r=null,a=null,d=0,_=null,x=e===Hs?0:1,E=!1,o=!1){const D={__v_isVNode:!0,__v_skip:!0,type:e,props:r,key:r&&I4(r),ref:r&&sy(r),scopeId:t2,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:x,patchFlag:d,dynamicProps:_,dynamicChildren:null,appContext:null,ctx:Qo};return o?(Tb(D,a),x&128&&e.normalize(D)):a&&(D.shapeFlag|=In(a)?8:16),Jf>0&&!E&&al&&(D.patchFlag>0||x&6)&&D.patchFlag!==32&&al.push(D),D}const Tr=Q7;function Q7(e,r=null,a=null,d=0,_=null,x=!1){if((!e||e===p4)&&(e=ya),Ih(e)){const o=Du(e,r,!0);return a&&Tb(o,a),Jf>0&&!x&&al&&(o.shapeFlag&6?al[al.indexOf(e)]=o:al.push(o)),o.patchFlag|=-2,o}if(sC(e)&&(e=e.__vccOpts),r){r=k4(r);let{class:o,style:D}=r;o&&!In(o)&&(r.class=t_(o)),Nr(D)&&(tb(D)&&!Ii(D)&&(D=Er({},D)),r.style=e_(D))}const E=In(e)?1:Q8(e)?128:Z7(e)?64:Nr(e)?4:xn(e)?2:0;return un(e,r,a,d,_,E,x,!0)}function k4(e){return e?tb(e)||a2 in e?Er({},e):e:null}function Du(e,r,a=!1){const{props:d,ref:_,patchFlag:x,children:E}=e,o=r?Eb(d||{},r):d;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&I4(o),ref:r&&r.ref?a&&_?Ii(_)?_.concat(sy(r)):[_,sy(r)]:sy(r):_,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:E,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:r&&e.type!==Hs?x===-1?16:x|16:x,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Du(e.ssContent),ssFallback:e.ssFallback&&Du(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function wb(e=" ",r=0){return Tr(Kf,null,e,r)}function j0(e,r){const a=Tr(qf,null,e);return a.staticCount=r,a}function j1(e="",r=!1){return r?(so(),bb(ya,null,e)):Tr(ya,null,e)}function jl(e){return e==null||typeof e=="boolean"?Tr(ya):Ii(e)?Tr(Hs,null,e.slice()):typeof e=="object"?vh(e):Tr(Kf,null,String(e))}function vh(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Du(e)}function Tb(e,r){let a=0;const{shapeFlag:d}=e;if(r==null)r=null;else if(Ii(r))a=16;else if(typeof r=="object")if(d&65){const _=r.default;_&&(_._c&&(_._d=!1),Tb(e,_()),_._c&&(_._d=!0));return}else{a=32;const _=r._;!_&&!(a2 in r)?r._ctx=Qo:_===3&&Qo&&(Qo.slots._===1?r._=1:(r._=2,e.patchFlag|=1024))}else xn(r)?(r={default:r,_ctx:Qo},a=32):(r=String(r),d&64?(a=16,r=[wb(r)]):a=8);e.children=r,e.shapeFlag|=a}function Eb(...e){const r={};for(let a=0;a<e.length;a++){const d=e[a];for(const _ in d)if(_==="class")r.class!==d.class&&(r.class=t_([r.class,d.class]));else if(_==="style")r.style=e_([r.style,d.style]);else if(ep(_)){const x=r[_],E=d[_];E&&x!==E&&!(Ii(x)&&x.includes(E))&&(r[_]=x?[].concat(x,E):E)}else _!==""&&(r[_]=d[_])}return r}function ol(e,r,a,d=null){Gl(e,r,7,[a,d])}const eC=w4();let tC=0;function D4(e,r,a){const d=e.type,_=(r?r.appContext:e.appContext)||eC,x={uid:tC++,vnode:e,type:d,parent:r,appContext:_,root:null,next:null,subTree:null,effect:null,update:null,scope:new K3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(_.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:y4(d,_),emitsOptions:J8(d,_),emit:null,emitted:null,propsDefaults:Rr,inheritAttrs:d.inheritAttrs,ctx:Rr,data:Rr,props:Rr,attrs:Rr,slots:Rr,refs:Rr,setupState:Rr,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return x.ctx={_:x},x.root=r?r.root:x,x.emit=l7.bind(null,x),e.ce&&e.ce(x),x}let xo=null;const Rh=()=>xo||Qo,kh=e=>{xo=e,e.scope.on()},Eh=()=>{xo&&xo.scope.off(),xo=null};function P4(e){return e.vnode.shapeFlag&4}let k0=!1;function L4(e,r=!1){k0=r;const{props:a,children:d}=e.vnode,_=P4(e);N7(e,a,_,r),V7(e,d);const x=_?iC(e,r):void 0;return k0=!1,x}function iC(e,r){const a=e.type;e.accessCache=Object.create(null),e.proxy=ib(new Proxy(e.ctx,o3));const{setup:d}=a;if(d){const _=e.setupContext=d.length>1?z4(e):null;kh(e),F0();const x=xd(d,e,0,[e.props,_]);if(N0(),Eh(),Y3(x)){if(x.then(Eh,Eh),r)return x.then(E=>{h3(e,E,r)}).catch(E=>{np(E,e,0)});e.asyncDep=x}else h3(e,x,r)}else O4(e,r)}function h3(e,r,a){xn(r)?e.type.__ssrInlineRender?e.ssrRender=r:e.render=r:Nr(r)&&(e.setupState=sb(r)),O4(e,a)}let vy,f3;function R4(e){vy=e,f3=r=>{r.render._rc&&(r.withProxy=new Proxy(r.ctx,L7))}}const nC=()=>!vy;function O4(e,r,a){const d=e.type;if(!e.render){if(!r&&vy&&!d.render){const _=d.template||yb(e).template;if(_){const{isCustomElement:x,compilerOptions:E}=e.appContext.config,{delimiters:o,compilerOptions:D}=d,V=Er(Er({isCustomElement:x,delimiters:o},E),D);d.render=vy(_,V)}}e.render=d.render||Fa,f3&&f3(e)}kh(e),F0(),R7(e),N0(),Eh()}function rC(e){return new Proxy(e.attrs,{get(r,a){return Wl(e,"get","$attrs"),r[a]}})}function z4(e){const r=d=>{e.exposed=d||{}};let a;return{get attrs(){return a||(a=rC(e))},slots:e.slots,emit:e.emit,expose:r}}function l2(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(sb(ib(e.exposed)),{get(r,a){if(a in r)return r[a];if(a in C1)return C1[a](e)},has(r,a){return a in r||a in C1}}))}function p3(e,r=!0){return xn(e)?e.displayName||e.name:e.name||r&&e.__name}function sC(e){return xn(e)&&"__vccOpts"in e}const c2=(e,r)=>i7(e,r,k0);function oC(){return null}function aC(){return null}function lC(e){}function cC(e,r){return null}function uC(){return F4().slots}function B4(){return F4().attrs}function F4(){const e=Rh();return e.setupContext||(e.setupContext=z4(e))}function dC(e,r){const a=Ii(e)?e.reduce((d,_)=>(d[_]={},d),{}):e;for(const d in r){const _=a[d];_?Ii(_)||xn(_)?a[d]={type:_,default:r[d]}:_.default=r[d]:_===null&&(a[d]={default:r[d]})}return a}function hC(e,r){const a={};for(const d in e)r.includes(d)||Object.defineProperty(a,d,{enumerable:!0,get:()=>e[d]});return a}function fC(e){const r=Rh();let a=e();return Eh(),Y3(a)&&(a=a.catch(d=>{throw kh(r),d})),[a,()=>kh(r)]}function N4(e,r,a){const d=arguments.length;return d===2?Nr(r)&&!Ii(r)?Ih(r)?Tr(e,null,[r]):Tr(e,r):Tr(e,null,r):(d>3?a=Array.prototype.slice.call(arguments,2):d===3&&Ih(a)&&(a=[a]),Tr(e,r,a))}const U4=Symbol(""),j4=()=>b0(U4);function pC(){}function mC(e,r,a,d){const _=a[d];if(_&&V4(_,e))return _;const x=r();return x.memo=e.slice(),a[d]=x}function V4(e,r){const a=e.memo;if(a.length!=r.length)return!1;for(let d=0;d<a.length;d++)if(A0(a[d],r[d]))return!1;return Jf>0&&al&&al.push(e),!0}const $4="3.2.45",_C={createComponentInstance:D4,setupComponent:L4,renderComponentRoot:ry,setCurrentRenderingInstance:N1,isVNode:Ih,normalizeVNode:jl},gC=_C,yC=null,vC=null,xC="http://www.w3.org/2000/svg",zf=typeof document<"u"?document:null,a5=zf&&zf.createElement("template"),bC={insert:(e,r,a)=>{r.insertBefore(e,a||null)},remove:e=>{const r=e.parentNode;r&&r.removeChild(e)},createElement:(e,r,a,d)=>{const _=r?zf.createElementNS(xC,e):zf.createElement(e,a?{is:a}:void 0);return e==="select"&&d&&d.multiple!=null&&_.setAttribute("multiple",d.multiple),_},createText:e=>zf.createTextNode(e),createComment:e=>zf.createComment(e),setText:(e,r)=>{e.nodeValue=r},setElementText:(e,r)=>{e.textContent=r},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>zf.querySelector(e),setScopeId(e,r){e.setAttribute(r,"")},insertStaticContent(e,r,a,d,_,x){const E=a?a.previousSibling:r.lastChild;if(_&&(_===x||_.nextSibling))for(;r.insertBefore(_.cloneNode(!0),a),!(_===x||!(_=_.nextSibling)););else{a5.innerHTML=d?`<svg>${e}</svg>`:e;const o=a5.content;if(d){const D=o.firstChild;for(;D.firstChild;)o.appendChild(D.firstChild);o.removeChild(D)}r.insertBefore(o,a)}return[E?E.nextSibling:r.firstChild,a?a.previousSibling:r.lastChild]}};function wC(e,r,a){const d=e._vtc;d&&(r=(r?[r,...d]:[...d]).join(" ")),r==null?e.removeAttribute("class"):a?e.setAttribute("class",r):e.className=r}function TC(e,r,a){const d=e.style,_=In(a);if(a&&!_){for(const x in a)m3(d,x,a[x]);if(r&&!In(r))for(const x in r)a[x]==null&&m3(d,x,"")}else{const x=d.display;_?r!==a&&(d.cssText=a):r&&e.removeAttribute("style"),"_vod"in e&&(d.display=x)}}const l5=/\s*!important$/;function m3(e,r,a){if(Ii(a))a.forEach(d=>m3(e,r,d));else if(a==null&&(a=""),r.startsWith("--"))e.setProperty(r,a);else{const d=EC(e,r);l5.test(a)?e.setProperty($l(d),a.replace(l5,""),"important"):e[d]=a}}const c5=["Webkit","Moz","ms"],Dx={};function EC(e,r){const a=Dx[r];if(a)return a;let d=ta(r);if(d!=="filter"&&d in e)return Dx[r]=d;d=ip(d);for(let _=0;_<c5.length;_++){const x=c5[_]+d;if(x in e)return Dx[r]=x}return r}const u5="http://www.w3.org/1999/xlink";function SC(e,r,a,d,_){if(d&&r.startsWith("xlink:"))a==null?e.removeAttributeNS(u5,r.slice(6,r.length)):e.setAttributeNS(u5,r,a);else{const x=oS(r);a==null||x&&!M8(a)?e.removeAttribute(r):e.setAttribute(r,x?"":a)}}function CC(e,r,a,d,_,x,E){if(r==="innerHTML"||r==="textContent"){d&&E(d,_,x),e[r]=a??"";return}if(r==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=a;const D=a??"";(e.value!==D||e.tagName==="OPTION")&&(e.value=D),a==null&&e.removeAttribute(r);return}let o=!1;if(a===""||a==null){const D=typeof e[r];D==="boolean"?a=M8(a):a==null&&D==="string"?(a="",o=!0):D==="number"&&(a=0,o=!0)}try{e[r]=a}catch{}o&&e.removeAttribute(r)}function _d(e,r,a,d){e.addEventListener(r,a,d)}function MC(e,r,a,d){e.removeEventListener(r,a,d)}function AC(e,r,a,d,_=null){const x=e._vei||(e._vei={}),E=x[r];if(d&&E)E.value=d;else{const[o,D]=IC(r);if(d){const V=x[r]=PC(d,_);_d(e,o,V,D)}else E&&(MC(e,o,E,D),x[r]=void 0)}}const d5=/(?:Once|Passive|Capture)$/;function IC(e){let r;if(d5.test(e)){r={};let d;for(;d=e.match(d5);)e=e.slice(0,e.length-d[0].length),r[d[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):$l(e.slice(2)),r]}let Px=0;const kC=Promise.resolve(),DC=()=>Px||(kC.then(()=>Px=0),Px=Date.now());function PC(e,r){const a=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=a.attached)return;Gl(LC(d,a.value),r,5,[d])};return a.value=e,a.attached=DC(),a}function LC(e,r){if(Ii(r)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},r.map(d=>_=>!_._stopped&&d&&d(_))}else return r}const h5=/^on[a-z]/,RC=(e,r,a,d,_=!1,x,E,o,D)=>{r==="class"?wC(e,d,_):r==="style"?TC(e,a,d):ep(r)?H3(r)||AC(e,r,a,d,E):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):OC(e,r,d,_))?CC(e,r,d,x,E,o,D):(r==="true-value"?e._trueValue=d:r==="false-value"&&(e._falseValue=d),SC(e,r,d,_))};function OC(e,r,a,d){return d?!!(r==="innerHTML"||r==="textContent"||r in e&&h5.test(r)&&xn(a)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&e.tagName==="INPUT"||r==="type"&&e.tagName==="TEXTAREA"||h5.test(r)&&In(a)?!1:r in e}function G4(e,r){const a=mb(e);class d extends u2{constructor(x){super(a,x,r)}}return d.def=a,d}const zC=e=>G4(e,s6),BC=typeof HTMLElement<"u"?HTMLElement:class{};class u2 extends BC{constructor(r,a={},d){super(),this._def=r,this._props=a,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&d?d(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Jy(()=>{this._connected||(y3(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let d=0;d<this.attributes.length;d++)this._setAttr(this.attributes[d].name);new MutationObserver(d=>{for(const _ of d)this._setAttr(_.attributeName)}).observe(this,{attributes:!0});const r=(d,_=!1)=>{const{props:x,styles:E}=d;let o;if(x&&!Ii(x))for(const D in x){const V=x[D];(V===Number||V&&V.type===Number)&&(D in this._props&&(this._props[D]=Td(this._props[D])),(o||(o=Object.create(null)))[ta(D)]=!0)}this._numberProps=o,_&&this._resolveProps(d),this._applyStyles(E),this._update()},a=this._def.__asyncLoader;a?a().then(d=>r(d,!0)):r(this._def)}_resolveProps(r){const{props:a}=r,d=Ii(a)?a:Object.keys(a||{});for(const _ of Object.keys(this))_[0]!=="_"&&d.includes(_)&&this._setProp(_,this[_],!0,!1);for(const _ of d.map(ta))Object.defineProperty(this,_,{get(){return this._getProp(_)},set(x){this._setProp(_,x)}})}_setAttr(r){let a=this.getAttribute(r);const d=ta(r);this._numberProps&&this._numberProps[d]&&(a=Td(a)),this._setProp(d,a,!1)}_getProp(r){return this._props[r]}_setProp(r,a,d=!0,_=!0){a!==this._props[r]&&(this._props[r]=a,_&&this._instance&&this._update(),d&&(a===!0?this.setAttribute($l(r),""):typeof a=="string"||typeof a=="number"?this.setAttribute($l(r),a+""):a||this.removeAttribute($l(r))))}_update(){y3(this._createVNode(),this.shadowRoot)}_createVNode(){const r=Tr(this._def,Er({},this._props));return this._instance||(r.ce=a=>{this._instance=a,a.isCE=!0;const d=(x,E)=>{this.dispatchEvent(new CustomEvent(x,{detail:E}))};a.emit=(x,...E)=>{d(x,E),$l(x)!==x&&d($l(x),E)};let _=this;for(;_=_&&(_.parentNode||_.host);)if(_ instanceof u2){a.parent=_._instance,a.provides=_._instance.provides;break}}),r}_applyStyles(r){r&&r.forEach(a=>{const d=document.createElement("style");d.textContent=a,this.shadowRoot.appendChild(d)})}}function FC(e="$style"){{const r=Rh();if(!r)return Rr;const a=r.type.__cssModules;if(!a)return Rr;const d=a[e];return d||Rr}}function NC(e){const r=Rh();if(!r)return;const a=r.ut=(_=e(r.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${r.uid}"]`)).forEach(x=>g3(x,_))},d=()=>{const _=e(r.proxy);_3(r.subTree,_),a(_)};t4(d),rp(()=>{const _=new MutationObserver(d);_.observe(r.subTree.el.parentNode,{childList:!0}),U0(()=>_.disconnect())})}function _3(e,r){if(e.shapeFlag&128){const a=e.suspense;e=a.activeBranch,a.pendingBranch&&!a.isHydrating&&a.effects.push(()=>{_3(a.activeBranch,r)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)g3(e.el,r);else if(e.type===Hs)e.children.forEach(a=>_3(a,r));else if(e.type===qf){let{el:a,anchor:d}=e;for(;a&&(g3(a,r),a!==d);)a=a.nextSibling}}function g3(e,r){if(e.nodeType===1){const a=e.style;for(const d in r)a.setProperty(`--${d}`,r[d])}}const _h="transition",y1="animation",Sb=(e,{slots:r})=>N4(pb,W4(e),r);Sb.displayName="Transition";const q4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},UC=Sb.props=Er({},pb.props,q4),kf=(e,r=[])=>{Ii(e)?e.forEach(a=>a(...r)):e&&e(...r)},f5=e=>e?Ii(e)?e.some(r=>r.length>1):e.length>1:!1;function W4(e){const r={};for(const Wt in e)Wt in q4||(r[Wt]=e[Wt]);if(e.css===!1)return r;const{name:a="v",type:d,duration:_,enterFromClass:x=`${a}-enter-from`,enterActiveClass:E=`${a}-enter-active`,enterToClass:o=`${a}-enter-to`,appearFromClass:D=x,appearActiveClass:V=E,appearToClass:X=o,leaveFromClass:Z=`${a}-leave-from`,leaveActiveClass:he=`${a}-leave-active`,leaveToClass:Se=`${a}-leave-to`}=e,_e=jC(_),Re=_e&&_e[0],nt=_e&&_e[1],{onBeforeEnter:ke,onEnter:Le,onEnterCancelled:$e,onLeave:Et,onLeaveCancelled:Fe,onBeforeAppear:z=ke,onAppear:Lt=Le,onAppearCancelled:ot=$e}=r,bt=(Wt,hi,ri)=>{yh(Wt,hi?X:o),yh(Wt,hi?V:E),ri&&ri()},Ht=(Wt,hi)=>{Wt._isLeaving=!1,yh(Wt,Z),yh(Wt,Se),yh(Wt,he),hi&&hi()},Yt=Wt=>(hi,ri)=>{const fi=Wt?Lt:Le,pn=()=>bt(hi,Wt,ri);kf(fi,[hi,pn]),p5(()=>{yh(hi,Wt?D:x),fd(hi,Wt?X:o),f5(fi)||m5(hi,d,Re,pn)})};return Er(r,{onBeforeEnter(Wt){kf(ke,[Wt]),fd(Wt,x),fd(Wt,E)},onBeforeAppear(Wt){kf(z,[Wt]),fd(Wt,D),fd(Wt,V)},onEnter:Yt(!1),onAppear:Yt(!0),onLeave(Wt,hi){Wt._isLeaving=!0;const ri=()=>Ht(Wt,hi);fd(Wt,Z),Z4(),fd(Wt,he),p5(()=>{Wt._isLeaving&&(yh(Wt,Z),fd(Wt,Se),f5(Et)||m5(Wt,d,nt,ri))}),kf(Et,[Wt,ri])},onEnterCancelled(Wt){bt(Wt,!1),kf($e,[Wt])},onAppearCancelled(Wt){bt(Wt,!0),kf(ot,[Wt])},onLeaveCancelled(Wt){Ht(Wt),kf(Fe,[Wt])}})}function jC(e){if(e==null)return null;if(Nr(e))return[Lx(e.enter),Lx(e.leave)];{const r=Lx(e);return[r,r]}}function Lx(e){return Td(e)}function fd(e,r){r.split(/\s+/).forEach(a=>a&&e.classList.add(a)),(e._vtc||(e._vtc=new Set)).add(r)}function yh(e,r){r.split(/\s+/).forEach(d=>d&&e.classList.remove(d));const{_vtc:a}=e;a&&(a.delete(r),a.size||(e._vtc=void 0))}function p5(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let VC=0;function m5(e,r,a,d){const _=e._endId=++VC,x=()=>{_===e._endId&&d()};if(a)return setTimeout(x,a);const{type:E,timeout:o,propCount:D}=H4(e,r);if(!E)return d();const V=E+"end";let X=0;const Z=()=>{e.removeEventListener(V,he),x()},he=Se=>{Se.target===e&&++X>=D&&Z()};setTimeout(()=>{X<D&&Z()},o+1),e.addEventListener(V,he)}function H4(e,r){const a=window.getComputedStyle(e),d=_e=>(a[_e]||"").split(", "),_=d(`${_h}Delay`),x=d(`${_h}Duration`),E=_5(_,x),o=d(`${y1}Delay`),D=d(`${y1}Duration`),V=_5(o,D);let X=null,Z=0,he=0;r===_h?E>0&&(X=_h,Z=E,he=x.length):r===y1?V>0&&(X=y1,Z=V,he=D.length):(Z=Math.max(E,V),X=Z>0?E>V?_h:y1:null,he=X?X===_h?x.length:D.length:0);const Se=X===_h&&/\b(transform|all)(,|$)/.test(d(`${_h}Property`).toString());return{type:X,timeout:Z,propCount:he,hasTransform:Se}}function _5(e,r){for(;e.length<r.length;)e=e.concat(e);return Math.max(...r.map((a,d)=>g5(a)+g5(e[d])))}function g5(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Z4(){return document.body.offsetHeight}const Y4=new WeakMap,X4=new WeakMap,$C={name:"TransitionGroup",props:Er({},UC,{tag:String,moveClass:String}),setup(e,{slots:r}){const a=Rh(),d=fb();let _,x;return r2(()=>{if(!_.length)return;const E=e.moveClass||`${e.name||"v"}-move`;if(!ZC(_[0].el,a.vnode.el,E))return;_.forEach(qC),_.forEach(WC);const o=_.filter(HC);Z4(),o.forEach(D=>{const V=D.el,X=V.style;fd(V,E),X.transform=X.webkitTransform=X.transitionDuration="";const Z=V._moveCb=he=>{he&&he.target!==V||(!he||/transform$/.test(he.propertyName))&&(V.removeEventListener("transitionend",Z),V._moveCb=null,yh(V,E))};V.addEventListener("transitionend",Z)})}),()=>{const E=gr(e),o=W4(E);let D=E.tag||Hs;_=x,x=r.default?i2(r.default()):[];for(let V=0;V<x.length;V++){const X=x[V];X.key!=null&&Xf(X,I0(X,o,d,a))}if(_)for(let V=0;V<_.length;V++){const X=_[V];Xf(X,I0(X,o,d,a)),Y4.set(X,X.el.getBoundingClientRect())}return Tr(D,null,x)}}},GC=$C;function qC(e){const r=e.el;r._moveCb&&r._moveCb(),r._enterCb&&r._enterCb()}function WC(e){X4.set(e,e.el.getBoundingClientRect())}function HC(e){const r=Y4.get(e),a=X4.get(e),d=r.left-a.left,_=r.top-a.top;if(d||_){const x=e.el.style;return x.transform=x.webkitTransform=`translate(${d}px,${_}px)`,x.transitionDuration="0s",e}}function ZC(e,r,a){const d=e.cloneNode();e._vtc&&e._vtc.forEach(E=>{E.split(/\s+/).forEach(o=>o&&d.classList.remove(o))}),a.split(/\s+/).forEach(E=>E&&d.classList.add(E)),d.style.display="none";const _=r.nodeType===1?r:r.parentNode;_.appendChild(d);const{hasTransform:x}=H4(d);return _.removeChild(d),x}const Dh=e=>{const r=e.props["onUpdate:modelValue"]||!1;return Ii(r)?a=>y0(r,a):r};function YC(e){e.target.composing=!0}function y5(e){const r=e.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const V1={created(e,{modifiers:{lazy:r,trim:a,number:d}},_){e._assign=Dh(_);const x=d||_.props&&_.props.type==="number";_d(e,r?"change":"input",E=>{if(E.target.composing)return;let o=e.value;a&&(o=o.trim()),x&&(o=Td(o)),e._assign(o)}),a&&_d(e,"change",()=>{e.value=e.value.trim()}),r||(_d(e,"compositionstart",YC),_d(e,"compositionend",y5),_d(e,"change",y5))},mounted(e,{value:r}){e.value=r??""},beforeUpdate(e,{value:r,modifiers:{lazy:a,trim:d,number:_}},x){if(e._assign=Dh(x),e.composing||document.activeElement===e&&e.type!=="range"&&(a||d&&e.value.trim()===r||(_||e.type==="number")&&Td(e.value)===r))return;const E=r??"";e.value!==E&&(e.value=E)}},Cb={deep:!0,created(e,r,a){e._assign=Dh(a),_d(e,"change",()=>{const d=e._modelValue,_=D0(e),x=e.checked,E=e._assign;if(Ii(d)){const o=Gy(d,_),D=o!==-1;if(x&&!D)E(d.concat(_));else if(!x&&D){const V=[...d];V.splice(o,1),E(V)}}else if(tp(d)){const o=new Set(d);x?o.add(_):o.delete(_),E(o)}else E(J4(e,x))})},mounted:v5,beforeUpdate(e,r,a){e._assign=Dh(a),v5(e,r,a)}};function v5(e,{value:r,oldValue:a},d){e._modelValue=r,Ii(r)?e.checked=Gy(r,d.props.value)>-1:tp(r)?e.checked=r.has(d.props.value):r!==a&&(e.checked=Ch(r,J4(e,!0)))}const Mb={created(e,{value:r},a){e.checked=Ch(r,a.props.value),e._assign=Dh(a),_d(e,"change",()=>{e._assign(D0(e))})},beforeUpdate(e,{value:r,oldValue:a},d){e._assign=Dh(d),r!==a&&(e.checked=Ch(r,d.props.value))}},K4={deep:!0,created(e,{value:r,modifiers:{number:a}},d){const _=tp(r);_d(e,"change",()=>{const x=Array.prototype.filter.call(e.options,E=>E.selected).map(E=>a?Td(D0(E)):D0(E));e._assign(e.multiple?_?new Set(x):x:x[0])}),e._assign=Dh(d)},mounted(e,{value:r}){x5(e,r)},beforeUpdate(e,r,a){e._assign=Dh(a)},updated(e,{value:r}){x5(e,r)}};function x5(e,r){const a=e.multiple;if(!(a&&!Ii(r)&&!tp(r))){for(let d=0,_=e.options.length;d<_;d++){const x=e.options[d],E=D0(x);if(a)Ii(r)?x.selected=Gy(r,E)>-1:x.selected=r.has(E);else if(Ch(D0(x),r)){e.selectedIndex!==d&&(e.selectedIndex=d);return}}!a&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function D0(e){return"_value"in e?e._value:e.value}function J4(e,r){const a=r?"_trueValue":"_falseValue";return a in e?e[a]:r}const Q4={created(e,r,a){Wg(e,r,a,null,"created")},mounted(e,r,a){Wg(e,r,a,null,"mounted")},beforeUpdate(e,r,a,d){Wg(e,r,a,d,"beforeUpdate")},updated(e,r,a,d){Wg(e,r,a,d,"updated")}};function e6(e,r){switch(e){case"SELECT":return K4;case"TEXTAREA":return V1;default:switch(r){case"checkbox":return Cb;case"radio":return Mb;default:return V1}}}function Wg(e,r,a,d,_){const E=e6(e.tagName,a.props&&a.props.type)[_];E&&E(e,r,a,d)}function XC(){V1.getSSRProps=({value:e})=>({value:e}),Mb.getSSRProps=({value:e},r)=>{if(r.props&&Ch(r.props.value,e))return{checked:!0}},Cb.getSSRProps=({value:e},r)=>{if(Ii(e)){if(r.props&&Gy(e,r.props.value)>-1)return{checked:!0}}else if(tp(e)){if(r.props&&e.has(r.props.value))return{checked:!0}}else if(e)return{checked:!0}},Q4.getSSRProps=(e,r)=>{if(typeof r.type!="string")return;const a=e6(r.type.toUpperCase(),r.props&&r.props.type);if(a.getSSRProps)return a.getSSRProps(e,r)}}const KC=["ctrl","shift","alt","meta"],JC={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,r)=>KC.some(a=>e[`${a}Key`]&&!r.includes(a))},QC=(e,r)=>(a,...d)=>{for(let _=0;_<r.length;_++){const x=JC[r[_]];if(x&&x(a,r))return}return e(a,...d)},eM={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},tM=(e,r)=>a=>{if(!("key"in a))return;const d=$l(a.key);if(r.some(_=>_===d||eM[_]===d))return e(a)},t6={beforeMount(e,{value:r},{transition:a}){e._vod=e.style.display==="none"?"":e.style.display,a&&r?a.beforeEnter(e):v1(e,r)},mounted(e,{value:r},{transition:a}){a&&r&&a.enter(e)},updated(e,{value:r,oldValue:a},{transition:d}){!r!=!a&&(d?r?(d.beforeEnter(e),v1(e,!0),d.enter(e)):d.leave(e,()=>{v1(e,!1)}):v1(e,r))},beforeUnmount(e,{value:r}){v1(e,r)}};function v1(e,r){e.style.display=r?e._vod:"none"}function iM(){t6.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const i6=Er({patchProp:RC},bC);let I1,b5=!1;function n6(){return I1||(I1=T4(i6))}function r6(){return I1=b5?I1:E4(i6),b5=!0,I1}const y3=(...e)=>{n6().render(...e)},s6=(...e)=>{r6().hydrate(...e)},o6=(...e)=>{const r=n6().createApp(...e),{mount:a}=r;return r.mount=d=>{const _=a6(d);if(!_)return;const x=r._component;!xn(x)&&!x.render&&!x.template&&(x.template=_.innerHTML),_.innerHTML="";const E=a(_,!1,_ instanceof SVGElement);return _ instanceof Element&&(_.removeAttribute("v-cloak"),_.setAttribute("data-v-app","")),E},r},nM=(...e)=>{const r=r6().createApp(...e),{mount:a}=r;return r.mount=d=>{const _=a6(d);if(_)return a(_,!0,_ instanceof SVGElement)},r};function a6(e){return In(e)?document.querySelector(e):e}let w5=!1;const rM=()=>{w5||(w5=!0,XC(),iM())},sM=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:pb,Comment:ya,EffectScope:K3,Fragment:Hs,KeepAlive:C7,ReactiveEffect:n_,Static:qf,Suspense:m7,Teleport:K7,Text:Kf,Transition:Sb,TransitionGroup:GC,VueElement:u2,callWithAsyncErrorHandling:Gl,callWithErrorHandling:xd,camelize:ta,capitalize:ip,cloneVNode:Du,compatUtils:vC,computed:c2,createApp:o6,createBlock:bb,createCommentVNode:j1,createElementBlock:ea,createElementVNode:un,createHydrationRenderer:E4,createPropsRestProxy:hC,createRenderer:T4,createSSRApp:nM,createSlots:D7,createStaticVNode:j0,createTextVNode:wb,createVNode:Tr,customRef:JS,defineAsyncComponent:E7,defineComponent:mb,defineCustomElement:G4,defineEmits:aC,defineExpose:lC,defineProps:oC,defineSSRCustomElement:zC,get devtools(){return d0},effect:xS,effectScope:mS,getCurrentInstance:Rh,getCurrentScope:_S,getTransitionRawChildren:i2,guardReactiveProps:k4,h:N4,handleError:np,hydrate:s6,initCustomFormatter:pC,initDirectivesForSSR:rM,inject:b0,isMemoSame:V4,isProxy:tb,isReactive:$f,isReadonly:Yf,isRef:No,isRuntimeOnly:nC,isShallow:O1,isVNode:Ih,markRaw:ib,mergeDefaults:dC,mergeProps:Eb,nextTick:Jy,normalizeClass:t_,normalizeProps:J9,normalizeStyle:e_,onActivated:r4,onBeforeMount:a4,onBeforeUnmount:s2,onBeforeUpdate:l4,onDeactivated:s4,onErrorCaptured:h4,onMounted:rp,onRenderTracked:d4,onRenderTriggered:u4,onScopeDispose:gS,onServerPrefetch:c4,onUnmounted:U0,onUpdated:r2,openBlock:so,popScopeId:cb,provide:hb,proxyRefs:sb,pushScopeId:lb,queuePostFlushCb:ab,reactive:Yy,readonly:eb,ref:Th,registerRuntimeCompiler:R4,render:y3,renderList:o2,renderSlot:r3,resolveComponent:Ff,resolveDirective:k7,resolveDynamicComponent:I7,resolveFilter:yC,resolveTransitionHooks:I0,setBlockTracking:d3,setDevtoolsHook:K8,setTransitionHooks:Xf,shallowReactive:G8,shallowReadonly:WS,shallowRef:HS,ssrContextKey:U4,ssrUtils:gC,stop:bS,toDisplayString:T1,toHandlerKey:g0,toHandlers:P7,toRaw:gr,toRef:W8,toRefs:QS,transformVNodeArgs:J7,triggerRef:YS,unref:vo,useAttrs:B4,useCssModule:FC,useCssVars:NC,useSSRContext:j4,useSlots:uC,useTransitionState:fb,vModelCheckbox:Cb,vModelDynamic:Q4,vModelRadio:Mb,vModelSelect:K4,vModelText:V1,vShow:t6,version:$4,warn:n7,watch:ku,watchEffect:x7,watchPostEffect:t4,watchSyncEffect:b7,withAsyncContext:fC,withCtx:r_,withDefaults:cC,withDirectives:f4,withKeys:tM,withMemo:mC,withModifiers:QC,withScopeId:c7},Symbol.toStringTag,{value:"Module"}));function Ab(e){throw e}function l6(e){}function vs(e,r,a,d){const _=e,x=new SyntaxError(String(_));return x.code=e,x.loc=r,x}const $1=Symbol(""),k1=Symbol(""),Ib=Symbol(""),xy=Symbol(""),c6=Symbol(""),Qf=Symbol(""),u6=Symbol(""),d6=Symbol(""),kb=Symbol(""),Db=Symbol(""),a_=Symbol(""),Pb=Symbol(""),h6=Symbol(""),Lb=Symbol(""),by=Symbol(""),Rb=Symbol(""),Ob=Symbol(""),zb=Symbol(""),Bb=Symbol(""),f6=Symbol(""),p6=Symbol(""),d2=Symbol(""),wy=Symbol(""),Fb=Symbol(""),Nb=Symbol(""),G1=Symbol(""),l_=Symbol(""),Ub=Symbol(""),v3=Symbol(""),oM=Symbol(""),x3=Symbol(""),Ty=Symbol(""),aM=Symbol(""),lM=Symbol(""),jb=Symbol(""),cM=Symbol(""),uM=Symbol(""),Vb=Symbol(""),m6=Symbol(""),P0={[$1]:"Fragment",[k1]:"Teleport",[Ib]:"Suspense",[xy]:"KeepAlive",[c6]:"BaseTransition",[Qf]:"openBlock",[u6]:"createBlock",[d6]:"createElementBlock",[kb]:"createVNode",[Db]:"createElementVNode",[a_]:"createCommentVNode",[Pb]:"createTextVNode",[h6]:"createStaticVNode",[Lb]:"resolveComponent",[by]:"resolveDynamicComponent",[Rb]:"resolveDirective",[Ob]:"resolveFilter",[zb]:"withDirectives",[Bb]:"renderList",[f6]:"renderSlot",[p6]:"createSlots",[d2]:"toDisplayString",[wy]:"mergeProps",[Fb]:"normalizeClass",[Nb]:"normalizeStyle",[G1]:"normalizeProps",[l_]:"guardReactiveProps",[Ub]:"toHandlers",[v3]:"camelize",[oM]:"capitalize",[x3]:"toHandlerKey",[Ty]:"setBlockTracking",[aM]:"pushScopeId",[lM]:"popScopeId",[jb]:"withCtx",[cM]:"unref",[uM]:"isRef",[Vb]:"withMemo",[m6]:"isMemoSame"};function dM(e){Object.getOwnPropertySymbols(e).forEach(r=>{P0[r]=e[r]})}const Hl={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function hM(e,r=Hl){return{type:0,children:e,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:r}}function q1(e,r,a,d,_,x,E,o=!1,D=!1,V=!1,X=Hl){return e&&(o?(e.helper(Qf),e.helper(O0(e.inSSR,V))):e.helper(R0(e.inSSR,V)),E&&e.helper(zb)),{type:13,tag:r,props:a,children:d,patchFlag:_,dynamicProps:x,directives:E,isBlock:o,disableTracking:D,isComponent:V,loc:X}}function c_(e,r=Hl){return{type:17,loc:r,elements:e}}function wc(e,r=Hl){return{type:15,loc:r,properties:e}}function Os(e,r){return{type:16,loc:Hl,key:In(e)?Bn(e,!0):e,value:r}}function Bn(e,r=!1,a=Hl,d=0){return{type:4,loc:a,content:e,isStatic:r,constType:r?3:d}}function Zc(e,r=Hl){return{type:8,loc:r,children:e}}function ro(e,r=[],a=Hl){return{type:14,loc:a,callee:e,arguments:r}}function L0(e,r=void 0,a=!1,d=!1,_=Hl){return{type:18,params:e,returns:r,newline:a,isSlot:d,loc:_}}function b3(e,r,a,d=!0){return{type:19,test:e,consequent:r,alternate:a,newline:d,loc:Hl}}function fM(e,r,a=!1){return{type:20,index:e,value:r,isVNode:a,loc:Hl}}function pM(e){return{type:21,body:e,loc:Hl}}const ll=e=>e.type===4&&e.isStatic,f0=(e,r)=>e===r||e===$l(r);function _6(e){if(f0(e,"Teleport"))return k1;if(f0(e,"Suspense"))return Ib;if(f0(e,"KeepAlive"))return xy;if(f0(e,"BaseTransition"))return c6}const mM=/^\d|[^\$\w]/,$b=e=>!mM.test(e),_M=/[A-Za-z_$\xA0-\uFFFF]/,gM=/[\.\?\w$\xA0-\uFFFF]/,yM=/\s+[.[]\s*|\s*[.[]\s+/g,vM=e=>{e=e.trim().replace(yM,E=>E.trim());let r=0,a=[],d=0,_=0,x=null;for(let E=0;E<e.length;E++){const o=e.charAt(E);switch(r){case 0:if(o==="[")a.push(r),r=1,d++;else if(o==="(")a.push(r),r=2,_++;else if(!(E===0?_M:gM).test(o))return!1;break;case 1:o==="'"||o==='"'||o==="`"?(a.push(r),r=3,x=o):o==="["?d++:o==="]"&&(--d||(r=a.pop()));break;case 2:if(o==="'"||o==='"'||o==="`")a.push(r),r=3,x=o;else if(o==="(")_++;else if(o===")"){if(E===e.length-1)return!1;--_||(r=a.pop())}break;case 3:o===x&&(r=a.pop(),x=null);break}}return!d&&!_},g6=vM;function y6(e,r,a){const _={source:e.source.slice(r,r+a),start:Ey(e.start,e.source,r),end:e.end};return a!=null&&(_.end=Ey(e.start,e.source,r+a)),_}function Ey(e,r,a=r.length){return Sy(Er({},e),r,a)}function Sy(e,r,a=r.length){let d=0,_=-1;for(let x=0;x<a;x++)r.charCodeAt(x)===10&&(d++,_=x);return e.offset+=a,e.line+=d,e.column=_===-1?e.column+a:a-_,e}function xc(e,r,a=!1){for(let d=0;d<e.props.length;d++){const _=e.props[d];if(_.type===7&&(a||_.exp)&&(In(r)?_.name===r:r.test(_.name)))return _}}function h2(e,r,a=!1,d=!1){for(let _=0;_<e.props.length;_++){const x=e.props[_];if(x.type===6){if(a)continue;if(x.name===r&&(x.value||d))return x}else if(x.name==="bind"&&(x.exp||d)&&Nf(x.arg,r))return x}}function Nf(e,r){return!!(e&&ll(e)&&e.content===r)}function xM(e){return e.props.some(r=>r.type===7&&r.name==="bind"&&(!r.arg||r.arg.type!==4||!r.arg.isStatic))}function Rx(e){return e.type===5||e.type===2}function bM(e){return e.type===7&&e.name==="slot"}function Cy(e){return e.type===1&&e.tagType===3}function My(e){return e.type===1&&e.tagType===2}function R0(e,r){return e||r?kb:Db}function O0(e,r){return e||r?u6:d6}const wM=new Set([G1,l_]);function v6(e,r=[]){if(e&&!In(e)&&e.type===14){const a=e.callee;if(!In(a)&&wM.has(a))return v6(e.arguments[0],r.concat(e))}return[e,r]}function Ay(e,r,a){let d,_=e.type===13?e.props:e.arguments[2],x=[],E;if(_&&!In(_)&&_.type===14){const o=v6(_);_=o[0],x=o[1],E=x[x.length-1]}if(_==null||In(_))d=wc([r]);else if(_.type===14){const o=_.arguments[0];!In(o)&&o.type===15?T5(r,o)||o.properties.unshift(r):_.callee===Ub?d=ro(a.helper(wy),[wc([r]),_]):_.arguments.unshift(wc([r])),!d&&(d=_)}else _.type===15?(T5(r,_)||_.properties.unshift(r),d=_):(d=ro(a.helper(wy),[wc([r]),_]),E&&E.callee===l_&&(E=x[x.length-2]));e.type===13?E?E.arguments[0]=d:e.props=d:E?E.arguments[0]=d:e.arguments[2]=d}function T5(e,r){let a=!1;if(e.key.type===4){const d=e.key.content;a=r.properties.some(_=>_.key.type===4&&_.key.content===d)}return a}function W1(e,r){return`_${r}_${e.replace(/[^\w]/g,(a,d)=>a==="-"?"_":e.charCodeAt(d).toString())}`}function TM(e){return e.type===14&&e.callee===Vb?e.arguments[1].returns:e}function Gb(e,{helper:r,removeHelper:a,inSSR:d}){e.isBlock||(e.isBlock=!0,a(R0(d,e.isComponent)),r(Qf),r(O0(d,e.isComponent)))}function E5(e,r){const a=r.options?r.options.compatConfig:r.compatConfig,d=a&&a[e];return e==="MODE"?d||3:d}function Wf(e,r){const a=E5("MODE",r),d=E5(e,r);return a===3?d===!0:d!==!1}function H1(e,r,a,...d){return Wf(e,r)}const EM=/&(gt|lt|amp|apos|quot);/g,SM={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},S5={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:ny,isPreTag:ny,isCustomElement:ny,decodeEntities:e=>e.replace(EM,(r,a)=>SM[a]),onError:Ab,onWarn:l6,comments:!1};function CM(e,r={}){const a=MM(e,r),d=ql(a);return hM(qb(a,0,[]),Ec(a,d))}function MM(e,r){const a=Er({},S5);let d;for(d in r)a[d]=r[d]===void 0?S5[d]:r[d];return{options:a,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:a.onWarn}}function qb(e,r,a){const d=f2(a),_=d?d.ns:0,x=[];for(;!zM(e,r,a);){const o=e.source;let D;if(r===0||r===1){if(!e.inVPre&&ga(o,e.options.delimiters[0]))D=RM(e,r);else if(r===0&&o[0]==="<")if(o.length===1)Lr(e,5,1);else if(o[1]==="!")ga(o,"<!--")?D=IM(e):ga(o,"<!DOCTYPE")?D=x1(e):ga(o,"<![CDATA[")?_!==0?D=AM(e,a):(Lr(e,1),D=x1(e)):(Lr(e,11),D=x1(e));else if(o[1]==="/")if(o.length===2)Lr(e,5,2);else if(o[2]===">"){Lr(e,14,2),wo(e,3);continue}else if(/[a-z]/i.test(o[2])){Lr(e,23),w3(e,1,d);continue}else Lr(e,12,2),D=x1(e);else/[a-z]/i.test(o[1])?(D=kM(e,a),Wf("COMPILER_NATIVE_TEMPLATE",e)&&D&&D.tag==="template"&&!D.props.some(V=>V.type===7&&x6(V.name))&&(D=D.children)):o[1]==="?"?(Lr(e,21,1),D=x1(e)):Lr(e,12,1)}if(D||(D=OM(e,r)),Ii(D))for(let V=0;V<D.length;V++)C5(x,D[V]);else C5(x,D)}let E=!1;if(r!==2&&r!==1){const o=e.options.whitespace!=="preserve";for(let D=0;D<x.length;D++){const V=x[D];if(V.type===2)if(e.inPre)V.content=V.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(V.content))o&&(V.content=V.content.replace(/[\t\r\n\f ]+/g," "));else{const X=x[D-1],Z=x[D+1];!X||!Z||o&&(X.type===3&&Z.type===3||X.type===3&&Z.type===1||X.type===1&&Z.type===3||X.type===1&&Z.type===1&&/[\r\n]/.test(V.content))?(E=!0,x[D]=null):V.content=" "}else V.type===3&&!e.options.comments&&(E=!0,x[D]=null)}if(e.inPre&&d&&e.options.isPreTag(d.tag)){const D=x[0];D&&D.type===2&&(D.content=D.content.replace(/^\r?\n/,""))}}return E?x.filter(Boolean):x}function C5(e,r){if(r.type===2){const a=f2(e);if(a&&a.type===2&&a.loc.end.offset===r.loc.start.offset){a.content+=r.content,a.loc.end=r.loc.end,a.loc.source+=r.loc.source;return}}e.push(r)}function AM(e,r){wo(e,9);const a=qb(e,3,r);return e.source.length===0?Lr(e,6):wo(e,3),a}function IM(e){const r=ql(e);let a;const d=/--(\!)?>/.exec(e.source);if(!d)a=e.source.slice(4),wo(e,e.source.length),Lr(e,7);else{d.index<=3&&Lr(e,0),d[1]&&Lr(e,10),a=e.source.slice(4,d.index);const _=e.source.slice(0,d.index);let x=1,E=0;for(;(E=_.indexOf("<!--",x))!==-1;)wo(e,E-x+1),E+4<_.length&&Lr(e,16),x=E+1;wo(e,d.index+d[0].length-x+1)}return{type:3,content:a,loc:Ec(e,r)}}function x1(e){const r=ql(e),a=e.source[1]==="?"?1:2;let d;const _=e.source.indexOf(">");return _===-1?(d=e.source.slice(a),wo(e,e.source.length)):(d=e.source.slice(a,_),wo(e,_+1)),{type:3,content:d,loc:Ec(e,r)}}function kM(e,r){const a=e.inPre,d=e.inVPre,_=f2(r),x=w3(e,0,_),E=e.inPre&&!a,o=e.inVPre&&!d;if(x.isSelfClosing||e.options.isVoidTag(x.tag))return E&&(e.inPre=!1),o&&(e.inVPre=!1),x;r.push(x);const D=e.options.getTextMode(x,_),V=qb(e,D,r);r.pop();{const X=x.props.find(Z=>Z.type===6&&Z.name==="inline-template");if(X&&H1("COMPILER_INLINE_TEMPLATE",e,X.loc)){const Z=Ec(e,x.loc.end);X.value={type:2,content:Z.source,loc:Z}}}if(x.children=V,T3(e.source,x.tag))w3(e,1,_);else if(Lr(e,24,0,x.loc.start),e.source.length===0&&x.tag.toLowerCase()==="script"){const X=V[0];X&&ga(X.loc.source,"<!--")&&Lr(e,8)}return x.loc=Ec(e,x.loc.start),E&&(e.inPre=!1),o&&(e.inVPre=!1),x}const x6=cl("if,else,else-if,for,slot");function w3(e,r,a){const d=ql(e),_=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),x=_[1],E=e.options.getNamespace(x,a);wo(e,_[0].length),Z1(e);const o=ql(e),D=e.source;e.options.isPreTag(x)&&(e.inPre=!0);let V=M5(e,r);r===0&&!e.inVPre&&V.some(he=>he.type===7&&he.name==="pre")&&(e.inVPre=!0,Er(e,o),e.source=D,V=M5(e,r).filter(he=>he.name!=="v-pre"));let X=!1;if(e.source.length===0?Lr(e,9):(X=ga(e.source,"/>"),r===1&&X&&Lr(e,4),wo(e,X?2:1)),r===1)return;let Z=0;return e.inVPre||(x==="slot"?Z=2:x==="template"?V.some(he=>he.type===7&&x6(he.name))&&(Z=3):DM(x,V,e)&&(Z=1)),{type:1,ns:E,tag:x,tagType:Z,props:V,isSelfClosing:X,children:[],loc:Ec(e,d),codegenNode:void 0}}function DM(e,r,a){const d=a.options;if(d.isCustomElement(e))return!1;if(e==="component"||/^[A-Z]/.test(e)||_6(e)||d.isBuiltInComponent&&d.isBuiltInComponent(e)||d.isNativeTag&&!d.isNativeTag(e))return!0;for(let _=0;_<r.length;_++){const x=r[_];if(x.type===6){if(x.name==="is"&&x.value){if(x.value.content.startsWith("vue:"))return!0;if(H1("COMPILER_IS_ON_ELEMENT",a,x.loc))return!0}}else{if(x.name==="is")return!0;if(x.name==="bind"&&Nf(x.arg,"is")&&H1("COMPILER_IS_ON_ELEMENT",a,x.loc))return!0}}}function M5(e,r){const a=[],d=new Set;for(;e.source.length>0&&!ga(e.source,">")&&!ga(e.source,"/>");){if(ga(e.source,"/")){Lr(e,22),wo(e,1),Z1(e);continue}r===1&&Lr(e,3);const _=PM(e,d);_.type===6&&_.value&&_.name==="class"&&(_.value.content=_.value.content.replace(/\s+/g," ").trim()),r===0&&a.push(_),/^[^\t\r\n\f />]/.test(e.source)&&Lr(e,15),Z1(e)}return a}function PM(e,r){const a=ql(e),_=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];r.has(_)&&Lr(e,2),r.add(_),_[0]==="="&&Lr(e,19);{const o=/["'<]/g;let D;for(;D=o.exec(_);)Lr(e,17,D.index)}wo(e,_.length);let x;/^[\t\r\n\f ]*=/.test(e.source)&&(Z1(e),wo(e,1),Z1(e),x=LM(e),x||Lr(e,13));const E=Ec(e,a);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(_)){const o=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(_);let D=ga(_,"."),V=o[1]||(D||ga(_,":")?"bind":ga(_,"@")?"on":"slot"),X;if(o[2]){const he=V==="slot",Se=_.lastIndexOf(o[2]),_e=Ec(e,A5(e,a,Se),A5(e,a,Se+o[2].length+(he&&o[3]||"").length));let Re=o[2],nt=!0;Re.startsWith("[")?(nt=!1,Re.endsWith("]")?Re=Re.slice(1,Re.length-1):(Lr(e,27),Re=Re.slice(1))):he&&(Re+=o[3]||""),X={type:4,content:Re,isStatic:nt,constType:nt?3:0,loc:_e}}if(x&&x.isQuoted){const he=x.loc;he.start.offset++,he.start.column++,he.end=Ey(he.start,x.content),he.source=he.source.slice(1,-1)}const Z=o[3]?o[3].slice(1).split("."):[];return D&&Z.push("prop"),V==="bind"&&X&&Z.includes("sync")&&H1("COMPILER_V_BIND_SYNC",e,E,X.loc.source)&&(V="model",Z.splice(Z.indexOf("sync"),1)),{type:7,name:V,exp:x&&{type:4,content:x.content,isStatic:!1,constType:0,loc:x.loc},arg:X,modifiers:Z,loc:E}}return!e.inVPre&&ga(_,"v-")&&Lr(e,26),{type:6,name:_,value:x&&{type:2,content:x.content,loc:x.loc},loc:E}}function LM(e){const r=ql(e);let a;const d=e.source[0],_=d==='"'||d==="'";if(_){wo(e,1);const x=e.source.indexOf(d);x===-1?a=D1(e,e.source.length,4):(a=D1(e,x,4),wo(e,1))}else{const x=/^[^\t\r\n\f >]+/.exec(e.source);if(!x)return;const E=/["'<=`]/g;let o;for(;o=E.exec(x[0]);)Lr(e,18,o.index);a=D1(e,x[0].length,4)}return{content:a,isQuoted:_,loc:Ec(e,r)}}function RM(e,r){const[a,d]=e.options.delimiters,_=e.source.indexOf(d,a.length);if(_===-1){Lr(e,25);return}const x=ql(e);wo(e,a.length);const E=ql(e),o=ql(e),D=_-a.length,V=e.source.slice(0,D),X=D1(e,D,r),Z=X.trim(),he=X.indexOf(Z);he>0&&Sy(E,V,he);const Se=D-(X.length-Z.length-he);return Sy(o,V,Se),wo(e,d.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:Z,loc:Ec(e,E,o)},loc:Ec(e,x)}}function OM(e,r){const a=r===3?["]]>"]:["<",e.options.delimiters[0]];let d=e.source.length;for(let E=0;E<a.length;E++){const o=e.source.indexOf(a[E],1);o!==-1&&d>o&&(d=o)}const _=ql(e);return{type:2,content:D1(e,d,r),loc:Ec(e,_)}}function D1(e,r,a){const d=e.source.slice(0,r);return wo(e,r),a===2||a===3||!d.includes("&")?d:e.options.decodeEntities(d,a===4)}function ql(e){const{column:r,line:a,offset:d}=e;return{column:r,line:a,offset:d}}function Ec(e,r,a){return a=a||ql(e),{start:r,end:a,source:e.originalSource.slice(r.offset,a.offset)}}function f2(e){return e[e.length-1]}function ga(e,r){return e.startsWith(r)}function wo(e,r){const{source:a}=e;Sy(e,a,r),e.source=a.slice(r)}function Z1(e){const r=/^[\t\r\n\f ]+/.exec(e.source);r&&wo(e,r[0].length)}function A5(e,r,a){return Ey(r,e.originalSource.slice(r.offset,a),a)}function Lr(e,r,a,d=ql(e)){a&&(d.offset+=a,d.column+=a),e.options.onError(vs(r,{start:d,end:d,source:""}))}function zM(e,r,a){const d=e.source;switch(r){case 0:if(ga(d,"</")){for(let _=a.length-1;_>=0;--_)if(T3(d,a[_].tag))return!0}break;case 1:case 2:{const _=f2(a);if(_&&T3(d,_.tag))return!0;break}case 3:if(ga(d,"]]>"))return!0;break}return!d}function T3(e,r){return ga(e,"</")&&e.slice(2,2+r.length).toLowerCase()===r.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+r.length]||">")}function BM(e,r){oy(e,r,b6(e,e.children[0]))}function b6(e,r){const{children:a}=e;return a.length===1&&r.type===1&&!My(r)}function oy(e,r,a=!1){const{children:d}=e,_=d.length;let x=0;for(let E=0;E<d.length;E++){const o=d[E];if(o.type===1&&o.tagType===0){const D=a?0:Tc(o,r);if(D>0){if(D>=2){o.codegenNode.patchFlag=-1+"",o.codegenNode=r.hoist(o.codegenNode),x++;continue}}else{const V=o.codegenNode;if(V.type===13){const X=S6(V);if((!X||X===512||X===1)&&T6(o,r)>=2){const Z=E6(o);Z&&(V.props=r.hoist(Z))}V.dynamicProps&&(V.dynamicProps=r.hoist(V.dynamicProps))}}}if(o.type===1){const D=o.tagType===1;D&&r.scopes.vSlot++,oy(o,r),D&&r.scopes.vSlot--}else if(o.type===11)oy(o,r,o.children.length===1);else if(o.type===9)for(let D=0;D<o.branches.length;D++)oy(o.branches[D],r,o.branches[D].children.length===1)}x&&r.transformHoist&&r.transformHoist(d,r,e),x&&x===_&&e.type===1&&e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&Ii(e.codegenNode.children)&&(e.codegenNode.children=r.hoist(c_(e.codegenNode.children)))}function Tc(e,r){const{constantCache:a}=r;switch(e.type){case 1:if(e.tagType!==0)return 0;const d=a.get(e);if(d!==void 0)return d;const _=e.codegenNode;if(_.type!==13||_.isBlock&&e.tag!=="svg"&&e.tag!=="foreignObject")return 0;if(S6(_))return a.set(e,0),0;{let o=3;const D=T6(e,r);if(D===0)return a.set(e,0),0;D<o&&(o=D);for(let V=0;V<e.children.length;V++){const X=Tc(e.children[V],r);if(X===0)return a.set(e,0),0;X<o&&(o=X)}if(o>1)for(let V=0;V<e.props.length;V++){const X=e.props[V];if(X.type===7&&X.name==="bind"&&X.exp){const Z=Tc(X.exp,r);if(Z===0)return a.set(e,0),0;Z<o&&(o=Z)}}if(_.isBlock){for(let V=0;V<e.props.length;V++)if(e.props[V].type===7)return a.set(e,0),0;r.removeHelper(Qf),r.removeHelper(O0(r.inSSR,_.isComponent)),_.isBlock=!1,r.helper(R0(r.inSSR,_.isComponent))}return a.set(e,o),o}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return Tc(e.content,r);case 4:return e.constType;case 8:let E=3;for(let o=0;o<e.children.length;o++){const D=e.children[o];if(In(D)||Mh(D))continue;const V=Tc(D,r);if(V===0)return 0;V<E&&(E=V)}return E;default:return 0}}const FM=new Set([Fb,Nb,G1,l_]);function w6(e,r){if(e.type===14&&!In(e.callee)&&FM.has(e.callee)){const a=e.arguments[0];if(a.type===4)return Tc(a,r);if(a.type===14)return w6(a,r)}return 0}function T6(e,r){let a=3;const d=E6(e);if(d&&d.type===15){const{properties:_}=d;for(let x=0;x<_.length;x++){const{key:E,value:o}=_[x],D=Tc(E,r);if(D===0)return D;D<a&&(a=D);let V;if(o.type===4?V=Tc(o,r):o.type===14?V=w6(o,r):V=0,V===0)return V;V<a&&(a=V)}}return a}function E6(e){const r=e.codegenNode;if(r.type===13)return r.props}function S6(e){const r=e.patchFlag;return r?parseInt(r,10):void 0}function NM(e,{filename:r="",prefixIdentifiers:a=!1,hoistStatic:d=!1,cacheHandlers:_=!1,nodeTransforms:x=[],directiveTransforms:E={},transformHoist:o=null,isBuiltInComponent:D=Fa,isCustomElement:V=Fa,expressionPlugins:X=[],scopeId:Z=null,slotted:he=!0,ssr:Se=!1,inSSR:_e=!1,ssrCssVars:Re="",bindingMetadata:nt=Rr,inline:ke=!1,isTS:Le=!1,onError:$e=Ab,onWarn:Et=l6,compatConfig:Fe}){const z=r.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),Lt={selfName:z&&ip(ta(z[1])),prefixIdentifiers:a,hoistStatic:d,cacheHandlers:_,nodeTransforms:x,directiveTransforms:E,transformHoist:o,isBuiltInComponent:D,isCustomElement:V,expressionPlugins:X,scopeId:Z,slotted:he,ssr:Se,inSSR:_e,ssrCssVars:Re,bindingMetadata:nt,inline:ke,isTS:Le,onError:$e,onWarn:Et,compatConfig:Fe,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(ot){const bt=Lt.helpers.get(ot)||0;return Lt.helpers.set(ot,bt+1),ot},removeHelper(ot){const bt=Lt.helpers.get(ot);if(bt){const Ht=bt-1;Ht?Lt.helpers.set(ot,Ht):Lt.helpers.delete(ot)}},helperString(ot){return`_${P0[Lt.helper(ot)]}`},replaceNode(ot){Lt.parent.children[Lt.childIndex]=Lt.currentNode=ot},removeNode(ot){const bt=Lt.parent.children,Ht=ot?bt.indexOf(ot):Lt.currentNode?Lt.childIndex:-1;!ot||ot===Lt.currentNode?(Lt.currentNode=null,Lt.onNodeRemoved()):Lt.childIndex>Ht&&(Lt.childIndex--,Lt.onNodeRemoved()),Lt.parent.children.splice(Ht,1)},onNodeRemoved:()=>{},addIdentifiers(ot){},removeIdentifiers(ot){},hoist(ot){In(ot)&&(ot=Bn(ot)),Lt.hoists.push(ot);const bt=Bn(`_hoisted_${Lt.hoists.length}`,!1,ot.loc,2);return bt.hoisted=ot,bt},cache(ot,bt=!1){return fM(Lt.cached++,ot,bt)}};return Lt.filters=new Set,Lt}function UM(e,r){const a=NM(e,r);p2(e,a),r.hoistStatic&&BM(e,a),r.ssr||jM(e,a),e.helpers=[...a.helpers.keys()],e.components=[...a.components],e.directives=[...a.directives],e.imports=a.imports,e.hoists=a.hoists,e.temps=a.temps,e.cached=a.cached,e.filters=[...a.filters]}function jM(e,r){const{helper:a}=r,{children:d}=e;if(d.length===1){const _=d[0];if(b6(e,_)&&_.codegenNode){const x=_.codegenNode;x.type===13&&Gb(x,r),e.codegenNode=x}else e.codegenNode=_}else if(d.length>1){let _=64;e.codegenNode=q1(r,a($1),void 0,e.children,_+"",void 0,void 0,!0,void 0,!1)}}function VM(e,r){let a=0;const d=()=>{a--};for(;a<e.children.length;a++){const _=e.children[a];In(_)||(r.parent=e,r.childIndex=a,r.onNodeRemoved=d,p2(_,r))}}function p2(e,r){r.currentNode=e;const{nodeTransforms:a}=r,d=[];for(let x=0;x<a.length;x++){const E=a[x](e,r);if(E&&(Ii(E)?d.push(...E):d.push(E)),r.currentNode)e=r.currentNode;else return}switch(e.type){case 3:r.ssr||r.helper(a_);break;case 5:r.ssr||r.helper(d2);break;case 9:for(let x=0;x<e.branches.length;x++)p2(e.branches[x],r);break;case 10:case 11:case 1:case 0:VM(e,r);break}r.currentNode=e;let _=d.length;for(;_--;)d[_]()}function C6(e,r){const a=In(e)?d=>d===e:d=>e.test(d);return(d,_)=>{if(d.type===1){const{props:x}=d;if(d.tagType===3&&x.some(bM))return;const E=[];for(let o=0;o<x.length;o++){const D=x[o];if(D.type===7&&a(D.name)){x.splice(o,1),o--;const V=r(d,D,_);V&&E.push(V)}}return E}}}const m2="/*#__PURE__*/",M6=e=>`${P0[e]}: _${P0[e]}`;function $M(e,{mode:r="function",prefixIdentifiers:a=r==="module",sourceMap:d=!1,filename:_="template.vue.html",scopeId:x=null,optimizeImports:E=!1,runtimeGlobalName:o="Vue",runtimeModuleName:D="vue",ssrRuntimeModuleName:V="vue/server-renderer",ssr:X=!1,isTS:Z=!1,inSSR:he=!1}){const Se={mode:r,prefixIdentifiers:a,sourceMap:d,filename:_,scopeId:x,optimizeImports:E,runtimeGlobalName:o,runtimeModuleName:D,ssrRuntimeModuleName:V,ssr:X,isTS:Z,inSSR:he,source:e.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(Re){return`_${P0[Re]}`},push(Re,nt){Se.code+=Re},indent(){_e(++Se.indentLevel)},deindent(Re=!1){Re?--Se.indentLevel:_e(--Se.indentLevel)},newline(){_e(Se.indentLevel)}};function _e(Re){Se.push(`
`+"  ".repeat(Re))}return Se}function GM(e,r={}){const a=$M(e,r);r.onContextCreated&&r.onContextCreated(a);const{mode:d,push:_,prefixIdentifiers:x,indent:E,deindent:o,newline:D,scopeId:V,ssr:X}=a,Z=e.helpers.length>0,he=!x&&d!=="module";qM(e,a);const _e=X?"ssrRender":"render",nt=(X?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(_(`function ${_e}(${nt}) {`),E(),he&&(_("with (_ctx) {"),E(),Z&&(_(`const { ${e.helpers.map(M6).join(", ")} } = _Vue`),_(`
`),D())),e.components.length&&(Ox(e.components,"component",a),(e.directives.length||e.temps>0)&&D()),e.directives.length&&(Ox(e.directives,"directive",a),e.temps>0&&D()),e.filters&&e.filters.length&&(D(),Ox(e.filters,"filter",a),D()),e.temps>0){_("let ");for(let ke=0;ke<e.temps;ke++)_(`${ke>0?", ":""}_temp${ke}`)}return(e.components.length||e.directives.length||e.temps)&&(_(`
`),D()),X||_("return "),e.codegenNode?va(e.codegenNode,a):_("null"),he&&(o(),_("}")),o(),_("}"),{ast:e,code:a.code,preamble:"",map:a.map?a.map.toJSON():void 0}}function qM(e,r){const{ssr:a,prefixIdentifiers:d,push:_,newline:x,runtimeModuleName:E,runtimeGlobalName:o,ssrRuntimeModuleName:D}=r,V=o;if(e.helpers.length>0&&(_(`const _Vue = ${V}
`),e.hoists.length)){const X=[kb,Db,a_,Pb,h6].filter(Z=>e.helpers.includes(Z)).map(M6).join(", ");_(`const { ${X} } = _Vue
`)}WM(e.hoists,r),x(),_("return ")}function Ox(e,r,{helper:a,push:d,newline:_,isTS:x}){const E=a(r==="filter"?Ob:r==="component"?Lb:Rb);for(let o=0;o<e.length;o++){let D=e[o];const V=D.endsWith("__self");V&&(D=D.slice(0,-6)),d(`const ${W1(D,r)} = ${E}(${JSON.stringify(D)}${V?", true":""})${x?"!":""}`),o<e.length-1&&_()}}function WM(e,r){if(!e.length)return;r.pure=!0;const{push:a,newline:d,helper:_,scopeId:x,mode:E}=r;d();for(let o=0;o<e.length;o++){const D=e[o];D&&(a(`const _hoisted_${o+1} = `),va(D,r),d())}r.pure=!1}function Wb(e,r){const a=e.length>3||!1;r.push("["),a&&r.indent(),u_(e,r,a),a&&r.deindent(),r.push("]")}function u_(e,r,a=!1,d=!0){const{push:_,newline:x}=r;for(let E=0;E<e.length;E++){const o=e[E];In(o)?_(o):Ii(o)?Wb(o,r):va(o,r),E<e.length-1&&(a?(d&&_(","),x()):d&&_(", "))}}function va(e,r){if(In(e)){r.push(e);return}if(Mh(e)){r.push(r.helper(e));return}switch(e.type){case 1:case 9:case 11:va(e.codegenNode,r);break;case 2:HM(e,r);break;case 4:A6(e,r);break;case 5:ZM(e,r);break;case 12:va(e.codegenNode,r);break;case 8:I6(e,r);break;case 3:XM(e,r);break;case 13:KM(e,r);break;case 14:QM(e,r);break;case 15:eA(e,r);break;case 17:tA(e,r);break;case 18:iA(e,r);break;case 19:nA(e,r);break;case 20:rA(e,r);break;case 21:u_(e.body,r,!0,!1);break}}function HM(e,r){r.push(JSON.stringify(e.content),e)}function A6(e,r){const{content:a,isStatic:d}=e;r.push(d?JSON.stringify(a):a,e)}function ZM(e,r){const{push:a,helper:d,pure:_}=r;_&&a(m2),a(`${d(d2)}(`),va(e.content,r),a(")")}function I6(e,r){for(let a=0;a<e.children.length;a++){const d=e.children[a];In(d)?r.push(d):va(d,r)}}function YM(e,r){const{push:a}=r;if(e.type===8)a("["),I6(e,r),a("]");else if(e.isStatic){const d=$b(e.content)?e.content:JSON.stringify(e.content);a(d,e)}else a(`[${e.content}]`,e)}function XM(e,r){const{push:a,helper:d,pure:_}=r;_&&a(m2),a(`${d(a_)}(${JSON.stringify(e.content)})`,e)}function KM(e,r){const{push:a,helper:d,pure:_}=r,{tag:x,props:E,children:o,patchFlag:D,dynamicProps:V,directives:X,isBlock:Z,disableTracking:he,isComponent:Se}=e;X&&a(d(zb)+"("),Z&&a(`(${d(Qf)}(${he?"true":""}), `),_&&a(m2);const _e=Z?O0(r.inSSR,Se):R0(r.inSSR,Se);a(d(_e)+"(",e),u_(JM([x,E,o,D,V]),r),a(")"),Z&&a(")"),X&&(a(", "),va(X,r),a(")"))}function JM(e){let r=e.length;for(;r--&&e[r]==null;);return e.slice(0,r+1).map(a=>a||"null")}function QM(e,r){const{push:a,helper:d,pure:_}=r,x=In(e.callee)?e.callee:d(e.callee);_&&a(m2),a(x+"(",e),u_(e.arguments,r),a(")")}function eA(e,r){const{push:a,indent:d,deindent:_,newline:x}=r,{properties:E}=e;if(!E.length){a("{}",e);return}const o=E.length>1||!1;a(o?"{":"{ "),o&&d();for(let D=0;D<E.length;D++){const{key:V,value:X}=E[D];YM(V,r),a(": "),va(X,r),D<E.length-1&&(a(","),x())}o&&_(),a(o?"}":" }")}function tA(e,r){Wb(e.elements,r)}function iA(e,r){const{push:a,indent:d,deindent:_}=r,{params:x,returns:E,body:o,newline:D,isSlot:V}=e;V&&a(`_${P0[jb]}(`),a("(",e),Ii(x)?u_(x,r):x&&va(x,r),a(") => "),(D||o)&&(a("{"),d()),E?(D&&a("return "),Ii(E)?Wb(E,r):va(E,r)):o&&va(o,r),(D||o)&&(_(),a("}")),V&&(e.isNonScopedSlot&&a(", undefined, true"),a(")"))}function nA(e,r){const{test:a,consequent:d,alternate:_,newline:x}=e,{push:E,indent:o,deindent:D,newline:V}=r;if(a.type===4){const Z=!$b(a.content);Z&&E("("),A6(a,r),Z&&E(")")}else E("("),va(a,r),E(")");x&&o(),r.indentLevel++,x||E(" "),E("? "),va(d,r),r.indentLevel--,x&&V(),x||E(" "),E(": ");const X=_.type===19;X||r.indentLevel++,va(_,r),X||r.indentLevel--,x&&D(!0)}function rA(e,r){const{push:a,helper:d,indent:_,deindent:x,newline:E}=r;a(`_cache[${e.index}] || (`),e.isVNode&&(_(),a(`${d(Ty)}(-1),`),E()),a(`_cache[${e.index}] = `),va(e.value,r),e.isVNode&&(a(","),E(),a(`${d(Ty)}(1),`),E(),a(`_cache[${e.index}]`),x()),a(")")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b");const sA=C6(/^(if|else|else-if)$/,(e,r,a)=>oA(e,r,a,(d,_,x)=>{const E=a.parent.children;let o=E.indexOf(d),D=0;for(;o-->=0;){const V=E[o];V&&V.type===9&&(D+=V.branches.length)}return()=>{if(x)d.codegenNode=k5(_,D,a);else{const V=aA(d.codegenNode);V.alternate=k5(_,D+d.branches.length-1,a)}}}));function oA(e,r,a,d){if(r.name!=="else"&&(!r.exp||!r.exp.content.trim())){const _=r.exp?r.exp.loc:e.loc;a.onError(vs(28,r.loc)),r.exp=Bn("true",!1,_)}if(r.name==="if"){const _=I5(e,r),x={type:9,loc:e.loc,branches:[_]};if(a.replaceNode(x),d)return d(x,_,!0)}else{const _=a.parent.children;let x=_.indexOf(e);for(;x-->=-1;){const E=_[x];if(E&&E.type===3){a.removeNode(E);continue}if(E&&E.type===2&&!E.content.trim().length){a.removeNode(E);continue}if(E&&E.type===9){r.name==="else-if"&&E.branches[E.branches.length-1].condition===void 0&&a.onError(vs(30,e.loc)),a.removeNode();const o=I5(e,r);E.branches.push(o);const D=d&&d(E,o,!1);p2(o,a),D&&D(),a.currentNode=null}else a.onError(vs(30,e.loc));break}}}function I5(e,r){const a=e.tagType===3;return{type:10,loc:e.loc,condition:r.name==="else"?void 0:r.exp,children:a&&!xc(e,"for")?e.children:[e],userKey:h2(e,"key"),isTemplateIf:a}}function k5(e,r,a){return e.condition?b3(e.condition,D5(e,r,a),ro(a.helper(a_),['""',"true"])):D5(e,r,a)}function D5(e,r,a){const{helper:d}=a,_=Os("key",Bn(`${r}`,!1,Hl,2)),{children:x}=e,E=x[0];if(x.length!==1||E.type!==1)if(x.length===1&&E.type===11){const D=E.codegenNode;return Ay(D,_,a),D}else{let D=64;return q1(a,d($1),wc([_]),x,D+"",void 0,void 0,!0,!1,!1,e.loc)}else{const D=E.codegenNode,V=TM(D);return V.type===13&&Gb(V,a),Ay(V,_,a),D}}function aA(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const lA=C6("for",(e,r,a)=>{const{helper:d,removeHelper:_}=a;return cA(e,r,a,x=>{const E=ro(d(Bb),[x.source]),o=Cy(e),D=xc(e,"memo"),V=h2(e,"key"),X=V&&(V.type===6?Bn(V.value.content,!0):V.exp),Z=V?Os("key",X):null,he=x.source.type===4&&x.source.constType>0,Se=he?64:V?128:256;return x.codegenNode=q1(a,d($1),void 0,E,Se+"",void 0,void 0,!0,!he,!1,e.loc),()=>{let _e;const{children:Re}=x,nt=Re.length!==1||Re[0].type!==1,ke=My(e)?e:o&&e.children.length===1&&My(e.children[0])?e.children[0]:null;if(ke?(_e=ke.codegenNode,o&&Z&&Ay(_e,Z,a)):nt?_e=q1(a,d($1),Z?wc([Z]):void 0,e.children,64+"",void 0,void 0,!0,void 0,!1):(_e=Re[0].codegenNode,o&&Z&&Ay(_e,Z,a),_e.isBlock!==!he&&(_e.isBlock?(_(Qf),_(O0(a.inSSR,_e.isComponent))):_(R0(a.inSSR,_e.isComponent))),_e.isBlock=!he,_e.isBlock?(d(Qf),d(O0(a.inSSR,_e.isComponent))):d(R0(a.inSSR,_e.isComponent))),D){const Le=L0(E3(x.parseResult,[Bn("_cached")]));Le.body=pM([Zc(["const _memo = (",D.exp,")"]),Zc(["if (_cached",...X?[" && _cached.key === ",X]:[],` && ${a.helperString(m6)}(_cached, _memo)) return _cached`]),Zc(["const _item = ",_e]),Bn("_item.memo = _memo"),Bn("return _item")]),E.arguments.push(Le,Bn("_cache"),Bn(String(a.cached++)))}else E.arguments.push(L0(E3(x.parseResult),_e,!0))}})});function cA(e,r,a,d){if(!r.exp){a.onError(vs(31,r.loc));return}const _=k6(r.exp);if(!_){a.onError(vs(32,r.loc));return}const{addIdentifiers:x,removeIdentifiers:E,scopes:o}=a,{source:D,value:V,key:X,index:Z}=_,he={type:11,loc:r.loc,source:D,valueAlias:V,keyAlias:X,objectIndexAlias:Z,parseResult:_,children:Cy(e)?e.children:[e]};a.replaceNode(he),o.vFor++;const Se=d&&d(he);return()=>{o.vFor--,Se&&Se()}}const uA=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,P5=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,dA=/^\(|\)$/g;function k6(e,r){const a=e.loc,d=e.content,_=d.match(uA);if(!_)return;const[,x,E]=_,o={source:Hg(a,E.trim(),d.indexOf(E,x.length)),value:void 0,key:void 0,index:void 0};let D=x.trim().replace(dA,"").trim();const V=x.indexOf(D),X=D.match(P5);if(X){D=D.replace(P5,"").trim();const Z=X[1].trim();let he;if(Z&&(he=d.indexOf(Z,V+D.length),o.key=Hg(a,Z,he)),X[2]){const Se=X[2].trim();Se&&(o.index=Hg(a,Se,d.indexOf(Se,o.key?he+Z.length:V+D.length)))}}return D&&(o.value=Hg(a,D,V)),o}function Hg(e,r,a){return Bn(r,!1,y6(e,a,r.length))}function E3({value:e,key:r,index:a},d=[]){return hA([e,r,a,...d])}function hA(e){let r=e.length;for(;r--&&!e[r];);return e.slice(0,r+1).map((a,d)=>a||Bn("_".repeat(d+1),!1))}const L5=Bn("undefined",!1),fA=(e,r)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const a=xc(e,"slot");if(a)return a.exp,r.scopes.vSlot++,()=>{r.scopes.vSlot--}}},pA=(e,r,a)=>L0(e,r,!1,!0,r.length?r[0].loc:a);function mA(e,r,a=pA){r.helper(jb);const{children:d,loc:_}=e,x=[],E=[];let o=r.scopes.vSlot>0||r.scopes.vFor>0;const D=xc(e,"slot",!0);if(D){const{arg:nt,exp:ke}=D;nt&&!ll(nt)&&(o=!0),x.push(Os(nt||Bn("default",!0),a(ke,d,_)))}let V=!1,X=!1;const Z=[],he=new Set;let Se=0;for(let nt=0;nt<d.length;nt++){const ke=d[nt];let Le;if(!Cy(ke)||!(Le=xc(ke,"slot",!0))){ke.type!==3&&Z.push(ke);continue}if(D){r.onError(vs(37,Le.loc));break}V=!0;const{children:$e,loc:Et}=ke,{arg:Fe=Bn("default",!0),exp:z,loc:Lt}=Le;let ot;ll(Fe)?ot=Fe?Fe.content:"default":o=!0;const bt=a(z,$e,Et);let Ht,Yt,Wt;if(Ht=xc(ke,"if"))o=!0,E.push(b3(Ht.exp,Zg(Fe,bt,Se++),L5));else if(Yt=xc(ke,/^else(-if)?$/,!0)){let hi=nt,ri;for(;hi--&&(ri=d[hi],ri.type===3););if(ri&&Cy(ri)&&xc(ri,"if")){d.splice(nt,1),nt--;let fi=E[E.length-1];for(;fi.alternate.type===19;)fi=fi.alternate;fi.alternate=Yt.exp?b3(Yt.exp,Zg(Fe,bt,Se++),L5):Zg(Fe,bt,Se++)}else r.onError(vs(30,Yt.loc))}else if(Wt=xc(ke,"for")){o=!0;const hi=Wt.parseResult||k6(Wt.exp);hi?E.push(ro(r.helper(Bb),[hi.source,L0(E3(hi),Zg(Fe,bt),!0)])):r.onError(vs(32,Wt.loc))}else{if(ot){if(he.has(ot)){r.onError(vs(38,Lt));continue}he.add(ot),ot==="default"&&(X=!0)}x.push(Os(Fe,bt))}}if(!D){const nt=(ke,Le)=>{const $e=a(ke,Le,_);return r.compatConfig&&($e.isNonScopedSlot=!0),Os("default",$e)};V?Z.length&&Z.some(ke=>D6(ke))&&(X?r.onError(vs(39,Z[0].loc)):x.push(nt(void 0,Z))):x.push(nt(void 0,d))}const _e=o?2:ay(e.children)?3:1;let Re=wc(x.concat(Os("_",Bn(_e+"",!1))),_);return E.length&&(Re=ro(r.helper(p6),[Re,c_(E)])),{slots:Re,hasDynamicSlots:o}}function Zg(e,r,a){const d=[Os("name",e),Os("fn",r)];return a!=null&&d.push(Os("key",Bn(String(a),!0))),wc(d)}function ay(e){for(let r=0;r<e.length;r++){const a=e[r];switch(a.type){case 1:if(a.tagType===2||ay(a.children))return!0;break;case 9:if(ay(a.branches))return!0;break;case 10:case 11:if(ay(a.children))return!0;break}}return!1}function D6(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():D6(e.content)}const P6=new WeakMap,_A=(e,r)=>function(){if(e=r.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:d,props:_}=e,x=e.tagType===1;let E=x?gA(e,r):`"${d}"`;const o=Nr(E)&&E.callee===by;let D,V,X,Z=0,he,Se,_e,Re=o||E===k1||E===Ib||!x&&(d==="svg"||d==="foreignObject");if(_.length>0){const nt=L6(e,r,void 0,x,o);D=nt.props,Z=nt.patchFlag,Se=nt.dynamicPropNames;const ke=nt.directives;_e=ke&&ke.length?c_(ke.map(Le=>vA(Le,r))):void 0,nt.shouldUseBlock&&(Re=!0)}if(e.children.length>0)if(E===xy&&(Re=!0,Z|=1024),x&&E!==k1&&E!==xy){const{slots:ke,hasDynamicSlots:Le}=mA(e,r);V=ke,Le&&(Z|=1024)}else if(e.children.length===1&&E!==k1){const ke=e.children[0],Le=ke.type,$e=Le===5||Le===8;$e&&Tc(ke,r)===0&&(Z|=1),$e||Le===2?V=ke:V=e.children}else V=e.children;Z!==0&&(X=String(Z),Se&&Se.length&&(he=xA(Se))),e.codegenNode=q1(r,E,D,V,X,he,_e,!!Re,!1,x,e.loc)};function gA(e,r,a=!1){let{tag:d}=e;const _=S3(d),x=h2(e,"is");if(x)if(_||Wf("COMPILER_IS_ON_ELEMENT",r)){const D=x.type===6?x.value&&Bn(x.value.content,!0):x.exp;if(D)return ro(r.helper(by),[D])}else x.type===6&&x.value.content.startsWith("vue:")&&(d=x.value.content.slice(4));const E=!_&&xc(e,"is");if(E&&E.exp)return ro(r.helper(by),[E.exp]);const o=_6(d)||r.isBuiltInComponent(d);return o?(a||r.helper(o),o):(r.helper(Lb),r.components.add(d),W1(d,"component"))}function L6(e,r,a=e.props,d,_,x=!1){const{tag:E,loc:o,children:D}=e;let V=[];const X=[],Z=[],he=D.length>0;let Se=!1,_e=0,Re=!1,nt=!1,ke=!1,Le=!1,$e=!1,Et=!1;const Fe=[],z=bt=>{V.length&&(X.push(wc(R5(V),o)),V=[]),bt&&X.push(bt)},Lt=({key:bt,value:Ht})=>{if(ll(bt)){const Yt=bt.content,Wt=ep(Yt);if(Wt&&(!d||_)&&Yt.toLowerCase()!=="onclick"&&Yt!=="onUpdate:modelValue"&&!jf(Yt)&&(Le=!0),Wt&&jf(Yt)&&(Et=!0),Ht.type===20||(Ht.type===4||Ht.type===8)&&Tc(Ht,r)>0)return;Yt==="ref"?Re=!0:Yt==="class"?nt=!0:Yt==="style"?ke=!0:Yt!=="key"&&!Fe.includes(Yt)&&Fe.push(Yt),d&&(Yt==="class"||Yt==="style")&&!Fe.includes(Yt)&&Fe.push(Yt)}else $e=!0};for(let bt=0;bt<a.length;bt++){const Ht=a[bt];if(Ht.type===6){const{loc:Yt,name:Wt,value:hi}=Ht;let ri=!0;if(Wt==="ref"&&(Re=!0,r.scopes.vFor>0&&V.push(Os(Bn("ref_for",!0),Bn("true")))),Wt==="is"&&(S3(E)||hi&&hi.content.startsWith("vue:")||Wf("COMPILER_IS_ON_ELEMENT",r)))continue;V.push(Os(Bn(Wt,!0,y6(Yt,0,Wt.length)),Bn(hi?hi.content:"",ri,hi?hi.loc:Yt)))}else{const{name:Yt,arg:Wt,exp:hi,loc:ri}=Ht,fi=Yt==="bind",pn=Yt==="on";if(Yt==="slot"){d||r.onError(vs(40,ri));continue}if(Yt==="once"||Yt==="memo"||Yt==="is"||fi&&Nf(Wt,"is")&&(S3(E)||Wf("COMPILER_IS_ON_ELEMENT",r))||pn&&x)continue;if((fi&&Nf(Wt,"key")||pn&&he&&Nf(Wt,"vue:before-update"))&&(Se=!0),fi&&Nf(Wt,"ref")&&r.scopes.vFor>0&&V.push(Os(Bn("ref_for",!0),Bn("true"))),!Wt&&(fi||pn)){if($e=!0,hi)if(fi){if(z(),Wf("COMPILER_V_BIND_OBJECT_ORDER",r)){X.unshift(hi);continue}X.push(hi)}else z({type:14,loc:ri,callee:r.helper(Ub),arguments:d?[hi]:[hi,"true"]});else r.onError(vs(fi?34:35,ri));continue}const mn=r.directiveTransforms[Yt];if(mn){const{props:tn,needRuntime:ts}=mn(Ht,e,r);!x&&tn.forEach(Lt),pn&&Wt&&!ll(Wt)?z(wc(tn,o)):V.push(...tn),ts&&(Z.push(Ht),Mh(ts)&&P6.set(Ht,ts))}else dS(Yt)||(Z.push(Ht),he&&(Se=!0))}}let ot;if(X.length?(z(),X.length>1?ot=ro(r.helper(wy),X,o):ot=X[0]):V.length&&(ot=wc(R5(V),o)),$e?_e|=16:(nt&&!d&&(_e|=2),ke&&!d&&(_e|=4),Fe.length&&(_e|=8),Le&&(_e|=32)),!Se&&(_e===0||_e===32)&&(Re||Et||Z.length>0)&&(_e|=512),!r.inSSR&&ot)switch(ot.type){case 15:let bt=-1,Ht=-1,Yt=!1;for(let ri=0;ri<ot.properties.length;ri++){const fi=ot.properties[ri].key;ll(fi)?fi.content==="class"?bt=ri:fi.content==="style"&&(Ht=ri):fi.isHandlerKey||(Yt=!0)}const Wt=ot.properties[bt],hi=ot.properties[Ht];Yt?ot=ro(r.helper(G1),[ot]):(Wt&&!ll(Wt.value)&&(Wt.value=ro(r.helper(Fb),[Wt.value])),hi&&(ke||hi.value.type===4&&hi.value.content.trim()[0]==="["||hi.value.type===17)&&(hi.value=ro(r.helper(Nb),[hi.value])));break;case 14:break;default:ot=ro(r.helper(G1),[ro(r.helper(l_),[ot])]);break}return{props:ot,directives:Z,patchFlag:_e,dynamicPropNames:Fe,shouldUseBlock:Se}}function R5(e){const r=new Map,a=[];for(let d=0;d<e.length;d++){const _=e[d];if(_.key.type===8||!_.key.isStatic){a.push(_);continue}const x=_.key.content,E=r.get(x);E?(x==="style"||x==="class"||ep(x))&&yA(E,_):(r.set(x,_),a.push(_))}return a}function yA(e,r){e.value.type===17?e.value.elements.push(r.value):e.value=c_([e.value,r.value],e.loc)}function vA(e,r){const a=[],d=P6.get(e);d?a.push(r.helperString(d)):(r.helper(Rb),r.directives.add(e.name),a.push(W1(e.name,"directive")));const{loc:_}=e;if(e.exp&&a.push(e.exp),e.arg&&(e.exp||a.push("void 0"),a.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||a.push("void 0"),a.push("void 0"));const x=Bn("true",!1,_);a.push(wc(e.modifiers.map(E=>Os(E,x)),_))}return c_(a,e.loc)}function xA(e){let r="[";for(let a=0,d=e.length;a<d;a++)r+=JSON.stringify(e[a]),a<d-1&&(r+=", ");return r+"]"}function S3(e){return e==="component"||e==="Component"}const bA=e=>{const r=Object.create(null);return a=>r[a]||(r[a]=e(a))},wA=/-(\w)/g,O5=bA(e=>e.replace(wA,(r,a)=>a?a.toUpperCase():"")),TA=(e,r)=>{if(My(e)){const{children:a,loc:d}=e,{slotName:_,slotProps:x}=EA(e,r),E=[r.prefixIdentifiers?"_ctx.$slots":"$slots",_,"{}","undefined","true"];let o=2;x&&(E[2]=x,o=3),a.length&&(E[3]=L0([],a,!1,!1,d),o=4),r.scopeId&&!r.slotted&&(o=5),E.splice(o),e.codegenNode=ro(r.helper(f6),E,d)}};function EA(e,r){let a='"default"',d;const _=[];for(let x=0;x<e.props.length;x++){const E=e.props[x];E.type===6?E.value&&(E.name==="name"?a=JSON.stringify(E.value.content):(E.name=O5(E.name),_.push(E))):E.name==="bind"&&Nf(E.arg,"name")?E.exp&&(a=E.exp):(E.name==="bind"&&E.arg&&ll(E.arg)&&(E.arg.content=O5(E.arg.content)),_.push(E))}if(_.length>0){const{props:x,directives:E}=L6(e,r,_,!1,!1);d=x,E.length&&r.onError(vs(36,E[0].loc))}return{slotName:a,slotProps:d}}const SA=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,R6=(e,r,a,d)=>{const{loc:_,modifiers:x,arg:E}=e;!e.exp&&!x.length&&a.onError(vs(35,_));let o;if(E.type===4)if(E.isStatic){let Z=E.content;Z.startsWith("vue:")&&(Z=`vnode-${Z.slice(4)}`);const he=r.tagType!==0||Z.startsWith("vnode")||!/[A-Z]/.test(Z)?g0(ta(Z)):`on:${Z}`;o=Bn(he,!0,E.loc)}else o=Zc([`${a.helperString(x3)}(`,E,")"]);else o=E,o.children.unshift(`${a.helperString(x3)}(`),o.children.push(")");let D=e.exp;D&&!D.content.trim()&&(D=void 0);let V=a.cacheHandlers&&!D&&!a.inVOnce;if(D){const Z=g6(D.content),he=!(Z||SA.test(D.content)),Se=D.content.includes(";");(he||V&&Z)&&(D=Zc([`${he?"$event":"(...args)"} => ${Se?"{":"("}`,D,Se?"}":")"]))}let X={props:[Os(o,D||Bn("() => {}",!1,_))]};return d&&(X=d(X)),V&&(X.props[0].value=a.cache(X.props[0].value)),X.props.forEach(Z=>Z.key.isHandlerKey=!0),X},CA=(e,r,a)=>{const{exp:d,modifiers:_,loc:x}=e,E=e.arg;return E.type!==4?(E.children.unshift("("),E.children.push(') || ""')):E.isStatic||(E.content=`${E.content} || ""`),_.includes("camel")&&(E.type===4?E.isStatic?E.content=ta(E.content):E.content=`${a.helperString(v3)}(${E.content})`:(E.children.unshift(`${a.helperString(v3)}(`),E.children.push(")"))),a.inSSR||(_.includes("prop")&&z5(E,"."),_.includes("attr")&&z5(E,"^")),!d||d.type===4&&!d.content.trim()?(a.onError(vs(34,x)),{props:[Os(E,Bn("",!0,x))]}):{props:[Os(E,d)]}},z5=(e,r)=>{e.type===4?e.isStatic?e.content=r+e.content:e.content=`\`${r}\${${e.content}}\``:(e.children.unshift(`'${r}' + (`),e.children.push(")"))},MA=(e,r)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const a=e.children;let d,_=!1;for(let x=0;x<a.length;x++){const E=a[x];if(Rx(E)){_=!0;for(let o=x+1;o<a.length;o++){const D=a[o];if(Rx(D))d||(d=a[x]=Zc([E],E.loc)),d.children.push(" + ",D),a.splice(o,1),o--;else{d=void 0;break}}}}if(!(!_||a.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(x=>x.type===7&&!r.directiveTransforms[x.name])&&e.tag!=="template")))for(let x=0;x<a.length;x++){const E=a[x];if(Rx(E)||E.type===8){const o=[];(E.type!==2||E.content!==" ")&&o.push(E),!r.ssr&&Tc(E,r)===0&&o.push(1+""),a[x]={type:12,content:E,loc:E.loc,codegenNode:ro(r.helper(Pb),o)}}}}},B5=new WeakSet,AA=(e,r)=>{if(e.type===1&&xc(e,"once",!0))return B5.has(e)||r.inVOnce?void 0:(B5.add(e),r.inVOnce=!0,r.helper(Ty),()=>{r.inVOnce=!1;const a=r.currentNode;a.codegenNode&&(a.codegenNode=r.cache(a.codegenNode,!0))})},O6=(e,r,a)=>{const{exp:d,arg:_}=e;if(!d)return a.onError(vs(41,e.loc)),Yg();const x=d.loc.source,E=d.type===4?d.content:x,o=a.bindingMetadata[x];if(o==="props"||o==="props-aliased")return a.onError(vs(44,d.loc)),Yg();const D=!1;if(!E.trim()||!g6(E)&&!D)return a.onError(vs(42,d.loc)),Yg();const V=_||Bn("modelValue",!0),X=_?ll(_)?`onUpdate:${_.content}`:Zc(['"onUpdate:" + ',_]):"onUpdate:modelValue";let Z;const he=a.isTS?"($event: any)":"$event";Z=Zc([`${he} => ((`,d,") = $event)"]);const Se=[Os(V,e.exp),Os(X,Z)];if(e.modifiers.length&&r.tagType===1){const _e=e.modifiers.map(nt=>($b(nt)?nt:JSON.stringify(nt))+": true").join(", "),Re=_?ll(_)?`${_.content}Modifiers`:Zc([_,' + "Modifiers"']):"modelModifiers";Se.push(Os(Re,Bn(`{ ${_e} }`,!1,e.loc,2)))}return Yg(Se)};function Yg(e=[]){return{props:e}}const IA=/[\w).+\-_$\]]/,kA=(e,r)=>{Wf("COMPILER_FILTER",r)&&(e.type===5&&Iy(e.content,r),e.type===1&&e.props.forEach(a=>{a.type===7&&a.name!=="for"&&a.exp&&Iy(a.exp,r)}))};function Iy(e,r){if(e.type===4)F5(e,r);else for(let a=0;a<e.children.length;a++){const d=e.children[a];typeof d=="object"&&(d.type===4?F5(d,r):d.type===8?Iy(e,r):d.type===5&&Iy(d.content,r))}}function F5(e,r){const a=e.content;let d=!1,_=!1,x=!1,E=!1,o=0,D=0,V=0,X=0,Z,he,Se,_e,Re=[];for(Se=0;Se<a.length;Se++)if(he=Z,Z=a.charCodeAt(Se),d)Z===39&&he!==92&&(d=!1);else if(_)Z===34&&he!==92&&(_=!1);else if(x)Z===96&&he!==92&&(x=!1);else if(E)Z===47&&he!==92&&(E=!1);else if(Z===124&&a.charCodeAt(Se+1)!==124&&a.charCodeAt(Se-1)!==124&&!o&&!D&&!V)_e===void 0?(X=Se+1,_e=a.slice(0,Se).trim()):nt();else{switch(Z){case 34:_=!0;break;case 39:d=!0;break;case 96:x=!0;break;case 40:V++;break;case 41:V--;break;case 91:D++;break;case 93:D--;break;case 123:o++;break;case 125:o--;break}if(Z===47){let ke=Se-1,Le;for(;ke>=0&&(Le=a.charAt(ke),Le===" ");ke--);(!Le||!IA.test(Le))&&(E=!0)}}_e===void 0?_e=a.slice(0,Se).trim():X!==0&&nt();function nt(){Re.push(a.slice(X,Se).trim()),X=Se+1}if(Re.length){for(Se=0;Se<Re.length;Se++)_e=DA(_e,Re[Se],r);e.content=_e}}function DA(e,r,a){a.helper(Ob);const d=r.indexOf("(");if(d<0)return a.filters.add(r),`${W1(r,"filter")}(${e})`;{const _=r.slice(0,d),x=r.slice(d+1);return a.filters.add(_),`${W1(_,"filter")}(${e}${x!==")"?","+x:x}`}}const N5=new WeakSet,PA=(e,r)=>{if(e.type===1){const a=xc(e,"memo");return!a||N5.has(e)?void 0:(N5.add(e),()=>{const d=e.codegenNode||r.currentNode.codegenNode;d&&d.type===13&&(e.tagType!==1&&Gb(d,r),e.codegenNode=ro(r.helper(Vb),[a.exp,L0(void 0,d),"_cache",String(r.cached++)]))})}};function LA(e){return[[AA,sA,PA,lA,kA,TA,_A,fA,MA],{on:R6,bind:CA,model:O6}]}function RA(e,r={}){const a=r.onError||Ab,d=r.mode==="module";r.prefixIdentifiers===!0?a(vs(47)):d&&a(vs(48));const _=!1;r.cacheHandlers&&a(vs(49)),r.scopeId&&!d&&a(vs(50));const x=In(e)?CM(e,r):e,[E,o]=LA();return UM(x,Er({},r,{prefixIdentifiers:_,nodeTransforms:[...E,...r.nodeTransforms||[]],directiveTransforms:Er({},o,r.directiveTransforms||{})})),GM(x,Er({},r,{prefixIdentifiers:_}))}const OA=()=>({props:[]}),z6=Symbol(""),B6=Symbol(""),F6=Symbol(""),N6=Symbol(""),C3=Symbol(""),U6=Symbol(""),j6=Symbol(""),V6=Symbol(""),$6=Symbol(""),G6=Symbol("");dM({[z6]:"vModelRadio",[B6]:"vModelCheckbox",[F6]:"vModelText",[N6]:"vModelSelect",[C3]:"vModelDynamic",[U6]:"withModifiers",[j6]:"withKeys",[V6]:"vShow",[$6]:"Transition",[G6]:"TransitionGroup"});let c0;function zA(e,r=!1){return c0||(c0=document.createElement("div")),r?(c0.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,c0.children[0].getAttribute("foo")):(c0.innerHTML=e,c0.textContent)}const BA=cl("style,iframe,script,noscript",!0),FA={isVoidTag:rS,isNativeTag:e=>iS(e)||nS(e),isPreTag:e=>e==="pre",decodeEntities:zA,isBuiltInComponent:e=>{if(f0(e,"Transition"))return $6;if(f0(e,"TransitionGroup"))return G6},getNamespace(e,r){let a=r?r.ns:0;if(r&&a===2)if(r.tag==="annotation-xml"){if(e==="svg")return 1;r.props.some(d=>d.type===6&&d.name==="encoding"&&d.value!=null&&(d.value.content==="text/html"||d.value.content==="application/xhtml+xml"))&&(a=0)}else/^m(?:[ions]|text)$/.test(r.tag)&&e!=="mglyph"&&e!=="malignmark"&&(a=0);else r&&a===1&&(r.tag==="foreignObject"||r.tag==="desc"||r.tag==="title")&&(a=0);if(a===0){if(e==="svg")return 1;if(e==="math")return 2}return a},getTextMode({tag:e,ns:r}){if(r===0){if(e==="textarea"||e==="title")return 1;if(BA(e))return 2}return 0}},NA=e=>{e.type===1&&e.props.forEach((r,a)=>{r.type===6&&r.name==="style"&&r.value&&(e.props[a]={type:7,name:"bind",arg:Bn("style",!0,r.loc),exp:UA(r.value.content,r.loc),modifiers:[],loc:r.loc})})},UA=(e,r)=>{const a=C8(e);return Bn(JSON.stringify(a),!1,r,3)};function bd(e,r){return vs(e,r)}const jA=(e,r,a)=>{const{exp:d,loc:_}=e;return d||a.onError(bd(51,_)),r.children.length&&(a.onError(bd(52,_)),r.children.length=0),{props:[Os(Bn("innerHTML",!0,_),d||Bn("",!0))]}},VA=(e,r,a)=>{const{exp:d,loc:_}=e;return d||a.onError(bd(53,_)),r.children.length&&(a.onError(bd(54,_)),r.children.length=0),{props:[Os(Bn("textContent",!0),d?Tc(d,a)>0?d:ro(a.helperString(d2),[d],_):Bn("",!0))]}},$A=(e,r,a)=>{const d=O6(e,r,a);if(!d.props.length||r.tagType===1)return d;e.arg&&a.onError(bd(56,e.arg.loc));const{tag:_}=r,x=a.isCustomElement(_);if(_==="input"||_==="textarea"||_==="select"||x){let E=F6,o=!1;if(_==="input"||x){const D=h2(r,"type");if(D){if(D.type===7)E=C3;else if(D.value)switch(D.value.content){case"radio":E=z6;break;case"checkbox":E=B6;break;case"file":o=!0,a.onError(bd(57,e.loc));break}}else xM(r)&&(E=C3)}else _==="select"&&(E=N6);o||(d.needRuntime=a.helper(E))}else a.onError(bd(55,e.loc));return d.props=d.props.filter(E=>!(E.key.type===4&&E.key.content==="modelValue")),d},GA=cl("passive,once,capture"),qA=cl("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),WA=cl("left,right"),q6=cl("onkeyup,onkeydown,onkeypress",!0),HA=(e,r,a,d)=>{const _=[],x=[],E=[];for(let o=0;o<r.length;o++){const D=r[o];D==="native"&&H1("COMPILER_V_ON_NATIVE",a)||GA(D)?E.push(D):WA(D)?ll(e)?q6(e.content)?_.push(D):x.push(D):(_.push(D),x.push(D)):qA(D)?x.push(D):_.push(D)}return{keyModifiers:_,nonKeyModifiers:x,eventOptionModifiers:E}},U5=(e,r)=>ll(e)&&e.content.toLowerCase()==="onclick"?Bn(r,!0):e.type!==4?Zc(["(",e,`) === "onClick" ? "${r}" : (`,e,")"]):e,ZA=(e,r,a)=>R6(e,r,a,d=>{const{modifiers:_}=e;if(!_.length)return d;let{key:x,value:E}=d.props[0];const{keyModifiers:o,nonKeyModifiers:D,eventOptionModifiers:V}=HA(x,_,a,e.loc);if(D.includes("right")&&(x=U5(x,"onContextmenu")),D.includes("middle")&&(x=U5(x,"onMouseup")),D.length&&(E=ro(a.helper(U6),[E,JSON.stringify(D)])),o.length&&(!ll(x)||q6(x.content))&&(E=ro(a.helper(j6),[E,JSON.stringify(o)])),V.length){const X=V.map(ip).join("");x=ll(x)?Bn(`${x.content}${X}`,!0):Zc(["(",x,`) + "${X}"`])}return{props:[Os(x,E)]}}),YA=(e,r,a)=>{const{exp:d,loc:_}=e;return d||a.onError(bd(59,_)),{props:[],needRuntime:a.helper(V6)}},XA=(e,r)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&(r.onError(bd(61,e.loc)),r.removeNode())},KA=[NA],JA={cloak:OA,html:jA,text:VA,model:$A,on:ZA,show:YA};function QA(e,r={}){return RA(e,Er({},FA,r,{nodeTransforms:[XA,...KA,...r.nodeTransforms||[]],directiveTransforms:Er({},JA,r.directiveTransforms||{}),transformHoist:null}))}const j5=Object.create(null);function eI(e,r){if(!In(e))if(e.nodeType)e=e.innerHTML;else return Fa;const a=e,d=j5[a];if(d)return d;if(e[0]==="#"){const o=document.querySelector(e);e=o?o.innerHTML:""}const _=Er({hoistStatic:!0,onError:void 0,onWarn:Fa},r);!_.isCustomElement&&typeof customElements<"u"&&(_.isCustomElement=o=>!!customElements.get(o));const{code:x}=QA(e,_),E=new Function("Vue",x)(sM);return E._rc=!0,j5[a]=E}R4(eI);//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var W6;function Si(){return W6.apply(null,arguments)}function tI(e){W6=e}function Yc(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Hf(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function xr(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function Hb(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var r;for(r in e)if(xr(e,r))return!1;return!0}function sl(e){return e===void 0}function Sd(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function d_(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function H6(e,r){var a=[],d,_=e.length;for(d=0;d<_;++d)a.push(r(e[d],d));return a}function xh(e,r){for(var a in r)xr(r,a)&&(e[a]=r[a]);return xr(r,"toString")&&(e.toString=r.toString),xr(r,"valueOf")&&(e.valueOf=r.valueOf),e}function Lu(e,r,a,d){return gT(e,r,a,d,!0).utc()}function iI(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function An(e){return e._pf==null&&(e._pf=iI()),e._pf}var M3;Array.prototype.some?M3=Array.prototype.some:M3=function(e){var r=Object(this),a=r.length>>>0,d;for(d=0;d<a;d++)if(d in r&&e.call(this,r[d],d,r))return!0;return!1};function Zb(e){if(e._isValid==null){var r=An(e),a=M3.call(r.parsedDateParts,function(_){return _!=null}),d=!isNaN(e._d.getTime())&&r.overflow<0&&!r.empty&&!r.invalidEra&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&a);if(e._strict&&(d=d&&r.charsLeftOver===0&&r.unusedTokens.length===0&&r.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=d;else return d}return e._isValid}function _2(e){var r=Lu(NaN);return e!=null?xh(An(r),e):An(r).userInvalidated=!0,r}var V5=Si.momentProperties=[],zx=!1;function Yb(e,r){var a,d,_,x=V5.length;if(sl(r._isAMomentObject)||(e._isAMomentObject=r._isAMomentObject),sl(r._i)||(e._i=r._i),sl(r._f)||(e._f=r._f),sl(r._l)||(e._l=r._l),sl(r._strict)||(e._strict=r._strict),sl(r._tzm)||(e._tzm=r._tzm),sl(r._isUTC)||(e._isUTC=r._isUTC),sl(r._offset)||(e._offset=r._offset),sl(r._pf)||(e._pf=An(r)),sl(r._locale)||(e._locale=r._locale),x>0)for(a=0;a<x;a++)d=V5[a],_=r[d],sl(_)||(e[d]=_);return e}function h_(e){Yb(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),zx===!1&&(zx=!0,Si.updateOffset(this),zx=!1)}function Xc(e){return e instanceof h_||e!=null&&e._isAMomentObject!=null}function Z6(e){Si.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Sc(e,r){var a=!0;return xh(function(){if(Si.deprecationHandler!=null&&Si.deprecationHandler(null,e),a){var d=[],_,x,E,o=arguments.length;for(x=0;x<o;x++){if(_="",typeof arguments[x]=="object"){_+=`
[`+x+"] ";for(E in arguments[0])xr(arguments[0],E)&&(_+=E+": "+arguments[0][E]+", ");_=_.slice(0,-2)}else _=arguments[x];d.push(_)}Z6(e+`
Arguments: `+Array.prototype.slice.call(d).join("")+`
`+new Error().stack),a=!1}return r.apply(this,arguments)},r)}var $5={};function Y6(e,r){Si.deprecationHandler!=null&&Si.deprecationHandler(e,r),$5[e]||(Z6(r),$5[e]=!0)}Si.suppressDeprecationWarnings=!1;Si.deprecationHandler=null;function Ru(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function nI(e){var r,a;for(a in e)xr(e,a)&&(r=e[a],Ru(r)?this[a]=r:this["_"+a]=r);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function A3(e,r){var a=xh({},e),d;for(d in r)xr(r,d)&&(Hf(e[d])&&Hf(r[d])?(a[d]={},xh(a[d],e[d]),xh(a[d],r[d])):r[d]!=null?a[d]=r[d]:delete a[d]);for(d in e)xr(e,d)&&!xr(r,d)&&Hf(e[d])&&(a[d]=xh({},a[d]));return a}function Xb(e){e!=null&&this.set(e)}var I3;Object.keys?I3=Object.keys:I3=function(e){var r,a=[];for(r in e)xr(e,r)&&a.push(r);return a};var rI={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function sI(e,r,a){var d=this._calendar[e]||this._calendar.sameElse;return Ru(d)?d.call(r,a):d}function Pu(e,r,a){var d=""+Math.abs(e),_=r-d.length,x=e>=0;return(x?a?"+":"":"-")+Math.pow(10,Math.max(0,_)).toString().substr(1)+d}var Kb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Xg=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Bx={},w0={};function Zi(e,r,a,d){var _=d;typeof d=="string"&&(_=function(){return this[d]()}),e&&(w0[e]=_),r&&(w0[r[0]]=function(){return Pu(_.apply(this,arguments),r[1],r[2])}),a&&(w0[a]=function(){return this.localeData().ordinal(_.apply(this,arguments),e)})}function oI(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function aI(e){var r=e.match(Kb),a,d;for(a=0,d=r.length;a<d;a++)w0[r[a]]?r[a]=w0[r[a]]:r[a]=oI(r[a]);return function(_){var x="",E;for(E=0;E<d;E++)x+=Ru(r[E])?r[E].call(_,e):r[E];return x}}function ly(e,r){return e.isValid()?(r=X6(r,e.localeData()),Bx[r]=Bx[r]||aI(r),Bx[r](e)):e.localeData().invalidDate()}function X6(e,r){var a=5;function d(_){return r.longDateFormat(_)||_}for(Xg.lastIndex=0;a>=0&&Xg.test(e);)e=e.replace(Xg,d),Xg.lastIndex=0,a-=1;return e}var lI={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function cI(e){var r=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return r||!a?r:(this._longDateFormat[e]=a.match(Kb).map(function(d){return d==="MMMM"||d==="MM"||d==="DD"||d==="dddd"?d.slice(1):d}).join(""),this._longDateFormat[e])}var uI="Invalid date";function dI(){return this._invalidDate}var hI="%d",fI=/\d{1,2}/;function pI(e){return this._ordinal.replace("%d",e)}var mI={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function _I(e,r,a,d){var _=this._relativeTime[a];return Ru(_)?_(e,r,a,d):_.replace(/%d/i,e)}function gI(e,r){var a=this._relativeTime[e>0?"future":"past"];return Ru(a)?a(r):a.replace(/%s/i,r)}var P1={};function ba(e,r){var a=e.toLowerCase();P1[a]=P1[a+"s"]=P1[r]=e}function Cc(e){return typeof e=="string"?P1[e]||P1[e.toLowerCase()]:void 0}function Jb(e){var r={},a,d;for(d in e)xr(e,d)&&(a=Cc(d),a&&(r[a]=e[d]));return r}var K6={};function wa(e,r){K6[e]=r}function yI(e){var r=[],a;for(a in e)xr(e,a)&&r.push({unit:a,priority:K6[a]});return r.sort(function(d,_){return d.priority-_.priority}),r}function g2(e){return e%4===0&&e%100!==0||e%400===0}function bc(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function qn(e){var r=+e,a=0;return r!==0&&isFinite(r)&&(a=bc(r)),a}function V0(e,r){return function(a){return a!=null?(J6(this,e,a),Si.updateOffset(this,r),this):ky(this,e)}}function ky(e,r){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+r]():NaN}function J6(e,r,a){e.isValid()&&!isNaN(a)&&(r==="FullYear"&&g2(e.year())&&e.month()===1&&e.date()===29?(a=qn(a),e._d["set"+(e._isUTC?"UTC":"")+r](a,e.month(),T2(a,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+r](a))}function vI(e){return e=Cc(e),Ru(this[e])?this[e]():this}function xI(e,r){if(typeof e=="object"){e=Jb(e);var a=yI(e),d,_=a.length;for(d=0;d<_;d++)this[a[d].unit](e[a[d].unit])}else if(e=Cc(e),Ru(this[e]))return this[e](r);return this}var Q6=/\d/,Zl=/\d\d/,eT=/\d{3}/,Qb=/\d{4}/,y2=/[+-]?\d{6}/,us=/\d\d?/,tT=/\d\d\d\d?/,iT=/\d\d\d\d\d\d?/,v2=/\d{1,3}/,ew=/\d{1,4}/,x2=/[+-]?\d{1,6}/,$0=/\d+/,b2=/[+-]?\d+/,bI=/Z|[+-]\d\d:?\d\d/gi,w2=/Z|[+-]\d\d(?::?\d\d)?/gi,wI=/[+-]?\d+(\.\d{1,3})?/,f_=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Dy;Dy={};function ki(e,r,a){Dy[e]=Ru(r)?r:function(d,_){return d&&a?a:r}}function TI(e,r){return xr(Dy,e)?Dy[e](r._strict,r._locale):new RegExp(EI(e))}function EI(e){return Vl(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(r,a,d,_,x){return a||d||_||x}))}function Vl(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var k3={};function jr(e,r){var a,d=r,_;for(typeof e=="string"&&(e=[e]),Sd(r)&&(d=function(x,E){E[r]=qn(x)}),_=e.length,a=0;a<_;a++)k3[e[a]]=d}function p_(e,r){jr(e,function(a,d,_,x){_._w=_._w||{},r(a,_._w,_,x)})}function SI(e,r,a){r!=null&&xr(k3,e)&&k3[e](r,a._a,a,e)}var xa=0,gd=1,Au=2,bo=3,Hc=4,yd=5,Uf=6,CI=7,MI=8;function AI(e,r){return(e%r+r)%r}var Ws;Array.prototype.indexOf?Ws=Array.prototype.indexOf:Ws=function(e){var r;for(r=0;r<this.length;++r)if(this[r]===e)return r;return-1};function T2(e,r){if(isNaN(e)||isNaN(r))return NaN;var a=AI(r,12);return e+=(r-a)/12,a===1?g2(e)?29:28:31-a%7%2}Zi("M",["MM",2],"Mo",function(){return this.month()+1});Zi("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Zi("MMMM",0,0,function(e){return this.localeData().months(this,e)});ba("month","M");wa("month",8);ki("M",us);ki("MM",us,Zl);ki("MMM",function(e,r){return r.monthsShortRegex(e)});ki("MMMM",function(e,r){return r.monthsRegex(e)});jr(["M","MM"],function(e,r){r[gd]=qn(e)-1});jr(["MMM","MMMM"],function(e,r,a,d){var _=a._locale.monthsParse(e,d,a._strict);_!=null?r[gd]=_:An(a).invalidMonth=e});var II="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nT="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,kI=f_,DI=f_;function PI(e,r){return e?Yc(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rT).test(r)?"format":"standalone"][e.month()]:Yc(this._months)?this._months:this._months.standalone}function LI(e,r){return e?Yc(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rT.test(r)?"format":"standalone"][e.month()]:Yc(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function RI(e,r,a){var d,_,x,E=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;d<12;++d)x=Lu([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(x,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(x,"").toLocaleLowerCase();return a?r==="MMM"?(_=Ws.call(this._shortMonthsParse,E),_!==-1?_:null):(_=Ws.call(this._longMonthsParse,E),_!==-1?_:null):r==="MMM"?(_=Ws.call(this._shortMonthsParse,E),_!==-1?_:(_=Ws.call(this._longMonthsParse,E),_!==-1?_:null)):(_=Ws.call(this._longMonthsParse,E),_!==-1?_:(_=Ws.call(this._shortMonthsParse,E),_!==-1?_:null))}function OI(e,r,a){var d,_,x;if(this._monthsParseExact)return RI.call(this,e,r,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(_=Lu([2e3,d]),a&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(_,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(_,"").replace(".","")+"$","i")),!a&&!this._monthsParse[d]&&(x="^"+this.months(_,"")+"|^"+this.monthsShort(_,""),this._monthsParse[d]=new RegExp(x.replace(".",""),"i")),a&&r==="MMMM"&&this._longMonthsParse[d].test(e))return d;if(a&&r==="MMM"&&this._shortMonthsParse[d].test(e))return d;if(!a&&this._monthsParse[d].test(e))return d}}function sT(e,r){var a;if(!e.isValid())return e;if(typeof r=="string"){if(/^\d+$/.test(r))r=qn(r);else if(r=e.localeData().monthsParse(r),!Sd(r))return e}return a=Math.min(e.date(),T2(e.year(),r)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](r,a),e}function oT(e){return e!=null?(sT(this,e),Si.updateOffset(this,!0),this):ky(this,"Month")}function zI(){return T2(this.year(),this.month())}function BI(e){return this._monthsParseExact?(xr(this,"_monthsRegex")||aT.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(xr(this,"_monthsShortRegex")||(this._monthsShortRegex=kI),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function FI(e){return this._monthsParseExact?(xr(this,"_monthsRegex")||aT.call(this),e?this._monthsStrictRegex:this._monthsRegex):(xr(this,"_monthsRegex")||(this._monthsRegex=DI),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function aT(){function e(E,o){return o.length-E.length}var r=[],a=[],d=[],_,x;for(_=0;_<12;_++)x=Lu([2e3,_]),r.push(this.monthsShort(x,"")),a.push(this.months(x,"")),d.push(this.months(x,"")),d.push(this.monthsShort(x,""));for(r.sort(e),a.sort(e),d.sort(e),_=0;_<12;_++)r[_]=Vl(r[_]),a[_]=Vl(a[_]);for(_=0;_<24;_++)d[_]=Vl(d[_]);this._monthsRegex=new RegExp("^("+d.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}Zi("Y",0,0,function(){var e=this.year();return e<=9999?Pu(e,4):"+"+e});Zi(0,["YY",2],0,function(){return this.year()%100});Zi(0,["YYYY",4],0,"year");Zi(0,["YYYYY",5],0,"year");Zi(0,["YYYYYY",6,!0],0,"year");ba("year","y");wa("year",1);ki("Y",b2);ki("YY",us,Zl);ki("YYYY",ew,Qb);ki("YYYYY",x2,y2);ki("YYYYYY",x2,y2);jr(["YYYYY","YYYYYY"],xa);jr("YYYY",function(e,r){r[xa]=e.length===2?Si.parseTwoDigitYear(e):qn(e)});jr("YY",function(e,r){r[xa]=Si.parseTwoDigitYear(e)});jr("Y",function(e,r){r[xa]=parseInt(e,10)});function L1(e){return g2(e)?366:365}Si.parseTwoDigitYear=function(e){return qn(e)+(qn(e)>68?1900:2e3)};var lT=V0("FullYear",!0);function NI(){return g2(this.year())}function UI(e,r,a,d,_,x,E){var o;return e<100&&e>=0?(o=new Date(e+400,r,a,d,_,x,E),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,r,a,d,_,x,E),o}function Y1(e){var r,a;return e<100&&e>=0?(a=Array.prototype.slice.call(arguments),a[0]=e+400,r=new Date(Date.UTC.apply(null,a)),isFinite(r.getUTCFullYear())&&r.setUTCFullYear(e)):r=new Date(Date.UTC.apply(null,arguments)),r}function Py(e,r,a){var d=7+r-a,_=(7+Y1(e,0,d).getUTCDay()-r)%7;return-_+d-1}function cT(e,r,a,d,_){var x=(7+a-d)%7,E=Py(e,d,_),o=1+7*(r-1)+x+E,D,V;return o<=0?(D=e-1,V=L1(D)+o):o>L1(e)?(D=e+1,V=o-L1(e)):(D=e,V=o),{year:D,dayOfYear:V}}function X1(e,r,a){var d=Py(e.year(),r,a),_=Math.floor((e.dayOfYear()-d-1)/7)+1,x,E;return _<1?(E=e.year()-1,x=_+wd(E,r,a)):_>wd(e.year(),r,a)?(x=_-wd(e.year(),r,a),E=e.year()+1):(E=e.year(),x=_),{week:x,year:E}}function wd(e,r,a){var d=Py(e,r,a),_=Py(e+1,r,a);return(L1(e)-d+_)/7}Zi("w",["ww",2],"wo","week");Zi("W",["WW",2],"Wo","isoWeek");ba("week","w");ba("isoWeek","W");wa("week",5);wa("isoWeek",5);ki("w",us);ki("ww",us,Zl);ki("W",us);ki("WW",us,Zl);p_(["w","ww","W","WW"],function(e,r,a,d){r[d.substr(0,1)]=qn(e)});function jI(e){return X1(e,this._week.dow,this._week.doy).week}var VI={dow:0,doy:6};function $I(){return this._week.dow}function GI(){return this._week.doy}function qI(e){var r=this.localeData().week(this);return e==null?r:this.add((e-r)*7,"d")}function WI(e){var r=X1(this,1,4).week;return e==null?r:this.add((e-r)*7,"d")}Zi("d",0,"do","day");Zi("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Zi("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Zi("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Zi("e",0,0,"weekday");Zi("E",0,0,"isoWeekday");ba("day","d");ba("weekday","e");ba("isoWeekday","E");wa("day",11);wa("weekday",11);wa("isoWeekday",11);ki("d",us);ki("e",us);ki("E",us);ki("dd",function(e,r){return r.weekdaysMinRegex(e)});ki("ddd",function(e,r){return r.weekdaysShortRegex(e)});ki("dddd",function(e,r){return r.weekdaysRegex(e)});p_(["dd","ddd","dddd"],function(e,r,a,d){var _=a._locale.weekdaysParse(e,d,a._strict);_!=null?r.d=_:An(a).invalidWeekday=e});p_(["d","e","E"],function(e,r,a,d){r[d]=qn(e)});function HI(e,r){return typeof e!="string"?e:isNaN(e)?(e=r.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function ZI(e,r){return typeof e=="string"?r.weekdaysParse(e)%7||7:isNaN(e)?null:e}function tw(e,r){return e.slice(r,7).concat(e.slice(0,r))}var YI="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),uT="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),XI="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),KI=f_,JI=f_,QI=f_;function ek(e,r){var a=Yc(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(r)?"format":"standalone"];return e===!0?tw(a,this._week.dow):e?a[e.day()]:a}function tk(e){return e===!0?tw(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function ik(e){return e===!0?tw(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function nk(e,r,a){var d,_,x,E=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;d<7;++d)x=Lu([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(x,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(x,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(x,"").toLocaleLowerCase();return a?r==="dddd"?(_=Ws.call(this._weekdaysParse,E),_!==-1?_:null):r==="ddd"?(_=Ws.call(this._shortWeekdaysParse,E),_!==-1?_:null):(_=Ws.call(this._minWeekdaysParse,E),_!==-1?_:null):r==="dddd"?(_=Ws.call(this._weekdaysParse,E),_!==-1||(_=Ws.call(this._shortWeekdaysParse,E),_!==-1)?_:(_=Ws.call(this._minWeekdaysParse,E),_!==-1?_:null)):r==="ddd"?(_=Ws.call(this._shortWeekdaysParse,E),_!==-1||(_=Ws.call(this._weekdaysParse,E),_!==-1)?_:(_=Ws.call(this._minWeekdaysParse,E),_!==-1?_:null)):(_=Ws.call(this._minWeekdaysParse,E),_!==-1||(_=Ws.call(this._weekdaysParse,E),_!==-1)?_:(_=Ws.call(this._shortWeekdaysParse,E),_!==-1?_:null))}function rk(e,r,a){var d,_,x;if(this._weekdaysParseExact)return nk.call(this,e,r,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;d<7;d++){if(_=Lu([2e3,1]).day(d),a&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(_,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(_,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(_,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[d]||(x="^"+this.weekdays(_,"")+"|^"+this.weekdaysShort(_,"")+"|^"+this.weekdaysMin(_,""),this._weekdaysParse[d]=new RegExp(x.replace(".",""),"i")),a&&r==="dddd"&&this._fullWeekdaysParse[d].test(e))return d;if(a&&r==="ddd"&&this._shortWeekdaysParse[d].test(e))return d;if(a&&r==="dd"&&this._minWeekdaysParse[d].test(e))return d;if(!a&&this._weekdaysParse[d].test(e))return d}}function sk(e){if(!this.isValid())return e!=null?this:NaN;var r=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=HI(e,this.localeData()),this.add(e-r,"d")):r}function ok(e){if(!this.isValid())return e!=null?this:NaN;var r=(this.day()+7-this.localeData()._week.dow)%7;return e==null?r:this.add(e-r,"d")}function ak(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var r=ZI(e,this.localeData());return this.day(this.day()%7?r:r-7)}else return this.day()||7}function lk(e){return this._weekdaysParseExact?(xr(this,"_weekdaysRegex")||iw.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(xr(this,"_weekdaysRegex")||(this._weekdaysRegex=KI),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function ck(e){return this._weekdaysParseExact?(xr(this,"_weekdaysRegex")||iw.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(xr(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=JI),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function uk(e){return this._weekdaysParseExact?(xr(this,"_weekdaysRegex")||iw.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(xr(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=QI),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function iw(){function e(X,Z){return Z.length-X.length}var r=[],a=[],d=[],_=[],x,E,o,D,V;for(x=0;x<7;x++)E=Lu([2e3,1]).day(x),o=Vl(this.weekdaysMin(E,"")),D=Vl(this.weekdaysShort(E,"")),V=Vl(this.weekdays(E,"")),r.push(o),a.push(D),d.push(V),_.push(o),_.push(D),_.push(V);r.sort(e),a.sort(e),d.sort(e),_.sort(e),this._weekdaysRegex=new RegExp("^("+_.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function nw(){return this.hours()%12||12}function dk(){return this.hours()||24}Zi("H",["HH",2],0,"hour");Zi("h",["hh",2],0,nw);Zi("k",["kk",2],0,dk);Zi("hmm",0,0,function(){return""+nw.apply(this)+Pu(this.minutes(),2)});Zi("hmmss",0,0,function(){return""+nw.apply(this)+Pu(this.minutes(),2)+Pu(this.seconds(),2)});Zi("Hmm",0,0,function(){return""+this.hours()+Pu(this.minutes(),2)});Zi("Hmmss",0,0,function(){return""+this.hours()+Pu(this.minutes(),2)+Pu(this.seconds(),2)});function dT(e,r){Zi(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),r)})}dT("a",!0);dT("A",!1);ba("hour","h");wa("hour",13);function hT(e,r){return r._meridiemParse}ki("a",hT);ki("A",hT);ki("H",us);ki("h",us);ki("k",us);ki("HH",us,Zl);ki("hh",us,Zl);ki("kk",us,Zl);ki("hmm",tT);ki("hmmss",iT);ki("Hmm",tT);ki("Hmmss",iT);jr(["H","HH"],bo);jr(["k","kk"],function(e,r,a){var d=qn(e);r[bo]=d===24?0:d});jr(["a","A"],function(e,r,a){a._isPm=a._locale.isPM(e),a._meridiem=e});jr(["h","hh"],function(e,r,a){r[bo]=qn(e),An(a).bigHour=!0});jr("hmm",function(e,r,a){var d=e.length-2;r[bo]=qn(e.substr(0,d)),r[Hc]=qn(e.substr(d)),An(a).bigHour=!0});jr("hmmss",function(e,r,a){var d=e.length-4,_=e.length-2;r[bo]=qn(e.substr(0,d)),r[Hc]=qn(e.substr(d,2)),r[yd]=qn(e.substr(_)),An(a).bigHour=!0});jr("Hmm",function(e,r,a){var d=e.length-2;r[bo]=qn(e.substr(0,d)),r[Hc]=qn(e.substr(d))});jr("Hmmss",function(e,r,a){var d=e.length-4,_=e.length-2;r[bo]=qn(e.substr(0,d)),r[Hc]=qn(e.substr(d,2)),r[yd]=qn(e.substr(_))});function hk(e){return(e+"").toLowerCase().charAt(0)==="p"}var fk=/[ap]\.?m?\.?/i,pk=V0("Hours",!0);function mk(e,r,a){return e>11?a?"pm":"PM":a?"am":"AM"}var fT={calendar:rI,longDateFormat:lI,invalidDate:uI,ordinal:hI,dayOfMonthOrdinalParse:fI,relativeTime:mI,months:II,monthsShort:nT,week:VI,weekdays:YI,weekdaysMin:XI,weekdaysShort:uT,meridiemParse:fk},ys={},b1={},K1;function _k(e,r){var a,d=Math.min(e.length,r.length);for(a=0;a<d;a+=1)if(e[a]!==r[a])return a;return d}function G5(e){return e&&e.toLowerCase().replace("_","-")}function gk(e){for(var r=0,a,d,_,x;r<e.length;){for(x=G5(e[r]).split("-"),a=x.length,d=G5(e[r+1]),d=d?d.split("-"):null;a>0;){if(_=E2(x.slice(0,a).join("-")),_)return _;if(d&&d.length>=a&&_k(x,d)>=a-1)break;a--}r++}return K1}function yk(e){return e.match("^[^/\\\\]*$")!=null}function E2(e){var r=null,a;if(ys[e]===void 0&&typeof hy<"u"&&hy&&hy.exports&&yk(e))try{r=K1._abbr,a=require,a("./locale/"+e),Sh(r)}catch{ys[e]=null}return ys[e]}function Sh(e,r){var a;return e&&(sl(r)?a=Id(e):a=rw(e,r),a?K1=a:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),K1._abbr}function rw(e,r){if(r!==null){var a,d=fT;if(r.abbr=e,ys[e]!=null)Y6("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),d=ys[e]._config;else if(r.parentLocale!=null)if(ys[r.parentLocale]!=null)d=ys[r.parentLocale]._config;else if(a=E2(r.parentLocale),a!=null)d=a._config;else return b1[r.parentLocale]||(b1[r.parentLocale]=[]),b1[r.parentLocale].push({name:e,config:r}),null;return ys[e]=new Xb(A3(d,r)),b1[e]&&b1[e].forEach(function(_){rw(_.name,_.config)}),Sh(e),ys[e]}else return delete ys[e],null}function vk(e,r){if(r!=null){var a,d,_=fT;ys[e]!=null&&ys[e].parentLocale!=null?ys[e].set(A3(ys[e]._config,r)):(d=E2(e),d!=null&&(_=d._config),r=A3(_,r),d==null&&(r.abbr=e),a=new Xb(r),a.parentLocale=ys[e],ys[e]=a),Sh(e)}else ys[e]!=null&&(ys[e].parentLocale!=null?(ys[e]=ys[e].parentLocale,e===Sh()&&Sh(e)):ys[e]!=null&&delete ys[e]);return ys[e]}function Id(e){var r;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return K1;if(!Yc(e)){if(r=E2(e),r)return r;e=[e]}return gk(e)}function xk(){return I3(ys)}function sw(e){var r,a=e._a;return a&&An(e).overflow===-2&&(r=a[gd]<0||a[gd]>11?gd:a[Au]<1||a[Au]>T2(a[xa],a[gd])?Au:a[bo]<0||a[bo]>24||a[bo]===24&&(a[Hc]!==0||a[yd]!==0||a[Uf]!==0)?bo:a[Hc]<0||a[Hc]>59?Hc:a[yd]<0||a[yd]>59?yd:a[Uf]<0||a[Uf]>999?Uf:-1,An(e)._overflowDayOfYear&&(r<xa||r>Au)&&(r=Au),An(e)._overflowWeeks&&r===-1&&(r=CI),An(e)._overflowWeekday&&r===-1&&(r=MI),An(e).overflow=r),e}var bk=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wk=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tk=/Z|[+-]\d\d(?::?\d\d)?/,Kg=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Fx=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ek=/^\/?Date\((-?\d+)/i,Sk=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ck={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function pT(e){var r,a,d=e._i,_=bk.exec(d)||wk.exec(d),x,E,o,D,V=Kg.length,X=Fx.length;if(_){for(An(e).iso=!0,r=0,a=V;r<a;r++)if(Kg[r][1].exec(_[1])){E=Kg[r][0],x=Kg[r][2]!==!1;break}if(E==null){e._isValid=!1;return}if(_[3]){for(r=0,a=X;r<a;r++)if(Fx[r][1].exec(_[3])){o=(_[2]||" ")+Fx[r][0];break}if(o==null){e._isValid=!1;return}}if(!x&&o!=null){e._isValid=!1;return}if(_[4])if(Tk.exec(_[4]))D="Z";else{e._isValid=!1;return}e._f=E+(o||"")+(D||""),aw(e)}else e._isValid=!1}function Mk(e,r,a,d,_,x){var E=[Ak(e),nT.indexOf(r),parseInt(a,10),parseInt(d,10),parseInt(_,10)];return x&&E.push(parseInt(x,10)),E}function Ak(e){var r=parseInt(e,10);return r<=49?2e3+r:r<=999?1900+r:r}function Ik(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function kk(e,r,a){if(e){var d=uT.indexOf(e),_=new Date(r[0],r[1],r[2]).getDay();if(d!==_)return An(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function Dk(e,r,a){if(e)return Ck[e];if(r)return 0;var d=parseInt(a,10),_=d%100,x=(d-_)/100;return x*60+_}function mT(e){var r=Sk.exec(Ik(e._i)),a;if(r){if(a=Mk(r[4],r[3],r[2],r[5],r[6],r[7]),!kk(r[1],a,e))return;e._a=a,e._tzm=Dk(r[8],r[9],r[10]),e._d=Y1.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),An(e).rfc2822=!0}else e._isValid=!1}function Pk(e){var r=Ek.exec(e._i);if(r!==null){e._d=new Date(+r[1]);return}if(pT(e),e._isValid===!1)delete e._isValid;else return;if(mT(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Si.createFromInputFallback(e)}Si.createFromInputFallback=Sc("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function h0(e,r,a){return e??r??a}function Lk(e){var r=new Date(Si.now());return e._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()]}function ow(e){var r,a,d=[],_,x,E;if(!e._d){for(_=Lk(e),e._w&&e._a[Au]==null&&e._a[gd]==null&&Rk(e),e._dayOfYear!=null&&(E=h0(e._a[xa],_[xa]),(e._dayOfYear>L1(E)||e._dayOfYear===0)&&(An(e)._overflowDayOfYear=!0),a=Y1(E,0,e._dayOfYear),e._a[gd]=a.getUTCMonth(),e._a[Au]=a.getUTCDate()),r=0;r<3&&e._a[r]==null;++r)e._a[r]=d[r]=_[r];for(;r<7;r++)e._a[r]=d[r]=e._a[r]==null?r===2?1:0:e._a[r];e._a[bo]===24&&e._a[Hc]===0&&e._a[yd]===0&&e._a[Uf]===0&&(e._nextDay=!0,e._a[bo]=0),e._d=(e._useUTC?Y1:UI).apply(null,d),x=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[bo]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==x&&(An(e).weekdayMismatch=!0)}}function Rk(e){var r,a,d,_,x,E,o,D,V;r=e._w,r.GG!=null||r.W!=null||r.E!=null?(x=1,E=4,a=h0(r.GG,e._a[xa],X1(cs(),1,4).year),d=h0(r.W,1),_=h0(r.E,1),(_<1||_>7)&&(D=!0)):(x=e._locale._week.dow,E=e._locale._week.doy,V=X1(cs(),x,E),a=h0(r.gg,e._a[xa],V.year),d=h0(r.w,V.week),r.d!=null?(_=r.d,(_<0||_>6)&&(D=!0)):r.e!=null?(_=r.e+x,(r.e<0||r.e>6)&&(D=!0)):_=x),d<1||d>wd(a,x,E)?An(e)._overflowWeeks=!0:D!=null?An(e)._overflowWeekday=!0:(o=cT(a,d,_,x,E),e._a[xa]=o.year,e._dayOfYear=o.dayOfYear)}Si.ISO_8601=function(){};Si.RFC_2822=function(){};function aw(e){if(e._f===Si.ISO_8601){pT(e);return}if(e._f===Si.RFC_2822){mT(e);return}e._a=[],An(e).empty=!0;var r=""+e._i,a,d,_,x,E,o=r.length,D=0,V,X;for(_=X6(e._f,e._locale).match(Kb)||[],X=_.length,a=0;a<X;a++)x=_[a],d=(r.match(TI(x,e))||[])[0],d&&(E=r.substr(0,r.indexOf(d)),E.length>0&&An(e).unusedInput.push(E),r=r.slice(r.indexOf(d)+d.length),D+=d.length),w0[x]?(d?An(e).empty=!1:An(e).unusedTokens.push(x),SI(x,d,e)):e._strict&&!d&&An(e).unusedTokens.push(x);An(e).charsLeftOver=o-D,r.length>0&&An(e).unusedInput.push(r),e._a[bo]<=12&&An(e).bigHour===!0&&e._a[bo]>0&&(An(e).bigHour=void 0),An(e).parsedDateParts=e._a.slice(0),An(e).meridiem=e._meridiem,e._a[bo]=Ok(e._locale,e._a[bo],e._meridiem),V=An(e).era,V!==null&&(e._a[xa]=e._locale.erasConvertYear(V,e._a[xa])),ow(e),sw(e)}function Ok(e,r,a){var d;return a==null?r:e.meridiemHour!=null?e.meridiemHour(r,a):(e.isPM!=null&&(d=e.isPM(a),d&&r<12&&(r+=12),!d&&r===12&&(r=0)),r)}function zk(e){var r,a,d,_,x,E,o=!1,D=e._f.length;if(D===0){An(e).invalidFormat=!0,e._d=new Date(NaN);return}for(_=0;_<D;_++)x=0,E=!1,r=Yb({},e),e._useUTC!=null&&(r._useUTC=e._useUTC),r._f=e._f[_],aw(r),Zb(r)&&(E=!0),x+=An(r).charsLeftOver,x+=An(r).unusedTokens.length*10,An(r).score=x,o?x<d&&(d=x,a=r):(d==null||x<d||E)&&(d=x,a=r,E&&(o=!0));xh(e,a||r)}function Bk(e){if(!e._d){var r=Jb(e._i),a=r.day===void 0?r.date:r.day;e._a=H6([r.year,r.month,a,r.hour,r.minute,r.second,r.millisecond],function(d){return d&&parseInt(d,10)}),ow(e)}}function Fk(e){var r=new h_(sw(_T(e)));return r._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function _T(e){var r=e._i,a=e._f;return e._locale=e._locale||Id(e._l),r===null||a===void 0&&r===""?_2({nullInput:!0}):(typeof r=="string"&&(e._i=r=e._locale.preparse(r)),Xc(r)?new h_(sw(r)):(d_(r)?e._d=r:Yc(a)?zk(e):a?aw(e):Nk(e),Zb(e)||(e._d=null),e))}function Nk(e){var r=e._i;sl(r)?e._d=new Date(Si.now()):d_(r)?e._d=new Date(r.valueOf()):typeof r=="string"?Pk(e):Yc(r)?(e._a=H6(r.slice(0),function(a){return parseInt(a,10)}),ow(e)):Hf(r)?Bk(e):Sd(r)?e._d=new Date(r):Si.createFromInputFallback(e)}function gT(e,r,a,d,_){var x={};return(r===!0||r===!1)&&(d=r,r=void 0),(a===!0||a===!1)&&(d=a,a=void 0),(Hf(e)&&Hb(e)||Yc(e)&&e.length===0)&&(e=void 0),x._isAMomentObject=!0,x._useUTC=x._isUTC=_,x._l=a,x._i=e,x._f=r,x._strict=d,Fk(x)}function cs(e,r,a,d){return gT(e,r,a,d,!1)}var Uk=Sc("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=cs.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_2()}),jk=Sc("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=cs.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_2()});function yT(e,r){var a,d;if(r.length===1&&Yc(r[0])&&(r=r[0]),!r.length)return cs();for(a=r[0],d=1;d<r.length;++d)(!r[d].isValid()||r[d][e](a))&&(a=r[d]);return a}function Vk(){var e=[].slice.call(arguments,0);return yT("isBefore",e)}function $k(){var e=[].slice.call(arguments,0);return yT("isAfter",e)}var Gk=function(){return Date.now?Date.now():+new Date},w1=["year","quarter","month","week","day","hour","minute","second","millisecond"];function qk(e){var r,a=!1,d,_=w1.length;for(r in e)if(xr(e,r)&&!(Ws.call(w1,r)!==-1&&(e[r]==null||!isNaN(e[r]))))return!1;for(d=0;d<_;++d)if(e[w1[d]]){if(a)return!1;parseFloat(e[w1[d]])!==qn(e[w1[d]])&&(a=!0)}return!0}function Wk(){return this._isValid}function Hk(){return Kc(NaN)}function S2(e){var r=Jb(e),a=r.year||0,d=r.quarter||0,_=r.month||0,x=r.week||r.isoWeek||0,E=r.day||0,o=r.hour||0,D=r.minute||0,V=r.second||0,X=r.millisecond||0;this._isValid=qk(r),this._milliseconds=+X+V*1e3+D*6e4+o*1e3*60*60,this._days=+E+x*7,this._months=+_+d*3+a*12,this._data={},this._locale=Id(),this._bubble()}function cy(e){return e instanceof S2}function D3(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Zk(e,r,a){var d=Math.min(e.length,r.length),_=Math.abs(e.length-r.length),x=0,E;for(E=0;E<d;E++)(a&&e[E]!==r[E]||!a&&qn(e[E])!==qn(r[E]))&&x++;return x+_}function vT(e,r){Zi(e,0,0,function(){var a=this.utcOffset(),d="+";return a<0&&(a=-a,d="-"),d+Pu(~~(a/60),2)+r+Pu(~~a%60,2)})}vT("Z",":");vT("ZZ","");ki("Z",w2);ki("ZZ",w2);jr(["Z","ZZ"],function(e,r,a){a._useUTC=!0,a._tzm=lw(w2,e)});var Yk=/([\+\-]|\d\d)/gi;function lw(e,r){var a=(r||"").match(e),d,_,x;return a===null?null:(d=a[a.length-1]||[],_=(d+"").match(Yk)||["-",0,0],x=+(_[1]*60)+qn(_[2]),x===0?0:_[0]==="+"?x:-x)}function cw(e,r){var a,d;return r._isUTC?(a=r.clone(),d=(Xc(e)||d_(e)?e.valueOf():cs(e).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+d),Si.updateOffset(a,!1),a):cs(e).local()}function P3(e){return-Math.round(e._d.getTimezoneOffset())}Si.updateOffset=function(){};function Xk(e,r,a){var d=this._offset||0,_;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=lw(w2,e),e===null)return this}else Math.abs(e)<16&&!a&&(e=e*60);return!this._isUTC&&r&&(_=P3(this)),this._offset=e,this._isUTC=!0,_!=null&&this.add(_,"m"),d!==e&&(!r||this._changeInProgress?wT(this,Kc(e-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Si.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?d:P3(this)}function Kk(e,r){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,r),this):-this.utcOffset()}function Jk(e){return this.utcOffset(0,e)}function Qk(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(P3(this),"m")),this}function eD(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=lw(bI,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function tD(e){return this.isValid()?(e=e?cs(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function iD(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function nD(){if(!sl(this._isDSTShifted))return this._isDSTShifted;var e={},r;return Yb(e,this),e=_T(e),e._a?(r=e._isUTC?Lu(e._a):cs(e._a),this._isDSTShifted=this.isValid()&&Zk(e._a,r.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function rD(){return this.isValid()?!this._isUTC:!1}function sD(){return this.isValid()?this._isUTC:!1}function xT(){return this.isValid()?this._isUTC&&this._offset===0:!1}var oD=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,aD=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Kc(e,r){var a=e,d=null,_,x,E;return cy(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:Sd(e)||!isNaN(+e)?(a={},r?a[r]=+e:a.milliseconds=+e):(d=oD.exec(e))?(_=d[1]==="-"?-1:1,a={y:0,d:qn(d[Au])*_,h:qn(d[bo])*_,m:qn(d[Hc])*_,s:qn(d[yd])*_,ms:qn(D3(d[Uf]*1e3))*_}):(d=aD.exec(e))?(_=d[1]==="-"?-1:1,a={y:Df(d[2],_),M:Df(d[3],_),w:Df(d[4],_),d:Df(d[5],_),h:Df(d[6],_),m:Df(d[7],_),s:Df(d[8],_)}):a==null?a={}:typeof a=="object"&&("from"in a||"to"in a)&&(E=lD(cs(a.from),cs(a.to)),a={},a.ms=E.milliseconds,a.M=E.months),x=new S2(a),cy(e)&&xr(e,"_locale")&&(x._locale=e._locale),cy(e)&&xr(e,"_isValid")&&(x._isValid=e._isValid),x}Kc.fn=S2.prototype;Kc.invalid=Hk;function Df(e,r){var a=e&&parseFloat(e.replace(",","."));return(isNaN(a)?0:a)*r}function q5(e,r){var a={};return a.months=r.month()-e.month()+(r.year()-e.year())*12,e.clone().add(a.months,"M").isAfter(r)&&--a.months,a.milliseconds=+r-+e.clone().add(a.months,"M"),a}function lD(e,r){var a;return e.isValid()&&r.isValid()?(r=cw(r,e),e.isBefore(r)?a=q5(e,r):(a=q5(r,e),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function bT(e,r){return function(a,d){var _,x;return d!==null&&!isNaN(+d)&&(Y6(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),x=a,a=d,d=x),_=Kc(a,d),wT(this,_,e),this}}function wT(e,r,a,d){var _=r._milliseconds,x=D3(r._days),E=D3(r._months);e.isValid()&&(d=d??!0,E&&sT(e,ky(e,"Month")+E*a),x&&J6(e,"Date",ky(e,"Date")+x*a),_&&e._d.setTime(e._d.valueOf()+_*a),d&&Si.updateOffset(e,x||E))}var cD=bT(1,"add"),uD=bT(-1,"subtract");function TT(e){return typeof e=="string"||e instanceof String}function dD(e){return Xc(e)||d_(e)||TT(e)||Sd(e)||fD(e)||hD(e)||e===null||e===void 0}function hD(e){var r=Hf(e)&&!Hb(e),a=!1,d=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],_,x,E=d.length;for(_=0;_<E;_+=1)x=d[_],a=a||xr(e,x);return r&&a}function fD(e){var r=Yc(e),a=!1;return r&&(a=e.filter(function(d){return!Sd(d)&&TT(e)}).length===0),r&&a}function pD(e){var r=Hf(e)&&!Hb(e),a=!1,d=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],_,x;for(_=0;_<d.length;_+=1)x=d[_],a=a||xr(e,x);return r&&a}function mD(e,r){var a=e.diff(r,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function _D(e,r){arguments.length===1&&(arguments[0]?dD(arguments[0])?(e=arguments[0],r=void 0):pD(arguments[0])&&(r=arguments[0],e=void 0):(e=void 0,r=void 0));var a=e||cs(),d=cw(a,this).startOf("day"),_=Si.calendarFormat(this,d)||"sameElse",x=r&&(Ru(r[_])?r[_].call(this,a):r[_]);return this.format(x||this.localeData().calendar(_,this,cs(a)))}function gD(){return new h_(this)}function yD(e,r){var a=Xc(e)?e:cs(e);return this.isValid()&&a.isValid()?(r=Cc(r)||"millisecond",r==="millisecond"?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(r).valueOf()):!1}function vD(e,r){var a=Xc(e)?e:cs(e);return this.isValid()&&a.isValid()?(r=Cc(r)||"millisecond",r==="millisecond"?this.valueOf()<a.valueOf():this.clone().endOf(r).valueOf()<a.valueOf()):!1}function xD(e,r,a,d){var _=Xc(e)?e:cs(e),x=Xc(r)?r:cs(r);return this.isValid()&&_.isValid()&&x.isValid()?(d=d||"()",(d[0]==="("?this.isAfter(_,a):!this.isBefore(_,a))&&(d[1]===")"?this.isBefore(x,a):!this.isAfter(x,a))):!1}function bD(e,r){var a=Xc(e)?e:cs(e),d;return this.isValid()&&a.isValid()?(r=Cc(r)||"millisecond",r==="millisecond"?this.valueOf()===a.valueOf():(d=a.valueOf(),this.clone().startOf(r).valueOf()<=d&&d<=this.clone().endOf(r).valueOf())):!1}function wD(e,r){return this.isSame(e,r)||this.isAfter(e,r)}function TD(e,r){return this.isSame(e,r)||this.isBefore(e,r)}function ED(e,r,a){var d,_,x;if(!this.isValid())return NaN;if(d=cw(e,this),!d.isValid())return NaN;switch(_=(d.utcOffset()-this.utcOffset())*6e4,r=Cc(r),r){case"year":x=uy(this,d)/12;break;case"month":x=uy(this,d);break;case"quarter":x=uy(this,d)/3;break;case"second":x=(this-d)/1e3;break;case"minute":x=(this-d)/6e4;break;case"hour":x=(this-d)/36e5;break;case"day":x=(this-d-_)/864e5;break;case"week":x=(this-d-_)/6048e5;break;default:x=this-d}return a?x:bc(x)}function uy(e,r){if(e.date()<r.date())return-uy(r,e);var a=(r.year()-e.year())*12+(r.month()-e.month()),d=e.clone().add(a,"months"),_,x;return r-d<0?(_=e.clone().add(a-1,"months"),x=(r-d)/(d-_)):(_=e.clone().add(a+1,"months"),x=(r-d)/(_-d)),-(a+x)||0}Si.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Si.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function SD(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function CD(e){if(!this.isValid())return null;var r=e!==!0,a=r?this.clone().utc():this;return a.year()<0||a.year()>9999?ly(a,r?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ru(Date.prototype.toISOString)?r?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",ly(a,"Z")):ly(a,r?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function MD(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",r="",a,d,_,x;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",r="Z"),a="["+e+'("]',d=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",_="-MM-DD[T]HH:mm:ss.SSS",x=r+'[")]',this.format(a+d+_+x)}function AD(e){e||(e=this.isUtc()?Si.defaultFormatUtc:Si.defaultFormat);var r=ly(this,e);return this.localeData().postformat(r)}function ID(e,r){return this.isValid()&&(Xc(e)&&e.isValid()||cs(e).isValid())?Kc({to:this,from:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function kD(e){return this.from(cs(),e)}function DD(e,r){return this.isValid()&&(Xc(e)&&e.isValid()||cs(e).isValid())?Kc({from:this,to:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function PD(e){return this.to(cs(),e)}function ET(e){var r;return e===void 0?this._locale._abbr:(r=Id(e),r!=null&&(this._locale=r),this)}var ST=Sc("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function CT(){return this._locale}var Ly=1e3,T0=60*Ly,Ry=60*T0,MT=(365*400+97)*24*Ry;function E0(e,r){return(e%r+r)%r}function AT(e,r,a){return e<100&&e>=0?new Date(e+400,r,a)-MT:new Date(e,r,a).valueOf()}function IT(e,r,a){return e<100&&e>=0?Date.UTC(e+400,r,a)-MT:Date.UTC(e,r,a)}function LD(e){var r,a;if(e=Cc(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?IT:AT,e){case"year":r=a(this.year(),0,1);break;case"quarter":r=a(this.year(),this.month()-this.month()%3,1);break;case"month":r=a(this.year(),this.month(),1);break;case"week":r=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":r=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":r=a(this.year(),this.month(),this.date());break;case"hour":r=this._d.valueOf(),r-=E0(r+(this._isUTC?0:this.utcOffset()*T0),Ry);break;case"minute":r=this._d.valueOf(),r-=E0(r,T0);break;case"second":r=this._d.valueOf(),r-=E0(r,Ly);break}return this._d.setTime(r),Si.updateOffset(this,!0),this}function RD(e){var r,a;if(e=Cc(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?IT:AT,e){case"year":r=a(this.year()+1,0,1)-1;break;case"quarter":r=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":r=a(this.year(),this.month()+1,1)-1;break;case"week":r=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":r=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":r=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":r=this._d.valueOf(),r+=Ry-E0(r+(this._isUTC?0:this.utcOffset()*T0),Ry)-1;break;case"minute":r=this._d.valueOf(),r+=T0-E0(r,T0)-1;break;case"second":r=this._d.valueOf(),r+=Ly-E0(r,Ly)-1;break}return this._d.setTime(r),Si.updateOffset(this,!0),this}function OD(){return this._d.valueOf()-(this._offset||0)*6e4}function zD(){return Math.floor(this.valueOf()/1e3)}function BD(){return new Date(this.valueOf())}function FD(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ND(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function UD(){return this.isValid()?this.toISOString():null}function jD(){return Zb(this)}function VD(){return xh({},An(this))}function $D(){return An(this).overflow}function GD(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Zi("N",0,0,"eraAbbr");Zi("NN",0,0,"eraAbbr");Zi("NNN",0,0,"eraAbbr");Zi("NNNN",0,0,"eraName");Zi("NNNNN",0,0,"eraNarrow");Zi("y",["y",1],"yo","eraYear");Zi("y",["yy",2],0,"eraYear");Zi("y",["yyy",3],0,"eraYear");Zi("y",["yyyy",4],0,"eraYear");ki("N",uw);ki("NN",uw);ki("NNN",uw);ki("NNNN",tP);ki("NNNNN",iP);jr(["N","NN","NNN","NNNN","NNNNN"],function(e,r,a,d){var _=a._locale.erasParse(e,d,a._strict);_?An(a).era=_:An(a).invalidEra=e});ki("y",$0);ki("yy",$0);ki("yyy",$0);ki("yyyy",$0);ki("yo",nP);jr(["y","yy","yyy","yyyy"],xa);jr(["yo"],function(e,r,a,d){var _;a._locale._eraYearOrdinalRegex&&(_=e.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?r[xa]=a._locale.eraYearOrdinalParse(e,_):r[xa]=parseInt(e,10)});function qD(e,r){var a,d,_,x=this._eras||Id("en")._eras;for(a=0,d=x.length;a<d;++a){switch(typeof x[a].since){case"string":_=Si(x[a].since).startOf("day"),x[a].since=_.valueOf();break}switch(typeof x[a].until){case"undefined":x[a].until=1/0;break;case"string":_=Si(x[a].until).startOf("day").valueOf(),x[a].until=_.valueOf();break}}return x}function WD(e,r,a){var d,_,x=this.eras(),E,o,D;for(e=e.toUpperCase(),d=0,_=x.length;d<_;++d)if(E=x[d].name.toUpperCase(),o=x[d].abbr.toUpperCase(),D=x[d].narrow.toUpperCase(),a)switch(r){case"N":case"NN":case"NNN":if(o===e)return x[d];break;case"NNNN":if(E===e)return x[d];break;case"NNNNN":if(D===e)return x[d];break}else if([E,o,D].indexOf(e)>=0)return x[d]}function HD(e,r){var a=e.since<=e.until?1:-1;return r===void 0?Si(e.since).year():Si(e.since).year()+(r-e.offset)*a}function ZD(){var e,r,a,d=this.localeData().eras();for(e=0,r=d.length;e<r;++e)if(a=this.clone().startOf("day").valueOf(),d[e].since<=a&&a<=d[e].until||d[e].until<=a&&a<=d[e].since)return d[e].name;return""}function YD(){var e,r,a,d=this.localeData().eras();for(e=0,r=d.length;e<r;++e)if(a=this.clone().startOf("day").valueOf(),d[e].since<=a&&a<=d[e].until||d[e].until<=a&&a<=d[e].since)return d[e].narrow;return""}function XD(){var e,r,a,d=this.localeData().eras();for(e=0,r=d.length;e<r;++e)if(a=this.clone().startOf("day").valueOf(),d[e].since<=a&&a<=d[e].until||d[e].until<=a&&a<=d[e].since)return d[e].abbr;return""}function KD(){var e,r,a,d,_=this.localeData().eras();for(e=0,r=_.length;e<r;++e)if(a=_[e].since<=_[e].until?1:-1,d=this.clone().startOf("day").valueOf(),_[e].since<=d&&d<=_[e].until||_[e].until<=d&&d<=_[e].since)return(this.year()-Si(_[e].since).year())*a+_[e].offset;return this.year()}function JD(e){return xr(this,"_erasNameRegex")||dw.call(this),e?this._erasNameRegex:this._erasRegex}function QD(e){return xr(this,"_erasAbbrRegex")||dw.call(this),e?this._erasAbbrRegex:this._erasRegex}function eP(e){return xr(this,"_erasNarrowRegex")||dw.call(this),e?this._erasNarrowRegex:this._erasRegex}function uw(e,r){return r.erasAbbrRegex(e)}function tP(e,r){return r.erasNameRegex(e)}function iP(e,r){return r.erasNarrowRegex(e)}function nP(e,r){return r._eraYearOrdinalRegex||$0}function dw(){var e=[],r=[],a=[],d=[],_,x,E=this.eras();for(_=0,x=E.length;_<x;++_)r.push(Vl(E[_].name)),e.push(Vl(E[_].abbr)),a.push(Vl(E[_].narrow)),d.push(Vl(E[_].name)),d.push(Vl(E[_].abbr)),d.push(Vl(E[_].narrow));this._erasRegex=new RegExp("^("+d.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}Zi(0,["gg",2],0,function(){return this.weekYear()%100});Zi(0,["GG",2],0,function(){return this.isoWeekYear()%100});function C2(e,r){Zi(0,[e,e.length],0,r)}C2("gggg","weekYear");C2("ggggg","weekYear");C2("GGGG","isoWeekYear");C2("GGGGG","isoWeekYear");ba("weekYear","gg");ba("isoWeekYear","GG");wa("weekYear",1);wa("isoWeekYear",1);ki("G",b2);ki("g",b2);ki("GG",us,Zl);ki("gg",us,Zl);ki("GGGG",ew,Qb);ki("gggg",ew,Qb);ki("GGGGG",x2,y2);ki("ggggg",x2,y2);p_(["gggg","ggggg","GGGG","GGGGG"],function(e,r,a,d){r[d.substr(0,2)]=qn(e)});p_(["gg","GG"],function(e,r,a,d){r[d]=Si.parseTwoDigitYear(e)});function rP(e){return kT.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function sP(e){return kT.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function oP(){return wd(this.year(),1,4)}function aP(){return wd(this.isoWeekYear(),1,4)}function lP(){var e=this.localeData()._week;return wd(this.year(),e.dow,e.doy)}function cP(){var e=this.localeData()._week;return wd(this.weekYear(),e.dow,e.doy)}function kT(e,r,a,d,_){var x;return e==null?X1(this,d,_).year:(x=wd(e,d,_),r>x&&(r=x),uP.call(this,e,r,a,d,_))}function uP(e,r,a,d,_){var x=cT(e,r,a,d,_),E=Y1(x.year,0,x.dayOfYear);return this.year(E.getUTCFullYear()),this.month(E.getUTCMonth()),this.date(E.getUTCDate()),this}Zi("Q",0,"Qo","quarter");ba("quarter","Q");wa("quarter",7);ki("Q",Q6);jr("Q",function(e,r){r[gd]=(qn(e)-1)*3});function dP(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Zi("D",["DD",2],"Do","date");ba("date","D");wa("date",9);ki("D",us);ki("DD",us,Zl);ki("Do",function(e,r){return e?r._dayOfMonthOrdinalParse||r._ordinalParse:r._dayOfMonthOrdinalParseLenient});jr(["D","DD"],Au);jr("Do",function(e,r){r[Au]=qn(e.match(us)[0])});var DT=V0("Date",!0);Zi("DDD",["DDDD",3],"DDDo","dayOfYear");ba("dayOfYear","DDD");wa("dayOfYear",4);ki("DDD",v2);ki("DDDD",eT);jr(["DDD","DDDD"],function(e,r,a){a._dayOfYear=qn(e)});function hP(e){var r=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?r:this.add(e-r,"d")}Zi("m",["mm",2],0,"minute");ba("minute","m");wa("minute",14);ki("m",us);ki("mm",us,Zl);jr(["m","mm"],Hc);var fP=V0("Minutes",!1);Zi("s",["ss",2],0,"second");ba("second","s");wa("second",15);ki("s",us);ki("ss",us,Zl);jr(["s","ss"],yd);var pP=V0("Seconds",!1);Zi("S",0,0,function(){return~~(this.millisecond()/100)});Zi(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Zi(0,["SSS",3],0,"millisecond");Zi(0,["SSSS",4],0,function(){return this.millisecond()*10});Zi(0,["SSSSS",5],0,function(){return this.millisecond()*100});Zi(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Zi(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Zi(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Zi(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ba("millisecond","ms");wa("millisecond",16);ki("S",v2,Q6);ki("SS",v2,Zl);ki("SSS",v2,eT);var bh,PT;for(bh="SSSS";bh.length<=9;bh+="S")ki(bh,$0);function mP(e,r){r[Uf]=qn(("0."+e)*1e3)}for(bh="S";bh.length<=9;bh+="S")jr(bh,mP);PT=V0("Milliseconds",!1);Zi("z",0,0,"zoneAbbr");Zi("zz",0,0,"zoneName");function _P(){return this._isUTC?"UTC":""}function gP(){return this._isUTC?"Coordinated Universal Time":""}var si=h_.prototype;si.add=cD;si.calendar=_D;si.clone=gD;si.diff=ED;si.endOf=RD;si.format=AD;si.from=ID;si.fromNow=kD;si.to=DD;si.toNow=PD;si.get=vI;si.invalidAt=$D;si.isAfter=yD;si.isBefore=vD;si.isBetween=xD;si.isSame=bD;si.isSameOrAfter=wD;si.isSameOrBefore=TD;si.isValid=jD;si.lang=ST;si.locale=ET;si.localeData=CT;si.max=jk;si.min=Uk;si.parsingFlags=VD;si.set=xI;si.startOf=LD;si.subtract=uD;si.toArray=FD;si.toObject=ND;si.toDate=BD;si.toISOString=CD;si.inspect=MD;typeof Symbol<"u"&&Symbol.for!=null&&(si[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});si.toJSON=UD;si.toString=SD;si.unix=zD;si.valueOf=OD;si.creationData=GD;si.eraName=ZD;si.eraNarrow=YD;si.eraAbbr=XD;si.eraYear=KD;si.year=lT;si.isLeapYear=NI;si.weekYear=rP;si.isoWeekYear=sP;si.quarter=si.quarters=dP;si.month=oT;si.daysInMonth=zI;si.week=si.weeks=qI;si.isoWeek=si.isoWeeks=WI;si.weeksInYear=lP;si.weeksInWeekYear=cP;si.isoWeeksInYear=oP;si.isoWeeksInISOWeekYear=aP;si.date=DT;si.day=si.days=sk;si.weekday=ok;si.isoWeekday=ak;si.dayOfYear=hP;si.hour=si.hours=pk;si.minute=si.minutes=fP;si.second=si.seconds=pP;si.millisecond=si.milliseconds=PT;si.utcOffset=Xk;si.utc=Jk;si.local=Qk;si.parseZone=eD;si.hasAlignedHourOffset=tD;si.isDST=iD;si.isLocal=rD;si.isUtcOffset=sD;si.isUtc=xT;si.isUTC=xT;si.zoneAbbr=_P;si.zoneName=gP;si.dates=Sc("dates accessor is deprecated. Use date instead.",DT);si.months=Sc("months accessor is deprecated. Use month instead",oT);si.years=Sc("years accessor is deprecated. Use year instead",lT);si.zone=Sc("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Kk);si.isDSTShifted=Sc("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",nD);function yP(e){return cs(e*1e3)}function vP(){return cs.apply(null,arguments).parseZone()}function LT(e){return e}var br=Xb.prototype;br.calendar=sI;br.longDateFormat=cI;br.invalidDate=dI;br.ordinal=pI;br.preparse=LT;br.postformat=LT;br.relativeTime=_I;br.pastFuture=gI;br.set=nI;br.eras=qD;br.erasParse=WD;br.erasConvertYear=HD;br.erasAbbrRegex=QD;br.erasNameRegex=JD;br.erasNarrowRegex=eP;br.months=PI;br.monthsShort=LI;br.monthsParse=OI;br.monthsRegex=FI;br.monthsShortRegex=BI;br.week=jI;br.firstDayOfYear=GI;br.firstDayOfWeek=$I;br.weekdays=ek;br.weekdaysMin=ik;br.weekdaysShort=tk;br.weekdaysParse=rk;br.weekdaysRegex=lk;br.weekdaysShortRegex=ck;br.weekdaysMinRegex=uk;br.isPM=hk;br.meridiem=mk;function Oy(e,r,a,d){var _=Id(),x=Lu().set(d,r);return _[a](x,e)}function RT(e,r,a){if(Sd(e)&&(r=e,e=void 0),e=e||"",r!=null)return Oy(e,r,a,"month");var d,_=[];for(d=0;d<12;d++)_[d]=Oy(e,d,a,"month");return _}function hw(e,r,a,d){typeof e=="boolean"?(Sd(r)&&(a=r,r=void 0),r=r||""):(r=e,a=r,e=!1,Sd(r)&&(a=r,r=void 0),r=r||"");var _=Id(),x=e?_._week.dow:0,E,o=[];if(a!=null)return Oy(r,(a+x)%7,d,"day");for(E=0;E<7;E++)o[E]=Oy(r,(E+x)%7,d,"day");return o}function xP(e,r){return RT(e,r,"months")}function bP(e,r){return RT(e,r,"monthsShort")}function wP(e,r,a){return hw(e,r,a,"weekdays")}function TP(e,r,a){return hw(e,r,a,"weekdaysShort")}function EP(e,r,a){return hw(e,r,a,"weekdaysMin")}Sh("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var r=e%10,a=qn(e%100/10)===1?"th":r===1?"st":r===2?"nd":r===3?"rd":"th";return e+a}});Si.lang=Sc("moment.lang is deprecated. Use moment.locale instead.",Sh);Si.langData=Sc("moment.langData is deprecated. Use moment.localeData instead.",Id);var hd=Math.abs;function SP(){var e=this._data;return this._milliseconds=hd(this._milliseconds),this._days=hd(this._days),this._months=hd(this._months),e.milliseconds=hd(e.milliseconds),e.seconds=hd(e.seconds),e.minutes=hd(e.minutes),e.hours=hd(e.hours),e.months=hd(e.months),e.years=hd(e.years),this}function OT(e,r,a,d){var _=Kc(r,a);return e._milliseconds+=d*_._milliseconds,e._days+=d*_._days,e._months+=d*_._months,e._bubble()}function CP(e,r){return OT(this,e,r,1)}function MP(e,r){return OT(this,e,r,-1)}function W5(e){return e<0?Math.floor(e):Math.ceil(e)}function AP(){var e=this._milliseconds,r=this._days,a=this._months,d=this._data,_,x,E,o,D;return e>=0&&r>=0&&a>=0||e<=0&&r<=0&&a<=0||(e+=W5(L3(a)+r)*864e5,r=0,a=0),d.milliseconds=e%1e3,_=bc(e/1e3),d.seconds=_%60,x=bc(_/60),d.minutes=x%60,E=bc(x/60),d.hours=E%24,r+=bc(E/24),D=bc(zT(r)),a+=D,r-=W5(L3(D)),o=bc(a/12),a%=12,d.days=r,d.months=a,d.years=o,this}function zT(e){return e*4800/146097}function L3(e){return e*146097/4800}function IP(e){if(!this.isValid())return NaN;var r,a,d=this._milliseconds;if(e=Cc(e),e==="month"||e==="quarter"||e==="year")switch(r=this._days+d/864e5,a=this._months+zT(r),e){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(r=this._days+Math.round(L3(this._months)),e){case"week":return r/7+d/6048e5;case"day":return r+d/864e5;case"hour":return r*24+d/36e5;case"minute":return r*1440+d/6e4;case"second":return r*86400+d/1e3;case"millisecond":return Math.floor(r*864e5)+d;default:throw new Error("Unknown unit "+e)}}function kP(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+qn(this._months/12)*31536e6:NaN}function kd(e){return function(){return this.as(e)}}var DP=kd("ms"),PP=kd("s"),LP=kd("m"),RP=kd("h"),OP=kd("d"),zP=kd("w"),BP=kd("M"),FP=kd("Q"),NP=kd("y");function UP(){return Kc(this)}function jP(e){return e=Cc(e),this.isValid()?this[e+"s"]():NaN}function sp(e){return function(){return this.isValid()?this._data[e]:NaN}}var VP=sp("milliseconds"),$P=sp("seconds"),GP=sp("minutes"),qP=sp("hours"),WP=sp("days"),HP=sp("months"),ZP=sp("years");function YP(){return bc(this.days()/7)}var md=Math.round,p0={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function XP(e,r,a,d,_){return _.relativeTime(r||1,!!a,e,d)}function KP(e,r,a,d){var _=Kc(e).abs(),x=md(_.as("s")),E=md(_.as("m")),o=md(_.as("h")),D=md(_.as("d")),V=md(_.as("M")),X=md(_.as("w")),Z=md(_.as("y")),he=x<=a.ss&&["s",x]||x<a.s&&["ss",x]||E<=1&&["m"]||E<a.m&&["mm",E]||o<=1&&["h"]||o<a.h&&["hh",o]||D<=1&&["d"]||D<a.d&&["dd",D];return a.w!=null&&(he=he||X<=1&&["w"]||X<a.w&&["ww",X]),he=he||V<=1&&["M"]||V<a.M&&["MM",V]||Z<=1&&["y"]||["yy",Z],he[2]=r,he[3]=+e>0,he[4]=d,XP.apply(null,he)}function JP(e){return e===void 0?md:typeof e=="function"?(md=e,!0):!1}function QP(e,r){return p0[e]===void 0?!1:r===void 0?p0[e]:(p0[e]=r,e==="s"&&(p0.ss=r-1),!0)}function eL(e,r){if(!this.isValid())return this.localeData().invalidDate();var a=!1,d=p0,_,x;return typeof e=="object"&&(r=e,e=!1),typeof e=="boolean"&&(a=e),typeof r=="object"&&(d=Object.assign({},p0,r),r.s!=null&&r.ss==null&&(d.ss=r.s-1)),_=this.localeData(),x=KP(this,!a,d,_),a&&(x=_.pastFuture(+this,x)),_.postformat(x)}var Nx=Math.abs;function u0(e){return(e>0)-(e<0)||+e}function M2(){if(!this.isValid())return this.localeData().invalidDate();var e=Nx(this._milliseconds)/1e3,r=Nx(this._days),a=Nx(this._months),d,_,x,E,o=this.asSeconds(),D,V,X,Z;return o?(d=bc(e/60),_=bc(d/60),e%=60,d%=60,x=bc(a/12),a%=12,E=e?e.toFixed(3).replace(/\.?0+$/,""):"",D=o<0?"-":"",V=u0(this._months)!==u0(o)?"-":"",X=u0(this._days)!==u0(o)?"-":"",Z=u0(this._milliseconds)!==u0(o)?"-":"",D+"P"+(x?V+x+"Y":"")+(a?V+a+"M":"")+(r?X+r+"D":"")+(_||d||e?"T":"")+(_?Z+_+"H":"")+(d?Z+d+"M":"")+(e?Z+E+"S":"")):"P0D"}var ar=S2.prototype;ar.isValid=Wk;ar.abs=SP;ar.add=CP;ar.subtract=MP;ar.as=IP;ar.asMilliseconds=DP;ar.asSeconds=PP;ar.asMinutes=LP;ar.asHours=RP;ar.asDays=OP;ar.asWeeks=zP;ar.asMonths=BP;ar.asQuarters=FP;ar.asYears=NP;ar.valueOf=kP;ar._bubble=AP;ar.clone=UP;ar.get=jP;ar.milliseconds=VP;ar.seconds=$P;ar.minutes=GP;ar.hours=qP;ar.days=WP;ar.weeks=YP;ar.months=HP;ar.years=ZP;ar.humanize=eL;ar.toISOString=M2;ar.toString=M2;ar.toJSON=M2;ar.locale=ET;ar.localeData=CT;ar.toIsoString=Sc("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",M2);ar.lang=ST;Zi("X",0,0,"unix");Zi("x",0,0,"valueOf");ki("x",b2);ki("X",wI);jr("X",function(e,r,a){a._d=new Date(parseFloat(e)*1e3)});jr("x",function(e,r,a){a._d=new Date(qn(e))});//! moment.js
Si.version="2.29.4";tI(cs);Si.fn=si;Si.min=Vk;Si.max=$k;Si.now=Gk;Si.utc=Lu;Si.unix=yP;Si.months=xP;Si.isDate=d_;Si.locale=Sh;Si.invalid=_2;Si.duration=Kc;Si.isMoment=Xc;Si.weekdays=wP;Si.parseZone=vP;Si.localeData=Id;Si.isDuration=cy;Si.monthsShort=bP;Si.weekdaysMin=EP;Si.defineLocale=rw;Si.updateLocale=vk;Si.locales=xk;Si.weekdaysShort=TP;Si.normalizeUnits=Cc;Si.relativeTimeRounding=JP;Si.relativeTimeThreshold=QP;Si.calendarFormat=mD;Si.prototype=si;Si.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var R3={},tL={get exports(){return R3},set exports(e){R3=e}};(function(e,r){(function(a,d){e.exports=d()})(Jo,function(){var a,d,_;function x(o,D){if(!a)a=D;else if(!d)d=D;else{var V="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+d+")(sharedChunk); self.onerror = null;",X={};a(X),_=D(X),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(_.workerUrl=window.URL.createObjectURL(new Blob([V],{type:"text/javascript"})))}}x(["exports"],function(o){var D=typeof self<"u"?self:{},V="2.12.0";let X;const Z={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(X==null){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{X={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):i}catch{X=i}}return X},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},he={supported:!1,testSupport:function(i){!Re&&_e&&(nt?ke(i):Se=i)}};let Se,_e,Re=!1,nt=!1;function ke(i){const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,_e),i.isContextLost())return;he.supported=!0}catch{}i.deleteTexture(t),Re=!0}D.document&&(_e=D.document.createElement("img"),_e.onload=function(){Se&&ke(Se),Se=null,nt=!0},_e.onerror=function(){Re=!0,Se=null},_e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Le="01";var $e=Et;function Et(i,t,n,l){this.cx=3*i,this.bx=3*(n-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=n,this.p2y=l}Et.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var n=i,l=0;l<8;l++){var u=this.sampleCurveX(n)-i;if(Math.abs(u)<t)return n;var p=this.sampleCurveDerivativeX(n);if(Math.abs(p)<1e-6)break;n-=u/p}var g=0,b=1;for(n=i,l=0;l<20&&(u=this.sampleCurveX(n),!(Math.abs(u-i)<t));l++)i>u?g=n:b=n,n=.5*(b-g)+g;return n},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};var Fe=z;function z(i,t){this.x=i,this.y=t}z.prototype={clone:function(){return new z(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,t){return this.clone()._rotateAround(i,t)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var t=i.x-this.x,n=i.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,t){return Math.atan2(this.x*t-this.y*i,this.x*i+this.y*t)},_matMult:function(i){var t=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=t,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var t=Math.cos(i),n=Math.sin(i),l=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=l,this},_rotateAround:function(i,t){var n=Math.cos(i),l=Math.sin(i),u=t.y+l*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-l*(this.y-t.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},z.convert=function(i){return i instanceof z?i:Array.isArray(i)?new z(i[0],i[1]):i};const Lt=Math.PI/180,ot=180/Math.PI;function bt(i){return i*Lt}function Ht(i){return i*ot}const Yt=[[0,0],[1,0],[1,1],[0,1]];function Wt(i){if(i<=0)return 0;if(i>=1)return 1;const t=i*i,n=t*i;return 4*(i<.5?n:3*(i-t)+n-.75)}function hi(i,t,n,l){const u=new $e(i,t,n,l);return function(p){return u.solve(p)}}const ri=hi(.25,.1,.25,1);function fi(i,t,n){return Math.min(n,Math.max(t,i))}function pn(i,t,n){return(n=fi((n-i)/(t-i),0,1))*n*(3-2*n)}function mn(i,t,n){const l=n-t,u=((i-t)%l+l)%l+t;return u===t?n:u}function tn(i,t,n){if(!i.length)return n(null,[]);let l=i.length;const u=new Array(i.length);let p=null;i.forEach((g,b)=>{t(g,(S,C)=>{S&&(p=S),u[b]=C,--l==0&&n(p,u)})})}function ts(i){const t=[];for(const n in i)t.push(i[n]);return t}function Fn(i,...t){for(const n of t)for(const l in n)i[l]=n[l];return i}let Nn=1;function Is(){return Nn++}function xs(){return function i(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function zs(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Bs(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function Hr(i,t){i.forEach(n=>{t[n]&&(t[n]=t[n].bind(t))})}function Zr(i,t){return i.indexOf(t,i.length-t.length)!==-1}function ds(i,t,n){const l={};for(const u in i)l[u]=t.call(n||this,i[u],u,i);return l}function Sr(i,t,n){const l={};for(const u in i)t.call(n||this,i[u],u,i)&&(l[u]=i[u]);return l}function bs(i){return Array.isArray(i)?i.map(bs):typeof i=="object"&&i?ds(i,bs):i}const Uo={};function Ce(i){Uo[i]||(typeof console<"u"&&console.warn(i),Uo[i]=!0)}function Ve(i,t,n){return(n.y-i.y)*(t.x-i.x)>(t.y-i.y)*(n.x-i.x)}function tt(i){let t=0;for(let n,l,u=0,p=i.length,g=p-1;u<p;g=u++)n=i[u],l=i[g],t+=(l.x-n.x)*(n.y+l.y);return t}function kt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ct(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,l,u,p)=>{const g=u||p;return t[l]=!g||g.toLowerCase(),""}),t["max-age"]){const n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}let zt=null;function ui(i){if(zt==null){const t=i.navigator?i.navigator.userAgent:null;zt=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return zt}function Xt(i){try{const t=D[i];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}function Kt(i,t){return[i[4*t],i[4*t+1],i[4*t+2],i[4*t+3]]}const Nt="mapbox-tiles";let pi,di,Ti=500,Di=50;function Yi(){try{return D.caches}catch{}}function _n(){Yi()&&!pi&&(pi=D.caches.open(Nt))}function cn(i){const t=i.indexOf("?");if(t<0)return i;const n=function(u){const p=u.indexOf("?");return p>0?u.slice(p+1).split("&"):[]}(i),l=n.filter(u=>{const p=u.split("=");return p[0]==="language"||p[0]==="worldview"});return l.length?`${i.slice(0,t)}?${l.join("&")}`:i.slice(0,t)}let Yn=1/0;const nr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(nr);class Zs extends Error{constructor(t,n,l){n===401&&Eo(l)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=n,this.url=l}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ks=kt()?()=>self.worker&&self.worker.referrer:()=>(D.location.protocol==="blob:"?D.parent:D).location.href,Yr=function(i,t){if(!(/^file:/.test(n=i.url)||/^file:/.test(ks())&&!/^\w+:/.test(n))){if(D.fetch&&D.Request&&D.AbortController&&D.Request.prototype.hasOwnProperty("signal"))return function(l,u){const p=new D.AbortController,g=new D.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:ks(),signal:p.signal});let b=!1,S=!1;const C=(P=g.url).indexOf("sku=")>0&&Eo(P);var P;l.type==="json"&&g.headers.set("Accept","application/json");const O=($,G,Y)=>{if(S)return;if($&&$.message!=="SecurityError"&&Ce($),G&&Y)return B(G);const ne=Date.now();D.fetch(g).then(ye=>{if(ye.ok){const Ee=C?ye.clone():null;return B(ye,Ee,ne)}return u(new Zs(ye.statusText,ye.status,l.url))}).catch(ye=>{ye.code!==20&&u(new Error(ye.message))})},B=($,G,Y)=>{(l.type==="arrayBuffer"?$.arrayBuffer():l.type==="json"?$.json():$.text()).then(ne=>{S||(G&&Y&&function(ye,Ee,ge){if(_n(),!pi)return;const be={status:Ee.status,statusText:Ee.statusText,headers:new D.Headers};Ee.headers.forEach((rt,it)=>be.headers.set(it,rt));const Pe=ct(Ee.headers.get("Cache-Control")||"");if(Pe["no-store"])return;Pe["max-age"]&&be.headers.set("Expires",new Date(ge+1e3*Pe["max-age"]).toUTCString());const Ie=be.headers.get("Expires");Ie&&(new Date(Ie).getTime()-ge<42e4||function(rt,it){if(di===void 0)try{new Response(new ReadableStream),di=!0}catch{di=!1}di?it(rt.body):rt.blob().then(it)}(Ee,rt=>{const it=new D.Response(rt,be);_n(),pi&&pi.then(xt=>xt.put(cn(ye.url),it)).catch(xt=>Ce(xt.message))}))}(g,G,Y),b=!0,u(null,ne,$.headers.get("Cache-Control"),$.headers.get("Expires")))}).catch(ne=>{S||u(new Error(ne.message))})};return C?function($,G){if(_n(),!pi)return G(null);const Y=cn($.url);pi.then(ne=>{ne.match(Y).then(ye=>{const Ee=function(ge){if(!ge)return!1;const be=new Date(ge.headers.get("Expires")||0),Pe=ct(ge.headers.get("Cache-Control")||"");return be>Date.now()&&!Pe["no-cache"]}(ye);ne.delete(Y),Ee&&ne.put(Y,ye.clone()),G(null,ye,Ee)}).catch(G)}).catch(G)}(g,O):O(null,null),{cancel:()=>{S=!0,b||p.abort()}}}(i,t);if(kt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t,void 0,!0)}var n;return function(l,u){const p=new D.XMLHttpRequest;p.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(p.responseType="arraybuffer");for(const g in l.headers)p.setRequestHeader(g,l.headers[g]);return l.type==="json"&&(p.responseType="text",p.setRequestHeader("Accept","application/json")),p.withCredentials=l.credentials==="include",p.onerror=()=>{u(new Error(p.statusText))},p.onload=()=>{if((p.status>=200&&p.status<300||p.status===0)&&p.response!==null){let g=p.response;if(l.type==="json")try{g=JSON.parse(p.response)}catch(b){return u(b)}u(null,g,p.getResponseHeader("Cache-Control"),p.getResponseHeader("Expires"))}else u(new Zs(p.statusText,p.status,l.url))},p.send(l.body),{cancel:()=>p.abort()}}(i,t)},Ys=function(i,t){return Yr(Fn(i,{type:"arrayBuffer"}),t)};function Or(i){const t=D.document.createElement("a");return t.href=i,t.protocol===D.document.location.protocol&&t.host===D.document.location.host}const rr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Cr,ia;Cr=[],ia=0;const Yl=function(i,t){if(he.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),ia>=Z.MAX_PARALLEL_IMAGE_REQUESTS){const p={requestParameters:i,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Cr.push(p),p}ia++;let n=!1;const l=()=>{if(!n)for(n=!0,ia--;Cr.length&&ia<Z.MAX_PARALLEL_IMAGE_REQUESTS;){const p=Cr.shift(),{requestParameters:g,callback:b,cancelled:S}=p;S||(p.cancel=Yl(g,b).cancel)}},u=Ys(i,(p,g,b,S)=>{l(),p?t(p):g&&(D.createImageBitmap?function(C,P){const O=new D.Blob([new Uint8Array(C)],{type:"image/png"});D.createImageBitmap(O).then(B=>{P(null,B)}).catch(B=>{P(new Error(`Could not load image because of ${B.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(g,(C,P)=>t(C,P,b,S)):function(C,P){const O=new D.Image,B=D.URL;O.onload=()=>{P(null,O),B.revokeObjectURL(O.src),O.onload=null,D.requestAnimationFrame(()=>{O.src=rr})},O.onerror=()=>P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const $=new D.Blob([new Uint8Array(C)],{type:"image/png"});O.src=C.byteLength?B.createObjectURL($):rr}(g,(C,P)=>t(C,P,b,S)))});return{cancel:()=>{u.cancel(),l()}}},dl="NO_ACCESS_TOKEN";function oo(i){return i.indexOf("mapbox:")===0}function Eo(i){return Z.API_URL_REGEX.test(i)}function Ea(i){return Z.API_CDN_URL_REGEX.test(i)}function Xl(i){return Z.API_STYLE_REGEX.test(i)&&!hl(i)}function hl(i){return Z.API_SPRITE_REGEX.test(i)}const Na=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fs(i){const t=i.match(Na);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Ua(i){const t=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${t}`}function Mc(i){if(!i)return null;const t=i.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(D.atob(t[1]).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class pe{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const n=Mc(Z.ACCESS_TOKEN);let l="";return l=n&&n.u?D.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(u,p)=>String.fromCharCode(Number("0x"+p)))):Z.ACCESS_TOKEN||"",t?`mapbox.eventData.${t}:${l}`:`mapbox.eventData:${l}`}fetchEventData(){const t=Xt("localStorage"),n=this.getStorageKey(),l=this.getStorageKey("uuid");if(t)try{const u=D.localStorage.getItem(n);u&&(this.eventData=JSON.parse(u));const p=D.localStorage.getItem(l);p&&(this.anonId=p)}catch{Ce("Unable to read from LocalStorage")}}saveEventData(){const t=Xt("localStorage"),n=this.getStorageKey(),l=this.getStorageKey("uuid");if(t)try{D.localStorage.setItem(l,this.anonId),Object.keys(this.eventData).length>=1&&D.localStorage.setItem(n,JSON.stringify(this.eventData))}catch{Ce("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,n,l,u){if(!Z.EVENTS_URL)return;const p=Fs(Z.EVENTS_URL);p.params.push(`access_token=${u||Z.ACCESS_TOKEN||""}`);const g={event:this.type,created:new Date(t).toISOString()},b=n?Fn(g,n):g,S={url:Ua(p),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=function(C,P){return Yr(Fn(C,{method:"POST"}),P)}(S,C=>{this.pendingRequest=null,l(C),this.saveEventData(),this.processRequests(u)})}queueRequest(t,n){this.queue.push(t),this.processRequests(n)}}const q=new class extends pe{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,t){Z.EVENTS_URL&&Z.ACCESS_TOKEN&&Array.isArray(i)&&i.some(n=>oo(n)||Eo(n))&&this.queueRequest(Date.now(),t)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Mc(Z.ACCESS_TOKEN),n=t?t.u:Z.ACCESS_TOKEN;let l=n!==this.eventData.tokenU;Bs(this.anonId)||(this.anonId=xs(),l=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const p=new Date(this.eventData.lastSuccess),g=new Date(u),b=(u-this.eventData.lastSuccess)/864e5;l=l||b>=1||b<-1||p.getDate()!==g.getDate()}else l=!0;l?this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:V,skuId:Le,"enabled.telemetry":!1,userId:this.anonId},p=>{p||(this.eventData.lastSuccess=u,this.eventData.tokenU=n)},i):this.processRequests()}},Q=q.postTurnstileEvent.bind(q),fe=new class extends pe{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,t,n,l){this.skuToken=t,this.errorCb=l,Z.EVENTS_URL&&(n||Z.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},n):this.errorCb(new Error(dl)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),Bs(this.anonId)||(this.anonId=xs()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:V,skuId:Le,skuToken:this.skuToken,userId:this.anonId},l=>{l?this.errorCb(l):t&&(this.success[t]=!0)},i))}},ve=fe.postMapLoadEvent.bind(fe),Oe=new class extends pe{constructor(){super("gljs.performance")}postPerformanceEvent(i,t){Z.EVENTS_URL&&(i||Z.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},i)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:t,performanceData:n}=this.queue.shift(),l=function(u){const p=D.performance.getEntriesByType("resource"),g=D.performance.getEntriesByType("mark"),b=function(B){const $={};if(B){for(const G in B)if(G!=="other")for(const Y of B[G]){const ne=`${G}ResolveRangeMin`,ye=`${G}ResolveRangeMax`,Ee=`${G}RequestCount`,ge=`${G}RequestCachedCount`;$[ne]=Math.min($[ne]||1/0,Y.startTime),$[ye]=Math.max($[ye]||-1/0,Y.responseEnd);const be=Pe=>{$[Pe]===void 0&&($[Pe]=0),++$[Pe]};Y.transferSize!==void 0&&Y.transferSize===0&&be(ge),be(Ee)}}return $}(function(B,$){const G={};if(B)for(const Y of B){const ne=$(Y);G[ne]===void 0&&(G[ne]=[]),G[ne].push(Y)}return G}(p,Ot)),S=D.devicePixelRatio,C=D.navigator.connection||D.navigator.mozConnection||D.navigator.webkitConnection,P={counters:[],metadata:[],attributes:[]},O=(B,$,G)=>{G!=null&&B.push({name:$,value:G.toString()})};for(const B in b)O(P.counters,B,b[B]);if(u.interactionRange[0]!==1/0&&u.interactionRange[1]!==-1/0&&(O(P.counters,"interactionRangeMin",u.interactionRange[0]),O(P.counters,"interactionRangeMax",u.interactionRange[1])),g)for(const B of Object.keys(Tt)){const $=Tt[B],G=g.find(Y=>Y.name===$);G&&O(P.counters,$,G.startTime)}return O(P.counters,"visibilityHidden",u.visibilityHidden),O(P.attributes,"style",function(B){if(B)for(const $ of B){const G=$.name.split("?")[0];if(Xl(G)){const Y=G.split("/").slice(-2);if(Y.length===2)return`mapbox://styles/${Y[0]}/${Y[1]}`}}}(p)),O(P.attributes,"terrainEnabled",u.terrainEnabled?"true":"false"),O(P.attributes,"fogEnabled",u.fogEnabled?"true":"false"),O(P.attributes,"projection",u.projection),O(P.attributes,"zoom",u.zoom),O(P.metadata,"devicePixelRatio",S),O(P.metadata,"connectionEffectiveType",C?C.effectiveType:void 0),O(P.metadata,"navigatorUserAgent",D.navigator.userAgent),O(P.metadata,"screenWidth",D.screen.width),O(P.metadata,"screenHeight",D.screen.height),O(P.metadata,"windowWidth",D.innerWidth),O(P.metadata,"windowHeight",D.innerHeight),O(P.metadata,"mapWidth",u.width/S),O(P.metadata,"mapHeight",u.height/S),O(P.metadata,"webglRenderer",u.renderer),O(P.metadata,"webglVendor",u.vendor),O(P.metadata,"sdkVersion",V),O(P.metadata,"sdkIdentifier","mapbox-gl-js"),P}(n);for(const u of l.metadata);for(const u of l.counters);for(const u of l.attributes);this.postEvent(t,l,()=>{},i)}},He=Oe.postPerformanceEvent.bind(Oe),Ye=new class extends pe{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,t,n,l){if(!Z.API_URL||!Z.SESSION_PATH)return;const u=Fs(Z.API_URL+Z.SESSION_PATH);u.params.push(`sku=${t||""}`),u.params.push(`access_token=${l||Z.ACCESS_TOKEN||""}`);const p={url:Ua(u),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(g,b){return Yr(Fn(g,{method:"GET"}),b)}(p,g=>{this.pendingRequest=null,n(g),this.saveEventData(),this.processRequests(l)})}getSessionAPI(i,t,n,l){this.skuToken=t,this.errorCb=l,Z.SESSION_PATH&&Z.API_URL&&(n||Z.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},n):this.errorCb(new Error(dl)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,l=>{l?this.errorCb(l):t&&(this.success[t]=!0)},i)}},Be=Ye.getSessionAPI.bind(Ye),Qe=new Set,Tt={create:"create",load:"load",fullLoad:"fullLoad"},ii={mark(i){D.performance.mark(i)},measure(i,t,n){D.performance.measure(i,t,n)}};function Ot(i){const t=i.name.split("?")[0];return Ea(t)&&t.includes("mapbox-gl.js")?"javascript":Ea(t)&&t.includes("mapbox-gl.css")?"css":function(n){return Z.API_FONTS_REGEX.test(n)}(t)?"fontRange":hl(t)?"sprite":Xl(t)?"style":function(n){return Z.API_TILEJSON_REGEX.test(n)}(t)?"tilejson":"other"}const Ai=D.performance;function Ci(i){const t=i?i.url.toString():void 0;return Ai.getEntriesByName(t)}let yi,Li,an,Mn;const bi={now:()=>an!==void 0?an:D.performance.now(),setNow(i){an=i},restoreNow(){an=void 0},frame(i){const t=D.requestAnimationFrame(i);return{cancel:()=>D.cancelAnimationFrame(t)}},getImageData(i,t=0){const{width:n,height:l}=i;Mn||(Mn=D.document.createElement("canvas"));const u=Mn.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return(n>Mn.width||l>Mn.height)&&(Mn.width=n,Mn.height=l),u.clearRect(-t,-t,n+2*t,l+2*t),u.drawImage(i,0,0,n,l),u.getImageData(-t,-t,n+2*t,l+2*t)},resolveURL:i=>(yi||(yi=D.document.createElement("a")),yi.href=i,yi.href),get devicePixelRatio(){return D.devicePixelRatio},get prefersReducedMotion(){return!!D.matchMedia&&(Li==null&&(Li=D.matchMedia("(prefers-reduced-motion: reduce)")),Li.matches)}};function Xn(i,t,n){n[i]&&n[i].indexOf(t)!==-1||(n[i]=n[i]||[],n[i].push(t))}function Rn(i,t,n){if(n&&n[i]){const l=n[i].indexOf(t);l!==-1&&n[i].splice(l,1)}}class na{constructor(t,n={}){Fn(this,n),this.type=t}}class ja extends na{constructor(t,n={}){super("error",Fn({error:t},n))}}class ao{on(t,n){return this._listeners=this._listeners||{},Xn(t,n,this._listeners),this}off(t,n){return Rn(t,n,this._listeners),Rn(t,n,this._oneTimeListeners),this}once(t,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},Xn(t,n,this._oneTimeListeners),this):new Promise(l=>this.once(t,l))}fire(t,n){typeof t=="string"&&(t=new na(t,n||{}));const l=t.type;if(this.listens(l)){t.target=this;const u=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const b of u)b.call(this,t);const p=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const b of p)Rn(l,b,this._oneTimeListeners),b.call(this,t);const g=this._eventedParent;g&&(Fn(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),g.fire(t))}else t instanceof ja&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,n){return this._eventedParent=t,this._eventedParentData=n,this}}var yt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function So(i,...t){for(const n of t)for(const l in n)i[l]=n[l];return i}function zr(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Br(i){if(Array.isArray(i))return i.map(Br);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const n in i)t[n]=Br(i[n]);return t}return zr(i)}class Kl extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}var Ds=Kl;class Jc{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[l,u]of n)this.bindings[l]=u}concat(t){return new Jc(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var Ou=Jc;const hs={kind:"null"},ti={kind:"number"},on={kind:"string"},ln={kind:"boolean"},Co={kind:"color"},ra={kind:"object"},Ui={kind:"value"},Jl={kind:"collator"},jo={kind:"formatted"},Sa={kind:"resolvedImage"};function is(i,t){return{kind:"array",itemType:i,N:t}}function Wn(i){if(i.kind==="array"){const t=Wn(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const ws=[hs,ti,on,ln,Co,jo,ra,is(Ui),Sa];function Ca(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Ca(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const n of ws)if(!Ca(n,t))return null}}return`Expected ${Wn(i)} but found ${Wn(t)} instead.`}function fl(i,t){return t.some(n=>n.kind===i.kind)}function Vo(i,t){return t.some(n=>n==="null"?i===null:n==="array"?Array.isArray(i):n==="object"?i&&!Array.isArray(i)&&typeof i=="object":n===typeof i)}var pl,Va={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ma(i){return(i=Math.round(i))<0?0:i>255?255:i}function $a(i){return Ma(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function Ac(i){return(t=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:t>1?1:t;var t}function Ic(i,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?i+(t-i)*n*6:2*n<1?t:3*n<2?i+(t-i)*(2/3-n)*6:i}try{pl={}.parseCSSColor=function(i){var t,n=i.replace(/ /g,"").toLowerCase();if(n in Va)return Va[n].slice();if(n[0]==="#")return n.length===4?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:n.length===7&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=n.indexOf("("),u=n.indexOf(")");if(l!==-1&&u+1===n.length){var p=n.substr(0,l),g=n.substr(l+1,u-(l+1)).split(","),b=1;switch(p){case"rgba":if(g.length!==4)return null;b=Ac(g.pop());case"rgb":return g.length!==3?null:[$a(g[0]),$a(g[1]),$a(g[2]),b];case"hsla":if(g.length!==4)return null;b=Ac(g.pop());case"hsl":if(g.length!==3)return null;var S=(parseFloat(g[0])%360+360)%360/360,C=Ac(g[1]),P=Ac(g[2]),O=P<=.5?P*(C+1):P+C-P*C,B=2*P-O;return[Ma(255*Ic(B,O,S+1/3)),Ma(255*Ic(B,O,S)),Ma(255*Ic(B,O,S-1/3)),b];default:return null}}return null}}catch{}class Ns{constructor(t,n,l,u=1){this.r=t,this.g=n,this.b=l,this.a=u}static parse(t){if(!t)return;if(t instanceof Ns)return t;if(typeof t!="string")return;const n=pl(t);return n?new Ns(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}toString(){const[t,n,l,u]=this.toArray();return`rgba(${Math.round(t)},${Math.round(n)},${Math.round(l)},${u})`}toArray(){const{r:t,g:n,b:l,a:u}=this;return u===0?[0,0,0,0]:[255*t/u,255*n/u,255*l/u,u]}toArray01(){const{r:t,g:n,b:l,a:u}=this;return u===0?[0,0,0,0]:[t/u,n/u,l/u,u]}toArray01PremultipliedAlpha(){const{r:t,g:n,b:l,a:u}=this;return[t,n,l,u]}}Ns.black=new Ns(0,0,0,1),Ns.white=new Ns(1,1,1,1),Ns.transparent=new Ns(0,0,0,0),Ns.red=new Ns(1,0,0,1),Ns.blue=new Ns(0,0,1,1);var kr=Ns;class ml{constructor(t,n,l){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class zu{constructor(t,n,l,u,p){this.text=t.normalize?t.normalize():t,this.image=n,this.scale=l,this.fontStack=u,this.textColor=p}}class fs{constructor(t){this.sections=t}static fromString(t){return new fs([new zu(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof fs?t:fs.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const n of this.sections){if(n.image){t.push(["image",n.image.name]);continue}t.push(n.text);const l={};n.fontStack&&(l["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(l["font-scale"]=n.scale),n.textColor&&(l["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(l)}return t}}class Mo{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Mo({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Dd(i,t,n,l){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[i,t,n,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[i,t,n,l]:[i,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qc(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof kr||i instanceof ml||i instanceof fs||i instanceof Mo)return!0;if(Array.isArray(i)){for(const t of i)if(!Qc(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!Qc(i[t]))return!1;return!0}return!1}function Xr(i){if(i===null)return hs;if(typeof i=="string")return on;if(typeof i=="boolean")return ln;if(typeof i=="number")return ti;if(i instanceof kr)return Co;if(i instanceof ml)return Jl;if(i instanceof fs)return jo;if(i instanceof Mo)return Sa;if(Array.isArray(i)){const t=i.length;let n;for(const l of i){const u=Xr(l);if(n){if(n===u)continue;n=Ui;break}n=u}return is(n||Ui,t)}return ra}function _l(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof kr||i instanceof fs||i instanceof Mo?i.toString():JSON.stringify(i)}class eu{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Qc(t[1]))return n.error("invalid value");const l=t[1];let u=Xr(l);const p=n.expectedType;return u.kind!=="array"||u.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(u=p),new eu(u,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof kr?["rgba"].concat(this.value.toArray()):this.value instanceof fs?this.value.serialize():this.value}}var gl=eu,ns=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const Ga={string:on,number:ti,boolean:ln,object:ra};class tu{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let l,u=1;const p=t[0];if(p==="array"){let b,S;if(t.length>2){const C=t[1];if(typeof C!="string"||!(C in Ga)||C==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);b=Ga[C],u++}else b=Ui;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);S=t[2],u++}l=is(b,S)}else l=Ga[p];const g=[];for(;u<t.length;u++){const b=n.parse(t[u],u,Ui);if(!b)return null;g.push(b)}return new tu(l,g)}evaluate(t){for(let n=0;n<this.args.length;n++){const l=this.args[n].evaluate(t);if(!Ca(this.type,Xr(l)))return l;if(n===this.args.length-1)throw new ns(`Expected value to be of type ${Wn(this.type)}, but found ${Wn(Xr(l))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,n=[t.kind];if(t.kind==="array"){const l=t.itemType;if(l.kind==="string"||l.kind==="number"||l.kind==="boolean"){n.push(l.kind);const u=t.N;(typeof u=="number"||this.args.length>1)&&n.push(u)}}return n.concat(this.args.map(l=>l.serialize()))}}var kn=tu;class Un{constructor(t){this.type=jo,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const l=t[1];if(!Array.isArray(l)&&typeof l=="object")return n.error("First argument must be an image or text section.");const u=[];let p=!1;for(let g=1;g<=t.length-1;++g){const b=t[g];if(p&&typeof b=="object"&&!Array.isArray(b)){p=!1;let S=null;if(b["font-scale"]&&(S=n.parse(b["font-scale"],1,ti),!S))return null;let C=null;if(b["text-font"]&&(C=n.parse(b["text-font"],1,is(on)),!C))return null;let P=null;if(b["text-color"]&&(P=n.parse(b["text-color"],1,Co),!P))return null;const O=u[u.length-1];O.scale=S,O.font=C,O.textColor=P}else{const S=n.parse(t[g],1,Ui);if(!S)return null;const C=S.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,u.push({content:S,scale:null,font:null,textColor:null})}}return new Un(u)}evaluate(t){return new fs(this.sections.map(n=>{const l=n.content.evaluate(t);return Xr(l)===Sa?new zu("",l,null,null,null):new zu(_l(l),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null)}))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const n of this.sections){t.push(n.content.serialize());const l={};n.scale&&(l["font-scale"]=n.scale.serialize()),n.font&&(l["text-font"]=n.font.serialize()),n.textColor&&(l["text-color"]=n.textColor.serialize()),t.push(l)}return t}}class iu{constructor(t){this.type=Sa,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const l=n.parse(t[1],1,on);return l?new iu(l):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),l=Mo.fromString(n);return l&&t.availableImages&&(l.available=t.availableImages.indexOf(n)>-1),l}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Oh={"to-boolean":ln,"to-color":Co,"to-number":ti,"to-string":on};class Bu{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const l=t[0];if((l==="to-boolean"||l==="to-string")&&t.length!==2)return n.error("Expected one argument.");const u=Oh[l],p=[];for(let g=1;g<t.length;g++){const b=n.parse(t[g],g,Ui);if(!b)return null;p.push(b)}return new Bu(u,p)}evaluate(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){let n,l;for(const u of this.args){if(n=u.evaluate(t),l=null,n instanceof kr)return n;if(typeof n=="string"){const p=t.parseColor(n);if(p)return p}else if(Array.isArray(n)&&(l=n.length<3||n.length>4?`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:Dd(n[0],n[1],n[2],n[3]),!l))return new kr(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new ns(l||`Could not parse color from value '${typeof n=="string"?n:String(JSON.stringify(n))}'`)}if(this.type.kind==="number"){let n=null;for(const l of this.args){if(n=l.evaluate(t),n===null)return 0;const u=Number(n);if(!isNaN(u))return u}throw new ns(`Could not convert ${JSON.stringify(n)} to number.`)}return this.type.kind==="formatted"?fs.fromString(_l(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?Mo.fromString(_l(this.args[0].evaluate(t))):_l(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Un([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new iu(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(n=>{t.push(n.serialize())}),t}}var $o=Bu;const kc=["Unknown","Point","LineString","Polygon"];var nu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?kc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:l}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*t-i[0])+this.featureDistanceData.bearing[1]*(l*t-i[1])}return 0}parseColor(i){let t=this._parseColorCache[i];return t||(t=this._parseColorCache[i]=kr.parse(i)),t}};class yl{constructor(t,n,l,u){this.name=t,this.type=n,this._evaluate=l,this.args=u}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,n){const l=t[0],u=yl.definitions[l];if(!u)return n.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const p=Array.isArray(u)?u[0]:u.type,g=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,b=g.filter(([C])=>!Array.isArray(C)||C.length===t.length-1);let S=null;for(const[C,P]of b){S=new Qn(n.registry,n.path,null,n.scope);const O=[];let B=!1;for(let $=1;$<t.length;$++){const G=t[$],Y=Array.isArray(C)?C[$-1]:C.type,ne=S.parse(G,1+O.length,Y);if(!ne){B=!0;break}O.push(ne)}if(!B)if(Array.isArray(C)&&C.length!==O.length)S.error(`Expected ${C.length} arguments, but found ${O.length} instead.`);else{for(let $=0;$<O.length;$++){const G=Array.isArray(C)?C[$]:C.type,Y=O[$];S.concat($+1).checkSubtype(G,Y.type)}if(S.errors.length===0)return new yl(l,p,P,O)}}if(b.length===1)n.errors.push(...S.errors);else{const C=(b.length?b:g).map(([O])=>{return B=O,Array.isArray(B)?`(${B.map(Wn).join(", ")})`:`(${Wn(B.type)}...)`;var B}).join(" | "),P=[];for(let O=1;O<t.length;O++){const B=n.parse(t[O],1+P.length);if(!B)return null;P.push(Wn(B.type))}n.error(`Expected arguments of type ${C}, but found (${P.join(", ")}) instead.`)}return null}static register(t,n){yl.definitions=n;for(const l in n)t[l]=yl}}var qa=yl;class Kr{constructor(t,n,l){this.type=Jl,this.locale=l,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const l=t[1];if(typeof l!="object"||Array.isArray(l))return n.error("Collator options argument must be an object.");const u=n.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,ln);if(!u)return null;const p=n.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,ln);if(!p)return null;let g=null;return l.locale&&(g=n.parse(l.locale,1,on),!g)?null:new Kr(u,p,g)}evaluate(t){return new ml(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const T=8192;function I(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function R(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function F(i,t){const n=(180+i[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,u=Math.pow(2,t.z);return[Math.round(n*u*T),Math.round(l*u*T)]}function H(i,t,n){const l=i[0]-t[0],u=i[1]-t[1],p=i[0]-n[0],g=i[1]-n[1];return l*g-p*u==0&&l*p<=0&&u*g<=0}function K(i,t){let n=!1;for(let g=0,b=t.length;g<b;g++){const S=t[g];for(let C=0,P=S.length;C<P-1;C++){if(H(i,S[C],S[C+1]))return!1;(u=S[C])[1]>(l=i)[1]!=(p=S[C+1])[1]>l[1]&&l[0]<(p[0]-u[0])*(l[1]-u[1])/(p[1]-u[1])+u[0]&&(n=!n)}}var l,u,p;return n}function te(i,t){for(let n=0;n<t.length;n++)if(K(i,t[n]))return!0;return!1}function ze(i,t,n,l){const u=l[0]-n[0],p=l[1]-n[1],g=(i[0]-n[0])*p-u*(i[1]-n[1]),b=(t[0]-n[0])*p-u*(t[1]-n[1]);return g>0&&b<0||g<0&&b>0}function Me(i,t,n){for(const C of n)for(let P=0;P<C.length-1;++P)if((b=[(g=C[P+1])[0]-(p=C[P])[0],g[1]-p[1]])[0]*(S=[(u=t)[0]-(l=i)[0],u[1]-l[1]])[1]-b[1]*S[0]!=0&&ze(l,u,p,g)&&ze(p,g,l,u))return!0;var l,u,p,g,b,S;return!1}function et(i,t){for(let n=0;n<i.length;++n)if(!K(i[n],t))return!1;for(let n=0;n<i.length-1;++n)if(Me(i[n],i[n+1],t))return!1;return!0}function gt(i,t){for(let n=0;n<t.length;n++)if(et(i,t[n]))return!0;return!1}function Dt(i,t,n){const l=[];for(let u=0;u<i.length;u++){const p=[];for(let g=0;g<i[u].length;g++){const b=F(i[u][g],n);I(t,b),p.push(b)}l.push(p)}return l}function ht(i,t,n){const l=[];for(let u=0;u<i.length;u++){const p=Dt(i[u],t,n);l.push(p)}return l}function mt(i,t,n,l){if(i[0]<n[0]||i[0]>n[2]){const u=.5*l;let p=i[0]-n[0]>u?-l:n[0]-i[0]>u?l:0;p===0&&(p=i[0]-n[2]>u?-l:n[2]-i[0]>u?l:0),i[0]+=p}I(t,i)}function Jt(i,t,n,l){const u=Math.pow(2,l.z)*T,p=[l.x*T,l.y*T],g=[];if(!i)return g;for(const b of i)for(const S of b){const C=[S.x+p[0],S.y+p[1]];mt(C,t,n,u),g.push(C)}return g}function nn(i,t,n,l){const u=Math.pow(2,l.z)*T,p=[l.x*T,l.y*T],g=[];if(!i)return g;for(const S of i){const C=[];for(const P of S){const O=[P.x+p[0],P.y+p[1]];I(t,O),C.push(O)}g.push(C)}if(t[2]-t[0]<=u/2){(b=t)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const S of g)for(const C of S)mt(C,t,n,u)}var b;return g}class wi{constructor(t,n){this.type=ln,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Qc(t[1])){const l=t[1];if(l.type==="FeatureCollection")for(let u=0;u<l.features.length;++u){const p=l.features[u].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new wi(l,l.features[u].geometry)}else if(l.type==="Feature"){const u=l.geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new wi(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new wi(l,l)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,l){const u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],g=n.canonicalID();if(!g)return!1;if(l.type==="Polygon"){const b=Dt(l.coordinates,p,g),S=Jt(n.geometry(),u,p,g);if(!R(u,p))return!1;for(const C of S)if(!K(C,b))return!1}if(l.type==="MultiPolygon"){const b=ht(l.coordinates,p,g),S=Jt(n.geometry(),u,p,g);if(!R(u,p))return!1;for(const C of S)if(!te(C,b))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,l){const u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],g=n.canonicalID();if(!g)return!1;if(l.type==="Polygon"){const b=Dt(l.coordinates,p,g),S=nn(n.geometry(),u,p,g);if(!R(u,p))return!1;for(const C of S)if(!et(C,b))return!1}if(l.type==="MultiPolygon"){const b=ht(l.coordinates,p,g),S=nn(n.geometry(),u,p,g);if(!R(u,p))return!1;for(const C of S)if(!gt(C,b))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Mr=wi;function lr(i){if(i instanceof qa&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Mr)return!1;let t=!0;return i.eachChild(n=>{t&&!lr(n)&&(t=!1)}),t}function gn(i){if(i instanceof qa&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(n=>{t&&!gn(n)&&(t=!1)}),t}function yn(i,t){if(i instanceof qa&&t.indexOf(i.name)>=0)return!1;let n=!0;return i.eachChild(l=>{n&&!yn(l,t)&&(n=!1)}),n}class Gi{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const l=t[1];return n.scope.has(l)?new Gi(l,n.scope.get(l)):n.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ps=Gi;class bn{constructor(t,n=[],l,u=new Ou,p=[]){this.registry=t,this.path=n,this.key=n.map(g=>`[${g}]`).join(""),this.scope=u,this.errors=p,this.expectedType=l}parse(t,n,l,u,p={}){return n?this.concat(n,l,u)._parse(t,p):this._parse(t,p)}_parse(t,n){function l(u,p,g){return g==="assert"?new kn(p,[u]):g==="coerce"?new $o(p,[u]):u}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=t[0];if(typeof u!="string")return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const p=this.registry[u];if(p){let g=p.parse(t,this);if(!g)return null;if(this.expectedType){const b=this.expectedType,S=g.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||S.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(b,S))return null}else g=l(g,b,n.typeAnnotation||"coerce");else g=l(g,b,n.typeAnnotation||"assert")}if(!(g instanceof gl)&&g.type.kind!=="resolvedImage"&&sa(g)){const b=new nu;try{g=new gl(g.type,g.evaluate(b))}catch(S){return this.error(S.message),null}}return g}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,n,l){const u=typeof t=="number"?this.path.concat(t):this.path,p=l?this.scope.concat(l):this.scope;return new bn(this.registry,u,n||null,p,this.errors)}error(t,...n){const l=`${this.key}${n.map(u=>`[${u}]`).join("")}`;this.errors.push(new Ds(l,t))}checkSubtype(t,n){const l=Ca(t,n);return l&&this.error(l),l}}var Qn=bn;function sa(i){if(i instanceof Ps)return sa(i.boundExpression);if(i instanceof qa&&i.name==="error"||i instanceof Kr||i instanceof Mr)return!1;const t=i instanceof $o||i instanceof kn;let n=!0;return i.eachChild(l=>{n=t?n&&sa(l):n&&l instanceof gl}),!!n&&lr(i)&&yn(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function vl(i,t){const n=i.length-1;let l,u,p=0,g=n,b=0;for(;p<=g;)if(b=Math.floor((p+g)/2),l=i[b],u=i[b+1],l<=t){if(b===n||t<u)return b;p=b+1}else{if(!(l>t))throw new ns("Input is not a number.");g=b-1}return 0}class ps{constructor(t,n,l){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[u,p]of l)this.labels.push(u),this.outputs.push(p)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");const l=n.parse(t[1],1,ti);if(!l)return null;const u=[];let p=null;n.expectedType&&n.expectedType.kind!=="value"&&(p=n.expectedType);for(let g=1;g<t.length;g+=2){const b=g===1?-1/0:t[g],S=t[g+1],C=g,P=g+1;if(typeof b!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(u.length&&u[u.length-1][0]>=b)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const O=n.parse(S,P,p);if(!O)return null;p=p||O.type,u.push([b,O])}return new ps(p,l,u)}evaluate(t){const n=this.labels,l=this.outputs;if(n.length===1)return l[0].evaluate(t);const u=this.input.evaluate(t);if(u<=n[0])return l[0].evaluate(t);const p=n.length;return u>=n[p-1]?l[p-1].evaluate(t):l[vl(n,u)].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&t.push(this.labels[n]),t.push(this.outputs[n].serialize());return t}}var lo=ps;function Ji(i,t,n){return i*(1-n)+t*n}var Ts=Object.freeze({__proto__:null,number:Ji,color:function(i,t,n){return new kr(Ji(i.r,t.r,n),Ji(i.g,t.g,n),Ji(i.b,t.b,n),Ji(i.a,t.a,n))},array:function(i,t,n){return i.map((l,u)=>Ji(l,t[u],n))}});const Go=.95047,Xs=1.08883,Ao=4/29,xl=6/29,Aa=3*xl*xl,ru=Math.PI/180,jn=180/Math.PI;function Io(i){return i>.008856451679035631?Math.pow(i,1/3):i/Aa+Ao}function Dc(i){return i>xl?i*i*i:Aa*(i-Ao)}function Ql(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Us(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function bl(i){const t=Us(i.r),n=Us(i.g),l=Us(i.b),u=Io((.4124564*t+.3575761*n+.1804375*l)/Go),p=Io((.2126729*t+.7151522*n+.072175*l)/1);return{l:116*p-16,a:500*(u-p),b:200*(p-Io((.0193339*t+.119192*n+.9503041*l)/Xs)),alpha:i.a}}function ec(i){let t=(i.l+16)/116,n=isNaN(i.a)?t:t+i.a/500,l=isNaN(i.b)?t:t-i.b/200;return t=1*Dc(t),n=Go*Dc(n),l=Xs*Dc(l),new kr(Ql(3.2404542*n-1.5371385*t-.4985314*l),Ql(-.969266*n+1.8760108*t+.041556*l),Ql(.0556434*n-.2040259*t+1.0572252*l),i.alpha)}function Fu(i,t,n){const l=t-i;return i+n*(l>180||l<-180?l-360*Math.round(l/360):l)}const tc={forward:bl,reverse:ec,interpolate:function(i,t,n){return{l:Ji(i.l,t.l,n),a:Ji(i.a,t.a,n),b:Ji(i.b,t.b,n),alpha:Ji(i.alpha,t.alpha,n)}}},ic={forward:function(i){const{l:t,a:n,b:l}=bl(i),u=Math.atan2(l,n)*jn;return{h:u<0?u+360:u,c:Math.sqrt(n*n+l*l),l:t,alpha:i.a}},reverse:function(i){const t=i.h*ru,n=i.c;return ec({l:i.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:i.alpha})},interpolate:function(i,t,n){return{h:Fu(i.h,t.h,n),c:Ji(i.c,t.c,n),l:Ji(i.l,t.l,n),alpha:Ji(i.alpha,t.alpha,n)}}};var Pd=Object.freeze({__proto__:null,lab:tc,hcl:ic});class wl{constructor(t,n,l,u,p){this.type=t,this.operator=n,this.interpolation=l,this.input=u,this.labels=[],this.outputs=[];for(const[g,b]of p)this.labels.push(g),this.outputs.push(b)}static interpolationFactor(t,n,l,u){let p=0;if(t.name==="exponential")p=Nu(n,t.base,l,u);else if(t.name==="linear")p=Nu(n,1,l,u);else if(t.name==="cubic-bezier"){const g=t.controlPoints;p=new $e(g[0],g[1],g[2],g[3]).solve(Nu(n,1,l,u))}return p}static parse(t,n){let[l,u,p,...g]=t;if(!Array.isArray(u)||u.length===0)return n.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){const C=u[1];if(typeof C!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:C}}else{if(u[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const C=u.slice(1);if(C.length!==4||C.some(P=>typeof P!="number"||P<0||P>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:C}}}if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(p=n.parse(p,2,ti),!p)return null;const b=[];let S=null;l==="interpolate-hcl"||l==="interpolate-lab"?S=Co:n.expectedType&&n.expectedType.kind!=="value"&&(S=n.expectedType);for(let C=0;C<g.length;C+=2){const P=g[C],O=g[C+1],B=C+3,$=C+4;if(typeof P!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(b.length&&b[b.length-1][0]>=P)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);const G=n.parse(O,$,S);if(!G)return null;S=S||G.type,b.push([P,G])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new wl(S,l,u,p,b):n.error(`Type ${Wn(S)} is not interpolatable.`)}evaluate(t){const n=this.labels,l=this.outputs;if(n.length===1)return l[0].evaluate(t);const u=this.input.evaluate(t);if(u<=n[0])return l[0].evaluate(t);const p=n.length;if(u>=n[p-1])return l[p-1].evaluate(t);const g=vl(n,u),b=wl.interpolationFactor(this.interpolation,u,n[g],n[g+1]),S=l[g].evaluate(t),C=l[g+1].evaluate(t);return this.operator==="interpolate"?Ts[this.type.kind.toLowerCase()](S,C,b):this.operator==="interpolate-hcl"?ic.reverse(ic.interpolate(ic.forward(S),ic.forward(C),b)):tc.reverse(tc.interpolate(tc.forward(S),tc.forward(C),b))}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const n=[this.operator,t,this.input.serialize()];for(let l=0;l<this.labels.length;l++)n.push(this.labels[l],this.outputs[l].serialize());return n}}function Nu(i,t,n,l){const u=l-n,p=i-n;return u===0?0:t===1?p/u:(Math.pow(t,p)-1)/(Math.pow(t,u)-1)}var oa=wl;class Ia{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expectected at least one argument.");let l=null;const u=n.expectedType;u&&u.kind!=="value"&&(l=u);const p=[];for(const b of t.slice(1)){const S=n.parse(b,1+p.length,l,void 0,{typeAnnotation:"omit"});if(!S)return null;l=l||S.type,p.push(S)}const g=u&&p.some(b=>Ca(u,b.type));return new Ia(g?Ui:l,p)}evaluate(t){let n,l=null,u=0;for(const p of this.args){if(u++,l=p.evaluate(t),l&&l instanceof Mo&&!l.available&&(n||(n=l),l=null,u===this.args.length))return n;if(l!==null)break}return l}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(n=>{t.push(n.serialize())}),t}}var Tl=Ia;class su{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const l=[];for(let p=1;p<t.length-1;p+=2){const g=t[p];if(typeof g!="string")return n.error(`Expected string, but found ${typeof g} instead.`,p);if(/[^a-zA-Z0-9_]/.test(g))return n.error("Variable names must contain only alphanumeric characters or '_'.",p);const b=n.parse(t[p+1],p+1);if(!b)return null;l.push([g,b])}const u=n.parse(t[t.length-1],t.length-1,n.expectedType,l);return u?new su(l,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[n,l]of this.bindings)t.push(n,l.serialize());return t.push(this.result.serialize()),t}}var nc=su;class ko{constructor(t,n,l){this.type=t,this.index=n,this.input=l}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=n.parse(t[1],1,ti),u=n.parse(t[2],2,is(n.expectedType||Ui));return l&&u?new ko(u.type.itemType,l,u):null}evaluate(t){const n=this.index.evaluate(t),l=this.input.evaluate(t);if(n<0)throw new ns(`Array index out of bounds: ${n} < 0.`);if(n>=l.length)throw new ns(`Array index out of bounds: ${n} > ${l.length-1}.`);if(n!==Math.floor(n))throw new ns(`Array index must be an integer, but found ${n} instead.`);return l[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Es=ko;class Wa{constructor(t,n){this.type=ln,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=n.parse(t[1],1,Ui),u=n.parse(t[2],2,Ui);return l&&u?fl(l.type,[ln,on,ti,hs,Ui])?new Wa(l,u):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wn(l.type)} instead`):null}evaluate(t){const n=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(l==null)return!1;if(!Vo(n,["boolean","string","number","null"]))throw new ns(`Expected first argument to be of type boolean, string, number or null, but found ${Wn(Xr(n))} instead.`);if(!Vo(l,["string","array"]))throw new ns(`Expected second argument to be of type array or string, but found ${Wn(Xr(l))} instead.`);return l.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Uu=Wa;class Pc{constructor(t,n,l){this.type=ti,this.needle=t,this.haystack=n,this.fromIndex=l}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=n.parse(t[1],1,Ui),u=n.parse(t[2],2,Ui);if(!l||!u)return null;if(!fl(l.type,[ln,on,ti,hs,Ui]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wn(l.type)} instead`);if(t.length===4){const p=n.parse(t[3],3,ti);return p?new Pc(l,u,p):null}return new Pc(l,u)}evaluate(t){const n=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!Vo(n,["boolean","string","number","null"]))throw new ns(`Expected first argument to be of type boolean, string, number or null, but found ${Wn(Xr(n))} instead.`);if(!Vo(l,["string","array"]))throw new ns(`Expected second argument to be of type array or string, but found ${Wn(Xr(l))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(t);return l.indexOf(n,u)}return l.indexOf(n)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var zh=Pc;class Dn{constructor(t,n,l,u,p,g){this.inputType=t,this.type=n,this.input=l,this.cases=u,this.outputs=p,this.otherwise=g}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return n.error("Expected an even number of arguments.");let l,u;n.expectedType&&n.expectedType.kind!=="value"&&(u=n.expectedType);const p={},g=[];for(let C=2;C<t.length-1;C+=2){let P=t[C];const O=t[C+1];Array.isArray(P)||(P=[P]);const B=n.concat(C);if(P.length===0)return B.error("Expected at least one branch label.");for(const G of P){if(typeof G!="number"&&typeof G!="string")return B.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return B.error("Numeric branch labels must be integer values.");if(l){if(B.checkSubtype(l,Xr(G)))return null}else l=Xr(G);if(p[String(G)]!==void 0)return B.error("Branch labels must be unique.");p[String(G)]=g.length}const $=n.parse(O,C,u);if(!$)return null;u=u||$.type,g.push($)}const b=n.parse(t[1],1,Ui);if(!b)return null;const S=n.parse(t[t.length-1],t.length-1,u);return S?b.type.kind!=="value"&&n.concat(1).checkSubtype(l,b.type)?null:new Dn(l,u,b,p,g,S):null}evaluate(t){const n=this.input.evaluate(t);return(Xr(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),l=[],u={};for(const g of n){const b=u[this.cases[g]];b===void 0?(u[this.cases[g]]=l.length,l.push([this.cases[g],[g]])):l[b][1].push(g)}const p=g=>this.inputType.kind==="number"?Number(g):g;for(const[g,b]of l)t.push(b.length===1?p(b[0]):b.map(p)),t.push(this.outputs[g].serialize());return t.push(this.otherwise.serialize()),t}}var Ks=Dn;class Ss{constructor(t,n,l){this.type=t,this.branches=n,this.otherwise=l}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return n.error("Expected an odd number of arguments.");let l;n.expectedType&&n.expectedType.kind!=="value"&&(l=n.expectedType);const u=[];for(let g=1;g<t.length-1;g+=2){const b=n.parse(t[g],g,ln);if(!b)return null;const S=n.parse(t[g+1],g+1,l);if(!S)return null;u.push([b,S]),l=l||S.type}const p=n.parse(t[t.length-1],t.length-1,l);return p?new Ss(l,u,p):null}evaluate(t){for(const[n,l]of this.branches)if(n.evaluate(t))return l.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,l]of this.branches)t(n),t(l);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(n=>{t.push(n.serialize())}),t}}var co=Ss;class El{constructor(t,n,l,u){this.type=t,this.input=n,this.beginIndex=l,this.endIndex=u}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=n.parse(t[1],1,Ui),u=n.parse(t[2],2,ti);if(!l||!u)return null;if(!fl(l.type,[is(Ui),on,Ui]))return n.error(`Expected first argument to be of type array or string, but found ${Wn(l.type)} instead`);if(t.length===4){const p=n.parse(t[3],3,ti);return p?new El(l.type,l,u,p):null}return new El(l.type,l,u)}evaluate(t){const n=this.input.evaluate(t),l=this.beginIndex.evaluate(t);if(!Vo(n,["string","array"]))throw new ns(`Expected first argument to be of type array or string, but found ${Wn(Xr(n))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(t);return n.slice(l,u)}return n.slice(l)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Ld=El;function Rd(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Od(i,t,n,l){return l.compare(t,n)===0}function uo(i,t,n){const l=i!=="=="&&i!=="!=";return class BT{constructor(p,g,b){this.type=ln,this.lhs=p,this.rhs=g,this.collator=b,this.hasUntypedArgument=p.type.kind==="value"||g.type.kind==="value"}static parse(p,g){if(p.length!==3&&p.length!==4)return g.error("Expected two or three arguments.");const b=p[0];let S=g.parse(p[1],1,Ui);if(!S)return null;if(!Rd(b,S.type))return g.concat(1).error(`"${b}" comparisons are not supported for type '${Wn(S.type)}'.`);let C=g.parse(p[2],2,Ui);if(!C)return null;if(!Rd(b,C.type))return g.concat(2).error(`"${b}" comparisons are not supported for type '${Wn(C.type)}'.`);if(S.type.kind!==C.type.kind&&S.type.kind!=="value"&&C.type.kind!=="value")return g.error(`Cannot compare types '${Wn(S.type)}' and '${Wn(C.type)}'.`);l&&(S.type.kind==="value"&&C.type.kind!=="value"?S=new kn(C.type,[S]):S.type.kind!=="value"&&C.type.kind==="value"&&(C=new kn(S.type,[C])));let P=null;if(p.length===4){if(S.type.kind!=="string"&&C.type.kind!=="string"&&S.type.kind!=="value"&&C.type.kind!=="value")return g.error("Cannot use collator to compare non-string types.");if(P=g.parse(p[3],3,Jl),!P)return null}return new BT(S,C,P)}evaluate(p){const g=this.lhs.evaluate(p),b=this.rhs.evaluate(p);if(l&&this.hasUntypedArgument){const S=Xr(g),C=Xr(b);if(S.kind!==C.kind||S.kind!=="string"&&S.kind!=="number")throw new ns(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${C.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const S=Xr(g),C=Xr(b);if(S.kind!=="string"||C.kind!=="string")return t(p,g,b)}return this.collator?n(p,g,b,this.collator.evaluate(p)):t(p,g,b)}eachChild(p){p(this.lhs),p(this.rhs),this.collator&&p(this.collator)}outputDefined(){return!0}serialize(){const p=[i];return this.eachChild(g=>{p.push(g.serialize())}),p}}}const qe=uo("==",function(i,t,n){return t===n},Od),St=uo("!=",function(i,t,n){return t!==n},function(i,t,n,l){return!Od(0,t,n,l)}),_t=uo("<",function(i,t,n){return t<n},function(i,t,n,l){return l.compare(t,n)<0}),vi=uo(">",function(i,t,n){return t>n},function(i,t,n,l){return l.compare(t,n)>0}),Qi=uo("<=",function(i,t,n){return t<=n},function(i,t,n,l){return l.compare(t,n)<=0}),On=uo(">=",function(i,t,n){return t>=n},function(i,t,n,l){return l.compare(t,n)>=0});class Vr{constructor(t,n,l,u,p,g){this.type=on,this.number=t,this.locale=n,this.currency=l,this.unit=u,this.minFractionDigits=p,this.maxFractionDigits=g}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const l=n.parse(t[1],1,ti);if(!l)return null;const u=t[2];if(typeof u!="object"||Array.isArray(u))return n.error("NumberFormat options argument must be an object.");let p=null;if(u.locale&&(p=n.parse(u.locale,1,on),!p))return null;let g=null;if(u.currency&&(g=n.parse(u.currency,1,on),!g))return null;let b=null;if(u.unit&&(b=n.parse(u.unit,1,on),!b))return null;let S=null;if(u["min-fraction-digits"]&&(S=n.parse(u["min-fraction-digits"],1,ti),!S))return null;let C=null;return u["max-fraction-digits"]&&(C=n.parse(u["max-fraction-digits"],1,ti),!C)?null:new Vr(l,p,g,b,S,C)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Vn{constructor(t){this.type=ti,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const l=n.parse(t[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Wn(l.type)} instead.`):new Vn(l):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string"||Array.isArray(n))return n.length;throw new ns(`Expected value to be of type string or array, but found ${Wn(Xr(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(n=>{t.push(n.serialize())}),t}}const rc={"==":qe,"!=":St,">":vi,"<":_t,">=":On,"<=":Qi,array:kn,at:Es,boolean:kn,case:co,coalesce:Tl,collator:Kr,format:Un,image:iu,in:Uu,"index-of":zh,interpolate:oa,"interpolate-hcl":oa,"interpolate-lab":oa,length:Vn,let:nc,literal:gl,match:Ks,number:kn,"number-format":Vr,object:kn,slice:Ld,step:lo,string:kn,"to-boolean":$o,"to-color":$o,"to-number":$o,"to-string":$o,var:Ps,within:Mr};function ou(i,[t,n,l,u]){t=t.evaluate(i),n=n.evaluate(i),l=l.evaluate(i);const p=u?u.evaluate(i):1,g=Dd(t,n,l,p);if(g)throw new ns(g);return new kr(t/255*p,n/255*p,l/255*p,p)}function Js(i,t){return i in t}function oe(i,t){const n=t[i];return n===void 0?null:n}function Ae(i){return{type:i}}qa.register(rc,{error:[{kind:"error"},[on],(i,[t])=>{throw new ns(t.evaluate(i))}],typeof:[on,[Ui],(i,[t])=>Wn(Xr(t.evaluate(i)))],"to-rgba":[is(ti,4),[Co],(i,[t])=>t.evaluate(i).toArray()],rgb:[Co,[ti,ti,ti],ou],rgba:[Co,[ti,ti,ti,ti],ou],has:{type:ln,overloads:[[[on],(i,[t])=>Js(t.evaluate(i),i.properties())],[[on,ra],(i,[t,n])=>Js(t.evaluate(i),n.evaluate(i))]]},get:{type:Ui,overloads:[[[on],(i,[t])=>oe(t.evaluate(i),i.properties())],[[on,ra],(i,[t,n])=>oe(t.evaluate(i),n.evaluate(i))]]},"feature-state":[Ui,[on],(i,[t])=>oe(t.evaluate(i),i.featureState||{})],properties:[ra,[],i=>i.properties()],"geometry-type":[on,[],i=>i.geometryType()],id:[Ui,[],i=>i.id()],zoom:[ti,[],i=>i.globals.zoom],pitch:[ti,[],i=>i.globals.pitch||0],"distance-from-center":[ti,[],i=>i.distanceFromCenter()],"heatmap-density":[ti,[],i=>i.globals.heatmapDensity||0],"line-progress":[ti,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[ti,[],i=>i.globals.skyRadialProgress||0],accumulated:[Ui,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[ti,Ae(ti),(i,t)=>{let n=0;for(const l of t)n+=l.evaluate(i);return n}],"*":[ti,Ae(ti),(i,t)=>{let n=1;for(const l of t)n*=l.evaluate(i);return n}],"-":{type:ti,overloads:[[[ti,ti],(i,[t,n])=>t.evaluate(i)-n.evaluate(i)],[[ti],(i,[t])=>-t.evaluate(i)]]},"/":[ti,[ti,ti],(i,[t,n])=>t.evaluate(i)/n.evaluate(i)],"%":[ti,[ti,ti],(i,[t,n])=>t.evaluate(i)%n.evaluate(i)],ln2:[ti,[],()=>Math.LN2],pi:[ti,[],()=>Math.PI],e:[ti,[],()=>Math.E],"^":[ti,[ti,ti],(i,[t,n])=>Math.pow(t.evaluate(i),n.evaluate(i))],sqrt:[ti,[ti],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[ti,[ti],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[ti,[ti],(i,[t])=>Math.log(t.evaluate(i))],log2:[ti,[ti],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[ti,[ti],(i,[t])=>Math.sin(t.evaluate(i))],cos:[ti,[ti],(i,[t])=>Math.cos(t.evaluate(i))],tan:[ti,[ti],(i,[t])=>Math.tan(t.evaluate(i))],asin:[ti,[ti],(i,[t])=>Math.asin(t.evaluate(i))],acos:[ti,[ti],(i,[t])=>Math.acos(t.evaluate(i))],atan:[ti,[ti],(i,[t])=>Math.atan(t.evaluate(i))],min:[ti,Ae(ti),(i,t)=>Math.min(...t.map(n=>n.evaluate(i)))],max:[ti,Ae(ti),(i,t)=>Math.max(...t.map(n=>n.evaluate(i)))],abs:[ti,[ti],(i,[t])=>Math.abs(t.evaluate(i))],round:[ti,[ti],(i,[t])=>{const n=t.evaluate(i);return n<0?-Math.round(-n):Math.round(n)}],floor:[ti,[ti],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[ti,[ti],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[ln,[on,Ui],(i,[t,n])=>i.properties()[t.value]===n.value],"filter-id-==":[ln,[Ui],(i,[t])=>i.id()===t.value],"filter-type-==":[ln,[on],(i,[t])=>i.geometryType()===t.value],"filter-<":[ln,[on,Ui],(i,[t,n])=>{const l=i.properties()[t.value],u=n.value;return typeof l==typeof u&&l<u}],"filter-id-<":[ln,[Ui],(i,[t])=>{const n=i.id(),l=t.value;return typeof n==typeof l&&n<l}],"filter->":[ln,[on,Ui],(i,[t,n])=>{const l=i.properties()[t.value],u=n.value;return typeof l==typeof u&&l>u}],"filter-id->":[ln,[Ui],(i,[t])=>{const n=i.id(),l=t.value;return typeof n==typeof l&&n>l}],"filter-<=":[ln,[on,Ui],(i,[t,n])=>{const l=i.properties()[t.value],u=n.value;return typeof l==typeof u&&l<=u}],"filter-id-<=":[ln,[Ui],(i,[t])=>{const n=i.id(),l=t.value;return typeof n==typeof l&&n<=l}],"filter->=":[ln,[on,Ui],(i,[t,n])=>{const l=i.properties()[t.value],u=n.value;return typeof l==typeof u&&l>=u}],"filter-id->=":[ln,[Ui],(i,[t])=>{const n=i.id(),l=t.value;return typeof n==typeof l&&n>=l}],"filter-has":[ln,[Ui],(i,[t])=>t.value in i.properties()],"filter-has-id":[ln,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[ln,[is(on)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[ln,[is(Ui)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[ln,[on,is(Ui)],(i,[t,n])=>n.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[ln,[on,is(Ui)],(i,[t,n])=>function(l,u,p,g){for(;p<=g;){const b=p+g>>1;if(u[b]===l)return!0;u[b]>l?g=b-1:p=b+1}return!1}(i.properties()[t.value],n.value,0,n.value.length-1)],all:{type:ln,overloads:[[[ln,ln],(i,[t,n])=>t.evaluate(i)&&n.evaluate(i)],[Ae(ln),(i,t)=>{for(const n of t)if(!n.evaluate(i))return!1;return!0}]]},any:{type:ln,overloads:[[[ln,ln],(i,[t,n])=>t.evaluate(i)||n.evaluate(i)],[Ae(ln),(i,t)=>{for(const n of t)if(n.evaluate(i))return!0;return!1}]]},"!":[ln,[ln],(i,[t])=>!t.evaluate(i)],"is-supported-script":[ln,[on],(i,[t])=>{const n=i.globals&&i.globals.isSupportedScript;return!n||n(t.evaluate(i))}],upcase:[on,[on],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[on,[on],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[on,Ae(Ui),(i,t)=>t.map(n=>_l(n.evaluate(i))).join("")],"resolved-locale":[on,[Jl],(i,[t])=>t.evaluate(i).resolvedLocale()]});var je=rc;function Ct(i){return{result:"success",value:i}}function We(i){return{result:"error",value:i}}function pt(i){return i["property-type"]==="data-driven"}function $t(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function oi(i){return!!i.expression&&i.expression.interpolated}function Ut(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Bi(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function ji(i){return i}function $i(i,t){const n=t.type==="color",l=i.stops&&typeof i.stops[0][0]=="object",u=l||!(l||i.property!==void 0),p=i.type||(oi(t)?"exponential":"interval");if(n&&((i=So({},i)).stops&&(i.stops=i.stops.map(C=>[C[0],kr.parse(C[1])])),i.default=kr.parse(i.default?i.default:t.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Pd[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let g,b,S;if(p==="exponential")g=Fr;else if(p==="interval")g=Fi;else if(p==="categorical"){g=Sn,b=Object.create(null);for(const C of i.stops)b[C[0]]=C[1];S=typeof i.stops[0][0]}else{if(p!=="identity")throw new Error(`Unknown function type "${p}"`);g=$r}if(l){const C={},P=[];for(let $=0;$<i.stops.length;$++){const G=i.stops[$],Y=G[0].zoom;C[Y]===void 0&&(C[Y]={zoom:Y,type:i.type,property:i.property,default:i.default,stops:[]},P.push(Y)),C[Y].stops.push([G[0].value,G[1]])}const O=[];for(const $ of P)O.push([C[$].zoom,$i(C[$],t)]);const B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:oa.interpolationFactor.bind(void 0,B),zoomStops:O.map($=>$[0]),evaluate:({zoom:$},G)=>Fr({stops:O,base:i.base},t,$).evaluate($,G)}}if(u){const C=p==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:oa.interpolationFactor.bind(void 0,C),zoomStops:i.stops.map(P=>P[0]),evaluate:({zoom:P})=>g(i,t,P,b,S)}}return{kind:"source",evaluate(C,P){const O=P&&P.properties?P.properties[i.property]:void 0;return O===void 0?rn(i.default,t.default):g(i,t,O,b,S)}}}function rn(i,t,n){return i!==void 0?i:t!==void 0?t:n!==void 0?n:void 0}function Sn(i,t,n,l,u){return rn(typeof n===u?l[n]:void 0,i.default,t.default)}function Fi(i,t,n){if(Ut(n)!=="number")return rn(i.default,t.default);const l=i.stops.length;if(l===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[l-1][0])return i.stops[l-1][1];const u=vl(i.stops.map(p=>p[0]),n);return i.stops[u][1]}function Fr(i,t,n){const l=i.base!==void 0?i.base:1;if(Ut(n)!=="number")return rn(i.default,t.default);const u=i.stops.length;if(u===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[u-1][0])return i.stops[u-1][1];const p=vl(i.stops.map(P=>P[0]),n),g=function(P,O,B,$){const G=$-B,Y=P-B;return G===0?0:O===1?Y/G:(Math.pow(O,Y)-1)/(Math.pow(O,G)-1)}(n,l,i.stops[p][0],i.stops[p+1][0]),b=i.stops[p][1],S=i.stops[p+1][1];let C=Ts[t.type]||ji;if(i.colorSpace&&i.colorSpace!=="rgb"){const P=Pd[i.colorSpace];C=(O,B)=>P.reverse(P.interpolate(P.forward(O),P.forward(B),g))}return typeof b.evaluate=="function"?{evaluate(...P){const O=b.evaluate.apply(void 0,P),B=S.evaluate.apply(void 0,P);if(O!==void 0&&B!==void 0)return C(O,B,g)}}:C(b,S,g)}function $r(i,t,n){return t.type==="color"?n=kr.parse(n):t.type==="formatted"?n=fs.fromString(n.toString()):t.type==="resolvedImage"?n=Mo.fromString(n.toString()):Ut(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0),rn(n,i.default,t.default)}class Cs{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new nu,this._defaultValue=n?function(l){return l.type==="color"&&(Bi(l.default)||Array.isArray(l.default))?new kr(0,0,0,0):l.type==="color"?kr.parse(l.default)||null:l.default===void 0?null:l.default}(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,l,u,p,g,b,S){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=l,this._evaluator.canonical=u||null,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=g,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(t,n,l,u,p,g,b,S){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=l||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=g||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=S||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new ns(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function er(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in je}function js(i,t){const n=new Qn(je,[],t?function(u){const p={color:Co,string:on,number:ti,enum:on,boolean:ln,formatted:jo,resolvedImage:Sa};return u.type==="array"?is(p[u.value]||Ui,u.length):p[u.type]}(t):void 0),l=n.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Ct(new Cs(l,t)):We(n.errors)}class ho{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!gn(n.expression)}evaluateWithoutErrorHandling(t,n,l,u,p,g){return this._styleExpression.evaluateWithoutErrorHandling(t,n,l,u,p,g)}evaluate(t,n,l,u,p,g){return this._styleExpression.evaluate(t,n,l,u,p,g)}}class Jr{constructor(t,n,l,u){this.kind=t,this.zoomStops=l,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!gn(n.expression),this.interpolationType=u}evaluateWithoutErrorHandling(t,n,l,u,p,g){return this._styleExpression.evaluateWithoutErrorHandling(t,n,l,u,p,g)}evaluate(t,n,l,u,p,g){return this._styleExpression.evaluate(t,n,l,u,p,g)}interpolationFactor(t,n,l){return this.interpolationType?oa.interpolationFactor(this.interpolationType,t,n,l):0}}function Sl(i,t){if((i=js(i,t)).result==="error")return i;const n=i.value.expression,l=lr(n);if(!l&&!pt(t))return We([new Ds("","data expressions not supported")]);const u=yn(n,["zoom","pitch","distance-from-center"]);if(!u&&!$t(t))return We([new Ds("","zoom expressions not supported")]);const p=ju(n);return p||u?p instanceof Ds?We([p]):p instanceof oa&&!oi(t)?We([new Ds("",'"interpolate" expressions cannot be used with this property')]):Ct(p?new Jr(l?"camera":"composite",i.value,p.labels,p instanceof oa?p.interpolation:void 0):new ho(l?"constant":"source",i.value)):We([new Ds("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Cl{constructor(t,n){this._parameters=t,this._specification=n,So(this,$i(this._parameters,this._specification))}static deserialize(t){return new Cl(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ju(i){let t=null;if(i instanceof nc)t=ju(i.result);else if(i instanceof Tl){for(const n of i.args)if(t=ju(n),t)break}else(i instanceof lo||i instanceof oa)&&i.input instanceof qa&&i.input.name==="zoom"&&(t=i);return t instanceof Ds||i.eachChild(n=>{const l=ju(n);l instanceof Ds?t=l:!t&&l?t=new Ds("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&l&&t!==l&&(t=new Ds("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}class li{constructor(t,n,l,u){this.message=(t?`${t}: `:"")+l,u&&(this.identifier=u),n!=null&&n.__line__&&(this.line=n.__line__)}}function aa(i){const t=i.key,n=i.value,l=i.valueSpec||{},u=i.objectElementValidators||{},p=i.style,g=i.styleSpec;let b=[];const S=Ut(n);if(S!=="object")return[new li(t,n,`object expected, ${S} found`)];for(const C in n){const P=C.split(".")[0],O=l[P]||l["*"];let B;u[P]?B=u[P]:l[P]?B=Wi:u["*"]?B=u["*"]:l["*"]&&(B=Wi),B?b=b.concat(B({key:(t&&`${t}.`)+C,value:n[C],valueSpec:O,style:p,styleSpec:g,object:n,objectKey:C},n)):b.push(new li(t,n[C],`unknown property "${C}"`))}for(const C in l)u[C]||l[C].required&&l[C].default===void 0&&n[C]===void 0&&b.push(new li(t,n,`missing required property "${C}"`));return b}function sc(i){const t=i.value,n=i.valueSpec,l=i.style,u=i.styleSpec,p=i.key,g=i.arrayElementValidator||Wi;if(Ut(t)!=="array")return[new li(p,t,`array expected, ${Ut(t)} found`)];if(n.length&&t.length!==n.length)return[new li(p,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new li(p,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let b={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};u.$version<7&&(b.function=n.function),Ut(n.value)==="object"&&(b=n.value);let S=[];for(let C=0;C<t.length;C++)S=S.concat(g({array:t,arrayIndex:C,value:t[C],valueSpec:b,style:l,styleSpec:u,key:`${p}[${C}]`}));return S}function Vu(i){const t=i.key,n=i.value,l=i.valueSpec;let u=Ut(n);if(u==="number"&&n!=n&&(u="NaN"),u!=="number")return[new li(t,n,`number expected, ${u} found`)];if("minimum"in l){let p=l.minimum;if(Ut(l.minimum)==="array"&&(p=l.minimum[i.arrayIndex]),n<p)return[new li(t,n,`${n} is less than the minimum value ${p}`)]}if("maximum"in l){let p=l.maximum;if(Ut(l.maximum)==="array"&&(p=l.maximum[i.arrayIndex]),n>p)return[new li(t,n,`${n} is greater than the maximum value ${p}`)]}return[]}function zd(i){const t=i.valueSpec,n=zr(i.value.type);let l,u,p,g={};const b=n!=="categorical"&&i.value.property===void 0,S=!b,C=Ut(i.value.stops)==="array"&&Ut(i.value.stops[0])==="array"&&Ut(i.value.stops[0][0])==="object",P=aa({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function($){if(n==="identity")return[new li($.key,$.value,'identity function may not have a "stops" property')];let G=[];const Y=$.value;return G=G.concat(sc({key:$.key,value:Y,valueSpec:$.valueSpec,style:$.style,styleSpec:$.styleSpec,arrayElementValidator:O})),Ut(Y)==="array"&&Y.length===0&&G.push(new li($.key,Y,"array must have at least one stop")),G},default:function($){return Wi({key:$.key,value:$.value,valueSpec:t,style:$.style,styleSpec:$.styleSpec})}}});return n==="identity"&&b&&P.push(new li(i.key,i.value,'missing required property "property"')),n==="identity"||i.value.stops||P.push(new li(i.key,i.value,'missing required property "stops"')),n==="exponential"&&i.valueSpec.expression&&!oi(i.valueSpec)&&P.push(new li(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!pt(i.valueSpec)?P.push(new li(i.key,i.value,"property functions not supported")):b&&!$t(i.valueSpec)&&P.push(new li(i.key,i.value,"zoom functions not supported"))),n!=="categorical"&&!C||i.value.property!==void 0||P.push(new li(i.key,i.value,'"property" property is required')),P;function O($){let G=[];const Y=$.value,ne=$.key;if(Ut(Y)!=="array")return[new li(ne,Y,`array expected, ${Ut(Y)} found`)];if(Y.length!==2)return[new li(ne,Y,`array length 2 expected, length ${Y.length} found`)];if(C){if(Ut(Y[0])!=="object")return[new li(ne,Y,`object expected, ${Ut(Y[0])} found`)];if(Y[0].zoom===void 0)return[new li(ne,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new li(ne,Y,"object stop key must have value")];const ye=zr(Y[0].zoom);if(typeof ye!="number")return[new li(ne,Y[0].zoom,"stop zoom values must be numbers")];if(p&&p>ye)return[new li(ne,Y[0].zoom,"stop zoom values must appear in ascending order")];ye!==p&&(p=ye,u=void 0,g={}),G=G.concat(aa({key:`${ne}[0]`,value:Y[0],valueSpec:{zoom:{}},style:$.style,styleSpec:$.styleSpec,objectElementValidators:{zoom:Vu,value:B}}))}else G=G.concat(B({key:`${ne}[0]`,value:Y[0],valueSpec:{},style:$.style,styleSpec:$.styleSpec},Y));return er(Br(Y[1]))?G.concat([new li(`${ne}[1]`,Y[1],"expressions are not allowed in function stops.")]):G.concat(Wi({key:`${ne}[1]`,value:Y[1],valueSpec:t,style:$.style,styleSpec:$.styleSpec}))}function B($,G){const Y=Ut($.value),ne=zr($.value),ye=$.value!==null?$.value:G;if(l){if(Y!==l)return[new li($.key,ye,`${Y} stop domain type must match previous stop domain type ${l}`)]}else l=Y;if(Y!=="number"&&Y!=="string"&&Y!=="boolean"&&typeof ne!="number"&&typeof ne!="string"&&typeof ne!="boolean")return[new li($.key,ye,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&n!=="categorical"){let Ee=`number expected, ${Y} found`;return pt(t)&&n===void 0&&(Ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new li($.key,ye,Ee)]}return n!=="categorical"||Y!=="number"||typeof ne=="number"&&isFinite(ne)&&Math.floor(ne)===ne?n!=="categorical"&&Y==="number"&&typeof ne=="number"&&typeof u=="number"&&u!==void 0&&ne<u?[new li($.key,ye,"stop domain values must appear in ascending order")]:(u=ne,n==="categorical"&&ne in g?[new li($.key,ye,"stop domain values must be unique")]:(g[ne]=!0,[])):[new li($.key,ye,`integer expected, found ${String(ne)}`)]}}function au(i){const t=(i.expressionContext==="property"?Sl:js)(Br(i.value),i.valueSpec);if(t.result==="error")return t.value.map(l=>new li(`${i.key}${l.key}`,i.value,l.message));const n=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!n.outputDefined())return[new li(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!gn(n))return[new li(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter")return Bh(n,i);if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!yn(n,["zoom","feature-state"]))return[new li(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!lr(n))return[new li(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bh(i,t){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const u of t.valueSpec.expression.parameters)n.delete(u);if(n.size===0)return[];const l=[];return i instanceof qa&&n.has(i.name)?[new li(t.key,t.value,`["${i.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(i.eachChild(u=>{l.push(...Bh(u,t))}),l)}function Bd(i){const t=i.key,n=i.value,l=i.valueSpec,u=[];return Array.isArray(l.values)?l.values.indexOf(zr(n))===-1&&u.push(new li(t,n,`expected one of [${l.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(l.values).indexOf(zr(n))===-1&&u.push(new li(t,n,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(n)} found`)),u}function lu(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!lu(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function Dr(i,t="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};lu(i)||(i=Ha(i));const n=i;let l=!0;try{l=function(C){if(!cu(C))return C;let P=Br(C);return $u(P),P=cr(P),P}(n)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(n,null,2)}
        `)}const u=yt[`filter_${t}`],p=js(l,u);let g=null;if(p.result==="error")throw new Error(p.value.map(C=>`${C.key}: ${C.message}`).join(", "));g=(C,P,O)=>p.value.evaluate(C,P,{},O);let b=null,S=null;if(l!==n){const C=js(n,u);if(C.result==="error")throw new Error(C.value.map(P=>`${P.key}: ${P.message}`).join(", "));b=(P,O,B,$,G)=>C.value.evaluate(P,O,{},B,void 0,void 0,$,G),S=!lr(C.value.expression)}return{filter:g,dynamicFilter:b||void 0,needGeometry:Fd(l),needFeature:!!S}}function cr(i){if(!Array.isArray(i))return i;const t=function(n){if(op.has(n[0])){for(let l=1;l<n.length;l++)if(cu(n[l]))return!0}return n}(i);return t===!0?t:t.map(n=>cr(n))}function $u(i){let t=!1;const n=[];if(i[0]==="case"){for(let l=1;l<i.length-1;l+=2)t=t||cu(i[l]),n.push(i[l+1]);n.push(i[i.length-1])}else if(i[0]==="match"){t=t||cu(i[1]);for(let l=2;l<i.length-1;l+=2)n.push(i[l+1]);n.push(i[i.length-1])}else if(i[0]==="step"){t=t||cu(i[1]);for(let l=1;l<i.length-1;l+=2)n.push(i[l+1])}t&&(i.length=0,i.push("any",...n));for(let l=1;l<i.length;l++)$u(i[l])}function cu(i){if(!Array.isArray(i))return!1;if((t=i[0])==="pitch"||t==="distance-from-center")return!0;var t;for(let n=1;n<i.length;n++)if(cu(i[n]))return!0;return!1}const op=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function q0(i,t){return i<t?-1:i>t?1:0}function Fd(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let t=1;t<i.length;t++)if(Fd(i[t]))return!0;return!1}function Ha(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?Gu(i[1],i[2],"=="):t==="!="?oc(Gu(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Gu(i[1],i[2],t):t==="any"?(n=i.slice(1),["any"].concat(n.map(Ha))):t==="all"?["all"].concat(i.slice(1).map(Ha)):t==="none"?["all"].concat(i.slice(1).map(Ha).map(oc)):t==="in"?Ml(i[1],i.slice(2)):t==="!in"?oc(Ml(i[1],i.slice(2))):t==="has"?uu(i[1]):t==="!has"?oc(uu(i[1])):t!=="within"||i;var n}function Gu(i,t,n){switch(i){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,i,t]}}function Ml(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(n=>typeof n!=typeof t[0])?["filter-in-large",i,["literal",t.sort(q0)]]:["filter-in-small",i,["literal",t]]}}function uu(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function oc(i){return["!",i]}function ac(i){return lu(Br(i.value))?au(So({},i,{expressionContext:"filter",valueSpec:i.styleSpec[`filter_${i.layerType||"fill"}`]})):Lc(i)}function Lc(i){const t=i.value,n=i.key;if(Ut(t)!=="array")return[new li(n,t,`array expected, ${Ut(t)} found`)];const l=i.styleSpec;let u,p=[];if(t.length<1)return[new li(n,t,"filter array must have at least 1 element")];switch(p=p.concat(Bd({key:`${n}[0]`,value:t[0],valueSpec:l.filter_operator,style:i.style,styleSpec:i.styleSpec})),zr(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&zr(t[1])==="$type"&&p.push(new li(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&p.push(new li(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(u=Ut(t[1]),u!=="string"&&p.push(new li(`${n}[1]`,t[1],`string expected, ${u} found`)));for(let g=2;g<t.length;g++)u=Ut(t[g]),zr(t[1])==="$type"?p=p.concat(Bd({key:`${n}[${g}]`,value:t[g],valueSpec:l.geometry_type,style:i.style,styleSpec:i.styleSpec})):u!=="string"&&u!=="number"&&u!=="boolean"&&p.push(new li(`${n}[${g}]`,t[g],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let g=1;g<t.length;g++)p=p.concat(Lc({key:`${n}[${g}]`,value:t[g],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":u=Ut(t[1]),t.length!==2?p.push(new li(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):u!=="string"&&p.push(new li(`${n}[1]`,t[1],`string expected, ${u} found`));break;case"within":u=Ut(t[1]),t.length!==2?p.push(new li(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):u!=="object"&&p.push(new li(`${n}[1]`,t[1],`object expected, ${u} found`))}return p}function Fh(i,t){const n=i.key,l=i.style,u=i.styleSpec,p=i.value,g=i.objectKey,b=u[`${t}_${i.layerType}`];if(!b)return[];const S=g.match(/^(.*)-transition$/);if(t==="paint"&&S&&b[S[1]]&&b[S[1]].transition)return Wi({key:n,value:p,valueSpec:u.transition,style:l,styleSpec:u});const C=i.valueSpec||b[g];if(!C)return[new li(n,p,`unknown property "${g}"`)];let P;if(Ut(p)==="string"&&pt(C)&&!C.tokens&&(P=/^{([^}]+)}$/.exec(p)))return[new li(n,p,`"${g}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(P[1])} }\`.`)];const O=[];return i.layerType==="symbol"&&(g==="text-field"&&l&&!l.glyphs&&O.push(new li(n,p,'use of "text-field" requires a style "glyphs" property')),g==="text-font"&&Bi(Br(p))&&zr(p.type)==="identity"&&O.push(new li(n,p,'"text-font" does not support identity functions'))),O.concat(Wi({key:i.key,value:p,valueSpec:C,style:l,styleSpec:u,expressionContext:"property",propertyType:t,propertyKey:g}))}function Nh(i){return Fh(i,"paint")}function ap(i){return Fh(i,"layout")}function Nd(i){let t=[];const n=i.value,l=i.key,u=i.style,p=i.styleSpec;n.type||n.ref||t.push(new li(l,n,'either "type" or "ref" is required'));let g=zr(n.type);const b=zr(n.ref);if(n.id){const S=zr(n.id);for(let C=0;C<i.arrayIndex;C++){const P=u.layers[C];zr(P.id)===S&&t.push(new li(l,n.id,`duplicate layer id "${n.id}", previously used at line ${P.id.__line__}`))}}if("ref"in n){let S;["type","source","source-layer","filter","layout"].forEach(C=>{C in n&&t.push(new li(l,n[C],`"${C}" is prohibited for ref layers`))}),u.layers.forEach(C=>{zr(C.id)===b&&(S=C)}),S?S.ref?t.push(new li(l,n.ref,"ref cannot reference another ref layer")):g=zr(S.type):typeof b=="string"&&t.push(new li(l,n.ref,`ref layer "${b}" not found`))}else if(g!=="background"&&g!=="sky")if(n.source){const S=u.sources&&u.sources[n.source],C=S&&zr(S.type);S?C==="vector"&&g==="raster"?t.push(new li(l,n.source,`layer "${n.id}" requires a raster source`)):C==="raster"&&g!=="raster"?t.push(new li(l,n.source,`layer "${n.id}" requires a vector source`)):C!=="vector"||n["source-layer"]?C==="raster-dem"&&g!=="hillshade"?t.push(new li(l,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):g!=="line"||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||C==="geojson"&&S.lineMetrics||t.push(new li(l,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new li(l,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new li(l,n.source,`source "${n.source}" not found`))}else t.push(new li(l,n,'missing required property "source"'));return t=t.concat(aa({key:l,value:n,valueSpec:p.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Wi({key:`${l}.type`,value:n.type,valueSpec:p.layer.type,style:i.style,styleSpec:i.styleSpec,object:n,objectKey:"type"}),filter:S=>ac(So({layerType:g},S)),layout:S=>aa({layer:n,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":C=>ap(So({layerType:g},C))}}),paint:S=>aa({layer:n,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":C=>Nh(So({layerType:g},C))}})}})),t}function Al(i){const t=i.value,n=i.key,l=Ut(t);return l!=="string"?[new li(n,t,`string expected, ${l} found`)]:[]}const du={promoteId:function({key:i,value:t}){if(Ut(t)==="string")return Al({key:i,value:t});{const n=[];for(const l in t)n.push(...Al({key:`${i}.${l}`,value:t[l]}));return n}}};function hu(i){const t=i.value,n=i.key,l=i.styleSpec,u=i.style;if(!t.type)return[new li(n,t,'"type" is required')];const p=zr(t.type);let g;switch(p){case"vector":case"raster":case"raster-dem":return g=aa({key:n,value:t,valueSpec:l[`source_${p.replace("-","_")}`],style:i.style,styleSpec:l,objectElementValidators:du}),g;case"geojson":if(g=aa({key:n,value:t,valueSpec:l.source_geojson,style:u,styleSpec:l,objectElementValidators:du}),t.cluster)for(const b in t.clusterProperties){const[S,C]=t.clusterProperties[b],P=typeof S=="string"?[S,["accumulated"],["get",b]]:S;g.push(...au({key:`${n}.${b}.map`,value:C,expressionContext:"cluster-map"})),g.push(...au({key:`${n}.${b}.reduce`,value:P,expressionContext:"cluster-reduce"}))}return g;case"video":return aa({key:n,value:t,valueSpec:l.source_video,style:u,styleSpec:l});case"image":return aa({key:n,value:t,valueSpec:l.source_image,style:u,styleSpec:l});case"canvas":return[new li(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bd({key:`${n}.type`,value:t.type,valueSpec:{values:Uh(l)},style:u,styleSpec:l})}}function Uh(i){return i.source.reduce((t,n)=>{const l=i[n];return l.type.type==="enum"&&(t=t.concat(Object.keys(l.type.values))),t},[])}function re(i){const t=i.value,n=i.styleSpec,l=n.light,u=i.style;let p=[];const g=Ut(t);if(t===void 0)return p;if(g!=="object")return p=p.concat([new li("light",t,`object expected, ${g} found`)]),p;for(const b in t){const S=b.match(/^(.*)-transition$/);p=p.concat(S&&l[S[1]]&&l[S[1]].transition?Wi({key:b,value:t[b],valueSpec:n.transition,style:u,styleSpec:n}):l[b]?Wi({key:b,value:t[b],valueSpec:l[b],style:u,styleSpec:n}):[new li(b,t[b],`unknown property "${b}"`)])}return p}function Il(i){const t=i.value,n=i.key,l=i.style,u=i.styleSpec,p=u.terrain;let g=[];const b=Ut(t);if(t===void 0)return g;if(b!=="object")return g=g.concat([new li("terrain",t,`object expected, ${b} found`)]),g;for(const S in t){const C=S.match(/^(.*)-transition$/);g=g.concat(C&&p[C[1]]&&p[C[1]].transition?Wi({key:S,value:t[S],valueSpec:u.transition,style:l,styleSpec:u}):p[S]?Wi({key:S,value:t[S],valueSpec:p[S],style:l,styleSpec:u}):[new li(S,t[S],`unknown property "${S}"`)])}if(t.source){const S=l.sources&&l.sources[t.source],C=S&&zr(S.type);S?C!=="raster-dem"&&g.push(new li(n,t.source,`terrain cannot be used with a source of type ${String(C)}, it only be used with a "raster-dem" source type`)):g.push(new li(n,t.source,`source "${t.source}" not found`))}else g.push(new li(n,t,'terrain is missing required property "source"'));return g}function qu(i){const t=i.value,n=i.style,l=i.styleSpec,u=l.fog;let p=[];const g=Ut(t);if(t===void 0)return p;if(g!=="object")return p=p.concat([new li("fog",t,`object expected, ${g} found`)]),p;for(const b in t){const S=b.match(/^(.*)-transition$/);p=p.concat(S&&u[S[1]]&&u[S[1]].transition?Wi({key:b,value:t[b],valueSpec:l.transition,style:n,styleSpec:l}):u[b]?Wi({key:b,value:t[b],valueSpec:u[b],style:n,styleSpec:l}):[new li(b,t[b],`unknown property "${b}"`)])}return p}const qo={"*":()=>[],array:sc,boolean:function(i){const t=i.value,n=i.key,l=Ut(t);return l!=="boolean"?[new li(n,t,`boolean expected, ${l} found`)]:[]},number:Vu,color:function(i){const t=i.key,n=i.value,l=Ut(n);return l!=="string"?[new li(t,n,`color expected, ${l} found`)]:pl(n)===null?[new li(t,n,`color expected, "${n}" found`)]:[]},enum:Bd,filter:ac,function:zd,layer:Nd,object:aa,source:hu,light:re,terrain:Il,fog:qu,string:Al,formatted:function(i){return Al(i).length===0?[]:au(i)},resolvedImage:function(i){return Al(i).length===0?[]:au(i)},projection:function(i){const t=i.value,n=i.styleSpec,l=n.projection,u=i.style;let p=[];const g=Ut(t);if(g==="object")for(const b in t)p=p.concat(Wi({key:b,value:t[b],valueSpec:l[b],style:u,styleSpec:n}));else g!=="string"&&(p=p.concat([new li("projection",t,`object or string expected, ${g} found`)]));return p}};function Wi(i){const t=i.value,n=i.valueSpec,l=i.styleSpec;return n.expression&&Bi(zr(t))?zd(i):n.expression&&er(Br(t))?au(i):n.type&&qo[n.type]?qo[n.type](i):aa(So({},i,{valueSpec:n.type?l[n.type]:n}))}function W0(i){const t=i.value,n=i.key,l=Al(i);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new li(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new li(n,t,'"glyphs" url must include a "{range}" token'))),l}function jh(i,t=yt){return kl(Wi({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,objectElementValidators:{glyphs:W0,"*":()=>[]}}))}const H0=i=>kl(Nh(i)),Rc=i=>kl(ap(i));function kl(i){return i.slice().sort((t,n)=>t.line&&n.line?t.line-n.line:0)}function lp(i,t){let n=!1;if(t&&t.length)for(const l of t)i.fire(new ja(new Error(l.message))),n=!0;return n}var fu=Za;function Za(i,t,n){var l=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var u=new Int32Array(this.arrayBuffer);i=u[0],this.d=(t=u[1])+2*(n=u[2]);for(var p=0;p<this.d*this.d;p++){var g=u[3+p],b=u[3+p+1];l.push(g===b?null:u.subarray(g,b))}var S=u[3+l.length+1];this.keys=u.subarray(u[3+l.length],S),this.bboxes=u.subarray(S),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var C=0;C<this.d*this.d;C++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=i,this.padding=n,this.scale=t/i,this.uid=0;var P=n/t*i;this.min=-P,this.max=i+P}Za.prototype.insert=function(i,t,n,l,u){this._forEachCell(t,n,l,u,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(l),this.bboxes.push(u)},Za.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Za.prototype._insertCell=function(i,t,n,l,u,p){this.cells[u].push(p)},Za.prototype.query=function(i,t,n,l,u){var p=this.min,g=this.max;if(i<=p&&t<=p&&g<=n&&g<=l&&!u)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(i,t,n,l,this._queryCell,b,{},u),b},Za.prototype._queryCell=function(i,t,n,l,u,p,g,b){var S=this.cells[u];if(S!==null)for(var C=this.keys,P=this.bboxes,O=0;O<S.length;O++){var B=S[O];if(g[B]===void 0){var $=4*B;(b?b(P[$+0],P[$+1],P[$+2],P[$+3]):i<=P[$+2]&&t<=P[$+3]&&n>=P[$+0]&&l>=P[$+1])?(g[B]=!0,p.push(C[B])):g[B]=!1}}},Za.prototype._forEachCell=function(i,t,n,l,u,p,g,b){for(var S=this._convertToCellCoord(i),C=this._convertToCellCoord(t),P=this._convertToCellCoord(n),O=this._convertToCellCoord(l),B=S;B<=P;B++)for(var $=C;$<=O;$++){var G=this.d*$+B;if((!b||b(this._convertFromCellCoord(B),this._convertFromCellCoord($),this._convertFromCellCoord(B+1),this._convertFromCellCoord($+1)))&&u.call(this,i,t,n,l,G,p,g,b))return}},Za.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},Za.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},Za.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,t=3+this.cells.length+1+1,n=0,l=0;l<this.cells.length;l++)n+=this.cells[l].length;var u=new Int32Array(t+n+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var p=t,g=0;g<i.length;g++){var b=i[g];u[3+g]=p,u.set(b,p),p+=b.length}return u[3+i.length]=p,u.set(this.keys,p),u[3+i.length+1]=p+=this.keys.length,u.set(this.bboxes,p),p+=this.bboxes.length,u.buffer};const Ud={};function ni(i,t,n={}){Object.defineProperty(i,"_classRegistryKey",{value:t,writeable:!1}),Ud[t]={klass:i,omit:n.omit||[]}}ni(Object,"Object"),fu.serialize=function(i,t){const n=i.toArrayBuffer();return t&&t.push(n),{buffer:n}},fu.deserialize=function(i){return new fu(i.buffer)},Object.defineProperty(fu,"name",{value:"Grid"}),ni(fu,"Grid"),ni(kr,"Color"),ni(Error,"Error"),ni(Zs,"AJAXError"),ni(Mo,"ResolvedImage"),ni(Cl,"StylePropertyFunction"),ni(Cs,"StyleExpression",{omit:["_evaluator"]}),ni(Jr,"ZoomDependentExpression"),ni(ho,"ZoomConstantExpression"),ni(qa,"CompoundExpression",{omit:["_evaluate"]});for(const i in je)Ud[je[i]._classRegistryKey]||ni(je[i],`Expression${i}`);function cp(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function up(i){return D.ImageBitmap&&i instanceof D.ImageBitmap}function lc(i,t){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(cp(i)||up(i))return t&&t.push(i),i;if(ArrayBuffer.isView(i)){const n=i;return t&&t.push(n.buffer),n}if(i instanceof D.ImageData)return t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const n=[];for(const l of i)n.push(lc(l,t));return n}if(typeof i=="object"){const n=i.constructor,l=n._classRegistryKey;if(!l)throw new Error(`can't serialize object of unregistered class ${l}`);const u=n.serialize?n.serialize(i,t):{};if(!n.serialize){for(const p in i)i.hasOwnProperty(p)&&(Ud[l].omit.indexOf(p)>=0||(u[p]=lc(i[p],t)));i instanceof Error&&(u.message=i.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof i)}function Wu(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||cp(i)||up(i)||ArrayBuffer.isView(i)||i instanceof D.ImageData)return i;if(Array.isArray(i))return i.map(Wu);if(typeof i=="object"){const t=i.$name||"Object",{klass:n}=Ud[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(i);const l=Object.create(n.prototype);for(const u of Object.keys(i))u!=="$name"&&(l[u]=Wu(i[u]));return l}throw new Error("can't deserialize object of type "+typeof i)}const Vh=i=>i>=1536&&i<=1791,Ya=i=>i>=1872&&i<=1919,$h=i=>i>=2208&&i<=2303,Gh=i=>i>=11904&&i<=12031,qh=i=>i>=12032&&i<=12255,Wh=i=>i>=12272&&i<=12287,pu=i=>i>=12288&&i<=12351,ka=i=>i>=12352&&i<=12447,jd=i=>i>=12448&&i<=12543,dp=i=>i>=12544&&i<=12591,Wo=i=>i>=12704&&i<=12735,hp=i=>i>=12736&&i<=12783,fp=i=>i>=12784&&i<=12799,pp=i=>i>=12800&&i<=13055,mp=i=>i>=13056&&i<=13311,_p=i=>i>=13312&&i<=19903,Vd=i=>i>=19968&&i<=40959,Hh=i=>i>=40960&&i<=42127,gp=i=>i>=42128&&i<=42191,Zh=i=>i>=44032&&i<=55215,Oc=i=>i>=63744&&i<=64255,f=i=>i>=64336&&i<=65023,s=i=>i>=65040&&i<=65055,c=i=>i>=65072&&i<=65103,m=i=>i>=65104&&i<=65135,v=i=>i>=65136&&i<=65279,w=i=>i>=65280&&i<=65519;function M(i){for(const t of i)if(j(t.charCodeAt(0)))return!0;return!1}function k(i){for(const t of i)if(!L(t.charCodeAt(0)))return!1;return!0}function L(i){return!(Vh(i)||Ya(i)||$h(i)||f(i)||v(i))}function j(i){return!(i!==746&&i!==747&&(i<4352||!(Wo(i)||dp(i)||c(i)&&!(i>=65097&&i<=65103)||Oc(i)||mp(i)||Gh(i)||hp(i)||!(!pu(i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||_p(i)||Vd(i)||pp(i)||(t=>t>=12592&&t<=12687)(i)||(t=>t>=43360&&t<=43391)(i)||(t=>t>=55216&&t<=55295)(i)||(t=>t>=4352&&t<=4607)(i)||Zh(i)||ka(i)||Wh(i)||(t=>t>=12688&&t<=12703)(i)||qh(i)||fp(i)||jd(i)&&i!==12540||!(!w(i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!m(i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||(t=>t>=5120&&t<=5759)(i)||(t=>t>=6320&&t<=6399)(i)||s(i)||(t=>t>=19904&&t<=19967)(i)||Hh(i)||gp(i))))}function N(i){return!(j(i)||function(t){return!!((n=>n>=128&&n<=255)(t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||(n=>n>=8192&&n<=8303)(t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||(n=>n>=8448&&n<=8527)(t)||(n=>n>=8528&&n<=8591)(t)||(n=>n>=8960&&n<=9215)(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||(n=>n>=9216&&n<=9279)(t)&&t!==9251||(n=>n>=9280&&n<=9311)(t)||(n=>n>=9312&&n<=9471)(t)||(n=>n>=9632&&n<=9727)(t)||(n=>n>=9728&&n<=9983)(t)&&!(t>=9754&&t<=9759)||(n=>n>=11008&&n<=11263)(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||pu(t)||jd(t)||(n=>n>=57344&&n<=63743)(t)||c(t)||m(t)||w(t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}function W(i){return i>=1424&&i<=2303||f(i)||v(i)}function ee(i,t){return!(!t&&W(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||(n=>n>=6016&&n<=6143)(i))}function le(i){for(const t of i)if(W(t.charCodeAt(0)))return!0;return!1}const ce="deferred",de="loading",ie="loaded";let se=null,me="unavailable",ue=null;const xe=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(me="error"),se&&se(i)};function De(){we.fire(new na("pluginStateChange",{pluginStatus:me,pluginURL:ue}))}const we=new ao,Ue=function(){return me},st=function(){if(me!==ce||!ue)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");me=de,De(),ue&&Ys({url:ue},i=>{i?xe(i):(me=ie,De())})},Je={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>me===ie||Je.applyArabicShaping!=null,isLoading:()=>me===de,setState(i){me=i.pluginStatus,ue=i.pluginURL},isParsed:()=>Je.applyArabicShaping!=null&&Je.processBidirectionalText!=null&&Je.processStyledBidirectionalText!=null,getPluginURL:()=>ue};class Ge{constructor(t,n){this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(t){return function(n,l){for(const u of n)if(!ee(u.charCodeAt(0),l))return!1;return!0}(t,Je.isLoaded())}}class It{constructor(t,n){this.property=t,this.value=n,this.expression=function(l,u){if(Bi(l))return new Cl(l,u);if(er(l)){const p=Sl(l,u);if(p.result==="error")throw new Error(p.value.map(g=>`${g.key}: ${g.message}`).join(", "));return p.value}{let p=l;return typeof l=="string"&&u.type==="color"&&(p=kr.parse(l)),{kind:"constant",evaluate:()=>p}}}(n===void 0?t.specification.default:n,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,n,l){return this.property.possiblyEvaluate(this,t,n,l)}}class Ke{constructor(t){this.property=t,this.value=new It(t,void 0)}transitioned(t,n){return new lt(this.property,this.value,n,Fn({},t.transition,this.transition),t.now)}untransitioned(){return new lt(this.property,this.value,null,{},0)}}class vt{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return bs(this._values[t].value.value)}setValue(t,n){this._values.hasOwnProperty(t)||(this._values[t]=new Ke(this._values[t].property)),this._values[t].value=new It(this._values[t].property,n===null?void 0:bs(n))}getTransition(t){return bs(this._values[t].transition)}setTransition(t,n){this._values.hasOwnProperty(t)||(this._values[t]=new Ke(this._values[t].property)),this._values[t].transition=bs(n)||void 0}serialize(){const t={};for(const n of Object.keys(this._values)){const l=this.getValue(n);l!==void 0&&(t[n]=l);const u=this.getTransition(n);u!==void 0&&(t[`${n}-transition`]=u)}return t}transitioned(t,n){const l=new Bt(this._properties);for(const u of Object.keys(this._values))l._values[u]=this._values[u].transitioned(t,n._values[u]);return l}untransitioned(){const t=new Bt(this._properties);for(const n of Object.keys(this._values))t._values[n]=this._values[n].untransitioned();return t}}class lt{constructor(t,n,l,u,p){const g=u.delay||0,b=u.duration||0;p=p||0,this.property=t,this.value=n,this.begin=p+g,this.end=this.begin+b,t.specification.transition&&(u.delay||u.duration)&&(this.prior=l)}possiblyEvaluate(t,n,l){const u=t.now||0,p=this.value.possiblyEvaluate(t,n,l),g=this.prior;if(g){if(u>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(u<this.begin)return g.possiblyEvaluate(t,n,l);{const b=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(g.possiblyEvaluate(t,n,l),p,Wt(b))}}return p}}class Bt{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,n,l){const u=new jt(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].possiblyEvaluate(t,n,l);return u}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class ut{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return bs(this._values[t].value)}setValue(t,n){this._values[t]=new It(this._values[t].property,n===null?void 0:bs(n))}serialize(){const t={};for(const n of Object.keys(this._values)){const l=this.getValue(n);l!==void 0&&(t[n]=l)}return t}possiblyEvaluate(t,n,l){const u=new jt(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].possiblyEvaluate(t,n,l);return u}}class Mt{constructor(t,n,l){this.property=t,this.value=n,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,n,l,u){return this.property.evaluate(this.value,this.parameters,t,n,l,u)}}class jt{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Ze{constructor(t){this.specification=t}possiblyEvaluate(t,n){return t.expression.evaluate(n)}interpolate(t,n,l){const u=Ts[this.specification.type];return u?u(t,n,l):t}}class at{constructor(t,n){this.specification=t,this.overrides=n}possiblyEvaluate(t,n,l,u){return new Mt(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(n,null,{},l,u)}:t.expression,n)}interpolate(t,n,l){if(t.value.kind!=="constant"||n.value.kind!=="constant")return t;if(t.value.value===void 0||n.value.value===void 0)return new Mt(this,{kind:"constant",value:void 0},t.parameters);const u=Ts[this.specification.type];return u?new Mt(this,{kind:"constant",value:u(t.value.value,n.value.value,l)},t.parameters):t}evaluate(t,n,l,u,p,g){return t.kind==="constant"?t.value:t.evaluate(n,l,u,p,g)}}class mi{constructor(t){this.specification=t}possiblyEvaluate(t,n,l,u){return!!t.expression.evaluate(n,null,{},l,u)}interpolate(){return!1}}class Ei{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const n=new Ge(0,{});for(const l in t){const u=t[l];u.specification.overridable&&this.overridableProperties.push(l);const p=this.defaultPropertyValues[l]=new It(u,void 0),g=this.defaultTransitionablePropertyValues[l]=new Ke(u);this.defaultTransitioningPropertyValues[l]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=p.possiblyEvaluate(n)}}}function _i(i,t){return 256*(i=fi(Math.floor(i),0,255))+fi(Math.floor(t),0,255)}ni(at,"DataDrivenProperty"),ni(Ze,"DataConstantProperty"),ni(mi,"ColorRampProperty");const zi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class sn{constructor(t,n){this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Mi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,n){return t._trim(),n&&(t.isTransferred=!0,n.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const n=Object.create(this.prototype);return n.arrayBuffer=t.arrayBuffer,n.length=t.length,n.capacity=t.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function ci(i,t=1){let n=0,l=0;return{members:i.map(u=>{const p=zi[u.type].BYTES_PER_ELEMENT,g=n=Kn(n,Math.max(t,p)),b=u.components||1;return l=Math.max(l,p),n+=p*b,{name:u.name,type:u.type,components:b,offset:g}}),size:Kn(n,Math.max(l,t)),alignment:t}}function Kn(i,t){return Math.ceil(i/t)*t}class zn extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n){const l=this.length;return this.resize(l+1),this.emplace(l,t,n)}emplace(t,n,l){const u=2*t;return this.int16[u+0]=n,this.int16[u+1]=l,t}}zn.prototype.bytesPerElement=4,ni(zn,"StructArrayLayout2i4");class tr extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,l){const u=this.length;return this.resize(u+1),this.emplace(u,t,n,l)}emplace(t,n,l,u){const p=3*t;return this.int16[p+0]=n,this.int16[p+1]=l,this.int16[p+2]=u,t}}tr.prototype.bytesPerElement=6,ni(tr,"StructArrayLayout3i6");class Hn extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,n,l,u)}emplace(t,n,l,u,p){const g=4*t;return this.int16[g+0]=n,this.int16[g+1]=l,this.int16[g+2]=u,this.int16[g+3]=p,t}}Hn.prototype.bytesPerElement=8,ni(Hn,"StructArrayLayout4i8");class Do extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p,g,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,l,u,p,g,b)}emplace(t,n,l,u,p,g,b,S){const C=6*t,P=12*t,O=3*t;return this.int16[C+0]=n,this.int16[C+1]=l,this.uint8[P+4]=u,this.uint8[P+5]=p,this.uint8[P+6]=g,this.uint8[P+7]=b,this.float32[O+2]=S,t}}Do.prototype.bytesPerElement=12,ni(Do,"StructArrayLayout2i4ub1f12");class fo extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,n,l,u)}emplace(t,n,l,u,p){const g=4*t;return this.float32[g+0]=n,this.float32[g+1]=l,this.float32[g+2]=u,this.float32[g+3]=p,t}}fo.prototype.bytesPerElement=16,ni(fo,"StructArrayLayout4f16");class Qs extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,t,n,l,u,p)}emplace(t,n,l,u,p,g){const b=6*t,S=3*t;return this.uint16[b+0]=n,this.uint16[b+1]=l,this.uint16[b+2]=u,this.uint16[b+3]=p,this.float32[S+2]=g,t}}Qs.prototype.bytesPerElement=12,ni(Qs,"StructArrayLayout4ui1f12");class Da extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,n,l,u)}emplace(t,n,l,u,p){const g=4*t;return this.uint16[g+0]=n,this.uint16[g+1]=l,this.uint16[g+2]=u,this.uint16[g+3]=p,t}}Da.prototype.bytesPerElement=8,ni(Da,"StructArrayLayout4ui8");class ur extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p,g){const b=this.length;return this.resize(b+1),this.emplace(b,t,n,l,u,p,g)}emplace(t,n,l,u,p,g,b){const S=6*t;return this.int16[S+0]=n,this.int16[S+1]=l,this.int16[S+2]=u,this.int16[S+3]=p,this.int16[S+4]=g,this.int16[S+5]=b,t}}ur.prototype.bytesPerElement=12,ni(ur,"StructArrayLayout6i12");class Zn extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p,g,b,S,C,P,O,B){const $=this.length;return this.resize($+1),this.emplace($,t,n,l,u,p,g,b,S,C,P,O,B)}emplace(t,n,l,u,p,g,b,S,C,P,O,B,$){const G=12*t;return this.int16[G+0]=n,this.int16[G+1]=l,this.int16[G+2]=u,this.int16[G+3]=p,this.uint16[G+4]=g,this.uint16[G+5]=b,this.uint16[G+6]=S,this.uint16[G+7]=C,this.int16[G+8]=P,this.int16[G+9]=O,this.int16[G+10]=B,this.int16[G+11]=$,t}}Zn.prototype.bytesPerElement=24,ni(Zn,"StructArrayLayout4i4ui4i24");class Pn extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p,g){const b=this.length;return this.resize(b+1),this.emplace(b,t,n,l,u,p,g)}emplace(t,n,l,u,p,g,b){const S=10*t,C=5*t;return this.int16[S+0]=n,this.int16[S+1]=l,this.int16[S+2]=u,this.float32[C+2]=p,this.float32[C+3]=g,this.float32[C+4]=b,t}}Pn.prototype.bytesPerElement=20,ni(Pn,"StructArrayLayout3i3f20");class Gr extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint32[1*t+0]=n,t}}Gr.prototype.bytesPerElement=4,ni(Gr,"StructArrayLayout1ul4");class Vs extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p,g,b,S,C,P,O,B,$){const G=this.length;return this.resize(G+1),this.emplace(G,t,n,l,u,p,g,b,S,C,P,O,B,$)}emplace(t,n,l,u,p,g,b,S,C,P,O,B,$,G){const Y=20*t,ne=10*t;return this.int16[Y+0]=n,this.int16[Y+1]=l,this.int16[Y+2]=u,this.int16[Y+3]=p,this.int16[Y+4]=g,this.float32[ne+3]=b,this.float32[ne+4]=S,this.float32[ne+5]=C,this.float32[ne+6]=P,this.int16[Y+14]=O,this.uint32[ne+8]=B,this.uint16[Y+18]=$,this.uint16[Y+19]=G,t}}Vs.prototype.bytesPerElement=40,ni(Vs,"StructArrayLayout5i4f1i1ul2ui40");class dr extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p,g,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,l,u,p,g,b)}emplace(t,n,l,u,p,g,b,S){const C=8*t;return this.int16[C+0]=n,this.int16[C+1]=l,this.int16[C+2]=u,this.int16[C+4]=p,this.int16[C+5]=g,this.int16[C+6]=b,this.int16[C+7]=S,t}}dr.prototype.bytesPerElement=16,ni(dr,"StructArrayLayout3i2i2i16");class eo extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,t,n,l,u,p)}emplace(t,n,l,u,p,g){const b=4*t,S=8*t;return this.float32[b+0]=n,this.float32[b+1]=l,this.float32[b+2]=u,this.int16[S+6]=p,this.int16[S+7]=g,t}}eo.prototype.bytesPerElement=16,ni(eo,"StructArrayLayout2f1f2i16");class Hu extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,n,l,u)}emplace(t,n,l,u,p){const g=12*t,b=3*t;return this.uint8[g+0]=n,this.uint8[g+1]=l,this.float32[b+1]=u,this.float32[b+2]=p,t}}Hu.prototype.bytesPerElement=12,ni(Hu,"StructArrayLayout2ub2f12");class Pa extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,l){const u=this.length;return this.resize(u+1),this.emplace(u,t,n,l)}emplace(t,n,l,u){const p=3*t;return this.float32[p+0]=n,this.float32[p+1]=l,this.float32[p+2]=u,t}}Pa.prototype.bytesPerElement=12,ni(Pa,"StructArrayLayout3f12");class $s extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,l){const u=this.length;return this.resize(u+1),this.emplace(u,t,n,l)}emplace(t,n,l,u){const p=3*t;return this.uint16[p+0]=n,this.uint16[p+1]=l,this.uint16[p+2]=u,t}}$s.prototype.bytesPerElement=6,ni($s,"StructArrayLayout3ui6");class Po extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p,g,b,S,C,P,O,B,$,G,Y,ne,ye,Ee,ge,be,Pe){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,t,n,l,u,p,g,b,S,C,P,O,B,$,G,Y,ne,ye,Ee,ge,be,Pe)}emplace(t,n,l,u,p,g,b,S,C,P,O,B,$,G,Y,ne,ye,Ee,ge,be,Pe,Ie){const rt=30*t,it=15*t,xt=60*t;return this.int16[rt+0]=n,this.int16[rt+1]=l,this.int16[rt+2]=u,this.float32[it+2]=p,this.float32[it+3]=g,this.uint16[rt+8]=b,this.uint16[rt+9]=S,this.uint32[it+5]=C,this.uint32[it+6]=P,this.uint32[it+7]=O,this.uint16[rt+16]=B,this.uint16[rt+17]=$,this.uint16[rt+18]=G,this.float32[it+10]=Y,this.float32[it+11]=ne,this.uint8[xt+48]=ye,this.uint8[xt+49]=Ee,this.uint8[xt+50]=ge,this.uint32[it+13]=be,this.int16[rt+28]=Pe,this.uint8[xt+58]=Ie,t}}Po.prototype.bytesPerElement=60,ni(Po,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Xa extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p,g,b,S,C,P,O,B,$,G,Y,ne,ye,Ee,ge,be,Pe,Ie,rt,it,xt,Gt,dt,wt,At,Rt){const qt=this.length;return this.resize(qt+1),this.emplace(qt,t,n,l,u,p,g,b,S,C,P,O,B,$,G,Y,ne,ye,Ee,ge,be,Pe,Ie,rt,it,xt,Gt,dt,wt,At,Rt)}emplace(t,n,l,u,p,g,b,S,C,P,O,B,$,G,Y,ne,ye,Ee,ge,be,Pe,Ie,rt,it,xt,Gt,dt,wt,At,Rt,qt){const ft=38*t,Qt=19*t;return this.int16[ft+0]=n,this.int16[ft+1]=l,this.int16[ft+2]=u,this.float32[Qt+2]=p,this.float32[Qt+3]=g,this.int16[ft+8]=b,this.int16[ft+9]=S,this.int16[ft+10]=C,this.int16[ft+11]=P,this.int16[ft+12]=O,this.int16[ft+13]=B,this.uint16[ft+14]=$,this.uint16[ft+15]=G,this.uint16[ft+16]=Y,this.uint16[ft+17]=ne,this.uint16[ft+18]=ye,this.uint16[ft+19]=Ee,this.uint16[ft+20]=ge,this.uint16[ft+21]=be,this.uint16[ft+22]=Pe,this.uint16[ft+23]=Ie,this.uint16[ft+24]=rt,this.uint16[ft+25]=it,this.uint16[ft+26]=xt,this.uint16[ft+27]=Gt,this.uint16[ft+28]=dt,this.uint32[Qt+15]=wt,this.float32[Qt+16]=At,this.float32[Qt+17]=Rt,this.float32[Qt+18]=qt,t}}Xa.prototype.bytesPerElement=76,ni(Xa,"StructArrayLayout3i2f6i15ui1ul3f76");class la extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.float32[1*t+0]=n,t}}la.prototype.bytesPerElement=4,ni(la,"StructArrayLayout1f4");class dn extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,l,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,t,n,l,u,p)}emplace(t,n,l,u,p,g){const b=5*t;return this.float32[b+0]=n,this.float32[b+1]=l,this.float32[b+2]=u,this.float32[b+3]=p,this.float32[b+4]=g,t}}dn.prototype.bytesPerElement=20,ni(dn,"StructArrayLayout5f20");class mu extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,n,l,u)}emplace(t,n,l,u,p){const g=6*t;return this.uint32[3*t+0]=n,this.uint16[g+2]=l,this.uint16[g+3]=u,this.uint16[g+4]=p,t}}mu.prototype.bytesPerElement=12,ni(mu,"StructArrayLayout1ul3ui12");class Ka extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n){const l=this.length;return this.resize(l+1),this.emplace(l,t,n)}emplace(t,n,l){const u=2*t;return this.uint16[u+0]=n,this.uint16[u+1]=l,t}}Ka.prototype.bytesPerElement=4,ni(Ka,"StructArrayLayout2ui4");class zc extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint16[1*t+0]=n,t}}zc.prototype.bytesPerElement=2,ni(zc,"StructArrayLayout1ui2");class Yh extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n){const l=this.length;return this.resize(l+1),this.emplace(l,t,n)}emplace(t,n,l){const u=2*t;return this.float32[u+0]=n,this.float32[u+1]=l,t}}Yh.prototype.bytesPerElement=8,ni(Yh,"StructArrayLayout2f8");class m_ extends sn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}m_.prototype.size=40;class Z0 extends Vs{get(t){return new m_(this,t)}}ni(Z0,"CollisionBoxArray");class La extends sn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}La.prototype.size=60;class __ extends Po{get(t){return new La(this,t)}}ni(__,"PlacedSymbolArray");class Xh extends sn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Xh.prototype.size=76;class yp extends Xa{get(t){return new Xh(this,t)}}ni(yp,"SymbolInstanceArray");class Y0 extends la{getoffsetX(t){return this.float32[1*t+0]}}ni(Y0,"GlyphOffsetArray");class X0 extends zn{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}ni(X0,"SymbolLineVertexArray");class ca extends sn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ca.prototype.size=12;class Bc extends mu{get(t){return new ca(this,t)}}ni(Bc,"FeatureIndexArray");class vp extends Ka{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}ni(vp,"FillExtrusionCentroidArray");const g_=ci([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),xp=ci([{name:"a_dash",components:4,type:"Uint16"}]);var Zu={exports:{}},bp={exports:{}};bp.exports=function(i,t){var n,l,u,p,g,b,S,C;for(l=i.length-(n=3&i.length),u=t,g=3432918353,b=461845907,C=0;C<l;)S=255&i.charCodeAt(C)|(255&i.charCodeAt(++C))<<8|(255&i.charCodeAt(++C))<<16|(255&i.charCodeAt(++C))<<24,++C,u=27492+(65535&(p=5*(65535&(u=(u^=S=(65535&(S=(S=(65535&S)*g+(((S>>>16)*g&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295)<<13|u>>>19))+((5*(u>>>16)&65535)<<16)&4294967295))+((58964+(p>>>16)&65535)<<16);switch(S=0,n){case 3:S^=(255&i.charCodeAt(C+2))<<16;case 2:S^=(255&i.charCodeAt(C+1))<<8;case 1:u^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(C)))*g+(((S>>>16)*g&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295}return u^=i.length,u=2246822507*(65535&(u^=u>>>16))+((2246822507*(u>>>16)&65535)<<16)&4294967295,u=3266489909*(65535&(u^=u>>>13))+((3266489909*(u>>>16)&65535)<<16)&4294967295,(u^=u>>>16)>>>0};var K0={exports:{}};K0.exports=function(i,t){for(var n,l=i.length,u=t^l,p=0;l>=4;)n=1540483477*(65535&(n=255&i.charCodeAt(p)|(255&i.charCodeAt(++p))<<8|(255&i.charCodeAt(++p))<<16|(255&i.charCodeAt(++p))<<24))+((1540483477*(n>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),l-=4,++p;switch(l){case 3:u^=(255&i.charCodeAt(p+2))<<16;case 2:u^=(255&i.charCodeAt(p+1))<<8;case 1:u=1540483477*(65535&(u^=255&i.charCodeAt(p)))+((1540483477*(u>>>16)&65535)<<16)}return u=1540483477*(65535&(u^=u>>>13))+((1540483477*(u>>>16)&65535)<<16),(u^=u>>>15)>>>0};var wp=bp.exports,J0=K0.exports;Zu.exports=wp,Zu.exports.murmur3=wp,Zu.exports.murmur2=J0;class Dl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,n,l,u){this.ids.push(y_(t)),this.positions.push(n,l,u)}getPositions(t){const n=y_(t);let l=0,u=this.ids.length-1;for(;l<u;){const g=l+u>>1;this.ids[g]>=n?u=g:l=g+1}const p=[];for(;this.ids[l]===n;)p.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return p}static serialize(t,n){const l=new Float64Array(t.ids),u=new Uint32Array(t.positions);return cc(l,u,0,l.length-1),n&&n.push(l.buffer,u.buffer),{ids:l,positions:u}}static deserialize(t){const n=new Dl;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}function y_(i){const t=+i;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Zu.exports(String(i))}function cc(i,t,n,l){for(;n<l;){const u=i[n+l>>1];let p=n-1,g=l+1;for(;;){do p++;while(i[p]<u);do g--;while(i[g]>u);if(p>=g)break;Kh(i,p,g),Kh(t,3*p,3*g),Kh(t,3*p+1,3*g+1),Kh(t,3*p+2,3*g+2)}g-n<l-g?(cc(i,t,n,g),n=g+1):(cc(i,t,g+1,l),l=g)}}function Kh(i,t,n){const l=i[t];i[t]=i[n],i[n]=l}ni(Dl,"FeaturePositionMap");class uc{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,n){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,n),this.initialized=!0),!!this.location}}class $d extends uc{constructor(t){super(t),this.current=0}set(t,n,l){this.fetchUniformLocation(t,n)&&this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class v_ extends uc{constructor(t){super(t),this.current=[0,0,0,0]}set(t,n,l){this.fetchUniformLocation(t,n)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3])))}}class x_ extends uc{constructor(t){super(t),this.current=kr.transparent}set(t,n,l){this.fetchUniformLocation(t,n)&&(l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a)))}}const L2=new Float32Array(16),b_=new Float32Array(9),w_=new Float32Array(4);function Q0(i){return[_i(255*i.r,255*i.g),_i(255*i.b,255*i.a)]}class Gd{constructor(t,n,l){this.value=t,this.uniformNames=n.map(u=>`u_${u}`),this.type=l}setUniform(t,n,l,u,p){n.set(t,p,u.constantOr(this.value))}getBinding(t,n){return this.type==="color"?new x_(t):new $d(t)}}class Yu{constructor(t,n){this.uniformNames=n.map(l=>`u_${l}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,n,l,u,p){const g=p==="u_pattern"||p==="u_dash"?this.pattern:p==="u_pixel_ratio"?this.pixelRatio:null;g&&n.set(t,p,g)}getBinding(t,n){return n==="u_pattern"||n==="u_dash"?new v_(t):new $d(t)}}class ms{constructor(t,n,l,u){this.expression=t,this.type=l,this.maxValue=0,this.paintVertexAttributes=n.map(p=>({name:`a_${p}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(t,n,l,u,p,g){const b=this.paintVertexArray.length,S=this.expression.evaluate(new Ge(0),n,{},p,u,g);this.paintVertexArray.resize(t),this._setPaintValue(b,t,S)}updatePaintArray(t,n,l,u,p){const g=this.expression.evaluate({zoom:0},l,u,void 0,p);this._setPaintValue(t,n,g)}_setPaintValue(t,n,l){if(this.type==="color"){const u=Q0(l);for(let p=t;p<n;p++)this.paintVertexArray.emplace(p,u[0],u[1])}else{for(let u=t;u<n;u++)this.paintVertexArray.emplace(u,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ls{constructor(t,n,l,u,p,g){this.expression=t,this.uniformNames=n.map(b=>`u_${b}_t`),this.type=l,this.useIntegerZoom=u,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=n.map(b=>({name:`a_${b}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new g}populatePaintArray(t,n,l,u,p,g){const b=this.expression.evaluate(new Ge(this.zoom),n,{},p,u,g),S=this.expression.evaluate(new Ge(this.zoom+1),n,{},p,u,g),C=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(C,t,b,S)}updatePaintArray(t,n,l,u,p){const g=this.expression.evaluate({zoom:this.zoom},l,u,void 0,p),b=this.expression.evaluate({zoom:this.zoom+1},l,u,void 0,p);this._setPaintValue(t,n,g,b)}_setPaintValue(t,n,l,u){if(this.type==="color"){const p=Q0(l),g=Q0(u);for(let b=t;b<n;b++)this.paintVertexArray.emplace(b,p[0],p[1],g[0],g[1])}else{for(let p=t;p<n;p++)this.paintVertexArray.emplace(p,l,u);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,n,l,u,p){const g=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,b=fi(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);n.set(t,p,b)}getBinding(t,n){return new $d(t)}}class _u{constructor(t,n,l,u,p){this.expression=t,this.layerId=p,this.paintVertexAttributes=(l==="array"?xp:g_).members;for(let g=0;g<n.length;++g);this.paintVertexArray=new u}populatePaintArray(t,n,l){const u=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(u,t,n.patterns&&n.patterns[this.layerId],l)}updatePaintArray(t,n,l,u,p,g){this._setPaintValues(t,n,l.patterns&&l.patterns[this.layerId],g)}_setPaintValues(t,n,l,u){if(!u||!l)return;const p=u[l];if(!p)return;const{tl:g,br:b,pixelRatio:S}=p;for(let C=t;C<n;C++)this.paintVertexArray.emplace(C,g[0],g[1],b[0],b[1],S)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class gu{constructor(t,n,l=()=>!0){this.binders={},this._buffers=[];const u=[];for(const p in t.paint._values){if(!l(p))continue;const g=t.paint.get(p);if(!(g instanceof Mt&&pt(g.property.specification)))continue;const b=T_(p,t.type),S=g.value,C=g.property.specification.type,P=g.property.useIntegerZoom,O=p==="line-dasharray"||p.endsWith("pattern"),B=p==="line-dasharray"&&t.layout.get("line-cap").value.kind!=="constant";if(S.kind!=="constant"||B)if(S.kind==="source"||B||O){const $=em(p,C,"source");this.binders[p]=O?new _u(S,b,C,$,t.id):new ms(S,b,C,$),u.push(`/a_${p}`)}else{const $=em(p,C,"composite");this.binders[p]=new Ls(S,b,C,P,n,$),u.push(`/z_${p}`)}else this.binders[p]=O?new Yu(S.value,b):new Gd(S.value,b,C),u.push(`/u_${p}`)}this.cacheKey=u.sort().join("")}getMaxValue(t){const n=this.binders[t];return n instanceof ms||n instanceof Ls?n.maxValue:0}populatePaintArrays(t,n,l,u,p,g){for(const b in this.binders){const S=this.binders[b];(S instanceof ms||S instanceof Ls||S instanceof _u)&&S.populatePaintArray(t,n,l,u,p,g)}}setConstantPatternPositions(t){for(const n in this.binders){const l=this.binders[n];l instanceof Yu&&l.setConstantPatternPositions(t)}}updatePaintArrays(t,n,l,u,p,g){let b=!1;for(const S in t){const C=n.getPositions(S);for(const P of C){const O=l.feature(P.index);for(const B in this.binders){const $=this.binders[B];if(($ instanceof ms||$ instanceof Ls||$ instanceof _u)&&$.expression.isStateDependent===!0){const G=u.paint.get(B);$.expression=G.value,$.updatePaintArray(P.start,P.end,O,t[S],p,g),b=!0}}}}return b}defines(){const t=[];for(const n in this.binders){const l=this.binders[n];(l instanceof Gd||l instanceof Yu)&&t.push(...l.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return t}getBinderAttributes(){const t=[];for(const n in this.binders){const l=this.binders[n];if(l instanceof ms||l instanceof Ls||l instanceof _u)for(let u=0;u<l.paintVertexAttributes.length;u++)t.push(l.paintVertexAttributes[u].name)}return t}getBinderUniforms(){const t=[];for(const n in this.binders){const l=this.binders[n];if(l instanceof Gd||l instanceof Yu||l instanceof Ls)for(const u of l.uniformNames)t.push(u)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const n=[];for(const l in this.binders){const u=this.binders[l];if(u instanceof Gd||u instanceof Yu||u instanceof Ls)for(const p of u.uniformNames)n.push({name:p,property:l,binding:u.getBinding(t,p)})}return n}setUniforms(t,n,l,u,p){for(const{name:g,property:b,binding:S}of l)this.binders[b].setUniform(t,S,p,u.get(b),g)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const n=this.binders[t];(n instanceof ms||n instanceof Ls||n instanceof _u)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(const n in this.binders){const l=this.binders[n];(l instanceof ms||l instanceof Ls||l instanceof _u)&&l.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const n=this.binders[t];(n instanceof ms||n instanceof Ls||n instanceof _u)&&n.destroy()}}}class dc{constructor(t,n,l=()=>!0){this.programConfigurations={};for(const u of t)this.programConfigurations[u.id]=new gu(u,n,l);this.needsUpload=!1,this._featureMap=new Dl,this._bufferOffset=0}populatePaintArrays(t,n,l,u,p,g,b){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(t,n,u,p,g,b);n.id!==void 0&&this._featureMap.add(n.id,l,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,n,l,u,p){for(const g of l)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(t,this._featureMap,n,g,u,p)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const qd={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function T_(i,t){return qd[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}const E_={"line-pattern":{source:Qs,composite:Qs},"fill-pattern":{source:Qs,composite:Qs},"fill-extrusion-pattern":{source:Qs,composite:Qs},"line-dasharray":{source:Da,composite:Da}},R2={color:{source:Yh,composite:fo},number:{source:la,composite:Yh}};function em(i,t,n){const l=E_[i];return l&&l[n]||R2[t][n]}ni(Gd,"ConstantBinder"),ni(Yu,"PatternConstantBinder"),ni(ms,"SourceExpressionBinder"),ni(_u,"PatternCompositeBinder"),ni(Ls,"CompositeExpressionBinder"),ni(gu,"ProgramConfiguration",{omit:["_buffers"]}),ni(dc,"ProgramConfigurationSet");const Fc="-transition";class Ho extends ao{constructor(t,n){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&t.type!=="sky"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new ut(n.layout)),n.paint)){this._transitionablePaint=new vt(n.paint);for(const l in t.paint)this.setPaintProperty(l,t.paint[l],{validate:!1});for(const l in t.layout)this.setLayoutProperty(l,t.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jt(n.paint)}}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,n,l={}){n!=null&&this._validate(Rc,`layers.${this.id}.layout.${t}`,t,n,l)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,n):this.visibility=n)}getPaintProperty(t){return Zr(t,Fc)?this._transitionablePaint.getTransition(t.slice(0,-Fc.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,n,l={}){if(n!=null&&this._validate(H0,`layers.${this.id}.paint.${t}`,t,n,l))return!1;if(Zr(t,Fc))return this._transitionablePaint.setTransition(t.slice(0,-Fc.length),n||void 0),!1;{const u=this._transitionablePaint._values[t],p=u.value.isDataDriven(),g=u.value;this._transitionablePaint.setValue(t,n),this._handleSpecialPaintPropertyUpdate(t);const b=this._transitionablePaint._values[t].value,S=b.isDataDriven(),C=Zr(t,"pattern")||t==="line-dasharray";return S||p||C||this._handleOverridablePaintPropertyUpdate(t,g,b)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,n,l){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,n){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,n)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Sr(t,(n,l)=>!(n===void 0||l==="layout"&&!Object.keys(n).length||l==="paint"&&!Object.keys(n).length))}_validate(t,n,l,u,p={}){return(!p||p.validate!==!1)&&lp(this,t.call(jh,{key:n,layerType:this.type,objectKey:l,value:u,styleSpec:yt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const n=this.paint.get(t);if(n instanceof Mt&&pt(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Dr(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const O2=ci([{name:"a_pos",components:2,type:"Int16"}],4),S_=ci([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class rs{constructor(t=[]){this.segments=t}prepareSegment(t,n,l,u){let p=this.segments[this.segments.length-1];return t>rs.MAX_VERTEX_ARRAY_LENGTH&&Ce(`Max vertices per segment is ${rs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!p||p.vertexLength+t>rs.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==u)&&(p={vertexOffset:n.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},u!==void 0&&(p.sortKey=u),this.segments.push(p)),p}get(){return this.segments}destroy(){for(const t of this.segments)for(const n in t.vaos)t.vaos[n].destroy()}static simpleSegment(t,n,l,u){return new rs([{vertexOffset:t,primitiveOffset:n,vertexLength:l,primitiveLength:u,vaos:{},sortKey:0}])}}rs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ni(rs,"SegmentVector");var Pi=8192;class Nc{constructor(t,n){t&&(n?this.setSouthWest(t).setNorthEast(n):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof En?new En(t.lng,t.lat):En.convert(t),this}setSouthWest(t){return this._sw=t instanceof En?new En(t.lng,t.lat):En.convert(t),this}extend(t){const n=this._sw,l=this._ne;let u,p;if(t instanceof En)u=t,p=t;else{if(!(t instanceof Nc))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Nc.convert(t)):this.extend(En.convert(t)):typeof t=="object"&&t!==null&&t.hasOwnProperty("lat")&&t.hasOwnProperty("lon")?this.extend(En.convert(t)):this;if(u=t._sw,p=t._ne,!u||!p)return this}return n||l?(n.lng=Math.min(u.lng,n.lng),n.lat=Math.min(u.lat,n.lat),l.lng=Math.max(p.lng,l.lng),l.lat=Math.max(p.lat,l.lat)):(this._sw=new En(u.lng,u.lat),this._ne=new En(p.lng,p.lat)),this}getCenter(){return new En((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new En(this.getWest(),this.getNorth())}getSouthEast(){return new En(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:n,lat:l}=En.convert(t);let u=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&u}static convert(t){return!t||t instanceof Nc?t:new Nc(t)}}const Xu=63710088e-1;class En{constructor(t,n){if(isNaN(t)||isNaN(n))throw new Error(`Invalid LngLat object: (${t}, ${n})`);if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new En(mn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const n=Math.PI/180,l=this.lat*n,u=t.lat*n,p=Math.sin(l)*Math.sin(u)+Math.cos(l)*Math.cos(u)*Math.cos((t.lng-this.lng)*n);return Xu*Math.acos(Math.min(p,1))}toBounds(t=0){const n=360*t/40075017,l=n/Math.cos(Math.PI/180*this.lat);return new Nc(new En(this.lng-l,this.lat-n),new En(this.lng+l,this.lat+n))}static convert(t){if(t instanceof En)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new En(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new En(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Jh=2*Math.PI*Xu;function tm(i){return Jh*Math.cos(i*Math.PI/180)}function Pl(i){return(180+i)/360}function Ra(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Oa(i,t){return i/tm(t)}function Zo(i){return 360*i-180}function to(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function im(i,t){return i*tm(to(t))}const io=85.051129;function nm(i){return 1/Math.cos(i*Math.PI/180)}class Ku{constructor(t,n,l=0){this.x=+t,this.y=+n,this.z=+l}static fromLngLat(t,n=0){const l=En.convert(t);return new Ku(Pl(l.lng),Ra(l.lat),Oa(n,l.lat))}toLngLat(){return new En(Zo(this.x),to(this.y))}toAltitude(){return im(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Jh*nm(to(this.y))}}function rm(i,t,n,l,u,p,g,b,S){const C=(t+l)/2,P=(n+u)/2,O=new Fe(C,P);b(O),function(B,$,G,Y,ne,ye){const Ee=G-ne,ge=Y-ye;return Math.abs((Y-$)*Ee-(G-B)*ge)/Math.hypot(Ee,ge)}(O.x,O.y,p.x,p.y,g.x,g.y)>=S?(rm(i,t,n,C,P,p,O,b,S),rm(i,C,P,l,u,O,g,b,S)):i.push(g)}function sm(i,t,n){let l=i[0],u=l.x,p=l.y;t(l);const g=[l];for(let b=1;b<i.length;b++){const S=i[b],{x:C,y:P}=S;t(S),rm(g,u,p,C,P,l,S,t,n),u=C,p=P,l=S}return g}function om(i,t,n,l){if(l(t,n)){const u=t.add(n)._mult(.5);om(i,t,u,l),om(i,u,n,l)}else i.push(n)}function z2(i,t){let n=i[0];const l=[n];for(let u=1;u<i.length;u++){const p=i[u];om(l,n,p,t),n=p}return l}const Ll=Math.pow(2,14)-1,Tp=-Ll-1;function am(i,t){const n=Math.round(i.x*t),l=Math.round(i.y*t);return i.x=fi(n,Tp,Ll),i.y=fi(l,Tp,Ll),(n<i.x||n>i.x+1||l<i.y||l>i.y+1)&&Ce("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function Rl(i,t,n){const l=i.loadGeometry(),u=i.extent,p=Pi/u;if(t&&n&&n.projection.isReprojectedInTileSpace){const g=1<<t.z,{scale:b,x:S,y:C,projection:P}=n,O=B=>{const $=Zo((t.x+B.x/u)/g),G=to((t.y+B.y/u)/g),Y=P.project($,G);B.x=(Y.x*b-S)*u,B.y=(Y.y*b-C)*u};for(let B=0;B<l.length;B++)if(i.type!==1)l[B]=sm(l[B],O,1);else{const $=[];for(const G of l[B])G.x<0||G.x>=u||G.y<0||G.y>=u||(O(G),$.push(G));l[B]=$}}for(const g of l)for(const b of g)am(b,p);return l}function hc(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?Rl(i):[]}}function Uc(i,t,n,l,u){i.emplaceBack(2*t+(l+1)/2,2*n+(u+1)/2)}function qi(i,t,n){i.emplaceBack(t.x,t.y,t.z,n[0]*16384,n[1]*16384,n[2]*16384)}class Wd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new zn,this.indexArray=new $s,this.segments=new rs,this.programConfigurations=new dc(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,l,u){const p=this.layers[0],g=[];let b=null;p.type==="circle"&&(b=p.layout.get("circle-sort-key"));for(const{feature:C,id:P,index:O,sourceLayerIndex:B}of t){const $=this.layers[0]._featureFilter.needGeometry,G=hc(C,$);if(!this.layers[0]._featureFilter.filter(new Ge(this.zoom),G,l))continue;const Y=b?b.evaluate(G,{},l):void 0,ne={id:P,properties:C.properties,type:C.type,sourceLayerIndex:B,index:O,geometry:$?G.geometry:Rl(C,l,u),patterns:{},sortKey:Y};g.push(ne)}b&&g.sort((C,P)=>C.sortKey-P.sortKey);let S=null;u.projection.name==="globe"&&(this.globeExtVertexArray=new ur,S=u.projection);for(const C of g){const{geometry:P,index:O,sourceLayerIndex:B}=C,$=t[O].feature;this.addFeature(C,P,O,n.availableImages,l,S),n.featureIndex.insert($,P,O,B,this.index)}}update(t,n,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,O2.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,S_.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,n,l,u,p,g){for(const b of n)for(const S of b){const C=S.x,P=S.y;if(C<0||C>=Pi||P<0||P>=Pi)continue;if(g){const $=g.projectTilePoint(C,P,p),G=g.upVector(p,C,P),Y=this.globeExtVertexArray;qi(Y,$,G),qi(Y,$,G),qi(Y,$,G),qi(Y,$,G)}const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),B=O.vertexLength;Uc(this.layoutVertexArray,C,P,-1,-1),Uc(this.layoutVertexArray,C,P,1,-1),Uc(this.layoutVertexArray,C,P,1,1),Uc(this.layoutVertexArray,C,P,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+2,B+3),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{},u,p)}}function Ep(i,t){for(let n=0;n<i.length;n++)if(Qu(t,i[n]))return!0;for(let n=0;n<t.length;n++)if(Qu(i,t[n]))return!0;return!!Sp(i,t)}function Ju(i,t,n){return!!Qu(i,t)||!!cm(t,i,n)}function C_(i,t){if(i.length===1)return um(t,i[0]);for(let n=0;n<t.length;n++){const l=t[n];for(let u=0;u<l.length;u++)if(Qu(i,l[u]))return!0}for(let n=0;n<i.length;n++)if(um(t,i[n]))return!0;for(let n=0;n<t.length;n++)if(Sp(i,t[n]))return!0;return!1}function lm(i,t,n){if(i.length>1){if(Sp(i,t))return!0;for(let l=0;l<t.length;l++)if(cm(t[l],i,n))return!0}for(let l=0;l<i.length;l++)if(cm(i[l],t,n))return!0;return!1}function Sp(i,t){if(i.length===0||t.length===0)return!1;for(let n=0;n<i.length-1;n++){const l=i[n],u=i[n+1];for(let p=0;p<t.length-1;p++)if(Lo(l,u,t[p],t[p+1]))return!0}return!1}function Lo(i,t,n,l){return Ve(i,n,l)!==Ve(t,n,l)&&Ve(i,t,n)!==Ve(i,t,l)}function cm(i,t,n){const l=n*n;if(t.length===1)return i.distSqr(t[0])<l;for(let u=1;u<t.length;u++)if(M_(i,t[u-1],t[u])<l)return!0;return!1}function M_(i,t,n){const l=t.distSqr(n);if(l===0)return i.distSqr(t);const u=((i.x-t.x)*(n.x-t.x)+(i.y-t.y)*(n.y-t.y))/l;return i.distSqr(u<0?t:u>1?n:n.sub(t)._mult(u)._add(t))}function um(i,t){let n,l,u,p=!1;for(let g=0;g<i.length;g++){n=i[g];for(let b=0,S=n.length-1;b<n.length;S=b++)l=n[b],u=n[S],l.y>t.y!=u.y>t.y&&t.x<(u.x-l.x)*(t.y-l.y)/(u.y-l.y)+l.x&&(p=!p)}return p}function Qu(i,t){let n=!1;for(let l=0,u=i.length-1;l<i.length;u=l++){const p=i[l],g=i[u];p.y>t.y!=g.y>t.y&&t.x<(g.x-p.x)*(t.y-p.y)/(g.y-p.y)+p.x&&(n=!n)}return n}function dm(i,t,n,l,u){for(const g of i)if(t<=g.x&&n<=g.y&&l>=g.x&&u>=g.y)return!0;const p=[new Fe(t,n),new Fe(t,u),new Fe(l,u),new Fe(l,n)];if(i.length>2){for(const g of p)if(Qu(i,g))return!0}for(let g=0;g<i.length-1;g++)if(B2(i[g],i[g+1],p))return!0;return!1}function B2(i,t,n){const l=n[0],u=n[2];if(i.x<l.x&&t.x<l.x||i.x>u.x&&t.x>u.x||i.y<l.y&&t.y<l.y||i.y>u.y&&t.y>u.y)return!1;const p=Ve(i,t,n[0]);return p!==Ve(i,t,n[1])||p!==Ve(i,t,n[2])||p!==Ve(i,t,n[3])}function Hd(i,t,n){const l=t.paint.get(i).value;return l.kind==="constant"?l.value:n.programConfigurations.get(t.id).getMaxValue(i)}function Cp(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function fc(i,t,n,l,u){if(!t[0]&&!t[1])return i;const p=Fe.convert(t)._mult(u);n==="viewport"&&p._rotate(-l);const g=[];for(let b=0;b<i.length;b++)g.push(i[b].sub(p));return g}function Ro(i,t,n,l){const u=Fe.convert(i)._mult(l);return t==="viewport"&&u._rotate(-n),u}ni(Wd,"CircleBucket",{omit:["layers"]});const hm=new Ei({"circle-sort-key":new at(yt.layout_circle["circle-sort-key"])});var F2={paint:new Ei({"circle-radius":new at(yt.paint_circle["circle-radius"]),"circle-color":new at(yt.paint_circle["circle-color"]),"circle-blur":new at(yt.paint_circle["circle-blur"]),"circle-opacity":new at(yt.paint_circle["circle-opacity"]),"circle-translate":new Ze(yt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ze(yt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ze(yt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ze(yt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new at(yt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new at(yt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new at(yt.paint_circle["circle-stroke-opacity"])}),layout:hm},Zd=1e-6,ua=typeof Float32Array<"u"?Float32Array:Array;function A_(){var i=new ua(9);return ua!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function Yd(i,t,n){var l=t[0],u=t[1],p=t[2],g=t[3],b=t[4],S=t[5],C=t[6],P=t[7],O=t[8],B=n[0],$=n[1],G=n[2],Y=n[3],ne=n[4],ye=n[5],Ee=n[6],ge=n[7],be=n[8];return i[0]=B*l+$*g+G*C,i[1]=B*u+$*b+G*P,i[2]=B*p+$*S+G*O,i[3]=Y*l+ne*g+ye*C,i[4]=Y*u+ne*b+ye*P,i[5]=Y*p+ne*S+ye*O,i[6]=Ee*l+ge*g+be*C,i[7]=Ee*u+ge*b+be*P,i[8]=Ee*p+ge*S+be*O,i}function Ja(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Mp(i,t){var n=t[0],l=t[1],u=t[2],p=t[3],g=t[4],b=t[5],S=t[6],C=t[7],P=t[8],O=t[9],B=t[10],$=t[11],G=t[12],Y=t[13],ne=t[14],ye=t[15],Ee=n*b-l*g,ge=n*S-u*g,be=n*C-p*g,Pe=l*S-u*b,Ie=l*C-p*b,rt=u*C-p*S,it=P*Y-O*G,xt=P*ne-B*G,Gt=P*ye-$*G,dt=O*ne-B*Y,wt=O*ye-$*Y,At=B*ye-$*ne,Rt=Ee*At-ge*wt+be*dt+Pe*Gt-Ie*xt+rt*it;return Rt?(i[0]=(b*At-S*wt+C*dt)*(Rt=1/Rt),i[1]=(u*wt-l*At-p*dt)*Rt,i[2]=(Y*rt-ne*Ie+ye*Pe)*Rt,i[3]=(B*Ie-O*rt-$*Pe)*Rt,i[4]=(S*Gt-g*At-C*xt)*Rt,i[5]=(n*At-u*Gt+p*xt)*Rt,i[6]=(ne*be-G*rt-ye*ge)*Rt,i[7]=(P*rt-B*be+$*ge)*Rt,i[8]=(g*wt-b*Gt+C*it)*Rt,i[9]=(l*Gt-n*wt-p*it)*Rt,i[10]=(G*Ie-Y*be+ye*Ee)*Rt,i[11]=(O*be-P*Ie-$*Ee)*Rt,i[12]=(b*xt-g*dt-S*it)*Rt,i[13]=(n*dt-l*xt+u*it)*Rt,i[14]=(Y*ge-G*Pe-ne*Ee)*Rt,i[15]=(P*Pe-O*ge+B*Ee)*Rt,i):null}function ed(i,t,n){var l=t[0],u=t[1],p=t[2],g=t[3],b=t[4],S=t[5],C=t[6],P=t[7],O=t[8],B=t[9],$=t[10],G=t[11],Y=t[12],ne=t[13],ye=t[14],Ee=t[15],ge=n[0],be=n[1],Pe=n[2],Ie=n[3];return i[0]=ge*l+be*b+Pe*O+Ie*Y,i[1]=ge*u+be*S+Pe*B+Ie*ne,i[2]=ge*p+be*C+Pe*$+Ie*ye,i[3]=ge*g+be*P+Pe*G+Ie*Ee,i[4]=(ge=n[4])*l+(be=n[5])*b+(Pe=n[6])*O+(Ie=n[7])*Y,i[5]=ge*u+be*S+Pe*B+Ie*ne,i[6]=ge*p+be*C+Pe*$+Ie*ye,i[7]=ge*g+be*P+Pe*G+Ie*Ee,i[8]=(ge=n[8])*l+(be=n[9])*b+(Pe=n[10])*O+(Ie=n[11])*Y,i[9]=ge*u+be*S+Pe*B+Ie*ne,i[10]=ge*p+be*C+Pe*$+Ie*ye,i[11]=ge*g+be*P+Pe*G+Ie*Ee,i[12]=(ge=n[12])*l+(be=n[13])*b+(Pe=n[14])*O+(Ie=n[15])*Y,i[13]=ge*u+be*S+Pe*B+Ie*ne,i[14]=ge*p+be*C+Pe*$+Ie*ye,i[15]=ge*g+be*P+Pe*G+Ie*Ee,i}function Qh(i,t,n){var l,u,p,g,b,S,C,P,O,B,$,G,Y=n[0],ne=n[1],ye=n[2];return t===i?(i[12]=t[0]*Y+t[4]*ne+t[8]*ye+t[12],i[13]=t[1]*Y+t[5]*ne+t[9]*ye+t[13],i[14]=t[2]*Y+t[6]*ne+t[10]*ye+t[14],i[15]=t[3]*Y+t[7]*ne+t[11]*ye+t[15]):(u=t[1],p=t[2],g=t[3],b=t[4],S=t[5],C=t[6],P=t[7],O=t[8],B=t[9],$=t[10],G=t[11],i[0]=l=t[0],i[1]=u,i[2]=p,i[3]=g,i[4]=b,i[5]=S,i[6]=C,i[7]=P,i[8]=O,i[9]=B,i[10]=$,i[11]=G,i[12]=l*Y+b*ne+O*ye+t[12],i[13]=u*Y+S*ne+B*ye+t[13],i[14]=p*Y+C*ne+$*ye+t[14],i[15]=g*Y+P*ne+G*ye+t[15]),i}function td(i,t,n){var l=n[0],u=n[1],p=n[2];return i[0]=t[0]*l,i[1]=t[1]*l,i[2]=t[2]*l,i[3]=t[3]*l,i[4]=t[4]*u,i[5]=t[5]*u,i[6]=t[6]*u,i[7]=t[7]*u,i[8]=t[8]*p,i[9]=t[9]*p,i[10]=t[10]*p,i[11]=t[11]*p,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i}function fm(i,t,n){var l=Math.sin(n),u=Math.cos(n),p=t[4],g=t[5],b=t[6],S=t[7],C=t[8],P=t[9],O=t[10],B=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=p*u+C*l,i[5]=g*u+P*l,i[6]=b*u+O*l,i[7]=S*u+B*l,i[8]=C*u-p*l,i[9]=P*u-g*l,i[10]=O*u-b*l,i[11]=B*u-S*l,i}function ef(i,t,n){var l=Math.sin(n),u=Math.cos(n),p=t[0],g=t[1],b=t[2],S=t[3],C=t[8],P=t[9],O=t[10],B=t[11];return t!==i&&(i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=p*u-C*l,i[1]=g*u-P*l,i[2]=b*u-O*l,i[3]=S*u-B*l,i[8]=p*l+C*u,i[9]=g*l+P*u,i[10]=b*l+O*u,i[11]=S*l+B*u,i}function pm(i,t){return i[0]=t[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=t[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function I_(i,t,n){var l,u,p,g=n[0],b=n[1],S=n[2],C=Math.hypot(g,b,S);return C<Zd?null:(g*=C=1/C,b*=C,S*=C,l=Math.sin(t),u=Math.cos(t),i[0]=g*g*(p=1-u)+u,i[1]=b*g*p+S*l,i[2]=S*g*p-b*l,i[3]=0,i[4]=g*b*p-S*l,i[5]=b*b*p+u,i[6]=S*b*p+g*l,i[7]=0,i[8]=g*S*p+b*l,i[9]=b*S*p-g*l,i[10]=S*S*p+u,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var mm=ed;function Ap(){var i=new ua(3);return ua!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function Xd(i){var t=new ua(3);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t}function id(i){return Math.hypot(i[0],i[1],i[2])}function nd(i,t,n){var l=new ua(3);return l[0]=i,l[1]=t,l[2]=n,l}function pc(i,t,n){return i[0]=t[0]+n[0],i[1]=t[1]+n[1],i[2]=t[2]+n[2],i}function Kd(i,t,n){return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],i}function _m(i,t,n){return i[0]=t[0]*n[0],i[1]=t[1]*n[1],i[2]=t[2]*n[2],i}function da(i,t,n){return i[0]=Math.min(t[0],n[0]),i[1]=Math.min(t[1],n[1]),i[2]=Math.min(t[2],n[2]),i}function Ol(i,t,n){return i[0]=Math.max(t[0],n[0]),i[1]=Math.max(t[1],n[1]),i[2]=Math.max(t[2],n[2]),i}function za(i,t,n){return i[0]=t[0]*n,i[1]=t[1]*n,i[2]=t[2]*n,i}function Jd(i,t,n,l){return i[0]=t[0]+n[0]*l,i[1]=t[1]+n[1]*l,i[2]=t[2]+n[2]*l,i}function Oo(i,t){var n=t[0],l=t[1],u=t[2],p=n*n+l*l+u*u;return p>0&&(p=1/Math.sqrt(p)),i[0]=t[0]*p,i[1]=t[1]*p,i[2]=t[2]*p,i}function Qa(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]}function gm(i,t,n){var l=t[0],u=t[1],p=t[2],g=n[0],b=n[1],S=n[2];return i[0]=u*S-p*b,i[1]=p*g-l*S,i[2]=l*b-u*g,i}function Qr(i,t,n){var l=t[0],u=t[1],p=t[2],g=n[3]*l+n[7]*u+n[11]*p+n[15];return i[0]=(n[0]*l+n[4]*u+n[8]*p+n[12])/(g=g||1),i[1]=(n[1]*l+n[5]*u+n[9]*p+n[13])/g,i[2]=(n[2]*l+n[6]*u+n[10]*p+n[14])/g,i}function k_(i,t,n){var l=n[0],u=n[1],p=n[2],g=t[0],b=t[1],S=t[2],C=u*S-p*b,P=p*g-l*S,O=l*b-u*g,B=u*O-p*P,$=p*C-l*O,G=l*P-u*C,Y=2*n[3];return P*=Y,O*=Y,$*=2,G*=2,i[0]=g+(C*=Y)+(B*=2),i[1]=b+P+$,i[2]=S+O+G,i}var tf,zl=Kd,N2=_m,U2=id;function D_(i,t,n){return i[0]=t[0]*n,i[1]=t[1]*n,i[2]=t[2]*n,i[3]=t[3]*n,i}function P_(i,t){var n=t[0],l=t[1],u=t[2],p=t[3],g=n*n+l*l+u*u+p*p;return g>0&&(g=1/Math.sqrt(g)),i[0]=n*g,i[1]=l*g,i[2]=u*g,i[3]=p*g,i}function yu(i,t,n){var l=t[0],u=t[1],p=t[2],g=t[3];return i[0]=n[0]*l+n[4]*u+n[8]*p+n[12]*g,i[1]=n[1]*l+n[5]*u+n[9]*p+n[13]*g,i[2]=n[2]*l+n[6]*u+n[10]*p+n[14]*g,i[3]=n[3]*l+n[7]*u+n[11]*p+n[15]*g,i}function ym(){var i=new ua(4);return ua!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function vm(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function L_(i,t,n){n*=.5;var l=t[0],u=t[1],p=t[2],g=t[3],b=Math.sin(n),S=Math.cos(n);return i[0]=l*S+g*b,i[1]=u*S+p*b,i[2]=p*S-u*b,i[3]=g*S-l*b,i}function R_(i,t,n){n*=.5;var l=t[0],u=t[1],p=t[2],g=t[3],b=Math.sin(n),S=Math.cos(n);return i[0]=l*S-p*b,i[1]=u*S+g*b,i[2]=p*S+l*b,i[3]=g*S-u*b,i}Ap(),tf=new ua(4),ua!=Float32Array&&(tf[0]=0,tf[1]=0,tf[2]=0,tf[3]=0);var j2=P_;Ap(),nd(1,0,0),nd(0,1,0),ym(),ym(),A_();class Ip{constructor(t,n){this.pos=t,this.dir=n}intersectsPlane(t,n,l){const u=Qa(n,this.dir);if(Math.abs(u)<1e-6)return!1;const p=((t[0]-this.pos[0])*n[0]+(t[1]-this.pos[1])*n[1]+(t[2]-this.pos[2])*n[2])/u;return l[0]=this.pos[0]+this.dir[0]*p,l[1]=this.pos[1]+this.dir[1]*p,l[2]=this.pos[2]+this.dir[2]*p,!0}closestPointOnSphere(t,n,l){if(function($,G){var Y=$[0],ne=$[1],ye=$[2],Ee=G[0],ge=G[1],be=G[2];return Math.abs(Y-Ee)<=Zd*Math.max(1,Math.abs(Y),Math.abs(Ee))&&Math.abs(ne-ge)<=Zd*Math.max(1,Math.abs(ne),Math.abs(ge))&&Math.abs(ye-be)<=Zd*Math.max(1,Math.abs(ye),Math.abs(be))}(this.pos,t)||n===0)return l[0]=l[1]=l[2]=0,!1;const[u,p,g]=this.dir,b=this.pos[0]-t[0],S=this.pos[1]-t[1],C=this.pos[2]-t[2],P=u*u+p*p+g*g,O=2*(b*u+S*p+C*g),B=O*O-4*P*(b*b+S*S+C*C-n*n);if(B<0){const $=Math.max(-O/2,0),G=b+u*$,Y=S+p*$,ne=C+g*$,ye=Math.hypot(G,Y,ne);return l[0]=G*n/ye,l[1]=Y*n/ye,l[2]=ne*n/ye,!1}{const $=(-O-Math.sqrt(B))/(2*P);if($<0){const G=Math.hypot(b,S,C);return l[0]=b*n/G,l[1]=S*n/G,l[2]=C*n/G,!1}return l[0]=b+u*$,l[1]=S+p*$,l[2]=C+g*$,!0}}}class xm{constructor(t,n,l,u,p){this.TL=t,this.TR=n,this.BR=l,this.BL=u,this.horizon=p}static fromInvProjectionMatrix(t,n,l){const u=[-1,1,1],p=[1,1,1],g=[1,-1,1],b=[-1,-1,1],S=Qr(u,u,t),C=Qr(p,p,t),P=Qr(g,g,t),O=Qr(b,b,t);return new xm(S,C,P,O,n/l)}}class bm{constructor(t,n){this.points=t,this.planes=n}static fromInvProjectionMatrix(t,n,l,u){const p=Math.pow(2,l),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const C=yu([],S,t),P=1/C[3]/n*p;return function(O,B,$){return O[0]=B[0]*$[0],O[1]=B[1]*$[1],O[2]=B[2]*$[2],O[3]=B[3]*$[3],O}(C,C,[P,P,u?1/C[3]:P,P])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const C=Oo([],gm([],zl([],g[S[0]],g[S[1]]),zl([],g[S[2]],g[S[1]]))),P=-Qa(C,g[S[1]]);return C.concat(P)});return new bm(g,b)}}class zo{static fromPoints(t){const n=[1/0,1/0,1/0],l=[-1/0,-1/0,-1/0];for(const u of t)da(n,n,u),Ol(l,l,u);return new zo(n,l)}static applyTransform(t,n){const l=t.getCorners();for(let u=0;u<l.length;++u)Qr(l[u],l[u],n);return zo.fromPoints(l)}constructor(t,n){this.min=t,this.max=n,this.center=za([],pc([],this.min,this.max),.5)}quadrant(t){const n=[t%2==0,t<2],l=Xd(this.min),u=Xd(this.max);for(let p=0;p<n.length;p++)l[p]=n[p]?this.min[p]:this.center[p],u[p]=n[p]?this.center[p]:this.max[p];return u[2]=this.max[2],new zo(l,u)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,n=this.max;return[[t[0],t[1],t[2]],[n[0],t[1],t[2]],[n[0],n[1],t[2]],[t[0],n[1],t[2]],[t[0],t[1],n[2]],[n[0],t[1],n[2]],[n[0],n[1],n[2]],[t[0],n[1],n[2]]]}intersects(t){const n=this.getCorners();let l=!0;for(let u=0;u<t.planes.length;u++){const p=t.planes[u];let g=0;for(let b=0;b<n.length;b++)g+=Qa(p,n[b])+p[3]>=0;if(g===0)return 0;g!==n.length&&(l=!1)}if(l)return 2;for(let u=0;u<3;u++){let p=Number.MAX_VALUE,g=-Number.MAX_VALUE;for(let b=0;b<t.points.length;b++){const S=t.points[b][u]-this.min[u];p=Math.min(p,S),g=Math.max(g,S)}if(g<0||p>this.max[u]-this.min[u])return 0}return 1}}function O_(i,t,n,l,u,p,g,b,S){if(p&&i.queryGeometry.isAboveHorizon)return!1;p&&(S*=i.pixelToTileUnitsFactor);const C=i.tileID.canonical,P=n.projection.upVectorScale(C,n.center.lat,n.worldSize).metersToTile;for(const O of t)for(const B of O){const $=B.add(b),G=u&&n.elevation?n.elevation.exaggeration()*u.getElevationAt($.x,$.y,!0):0,Y=n.projection.projectTilePoint($.x,$.y,C);if(G>0){const ge=n.projection.upVector(C,$.x,$.y);Y.x+=ge[0]*P*G,Y.y+=ge[1]*P*G,Y.z+=ge[2]*P*G}const ne=p?$:V2(Y.x,Y.y,Y.z,l),ye=p?i.tilespaceRays.map(ge=>$2(ge,G)):i.queryGeometry.screenGeometry,Ee=yu([],[Y.x,Y.y,Y.z,1],l);if(!g&&p?S*=Ee[3]/n.cameraToCenterDistance:g&&!p&&(S*=n.cameraToCenterDistance/Ee[3]),p){const ge=to((B.y/Pi+C.y)/(1<<C.z));S/=n.projection.pixelsPerMeter(ge,1)/Oa(1,ge)}if(Ju(ye,ne,S))return!0}return!1}function V2(i,t,n,l){const u=yu([],[i,t,n,1],l);return new Fe(u[0]/u[3],u[1]/u[3])}const z_=nd(0,0,0),el=nd(0,0,1);function $2(i,t){const n=Ap();return z_[2]=t,i.intersectsPlane(z_,el,n),new Fe(n[0],n[1])}class B_ extends Wd{}function F_(i,{width:t,height:n},l,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==t*n*l)throw new RangeError("mismatched image size")}else u=new Uint8Array(t*n*l);return i.width=t,i.height=n,i.data=u,i}function wm(i,t,n){const{width:l,height:u}=t;l===i.width&&u===i.height||(Tm(i,t,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,l),height:Math.min(i.height,u)},n),i.width=l,i.height=u,i.data=t.data)}function Tm(i,t,n,l,u,p){if(u.width===0||u.height===0)return t;if(u.width>i.width||u.height>i.height||n.x>i.width-u.width||n.y>i.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>t.width||u.height>t.height||l.x>t.width-u.width||l.y>t.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const g=i.data,b=t.data;for(let S=0;S<u.height;S++){const C=((n.y+S)*i.width+n.x)*p,P=((l.y+S)*t.width+l.x)*p;for(let O=0;O<u.width*p;O++)b[P+O]=g[C+O]}return t}ni(B_,"HeatmapBucket",{omit:["layers"]});class jc{constructor(t,n){F_(this,t,1,n)}resize(t){wm(this,new jc(t),1)}clone(){return new jc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,l,u,p){Tm(t,n,l,u,p,1)}}class ha{constructor(t,n){F_(this,t,4,n)}resize(t){wm(this,new ha(t),4)}replace(t,n){n?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ha({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,l,u,p){Tm(t,n,l,u,p,4)}}ni(jc,"AlphaImage"),ni(ha,"RGBAImage");var G2={paint:new Ei({"heatmap-radius":new at(yt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new at(yt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ze(yt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new mi(yt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ze(yt.paint_heatmap["heatmap-opacity"])})};function nf(i){const t={},n=i.resolution||256,l=i.clips?i.clips.length:1,u=i.image||new ha({width:n,height:l}),p=(g,b,S)=>{t[i.evaluationKey]=S;const C=i.expression.evaluate(t);u.data[g+b+0]=Math.floor(255*C.r/C.a),u.data[g+b+1]=Math.floor(255*C.g/C.a),u.data[g+b+2]=Math.floor(255*C.b/C.a),u.data[g+b+3]=Math.floor(255*C.a)};if(i.clips)for(let g=0,b=0;g<l;++g,b+=4*n)for(let S=0,C=0;S<n;S++,C+=4){const P=S/(n-1),{start:O,end:B}=i.clips[g];p(b,C,O*(1-P)+B*P)}else for(let g=0,b=0;g<n;g++,b+=4)p(0,b,g/(n-1));return u}var q2={paint:new Ei({"hillshade-illumination-direction":new Ze(yt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ze(yt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ze(yt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ze(yt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ze(yt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ze(yt.paint_hillshade["hillshade-accent-color"])})};const W2=ci([{name:"a_pos",components:2,type:"Int16"}],4),{members:H2}=W2;var rf={exports:{}};function kp(i,t,n){n=n||2;var l,u,p,g,b,S,C,P=t&&t.length,O=P?t[0]*n:i.length,B=N_(i,0,O,n,!0),$=[];if(!B||B.next===B.prev)return $;if(P&&(B=function(Y,ne,ye,Ee){var ge,be,Pe,Ie=[];for(ge=0,be=ne.length;ge<be;ge++)(Pe=N_(Y,ne[ge]*Ee,ge<be-1?ne[ge+1]*Ee:Y.length,Ee,!1))===Pe.next&&(Pe.steiner=!0),Ie.push(tv(Pe));for(Ie.sort(J2),ge=0;ge<Ie.length;ge++)ye=Q2(Ie[ge],ye);return ye}(i,t,B,n)),i.length>80*n){l=p=i[0],u=g=i[1];for(var G=n;G<O;G+=n)(b=i[G])<l&&(l=b),(S=i[G+1])<u&&(u=S),b>p&&(p=b),S>g&&(g=S);C=(C=Math.max(p-l,g-u))!==0?32767/C:0}return sf(B,$,n,l,u,C,0),$}function N_(i,t,n,l,u){var p,g;if(u===Mm(i,t,n,l)>0)for(p=t;p<n;p+=l)g=j_(p,i[p],i[p+1],g);else for(p=n-l;p>=t;p-=l)g=j_(p,i[p],i[p+1],g);return g&&eh(g,g.next)&&(af(g),g=g.next),g}function rd(i,t){if(!i)return i;t||(t=i);var n,l=i;do if(n=!1,l.steiner||!eh(l,l.next)&&ss(l.prev,l,l.next)!==0)l=l.next;else{if(af(l),(l=t=l.prev)===l.next)break;n=!0}while(n||l!==t);return t}function sf(i,t,n,l,u,p,g){if(i){!g&&p&&function(P,O,B,$){var G=P;do G.z===0&&(G.z=Em(G.x,G.y,O,B,$)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==P);G.prevZ.nextZ=null,G.prevZ=null,function(Y){var ne,ye,Ee,ge,be,Pe,Ie,rt,it=1;do{for(ye=Y,Y=null,be=null,Pe=0;ye;){for(Pe++,Ee=ye,Ie=0,ne=0;ne<it&&(Ie++,Ee=Ee.nextZ);ne++);for(rt=it;Ie>0||rt>0&&Ee;)Ie!==0&&(rt===0||!Ee||ye.z<=Ee.z)?(ge=ye,ye=ye.nextZ,Ie--):(ge=Ee,Ee=Ee.nextZ,rt--),be?be.nextZ=ge:Y=ge,ge.prevZ=be,be=ge;ye=Ee}be.nextZ=null,it*=2}while(Pe>1)}(G)}(i,l,u,p);for(var b,S,C=i;i.prev!==i.next;)if(b=i.prev,S=i.next,p?Y2(i,l,u,p):Z2(i))t.push(b.i/n|0),t.push(i.i/n|0),t.push(S.i/n|0),af(i),i=S.next,C=S.next;else if((i=S)===C){g?g===1?sf(i=X2(rd(i),t,n),t,n,l,u,p,2):g===2&&K2(i,t,n,l,u,p):sf(rd(i),t,n,l,u,p,1);break}}}function Z2(i){var t=i.prev,n=i,l=i.next;if(ss(t,n,l)>=0)return!1;for(var u=t.x,p=n.x,g=l.x,b=t.y,S=n.y,C=l.y,P=u<p?u<g?u:g:p<g?p:g,O=b<S?b<C?b:C:S<C?S:C,B=u>p?u>g?u:g:p>g?p:g,$=b>S?b>C?b:C:S>C?S:C,G=l.next;G!==t;){if(G.x>=P&&G.x<=B&&G.y>=O&&G.y<=$&&Qd(u,b,p,S,g,C,G.x,G.y)&&ss(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function Y2(i,t,n,l){var u=i.prev,p=i,g=i.next;if(ss(u,p,g)>=0)return!1;for(var b=u.x,S=p.x,C=g.x,P=u.y,O=p.y,B=g.y,$=b<S?b<C?b:C:S<C?S:C,G=P<O?P<B?P:B:O<B?O:B,Y=b>S?b>C?b:C:S>C?S:C,ne=P>O?P>B?P:B:O>B?O:B,ye=Em($,G,t,n,l),Ee=Em(Y,ne,t,n,l),ge=i.prevZ,be=i.nextZ;ge&&ge.z>=ye&&be&&be.z<=Ee;){if(ge.x>=$&&ge.x<=Y&&ge.y>=G&&ge.y<=ne&&ge!==u&&ge!==g&&Qd(b,P,S,O,C,B,ge.x,ge.y)&&ss(ge.prev,ge,ge.next)>=0||(ge=ge.prevZ,be.x>=$&&be.x<=Y&&be.y>=G&&be.y<=ne&&be!==u&&be!==g&&Qd(b,P,S,O,C,B,be.x,be.y)&&ss(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;ge&&ge.z>=ye;){if(ge.x>=$&&ge.x<=Y&&ge.y>=G&&ge.y<=ne&&ge!==u&&ge!==g&&Qd(b,P,S,O,C,B,ge.x,ge.y)&&ss(ge.prev,ge,ge.next)>=0)return!1;ge=ge.prevZ}for(;be&&be.z<=Ee;){if(be.x>=$&&be.x<=Y&&be.y>=G&&be.y<=ne&&be!==u&&be!==g&&Qd(b,P,S,O,C,B,be.x,be.y)&&ss(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function X2(i,t,n){var l=i;do{var u=l.prev,p=l.next.next;!eh(u,p)&&Sm(u,l,l.next,p)&&of(u,p)&&of(p,u)&&(t.push(u.i/n|0),t.push(l.i/n|0),t.push(p.i/n|0),af(l),af(l.next),l=i=p),l=l.next}while(l!==i);return rd(l)}function K2(i,t,n,l,u,p){var g=i;do{for(var b=g.next.next;b!==g.prev;){if(g.i!==b.i&&iv(g,b)){var S=U_(g,b);return g=rd(g,g.next),S=rd(S,S.next),sf(g,t,n,l,u,p,0),void sf(S,t,n,l,u,p,0)}b=b.next}g=g.next}while(g!==i)}function J2(i,t){return i.x-t.x}function Q2(i,t){var n=function(u,p){var g,b=p,S=u.x,C=u.y,P=-1/0;do{if(C<=b.y&&C>=b.next.y&&b.next.y!==b.y){var O=b.x+(C-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(O<=S&&O>P&&(P=O,g=b.x<b.next.x?b:b.next,O===S))return g}b=b.next}while(b!==p);if(!g)return null;var B,$=g,G=g.x,Y=g.y,ne=1/0;b=g;do S>=b.x&&b.x>=G&&S!==b.x&&Qd(C<Y?S:P,C,G,Y,C<Y?P:S,C,b.x,b.y)&&(B=Math.abs(C-b.y)/(S-b.x),of(b,u)&&(B<ne||B===ne&&(b.x>g.x||b.x===g.x&&ev(g,b)))&&(g=b,ne=B)),b=b.next;while(b!==$);return g}(i,t);if(!n)return t;var l=U_(n,i);return rd(l,l.next),rd(n,n.next)}function ev(i,t){return ss(i.prev,i,t.prev)<0&&ss(t.next,i,i.next)<0}function Em(i,t,n,l,u){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-n)*u|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-l)*u|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function tv(i){var t=i,n=i;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==i);return n}function Qd(i,t,n,l,u,p,g,b){return(u-g)*(t-b)>=(i-g)*(p-b)&&(i-g)*(l-b)>=(n-g)*(t-b)&&(n-g)*(p-b)>=(u-g)*(l-b)}function iv(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(n,l){var u=n;do{if(u.i!==n.i&&u.next.i!==n.i&&u.i!==l.i&&u.next.i!==l.i&&Sm(u,u.next,n,l))return!0;u=u.next}while(u!==n);return!1}(i,t)&&(of(i,t)&&of(t,i)&&function(n,l){var u=n,p=!1,g=(n.x+l.x)/2,b=(n.y+l.y)/2;do u.y>b!=u.next.y>b&&u.next.y!==u.y&&g<(u.next.x-u.x)*(b-u.y)/(u.next.y-u.y)+u.x&&(p=!p),u=u.next;while(u!==n);return p}(i,t)&&(ss(i.prev,i,t.prev)||ss(i,t.prev,t))||eh(i,t)&&ss(i.prev,i,i.next)>0&&ss(t.prev,t,t.next)>0)}function ss(i,t,n){return(t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y)}function eh(i,t){return i.x===t.x&&i.y===t.y}function Sm(i,t,n,l){var u=Pp(ss(i,t,n)),p=Pp(ss(i,t,l)),g=Pp(ss(n,l,i)),b=Pp(ss(n,l,t));return u!==p&&g!==b||!(u!==0||!Dp(i,n,t))||!(p!==0||!Dp(i,l,t))||!(g!==0||!Dp(n,i,l))||!(b!==0||!Dp(n,t,l))}function Dp(i,t,n){return t.x<=Math.max(i.x,n.x)&&t.x>=Math.min(i.x,n.x)&&t.y<=Math.max(i.y,n.y)&&t.y>=Math.min(i.y,n.y)}function Pp(i){return i>0?1:i<0?-1:0}function of(i,t){return ss(i.prev,i,i.next)<0?ss(i,t,i.next)>=0&&ss(i,i.prev,t)>=0:ss(i,t,i.prev)<0||ss(i,i.next,t)<0}function U_(i,t){var n=new Cm(i.i,i.x,i.y),l=new Cm(t.i,t.x,t.y),u=i.next,p=t.prev;return i.next=t,t.prev=i,n.next=u,u.prev=n,l.next=n,n.prev=l,p.next=l,l.prev=p,l}function j_(i,t,n,l){var u=new Cm(i,t,n);return l?(u.next=l.next,u.prev=l,l.next.prev=u,l.next=u):(u.prev=u,u.next=u),u}function af(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Cm(i,t,n){this.i=i,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mm(i,t,n,l){for(var u=0,p=t,g=n-l;p<n;p+=l)u+=(i[g]-i[p])*(i[p+1]+i[g+1]),g=p;return u}function V_(i,t,n,l,u){$_(i,t,n||0,l||i.length-1,u||nv)}function $_(i,t,n,l,u){for(;l>n;){if(l-n>600){var p=l-n+1,g=t-n+1,b=Math.log(p),S=.5*Math.exp(2*b/3),C=.5*Math.sqrt(b*S*(p-S)/p)*(g-p/2<0?-1:1);$_(i,t,Math.max(n,Math.floor(t-g*S/p+C)),Math.min(l,Math.floor(t+(p-g)*S/p+C)),u)}var P=i[t],O=n,B=l;for(vu(i,n,t),u(i[l],P)>0&&vu(i,n,l);O<B;){for(vu(i,O,B),O++,B--;u(i[O],P)<0;)O++;for(;u(i[B],P)>0;)B--}u(i[n],P)===0?vu(i,n,B):vu(i,++B,l),B<=t&&(n=B+1),t<=B&&(l=B-1)}}function vu(i,t,n){var l=i[t];i[t]=i[n],i[n]=l}function nv(i,t){return i<t?-1:i>t?1:0}function Am(i,t){const n=i.length;if(n<=1)return[i];const l=[];let u,p;for(let g=0;g<n;g++){const b=tt(i[g]);b!==0&&(i[g].area=Math.abs(b),p===void 0&&(p=b<0),p===b<0?(u&&l.push(u),u=[i[g]]):u.push(i[g]))}if(u&&l.push(u),t>1)for(let g=0;g<l.length;g++)l[g].length<=t||(V_(l[g],t,1,l[g].length-1,rv),l[g]=l[g].slice(0,t));return l}function rv(i,t){return t.area-i.area}function Im(i,t,n){const l=n.patternDependencies;let u=!1;for(const p of t){const g=p.paint.get(`${i}-pattern`);g.isConstant()||(u=!0);const b=g.constantOr(null);b&&(u=!0,l[b]=!0)}return u}function km(i,t,n,l,u){const p=u.patternDependencies;for(const g of t){const b=g.paint.get(`${i}-pattern`).value;if(b.kind!=="constant"){let S=b.evaluate({zoom:l},n,{},u.availableImages);S=S&&S.name?S.name:S,p[S]=!0,n.patterns[g.id]=S}}return n}rf.exports=kp,rf.exports.default=kp,kp.deviation=function(i,t,n,l){var u=t&&t.length,p=Math.abs(Mm(i,0,u?t[0]*n:i.length,n));if(u)for(var g=0,b=t.length;g<b;g++)p-=Math.abs(Mm(i,t[g]*n,g<b-1?t[g+1]*n:i.length,n));var S=0;for(g=0;g<l.length;g+=3){var C=l[g]*n,P=l[g+1]*n,O=l[g+2]*n;S+=Math.abs((i[C]-i[O])*(i[P+1]-i[C+1])-(i[C]-i[P])*(i[O+1]-i[C+1]))}return p===0&&S===0?0:Math.abs((S-p)/p)},kp.flatten=function(i){for(var t=i[0][0].length,n={vertices:[],holes:[],dimensions:t},l=0,u=0;u<i.length;u++){for(var p=0;p<i[u].length;p++)for(var g=0;g<t;g++)n.vertices.push(i[u][p][g]);u>0&&n.holes.push(l+=i[u-1].length)}return n};class Lp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zn,this.indexArray=new $s,this.indexArray2=new Ka,this.programConfigurations=new dc(t.layers,t.zoom),this.segments=new rs,this.segments2=new rs,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.projection=t.projection}populate(t,n,l,u){this.hasPattern=Im("fill",this.layers,n);const p=this.layers[0].layout.get("fill-sort-key"),g=[];for(const{feature:b,id:S,index:C,sourceLayerIndex:P}of t){const O=this.layers[0]._featureFilter.needGeometry,B=hc(b,O);if(!this.layers[0]._featureFilter.filter(new Ge(this.zoom),B,l))continue;const $=p?p.evaluate(B,{},l,n.availableImages):void 0,G={id:S,properties:b.properties,type:b.type,sourceLayerIndex:P,index:C,geometry:O?B.geometry:Rl(b,l,u),patterns:{},sortKey:$};g.push(G)}p&&g.sort((b,S)=>b.sortKey-S.sortKey);for(const b of g){const{geometry:S,index:C,sourceLayerIndex:P}=b;if(this.hasPattern){const O=km("fill",this.layers,b,this.zoom,n);this.patternFeatures.push(O)}else this.addFeature(b,S,C,l,{},n.availableImages);n.featureIndex.insert(t[C].feature,S,C,P,this.index)}}update(t,n,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,l,u)}addFeatures(t,n,l,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,n,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,H2),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,n,l,u,p,g=[]){for(const b of Am(n,500)){let S=0;for(const G of b)S+=G.length;const C=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),P=C.vertexLength,O=[],B=[];for(const G of b){if(G.length===0)continue;G!==b[0]&&B.push(O.length/2);const Y=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),ne=Y.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(ne+G.length-1,ne),O.push(G[0].x),O.push(G[0].y);for(let ye=1;ye<G.length;ye++)this.layoutVertexArray.emplaceBack(G[ye].x,G[ye].y),this.indexArray2.emplaceBack(ne+ye-1,ne+ye),O.push(G[ye].x),O.push(G[ye].y);Y.vertexLength+=G.length,Y.primitiveLength+=G.length}const $=rf.exports(O,B);for(let G=0;G<$.length;G+=3)this.indexArray.emplaceBack(P+$[G],P+$[G+1],P+$[G+2]);C.vertexLength+=S,C.primitiveLength+=$.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,p,g,u)}}ni(Lp,"FillBucket",{omit:["layers","patternFeatures"]});const sv=new Ei({"fill-sort-key":new at(yt.layout_fill["fill-sort-key"])});var ov={paint:new Ei({"fill-antialias":new Ze(yt.paint_fill["fill-antialias"]),"fill-opacity":new at(yt.paint_fill["fill-opacity"]),"fill-color":new at(yt.paint_fill["fill-color"]),"fill-outline-color":new at(yt.paint_fill["fill-outline-color"]),"fill-translate":new Ze(yt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ze(yt.paint_fill["fill-translate-anchor"]),"fill-pattern":new at(yt.paint_fill["fill-pattern"])}),layout:sv};const av=ci([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),lv=ci([{name:"a_centroid_pos",components:2,type:"Uint16"}]),cv=ci([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:uv}=av;var Rp={},dv=Fe,G_=th;function th(i,t,n,l,u){this.properties={},this.extent=n,this.type=0,this._pbf=i,this._geometry=-1,this._keys=l,this._values=u,i.readFields(q_,this,t)}function q_(i,t,n){i==1?t.id=n.readVarint():i==2?function(l,u){for(var p=l.readVarint()+l.pos;l.pos<p;){var g=u._keys[l.readVarint()],b=u._values[l.readVarint()];u.properties[g]=b}}(n,t):i==3?t.type=n.readVarint():i==4&&(t._geometry=n.pos)}function W_(i){for(var t,n,l=0,u=0,p=i.length,g=p-1;u<p;g=u++)l+=((n=i[g]).x-(t=i[u]).x)*(t.y+n.y);return l}th.types=["Unknown","Point","LineString","Polygon"],th.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var t,n=i.readVarint()+i.pos,l=1,u=0,p=0,g=0,b=[];i.pos<n;){if(u<=0){var S=i.readVarint();l=7&S,u=S>>3}if(u--,l===1||l===2)p+=i.readSVarint(),g+=i.readSVarint(),l===1&&(t&&b.push(t),t=[]),t.push(new dv(p,g));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&b.push(t),b},th.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var t=i.readVarint()+i.pos,n=1,l=0,u=0,p=0,g=1/0,b=-1/0,S=1/0,C=-1/0;i.pos<t;){if(l<=0){var P=i.readVarint();n=7&P,l=P>>3}if(l--,n===1||n===2)(u+=i.readSVarint())<g&&(g=u),u>b&&(b=u),(p+=i.readSVarint())<S&&(S=p),p>C&&(C=p);else if(n!==7)throw new Error("unknown command "+n)}return[g,S,b,C]},th.prototype.toGeoJSON=function(i,t,n){var l,u,p=this.extent*Math.pow(2,n),g=this.extent*i,b=this.extent*t,S=this.loadGeometry(),C=th.types[this.type];function P($){for(var G=0;G<$.length;G++){var Y=$[G];$[G]=[360*(Y.x+g)/p-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+b)/p)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(l=0;l<S.length;l++)O[l]=S[l][0];P(S=O);break;case 2:for(l=0;l<S.length;l++)P(S[l]);break;case 3:for(S=function($){var G=$.length;if(G<=1)return[$];for(var Y,ne,ye=[],Ee=0;Ee<G;Ee++){var ge=W_($[Ee]);ge!==0&&(ne===void 0&&(ne=ge<0),ne===ge<0?(Y&&ye.push(Y),Y=[$[Ee]]):Y.push($[Ee]))}return Y&&ye.push(Y),ye}(S),l=0;l<S.length;l++)for(u=0;u<S[l].length;u++)P(S[l][u])}S.length===1?S=S[0]:C="Multi"+C;var B={type:"Feature",geometry:{type:C,coordinates:S},properties:this.properties};return"id"in this&&(B.id=this.id),B};var hv=G_,H_=Z_;function Z_(i,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(fv,this,t),this.length=this._features.length}function fv(i,t,n){i===15?t.version=n.readVarint():i===1?t.name=n.readString():i===5?t.extent=n.readVarint():i===2?t._features.push(n.pos):i===3?t._keys.push(n.readString()):i===4&&t._values.push(function(l){for(var u=null,p=l.readVarint()+l.pos;l.pos<p;){var g=l.readVarint()>>3;u=g===1?l.readString():g===2?l.readFloat():g===3?l.readDouble():g===4?l.readVarint64():g===5?l.readVarint():g===6?l.readSVarint():g===7?l.readBoolean():null}return u}(n))}Z_.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var t=this._pbf.readVarint()+this._pbf.pos;return new hv(this._pbf,t,this.extent,this._keys,this._values)};var Op=H_;function pv(i,t,n){if(i===3){var l=new Op(n,n.readVarint()+n.pos);l.length&&(t[l.name]=l)}}var Dm=Rp.VectorTile=function(i,t){this.layers=i.readFields(pv,{},t)},zp=Rp.VectorTileFeature=G_;function Bp(i,t,n,l){const u=[],p=l===0?(g,b,S,C,P,O)=>{g.push(new Fe(O,S+(O-b)/(C-b)*(P-S)))}:(g,b,S,C,P,O)=>{g.push(new Fe(b+(O-S)/(P-S)*(C-b),O))};for(const g of i){const b=[];for(const S of g){if(S.length<=2)continue;const C=[];for(let B=0;B<S.length-1;B++){const $=S[B].x,G=S[B].y,Y=S[B+1].x,ne=S[B+1].y,ye=l===0?$:G,Ee=l===0?Y:ne;ye<t?Ee>t&&p(C,$,G,Y,ne,t):ye>n?Ee<n&&p(C,$,G,Y,ne,n):C.push(S[B]),Ee<t&&ye>=t&&p(C,$,G,Y,ne,t),Ee>n&&ye<=n&&p(C,$,G,Y,ne,n)}let P=S[S.length-1];const O=l===0?P.x:P.y;O>=t&&O<=n&&C.push(P),C.length&&(P=C[C.length-1],C[0].x===P.x&&C[0].y===P.y||C.push(C[0]),b.push(C))}b.length&&u.push(b)}return u}Rp.VectorTileLayer=H_;const mv=zp.types,_v=Math.pow(2,13);function lf(i,t,n,l,u,p,g,b){i.emplaceBack((t<<1)+g,(n<<1)+p,(Math.floor(l*_v)<<1)+u,Math.round(b))}function cf(i,t,n){i.emplaceBack(t.x,t.y,t.z,n[0]*16384,n[1]*16384,n[2]*16384)}class Y_{constructor(){this.acc=new Fe(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Fe(t.x,t.y),this.max=new Fe(t.x,t.y))}append(t,n){this.currentPolyCount.edges++,this.acc._add(t);const l=this.min,u=this.max;t.x<l.x?l.x=t.x:t.x>u.x&&(u.x=t.x),t.y<l.y?l.y=t.y:t.y>u.y&&(u.y=t.y),((t.x===0||t.x===Pi)&&t.x===n.x)!=((t.y===0||t.y===Pi)&&t.y===n.y)&&this.processBorderOverlap(t,n),n.x<0!=t.x<0&&this.addBorderIntersection(0,Ji(n.y,t.y,(0-n.x)/(t.x-n.x))),n.x>Pi!=t.x>Pi&&this.addBorderIntersection(1,Ji(n.y,t.y,(Pi-n.x)/(t.x-n.x))),n.y<0!=t.y<0&&this.addBorderIntersection(2,Ji(n.x,t.x,(0-n.y)/(t.y-n.y))),n.y>Pi!=t.y>Pi&&this.addBorderIntersection(3,Ji(n.x,t.x,(Pi-n.y)/(t.y-n.y)))}addBorderIntersection(t,n){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const l=this.borders[t];n<l[0]&&(l[0]=n),n>l[1]&&(l[1]=n)}processBorderOverlap(t,n){if(t.x===n.x){if(t.y===n.y)return;const l=t.x===0?0:1;this.addBorderIntersection(l,n.y),this.addBorderIntersection(l,t.y)}else{const l=t.y===0?2:3;this.addBorderIntersection(l,n.x),this.addBorderIntersection(l,t.x)}}centroid(){const t=this.polyCount.reduce((n,l)=>n+l.edges,0);return t!==0?this.acc.div(t)._round():new Fe(0,0)}span(){return new Fe(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((t,n)=>t+ +(n[0]!==Number.MAX_VALUE),0)}}class uf{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new Hn,this.centroidVertexArray=new vp,this.indexArray=new $s,this.programConfigurations=new dc(t.layers,t.zoom),this.segments=new rs,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.enableTerrain=t.enableTerrain}populate(t,n,l,u){this.features=[],this.hasPattern=Im("fill-extrusion",this.layers,n),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(p){const g=Math.exp(Math.PI*(1-p.y/(1<<p.z)*2));return 80150034*g/(g*g+1)/Pi/(1<<p.z)}(l),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:p,id:g,index:b,sourceLayerIndex:S}of t){const C=this.layers[0]._featureFilter.needGeometry,P=hc(p,C);if(!this.layers[0]._featureFilter.filter(new Ge(this.zoom),P,l))continue;const O={id:g,sourceLayerIndex:S,index:b,geometry:C?P.geometry:Rl(p,l,u),properties:p.properties,type:p.type,patterns:{}},B=this.layoutVertexArray.length;this.hasPattern?this.features.push(km("fill-extrusion",this.layers,O,this.zoom,n)):this.addFeature(O,O.geometry,b,l,{},n.availableImages,u),n.featureIndex.insert(p,O.geometry,b,S,this.index,B)}this.sortBorders()}addFeatures(t,n,l,u,p){for(const g of this.features){const{geometry:b}=g;this.addFeature(g,b,g.index,n,l,u,p)}this.sortBorders()}update(t,n,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,uv),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,cv.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,lv.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,n,l,u,p,g,b){const S=[new Fe(0,0),new Fe(Pi,Pi)],C=b.projection,P=C.name==="globe",O=this.enableTerrain&&!P?new Y_:null,B=mv[t.type]==="Polygon";P&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ur);const $=Am(n,500);for(let ye=$.length-1;ye>=0;ye--){const Ee=$[ye];(Ee.length===0||(G=Ee[0]).every(ge=>ge.x<=0)||G.every(ge=>ge.x>=Pi)||G.every(ge=>ge.y<=0)||G.every(ge=>ge.y>=Pi))&&$.splice(ye,1)}var G;let Y;if(P)Y=Om($,S,u);else{Y=[];for(const ye of $)Y.push({polygon:ye,bounds:S})}const ne=B?this.edgeRadius:0;for(const{polygon:ye,bounds:Ee}of Y){let ge=0,be=0;for(const Ie of ye)B&&!Ie[0].equals(Ie[Ie.length-1])&&Ie.push(Ie[0]),be+=B?Ie.length-1:Ie.length;const Pe=this.segments.prepareSegment((B?5:4)*be,this.layoutVertexArray,this.indexArray);if(B){const Ie=[],rt=[];ge=Pe.vertexLength;for(const xt of ye){let Gt,dt;xt.length&&xt!==ye[0]&&rt.push(Ie.length/2),Gt=xt[1].sub(xt[0])._perp()._unit();for(let wt=1;wt<xt.length;wt++){const At=xt[wt],Rt=xt[wt===xt.length-1?1:wt+1];let{x:qt,y:ft}=At;if(ne){dt=Rt.sub(At)._perp()._unit();const Qt=Gt.add(dt)._unit(),Oi=ne*Math.min(4,1/(Gt.x*Qt.x+Gt.y*Qt.y));qt+=Oi*Qt.x,ft+=Oi*Qt.y,Gt=dt}lf(this.layoutVertexArray,qt,ft,0,0,1,1,0),Pe.vertexLength++,Ie.push(At.x,At.y),P&&cf(this.layoutVertexExtArray,C.projectTilePoint(qt,ft,u),C.upVector(u,qt,ft))}}const it=rf.exports(Ie,rt);for(let xt=0;xt<it.length;xt+=3)this.indexArray.emplaceBack(ge+it[xt],ge+it[xt+2],ge+it[xt+1]),Pe.primitiveLength++}for(const Ie of ye){O&&Ie.length&&O.startRing(Ie[0]);let rt,it,xt,Gt=Ie.length>4&&Lm(Ie[Ie.length-2],Ie[0],Ie[1]),dt=ne?Fp(Ie[Ie.length-2],Ie[0],Ie[1],ne):0;it=Ie[1].sub(Ie[0])._perp()._unit();let wt=!0;for(let At=1,Rt=0;At<Ie.length;At++){let qt=Ie[At-1],ft=Ie[At];const Qt=Ie[At===Ie.length-1?1:At+1];if(O&&B&&O.currentPolyCount.top++,Pm(ft,qt,Ee)){ne&&(it=Qt.sub(ft)._perp()._unit(),wt=!wt);continue}O&&O.append(ft,qt);const Oi=ft.sub(qt)._perp(),ai=Oi.x/(Math.abs(Oi.x)+Math.abs(Oi.y)),xi=Oi.y>0?1:0,ei=qt.dist(ft);if(Rt+ei>32768&&(Rt=0),ne){xt=Qt.sub(ft)._perp()._unit();let fn=K_(qt,ft,Qt,X_(it,xt),ne);isNaN(fn)&&(fn=0);const Vi=ft.sub(qt)._unit();qt=qt.add(Vi.mult(dt))._round(),ft=ft.add(Vi.mult(-fn))._round(),dt=fn,it=xt}const Ni=Pe.vertexLength,wn=Ie.length>4&&Lm(qt,ft,Qt);let vn=Np(Rt,Gt,wt);if(lf(this.layoutVertexArray,qt.x,qt.y,ai,xi,0,0,vn),lf(this.layoutVertexArray,qt.x,qt.y,ai,xi,0,1,vn),Rt+=ei,vn=Np(Rt,wn,!wt),Gt=wn,lf(this.layoutVertexArray,ft.x,ft.y,ai,xi,0,0,vn),lf(this.layoutVertexArray,ft.x,ft.y,ai,xi,0,1,vn),Pe.vertexLength+=4,this.indexArray.emplaceBack(Ni+0,Ni+1,Ni+2),this.indexArray.emplaceBack(Ni+1,Ni+3,Ni+2),Pe.primitiveLength+=2,ne){const fn=ge+(At===1?Ie.length-2:At-2),Vi=At===1?ge:fn+1;if(this.indexArray.emplaceBack(Ni+1,fn,Ni+3),this.indexArray.emplaceBack(fn,Vi,Ni+3),Pe.primitiveLength+=2,rt===void 0&&(rt=Ni),!Pm(Qt,Ie[At],Ee)){const sr=At===Ie.length-1?rt:Pe.vertexLength;this.indexArray.emplaceBack(Ni+2,Ni+3,sr),this.indexArray.emplaceBack(Ni+3,sr+1,sr),this.indexArray.emplaceBack(Ni+3,Vi,sr+1),Pe.primitiveLength+=3}wt=!wt}if(P){const fn=this.layoutVertexExtArray,Vi=C.projectTilePoint(qt.x,qt.y,u),sr=C.projectTilePoint(ft.x,ft.y,u),Ki=C.upVector(u,qt.x,qt.y),Tn=C.upVector(u,ft.x,ft.y);cf(fn,Vi,Ki),cf(fn,Vi,Ki),cf(fn,sr,Tn),cf(fn,sr,Tn)}}B&&(ge+=Ie.length-1)}}if(O&&O.polyCount.length>0){if(O.borders){O.vertexArrayOffset=this.centroidVertexArray.length;const ye=O.borders,Ee=this.featuresOnBorder.push(O)-1;for(let ge=0;ge<4;ge++)ye[ge][0]!==Number.MAX_VALUE&&this.borders[ge].push(Ee)}this.encodeCentroid(O.borders?void 0:O.centroid(),O)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,p,g,u)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort((n,l)=>this.featuresOnBorder[n].borders[t][0]-this.featuresOnBorder[l].borders[t][0])}encodeCentroid(t,n,l=!0){let u,p;if(t)if(t.y!==0){const b=n.span()._mult(this.tileToMeter);u=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(b.x/10)),p=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(b.y/10))}else u=Math.ceil(7*(t.x+450)),p=0;else u=0,p=+l;let g=l?this.centroidVertexArray.length:n.vertexArrayOffset;for(const b of n.polyCount){l&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*b.edges+b.top);for(let S=0;S<b.top;S++)this.centroidVertexArray.emplace(g++,u,p);for(let S=0;S<2*b.edges;S++)this.centroidVertexArray.emplace(g++,0,p),this.centroidVertexArray.emplace(g++,u,p)}}}function X_(i,t){const n=i.add(t)._unit();return i.x*n.x+i.y*n.y}function Fp(i,t,n,l){const u=t.sub(i)._perp()._unit(),p=n.sub(t)._perp()._unit();return K_(i,t,n,X_(u,p),l)}function K_(i,t,n,l,u){const p=Math.sqrt(1-l*l);return Math.min(i.dist(t)/3,t.dist(n)/3,u*p/l)}function Pm(i,t,n){return i.x<n[0].x&&t.x<n[0].x||i.x>n[1].x&&t.x>n[1].x||i.y<n[0].y&&t.y<n[0].y||i.y>n[1].y&&t.y>n[1].y}function Lm(i,t,n){if(i.x<0||i.x>=Pi||t.x<0||t.x>=Pi||n.x<0||n.x>=Pi)return!1;const l=n.sub(t),u=l.perp(),p=i.sub(t);return(l.x*p.x+l.y*p.y)/Math.sqrt((l.x*l.x+l.y*l.y)*(p.x*p.x+p.y*p.y))>-.866&&u.x*p.x+u.y*p.y<0}function Np(i,t,n){const l=t?2|i:-3&i;return n?1|l:-2&l}function Rm(){const i=Math.PI/32,t=Math.tan(i),n=Xu;return n*Math.sqrt(1+2*t*t)-n}function Om(i,t,n){const l=1<<n.z,u=Zo(n.x/l),p=Zo((n.x+1)/l),g=to(n.y/l),b=to((n.y+1)/l);return function(S,C,P,O,B=0,$){const G=[];if(!S.length||!P||!O)return G;const Y=(Ie,rt)=>{for(const it of Ie)G.push({polygon:it,bounds:rt})},ne=Math.ceil(Math.log2(P)),ye=Math.ceil(Math.log2(O)),Ee=ne-ye,ge=[];for(let Ie=0;Ie<Math.abs(Ee);Ie++)ge.push(Ee>0?0:1);for(let Ie=0;Ie<Math.min(ne,ye);Ie++)ge.push(0),ge.push(1);let be=S;if(be=Bp(be,C[0].y-B,C[1].y+B,1),be=Bp(be,C[0].x-B,C[1].x+B,0),!be.length)return G;const Pe=[];for(ge.length?Pe.push({polygons:be,bounds:C,depth:0}):Y(be,C);Pe.length;){const Ie=Pe.pop(),rt=Ie.depth,it=ge[rt],xt=Ie.bounds[0],Gt=Ie.bounds[1],dt=it===0?xt.x:xt.y,wt=it===0?Gt.x:Gt.y,At=$?$(it,dt,wt):.5*(dt+wt),Rt=Bp(Ie.polygons,dt-B,At+B,it),qt=Bp(Ie.polygons,At-B,wt+B,it);if(Rt.length){const ft=[xt,new Fe(it===0?At:Gt.x,it===1?At:Gt.y)];ge.length>rt+1?Pe.push({polygons:Rt,bounds:ft,depth:rt+1}):Y(Rt,ft)}if(qt.length){const ft=[new Fe(it===0?At:xt.x,it===1?At:xt.y),Gt];ge.length>rt+1?Pe.push({polygons:qt,bounds:ft,depth:rt+1}):Y(qt,ft)}}return G}(i,t,Math.ceil((p-u)/11.25),Math.ceil((g-b)/11.25),1,(S,C,P)=>{if(S===0)return .5*(C+P);{const O=to((n.y+C/Pi)/l);return(Ra(.5*(to((n.y+P/Pi)/l)+O))*l-n.y)*Pi}})}ni(uf,"FillExtrusionBucket",{omit:["layers","features"]}),ni(Y_,"PartMetadata");const J_=new Ei({"fill-extrusion-edge-radius":new Ze(yt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Q_={paint:new Ei({"fill-extrusion-opacity":new Ze(yt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new at(yt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ze(yt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ze(yt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new at(yt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new at(yt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new at(yt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ze(yt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ze(yt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ze(yt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:J_};function eg(i,t,n){var l=2*Math.PI*6378137/256/Math.pow(2,n);return[i*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}class Up{constructor(t,n,l){this.z=t,this.x=n,this.y=l,this.key=xu(0,t,t,n,l)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,n){const l=function(p,g,b){var S=eg(256*p,256*(g=Math.pow(2,b)-g-1),b),C=eg(256*(p+1),256*(g+1),b);return S[0]+","+S[1]+","+C[0]+","+C[1]}(this.x,this.y,this.z),u=function(p,g,b){let S,C="";for(let P=p;P>0;P--)S=1<<P-1,C+=(g&S?1:0)+(b&S?2:0);return C}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(n==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",l)}toString(){return`${this.z}/${this.x}/${this.y}`}}class tg{constructor(t,n){this.wrap=t,this.canonical=n,this.key=xu(t,n.z,n.z,n.x,n.y)}}class Gs{constructor(t,n,l,u,p){this.overscaledZ=t,this.wrap=n,this.canonical=new Up(l,+u,+p),this.key=n===0&&t===l?this.canonical.key:xu(n,t,l,u,p)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const n=this.canonical.z-t;return t>this.canonical.z?new Gs(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gs(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(t,n=!0){if(this.overscaledZ===t&&n)return this.key;if(t>this.canonical.z)return xu(this.wrap*+n,t,this.canonical.z,this.canonical.x,this.canonical.y);{const l=this.canonical.z-t;return xu(this.wrap*+n,t,t,this.canonical.x>>l,this.canonical.y>>l)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const n=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>n&&t.canonical.y===this.canonical.y>>n}children(t){if(this.overscaledZ>=t)return[new Gs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,l=2*this.canonical.x,u=2*this.canonical.y;return[new Gs(n,this.wrap,n,l,u),new Gs(n,this.wrap,n,l+1,u),new Gs(n,this.wrap,n,l,u+1),new Gs(n,this.wrap,n,l+1,u+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Gs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Gs(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new tg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function xu(i,t,n,l,u){const p=1<<Math.min(n,22);let g=p*(u%p)+l%p;return i&&n<22&&(g+=p*p*((i<0?-2*i-1:2*i)%(1<<2*(22-n)))),16*(32*g+n)+(t-n)}ni(Up,"CanonicalTileID"),ni(Gs,"OverscaledTileID",{omit:["projMatrix"]});class ih extends Fe{constructor(t,n,l){super(t,n),this.z=l}}function df(i,t){return i.x*t.x+i.y*t.y}function jp(i,t){if(i.length===1){let n=0;const l=t[n++];let u;for(;!u||l.equals(u);)if(u=t[n++],!u)return 1/0;for(;n<t.length;n++){const p=t[n],g=i[0],b=u.sub(l),S=p.sub(l),C=g.sub(l),P=df(b,b),O=df(b,S),B=df(S,S),$=df(C,b),G=df(C,S),Y=P*B-O*O,ne=(B*$-O*G)/Y,ye=(P*G-O*$)/Y,Ee=l.z*(1-ne-ye)+u.z*ne+p.z*ye;if(isFinite(Ee))return Ee}return 1/0}{let n=1/0;for(const l of t)n=Math.min(n,l.z);return n}}function zm(i,t,n,l,u,p,g,b){const S=g*u.getElevationAt(i,t,!0,!0),C=p[0]!==0,P=C?p[1]===0?g*(p[0]/7-450):g*function(O,B,$){const G=Math.floor(B[0]/8),Y=Math.floor(B[1]/8),ne=10*(B[0]-8*G),ye=10*(B[1]-8*Y),Ee=O.getElevationAt(G,Y,!0,!0),ge=O.getMeterToDEM($),be=Math.floor(.5*(ne*ge-1)),Pe=Math.floor(.5*(ye*ge-1)),Ie=O.tileCoordToPixel(G,Y),rt=2*be+1,it=2*Pe+1,xt=function(qt,ft,Qt,Oi,ai){return[qt.getElevationAtPixel(ft,Qt,!0),qt.getElevationAtPixel(ft+ai,Qt,!0),qt.getElevationAtPixel(ft,Qt+ai,!0),qt.getElevationAtPixel(ft+Oi,Qt+ai,!0)]}(O,Ie.x-be,Ie.y-Pe,rt,it),Gt=Math.abs(xt[0]-xt[1]),dt=Math.abs(xt[2]-xt[3]),wt=Math.abs(xt[0]-xt[2])+Math.abs(xt[1]-xt[3]),At=Math.min(.25,.5*ge*(Gt+dt)/rt),Rt=Math.min(.25,.5*ge*wt/it);return Ee+Math.max(At*ne,Rt*ye)}(u,p,b):S;return{base:S+(n===0)?-1:n,top:C?Math.max(P+l,S+n+2):S+l}}const gv=ci([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:yv}=gv,vv=ci([{name:"a_packed",components:4,type:"Float32"}]),{members:xv}=vv,bv=zp.types,wv=Math.cos(Math.PI/180*37.5);class Vp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new Do,this.layoutVertexArray2=new fo,this.indexArray=new $s,this.programConfigurations=new dc(t.layers,t.zoom),this.segments=new rs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,l,u){this.hasPattern=Im("line",this.layers,n);const p=this.layers[0].layout.get("line-sort-key"),g=[];for(const{feature:P,id:O,index:B,sourceLayerIndex:$}of t){const G=this.layers[0]._featureFilter.needGeometry,Y=hc(P,G);if(!this.layers[0]._featureFilter.filter(new Ge(this.zoom),Y,l))continue;const ne=p?p.evaluate(Y,{},l):void 0,ye={id:O,properties:P.properties,type:P.type,sourceLayerIndex:$,index:B,geometry:G?Y.geometry:Rl(P,l,u),patterns:{},sortKey:ne};g.push(ye)}p&&g.sort((P,O)=>P.sortKey-O.sortKey);const{lineAtlas:b,featureIndex:S}=n,C=this.addConstantDashes(b);for(const P of g){const{geometry:O,index:B,sourceLayerIndex:$}=P;if(C&&this.addFeatureDashes(P,b),this.hasPattern){const G=km("line",this.layers,P,this.zoom,n);this.patternFeatures.push(G)}else this.addFeature(P,O,B,l,b.positions,n.availableImages);S.insert(t[B].feature,O,B,$,this.index)}}addConstantDashes(t){let n=!1;for(const l of this.layers){const u=l.paint.get("line-dasharray").value,p=l.layout.get("line-cap").value;if(u.kind!=="constant"||p.kind!=="constant")n=!0;else{const g=p.value,b=u.value;if(!b)continue;t.addDash(b,g)}}return n}addFeatureDashes(t,n){const l=this.zoom;for(const u of this.layers){const p=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if(p.kind==="constant"&&g.kind==="constant")continue;let b,S;if(p.kind==="constant"){if(b=p.value,!b)continue}else b=p.evaluate({zoom:l},t);S=g.kind==="constant"?g.value:g.evaluate({zoom:l},t),n.addDash(b,S),t.patterns[u.id]=n.getKey(b,S)}}update(t,n,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,l,u)}addFeatures(t,n,l,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,n,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,xv)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,yv),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,n,l,u,p,g){const b=this.layers[0].layout,S=b.get("line-join").evaluate(t,{}),C=b.get("line-cap").evaluate(t,{}),P=b.get("line-miter-limit"),O=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const B of n)this.addLine(B,t,S,C,P,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,p,g,u)}addLine(t,n,l,u,p,g){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ye=0;ye<t.length-1;ye++)this.totalDistance+=t[ye].dist(t[ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=bv[n.type]==="Polygon";let S=t.length;for(;S>=2&&t[S-1].equals(t[S-2]);)S--;let C=0;for(;C<S-1&&t[C].equals(t[C+1]);)C++;if(S<(b?3:2))return;l==="bevel"&&(p=1.05);const P=this.overscaling<=16?122880/(512*this.overscaling):0,O=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let B,$,G,Y,ne;this.e1=this.e2=-1,b&&(B=t[S-2],ne=t[C].sub(B)._unit()._perp());for(let ye=C;ye<S;ye++){if(G=ye===S-1?b?t[C+1]:void 0:t[ye+1],G&&t[ye].equals(G))continue;ne&&(Y=ne),B&&($=B),B=t[ye],ne=G?G.sub(B)._unit()._perp():Y,Y=Y||ne;let Ee=Y.add(ne);Ee.x===0&&Ee.y===0||Ee._unit();const ge=Y.x*ne.x+Y.y*ne.y,be=Ee.x*ne.x+Ee.y*ne.y,Pe=be!==0?1/be:1/0,Ie=2*Math.sqrt(2-2*be),rt=be<wv&&$&&G,it=Y.x*ne.y-Y.y*ne.x>0;if(rt&&ye>C){const dt=B.dist($);if(dt>2*P){const wt=B.sub(B.sub($)._mult(P/dt)._round());this.updateDistance($,wt),this.addCurrentVertex(wt,Y,0,0,O),$=wt}}const xt=$&&G;let Gt=xt?l:b?"butt":u;if(xt&&Gt==="round"&&(Pe<g?Gt="miter":Pe<=2&&(Gt="fakeround")),Gt==="miter"&&Pe>p&&(Gt="bevel"),Gt==="bevel"&&(Pe>2&&(Gt="flipbevel"),Pe<p&&(Gt="miter")),$&&this.updateDistance($,B),Gt==="miter")Ee._mult(Pe),this.addCurrentVertex(B,Ee,0,0,O);else if(Gt==="flipbevel"){if(Pe>100)Ee=ne.mult(-1);else{const dt=Pe*Y.add(ne).mag()/Y.sub(ne).mag();Ee._perp()._mult(dt*(it?-1:1))}this.addCurrentVertex(B,Ee,0,0,O),this.addCurrentVertex(B,Ee.mult(-1),0,0,O)}else if(Gt==="bevel"||Gt==="fakeround"){const dt=-Math.sqrt(Pe*Pe-1),wt=it?dt:0,At=it?0:dt;if($&&this.addCurrentVertex(B,Y,wt,At,O),Gt==="fakeround"){const Rt=Math.round(180*Ie/Math.PI/20);for(let qt=1;qt<Rt;qt++){let ft=qt/Rt;if(ft!==.5){const Oi=ft-.5;ft+=ft*Oi*(ft-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*Oi*Oi+(.848013+ge*(.215638*ge-1.06021)))}const Qt=ne.sub(Y)._mult(ft)._add(Y)._unit()._mult(it?-1:1);this.addHalfVertex(B,Qt.x,Qt.y,!1,it,0,O)}}G&&this.addCurrentVertex(B,ne,-wt,-At,O)}else if(Gt==="butt")this.addCurrentVertex(B,Ee,0,0,O);else if(Gt==="square"){const dt=$?1:-1;$||this.addCurrentVertex(B,Ee,dt,dt,O),this.addCurrentVertex(B,Ee,0,0,O),$&&this.addCurrentVertex(B,Ee,dt,dt,O)}else Gt==="round"&&($&&(this.addCurrentVertex(B,Y,0,0,O),this.addCurrentVertex(B,Y,1,1,O,!0)),G&&(this.addCurrentVertex(B,ne,-1,-1,O,!0),this.addCurrentVertex(B,ne,0,0,O)));if(rt&&ye<S-1){const dt=B.dist(G);if(dt>2*P){const wt=B.add(G.sub(B)._mult(P/dt)._round());this.updateDistance(B,wt),this.addCurrentVertex(wt,ne,0,0,O),B=wt}}}}addCurrentVertex(t,n,l,u,p,g=!1){const b=n.y*u-n.x,S=-n.y-n.x*u;this.addHalfVertex(t,n.x+n.y*l,n.y-n.x*l,g,!1,l,p),this.addHalfVertex(t,b,S,g,!0,-u,p)}addHalfVertex({x:t,y:n},l,u,p,g,b,S){this.layoutVertexArray.emplaceBack((t<<1)+(p?1:0),(n<<1)+(g?1:0),Math.round(63*l)+128,Math.round(63*u)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const C=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),S.primitiveLength++),g?this.e2=C:this.e1=C}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,n){this.distance+=t.dist(n),this.updateScaledDistance()}}ni(Vp,"LineBucket",{omit:["layers","patternFeatures"]});const Tv=new Ei({"line-cap":new at(yt.layout_line["line-cap"]),"line-join":new at(yt.layout_line["line-join"]),"line-miter-limit":new Ze(yt.layout_line["line-miter-limit"]),"line-round-limit":new Ze(yt.layout_line["line-round-limit"]),"line-sort-key":new at(yt.layout_line["line-sort-key"])});var ig={paint:new Ei({"line-opacity":new at(yt.paint_line["line-opacity"]),"line-color":new at(yt.paint_line["line-color"]),"line-translate":new Ze(yt.paint_line["line-translate"]),"line-translate-anchor":new Ze(yt.paint_line["line-translate-anchor"]),"line-width":new at(yt.paint_line["line-width"]),"line-gap-width":new at(yt.paint_line["line-gap-width"]),"line-offset":new at(yt.paint_line["line-offset"]),"line-blur":new at(yt.paint_line["line-blur"]),"line-dasharray":new at(yt.paint_line["line-dasharray"]),"line-pattern":new at(yt.paint_line["line-pattern"]),"line-gradient":new mi(yt.paint_line["line-gradient"]),"line-trim-offset":new Ze(yt.paint_line["line-trim-offset"])}),layout:Tv};const ng=new class extends at{possiblyEvaluate(i,t){return t=new Ge(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(i,t)}evaluate(i,t,n,l){return t=Fn({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(i,t,n,l)}}(ig.paint.properties["line-width"].specification);function rg(i,t){return t>0?t+2*i:i}ng.useIntegerZoom=!0;const Ev=ci([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Bl=ci([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Sv=ci([{name:"a_projected_pos",components:4,type:"Float32"}],4);ci([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Cv=ci([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),sd=ci([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);ci([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hn=ci([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Mv=ci([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ci([{name:"triangle",components:3,type:"Uint16"}]),ci([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ci([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ci([{type:"Float32",name:"offsetX"}]),ci([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var hr=24;const yr=128;function Bm(i,t){const{expression:n}=t;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new Ge(i+1))};if(n.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:u}=n;let p=0;for(;p<l.length&&l[p]<=i;)p++;p=Math.max(0,p-1);let g=p;for(;g<l.length&&l[g]<i+1;)g++;g=Math.min(l.length-1,g);const b=l[p],S=l[g];return n.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:S,interpolationType:u}:{kind:"camera",minZoom:b,maxZoom:S,minSize:n.evaluate(new Ge(b)),maxSize:n.evaluate(new Ge(S)),interpolationType:u}}}function Fl(i,{uSize:t,uSizeT:n},{lowerSize:l,upperSize:u}){return i.kind==="source"?l/yr:i.kind==="composite"?Ji(l/yr,u/yr,n):t}function nh(i,t){let n=0,l=0;if(i.kind==="constant")l=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:u,minZoom:p,maxZoom:g}=i,b=u?fi(oa.interpolationFactor(u,t,p,g),0,1):0;i.kind==="camera"?l=Ji(i.minSize,i.maxSize,b):n=b}return{uSizeT:n,uSize:l}}var Av=Object.freeze({__proto__:null,getSizeData:Bm,evaluateSizeForFeature:Fl,evaluateSizeForZoom:nh,SIZE_PACK_FACTOR:yr});function Iv(i,t,n){return i.sections.forEach(l=>{l.text=function(u,p,g){const b=p.layout.get("text-transform").evaluate(g,{});return b==="uppercase"?u=u.toLocaleUpperCase():b==="lowercase"&&(u=u.toLocaleLowerCase()),Je.applyArabicShaping&&(u=Je.applyArabicShaping(u)),u}(l.text,t,n)}),i}const hf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function kv(i){return i==="︶"||i==="﹈"||i==="︸"||i==="﹄"||i==="﹂"||i==="︾"||i==="︼"||i==="︺"||i==="︘"||i==="﹀"||i==="︐"||i==="︓"||i==="︔"||i==="｀"||i==="￣"||i==="︑"||i==="︒"}function Fm(i){return i==="︵"||i==="﹇"||i==="︷"||i==="﹃"||i==="﹁"||i==="︽"||i==="︻"||i==="︹"||i==="︗"||i==="︿"}var ff=Jn,mc=function(i,t,n,l,u){var p,g,b=8*u-l-1,S=(1<<b)-1,C=S>>1,P=-7,O=n?u-1:0,B=n?-1:1,$=i[t+O];for(O+=B,p=$&(1<<-P)-1,$>>=-P,P+=b;P>0;p=256*p+i[t+O],O+=B,P-=8);for(g=p&(1<<-P)-1,p>>=-P,P+=l;P>0;g=256*g+i[t+O],O+=B,P-=8);if(p===0)p=1-C;else{if(p===S)return g?NaN:1/0*($?-1:1);g+=Math.pow(2,l),p-=C}return($?-1:1)*g*Math.pow(2,p-l)},Nm=function(i,t,n,l,u,p){var g,b,S,C=8*p-u-1,P=(1<<C)-1,O=P>>1,B=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=l?0:p-1,G=l?1:-1,Y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,g=P):(g=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-g))<1&&(g--,S*=2),(t+=g+O>=1?B/S:B*Math.pow(2,1-O))*S>=2&&(g++,S/=2),g+O>=P?(b=0,g=P):g+O>=1?(b=(t*S-1)*Math.pow(2,u),g+=O):(b=t*Math.pow(2,O-1)*Math.pow(2,u),g=0));u>=8;i[n+$]=255&b,$+=G,b/=256,u-=8);for(g=g<<u|b,C+=u;C>0;i[n+$]=255&g,$+=G,g/=256,C-=8);i[n+$-G]|=128*Y};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Jn(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Jn.Varint=0,Jn.Fixed64=1,Jn.Bytes=2,Jn.Fixed32=5;var qr=4294967296,os=1/qr,Um=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Vc(i){return i.type===Jn.Bytes?i.readVarint()+i.pos:i.pos+1}function rh(i,t,n){return n?4294967296*t+(i>>>0):4294967296*(t>>>0)+(i>>>0)}function sg(i,t,n){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(l);for(var u=n.pos-1;u>=i;u--)n.buf[u+l]=n.buf[u]}function Dv(i,t){for(var n=0;n<i.length;n++)t.writeVarint(i[n])}function Pv(i,t){for(var n=0;n<i.length;n++)t.writeSVarint(i[n])}function Lv(i,t){for(var n=0;n<i.length;n++)t.writeFloat(i[n])}function og(i,t){for(var n=0;n<i.length;n++)t.writeDouble(i[n])}function pf(i,t){for(var n=0;n<i.length;n++)t.writeBoolean(i[n])}function jm(i,t){for(var n=0;n<i.length;n++)t.writeFixed32(i[n])}function Rv(i,t){for(var n=0;n<i.length;n++)t.writeSFixed32(i[n])}function ag(i,t){for(var n=0;n<i.length;n++)t.writeFixed64(i[n])}function $p(i,t){for(var n=0;n<i.length;n++)t.writeSFixed64(i[n])}function Bo(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+16777216*i[t+3]}function Nl(i,t,n){i[n]=t,i[n+1]=t>>>8,i[n+2]=t>>>16,i[n+3]=t>>>24}function lg(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+(i[t+3]<<24)}function Ov(i,t,n){t.glyphs=[],i===1&&n.readMessage(zv,t)}function zv(i,t,n){if(i===3){const{id:l,bitmap:u,width:p,height:g,left:b,top:S,advance:C}=n.readMessage(Bv,{});t.glyphs.push({id:l,bitmap:new jc({width:p+6,height:g+6},u),metrics:{width:p,height:g,left:b,top:S,advance:C}})}else i===4?t.ascender=n.readSVarint():i===5&&(t.descender=n.readSVarint())}function Bv(i,t,n){i===1?t.id=n.readVarint():i===2?t.bitmap=n.readBytes():i===3?t.width=n.readVarint():i===4?t.height=n.readVarint():i===5?t.left=n.readSVarint():i===6?t.top=n.readSVarint():i===7&&(t.advance=n.readVarint())}function Vm(i){let t=0,n=0;for(const g of i)t+=g.w*g.h,n=Math.max(n,g.w);i.sort((g,b)=>b.h-g.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let u=0,p=0;for(const g of i)for(let b=l.length-1;b>=0;b--){const S=l[b];if(!(g.w>S.w||g.h>S.h)){if(g.x=S.x,g.y=S.y,p=Math.max(p,g.y+g.h),u=Math.max(u,g.x+g.w),g.w===S.w&&g.h===S.h){const C=l.pop();b<l.length&&(l[b]=C)}else g.h===S.h?(S.x+=g.w,S.w-=g.w):g.w===S.w?(S.y+=g.h,S.h-=g.h):(l.push({x:S.x+g.w,y:S.y,w:S.w-g.w,h:g.h}),S.y+=g.h,S.h-=g.h);break}}return{w:u,h:p,fill:t/(u*p)||0}}Jn.prototype={destroy:function(){this.buf=null},readFields:function(i,t,n){for(n=n||this.length;this.pos<n;){var l=this.readVarint(),u=l>>3,p=this.pos;this.type=7&l,i(u,t,this),this.pos===p&&this.skip(l)}return t},readMessage:function(i,t){return this.readFields(i,t,this.readVarint()+this.pos)},readFixed32:function(){var i=Bo(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=lg(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Bo(this.buf,this.pos)+Bo(this.buf,this.pos+4)*qr;return this.pos+=8,i},readSFixed64:function(){var i=Bo(this.buf,this.pos)+lg(this.buf,this.pos+4)*qr;return this.pos+=8,i},readFloat:function(){var i=mc(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=mc(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var t,n,l=this.buf;return t=127&(n=l[this.pos++]),n<128?t:(t|=(127&(n=l[this.pos++]))<<7,n<128?t:(t|=(127&(n=l[this.pos++]))<<14,n<128?t:(t|=(127&(n=l[this.pos++]))<<21,n<128?t:function(u,p,g){var b,S,C=g.buf;if(b=(112&(S=C[g.pos++]))>>4,S<128||(b|=(127&(S=C[g.pos++]))<<3,S<128)||(b|=(127&(S=C[g.pos++]))<<10,S<128)||(b|=(127&(S=C[g.pos++]))<<17,S<128)||(b|=(127&(S=C[g.pos++]))<<24,S<128)||(b|=(1&(S=C[g.pos++]))<<31,S<128))return rh(u,b,p);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=l[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,t=this.pos;return this.pos=i,i-t>=12&&Um?function(n,l,u){return Um.decode(n.subarray(l,u))}(this.buf,t,i):function(n,l,u){for(var p="",g=l;g<u;){var b,S,C,P=n[g],O=null,B=P>239?4:P>223?3:P>191?2:1;if(g+B>u)break;B===1?P<128&&(O=P):B===2?(192&(b=n[g+1]))==128&&(O=(31&P)<<6|63&b)<=127&&(O=null):B===3?(S=n[g+2],(192&(b=n[g+1]))==128&&(192&S)==128&&((O=(15&P)<<12|(63&b)<<6|63&S)<=2047||O>=55296&&O<=57343)&&(O=null)):B===4&&(S=n[g+2],C=n[g+3],(192&(b=n[g+1]))==128&&(192&S)==128&&(192&C)==128&&((O=(15&P)<<18|(63&b)<<12|(63&S)<<6|63&C)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,B=1):O>65535&&(O-=65536,p+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),p+=String.fromCharCode(O),g+=B}return p}(this.buf,t,i)},readBytes:function(){var i=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,i);return this.pos=i,t},readPackedVarint:function(i,t){if(this.type!==Jn.Bytes)return i.push(this.readVarint(t));var n=Vc(this);for(i=i||[];this.pos<n;)i.push(this.readVarint(t));return i},readPackedSVarint:function(i){if(this.type!==Jn.Bytes)return i.push(this.readSVarint());var t=Vc(this);for(i=i||[];this.pos<t;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Jn.Bytes)return i.push(this.readBoolean());var t=Vc(this);for(i=i||[];this.pos<t;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Jn.Bytes)return i.push(this.readFloat());var t=Vc(this);for(i=i||[];this.pos<t;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Jn.Bytes)return i.push(this.readDouble());var t=Vc(this);for(i=i||[];this.pos<t;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Jn.Bytes)return i.push(this.readFixed32());var t=Vc(this);for(i=i||[];this.pos<t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Jn.Bytes)return i.push(this.readSFixed32());var t=Vc(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Jn.Bytes)return i.push(this.readFixed64());var t=Vc(this);for(i=i||[];this.pos<t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Jn.Bytes)return i.push(this.readSFixed64());var t=Vc(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed64());return i},skip:function(i){var t=7&i;if(t===Jn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Jn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Jn.Fixed32)this.pos+=4;else{if(t!==Jn.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(i,t){this.writeVarint(i<<3|t)},realloc:function(i){for(var t=this.length||16;t<this.pos+i;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Nl(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Nl(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Nl(this.buf,-1&i,this.pos),Nl(this.buf,Math.floor(i*os),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Nl(this.buf,-1&i,this.pos),Nl(this.buf,Math.floor(i*os),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(t,n){var l,u;if(t>=0?(l=t%4294967296|0,u=t/4294967296|0):(u=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,u=u+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(p,g,b){b.buf[b.pos++]=127&p|128,p>>>=7,b.buf[b.pos++]=127&p|128,p>>>=7,b.buf[b.pos++]=127&p|128,p>>>=7,b.buf[b.pos++]=127&p|128,b.buf[b.pos]=127&(p>>>=7)}(l,0,n),function(p,g){var b=(7&p)<<4;g.buf[g.pos++]|=b|((p>>>=3)?128:0),p&&(g.buf[g.pos++]=127&p|((p>>>=7)?128:0),p&&(g.buf[g.pos++]=127&p|((p>>>=7)?128:0),p&&(g.buf[g.pos++]=127&p|((p>>>=7)?128:0),p&&(g.buf[g.pos++]=127&p|((p>>>=7)?128:0),p&&(g.buf[g.pos++]=127&p)))))}(u,n)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var t=this.pos;this.pos=function(l,u,p){for(var g,b,S=0;S<u.length;S++){if((g=u.charCodeAt(S))>55295&&g<57344){if(!b){g>56319||S+1===u.length?(l[p++]=239,l[p++]=191,l[p++]=189):b=g;continue}if(g<56320){l[p++]=239,l[p++]=191,l[p++]=189,b=g;continue}g=b-55296<<10|g-56320|65536,b=null}else b&&(l[p++]=239,l[p++]=191,l[p++]=189,b=null);g<128?l[p++]=g:(g<2048?l[p++]=g>>6|192:(g<65536?l[p++]=g>>12|224:(l[p++]=g>>18|240,l[p++]=g>>12&63|128),l[p++]=g>>6&63|128),l[p++]=63&g|128)}return p}(this.buf,i,this.pos);var n=this.pos-t;n>=128&&sg(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(i){this.realloc(4),Nm(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Nm(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var t=i.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=i[n]},writeRawMessage:function(i,t){this.pos++;var n=this.pos;i(t,this);var l=this.pos-n;l>=128&&sg(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeMessage:function(i,t,n){this.writeTag(i,Jn.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(i,t){t.length&&this.writeMessage(i,Dv,t)},writePackedSVarint:function(i,t){t.length&&this.writeMessage(i,Pv,t)},writePackedBoolean:function(i,t){t.length&&this.writeMessage(i,pf,t)},writePackedFloat:function(i,t){t.length&&this.writeMessage(i,Lv,t)},writePackedDouble:function(i,t){t.length&&this.writeMessage(i,og,t)},writePackedFixed32:function(i,t){t.length&&this.writeMessage(i,jm,t)},writePackedSFixed32:function(i,t){t.length&&this.writeMessage(i,Rv,t)},writePackedFixed64:function(i,t){t.length&&this.writeMessage(i,ag,t)},writePackedSFixed64:function(i,t){t.length&&this.writeMessage(i,$p,t)},writeBytesField:function(i,t){this.writeTag(i,Jn.Bytes),this.writeBytes(t)},writeFixed32Field:function(i,t){this.writeTag(i,Jn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(i,t){this.writeTag(i,Jn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(i,t){this.writeTag(i,Jn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(i,t){this.writeTag(i,Jn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(i,t){this.writeTag(i,Jn.Varint),this.writeVarint(t)},writeSVarintField:function(i,t){this.writeTag(i,Jn.Varint),this.writeSVarint(t)},writeStringField:function(i,t){this.writeTag(i,Jn.Bytes),this.writeString(t)},writeFloatField:function(i,t){this.writeTag(i,Jn.Fixed32),this.writeFloat(t)},writeDoubleField:function(i,t){this.writeTag(i,Jn.Fixed64),this.writeDouble(t)},writeBooleanField:function(i,t){this.writeVarintField(i,Boolean(t))}};class Gp{constructor(t,{pixelRatio:n,version:l,stretchX:u,stretchY:p,content:g}){this.paddedRect=t,this.pixelRatio=n,this.stretchX=u,this.stretchY=p,this.content=g,this.version=l}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class _c{constructor(t,n){const l={},u={};this.haveRenderCallbacks=[];const p=[];this.addImages(t,l,p),this.addImages(n,u,p);const{w:g,h:b}=Vm(p),S=new ha({width:g||1,height:b||1});for(const C in t){const P=t[C],O=l[C].paddedRect;ha.copy(P.data,S,{x:0,y:0},{x:O.x+1,y:O.y+1},P.data)}for(const C in n){const P=n[C],O=u[C].paddedRect,B=O.x+1,$=O.y+1,G=P.data.width,Y=P.data.height;ha.copy(P.data,S,{x:0,y:0},{x:B,y:$},P.data),ha.copy(P.data,S,{x:0,y:Y-1},{x:B,y:$-1},{width:G,height:1}),ha.copy(P.data,S,{x:0,y:0},{x:B,y:$+Y},{width:G,height:1}),ha.copy(P.data,S,{x:G-1,y:0},{x:B-1,y:$},{width:1,height:Y}),ha.copy(P.data,S,{x:0,y:0},{x:B+G,y:$},{width:1,height:Y})}this.image=S,this.iconPositions=l,this.patternPositions=u}addImages(t,n,l){for(const u in t){const p=t[u],g={x:0,y:0,w:p.data.width+2,h:p.data.height+2};l.push(g),n[u]=new Gp(g,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(t,n){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(l=>t.hasImage(l)),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in t.updatedImages)this.patchUpdatedImage(this.iconPositions[l],t.getImage(l),n),this.patchUpdatedImage(this.patternPositions[l],t.getImage(l),n)}patchUpdatedImage(t,n,l){if(!t||!n||t.version===n.version)return;t.version=n.version;const[u,p]=t.tl;l.update(n.data,void 0,{x:u,y:p})}}ni(Gp,"ImagePosition"),ni(_c,"ImageAtlas");const Hi={horizontal:1,vertical:2,horizontalOnly:3};class sh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,n){const l=new sh;return l.scale=t||1,l.fontStack=n,l}static forImage(t){const n=new sh;return n.imageName=t,n}}class po{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,n){const l=new po;for(let u=0;u<t.sections.length;u++){const p=t.sections[u];p.image?l.addImageSection(p):l.addTextSection(p,n)}return l}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(n,l){let u="";for(let p=0;p<n.length;p++){const g=n.charCodeAt(p+1)||null,b=n.charCodeAt(p-1)||null;u+=!l&&(g&&N(g)&&!hf[n[p+1]]||b&&N(b)&&!hf[n[p-1]])||!hf[n[p]]?n[p]:hf[n[p]]}return u}(this.text,t)}trim(){let t=0;for(let l=0;l<this.text.length&&Wp[this.text.charCodeAt(l)];l++)t++;let n=this.text.length;for(let l=this.text.length-1;l>=0&&l>=t&&Wp[this.text.charCodeAt(l)];l--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)}substring(t,n){const l=new po;return l.text=this.text.substring(t,n),l.sectionIndex=this.sectionIndex.slice(t,n),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,n)=>Math.max(t,this.sections[n].scale),0)}addTextSection(t,n){this.text+=t.text,this.sections.push(sh.forText(t.scale,t.fontStack||n));const l=this.sections.length-1;for(let u=0;u<t.text.length;++u)this.sectionIndex.push(l)}addImageSection(t){const n=t.image?t.image.name:"";if(n.length===0)return void Ce("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(sh.forImage(n)),this.sectionIndex.push(this.sections.length-1)):Ce("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qp(i,t,n,l,u,p,g,b,S,C,P,O,B,$,G){const Y=po.fromFeature(i,u);O===Hi.vertical&&Y.verticalizePunctuation(B);let ne=[];const ye=function(Ie,rt,it,xt,Gt,dt){if(!Ie)return[];const wt=[],At=function(Qt,Oi,ai,xi,ei,Ni){let wn=0;for(let vn=0;vn<Qt.length();vn++){const fn=Qt.getSection(vn);wn+=cg(Qt.getCharCode(vn),fn,xi,ei,Oi,Ni)}return wn/Math.max(1,Math.ceil(wn/ai))}(Ie,rt,it,xt,Gt,dt),Rt=Ie.text.indexOf("​")>=0;let qt=0;for(let Qt=0;Qt<Ie.length();Qt++){const Oi=Ie.getSection(Qt),ai=Ie.getCharCode(Qt);if(Wp[ai]||(qt+=cg(ai,Oi,xt,Gt,rt,dt)),Qt<Ie.length()-1){const xi=!((ft=ai)<11904||!(Wo(ft)||dp(ft)||c(ft)||Oc(ft)||mp(ft)||Gh(ft)||hp(ft)||pu(ft)||_p(ft)||Vd(ft)||pp(ft)||w(ft)||ka(ft)||Wh(ft)||qh(ft)||fp(ft)||jd(ft)||s(ft)||gp(ft)||Hh(ft)));(vr[ai]||xi||Oi.imageName)&&wt.push(ug(Qt+1,qt,At,wt,Hp(ai,Ie.getCharCode(Qt+1),xi&&Rt),!1))}}var ft;return dg(ug(Ie.length(),qt,At,wt,0,!0))}(Y,C,p,t,l,$),{processBidirectionalText:Ee,processStyledBidirectionalText:ge}=Je;if(Ee&&Y.sections.length===1){const Ie=Ee(Y.toString(),ye);for(const rt of Ie){const it=new po;it.text=rt,it.sections=Y.sections;for(let xt=0;xt<rt.length;xt++)it.sectionIndex.push(0);ne.push(it)}}else if(ge){const Ie=ge(Y.text,Y.sectionIndex,ye);for(const rt of Ie){const it=new po;it.text=rt[0],it.sectionIndex=rt[1],it.sections=Y.sections,ne.push(it)}}else ne=function(Ie,rt){const it=[],xt=Ie.text;let Gt=0;for(const dt of rt)it.push(Ie.substring(Gt,dt)),Gt=dt;return Gt<xt.length&&it.push(Ie.substring(Gt,xt.length)),it}(Y,ye);const be=[],Pe={positionedLines:be,text:Y.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:O,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ie,rt,it,xt,Gt,dt,wt,At,Rt,qt,ft,Qt){let Oi=0,ai=0,xi=0;const ei=At==="right"?1:At==="left"?0:.5;let Ni=!1;for(const Ki of Gt){const Tn=Ki.getSections();for(const fr of Tn){if(fr.imageName)continue;const Ar=rt[fr.fontStack];if(Ar&&(Ni=Ar.ascender!==void 0&&Ar.descender!==void 0,!Ni))break}if(!Ni)break}let wn=0;for(const Ki of Gt){Ki.trim();const Tn=Ki.getMaxScale(),fr=(Tn-1)*hr,Ar={positionedGlyphs:[],lineOffset:0};Ie.positionedLines[wn]=Ar;const wr=Ar.positionedGlyphs;let Ir=0;if(!Ki.length()){ai+=dt,++wn;continue}let Pr=0,ls=0;for(let or=0;or<Ki.length();or++){const Rs=Ki.getSection(or),As=Ki.getSectionIndex(or),Gn=Ki.getCharCode(or);let Wr=Rs.scale,qs=null,pr=null,gs=null,Xo=hr,_o=0;const go=!(Rt===Hi.horizontal||!ft&&!j(Gn)||ft&&(Wp[Gn]||(vn=Gn,Vh(vn)||Ya(vn)||$h(vn)||f(vn)||v(vn))));if(Rs.imageName){const ma=xt[Rs.imageName];if(!ma)continue;gs=Rs.imageName,Ie.iconsInText=Ie.iconsInText||!0,pr=ma.paddedRect;const yo=ma.displaySize;Wr=Wr*hr/Qt,qs={width:yo[0],height:yo[1],left:1,top:-3,advance:go?yo[1]:yo[0],localGlyph:!1},_o=Ni?-qs.height*Wr:Tn*hr-17-yo[1]*Wr,Xo=qs.advance;const dd=(go?yo[0]:yo[1])*Wr-hr*Tn;dd>0&&dd>Ir&&(Ir=dd)}else{const ma=it[Rs.fontStack];if(!ma)continue;ma[Gn]&&(pr=ma[Gn]);const yo=rt[Rs.fontStack];if(!yo)continue;const dd=yo.glyphs[Gn];if(!dd)continue;if(qs=dd.metrics,Xo=Gn!==8203?hr:0,Ni){const l0=yo.ascender!==void 0?Math.abs(yo.ascender):0,p1=yo.descender!==void 0?Math.abs(yo.descender):0,m1=(l0+p1)*Wr;Pr<m1&&(Pr=m1,ls=(l0-p1)/2*Wr),_o=-l0*Wr}else _o=(Tn-Wr)*hr-17}go?(Ie.verticalizable=!0,wr.push({glyph:Gn,imageName:gs,x:Oi,y:ai+_o,vertical:go,scale:Wr,localGlyph:qs.localGlyph,fontStack:Rs.fontStack,sectionIndex:As,metrics:qs,rect:pr}),Oi+=Xo*Wr+qt):(wr.push({glyph:Gn,imageName:gs,x:Oi,y:ai+_o,vertical:go,scale:Wr,localGlyph:qs.localGlyph,fontStack:Rs.fontStack,sectionIndex:As,metrics:qs,rect:pr}),Oi+=qs.advance*Wr+qt)}wr.length!==0&&(xi=Math.max(Oi-qt,xi),Ni?hg(wr,ei,Ir,ls,dt*Tn/2):hg(wr,ei,Ir,0,dt/2)),Oi=0;const mo=dt*Tn+Ir;Ar.lineOffset=Math.max(Ir,fr),ai+=mo,++wn}var vn;const fn=ai,{horizontalAlign:Vi,verticalAlign:sr}=Gm(wt);(function(Ki,Tn,fr,Ar,wr,Ir){const Pr=(Tn-fr)*wr,ls=-Ir*Ar;for(const mo of Ki)for(const or of mo.positionedGlyphs)or.x+=Pr,or.y+=ls})(Ie.positionedLines,ei,Vi,sr,xi,fn),Ie.top+=-sr*fn,Ie.bottom=Ie.top+fn,Ie.left+=-Vi*xi,Ie.right=Ie.left+xi,Ie.hasBaseline=Ni}(Pe,t,n,l,ne,g,b,S,O,C,B,G),!function(Ie){for(const rt of Ie)if(rt.positionedGlyphs.length!==0)return!1;return!0}(be)&&Pe}const Wp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},vr={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function cg(i,t,n,l,u,p){if(t.imageName){const g=l[t.imageName];return g?g.displaySize[0]*t.scale*hr/p+u:0}{const g=n[t.fontStack],b=g&&g.glyphs[i];return b?b.metrics.advance*t.scale+u:0}}function $m(i,t,n,l){const u=Math.pow(i-t,2);return l?i<t?u/2:2*u:u+Math.abs(n)*n}function Hp(i,t,n){let l=0;return i===10&&(l-=1e4),n&&(l+=150),i!==40&&i!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function ug(i,t,n,l,u,p){let g=null,b=$m(t,n,u,p);for(const S of l){const C=$m(t-S.x,n,u,p)+S.badness;C<=b&&(g=S,b=C)}return{index:i,x:t,priorBreak:g,badness:b}}function dg(i){return i?dg(i.priorBreak).concat(i.index):[]}function Gm(i){let t=.5,n=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function hg(i,t,n,l,u){if(!(t||n||l||u))return;const p=i.length-1,g=i[p],b=(g.x+g.metrics.advance*g.scale)*t;for(let S=0;S<=p;S++)i[S].x-=b,i[S].y+=n+l+u}function Fv(i,t,n){const{horizontalAlign:l,verticalAlign:u}=Gm(n),p=t[0]-i.displaySize[0]*l,g=t[1]-i.displaySize[1]*u;return{image:i,top:g,bottom:g+i.displaySize[1],left:p,right:p+i.displaySize[0]}}function fg(i,t,n,l,u,p){const g=i.image;let b;if(g.content){const ne=g.content,ye=g.pixelRatio||1;b=[ne[0]/ye,ne[1]/ye,g.displaySize[0]-ne[2]/ye,g.displaySize[1]-ne[3]/ye]}const S=t.left*p,C=t.right*p;let P,O,B,$;n==="width"||n==="both"?($=u[0]+S-l[3],O=u[0]+C+l[1]):($=u[0]+(S+C-g.displaySize[0])/2,O=$+g.displaySize[0]);const G=t.top*p,Y=t.bottom*p;return n==="height"||n==="both"?(P=u[1]+G-l[0],B=u[1]+Y+l[2]):(P=u[1]+(G+Y-g.displaySize[1])/2,B=P+g.displaySize[1]),{image:g,top:P,right:O,bottom:B,left:$,collisionPadding:b}}class $c extends Fe{constructor(t,n,l,u,p){super(t,n),this.angle=u,this.z=l,p!==void 0&&(this.segment=p)}clone(){return new $c(this.x,this.y,this.z,this.angle,this.segment)}}function pg(i,t,n,l,u){if(t.segment===void 0)return!0;let p=t,g=t.segment+1,b=0;for(;b>-n/2;){if(g--,g<0)return!1;b-=i[g].dist(p),p=i[g]}b+=i[g].dist(i[g+1]),g++;const S=[];let C=0;for(;b<n/2;){const P=i[g],O=i[g+1];if(!O)return!1;let B=i[g-1].angleTo(P)-P.angleTo(O);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:b,angleDelta:B}),C+=B;b-S[0].distance>l;)C-=S.shift().angleDelta;if(C>u)return!1;g++,b+=P.dist(O)}return!0}function mg(i){let t=0;for(let n=0;n<i.length-1;n++)t+=i[n].dist(i[n+1]);return t}function _g(i,t,n){return i?.6*t*n:0}function gg(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function Nv(i,t,n,l,u,p){const g=_g(n,u,p),b=gg(n,l)*p;let S=0;const C=mg(i)/2;for(let P=0;P<i.length-1;P++){const O=i[P],B=i[P+1],$=O.dist(B);if(S+$>C){const G=(C-S)/$,Y=Ji(O.x,B.x,G),ne=Ji(O.y,B.y,G),ye=new $c(Y,ne,0,B.angleTo(O),P);return!g||pg(i,ye,b,g,t)?ye:void 0}S+=$}}function Uv(i,t,n,l,u,p,g,b,S){const C=_g(l,p,g),P=gg(l,u),O=P*g,B=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return t-O<t/4&&(t=O+t/4),Zp(i,B?t/2*b%t:(P/2+2*p)*g*b%t,t,C,n,O,B,!1,S)}function Zp(i,t,n,l,u,p,g,b,S){const C=p/2,P=mg(i);let O=0,B=t-n,$=[];for(let G=0;G<i.length-1;G++){const Y=i[G],ne=i[G+1],ye=Y.dist(ne),Ee=ne.angleTo(Y);for(;B+n<O+ye;){B+=n;const ge=(B-O)/ye,be=Ji(Y.x,ne.x,ge),Pe=Ji(Y.y,ne.y,ge);if(be>=0&&be<S&&Pe>=0&&Pe<S&&B-C>=0&&B+C<=P){const Ie=new $c(be,Pe,0,Ee,G);Ie._round(),l&&!pg(i,Ie,p,l,u)||$.push(Ie)}}O+=ye}return b||$.length||g||($=Zp(i,O/2,n,l,u,p,g,!0,S)),$}function yg(i,t,n,l,u){const p=[];for(let g=0;g<i.length;g++){const b=i[g];let S;for(let C=0;C<b.length-1;C++){let P=b[C],O=b[C+1];P.x<t&&O.x<t||(P.x<t?P=new Fe(t,P.y+(t-P.x)/(O.x-P.x)*(O.y-P.y))._round():O.x<t&&(O=new Fe(t,P.y+(t-P.x)/(O.x-P.x)*(O.y-P.y))._round()),P.y<n&&O.y<n||(P.y<n?P=new Fe(P.x+(n-P.y)/(O.y-P.y)*(O.x-P.x),n)._round():O.y<n&&(O=new Fe(P.x+(n-P.y)/(O.y-P.y)*(O.x-P.x),n)._round()),P.x>=l&&O.x>=l||(P.x>=l?P=new Fe(l,P.y+(l-P.x)/(O.x-P.x)*(O.y-P.y))._round():O.x>=l&&(O=new Fe(l,P.y+(l-P.x)/(O.x-P.x)*(O.y-P.y))._round()),P.y>=u&&O.y>=u||(P.y>=u?P=new Fe(P.x+(u-P.y)/(O.y-P.y)*(O.x-P.x),u)._round():O.y>=u&&(O=new Fe(P.x+(u-P.y)/(O.y-P.y)*(O.x-P.x),u)._round()),S&&P.equals(S[S.length-1])||(S=[P],p.push(S)),S.push(O)))))}}return p}ni($c,"Anchor");const od=1e20;function vg(i,t,n,l,u,p,g,b,S){for(let C=t;C<t+l;C++)xg(i,n*p+C,p,u,g,b,S);for(let C=n;C<n+u;C++)xg(i,C*p+t,1,l,g,b,S)}function xg(i,t,n,l,u,p,g){p[0]=0,g[0]=-od,g[1]=od,u[0]=i[t];for(let b=1,S=0,C=0;b<l;b++){u[b]=i[t+b*n];const P=b*b;do{const O=p[S];C=(u[b]-u[O]+P-O*O)/(b-O)/2}while(C<=g[S]&&--S>-1);S++,p[S]=b,g[S]=C,g[S+1]=od}for(let b=0,S=0;b<l;b++){for(;g[S+1]<b;)S++;const C=p[S],P=b-C;i[t+b*n]=u[C]+P*P}}const qm={none:0,ideographs:1,all:2};class as{constructor(t,n,l){this.requestManager=t,this.localGlyphMode=n,this.localFontFamily=l,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,n){const l=[];for(const u in t)for(const p of t[u])l.push({stack:u,id:p});tn(l,({stack:u,id:p},g)=>{let b=this.entries[u];b||(b=this.entries[u]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=b.glyphs[p];if(S!==void 0)return void g(null,{stack:u,id:p,glyph:S});if(S=this._tinySDF(b,u,p),S)return b.glyphs[p]=S,void g(null,{stack:u,id:p,glyph:S});const C=Math.floor(p/256);if(256*C>65535)return void g(new Error("glyphs > 65535 not supported"));if(b.ranges[C])return void g(null,{stack:u,id:p,glyph:S});let P=b.requests[C];P||(P=b.requests[C]=[],as.loadGlyphRange(u,C,this.url,this.requestManager,(O,B)=>{if(B){b.ascender=B.ascender,b.descender=B.descender;for(const $ in B.glyphs)this._doesCharSupportLocalGlyph(+$)||(b.glyphs[+$]=B.glyphs[+$]);b.ranges[C]=!0}for(const $ of P)$(O,B);delete b.requests[C]})),P.push((O,B)=>{O?g(O):B&&g(null,{stack:u,id:p,glyph:B.glyphs[p]||null})})},(u,p)=>{if(u)n(u);else if(p){const g={};for(const{stack:b,id:S,glyph:C}of p)g[b]===void 0&&(g[b]={}),g[b].glyphs===void 0&&(g[b].glyphs={}),g[b].glyphs[S]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics},g[b].ascender=this.entries[b].ascender,g[b].descender=this.entries[b].descender;n(null,g)}})}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==qm.none&&(this.localGlyphMode===qm.all?!!this.localFontFamily:!!this.localFontFamily&&(Vd(t)||Zh(t)||ka(t)||jd(t)||pu(t)))}_tinySDF(t,n,l){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(l))return;let p=t.tinySDF;if(!p){let Y="400";/bold/i.test(n)?Y="900":/medium/i.test(n)?Y="500":/light/i.test(n)&&(Y="200"),p=t.tinySDF=new as.TinySDF({fontFamily:u,fontWeight:Y,fontSize:48,buffer:6,radius:16}),p.fontWeight=Y}if(this.localGlyphs[p.fontWeight][l])return this.localGlyphs[p.fontWeight][l];const g=String.fromCharCode(l),{data:b,width:S,height:C,glyphWidth:P,glyphHeight:O,glyphLeft:B,glyphTop:$,glyphAdvance:G}=p.draw(g);return this.localGlyphs[p.fontWeight][l]={id:l,bitmap:new jc({width:S,height:C},b),metrics:{width:P/2,height:O/2,left:B/2,top:$/2-27,advance:G/2,localGlyph:!0}}}}function Yo(i,t,n,l){const u=[],p=i.image,g=p.pixelRatio,b=p.paddedRect.w-2,S=p.paddedRect.h-2,C=i.right-i.left,P=i.bottom-i.top,O=p.stretchX||[[0,b]],B=p.stretchY||[[0,S]],$=(dt,wt)=>dt+wt[1]-wt[0],G=O.reduce($,0),Y=B.reduce($,0),ne=b-G,ye=S-Y;let Ee=0,ge=G,be=0,Pe=Y,Ie=0,rt=ne,it=0,xt=ye;if(p.content&&l){const dt=p.content;Ee=Yp(O,0,dt[0]),be=Yp(B,0,dt[1]),ge=Yp(O,dt[0],dt[2]),Pe=Yp(B,dt[1],dt[3]),Ie=dt[0]-Ee,it=dt[1]-be,rt=dt[2]-dt[0]-ge,xt=dt[3]-dt[1]-Pe}const Gt=(dt,wt,At,Rt)=>{const qt=Xp(dt.stretch-Ee,ge,C,i.left),ft=mf(dt.fixed-Ie,rt,dt.stretch,G),Qt=Xp(wt.stretch-be,Pe,P,i.top),Oi=mf(wt.fixed-it,xt,wt.stretch,Y),ai=Xp(At.stretch-Ee,ge,C,i.left),xi=mf(At.fixed-Ie,rt,At.stretch,G),ei=Xp(Rt.stretch-be,Pe,P,i.top),Ni=mf(Rt.fixed-it,xt,Rt.stretch,Y),wn=new Fe(qt,Qt),vn=new Fe(ai,Qt),fn=new Fe(ai,ei),Vi=new Fe(qt,ei),sr=new Fe(ft/g,Oi/g),Ki=new Fe(xi/g,Ni/g),Tn=t*Math.PI/180;if(Tn){const wr=Math.sin(Tn),Ir=Math.cos(Tn),Pr=[Ir,-wr,wr,Ir];wn._matMult(Pr),vn._matMult(Pr),Vi._matMult(Pr),fn._matMult(Pr)}const fr=dt.stretch+dt.fixed,Ar=wt.stretch+wt.fixed;return{tl:wn,tr:vn,bl:Vi,br:fn,tex:{x:p.paddedRect.x+1+fr,y:p.paddedRect.y+1+Ar,w:At.stretch+At.fixed-fr,h:Rt.stretch+Rt.fixed-Ar},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:sr,pixelOffsetBR:Ki,minFontScaleX:rt/g/C,minFontScaleY:xt/g/P,isSDF:n}};if(l&&(p.stretchX||p.stretchY)){const dt=bg(O,ne,G),wt=bg(B,ye,Y);for(let At=0;At<dt.length-1;At++){const Rt=dt[At],qt=dt[At+1];for(let ft=0;ft<wt.length-1;ft++)u.push(Gt(Rt,wt[ft],qt,wt[ft+1]))}}else u.push(Gt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:S+1}));return u}function Yp(i,t,n){let l=0;for(const u of i)l+=Math.max(t,Math.min(n,u[1]))-Math.max(t,Math.min(n,u[0]));return l}function bg(i,t,n){const l=[{fixed:-1,stretch:0}];for(const[u,p]of i){const g=l[l.length-1];l.push({fixed:u-g.stretch,stretch:g.stretch}),l.push({fixed:u-g.stretch,stretch:g.stretch+(p-u)})}return l.push({fixed:t+1,stretch:n}),l}function Xp(i,t,n,l){return i/t*n+l}function mf(i,t,n,l){return i-t*n/l}function jv(i,t,n,l){const u=t+i.positionedLines[l].lineOffset;return l===0?n+u/2:n+(u+(t+i.positionedLines[l-1].lineOffset))/2}as.loadGlyphRange=function(i,t,n,l,u){const p=256*t,g=p+255,b=l.transformRequest(l.normalizeGlyphsURL(n).replace("{fontstack}",i).replace("{range}",`${p}-${g}`),nr.Glyphs);Ys(b,(S,C)=>{if(S)u(S);else if(C){const P={},O=function(B){return new ff(B).readFields(Ov,{})}(C);for(const B of O.glyphs)P[B.id]=B;u(null,{glyphs:P,ascender:O.ascender,descender:O.descender})}})},as.TinySDF=class{constructor({fontSize:i=24,buffer:t=3,radius:n=8,cutoff:l=.25,fontFamily:u="sans-serif",fontWeight:p="normal",fontStyle:g="normal"}={}){this.buffer=t,this.cutoff=l,this.radius=n;const b=this.size=i+4*t,S=this._createCanvas(b),C=this.ctx=S.getContext("2d",{willReadFrequently:!0});C.font=`${g} ${p} ${i}px ${u}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(i){const t=document.createElement("canvas");return t.width=t.height=i,t}draw(i){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:l,actualBoundingBoxLeft:u,actualBoundingBoxRight:p}=this.ctx.measureText(i),g=Math.ceil(n),b=Math.min(this.size-this.buffer,Math.ceil(p-u)),S=Math.min(this.size-this.buffer,g+Math.ceil(l)),C=b+2*this.buffer,P=S+2*this.buffer,O=Math.max(C*P,0),B=new Uint8ClampedArray(O),$={data:B,width:C,height:P,glyphWidth:b,glyphHeight:S,glyphTop:g,glyphLeft:0,glyphAdvance:t};if(b===0||S===0)return $;const{ctx:G,buffer:Y,gridInner:ne,gridOuter:ye}=this;G.clearRect(Y,Y,b,S),G.fillText(i,Y,Y+g);const Ee=G.getImageData(Y,Y,b,S);ye.fill(od,0,O),ne.fill(0,0,O);for(let ge=0;ge<S;ge++)for(let be=0;be<b;be++){const Pe=Ee.data[4*(ge*b+be)+3]/255;if(Pe===0)continue;const Ie=(ge+Y)*C+be+Y;if(Pe===1)ye[Ie]=0,ne[Ie]=od;else{const rt=.5-Pe;ye[Ie]=rt>0?rt*rt:0,ne[Ie]=rt<0?rt*rt:0}}vg(ye,0,0,C,P,C,this.f,this.v,this.z),vg(ne,Y,Y,b,S,C,this.f,this.v,this.z);for(let ge=0;ge<O;ge++){const be=Math.sqrt(ye[ge])-Math.sqrt(ne[ge]);B[ge]=Math.round(255-255*(be/this.radius+this.cutoff))}return $}};class Vv{constructor(t=[],n=$v){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:l}=this,u=n[t];for(;t>0;){const p=t-1>>1,g=n[p];if(l(u,g)>=0)break;n[t]=g,t=p}n[t]=u}_down(t){const{data:n,compare:l}=this,u=this.length>>1,p=n[t];for(;t<u;){let g=1+(t<<1),b=n[g];const S=g+1;if(S<this.length&&l(n[S],b)<0&&(g=S,b=n[S]),l(b,p)>=0)break;n[t]=b,t=g}n[t]=p}}function $v(i,t){return i<t?-1:i>t?1:0}function wg(i,t=1,n=!1){let l=1/0,u=1/0,p=-1/0,g=-1/0;const b=i[0];for(let $=0;$<b.length;$++){const G=b[$];(!$||G.x<l)&&(l=G.x),(!$||G.y<u)&&(u=G.y),(!$||G.x>p)&&(p=G.x),(!$||G.y>g)&&(g=G.y)}const S=Math.min(p-l,g-u);let C=S/2;const P=new Vv([],Gv);if(S===0)return new Fe(l,u);for(let $=l;$<p;$+=S)for(let G=u;G<g;G+=S)P.push(new oh($+C,G+C,C,i));let O=function($){let G=0,Y=0,ne=0;const ye=$[0];for(let Ee=0,ge=ye.length,be=ge-1;Ee<ge;be=Ee++){const Pe=ye[Ee],Ie=ye[be],rt=Pe.x*Ie.y-Ie.x*Pe.y;Y+=(Pe.x+Ie.x)*rt,ne+=(Pe.y+Ie.y)*rt,G+=3*rt}return new oh(Y/G,ne/G,0,$)}(i),B=P.length;for(;P.length;){const $=P.pop();($.d>O.d||!O.d)&&(O=$,n&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,B)),$.max-O.d<=t||(C=$.h/2,P.push(new oh($.p.x-C,$.p.y-C,C,i)),P.push(new oh($.p.x+C,$.p.y-C,C,i)),P.push(new oh($.p.x-C,$.p.y+C,C,i)),P.push(new oh($.p.x+C,$.p.y+C,C,i)),B+=4)}return n&&(console.log(`num probes: ${B}`),console.log(`best distance: ${O.d}`)),O.p}function Gv(i,t){return t.max-i.max}function oh(i,t,n,l){this.p=new Fe(i,t),this.h=n,this.d=function(u,p){let g=!1,b=1/0;for(let S=0;S<p.length;S++){const C=p[S];for(let P=0,O=C.length,B=O-1;P<O;B=P++){const $=C[P],G=C[B];$.y>u.y!=G.y>u.y&&u.x<(G.x-$.x)*(u.y-$.y)/(G.y-$.y)+$.x&&(g=!g),b=Math.min(b,M_(u,$,G))}}return(g?1:-1)*Math.sqrt(b)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}const Wm=Number.POSITIVE_INFINITY,Tg=Math.sqrt(2);function Hm(i,[t,n]){let l=0,u=0;if(n===Wm){t<0&&(t=0);const p=t/Tg;switch(i){case"top-right":case"top-left":u=p-7;break;case"bottom-right":case"bottom-left":u=7-p;break;case"bottom":u=7-t;break;case"top":u=t-7}switch(i){case"top-right":case"bottom-right":l=-p;break;case"top-left":case"bottom-left":l=p;break;case"left":l=t;break;case"right":l=-t}}else{switch(t=Math.abs(t),n=Math.abs(n),i){case"top-right":case"top-left":case"top":u=n-7;break;case"bottom-right":case"bottom-left":case"bottom":u=7-n}switch(i){case"top-right":case"bottom-right":case"right":l=-t;break;case"top-left":case"bottom-left":case"left":l=t}}return[l,u]}function qv(i,t,n,l,u,p,g,b,S,C){i.createArrays(),i.tilePixelRatio=Pi/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const P=i.layers[0].layout,O=i.layers[0]._unevaluatedLayout._values,B={};if(i.textSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ne}=i.textSizeData;B.compositeTextSizes=[O["text-size"].possiblyEvaluate(new Ge(Y),b),O["text-size"].possiblyEvaluate(new Ge(ne),b)]}if(i.iconSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ne}=i.iconSizeData;B.compositeIconSizes=[O["icon-size"].possiblyEvaluate(new Ge(Y),b),O["icon-size"].possiblyEvaluate(new Ge(ne),b)]}B.layoutTextSize=O["text-size"].possiblyEvaluate(new Ge(S+1),b),B.layoutIconSize=O["icon-size"].possiblyEvaluate(new Ge(S+1),b),B.textMaxSize=O["text-size"].possiblyEvaluate(new Ge(18),b);const $=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point",G=P.get("text-size");for(const Y of i.features){const ne=P.get("text-font").evaluate(Y,{},b).join(","),ye=G.evaluate(Y,{},b),Ee=B.layoutTextSize.evaluate(Y,{},b),ge=(B.layoutIconSize.evaluate(Y,{},b),{horizontal:{},vertical:void 0}),be=Y.text;let Pe,Ie=[0,0];if(be){const xt=be.toString(),Gt=P.get("text-letter-spacing").evaluate(Y,{},b)*hr,dt=P.get("text-line-height").evaluate(Y,{},b)*hr,wt=k(xt)?Gt:0,At=P.get("text-anchor").evaluate(Y,{},b),Rt=P.get("text-variable-anchor");if(!Rt){const ai=P.get("text-radial-offset").evaluate(Y,{},b);Ie=ai?Hm(At,[ai*hr,Wm]):P.get("text-offset").evaluate(Y,{},b).map(xi=>xi*hr)}let qt=$?"center":P.get("text-justify").evaluate(Y,{},b);const ft=P.get("symbol-placement")==="point",Qt=ft?P.get("text-max-width").evaluate(Y,{},b)*hr:1/0,Oi=ai=>{i.allowVerticalPlacement&&M(xt)&&(ge.vertical=qp(be,t,n,u,ne,Qt,dt,At,ai,wt,Ie,Hi.vertical,!0,Ee,ye))};if(!$&&Rt){const ai=qt==="auto"?Rt.map(ei=>Zm(ei)):[qt];let xi=!1;for(let ei=0;ei<ai.length;ei++){const Ni=ai[ei];if(!ge.horizontal[Ni])if(xi)ge.horizontal[Ni]=ge.horizontal[0];else{const wn=qp(be,t,n,u,ne,Qt,dt,"center",Ni,wt,Ie,Hi.horizontal,!1,Ee,ye);wn&&(ge.horizontal[Ni]=wn,xi=wn.positionedLines.length===1)}}Oi("left")}else{if(qt==="auto"&&(qt=Zm(At)),ft||P.get("text-writing-mode").indexOf("horizontal")>=0||!M(xt)){const ai=qp(be,t,n,u,ne,Qt,dt,At,qt,wt,Ie,Hi.horizontal,!1,Ee,ye);ai&&(ge.horizontal[qt]=ai)}Oi(ft?"left":qt)}}let rt=!1;if(Y.icon&&Y.icon.name){const xt=l[Y.icon.name];xt&&(Pe=Fv(u[Y.icon.name],P.get("icon-offset").evaluate(Y,{},b),P.get("icon-anchor").evaluate(Y,{},b)),rt=xt.sdf,i.sdfIcons===void 0?i.sdfIcons=xt.sdf:i.sdfIcons!==xt.sdf&&Ce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==i.pixelRatio||P.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const it=Eg(ge.horizontal)||ge.vertical;i.iconsInText||(i.iconsInText=!!it&&it.iconsInText),(it||Pe)&&Wv(i,Y,ge,Pe,l,B,Ee,0,Ie,rt,g,b,C)}p&&i.generateCollisionDebugBuffers(S,i.collisionBoxArray)}function Zm(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Wv(i,t,n,l,u,p,g,b,S,C,P,O,B){let $=p.textMaxSize.evaluate(t,{},O);$===void 0&&($=g);const G=i.layers[0].layout,Y=G.get("icon-offset").evaluate(t,{},O),ne=Eg(n.horizontal)||n.vertical,ye=B.name==="globe",Ee=g/24,ge=i.tilePixelRatio*$/24,be=(wt=i.overscaling,i.zoom>18&&wt>2&&(wt>>=1),Math.max(Pi/(512*wt),1)*G.get("symbol-spacing")),Pe=G.get("text-padding")*i.tilePixelRatio,Ie=G.get("icon-padding")*i.tilePixelRatio,rt=bt(G.get("text-max-angle")),it=G.get("text-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",xt=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",Gt=G.get("symbol-placement"),dt=be/2;var wt;const At=G.get("icon-text-fit");let Rt;l&&At!=="none"&&(i.allowVerticalPlacement&&n.vertical&&(Rt=fg(l,n.vertical,At,G.get("icon-text-fit-padding"),Y,Ee)),ne&&(l=fg(l,ne,At,G.get("icon-text-fit-padding"),Y,Ee)));const qt=(ft,Qt,Oi)=>{if(Qt.x<0||Qt.x>=Pi||Qt.y<0||Qt.y>=Pi)return;let ai=null;if(ye){const{x:xi,y:ei,z:Ni}=B.projectTilePoint(Qt.x,Qt.y,Oi);ai={anchor:new $c(xi,ei,Ni,0,void 0),up:B.upVector(Oi,Qt.x,Qt.y)}}(function(xi,ei,Ni,wn,vn,fn,Vi,sr,Ki,Tn,fr,Ar,wr,Ir,Pr,ls,mo,or,Rs,As,Gn,Wr,qs,pr,gs){const Xo=xi.addToLineVertexArray(ei,wn);let _o,go,ma,yo,dd,l0,p1,m1=0,Sw=0,Cw=0,Mw=0,yx=-1,vx=-1;const Eu={};let Aw=Zu.exports("");const Mf=Ni?Ni.anchor:ei;let xx=0,bx=0;if(Ki._unevaluatedLayout.getValue("text-radial-offset")===void 0?[xx,bx]=Ki.layout.get("text-offset").evaluate(Gn,{},gs).map(nl=>nl*hr):(xx=Ki.layout.get("text-radial-offset").evaluate(Gn,{},gs)*hr,bx=Wm),xi.allowVerticalPlacement&&vn.vertical){const nl=vn.vertical;if(Pr)l0=Ym(nl),sr&&(p1=Ym(sr));else{const rl=Ki.layout.get("text-rotate").evaluate(Gn,{},gs)+90;ma=Kp(Tn,Mf,ei,fr,Ar,wr,nl,Ir,rl,ls),sr&&(yo=Kp(Tn,Mf,ei,fr,Ar,wr,sr,or,rl))}}if(fn){const nl=Ki.layout.get("icon-rotate").evaluate(Gn,{},gs),rl=Ki.layout.get("icon-text-fit")!=="none",_1=Yo(fn,nl,qs,rl),Tx=sr?Yo(sr,nl,qs,rl):void 0;go=Kp(Tn,Mf,ei,fr,Ar,wr,fn,or,nl),m1=4*_1.length;const Iw=xi.iconSizeData;let Af=null;Iw.kind==="source"?(Af=[yr*Ki.layout.get("icon-size").evaluate(Gn,{},gs)],Af[0]>bu&&Ce(`${xi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Iw.kind==="composite"&&(Af=[yr*Wr.compositeIconSizes[0].evaluate(Gn,{},gs),yr*Wr.compositeIconSizes[1].evaluate(Gn,{},gs)],(Af[0]>bu||Af[1]>bu)&&Ce(`${xi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),xi.addSymbols(xi.icon,_1,Af,As,Rs,Gn,!1,Ni,ei,Xo.lineStartIndex,Xo.lineLength,-1,pr,gs),yx=xi.icon.placedSymbolArray.length-1,Tx&&(Sw=4*Tx.length,xi.addSymbols(xi.icon,Tx,Af,As,Rs,Gn,Hi.vertical,Ni,ei,Xo.lineStartIndex,Xo.lineLength,-1,pr,gs),vx=xi.icon.placedSymbolArray.length-1)}for(const nl in vn.horizontal){const rl=vn.horizontal[nl];_o||(Aw=Zu.exports(rl.text),Pr?dd=Ym(rl):_o=Kp(Tn,Mf,ei,fr,Ar,wr,rl,Ir,Ki.layout.get("text-rotate").evaluate(Gn,{},gs),ls));const _1=rl.positionedLines.length===1;if(Cw+=ad(xi,Ni,ei,rl,Vi,Ki,Pr,Gn,ls,Xo,vn.vertical?Hi.horizontal:Hi.horizontalOnly,_1?Object.keys(vn.horizontal):[nl],Eu,yx,Wr,pr,gs),_1)break}vn.vertical&&(Mw+=ad(xi,Ni,ei,vn.vertical,Vi,Ki,Pr,Gn,ls,Xo,Hi.vertical,["vertical"],Eu,vx,Wr,pr,gs));let hh=-1;const wx=(nl,rl)=>nl?Math.max(nl,rl):rl;hh=wx(dd,hh),hh=wx(l0,hh),hh=wx(p1,hh);const CE=hh>-1?1:0;xi.glyphOffsetArray.length>=wu.MAX_GLYPHS&&Ce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Gn.sortKey!==void 0&&xi.addToSortKeyRanges(xi.symbolInstances.length,Gn.sortKey),xi.symbolInstances.emplaceBack(Mf.x,Mf.y,Mf.z,ei.x,ei.y,Eu.right>=0?Eu.right:-1,Eu.center>=0?Eu.center:-1,Eu.left>=0?Eu.left:-1,Eu.vertical>=0?Eu.vertical:-1,yx,vx,Aw,_o!==void 0?_o:xi.collisionBoxArray.length,_o!==void 0?_o+1:xi.collisionBoxArray.length,ma!==void 0?ma:xi.collisionBoxArray.length,ma!==void 0?ma+1:xi.collisionBoxArray.length,go!==void 0?go:xi.collisionBoxArray.length,go!==void 0?go+1:xi.collisionBoxArray.length,yo||xi.collisionBoxArray.length,yo?yo+1:xi.collisionBoxArray.length,fr,Cw,Mw,m1,Sw,CE,0,xx,bx,hh)})(i,Qt,ai,ft,n,l,u,Rt,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,Pe,it,S,0,Ie,xt,Y,t,p,C,P,O)};if(Gt==="line")for(const ft of yg(t.geometry,0,0,Pi,Pi)){const Qt=Uv(ft,be,rt,n.vertical||ne,l,24,ge,i.overscaling,Pi);for(const Oi of Qt){const ai=ne;ai&&Hv(i,ai.text,dt,Oi)||qt(ft,Oi,O)}}else if(Gt==="line-center"){for(const ft of t.geometry)if(ft.length>1){const Qt=Nv(ft,rt,n.vertical||ne,l,24,ge);Qt&&qt(ft,Qt,O)}}else if(t.type==="Polygon")for(const ft of Am(t.geometry,0)){const Qt=wg(ft,16);qt(ft[0],new $c(Qt.x,Qt.y,0,0,void 0),O)}else if(t.type==="LineString")for(const ft of t.geometry)qt(ft,new $c(ft[0].x,ft[0].y,0,0,void 0),O);else if(t.type==="Point")for(const ft of t.geometry)for(const Qt of ft)qt([Qt],new $c(Qt.x,Qt.y,0,0,void 0),O)}const bu=32640;function ad(i,t,n,l,u,p,g,b,S,C,P,O,B,$,G,Y,ne){const ye=function(be,Pe,Ie,rt,it,xt,Gt,dt){const wt=[];if(Pe.positionedLines.length===0)return wt;const At=rt.layout.get("text-rotate").evaluate(xt,{})*Math.PI/180,Rt=function(ai){const xi=ai[0],ei=ai[1],Ni=xi*ei;return Ni>0?[xi,-ei]:Ni<0?[-xi,ei]:xi===0?[ei,xi]:[ei,-xi]}(Ie);let qt=Math.abs(Pe.top-Pe.bottom);for(const ai of Pe.positionedLines)qt-=ai.lineOffset;const ft=Pe.positionedLines.length,Qt=qt/ft;let Oi=Pe.top-Ie[1];for(let ai=0;ai<ft;++ai){const xi=Pe.positionedLines[ai];Oi=jv(Pe,Qt,Oi,ai);for(const ei of xi.positionedGlyphs){if(!ei.rect)continue;const Ni=ei.rect||{};let wn=4,vn=!0,fn=1,Vi=0;if(ei.imageName){const pr=Gt[ei.imageName];if(!pr)continue;if(pr.sdf){Ce("SDF images are not supported in formatted text and will be ignored.");continue}vn=!1,fn=pr.pixelRatio,wn=1/fn}const sr=(it||dt)&&ei.vertical,Ki=ei.metrics.advance*ei.scale/2,Tn=ei.metrics,fr=ei.rect;if(fr===null)continue;dt&&Pe.verticalizable&&(Vi=ei.imageName?Ki-ei.metrics.width*ei.scale/2:0);const Ar=it?[ei.x+Ki,ei.y]:[0,0];let wr=[0,0],Ir=[0,0],Pr=!1;it||(sr?(Ir=[ei.x+Ki+Rt[0],ei.y+Rt[1]-Vi],Pr=!0):wr=[ei.x+Ki+Ie[0],ei.y+Ie[1]-Vi]);const ls=fr.w*ei.scale/(fn*(ei.localGlyph?2:1)),mo=fr.h*ei.scale/(fn*(ei.localGlyph?2:1));let or,Rs,As,Gn;if(sr){const pr=ei.y-Oi,gs=new Fe(-Ki,Ki-pr),Xo=-Math.PI/2,_o=new Fe(...Ir);or=new Fe(-Ki+wr[0],wr[1]),or._rotateAround(Xo,gs)._add(_o),or.x+=-pr+Ki,or.y-=(Tn.left-wn)*ei.scale;const go=ei.imageName?Tn.advance*ei.scale:hr*ei.scale,ma=String.fromCharCode(ei.glyph);kv(ma)?or.x+=(1-wn)*ei.scale:Fm(ma)?or.x+=go-Tn.height*ei.scale+(-wn-1)*ei.scale:or.x+=ei.imageName||Tn.width+2*wn===fr.w&&Tn.height+2*wn===fr.h?(go-mo)/2:(go-(Tn.height+2*wn)*ei.scale)/2,Rs=new Fe(or.x,or.y-ls),As=new Fe(or.x+mo,or.y),Gn=new Fe(or.x+mo,or.y-ls)}else{const pr=(Tn.left-wn)*ei.scale-Ki+wr[0],gs=(-Tn.top-wn)*ei.scale+wr[1],Xo=pr+ls,_o=gs+mo;or=new Fe(pr,gs),Rs=new Fe(Xo,gs),As=new Fe(pr,_o),Gn=new Fe(Xo,_o)}if(At){let pr;pr=it?new Fe(0,0):Pr?new Fe(Rt[0],Rt[1]):new Fe(Ie[0],Ie[1]),or._rotateAround(At,pr),Rs._rotateAround(At,pr),As._rotateAround(At,pr),Gn._rotateAround(At,pr)}const Wr=new Fe(0,0),qs=new Fe(0,0);wt.push({tl:or,tr:Rs,bl:As,br:Gn,tex:Ni,writingMode:Pe.writingMode,glyphOffset:Ar,sectionIndex:ei.sectionIndex,isSDF:vn,pixelOffsetTL:Wr,pixelOffsetBR:qs,minFontScaleX:0,minFontScaleY:0})}}return wt}(0,l,S,p,g,b,u,i.allowVerticalPlacement),Ee=i.textSizeData;let ge=null;Ee.kind==="source"?(ge=[yr*p.layout.get("text-size").evaluate(b,{},ne)],ge[0]>bu&&Ce(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ee.kind==="composite"&&(ge=[yr*G.compositeTextSizes[0].evaluate(b,{},ne),yr*G.compositeTextSizes[1].evaluate(b,{},ne)],(ge[0]>bu||ge[1]>bu)&&Ce(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,ye,ge,S,g,b,P,t,n,C.lineStartIndex,C.lineLength,$,Y,ne);for(const be of O)B[be]=i.text.placedSymbolArray.length-1;return 4*ye.length}function Eg(i){for(const t in i)return i[t];return null}function Kp(i,t,n,l,u,p,g,b,S,C){let P=g.top,O=g.bottom,B=g.left,$=g.right;const G=g.collisionPadding;if(G&&(B-=G[0],P-=G[1],$+=G[2],O+=G[3]),S){const Y=new Fe(B,P),ne=new Fe($,P),ye=new Fe(B,O),Ee=new Fe($,O),ge=bt(S);let be=new Fe(0,0);C&&(be=new Fe(C[0],C[1])),Y._rotateAround(ge,be),ne._rotateAround(ge,be),ye._rotateAround(ge,be),Ee._rotateAround(ge,be),B=Math.min(Y.x,ne.x,ye.x,Ee.x),$=Math.max(Y.x,ne.x,ye.x,Ee.x),P=Math.min(Y.y,ne.y,ye.y,Ee.y),O=Math.max(Y.y,ne.y,ye.y,Ee.y)}return i.emplaceBack(t.x,t.y,t.z,n.x,n.y,B,P,$,O,b,l,u,p),i.length-1}function Ym(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const t=i.bottom-i.top;return t>0?Math.max(10,t):null}function Hv(i,t,n,l){const u=i.compareText;if(t in u){const p=u[t];for(let g=p.length-1;g>=0;g--)if(l.dist(p[g])<n)return!0}else u[t]=[];return u[t].push(l),!1}const Zv=ci([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Xm}=Zv,Km=ci([{name:"a_pos_3",components:3,type:"Int16"}]);var _f=ci([{name:"a_pos",type:"Int16",components:2}]);const Gc=Pi/Math.PI/2,Jm=2*Oa(1,0)*Gc*Math.PI,ah=64,lh=[ah,32,16],tl=-Gc,il=Gc,Yv=[new zo([tl,tl,tl],[il,il,il]),new zo([tl,tl,tl],[0,0,il]),new zo([0,tl,tl],[il,0,il]),new zo([tl,0,tl],[0,il,il]),new zo([0,0,tl],[il,il,il])];function Sg(i,t,n,l=!0){const u=za([],i._camera.position,i.worldSize),p=[t,n,1,1];yu(p,p,i.pixelMatrixInverse),D_(p,p,1/p[3]);const g=Oo([],zl([],p,u)),b=i.globeMatrix,S=[b[12],b[13],b[14]],C=zl([],S,u),P=id(C),O=Oo([],C),B=i.worldSize/(2*Math.PI),$=Qa(O,g),G=Math.asin(B/P);if(G<Math.acos($)){if(!l)return null;const Gt=[],dt=[];za(Gt,g,P/$),Oo(dt,zl(dt,Gt,C)),Oo(g,pc(g,C,za(g,dt,Math.tan(G)*P)))}const Y=[];new Ip(u,g).closestPointOnSphere(S,B,Y);const ne=Oo([],Kt(b,0)),ye=Oo([],Kt(b,1)),Ee=Oo([],Kt(b,2)),ge=Qa(ne,Y),be=Qa(ye,Y),Pe=Qa(Ee,Y),Ie=Ht(Math.asin(-be/B));let rt=Ht(Math.atan2(ge,Pe));rt=i.center.lng+function(Gt,dt){const wt=(dt-Gt+180)%360-180;return wt<-180?wt+360:wt}(i.center.lng,rt);const it=Pl(rt),xt=fi(Ra(Ie),0,1);return new Ku(it,xt)}class Xv{constructor(t,n,l){this.a=zl([],t,l),this.b=zl([],n,l),this.center=l;const u=Oo([],this.a),p=Oo([],this.b);this.angle=Math.acos(Qa(u,p))}}function Qm(i,t){if(i.angle===0)return null;let n;return n=i.a[t]===0?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[t]/i.a[t]/Math.sin(i.angle)-1/Math.tan(i.angle)),n<0||n>1?null:function(l,u,p,g){const b=Math.sin(p);return l*(Math.sin((1-g)*p)/b)+u*(Math.sin(g*p)/b)}(i.a[t],i.b[t],i.angle,fi(n,0,1))+i.center[t]}function gc(i){if(i.z<=1)return Yv[i.z+2*i.y+i.x];const t=e1(Jp(i));return zo.fromPoints(t)}function ld(i,t,n){return za(i,i,1-n),Jd(i,i,t,n)}function Cg(i,t){const n=cd(t.zoom);if(n===0)return gc(i);const l=Jp(i),u=e1(l),p=Pl(l.getWest())*t.worldSize,g=Pl(l.getEast())*t.worldSize,b=Ra(l.getNorth())*t.worldSize,S=Ra(l.getSouth())*t.worldSize,C=[p,b,0],P=[g,b,0],O=[p,S,0],B=[g,S,0],$=Mp([],t.globeMatrix);return Qr(C,C,$),Qr(P,P,$),Qr(O,O,$),Qr(B,B,$),u[0]=ld(u[0],O,n),u[1]=ld(u[1],B,n),u[2]=ld(u[2],P,n),u[3]=ld(u[3],C,n),zo.fromPoints(u)}function Mg(i,t,n){for(const l of i)Qr(l,l,t),za(l,l,n)}function Kv(i,t,n){const l=t/i.worldSize,u=i.globeMatrix;if(n.z<=1){const it=gc(n).getCorners();return Mg(it,u,l),zo.fromPoints(it)}const p=Jp(n),g=e1(p);Mg(g,u,l);const b=Number.MAX_VALUE,S=[-b,-b,-b],C=[b,b,b];if(p.contains(i.center)){for(const Gt of g)da(C,C,Gt),Ol(S,S,Gt);S[2]=0;const it=i.point,xt=[it.x*l,it.y*l,0];return da(C,C,xt),Ol(S,S,xt),new zo(C,S)}const P=[u[12]*l,u[13]*l,u[14]*l],O=p.getCenter(),B=fi(i.center.lat,-85.051129,io),$=fi(O.lat,-85.051129,io),G=Pl(i.center.lng),Y=Ra(B);let ne=G-Pl(O.lng);const ye=Y-Ra($);ne>.5?ne-=1:ne<-.5&&(ne+=1);let Ee=0;Math.abs(ne)>Math.abs(ye)?Ee=ne>=0?1:3:(Ee=ye>=0?0:2,Jd(P,P,[u[4]*l,u[5]*l,u[6]*l],-Math.sin(bt(ye>=0?p.getSouth():p.getNorth()))*Gc));const ge=g[Ee],be=g[(Ee+1)%4],Pe=new Xv(ge,be,P),Ie=[Qm(Pe,0)||ge[0],Qm(Pe,1)||ge[1],Qm(Pe,2)||ge[2]],rt=cd(i.zoom);if(rt>0){const it=function({x:Gt,y:dt,z:wt},At,Rt,qt,ft){const Qt=1/(1<<wt);let Oi=Gt*Qt,ai=Oi+Qt,xi=dt*Qt,ei=xi+Qt,Ni=0;const wn=(Oi+ai)/2-qt;return wn>.5?Ni=-1:wn<-.5&&(Ni=1),Oi=((Oi+Ni)*At-(qt*=At))*Rt+qt,ai=((ai+Ni)*At-qt)*Rt+qt,xi=(xi*At-(ft*=At))*Rt+ft,ei=(ei*At-ft)*Rt+ft,[[Oi,ei,0],[ai,ei,0],[ai,xi,0],[Oi,xi,0]]}(n,t,i._pixelsPerMercatorPixel,G,Y);for(let Gt=0;Gt<g.length;Gt++)ld(g[Gt],it[Gt],rt);const xt=pc([],it[Ee],it[(Ee+1)%4]);za(xt,xt,.5),ld(Ie,xt,rt)}for(const it of g)da(C,C,it),Ol(S,S,it);return C[2]=Math.min(ge[2],be[2]),da(C,C,Ie),Ol(S,S,Ie),new zo(C,S)}function Jp({x:i,y:t,z:n}){const l=1/(1<<n),u=new En(Zo(i*l),to((t+1)*l)),p=new En(Zo((i+1)*l),to(t*l));return new Nc(u,p)}function e1(i){const t=bt(i.getNorth()),n=bt(i.getSouth()),l=Math.cos(t),u=Math.cos(n),p=Math.sin(t),g=Math.sin(n),b=i.getWest(),S=i.getEast();return[ch(u,g,b),ch(u,g,S),ch(l,p,S),ch(l,p,b)]}function ch(i,t,n,l=Gc){return n=bt(n),[i*Math.sin(n)*l,-t*l,i*Math.cos(n)*l]}function gf(i,t,n){return ch(Math.cos(bt(i)),Math.sin(bt(i)),t,n)}function yf(i,t,n,l){const u=1<<n.z,p=(i/Pi+n.x)/u;return gf(to((t/Pi+n.y)/u),Zo(p),l)}function Qp({min:i,max:t}){return 16383/Math.max(t[0]-i[0],t[1]-i[1],t[2]-i[2])}const Ag=new Float64Array(16);function vf(i){const t=Qp(i),n=pm(Ag,[t,t,t]);return Qh(n,n,((l=[])[0]=-(u=i.min)[0],l[1]=-u[1],l[2]=-u[2],l));var l,u}function t1(i){const t=(l=i.min,(n=Ag)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=l[0],n[13]=l[1],n[14]=l[2],n[15]=1,n);var n,l;const u=1/Qp(i);return td(t,t,[u,u,u])}function e0(i,t,n,l,u){const p=function(S){const C=Pi/(2*Math.PI);return S/(2*Math.PI)/C}(n),g=[i,t,-n/(2*Math.PI)],b=Ja(new Float64Array(16));return Qh(b,b,g),td(b,b,[p,p,p]),fm(b,b,bt(-u)),ef(b,b,bt(-l)),b}function cd(i){return pn(5,6,i)}function i1(i,t){const n=gf(t.lat,t.lng),l=function(G){const Y=gf(G._center.lat,G._center.lng);let ne=gm([],nd(0,1,0),Y);const ye=I_([],-G.angle,Y);ne=Qr(ne,ne,ye),I_(ye,-G._pitch,ne);const Ee=Oo([],Y);return za(Ee,Ee,G.cameraToCenterDistance/G.pixelsPerMeter*Jm),Qr(Ee,Ee,ye),pc([],Y,Ee)}(i);return g=(u=Kd([],l,n))[0],b=u[1],S=u[2],C=(p=n)[0],P=p[1],O=p[2],$=(B=Math.sqrt(g*g+b*b+S*S)*Math.sqrt(C*C+P*P+O*O))&&Qa(u,p)/B,Math.acos(Math.min(Math.max($,-1),1));var u,p,g,b,S,C,P,O,B,$}function n1(i,t){return i1(i,t)>Math.PI/2*1.01}const Ig=bt(85),Jv=Math.cos(Ig),r1=Math.sin(Ig);function kg(i,t){const n=i.fovAboveCenter,l=i.elevation?i.elevation.getMinElevationBelowMSL()*t:0,u=(i._camera.position[2]*i.worldSize-l)/Math.cos(i._pitch),p=Math.sin(n)*u/Math.sin(Math.max(Math.PI/2-i._pitch-n,.01)),g=Math.sin(i._pitch)*p+u;return Math.min(1.01*g,u*(1/i._horizonShift))}function ud(i,t){if(!t.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:t};const n=Math.pow(2,-i.z),l=i.x*n,u=(i.x+1)*n,p=i.y*n,g=(i.y+1)*n,b=Zo(l),S=Zo(u),C=to(p),P=to(g),O=t.project(b,C),B=t.project(S,C),$=t.project(S,P),G=t.project(b,P);let Y=Math.min(O.x,B.x,$.x,G.x),ne=Math.min(O.y,B.y,$.y,G.y),ye=Math.max(O.x,B.x,$.x,G.x),Ee=Math.max(O.y,B.y,$.y,G.y);const ge=n/16;function be(Ie,rt,it,xt,Gt,dt){const wt=(it+Gt)/2,At=(xt+dt)/2,Rt=t.project(Zo(wt),to(At)),qt=Math.max(0,Y-Rt.x,ne-Rt.y,Rt.x-ye,Rt.y-Ee);Y=Math.min(Y,Rt.x),ye=Math.max(ye,Rt.x),ne=Math.min(ne,Rt.y),Ee=Math.max(Ee,Rt.y),qt>ge&&(be(Ie,Rt,it,xt,wt,At),be(Rt,rt,wt,At,Gt,dt))}be(O,B,l,p,u,p),be(B,$,u,p,u,g),be($,G,u,g,l,g),be(G,O,l,g,l,p),Y-=ge,ne-=ge,ye+=ge,Ee+=ge;const Pe=1/Math.max(ye-Y,Ee-ne);return{scale:Pe,x:Y*Pe,y:ne*Pe,x2:ye*Pe,y2:Ee*Pe,projection:t}}const Qv=Ja(new Float32Array(16));class Ms{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,n){return{x:0,y:0,z:0}}unproject(t,n){return new En(0,0)}projectTilePoint(t,n,l){return{x:t,y:n,z:0}}locationPoint(t,n,l=!0){return t._coordinatePoint(t.locationCoordinate(n),l)}pixelsPerMeter(t,n){return Oa(1,t)*n}pixelSpaceConversion(t,n,l){return 1}farthestPixelDistance(t){return kg(t,t.pixelsPerMeter)}pointCoordinate(t,n,l,u){const p=t.horizonLineFromTop(!1),g=new Fe(n,Math.max(p,l));return t.rayIntersectionCoordinate(t.pointRayIntersection(g,u))}pointCoordinate3D(t,n,l){const u=new Fe(n,l);if(t.elevation)return t.elevation.pointCoordinate(u);{const p=this.pointCoordinate(t,u.x,u.y,0);return[p.x,p.y,p.z]}}isPointAboveHorizon(t,n){if(t.elevation)return!this.pointCoordinate3D(t,n.x,n.y);const l=t.horizonLineFromTop();return n.y<l}createInversionMatrix(t,n){return Qv}createTileMatrix(t,n,l){let u,p,g;const b=l.canonical,S=Ja(new Float64Array(16));if(this.isReprojectedInTileSpace){const C=ud(b,this);u=1,p=C.x+l.wrap*C.scale,g=C.y,td(S,S,[u/C.scale,u/C.scale,t.pixelsPerMeter/n])}else u=n/t.zoomScale(b.z),p=(b.x+Math.pow(2,b.z)*l.wrap)*u,g=b.y*u;return Qh(S,S,[p,g,0]),td(S,S,[u/Pi,u/Pi,1]),S}upVector(t,n,l){return[0,0,1]}upVectorScale(t,n,l){return{metersToTile:1}}}class s1 extends Ms{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[n,l]=this.parallels=t.parallels||[29.5,45.5],u=Math.sin(bt(n));this.n=(u+Math.sin(bt(l)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(t,n){const{n:l,c:u,r0:p}=this,g=bt(t-this.center[0]),b=bt(n),S=Math.sqrt(u-2*l*Math.sin(b))/l;return{x:S*Math.sin(g*l),y:S*Math.cos(g*l)-p,z:0}}unproject(t,n){const{n:l,c:u,r0:p}=this,g=p+n;let b=Math.atan2(t,Math.abs(g))*Math.sign(g);g*l<0&&(b-=Math.PI*Math.sign(t)*Math.sign(g));const S=bt(this.center[0])*l;b=mn(b,-Math.PI-S,Math.PI-S);const C=fi(Ht(b/l)+this.center[0],-180,180),P=Math.asin(fi((u-(t*t+g*g)*l*l)/(2*l),-1,1)),O=fi(Ht(P),-85.051129,io);return new En(C,O)}}const xf=1.340264,bf=-.081106,wf=893e-6,Tf=.003796,uh=Math.sqrt(3)/2;class ex extends Ms{project(t,n){n=n/180*Math.PI,t=t/180*Math.PI;const l=Math.asin(uh*Math.sin(n)),u=l*l,p=u*u*u;return{x:.5*(t*Math.cos(l)/(uh*(xf+3*bf*u+p*(7*wf+9*Tf*u)))/Math.PI+.5),y:1-.5*(l*(xf+bf*u+p*(wf+Tf*u))/Math.PI+1),z:0}}unproject(t,n){t=(2*t-.5)*Math.PI;let l=n=(2*(1-n)-1)*Math.PI,u=l*l,p=u*u*u;for(let P,O,B,$=0;$<12&&(O=l*(xf+bf*u+p*(wf+Tf*u))-n,B=xf+3*bf*u+p*(7*wf+9*Tf*u),P=O/B,l=fi(l-P,-Math.PI/3,Math.PI/3),u=l*l,p=u*u*u,!(Math.abs(P)<1e-12));++$);const g=uh*t*(xf+3*bf*u+p*(7*wf+9*Tf*u))/Math.cos(l),b=Math.asin(Math.sin(l)/uh),S=fi(180*g/Math.PI,-180,180),C=fi(180*b/Math.PI,-85.051129,io);return new En(S,C)}}class o1 extends Ms{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,n){return{x:.5+t/360,y:.5-n/360,z:0}}unproject(t,n){const l=360*(t-.5),u=fi(360*(.5-n),-85.051129,io);return new En(l,u)}}const dh=Math.PI/2;function t0(i){return Math.tan((dh+i)/2)}class tx extends Ms{constructor(t){super(t),this.center=t.center||[0,30];const[n,l]=this.parallels=t.parallels||[30,30];let u=bt(n),p=bt(l);this.southernCenter=u+p<0,this.southernCenter&&(u=-u,p=-p);const g=Math.cos(u),b=t0(u);this.n=u===p?Math.sin(u):Math.log(g/Math.cos(p))/Math.log(t0(p)/b),this.f=g*Math.pow(t0(u),this.n)/this.n}project(t,n){n=bt(n),this.southernCenter&&(n=-n),t=bt(t-this.center[0]);const l=1e-6,{n:u,f:p}=this;p>0?n<-dh+l&&(n=-dh+l):n>dh-l&&(n=dh-l);const g=p/Math.pow(t0(n),u);let b=g*Math.sin(u*t),S=p-g*Math.cos(u*t);return b=.5*(b/Math.PI+.5),S=.5*(S/Math.PI+.5),{x:b,y:this.southernCenter?S:1-S,z:0}}unproject(t,n){t=(2*t-.5)*Math.PI,this.southernCenter&&(n=1-n),n=(2*(1-n)-.5)*Math.PI;const{n:l,f:u}=this,p=u-n,g=Math.sign(p),b=Math.sign(l)*Math.sqrt(t*t+p*p);let S=Math.atan2(t,Math.abs(p))*g;p*l<0&&(S-=Math.PI*Math.sign(t)*g);const C=fi(Ht(S/l)+this.center[0],-180,180),P=fi(Ht(2*Math.atan(Math.pow(u/b,1/l))-dh),-85.051129,io);return new En(C,this.southernCenter?-P:P)}}class Dg extends Ms{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,n){return{x:Pl(t),y:Ra(n),z:0}}unproject(t,n){const l=Zo(t),u=to(n);return new En(l,u)}}const a1=bt(io);class ix extends Ms{project(t,n){const l=(n=bt(n))*n,u=l*l;return{x:.5*((t=bt(t))*(.8707-.131979*l+u*(u*(.003971*l-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(n*(1.007226+l*(.015085+u*(.028874*l-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(t,n){t=(2*t-.5)*Math.PI;let l=n=(2*(1-n)-1)*Math.PI,u=25,p=0,g=l*l;do{g=l*l;const C=g*g;p=(l*(1.007226+g*(.015085+C*(.028874*g-.044475-.005916*C)))-n)/(1.007226+g*(.045255+C*(.259866*g-.311325-.005916*11*C))),l=fi(l-p,-a1,a1)}while(Math.abs(p)>1e-6&&--u>0);g=l*l;const b=fi(Ht(t/(.8707+g*(g*(g*g*g*(.003971-.001529*g)-.013791)-.131979))),-180,180),S=Ht(l);return new En(b,S)}}const Pg=bt(io);class nx extends Ms{project(t,n){n=bt(n),t=bt(t);const l=Math.cos(n),u=2/Math.PI,p=Math.acos(l*Math.cos(t/2)),g=Math.sin(p)/p,b=.5*(t*u+2*l*Math.sin(t/2)/g)||0,S=.5*(n+Math.sin(n)/g)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(t,n){let l=t=(2*t-.5)*Math.PI,u=n=(2*(1-n)-1)*Math.PI,p=25;const g=1e-6;let b=0,S=0;do{const C=Math.cos(u),P=Math.sin(u),O=2*P*C,B=P*P,$=C*C,G=Math.cos(l/2),Y=Math.sin(l/2),ne=2*G*Y,ye=Y*Y,Ee=1-$*G*G,ge=Ee?1/Ee:0,be=Ee?Math.acos(C*G)*Math.sqrt(1/Ee):0,Pe=.5*(2*be*C*Y+2*l/Math.PI)-t,Ie=.5*(be*P+u)-n,rt=.5*ge*($*ye+be*C*G*B)+1/Math.PI,it=ge*(ne*O/4-be*P*Y),xt=.125*ge*(O*Y-be*P*$*ne),Gt=.5*ge*(B*G+be*ye*C)+.5,dt=it*xt-Gt*rt;b=(Ie*it-Pe*Gt)/dt,S=(Pe*xt-Ie*rt)/dt,l=fi(l-b,-Math.PI,Math.PI),u=fi(u-S,-Pg,Pg)}while((Math.abs(b)>g||Math.abs(S)>g)&&--p>0);return new En(Ht(l),Ht(u))}}class i0 extends Ms{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(bt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,n){const{scale:l,cosPhi:u}=this;return{x:bt(t)*u*l+.5,y:-Math.sin(bt(n))/u*l+.5,z:0}}unproject(t,n){const{scale:l,cosPhi:u}=this,p=-(n-.5)/l,g=fi(Ht((t-.5)/l)/u,-180,180),b=Math.asin(fi(p*u,-1,1)),S=fi(Ht(b),-85.051129,io);return new En(g,S)}}class l1 extends Dg{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(t,n,l){const u=yf(t,n,l);return Qr(u,u,vf(gc(l))),{x:u[0],y:u[1],z:u[2]}}locationPoint(t,n){const l=gf(n.lat,n.lng),u=Oo([],l),p=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(n),t._centerAltitude):t._centerAltitude;Jd(l,l,u,Oa(1,0)*Pi*p);const g=Ja(new Float64Array(16));return ed(g,t.pixelMatrix,t.globeMatrix),Qr(l,l,g),new Fe(l[0],l[1])}pixelsPerMeter(t,n){return Oa(1,0)*n}pixelSpaceConversion(t,n,l){const u=Oa(1,t)*n,p=Ji(Oa(1,45)*n,u,l);return this.pixelsPerMeter(t,n)/p}createTileMatrix(t,n,l){const u=t1(gc(l.canonical));return ed(new Float64Array(16),t.globeMatrix,u)}createInversionMatrix(t,n){const{center:l}=t,u=vf(gc(n));return ef(u,u,bt(l.lng)),fm(u,u,bt(l.lat)),td(u,u,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(u)}pointCoordinate(t,n,l,u){return Sg(t,n,l,!0)||new Ku(0,0)}pointCoordinate3D(t,n,l){const u=this.pointCoordinate(t,n,l,0);return[u.x,u.y,u.z]}isPointAboveHorizon(t,n){return!Sg(t,n.x,n.y,!1)}farthestPixelDistance(t){const n=function(u,p){const g=u.cameraToCenterDistance,b=u._centerAltitude*p,S=u._camera,C=u._camera.forward(),P=pc([],za([],C,-g),[0,0,b]),O=u.worldSize/(2*Math.PI),B=[0,0,-O],$=u.width/u.height,G=Math.tan(u.fovAboveCenter),Y=za([],S.up(),G),ne=za([],S.right(),G*$),ye=Oo([],pc([],pc([],C,Y),ne)),Ee=[];let ge;if(new Ip(P,ye).closestPointOnSphere(B,O,Ee)){const be=pc([],Ee,B),Pe=zl([],be,P);ge=Math.cos(u.fovAboveCenter)*id(Pe)}else{const be=zl([],P,B),Pe=zl([],B,P);Oo(Pe,Pe);const Ie=id(be)-O;ge=Math.sqrt(Ie*(Ie+2*O));const rt=Math.acos(ge/(O+Ie))-Math.acos(Qa(C,Pe));ge*=Math.cos(rt)}return 1.01*ge}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),l=cd(t.zoom);if(l>0){const u=kg(t,Oa(1,t.center.lat)*t.worldSize),p=t.worldSize/(2*Math.PI),g=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Ji(n,u+p*(1-Math.cos(g)),Math.pow(l,10))}return n}upVector(t,n,l){return yf(n,l,t,1)}upVectorScale(t){return{metersToTile:Jm*Qp(gc(t))}}}function Lg(i){const t=i.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(i.name){case"mercator":return new Dg(i);case"equirectangular":return new o1(i);case"naturalEarth":return new ix(i);case"equalEarth":return new ex(i);case"winkelTripel":return new nx(i);case"albers":return n?new i0(i):new s1(i);case"lambertConformalConic":return n?new i0(i):new tx(i);case"globe":return new l1(i)}throw new Error(`Invalid projection name: ${i.name}`)}const rx=zp.types,sx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function n0(i,t,n,l,u,p,g,b,S,C,P,O,B){const $=b?Math.min(bu,Math.round(b[0])):0,G=b?Math.min(bu,Math.round(b[1])):0;i.emplaceBack(t,n,Math.round(32*l),Math.round(32*u),p,g,($<<1)+(S?1:0),G,16*C,16*P,256*O,256*B)}function r0(i,t,n,l,u,p,g){i.emplaceBack(t,n,l,u,p,g)}function s0(i,t,n,l,u){i.emplaceBack(t,n,l,u),i.emplaceBack(t,n,l,u),i.emplaceBack(t,n,l,u),i.emplaceBack(t,n,l,u)}function ox(i){for(const t of i.sections)if(le(t.text))return!0;return!1}class c1{constructor(t){this.layoutVertexArray=new Zn,this.indexArray=new $s,this.programConfigurations=t,this.segments=new rs,this.dynamicLayoutVertexArray=new fo,this.opacityVertexArray=new Gr,this.placedSymbolArray=new __,this.globeExtVertexArray=new Pn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,n,l,u){this.isEmpty()||(l&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ev.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Sv.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,sx,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Bl.members,!0)),this.opacityVertexBuffer.itemSize=1),(l||u)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}ni(c1,"SymbolBuffers");class u1{constructor(t,n,l){this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new l,this.segments=new rs,this.collisionVertexArray=new Hu,this.collisionVertexArrayExt=new Pa}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Cv.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,sd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ni(u1,"CollisionBuffers");class wu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(g=>g.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ja([]),this.placementViewportMatrix=Ja([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bm(this.zoom,n["text-size"]),this.iconSizeData=Bm(this.zoom,n["icon-size"]);const l=this.layers[0].layout,u=l.get("symbol-sort-key"),p=l.get("symbol-z-order");this.canOverlap=l.get("text-allow-overlap")||l.get("icon-allow-overlap")||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=l.get("text-writing-mode").map(g=>Hi[g]),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new c1(new dc(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new c1(new dc(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Y0,this.lineVertexArray=new X0,this.symbolInstances=new yp}calculateGlyphDependencies(t,n,l,u,p){for(let g=0;g<t.length;g++)if(n[t.charCodeAt(g)]=!0,u&&p){const b=hf[t.charAt(g)];b&&(n[b.charCodeAt(0)]=!0)}}populate(t,n,l,u){const p=this.layers[0],g=p.layout,b=this.projection.name==="globe",S=g.get("text-font"),C=g.get("text-field"),P=g.get("icon-image"),O=(C.value.kind!=="constant"||C.value.value instanceof fs&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),B=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,$=g.get("symbol-sort-key");if(this.features=[],!O&&!B)return;const G=n.iconDependencies,Y=n.glyphDependencies,ne=n.availableImages,ye=new Ge(this.zoom);for(const{feature:Ee,id:ge,index:be,sourceLayerIndex:Pe}of t){const Ie=p._featureFilter.needGeometry,rt=hc(Ee,Ie);if(!p._featureFilter.filter(ye,rt,l))continue;if(Ie||(rt.geometry=Rl(Ee,l,u)),b&&Ee.type!==1&&l.z<=5){const dt=rt.geometry,wt=.98078528056,At=(Rt,qt)=>Qa(yf(Rt.x,Rt.y,l,1),yf(qt.x,qt.y,l,1))<wt;for(let Rt=0;Rt<dt.length;Rt++)dt[Rt]=z2(dt[Rt],At)}let it,xt;if(O){const dt=p.getValueAndResolveTokens("text-field",rt,l,ne),wt=fs.factory(dt);ox(wt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ue()==="unavailable"||this.hasRTLText&&Je.isParsed())&&(it=Iv(wt,p,rt))}if(B){const dt=p.getValueAndResolveTokens("icon-image",rt,l,ne);xt=dt instanceof Mo?dt:Mo.fromString(dt)}if(!it&&!xt)continue;const Gt=this.sortFeaturesByKey?$.evaluate(rt,{},l):void 0;if(this.features.push({id:ge,text:it,icon:xt,index:be,sourceLayerIndex:Pe,geometry:rt.geometry,properties:Ee.properties,type:rx[Ee.type],sortKey:Gt}),xt&&(G[xt.name]=!0),it){const dt=S.evaluate(rt,{},l).join(","),wt=g.get("text-rotation-alignment")==="map"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Hi.vertical)>=0;for(const At of it.sections)if(At.image)G[At.image.name]=!0;else{const Rt=M(it.toString()),qt=At.fontStack||dt,ft=Y[qt]=Y[qt]||{};this.calculateGlyphDependencies(At.text,ft,wt,this.allowVerticalPlacement,Rt)}}}g.get("symbol-placement")==="line"&&(this.features=function(Ee){const ge={},be={},Pe=[];let Ie=0;function rt(dt){Pe.push(Ee[dt]),Ie++}function it(dt,wt,At){const Rt=be[dt];return delete be[dt],be[wt]=Rt,Pe[Rt].geometry[0].pop(),Pe[Rt].geometry[0]=Pe[Rt].geometry[0].concat(At[0]),Rt}function xt(dt,wt,At){const Rt=ge[wt];return delete ge[wt],ge[dt]=Rt,Pe[Rt].geometry[0].shift(),Pe[Rt].geometry[0]=At[0].concat(Pe[Rt].geometry[0]),Rt}function Gt(dt,wt,At){const Rt=At?wt[0][wt[0].length-1]:wt[0][0];return`${dt}:${Rt.x}:${Rt.y}`}for(let dt=0;dt<Ee.length;dt++){const wt=Ee[dt],At=wt.geometry,Rt=wt.text?wt.text.toString():null;if(!Rt){rt(dt);continue}const qt=Gt(Rt,At),ft=Gt(Rt,At,!0);if(qt in be&&ft in ge&&be[qt]!==ge[ft]){const Qt=xt(qt,ft,At),Oi=it(qt,ft,Pe[Qt].geometry);delete ge[qt],delete be[ft],be[Gt(Rt,Pe[Oi].geometry,!0)]=Oi,Pe[Qt].geometry=null}else qt in be?it(qt,ft,At):ft in ge?xt(qt,ft,At):(rt(dt),ge[qt]=Ie-1,be[ft]=Ie-1)}return Pe.filter(dt=>dt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ee,ge)=>Ee.sortKey-ge.sortKey)}update(t,n,l,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,n,this.layers,l,u),this.icon.programConfigurations.updatePaintArrays(t,n,this.layers,l,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Lg(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,n){const l=this.lineVertexArray.length;if(t.segment!==void 0)for(const{x:u,y:p}of n)this.lineVertexArray.emplaceBack(u,p);return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(t,n,l,u,p,g,b,S,C,P,O,B,$,G){const Y=t.indexArray,ne=t.layoutVertexArray,ye=t.globeExtVertexArray,Ee=t.segments.prepareSegment(4*n.length,ne,Y,this.canOverlap?g.sortKey:void 0),ge=this.glyphOffsetArray.length,be=Ee.vertexLength,Pe=this.allowVerticalPlacement&&b===Hi.vertical?Math.PI/2:0,Ie=g.text&&g.text.sections;for(let it=0;it<n.length;it++){const{tl:xt,tr:Gt,bl:dt,br:wt,tex:At,pixelOffsetTL:Rt,pixelOffsetBR:qt,minFontScaleX:ft,minFontScaleY:Qt,glyphOffset:Oi,isSDF:ai,sectionIndex:xi}=n[it],ei=Ee.vertexLength,Ni=Oi[1];if(n0(ne,C.x,C.y,xt.x,Ni+xt.y,At.x,At.y,l,ai,Rt.x,Rt.y,ft,Qt),n0(ne,C.x,C.y,Gt.x,Ni+Gt.y,At.x+At.w,At.y,l,ai,qt.x,Rt.y,ft,Qt),n0(ne,C.x,C.y,dt.x,Ni+dt.y,At.x,At.y+At.h,l,ai,Rt.x,qt.y,ft,Qt),n0(ne,C.x,C.y,wt.x,Ni+wt.y,At.x+At.w,At.y+At.h,l,ai,qt.x,qt.y,ft,Qt),S){const{x:wn,y:vn,z:fn}=S.anchor,[Vi,sr,Ki]=S.up;r0(ye,wn,vn,fn,Vi,sr,Ki),r0(ye,wn,vn,fn,Vi,sr,Ki),r0(ye,wn,vn,fn,Vi,sr,Ki),r0(ye,wn,vn,fn,Vi,sr,Ki),s0(t.dynamicLayoutVertexArray,wn,vn,fn,Pe)}else s0(t.dynamicLayoutVertexArray,C.x,C.y,C.z,Pe);Y.emplaceBack(ei,ei+1,ei+2),Y.emplaceBack(ei+1,ei+2,ei+3),Ee.vertexLength+=4,Ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Oi[0]),it!==n.length-1&&xi===n[it+1].sectionIndex||t.programConfigurations.populatePaintArrays(ne.length,g,g.index,{},$,G,Ie&&Ie[xi])}const rt=S?S.anchor:C;t.placedSymbolArray.emplaceBack(rt.x,rt.y,rt.z,C.x,C.y,ge,this.glyphOffsetArray.length-ge,be,P,O,C.segment,l?l[0]:0,l?l[1]:0,u[0],u[1],b,0,!1,0,B,0)}_commitLayoutVertex(t,n,l,u,p,g,b){t.emplaceBack(n,l,u,p,g,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(t,n,l,u,p,g,b){const S=l.segments.prepareSegment(4,l.layoutVertexArray,l.indexArray),C=S.vertexLength,P=b.tileAnchorX,O=b.tileAnchorY;for(let $=0;$<4;$++)l.collisionVertexArray.emplaceBack(0,0,0,0);l.collisionVertexArrayExt.emplaceBack(n,-t.padding,-t.padding),l.collisionVertexArrayExt.emplaceBack(n,t.padding,-t.padding),l.collisionVertexArrayExt.emplaceBack(n,t.padding,t.padding),l.collisionVertexArrayExt.emplaceBack(n,-t.padding,t.padding),this._commitLayoutVertex(l.layoutVertexArray,u,p,g,P,O,new Fe(t.x1,t.y1)),this._commitLayoutVertex(l.layoutVertexArray,u,p,g,P,O,new Fe(t.x2,t.y1)),this._commitLayoutVertex(l.layoutVertexArray,u,p,g,P,O,new Fe(t.x2,t.y2)),this._commitLayoutVertex(l.layoutVertexArray,u,p,g,P,O,new Fe(t.x1,t.y2)),S.vertexLength+=4;const B=l.indexArray;B.emplaceBack(C,C+1),B.emplaceBack(C+1,C+2),B.emplaceBack(C+2,C+3),B.emplaceBack(C+3,C),S.primitiveLength+=4}_addTextDebugCollisionBoxes(t,n,l,u,p,g){for(let b=u;b<p;b++){const S=l.get(b),C=this.getSymbolInstanceTextSize(t,g,n,b);this._addCollisionDebugVertices(S,C,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,g)}}_addIconDebugCollisionBoxes(t,n,l,u,p,g){for(let b=u;b<p;b++){const S=l.get(b),C=this.getSymbolInstanceIconSize(t,n,g.placedIconSymbolIndex);this._addCollisionDebugVertices(S,C,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,g)}}generateCollisionDebugBuffers(t,n){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new u1(dr,hn.members,Ka),this.iconCollisionBox=new u1(dr,hn.members,Ka);const l=nh(this.iconSizeData,t),u=nh(this.textSizeData,t);for(let p=0;p<this.symbolInstances.length;p++){const g=this.symbolInstances.get(p);this._addTextDebugCollisionBoxes(u,t,n,g.textBoxStartIndex,g.textBoxEndIndex,g),this._addTextDebugCollisionBoxes(u,t,n,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._addIconDebugCollisionBoxes(l,t,n,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._addIconDebugCollisionBoxes(l,t,n,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}}getSymbolInstanceTextSize(t,n,l,u){const p=this.text.placedSymbolArray.get(n.rightJustifiedTextSymbolIndex>=0?n.rightJustifiedTextSymbolIndex:n.centerJustifiedTextSymbolIndex>=0?n.centerJustifiedTextSymbolIndex:n.leftJustifiedTextSymbolIndex>=0?n.leftJustifiedTextSymbolIndex:n.verticalPlacedTextSymbolIndex>=0?n.verticalPlacedTextSymbolIndex:u),g=Fl(this.textSizeData,t,p)/hr;return this.tilePixelRatio*g}getSymbolInstanceIconSize(t,n,l){const u=this.icon.placedSymbolArray.get(l),p=Fl(this.iconSizeData,t,u);return this.tilePixelRatio*p}_commitDebugCollisionVertexUpdate(t,n,l){t.emplaceBack(n,-l,-l),t.emplaceBack(n,l,-l),t.emplaceBack(n,l,l),t.emplaceBack(n,-l,l)}_updateTextDebugCollisionBoxes(t,n,l,u,p,g){for(let b=u;b<p;b++){const S=l.get(b),C=this.getSymbolInstanceTextSize(t,g,n,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,C,S.padding)}}_updateIconDebugCollisionBoxes(t,n,l,u,p,g){for(let b=u;b<p;b++){const S=l.get(b),C=this.getSymbolInstanceIconSize(t,n,g);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,C,S.padding)}}updateCollisionDebugBuffers(t,n){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const l=nh(this.iconSizeData,t),u=nh(this.textSizeData,t);for(let p=0;p<this.symbolInstances.length;p++){const g=this.symbolInstances.get(p);this._updateTextDebugCollisionBoxes(u,t,n,g.textBoxStartIndex,g.textBoxEndIndex,g),this._updateTextDebugCollisionBoxes(u,t,n,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._updateIconDebugCollisionBoxes(l,t,n,g.iconBoxStartIndex,g.iconBoxEndIndex,g.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(l,t,n,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,n,l,u,p,g,b,S,C){const P={};if(n<l){const{x1:O,y1:B,x2:$,y2:G,padding:Y,projectedAnchorX:ne,projectedAnchorY:ye,projectedAnchorZ:Ee,tileAnchorX:ge,tileAnchorY:be,featureIndex:Pe}=t.get(n);P.textBox={x1:O,y1:B,x2:$,y2:G,padding:Y,projectedAnchorX:ne,projectedAnchorY:ye,projectedAnchorZ:Ee,tileAnchorX:ge,tileAnchorY:be},P.textFeatureIndex=Pe}if(u<p){const{x1:O,y1:B,x2:$,y2:G,padding:Y,projectedAnchorX:ne,projectedAnchorY:ye,projectedAnchorZ:Ee,tileAnchorX:ge,tileAnchorY:be,featureIndex:Pe}=t.get(u);P.verticalTextBox={x1:O,y1:B,x2:$,y2:G,padding:Y,projectedAnchorX:ne,projectedAnchorY:ye,projectedAnchorZ:Ee,tileAnchorX:ge,tileAnchorY:be},P.verticalTextFeatureIndex=Pe}if(g<b){const{x1:O,y1:B,x2:$,y2:G,padding:Y,projectedAnchorX:ne,projectedAnchorY:ye,projectedAnchorZ:Ee,tileAnchorX:ge,tileAnchorY:be,featureIndex:Pe}=t.get(g);P.iconBox={x1:O,y1:B,x2:$,y2:G,padding:Y,projectedAnchorX:ne,projectedAnchorY:ye,projectedAnchorZ:Ee,tileAnchorX:ge,tileAnchorY:be},P.iconFeatureIndex=Pe}if(S<C){const{x1:O,y1:B,x2:$,y2:G,padding:Y,projectedAnchorX:ne,projectedAnchorY:ye,projectedAnchorZ:Ee,tileAnchorX:ge,tileAnchorY:be,featureIndex:Pe}=t.get(S);P.verticalIconBox={x1:O,y1:B,x2:$,y2:G,padding:Y,projectedAnchorX:ne,projectedAnchorY:ye,projectedAnchorZ:Ee,tileAnchorX:ge,tileAnchorY:be},P.verticalIconFeatureIndex=Pe}return P}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const l=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,n){const l=t.placedSymbolArray.get(n),u=l.vertexStartIndex+4*l.numGlyphs;for(let p=l.vertexStartIndex;p<u;p+=4)t.indexArray.emplaceBack(p,p+1,p+2),t.indexArray.emplaceBack(p+1,p+2,p+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const n=Math.sin(t),l=Math.cos(t),u=[],p=[],g=[];for(let b=0;b<this.symbolInstances.length;++b){g.push(b);const S=this.symbolInstances.get(b);u.push(0|Math.round(n*S.tileAnchorX+l*S.tileAnchorY)),p.push(S.featureIndex)}return g.sort((b,S)=>u[b]-u[S]||p[S]-p[b]),g}addToSortKeyRanges(t,n){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===n?l.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const l=this.symbolInstances.get(n);this.featureSortOrder.push(l.featureIndex);const{rightJustifiedTextSymbolIndex:u,centerJustifiedTextSymbolIndex:p,leftJustifiedTextSymbolIndex:g,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:S,verticalPlacedIconSymbolIndex:C}=l;u>=0&&this.addIndicesForPlacedSymbol(this.text,u),p>=0&&p!==u&&this.addIndicesForPlacedSymbol(this.text,p),g>=0&&g!==p&&g!==u&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S),C>=0&&this.addIndicesForPlacedSymbol(this.icon,C)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ni(wu,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),wu.MAX_GLYPHS=65535,wu.addDynamicAttributes=s0;const ax=new Ei({"symbol-placement":new Ze(yt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ze(yt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ze(yt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new at(yt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ze(yt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ze(yt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ze(yt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ze(yt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ze(yt.layout_symbol["icon-rotation-alignment"]),"icon-size":new at(yt.layout_symbol["icon-size"]),"icon-text-fit":new Ze(yt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ze(yt.layout_symbol["icon-text-fit-padding"]),"icon-image":new at(yt.layout_symbol["icon-image"]),"icon-rotate":new at(yt.layout_symbol["icon-rotate"]),"icon-padding":new Ze(yt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ze(yt.layout_symbol["icon-keep-upright"]),"icon-offset":new at(yt.layout_symbol["icon-offset"]),"icon-anchor":new at(yt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ze(yt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ze(yt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ze(yt.layout_symbol["text-rotation-alignment"]),"text-field":new at(yt.layout_symbol["text-field"]),"text-font":new at(yt.layout_symbol["text-font"]),"text-size":new at(yt.layout_symbol["text-size"]),"text-max-width":new at(yt.layout_symbol["text-max-width"]),"text-line-height":new at(yt.layout_symbol["text-line-height"]),"text-letter-spacing":new at(yt.layout_symbol["text-letter-spacing"]),"text-justify":new at(yt.layout_symbol["text-justify"]),"text-radial-offset":new at(yt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ze(yt.layout_symbol["text-variable-anchor"]),"text-anchor":new at(yt.layout_symbol["text-anchor"]),"text-max-angle":new Ze(yt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ze(yt.layout_symbol["text-writing-mode"]),"text-rotate":new at(yt.layout_symbol["text-rotate"]),"text-padding":new Ze(yt.layout_symbol["text-padding"]),"text-keep-upright":new Ze(yt.layout_symbol["text-keep-upright"]),"text-transform":new at(yt.layout_symbol["text-transform"]),"text-offset":new at(yt.layout_symbol["text-offset"]),"text-allow-overlap":new Ze(yt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ze(yt.layout_symbol["text-ignore-placement"]),"text-optional":new Ze(yt.layout_symbol["text-optional"])});var d1={paint:new Ei({"icon-opacity":new at(yt.paint_symbol["icon-opacity"]),"icon-color":new at(yt.paint_symbol["icon-color"]),"icon-halo-color":new at(yt.paint_symbol["icon-halo-color"]),"icon-halo-width":new at(yt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new at(yt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ze(yt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ze(yt.paint_symbol["icon-translate-anchor"]),"text-opacity":new at(yt.paint_symbol["text-opacity"]),"text-color":new at(yt.paint_symbol["text-color"],{runtimeType:Co,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new at(yt.paint_symbol["text-halo-color"]),"text-halo-width":new at(yt.paint_symbol["text-halo-width"]),"text-halo-blur":new at(yt.paint_symbol["text-halo-blur"]),"text-translate":new Ze(yt.paint_symbol["text-translate"]),"text-translate-anchor":new Ze(yt.paint_symbol["text-translate-anchor"])}),layout:ax};class Rg{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:hs,this.defaultValue=t}evaluate(t){if(t.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(t.formattedSection))return n.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ni(Rg,"FormatSectionOverride",{omit:["defaultValue"]});class o0 extends Ho{constructor(t){super(t,d1)}recalculate(t,n){super.recalculate(t,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const l=this.layout.get("text-writing-mode");if(l){const u=[];for(const p of l)u.indexOf(p)<0&&u.push(p);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,n,l,u){const p=this.layout.get(t).evaluate(n,{},l,u),g=this._unevaluatedLayout._values[t];return g.isDataDriven()||er(g.value)||!p?p:function(b,S){return S.replace(/{([^{}]+)}/g,(C,P)=>P in b?String(b[P]):"")}(n.properties,p)}createBucket(t){return new wu(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of d1.paint.overridableProperties){if(!o0.hasPaintOverride(this.layout,t))continue;const n=this.paint.get(t),l=new Rg(n),u=new Cs(l,n.property.specification);let p=null;p=n.value.kind==="constant"||n.value.kind==="source"?new ho("source",u):new Jr("composite",u,n.value.zoomStops,n.value._interpolationType),this.paint._values[t]=new Mt(n.property,p,n.parameters)}}_handleOverridablePaintPropertyUpdate(t,n,l){return!(!this.layout||n.isDataDriven()||l.isDataDriven())&&o0.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,n){const l=t.get("text-field"),u=d1.paint.properties[n];let p=!1;const g=b=>{for(const S of b)if(u.overrides&&u.overrides.hasOverride(S))return void(p=!0)};if(l.value.kind==="constant"&&l.value.value instanceof fs)g(l.value.value.sections);else if(l.value.kind==="source"){const b=C=>{p||(C instanceof gl&&Xr(C.value)===jo?g(C.value.sections):C instanceof Un?g(C.sections):C.eachChild(b))},S=l.value;S._styleExpression&&b(S._styleExpression.expression)}return p}getProgramConfiguration(t){return new gu(this,t)}}var lx={paint:new Ei({"background-color":new Ze(yt.paint_background["background-color"]),"background-pattern":new Ze(yt.paint_background["background-pattern"]),"background-opacity":new Ze(yt.paint_background["background-opacity"])})},cx={paint:new Ei({"raster-opacity":new Ze(yt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ze(yt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ze(yt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ze(yt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ze(yt.paint_raster["raster-saturation"]),"raster-contrast":new Ze(yt.paint_raster["raster-contrast"]),"raster-resampling":new Ze(yt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ze(yt.paint_raster["raster-fade-duration"])})};class ux extends Ho{constructor(t){super(t,{}),this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var dx={paint:new Ei({"sky-type":new Ze(yt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ze(yt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ze(yt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ze(yt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ze(yt.paint_sky["sky-gradient-radius"]),"sky-gradient":new mi(yt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ze(yt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ze(yt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ze(yt.paint_sky["sky-opacity"])})};function h1(i,t,n){const l=[0,0,1],u=vm([]);return R_(u,u,n?-bt(i)+Math.PI:bt(i)),L_(u,u,-bt(t)),k_(l,l,u),Oo(l,l)}const hx={circle:class extends Ho{constructor(i){super(i,F2)}createBucket(i){return new Wd(i)}queryRadius(i){const t=i;return Hd("circle-radius",this,t)+Hd("circle-stroke-width",this,t)+Cp(this.paint.get("circle-translate"))}queryIntersectsFeature(i,t,n,l,u,p,g,b){const S=Ro(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),p.angle,i.pixelToTileUnitsFactor),C=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return O_(i,l,p,g,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,C)}getProgramIds(){return["circle"]}getProgramConfiguration(i){return new gu(this,i)}},heatmap:class extends Ho{createBucket(i){return new B_(i)}constructor(i){super(i,G2),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=nf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return Hd("heatmap-radius",this,i)}queryIntersectsFeature(i,t,n,l,u,p,g,b){const S=this.paint.get("heatmap-radius").evaluate(t,n);return O_(i,l,p,g,b,!0,!0,new Fe(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(i){return new gu(this,i)}},hillshade:class extends Ho{constructor(i){super(i,q2)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ho{constructor(i){super(i,ov)}getProgramIds(){const i=this.paint.get("fill-pattern"),t=i&&i.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(i){return new gu(this,i)}recalculate(i,t){super.recalculate(i,t);const n=this.paint._values["fill-outline-color"];n.value.kind==="constant"&&n.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Lp(i)}queryRadius(){return Cp(this.paint.get("fill-translate"))}queryIntersectsFeature(i,t,n,l,u,p){return!i.queryGeometry.isAboveHorizon&&C_(fc(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),p.angle,i.pixelToTileUnitsFactor),l)}isTileClipped(){return!0}},"fill-extrusion":class extends Ho{constructor(i){super(i,Q_)}createBucket(i){return new uf(i)}queryRadius(){return Cp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(i){return new gu(this,i)}queryIntersectsFeature(i,t,n,l,u,p,g,b,S){const C=Ro(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),p.angle,i.pixelToTileUnitsFactor),P=this.paint.get("fill-extrusion-height").evaluate(t,n),O=this.paint.get("fill-extrusion-base").evaluate(t,n),B=[0,0],$=b&&p.elevation,G=p.elevation?p.elevation.exaggeration():1,Y=i.tile.getBucket(this);if($&&Y instanceof uf){const be=Y.centroidVertexArray,Pe=S+1;Pe<be.length&&(B[0]=be.geta_centroid_pos0(Pe),B[1]=be.geta_centroid_pos1(Pe))}if(B[0]===0&&B[1]===1)return!1;p.projection.name==="globe"&&(l=Om([l],[new Fe(0,0),new Fe(Pi,Pi)],i.tileID.canonical).map(be=>be.polygon).flat());const ne=$?b:null,[ye,Ee]=function(be,Pe,Ie,rt,it,xt,Gt,dt,wt,At,Rt){return be.projection.name==="globe"?function(qt,ft,Qt,Oi,ai,xi,ei,Ni,wn,vn,fn){const Vi=[],sr=[],Ki=qt.projection.upVectorScale(fn,qt.center.lat,qt.worldSize).metersToTile,Tn=[0,0,0,1],fr=[0,0,0,1],Ar=(Ir,Pr,ls,mo)=>{Ir[0]=Pr,Ir[1]=ls,Ir[2]=mo,Ir[3]=1},wr=Rm();Qt>0&&(Qt+=wr),Oi+=wr;for(const Ir of ft){const Pr=[],ls=[];for(const mo of Ir){const or=mo.x+ai.x,Rs=mo.y+ai.y,As=qt.projection.projectTilePoint(or,Rs,fn),Gn=qt.projection.upVector(fn,mo.x,mo.y);let Wr=Qt,qs=Oi;if(ei){const pr=zm(or,Rs,Qt,Oi,ei,Ni,wn,vn);Wr+=pr.base,qs+=pr.top}Qt!==0?Ar(Tn,As.x+Gn[0]*Ki*Wr,As.y+Gn[1]*Ki*Wr,As.z+Gn[2]*Ki*Wr):Ar(Tn,As.x,As.y,As.z),Ar(fr,As.x+Gn[0]*Ki*qs,As.y+Gn[1]*Ki*qs,As.z+Gn[2]*Ki*qs),Qr(Tn,Tn,xi),Qr(fr,fr,xi),Pr.push(new ih(Tn[0],Tn[1],Tn[2])),ls.push(new ih(fr[0],fr[1],fr[2]))}Vi.push(Pr),sr.push(ls)}return[Vi,sr]}(be,Pe,Ie,rt,it,xt,Gt,dt,wt,At,Rt):Gt?function(qt,ft,Qt,Oi,ai,xi,ei,Ni,wn){const vn=[],fn=[],Vi=[0,0,0,1];for(const sr of qt){const Ki=[],Tn=[];for(const fr of sr){const Ar=fr.x+Oi.x,wr=fr.y+Oi.y,Ir=zm(Ar,wr,ft,Qt,xi,ei,Ni,wn);Vi[0]=Ar,Vi[1]=wr,Vi[2]=Ir.base,Vi[3]=1,yu(Vi,Vi,ai),Vi[3]=Math.max(Vi[3],1e-5);const Pr=new ih(Vi[0]/Vi[3],Vi[1]/Vi[3],Vi[2]/Vi[3]);Vi[0]=Ar,Vi[1]=wr,Vi[2]=Ir.top,Vi[3]=1,yu(Vi,Vi,ai),Vi[3]=Math.max(Vi[3],1e-5);const ls=new ih(Vi[0]/Vi[3],Vi[1]/Vi[3],Vi[2]/Vi[3]);Ki.push(Pr),Tn.push(ls)}vn.push(Ki),fn.push(Tn)}return[vn,fn]}(Pe,Ie,rt,it,xt,Gt,dt,wt,At):function(qt,ft,Qt,Oi,ai){const xi=[],ei=[],Ni=ai[8]*ft,wn=ai[9]*ft,vn=ai[10]*ft,fn=ai[11]*ft,Vi=ai[8]*Qt,sr=ai[9]*Qt,Ki=ai[10]*Qt,Tn=ai[11]*Qt;for(const fr of qt){const Ar=[],wr=[];for(const Ir of fr){const Pr=Ir.x+Oi.x,ls=Ir.y+Oi.y,mo=ai[0]*Pr+ai[4]*ls+ai[12],or=ai[1]*Pr+ai[5]*ls+ai[13],Rs=ai[2]*Pr+ai[6]*ls+ai[14],As=ai[3]*Pr+ai[7]*ls+ai[15],Gn=mo+Ni,Wr=or+wn,qs=Rs+vn,pr=Math.max(As+fn,1e-5),gs=mo+Vi,Xo=or+sr,_o=Rs+Ki,go=Math.max(As+Tn,1e-5);Ar.push(new ih(Gn/pr,Wr/pr,qs/pr)),wr.push(new ih(gs/go,Xo/go,_o/go))}xi.push(Ar),ei.push(wr)}return[xi,ei]}(Pe,Ie,rt,it,xt)}(p,l,O,P,C,g,ne,B,G,p.center.lat,i.tileID.canonical),ge=i.queryGeometry;return function(be,Pe,Ie){let rt=1/0;C_(Ie,Pe)&&(rt=jp(Ie,Pe[0]));for(let it=0;it<Pe.length;it++){const xt=Pe[it],Gt=be[it];for(let dt=0;dt<xt.length-1;dt++){const wt=xt[dt],At=[wt,xt[dt+1],Gt[dt+1],Gt[dt],wt];Ep(Ie,At)&&(rt=Math.min(rt,jp(Ie,At)))}}return rt!==1/0&&rt}(ye,Ee,ge.isPointQuery()?ge.screenBounds:ge.screenGeometry)}},line:class extends Ho{constructor(i){super(i,ig),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof lo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,t){super.recalculate(i,t),this.paint._values["line-floorwidth"]=ng.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Vp(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(i){return new gu(this,i)}queryRadius(i){const t=i,n=rg(Hd("line-width",this,t),Hd("line-gap-width",this,t)),l=Hd("line-offset",this,t);return n/2+Math.abs(l)+Cp(this.paint.get("line-translate"))}queryIntersectsFeature(i,t,n,l,u,p){if(i.queryGeometry.isAboveHorizon)return!1;const g=fc(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),p.angle,i.pixelToTileUnitsFactor),b=i.pixelToTileUnitsFactor/2*rg(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),S=this.paint.get("line-offset").evaluate(t,n);return S&&(l=function(C,P){const O=[],B=new Fe(0,0);for(let $=0;$<C.length;$++){const G=C[$],Y=[];for(let ne=0;ne<G.length;ne++){const ye=G[ne-1],Ee=G[ne],ge=G[ne+1],be=ne===0?B:Ee.sub(ye)._unit()._perp(),Pe=ne===G.length-1?B:ge.sub(Ee)._unit()._perp(),Ie=be._add(Pe)._unit();Ie._mult(1/(Ie.x*Pe.x+Ie.y*Pe.y)),Y.push(Ie._mult(P)._add(Ee))}O.push(Y)}return O}(l,S*i.pixelToTileUnitsFactor)),function(C,P,O){for(let B=0;B<P.length;B++){const $=P[B];if(C.length>=3){for(let G=0;G<$.length;G++)if(Qu(C,$[G]))return!0}if(lm(C,$,O))return!0}return!1}(g,l,b)}isTileClipped(){return!0}},symbol:o0,background:class extends Ho{constructor(i){super(i,lx)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ho{constructor(i){super(i,cx)}getProgramIds(){return["raster"]}},sky:class extends Ho{constructor(i){super(i,dx),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="sky-gradient"?this._updateColorRamp():i!=="sky-atmosphere-sun"&&i!=="sky-atmosphere-halo-color"&&i!=="sky-atmosphere-color"&&i!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=nf({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(i,t){if(this.paint.get("sky-type")==="atmosphere"){const l=this.paint.get("sky-atmosphere-sun"),u=!l,p=i.style.light,g=p.properties.get("position");return u&&p.properties.get("anchor")==="viewport"&&Ce("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?h1(g.azimuthal,90-g.polar,t):h1(l[0],90-l[1],t)}const n=this.paint.get("sky-gradient-center");return h1(n[0],90-n[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return i==="atmosphere"?["skyboxCapture","skybox"]:i==="gradient"?["skyboxGradient"]:null}}};class Ef{constructor(t,n,l,u){this.context=t,this.format=l,this.texture=t.gl.createTexture(),this.update(n,u)}update(t,n,l){const{width:u,height:p}=t,{context:g}=this,{gl:b}=g,{HTMLImageElement:S,HTMLCanvasElement:C,HTMLVideoElement:P,ImageData:O,ImageBitmap:B}=D;if(b.bindTexture(b.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!n||n.premultiply!==!1)),l||this.size&&this.size[0]===u&&this.size[1]===p){const{x:$,y:G}=l||{x:0,y:0};t instanceof S||t instanceof C||t instanceof P||t instanceof O||B&&t instanceof B?b.texSubImage2D(b.TEXTURE_2D,0,$,G,b.RGBA,b.UNSIGNED_BYTE,t):b.texSubImage2D(b.TEXTURE_2D,0,$,G,u,p,b.RGBA,b.UNSIGNED_BYTE,t.data)}else this.size=[u,p],t instanceof S||t instanceof C||t instanceof P||t instanceof O||B&&t instanceof B?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,t):b.texImage2D(b.TEXTURE_2D,0,this.format,u,p,0,this.format,b.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(t,n){const{context:l}=this,{gl:u}=l;u.bindTexture(u.TEXTURE_2D,this.texture),t!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,t),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.useMipmap?t===u.NEAREST?u.NEAREST_MIPMAP_NEAREST:u.LINEAR_MIPMAP_NEAREST:t),this.filter=t),n!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,n),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,n),this.wrap=n)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class h{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class y{constructor(){this.tasks={},this.taskQueue=[],Hr(["process"],this),this.invoker=new h(this.process),this.nextId=0}add(t,n){const l=this.nextId++,u=function({type:p,isSymbolTile:g,zoom:b}){return b=b||0,p==="message"?0:p!=="maybePrepare"||g?p!=="parseTile"||g?p==="parseTile"&&g?300-b:p==="maybePrepare"&&g?400-b:500:200-b:100-b}(n);if(u===0){kt();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[l]={fn:t,metadata:n,priority:u,id:l},this.taskQueue.push(l),this.invoker.trigger(),{cancel:()=>{delete this.tasks[l]}}}process(){kt();try{if(this.taskQueue=this.taskQueue.filter(l=>!!this.tasks[l]),!this.taskQueue.length)return;const t=this.pick();if(t===null)return;const n=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}pick(){let t=null,n=1/0;for(let u=0;u<this.taskQueue.length;u++){const p=this.tasks[this.taskQueue[u]];p.priority<n&&(n=p.priority,t=u)}if(t===null)return null;const l=this.taskQueue[t];return this.taskQueue.splice(t,1),l}remove(){this.invoker.remove()}}class A{constructor(t){this._stringToNumber={},this._numberToString=[];for(let n=0;n<t.length;n++){const l=t[n];this._stringToNumber[l]=n,this._numberToString[n]=l}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const U=["tile","layer","source","sourceLayer","state"];class J{constructor(t,n,l,u,p){this.type="Feature",this._vectorTileFeature=t,this._z=n,this._x=l,this._y=u,this.properties=t.properties,this.id=p}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(t.id=this.id);for(const n of U)this[n]!==void 0&&(t[n]=this[n]);return t}}const ae=32,Te=33,Ne=new Uint16Array(8184);for(let i=0;i<2046;i++){let t=i+2,n=0,l=0,u=0,p=0,g=0,b=0;for(1&t?u=p=g=ae:n=l=b=ae;(t>>=1)>1;){const C=n+u>>1,P=l+p>>1;1&t?(u=n,p=l,n=g,l=b):(n=u,l=p,u=g,p=b),g=C,b=P}const S=4*i;Ne[S+0]=n,Ne[S+1]=l,Ne[S+2]=u,Ne[S+3]=p}const Xe=new Uint16Array(2178),Pt=new Uint8Array(1089),Ft=new Uint16Array(1089);function Zt(i){return i===0?-.03125:i===32?.03125:0}var gi=ci([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Ri={type:2,extent:Pi,loadGeometry:()=>[[new Fe(0,0),new Fe(8193,0),new Fe(8193,8193),new Fe(0,8193),new Fe(0,0)]]};class Xi{constructor(t,n,l,u,p){this.tileID=t,this.uid=Is(),this.uses=0,this.tileSize=n,this.tileZoom=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=p,this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(t){const n=t+this.timeAdded;n<bi.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=ud(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,n,l){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(u,p){const g={};if(!p)return g;for(const b of u){const S=b.layerIds.map(C=>p.getLayer(C)).filter(Boolean);if(S.length!==0){b.layers=S,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(C=>S.filter(P=>P.id===C)[0]));for(const C of S)g[C.id]=b}}return g}(t.buckets,n.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const p=this.buckets[u];if(p instanceof wu){if(this.hasSymbolBuckets=!0,!l)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const p=this.buckets[u];if(p instanceof wu&&p.hasRTLText){this.hasRTLText=!0,Je.isLoading()||Je.isLoaded()||Ue()!=="deferred"||st();break}}this.queryPadding=0;for(const u in this.buckets){const p=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(u).queryRadius(p))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new Z0}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const l in this.buckets){const u=this.buckets[l];u.uploadPending()&&u.upload(t)}const n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ef(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ef(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ef(t,this.lineAtlas.image,n.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,n,l,u,p,g,b,S){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:b,transform:g,params:p,tileTransform:this.tileTransform},t,n,l):{}}querySourceFeatures(t,n){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const u=l.loadVTLayers(),p=n?n.sourceLayer:"",g=u._geojsonTileLayer||u[p];if(!g)return;const b=Dr(n&&n.filter),{z:S,x:C,y:P}=this.tileID.canonical,O={z:S,x:C,y:P};for(let B=0;B<g.length;B++){const $=g.feature(B);if(b.needGeometry){const ne=hc($,!0);if(!b.filter(new Ge(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!b.filter(new Ge(this.tileID.overscaledZ),$))continue;const G=l.getId($,p),Y=new J($,S,C,P,G);Y.tile=O,t.push(Y)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const n=this.expirationTime;if(t.cacheControl){const l=ct(t.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const l=Date.now();let u=!1;if(this.expirationTime>l)u=!1;else if(n)if(this.expirationTime<n)u=!0;else{const p=this.expirationTime-n;p?this.expirationTime=l+Math.max(p,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,n){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0||!n)return;const l=this.latestFeatureIndex.loadVTLayers(),u=n.style.listImages();for(const p in this.buckets){if(!n.style.hasLayer(p))continue;const g=this.buckets[p],b=g.layers[0].sourceLayer||"_geojsonTileLayer",S=l[b],C=t[b];if(!S||!C||Object.keys(C).length===0)continue;if(g.update(C,S,u,this.imageAtlas&&this.imageAtlas.patternPositions||{}),g instanceof Vp||g instanceof Lp){const O=n.style._getSourceCache(g.layers[0].source);n._terrain&&n._terrain.enabled&&O&&g.programConfigurations.needsUpload&&n._terrain._clearRenderCacheForTile(O.id,this.tileID)}const P=n&&n.style&&n.style.getLayer(p);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<bi.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=bi.now()+t}setTexture(t,n){const l=n.context,u=l.gl;this.texture=this.texture||n.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new Ef(l,t,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),l.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax))}setDependencies(t,n){const l={};for(const u of n)l[u]=!0;this.dependencies[t]=l}hasDependency(t,n){for(const l of t){const u=this.dependencies[l];if(u){for(const p of n)if(u[p])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,n){if(!n||n.name==="mercator"||this._tileDebugBuffer)return;const l=Rl(Ri,this.tileID.canonical,this.tileTransform)[0],u=new zn,p=new zc;for(let g=0;g<l.length;g++){const{x:b,y:S}=l[g];u.emplaceBack(b,S),p.emplaceBack(g)}p.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(p),this._tileDebugBuffer=t.createVertexBuffer(u,_f.members),this._tileDebugSegments=rs.simpleSegment(0,0,u.length,p.length)}_makeTileBoundsBuffers(t,n){if(this._tileBoundsBuffer||!n||n.name==="mercator")return;const l=Rl(Ri,this.tileID.canonical,this.tileTransform)[0];let u,p;if(this.isRaster){const g=function(b,S){const C=ud(b,S),P=Math.pow(2,b.z);for(let ne=0;ne<Te;ne++)for(let ye=0;ye<Te;ye++){const Ee=Zo((b.x+(ye+Zt(ye))/ae)/P),ge=to((b.y+(ne+Zt(ne))/ae)/P),be=S.project(Ee,ge),Pe=ne*Te+ye;Xe[2*Pe+0]=Math.round((be.x*C.scale-C.x)*Pi),Xe[2*Pe+1]=Math.round((be.y*C.scale-C.y)*Pi)}Pt.fill(0),Ft.fill(0);for(let ne=2045;ne>=0;ne--){const ye=4*ne,Ee=Ne[ye+0],ge=Ne[ye+1],be=Ne[ye+2],Pe=Ne[ye+3],Ie=Ee+be>>1,rt=ge+Pe>>1,it=Ie+rt-ge,xt=rt+Ee-Ie,Gt=ge*Te+Ee,dt=Pe*Te+be,wt=rt*Te+Ie,At=Math.hypot((Xe[2*Gt+0]+Xe[2*dt+0])/2-Xe[2*wt+0],(Xe[2*Gt+1]+Xe[2*dt+1])/2-Xe[2*wt+1])>=16;if(Pt[wt]=Pt[wt]||(At?1:0),ne<1022){const Rt=(ge+xt>>1)*Te+(Ee+it>>1),qt=(Pe+xt>>1)*Te+(be+it>>1);Pt[wt]=Pt[wt]||Pt[Rt]||Pt[qt]}}const O=new Hn,B=new $s;let $=0;function G(ne,ye){const Ee=ye*Te+ne;return Ft[Ee]===0&&(O.emplaceBack(Xe[2*Ee+0],Xe[2*Ee+1],ne*Pi/ae,ye*Pi/ae),Ft[Ee]=++$),Ft[Ee]-1}function Y(ne,ye,Ee,ge,be,Pe){const Ie=ne+Ee>>1,rt=ye+ge>>1;if(Math.abs(ne-be)+Math.abs(ye-Pe)>1&&Pt[rt*Te+Ie])Y(be,Pe,ne,ye,Ie,rt),Y(Ee,ge,be,Pe,Ie,rt);else{const it=G(ne,ye),xt=G(Ee,ge),Gt=G(be,Pe);B.emplaceBack(it,xt,Gt)}}return Y(0,0,ae,ae,ae,0),Y(ae,ae,0,0,0,ae),{vertices:O,indices:B}}(this.tileID.canonical,n);u=g.vertices,p=g.indices}else{u=new Hn,p=new $s;for(const{x:b,y:S}of l)u.emplaceBack(b,S,0,0);const g=rf.exports(u.int16,void 0,4);for(let b=0;b<g.length;b+=3)p.emplaceBack(g[b],g[b+1],g[b+2])}this._tileBoundsBuffer=t.createVertexBuffer(u,gi.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(p),this._tileBoundsSegments=rs.simpleSegment(0,0,u.length,p.length)}_makeGlobeTileDebugBuffers(t,n){const l=n.projection;if(!l||l.name!=="globe"||n.freezeTileCoverage)return;const u=this.tileID.canonical,p=vf(Cg(u,n)),g=cd(n.zoom);let b;g>0&&(b=Mp(new Float64Array(16),n.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,u,n,p,b,g),this._makeGlobeTileDebugTextBuffer(t,u,n,p,b,g)}_globePoint(t,n,l,u,p,g,b){let S=yf(t,n,l);if(g){const C=1<<l.z,P=Pl(u.center.lng),O=Ra(u.center.lat),B=(l.x+.5)/C-P;let $=0;B>.5?$=-1:B<-.5&&($=1);let G=(t/Pi+l.x)/C+$,Y=(n/Pi+l.y)/C;G=(G-P)*u._pixelsPerMercatorPixel+P,Y=(Y-O)*u._pixelsPerMercatorPixel+O;const ne=[G*u.worldSize,Y*u.worldSize,0];Qr(ne,ne,g),S=ld(S,ne,b)}return Qr(S,S,p)}_makeGlobeTileDebugBorderBuffer(t,n,l,u,p,g){const b=new zn,S=new zc,C=new tr,P=(B,$,G,Y,ne)=>{const ye=(G-B)/(ne-1),Ee=(Y-$)/(ne-1),ge=b.length;for(let be=0;be<ne;be++){const Pe=B+be*ye,Ie=$+be*Ee;b.emplaceBack(Pe,Ie);const rt=this._globePoint(Pe,Ie,n,l,u,p,g);C.emplaceBack(rt[0],rt[1],rt[2]),S.emplaceBack(ge+be)}},O=Pi;P(0,0,O,0,16),P(O,0,O,O,16),P(O,O,0,O,16),P(0,O,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(S),this._tileDebugBuffer=t.createVertexBuffer(b,_f.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(C,Km.members),this._tileDebugSegments=rs.simpleSegment(0,0,b.length,S.length)}_makeGlobeTileDebugTextBuffer(t,n,l,u,p,g){const b=new zn,S=new $s,C=new tr,P=25;S.reserve(32),b.reserve(P),C.reserve(P);const O=(B,$)=>P*B+$;for(let B=0;B<P;B++){const $=2048*B;for(let G=0;G<P;G++){const Y=2048*G;b.emplaceBack(Y,$);const ne=this._globePoint(Y,$,n,l,u,p,g);C.emplaceBack(ne[0],ne[1],ne[2])}}for(let B=0;B<4;B++)for(let $=0;$<4;$++){const G=O(B,$),Y=O(B,$+1),ne=O(B+1,$),ye=O(B+1,$+1);S.emplaceBack(G,Y,ne),S.emplaceBack(ne,Y,ye)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(S),this._tileDebugTextBuffer=t.createVertexBuffer(b,_f.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(C,Km.members),this._tileDebugTextSegments=rs.simpleSegment(0,0,P,32)}}class Cn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,n,l){const u=String(n);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][u]=this.stateChanges[t][u]||{},Fn(this.stateChanges[t][u],l),this.deletedStates[t]===null){this.deletedStates[t]={};for(const p in this.state[t])p!==u&&(this.deletedStates[t][p]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][u]===null){this.deletedStates[t][u]={};for(const p in this.state[t][u])l[p]||(this.deletedStates[t][u][p]=null)}else for(const p in l)this.deletedStates[t]&&this.deletedStates[t][u]&&this.deletedStates[t][u][p]===null&&delete this.deletedStates[t][u][p]}removeFeatureState(t,n,l){if(this.deletedStates[t]===null)return;const u=String(n);if(this.deletedStates[t]=this.deletedStates[t]||{},l&&n!==void 0)this.deletedStates[t][u]!==null&&(this.deletedStates[t][u]=this.deletedStates[t][u]||{},this.deletedStates[t][u][l]=null);else if(n!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][u])for(l in this.deletedStates[t][u]={},this.stateChanges[t][u])this.deletedStates[t][u][l]=null;else this.deletedStates[t][u]=null;else this.deletedStates[t]=null}getState(t,n){const l=String(n),u=Fn({},(this.state[t]||{})[l],(this.stateChanges[t]||{})[l]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const p=this.deletedStates[t][n];if(p===null)return{};for(const g in p)delete u[g]}return u}initializeTileState(t,n){t.setFeatureState(this.state,n)}coalesceChanges(t,n){const l={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const p={};for(const g in this.stateChanges[u])this.state[u][g]||(this.state[u][g]={}),Fn(this.state[u][g],this.stateChanges[u][g]),p[g]=this.state[u][g];l[u]=p}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const p={};if(this.deletedStates[u]===null)for(const g in this.state[u])p[g]={},this.state[u][g]={};else for(const g in this.deletedStates[u]){if(this.deletedStates[u][g]===null)this.state[u][g]={};else for(const b of Object.keys(this.deletedStates[u][g]))delete this.state[u][g][b];p[g]=this.state[u][g]}l[u]=l[u]||{},Fn(l[u],p)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(const u in t)t[u].setFeatureState(l,n)}}class en{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,n){const l=this.toIdx(t,n);return{min:this.minimums[l],max:this.maximums[l]}}isLeaf(t,n){return this.leaves[this.toIdx(t,n)]}toIdx(t,n){return n*this.size+t}}function Ln(i,t,n,l){let u=0,p=Number.MAX_VALUE;for(let g=0;g<3;g++)if(Math.abs(l[g])<1e-15){if(n[g]<i[g]||n[g]>t[g])return null}else{const b=1/l[g];let S=(i[g]-n[g])*b,C=(t[g]-n[g])*b;if(S>C){const P=S;S=C,C=P}if(S>u&&(u=S),C<p&&(p=C),u>p)return null}return u}function $n(i,t,n,l,u,p,g,b,S,C,P){const O=l-i,B=u-t,$=p-n,G=g-i,Y=b-t,ne=S-n,ye=P[1]*ne-P[2]*Y,Ee=P[2]*G-P[0]*ne,ge=P[0]*Y-P[1]*G,be=O*ye+B*Ee+$*ge;if(Math.abs(be)<1e-15)return null;const Pe=1/be,Ie=C[0]-i,rt=C[1]-t,it=C[2]-n,xt=(Ie*ye+rt*Ee+it*ge)*Pe;if(xt<0||xt>1)return null;const Gt=rt*$-it*B,dt=it*O-Ie*$,wt=Ie*B-rt*O,At=(P[0]*Gt+P[1]*dt+P[2]*wt)*Pe;return At<0||xt+At>1?null:(G*Gt+Y*dt+ne*wt)*Pe}function fa(i,t,n){return(i-t)/(n-t)}function Fo(i,t,n,l,u,p,g,b,S){const C=1<<n,P=p-l,O=g-u,B=(i+1)/C*P+l,$=(t+0)/C*O+u,G=(t+1)/C*O+u;b[0]=(i+0)/C*P+l,b[1]=$,S[0]=B,S[1]=G}class pa{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const n=function(p){const g=Math.ceil(Math.log2(p.dim/8)),b=[];let S=Math.ceil(Math.pow(2,g));const C=1/S,P=($,G,Y,ne,ye)=>{const Ee=ne?1:0,ge=($+1)*Y-Ee,be=G*Y,Pe=(G+1)*Y-Ee;ye[0]=$*Y,ye[1]=be,ye[2]=ge,ye[3]=Pe};let O=new en(S);const B=[];for(let $=0;$<S*S;$++){P($%S,Math.floor($/S),C,!1,B);const G=no(B[0],B[1],p),Y=no(B[2],B[1],p),ne=no(B[2],B[3],p),ye=no(B[0],B[3],p);O.minimums.push(Math.min(G,Y,ne,ye)),O.maximums.push(Math.max(G,Y,ne,ye)),O.leaves.push(1)}for(b.push(O),S/=2;S>=1;S/=2){const $=b[b.length-1];O=new en(S);for(let G=0;G<S*S;G++){P(G%S,Math.floor(G/S),2,!0,B);const Y=$.getElevation(B[0],B[1]),ne=$.getElevation(B[2],B[1]),ye=$.getElevation(B[2],B[3]),Ee=$.getElevation(B[0],B[3]),ge=$.isLeaf(B[0],B[1]),be=$.isLeaf(B[2],B[1]),Pe=$.isLeaf(B[2],B[3]),Ie=$.isLeaf(B[0],B[3]),rt=Math.min(Y.min,ne.min,ye.min,Ee.min),it=Math.max(Y.max,ne.max,ye.max,Ee.max),xt=ge&&be&&Pe&&Ie;O.maximums.push(it),O.minimums.push(rt),O.leaves.push(it-rt<=5&&xt?1:0)}b.push(O)}return b}(this.dem),l=n.length-1,u=n[l];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(n,0,0,l,0)}raycastRoot(t,n,l,u,p,g,b=1){return Ln([t,n,-100],[l,u,this.maximums[0]*b],p,g)}raycast(t,n,l,u,p,g,b=1){if(!this.nodeCount)return null;const S=this.raycastRoot(t,n,l,u,p,g,b);if(S==null)return null;const C=[],P=[],O=[],B=[],$=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;$.length>0;){const{idx:G,t:Y,nodex:ne,nodey:ye,depth:Ee}=$.pop();if(this.leaves[G]){Fo(ne,ye,Ee,t,n,l,u,O,B);const be=1<<Ee,Pe=(ne+0)/be,Ie=(ne+1)/be,rt=(ye+0)/be,it=(ye+1)/be,xt=no(Pe,rt,this.dem)*b,Gt=no(Ie,rt,this.dem)*b,dt=no(Ie,it,this.dem)*b,wt=no(Pe,it,this.dem)*b,At=$n(O[0],O[1],xt,B[0],O[1],Gt,B[0],B[1],dt,p,g),Rt=$n(B[0],B[1],dt,O[0],B[1],wt,O[0],O[1],xt,p,g),qt=Math.min(At!==null?At:Number.MAX_VALUE,Rt!==null?Rt:Number.MAX_VALUE);if(qt!==Number.MAX_VALUE)return qt;{const ft=Jd([],p,g,Y);if(_s(xt,Gt,wt,dt,fa(ft[0],O[0],B[0]),fa(ft[1],O[1],B[1]))>=ft[2])return Y}continue}let ge=0;for(let be=0;be<this._siblingOffset.length;be++){Fo((ne<<1)+this._siblingOffset[be][0],(ye<<1)+this._siblingOffset[be][1],Ee+1,t,n,l,u,O,B),O[2]=-100,B[2]=this.maximums[this.childOffsets[G]+be]*b;const Pe=Ln(O,B,p,g);if(Pe!=null){const Ie=Pe;C[be]=Ie;let rt=!1;for(let it=0;it<ge&&!rt;it++)Ie>=C[P[it]]&&(P.splice(it,0,be),rt=!0);rt||(P[ge]=be),ge++}}for(let be=0;be<ge;be++){const Pe=P[be];$.push({idx:this.childOffsets[G]+Pe,t:C[Pe],nodex:(ne<<1)+this._siblingOffset[Pe][0],nodey:(ye<<1)+this._siblingOffset[Pe][1],depth:Ee+1})}}return null}_addNode(t,n,l){return this.minimums.push(t),this.maximums.push(n),this.leaves.push(l),this.childOffsets.push(0),this.nodeCount++}_construct(t,n,l,u,p){if(t[u].isLeaf(n,l)===1)return;this.childOffsets[p]||(this.childOffsets[p]=this.nodeCount);const g=u-1,b=t[g];let S=0,C=0;for(let P=0;P<this._siblingOffset.length;P++){const O=2*n+this._siblingOffset[P][0],B=2*l+this._siblingOffset[P][1],$=b.getElevation(O,B),G=b.isLeaf(O,B),Y=this._addNode($.min,$.max,G);G&&(S|=1<<P),C||(C=Y)}for(let P=0;P<this._siblingOffset.length;P++)S&1<<P||this._construct(t,2*n+this._siblingOffset[P][0],2*l+this._siblingOffset[P][1],g,C+P)}}function _s(i,t,n,l,u,p){return Ji(Ji(i,n,p),Ji(t,l,p),u)}function no(i,t,n){const l=n.dim,u=fi(i*l-.5,0,l-1),p=fi(t*l-.5,0,l-1),g=Math.floor(u),b=Math.floor(p),S=Math.min(g+1,l-1),C=Math.min(b+1,l-1);return _s(n.get(g,b),n.get(S,b),n.get(g,C),n.get(S,C),u-g,p-b)}const yc={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Sf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,n,l,u=!1,p=!1){if(this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(l&&l!=="mapbox"&&l!=="terrarium")return Ce(`"${l}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=n.height;const g=this.dim=n.height-2,b=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.encoding=l||"mapbox",this.borderReady=u,!u){for(let S=0;S<g;S++)b[this._idx(-1,S)]=b[this._idx(0,S)],b[this._idx(g,S)]=b[this._idx(g-1,S)],b[this._idx(S,-1)]=b[this._idx(S,0)],b[this._idx(S,g)]=b[this._idx(S,g-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(g,-1)]=b[this._idx(g-1,0)],b[this._idx(-1,g)]=b[this._idx(0,g-1)],b[this._idx(g,g)]=b[this._idx(g-1,g-1)],p&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new pa(this)}get(t,n,l=!1){l&&(t=fi(t,-1,this.dim),n=fi(n,-1,this.dim));const u=4*this._idx(t,n);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[u],this.pixels[u+1],this.pixels[u+2])}static getUnpackVector(t){return yc[t]}get unpackVector(){return yc[this.encoding]}_idx(t,n){if(t<-1||t>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(t+1)}_unpackMapbox(t,n,l){return(256*t*256+256*n+l)/10-1e4}_unpackTerrarium(t,n,l){return 256*t+n+l/256-32768}static pack(t,n){const l=[0,0,0,0],u=Sf.getUnpackVector(n);let p=Math.floor((t+u[3])/u[2]);return l[2]=p%256,p=Math.floor(p/256),l[1]=p%256,p=Math.floor(p/256),l[0]=p,l}getPixels(){return new ha({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,n,l){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let u=n*this.dim,p=n*this.dim+this.dim,g=l*this.dim,b=l*this.dim+this.dim;switch(n){case-1:u=p-1;break;case 1:p=u+1}switch(l){case-1:g=b-1;break;case 1:b=g+1}const S=-n*this.dim,C=-l*this.dim;for(let P=g;P<b;P++)for(let O=u;O<p;O++){const B=4*this._idx(O,P),$=4*this._idx(O+S,P+C);this.pixels[B+0]=t.pixels[$+0],this.pixels[B+1]=t.pixels[$+1],this.pixels[B+2]=t.pixels[$+2],this.pixels[B+3]=t.pixels[$+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}ni(Sf,"DEMData"),ni(pa,"DemMinMaxQuadTree",{omit:["dem"]});class TE{constructor(t,n){this.max=t,this.onRemove=n,this.reset()}reset(){for(const t in this.data)for(const n of this.data[t])n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);return this.data={},this.order=[],this}add(t,n,l){const u=t.wrapped().key;this.data[u]===void 0&&(this.data[u]=[]);const p={value:n,timeout:void 0};if(l!==void 0&&(p.timeout=setTimeout(()=>{this.remove(t,p)},l)),this.data[u].push(p),this.order.push(u),this.order.length>this.max){const g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const n=this.data[t].shift();return n.timeout&&clearTimeout(n.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),n.value}getByKey(t){const n=this.data[t];return n?n[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,n){if(!this.has(t))return this;const l=t.wrapped().key,u=n===void 0?0:this.data[l].indexOf(n),p=this.data[l][u];return this.data[l].splice(u,1),p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.onRemove(p.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this}filter(t){const n=[];for(const l in this.data)for(const u of this.data[l])t(u.value)||n.push(u);for(const l of n)this.remove(l.value.tileID,l)}}class a0{constructor(t,n,l){this.func=t,this.mask=n,this.range=l}}a0.ReadOnly=!1,a0.ReadWrite=!0,a0.disabled=new a0(519,a0.ReadOnly,[0,1]);const fx=7680;class px{constructor(t,n,l,u,p,g){this.test=t,this.ref=n,this.mask=l,this.fail=u,this.depthFail=p,this.pass=g}}px.disabled=new px({func:519,mask:0},0,0,fx,fx,fx);class Tu{constructor(t,n,l){this.blendFunction=t,this.blendColor=n,this.mask=l}}Tu.Replace=[1,0],Tu.disabled=new Tu(Tu.Replace,kr.transparent,[!1,!1,!1,!1]),Tu.unblended=new Tu(Tu.Replace,kr.transparent,[!0,!0,!0,!0]),Tu.alphaBlended=new Tu([1,771],kr.transparent,[!0,!0,!0,!0]);const mx=1029,_x=2305;class qc{constructor(t,n,l){this.enable=t,this.mode=n,this.frontFace=l}}qc.disabled=new qc(!1,mx,_x),qc.backCCW=new qc(!0,mx,_x),qc.backCW=new qc(!0,mx,2304),qc.frontCW=new qc(!0,1028,2304),qc.frontCCW=new qc(!0,1028,_x);class Cf extends ao{constructor(t,n,l){super(),this.id=t,this._onlySymbols=l,n.on("data",u=>{u.dataType==="source"&&u.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&u.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),n.on("error",()=>{this._sourceErrored=!0}),this._source=n,this._tiles={},this._cache=new TE(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=n.minTileCacheSize,this._maxTileCacheSize=n.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Cn,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(t){this.map=t,this._minTileCacheSize=this._minTileCacheSize===void 0&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const n=this._tiles[t];if(n.state!=="loaded"&&n.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,n){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,n)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,()=>{})}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const n in this._tiles){const l=this._tiles[n];l.upload(t),l.prepare(this.map.style.imageManager)}}getIds(){return ts(this._tiles).map(t=>t.tileID).sort(gw).map(t=>t.key)}getRenderableIds(t){const n=[];for(const l in this._tiles)this._isIdRenderable(+l,t)&&n.push(this._tiles[l]);return t?n.sort((l,u)=>{const p=l.tileID,g=u.tileID,b=new Fe(p.canonical.x,p.canonical.y)._rotate(this.transform.angle),S=new Fe(g.canonical.x,g.canonical.y)._rotate(this.transform.angle);return p.overscaledZ-g.overscaledZ||S.y-b.y||S.x-b.x}).map(l=>l.tileID.key):n.map(l=>l.tileID).sort(gw).map(l=>l.key)}hasRenderableParent(t){const n=this.findLoadedParent(t,0);return!!n&&this._isIdRenderable(n.tileID.key)}_isIdRenderable(t,n){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(n||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(+t,"reloading")}}_reloadTile(t,n){const l=this._tiles[t];l&&(l.state!=="loading"&&(l.state=n),this._loadTile(l,this._tileLoaded.bind(this,l,t,n)))}_tileLoaded(t,n,l,u){if(u)if(t.state="errored",u.status!==404)this._source.fire(new ja(u,{tile:t}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const p=this.map.painter.terrain;this.update(this.transform,p.getScaledDemTileSize(),!0),p.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=bi.now(),l==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),this._source.type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new na("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const n=this.getRenderableIds();for(let u=0;u<n.length;u++){const p=n[u];if(t.neighboringTiles&&t.neighboringTiles[p]){const g=this.getTileByID(p);l(t,g),l(g,t)}}function l(u,p){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let g=p.tileID.canonical.x-u.tileID.canonical.x;const b=p.tileID.canonical.y-u.tileID.canonical.y,S=Math.pow(2,u.tileID.canonical.z),C=p.tileID.key;g===0&&b===0||Math.abs(b)>1||(Math.abs(g)>1&&(Math.abs(g+S)===1?g+=S:Math.abs(g-S)===1&&(g-=S)),p.dem&&u.dem&&(u.dem.backfillBorder(p.dem,g,b),u.neighboringTiles&&u.neighboringTiles[C]&&(u.neighboringTiles[C].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,n,l,u){for(const p in this._tiles){let g=this._tiles[p];if(u[p]||!g.hasData()||g.tileID.overscaledZ<=n||g.tileID.overscaledZ>l)continue;let b=g.tileID;for(;g&&g.tileID.overscaledZ>n+1;){const C=g.tileID.scaledTo(g.tileID.overscaledZ-1);g=this._tiles[C.key],g&&g.hasData()&&(b=C)}let S=b;for(;S.overscaledZ>n;)if(S=S.scaledTo(S.overscaledZ-1),t[S.key]){u[b.key]=b;break}}}findLoadedParent(t,n){if(t.key in this._loadedParentTiles){const l=this._loadedParentTiles[t.key];return l&&l.tileID.overscaledZ>=n?l:null}for(let l=t.overscaledZ-1;l>=n;l--){const u=t.scaledTo(l),p=this._getLoadedTile(u);if(p)return p}}_getLoadedTile(t){const n=this._tiles[t.key];return n&&n.hasData()?n:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,n){n=n||this._source.tileSize;const l=Math.ceil(t.width/n)+1,u=Math.ceil(t.height/n)+1,p=Math.floor(l*u*5),g=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,p):p,b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(b)}handleWrapJump(t){const n=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,n){const l={};for(const u in this._tiles){const p=this._tiles[u];p.tileID=p.tileID.unwrapTo(p.tileID.wrap+n),l[p.tileID.key]=p}this._tiles=l;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(t,n,l){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!l)return;let u;this.updateCacheSize(t,n),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(b=>new Gs(b.canonical.z,b.wrap,b.canonical.z,b.canonical.x,b.canonical.y)):(u=t.coveringTiles({tileSize:n||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!l,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(u=u.filter(b=>this._source.hasTile(b)))):u=[];const p=this._updateRetainedTiles(u);if(yw(this._source.type)&&u.length!==0){const b={},S={},C=Object.keys(p);for(const O of C){const B=p[O],$=this._tiles[O];if(!$||$.fadeEndTime&&$.fadeEndTime<=bi.now())continue;const G=this.findLoadedParent(B,Math.max(B.overscaledZ-Cf.maxOverzooming,this._source.minzoom));G&&(this._addTile(G.tileID),b[G.tileID.key]=G.tileID),S[O]=B}const P=u[u.length-1].overscaledZ;for(const O in this._tiles){const B=this._tiles[O];if(p[O]||!B.hasData())continue;let $=B.tileID;for(;$.overscaledZ>P;){$=$.scaledTo($.overscaledZ-1);const G=this._tiles[$.key];if(G&&G.hasData()&&S[$.key]){p[O]=B.tileID;break}}}for(const O in b)p[O]||(this._coveredTiles[O]=!0,p[O]=b[O])}for(const b in p)this._tiles[b].clearFadeHold();const g=function(b,S){const C=[];for(const P in b)P in S||C.push(P);return C}(this._tiles,p);for(const b of g){const S=this._tiles[b];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+b)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const n={};if(t.length===0)return n;const l={},u=t.reduce((C,P)=>Math.min(C,P.overscaledZ),1/0),p=t[0].overscaledZ,g=Math.max(p-Cf.maxOverzooming,this._source.minzoom),b=Math.max(p+Cf.maxUnderzooming,this._source.minzoom),S={};for(const C of t){const P=this._addTile(C);n[C.key]=C,P.hasData()||u<this._source.maxzoom&&(S[C.key]=C)}this._retainLoadedChildren(S,u,b,n);for(const C of t){let P=this._tiles[C.key];if(P.hasData())continue;if(C.canonical.z>=this._source.maxzoom){const B=C.children(this._source.maxzoom)[0],$=this.getTile(B);if($&&$.hasData()){n[B.key]=B;continue}}else{const B=C.children(this._source.maxzoom);if(n[B[0].key]&&n[B[1].key]&&n[B[2].key]&&n[B[3].key])continue}let O=P.wasRequested();for(let B=C.overscaledZ-1;B>=g;--B){const $=C.scaledTo(B);if(l[$.key]||(l[$.key]=!0,P=this.getTile($),!P&&O&&(P=this._addTile($)),P&&(n[$.key]=$,O=P.wasRequested(),P.hasData())))break}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const n=[];let l,u=this._tiles[t].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){l=this._loadedParentTiles[u.key];break}n.push(u.key);const p=u.scaledTo(u.overscaledZ-1);if(l=this._getLoadedTile(p),l)break;u=p}for(const p of n)this._loadedParentTiles[p]=l}}_addTile(t){let n=this._tiles[t.key];if(n)return n;n=this._cache.getAndRemove(t),n&&(this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,n)));const l=Boolean(n);if(!l){const u=this.map?this.map.painter:null;n=new Xi(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,u,this._isRaster),this._loadTile(n,this._tileLoaded.bind(this,n,t.key,n.state))}return n?(n.uses++,this._tiles[t.key]=n,l||this._source.fire(new na("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null}_setTileReloadTimer(t,n){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const l=n.getExpiryTimeout();l&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},l))}_removeTile(t){const n=this._tiles[t];n&&(n.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),n.uses>0||(n.hasData()&&n.state!=="reloading"?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,n,l){const u=[],p=this.transform;if(!p)return u;const g=p.projection.name==="globe",b=Pl(p.center.lng);for(const S in this._tiles){const C=this._tiles[S];if(l&&C.clearQueryDebugViz(),C.holdingForFade())continue;let P;if(g){const O=C.tileID.canonical;if(O.z===0){const B=[Math.abs(fi(b,...f1(O,-1))-b),Math.abs(fi(b,...f1(O,1))-b)];P=[0,2*B.indexOf(Math.min(...B))-1]}else{const B=[Math.abs(fi(b,...f1(O,-1))-b),Math.abs(fi(b,...f1(O,0))-b),Math.abs(fi(b,...f1(O,1))-b)];P=[B.indexOf(Math.min(...B))-1]}}else P=[0];for(const O of P){const B=t.containsTile(C,p,n,O);B&&u.push(B)}}return u}getVisibleCoordinates(t){const n=this.getRenderableIds(t).map(l=>this._tiles[l].tileID);for(const l of n)l.projMatrix=this.transform.calculateProjMatrix(l.toUnwrapped());return n}hasTransition(){if(this._source.hasTransition())return!0;if(yw(this._source.type))for(const t in this._tiles){const n=this._tiles[t];if(n.fadeEndTime!==void 0&&n.fadeEndTime>=bi.now())return!0}return!1}setFeatureState(t,n,l){this._state.updateState(t=t||"_geojsonTileLayer",n,l)}removeFeatureState(t,n,l){this._state.removeFeatureState(t=t||"_geojsonTileLayer",n,l)}getFeatureState(t,n){return this._state.getState(t=t||"_geojsonTileLayer",n)}setDependencies(t,n,l){const u=this._tiles[t];u&&u.setDependencies(n,l)}reloadTilesForDependencies(t,n){for(const l in this._tiles)this._tiles[l].hasDependency(t,n)&&this._reloadTile(+l,"reloading");this._cache.filter(l=>!l.hasDependency(t,n))}_preloadTiles(t,n){const l=new Map,u=Array.isArray(t)?t:[t],p=this.map.painter.terrain,g=this.usedForTerrain&&p?p.getScaledDemTileSize():this._source.tileSize;for(const b of u){const S=b.coveringTiles({tileSize:g,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const C of S)l.set(C.key,C);this.usedForTerrain&&b.updateElevation(!1)}tn(Array.from(l.values()),(b,S)=>{const C=new Xi(b,this._source.tileSize*b.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(C,P=>{this._source.type==="raster-dem"&&C.dem&&this._backfillDEM(C),S(P,C)})},n)}}function gw(i,t){const n=Math.abs(2*i.wrap)-+(i.wrap<0),l=Math.abs(2*t.wrap)-+(t.wrap<0);return i.overscaledZ-t.overscaledZ||l-n||t.canonical.y-i.canonical.y||t.canonical.x-i.canonical.x}function yw(i){return i==="raster"||i==="image"||i==="video"||i==="custom"}function f1(i,t){const n=1<<i.z;return[i.x/n+t,(i.x+1)/n+t]}Cf.maxOverzooming=10,Cf.maxUnderzooming=3;class Og{constructor(t,n,l){this._demTile=t,this._dem=this._demTile.dem,this._scale=n,this._offset=l}static create(t,n,l){const u=l||t.findDEMTileFor(n);if(!u||!u.dem)return;const p=u.dem,g=u.tileID,b=1<<n.canonical.z-g.canonical.z;return new Og(u,u.tileSize/Pi/b,[(n.canonical.x/b-g.canonical.x)*p.dim,(n.canonical.y/b-g.canonical.y)*p.dim])}tileCoordToPixel(t,n){const l=n*this._scale+this._offset[1],u=Math.floor(t*this._scale+this._offset[0]),p=Math.floor(l);return new Fe(u,p)}getElevationAt(t,n,l,u){const p=t*this._scale+this._offset[0],g=n*this._scale+this._offset[1],b=Math.floor(p),S=Math.floor(g),C=this._dem;return u=!!u,l?Ji(Ji(C.get(b,S,u),C.get(b,S+1,u),g-S),Ji(C.get(b+1,S,u),C.get(b+1,S+1,u),g-S),p-b):C.get(b,S,u)}getElevationAtPixel(t,n,l){return this._dem.get(t,n,!!l)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Oa(1,t)*this._dem.stride}}class vw{constructor(t,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new fu(Pi,16,0),this.featureIndexArray=new Bc,this.promoteId=n}insert(t,n,l,u,p,g=0){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,u,p,g);const S=this.grid;for(let C=0;C<n.length;C++){const P=n[C],O=[1/0,1/0,-1/0,-1/0];for(let B=0;B<P.length;B++){const $=P[B];O[0]=Math.min(O[0],$.x),O[1]=Math.min(O[1],$.y),O[2]=Math.max(O[2],$.x),O[3]=Math.max(O[3],$.y)}O[0]<Pi&&O[1]<Pi&&O[2]>=0&&O[3]>=0&&S.insert(b,O[0],O[1],O[2],O[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Dm(new ff(this.rawTileData)).layers,this.sourceLayerCoder=new A(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,n,l,u){this.loadVTLayers();const p=t.params||{},g=Dr(p.filter),b=t.tileResult,S=t.transform,C=b.bufferedTilespaceBounds,P=this.grid.query(C.min.x,C.min.y,C.max.x,C.max.y,(G,Y,ne,ye)=>dm(b.bufferedTilespaceGeometry,G,Y,ne,ye));P.sort(EE);let O=null;S.elevation&&P.length>0&&(O=Og.create(S.elevation,this.tileID));const B={};let $;for(let G=0;G<P.length;G++){const Y=P[G];if(Y===$)continue;$=Y;const ne=this.featureIndexArray.get(Y);let ye=null;this.loadMatchingFeature(B,ne,g,p.layers,p.availableImages,n,l,u,(Ee,ge,be,Pe=0)=>(ye||(ye=Rl(Ee,this.tileID.canonical,t.tileTransform)),ge.queryIntersectsFeature(b,Ee,be,ye,this.z,t.transform,t.pixelPosMatrix,O,Pe)))}return B}loadMatchingFeature(t,n,l,u,p,g,b,S,C){const{featureIndex:P,bucketIndex:O,sourceLayerIndex:B,layoutVertexArrayOffset:$}=n,G=this.bucketLayerIDs[O];if(u&&!function(Ee,ge){for(let be=0;be<Ee.length;be++)if(ge.indexOf(Ee[be])>=0)return!0;return!1}(u,G))return;const Y=this.sourceLayerCoder.decode(B),ne=this.vtLayers[Y].feature(P);if(l.needGeometry){const Ee=hc(ne,!0);if(!l.filter(new Ge(this.tileID.overscaledZ),Ee,this.tileID.canonical))return}else if(!l.filter(new Ge(this.tileID.overscaledZ),ne))return;const ye=this.getId(ne,Y);for(let Ee=0;Ee<G.length;Ee++){const ge=G[Ee];if(u&&u.indexOf(ge)<0)continue;const be=g[ge];if(!be)continue;let Pe={};ye!==void 0&&S&&(Pe=S.getState(be.sourceLayer||"_geojsonTileLayer",ye));const Ie=Fn({},b[ge]);Ie.paint=xw(Ie.paint,be.paint,ne,Pe,p),Ie.layout=xw(Ie.layout,be.layout,ne,Pe,p);const rt=!C||C(ne,be,Pe,$);if(!rt)continue;const it=new J(ne,this.z,this.x,this.y,ye);it.layer=Ie;let xt=t[ge];xt===void 0&&(xt=t[ge]=[]),xt.push({featureIndex:P,feature:it,intersectionZ:rt})}}lookupSymbolFeatures(t,n,l,u,p,g,b,S){const C={};this.loadVTLayers();const P=Dr(p);for(const O of t)this.loadMatchingFeature(C,{bucketIndex:l,sourceLayerIndex:u,featureIndex:O,layoutVertexArrayOffset:0},P,g,b,S,n);return C}loadFeature(t){const{featureIndex:n,sourceLayerIndex:l}=t;this.loadVTLayers();const u=this.sourceLayerCoder.decode(l),p=this.vtFeatures[u];if(p[n])return p[n];const g=this.vtLayers[u].feature(n);return p[n]=g,g}hasLayer(t){for(const n of this.bucketLayerIDs)for(const l of n)if(t===l)return!0;return!1}getId(t,n){let l=t.id;if(this.promoteId){const u=typeof this.promoteId=="string"?this.promoteId:this.promoteId[n];u!=null&&(l=t.properties[u]),typeof l=="boolean"&&(l=Number(l))}return l}}function xw(i,t,n,l,u){return ds(i,(p,g)=>{const b=t instanceof jt?t.get(g):null;return b&&b.evaluate?b.evaluate(n,l,u):b})}function EE(i,t){return t-i}ni(vw,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class bw{constructor(t,n){this.width=t,this.height=n,this.nextRow=0,this.image=new jc({width:t,height:n}),this.positions={},this.uploaded=!1}getDash(t,n){const l=this.getKey(t,n);return this.positions[l]}trim(){const t=this.width,n=this.height=zs(this.nextRow);this.image.resize({width:t,height:n})}getKey(t,n){return t.join(",")+n}getDashRanges(t,n,l){const u=[];let p=t.length%2==1?-t[t.length-1]*l:0,g=t[0]*l,b=!0;u.push({left:p,right:g,isDash:b,zeroLength:t[0]===0});let S=t[0];for(let C=1;C<t.length;C++){b=!b;const P=t[C];p=S*l,S+=P,g=S*l,u.push({left:p,right:g,isDash:b,zeroLength:P===0})}return u}addRoundDash(t,n,l){const u=n/2;for(let p=-l;p<=l;p++){const g=this.width*(this.nextRow+l+p);let b=0,S=t[b];for(let C=0;C<this.width;C++){C/S.right>1&&(S=t[++b]);const P=Math.abs(C-S.left),O=Math.abs(C-S.right),B=Math.min(P,O);let $;const G=p/l*(u+1);if(S.isDash){const Y=u-Math.abs(G);$=Math.sqrt(B*B+Y*Y)}else $=u-Math.sqrt(B*B+G*G);this.image.data[g+C]=Math.max(0,Math.min(255,$+128))}}}addRegularDash(t,n){for(let S=t.length-1;S>=0;--S){const C=t[S],P=t[S+1];C.zeroLength?t.splice(S,1):P&&P.isDash===C.isDash&&(P.left=C.left,t.splice(S,1))}const l=t[0],u=t[t.length-1];l.isDash===u.isDash&&(l.left=u.left-this.width,u.right=l.right+this.width);const p=this.width*this.nextRow;let g=0,b=t[g];for(let S=0;S<this.width;S++){S/b.right>1&&(b=t[++g]);const C=Math.abs(S-b.left),P=Math.abs(S-b.right),O=Math.min(C,P);this.image.data[p+S]=Math.max(0,Math.min(255,(b.isDash?O:-O)+n+128))}}addDash(t,n){const l=this.getKey(t,n);if(this.positions[l])return this.positions[l];const u=n==="round",p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return Ce("LineAtlas out of space"),null;t.length===0&&t.push(1);let b=0;for(let P=0;P<t.length;P++)t[P]<0&&(Ce("Negative value is found in line dasharray, replacing values with 0"),t[P]=0),b+=t[P];if(b!==0){const P=this.width/b,O=this.getDashRanges(t,this.width,P);u?this.addRoundDash(O,P,p):this.addRegularDash(O,n==="square"?.5*P:0)}const S=this.nextRow+p;this.nextRow+=g;const C={tl:[S,p],br:[b,0]};return this.positions[l]=C,C}}ni(bw,"LineAtlas");class ww{constructor(t){const n={},l=[];for(const b in t){const S=t[b],C=n[b]={};for(const P in S.glyphs){const O=S.glyphs[+P];if(!O||O.bitmap.width===0||O.bitmap.height===0)continue;const B=O.metrics.localGlyph?2:1,$={x:0,y:0,w:O.bitmap.width+2*B,h:O.bitmap.height+2*B};l.push($),C[P]=$}}const{w:u,h:p}=Vm(l),g=new jc({width:u||1,height:p||1});for(const b in t){const S=t[b];for(const C in S.glyphs){const P=S.glyphs[+C];if(!P||P.bitmap.width===0||P.bitmap.height===0)continue;const O=n[b][C],B=P.metrics.localGlyph?2:1;jc.copy(P.bitmap,g,{x:0,y:0},{x:O.x+B,y:O.y+B},P.bitmap)}}this.image=g,this.positions=n}}ni(ww,"GlyphAtlas");class SE{constructor(t){this.tileID=new Gs(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=ud(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,n,l,u,p){this.status="parsing",this.data=t,this.collisionBoxArray=new Z0;const g=new A(Object.keys(t.layers).sort()),b=new vw(this.tileID,this.promoteId);b.bucketLayerIDs=[];const S={},C=new bw(256,256),P={featureIndex:b,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:C,availableImages:l},O=n.familiesBySource[this.source];for(const Pe in O){const Ie=t.layers[Pe];if(!Ie)continue;let rt=!1,it=!1;for(const dt of O[Pe])dt[0].type==="symbol"?rt=!0:it=!0;if(this.isSymbolTile===!0&&!rt||this.isSymbolTile===!1&&!it)continue;Ie.version===1&&Ce(`Vector tile source "${this.source}" layer "${Pe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const xt=g.encode(Pe),Gt=[];for(let dt=0;dt<Ie.length;dt++){const wt=Ie.feature(dt),At=b.getId(wt,Pe);Gt.push({feature:wt,id:At,index:dt,sourceLayerIndex:xt})}for(const dt of O[Pe]){const wt=dt[0];this.isSymbolTile!==void 0&&wt.type==="symbol"!==this.isSymbolTile||wt.minzoom&&this.zoom<Math.floor(wt.minzoom)||wt.maxzoom&&this.zoom>=wt.maxzoom||wt.visibility!=="none"&&(gx(dt,this.zoom,l),(S[wt.id]=wt.createBucket({index:b.bucketLayerIDs.length,layers:dt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:l})).populate(Gt,P,this.tileID.canonical,this.tileTransform),b.bucketLayerIDs.push(dt.map(At=>At.id)))}}let B,$,G,Y;C.trim();const ne={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ye=ds(P.glyphDependencies,Pe=>Object.keys(Pe).map(Number));Object.keys(ye).length?u.send("getGlyphs",{uid:this.uid,stacks:ye},(Pe,Ie)=>{B||(B=Pe,$=Ie,be.call(this))},void 0,!1,ne):$={};const Ee=Object.keys(P.iconDependencies);Ee.length?u.send("getImages",{icons:Ee,source:this.source,tileID:this.tileID,type:"icons"},(Pe,Ie)=>{B||(B=Pe,G=Ie,be.call(this))},void 0,!1,ne):G={};const ge=Object.keys(P.patternDependencies);function be(){if(B)return p(B);if($&&G&&Y){const Pe=new ww($),Ie=new _c(G,Y);for(const rt in S){const it=S[rt];it instanceof wu?(gx(it.layers,this.zoom,l),qv(it,$,Pe.positions,G,Ie.iconPositions,this.showCollisionBoxes,l,this.tileID.canonical,this.tileZoom,this.projection)):it.hasPattern&&(it instanceof Vp||it instanceof Lp||it instanceof uf)&&(gx(it.layers,this.zoom,l),it.addFeatures(P,this.tileID.canonical,Ie.patternPositions,l,this.tileTransform))}this.status="done",p(null,{buckets:ts(S).filter(rt=>!rt.isEmpty()),featureIndex:b,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pe.image,lineAtlas:C,imageAtlas:Ie,glyphMap:this.returnDependencies?$:null,iconMap:this.returnDependencies?G:null,glyphPositions:this.returnDependencies?Pe.positions:null})}}ge.length?u.send("getImages",{icons:ge,source:this.source,tileID:this.tileID,type:"patterns"},(Pe,Ie)=>{B||(B=Pe,Y=Ie,be.call(this))},void 0,!1,ne):Y={},be.call(this)}}function gx(i,t,n){const l=new Ge(t);for(const u of i)u.recalculate(l,n)}class Tw{constructor(t){this.entries={},this.scheduler=t}request(t,n,l,u){const p=this.entries[t]=this.entries[t]||{callbacks:[]};if(p.result){const[g,b]=p.result;return this.scheduler?this.scheduler.add(()=>{u(g,b)},n):u(g,b),()=>{}}return p.callbacks.push(u),p.cancel||(p.cancel=l((g,b)=>{p.result=[g,b];for(const S of p.callbacks)this.scheduler?this.scheduler.add(()=>{S(g,b)},n):S(g,b);setTimeout(()=>delete this.entries[t],3e3)})),()=>{p.result||(p.callbacks=p.callbacks.filter(g=>g!==u),p.callbacks.length||(p.cancel(),delete this.entries[t]))}}}function Ew(i,t,n){const l=JSON.stringify(i.request);return i.data&&(this.deduped.entries[l]={result:[null,i.data]}),this.deduped.request(l,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},u=>{const p=Ys(i.request,(g,b,S,C)=>{g?u(g):b&&u(null,{vectorTile:n?void 0:new Dm(new ff(b)),rawData:b,cacheControl:S,expires:C})});return()=>{p.cancel(),u()}},t)}o.ARRAY_TYPE=ua,o.AUTH_ERR_MSG=dl,o.Aabb=zo,o.Actor=class{constructor(i,t,n){this.target=i,this.parent=t,this.mapId=n,this.callbacks={},this.cancelCallbacks={},Hr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=kt()?i:D,this.scheduler=new y}send(i,t,n,l,u=!1,p){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=p,this.callbacks[g]=n);const b=ui(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:i,hasCallback:!!n,targetMapId:l,mustQueue:u,sourceMapId:this.mapId,data:lc(t,b)},b),{cancel:()=>{n&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:l,sourceMapId:this.mapId})}}}receive(i){const t=i.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){const l=this.cancelCallbacks[n];delete this.cancelCallbacks[n],l&&l.cancel()}else if(t.mustQueue||kt()){const l=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add(()=>this.processTask(n,t),l&&l.metadata||{type:"message"})}else this.processTask(n,t)}processTask(i,t){if(t.type==="<response>"){const n=this.callbacks[i];delete this.callbacks[i],n&&(t.error?n(Wu(t.error)):n(null,Wu(t.data)))}else{const n=ui(this.globalScope)?void 0:[],l=t.hasCallback?(p,g)=>{delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:p?lc(p):null,data:lc(g,n)},n)}:p=>{},u=Wu(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,u,l);else if(this.parent.getWorkerSource){const p=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,p[0],u.source)[p[1]](u,l)}else l(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=Up,o.Color=kr,o.ColorMode=Tu,o.CullFaceMode=qc,o.DEMData=Sf,o.DataConstantProperty=Ze,o.DedupedRequest=Tw,o.DepthMode=a0,o.EXTENT=Pi,o.Elevation=class{isDataAvailableAtPoint(i){const t=this._source();if(this.isUsingMockSource()||!t||i.y<0||i.y>1)return!1;const n=t.getSource().maxzoom,l=1<<n,u=Math.floor(i.x),p=Math.floor((i.x-u)*l),g=Math.floor(i.y*l),b=this.findDEMTileFor(new Gs(n,u,n,p,g));return!(!b||!b.dem)}getAtPointOrZero(i,t=0){return this.getAtPoint(i,t)||0}getAtPoint(i,t,n=!0){if(this.isUsingMockSource())return null;t==null&&(t=null);const l=this._source();if(!l||i.y<0||i.y>1)return t;const u=l.getSource().maxzoom,p=1<<u,g=Math.floor(i.x),b=i.x-g,S=new Gs(u,g,u,Math.floor(b*p),Math.floor(i.y*p)),C=this.findDEMTileFor(S);if(!C||!C.dem)return t;const P=C.dem,O=1<<C.tileID.canonical.z,B=(b*O-C.tileID.canonical.x)*P.dim,$=(i.y*O-C.tileID.canonical.y)*P.dim,G=Math.floor(B),Y=Math.floor($);return(n?this.exaggeration():1)*Ji(Ji(P.get(G,Y),P.get(G,Y+1),$-Y),Ji(P.get(G+1,Y),P.get(G+1,Y+1),$-Y),B-G)}getAtTileOffset(i,t,n){const l=1<<i.canonical.z;return this.getAtPointOrZero(new Ku(i.wrap+(i.canonical.x+t/Pi)/l,(i.canonical.y+n/Pi)/l))}getAtTileOffsetFunc(i,t,n,l){return u=>{const p=this.getAtTileOffset(i,u.x,u.y),g=l.upVector(i.canonical,u.x,u.y);return za(g,g,p*l.upVectorScale(i.canonical,t,n).metersToTile),g}}getForTilePoints(i,t,n,l){if(this.isUsingMockSource())return!1;const u=Og.create(this,i,l);return!!u&&(t.forEach(p=>{p[2]=this.exaggeration()*u.getElevationAt(p[0],p[1],n)}),!0)}getMinMaxForTile(i){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(i);if(!t||!t.dem)return null;const n=t.dem.tree,l=t.tileID,u=1<<i.canonical.z-l.canonical.z;let p=i.canonical.x/u-l.canonical.x,g=i.canonical.y/u-l.canonical.y,b=0;for(let S=0;S<i.canonical.z-l.canonical.z&&!n.leaves[b];S++){p*=2,g*=2;const C=2*Math.floor(g)+Math.floor(p);b=n.childOffsets[b]+C,p%=1,g%=1}return{min:this.exaggeration()*n.minimums[b],max:this.exaggeration()*n.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=ja,o.EvaluationParameters=Ge,o.Event=na,o.Evented=ao,o.FillExtrusionBucket=uf,o.Frustum=bm,o.FrustumCorners=xm,o.GLOBE_METERS_TO_ECEF=Jm,o.GLOBE_RADIUS=Gc,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=6,o.GLOBE_ZOOM_THRESHOLD_MIN=5,o.GlobeSharedBuffers=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const i of this._wireframeSegments)i.destroy()}}_createGrid(i){const t=new zn,n=new $s,l=65;for(let u=0;u<l;u++)for(let p=0;p<l;p++)t.emplaceBack(p,u);this._gridSegments=[];for(let u=0,p=0;u<lh.length;u++){const g=lh[u];for(let S=0;S<g;S++)for(let C=0;C<64;C++){const P=S*l+C;n.emplaceBack(P+1,P,P+l),n.emplaceBack(P+l,P+l+1,P+1)}const b=64*g*2;this._gridSegments.push(rs.simpleSegment(0,p,(g+1)*l,b)),p+=b}this._gridBuffer=i.createVertexBuffer(t,_f.members),this._gridIndexBuffer=i.createIndexBuffer(n,!0)}_createPoles(i){const t=new $s;for(let u=0;u<=ah;u++)t.emplaceBack(0,u+1,u+2);this._poleIndexBuffer=i.createIndexBuffer(t,!0);const n=new dn,l=new dn;this._poleSegments=[];for(let u=0,p=0;u<5;u++){const g=360/(1<<u);n.emplaceBack(0,-Gc,0,.5,0),l.emplaceBack(0,-Gc,0,.5,1);for(let b=0;b<=ah;b++){const S=b/ah,C=Ji(0,g,S),[P,O,B]=ch(Jv,r1,C,Gc);n.emplaceBack(P,O,B,S,0),l.emplaceBack(P,O,B,S,1)}this._poleSegments.push(rs.simpleSegment(p,0,66,64)),p+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(n,Xm,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(l,Xm,!1)}getGridBuffers(i){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[i]]}getPoleBuffers(i){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}getWirefameBuffers(i,t){if(!this._wireframeSegments){const n=new Ka,l=ah,u=l+1;this._wireframeSegments=[];for(let p=0,g=0;p<lh.length;p++){const b=lh[p];for(let C=0;C<b;C++)for(let P=0;P<l;P++){const O=C*u+P;n.emplaceBack(O,O+1),n.emplaceBack(O,O+u),n.emplaceBack(O,O+u+1)}const S=b*l*3;this._wireframeSegments.push(rs.simpleSegment(0,g,(b+1)*u,S)),g+=S}this._wireframeIndexBuffer=i.createIndexBuffer(n)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},o.GlyphManager=as,o.ImagePosition=Gp,o.LivePerformanceUtils=ii,o.LngLat=En,o.LngLatBounds=Nc,o.LocalGlyphMode=qm,o.MAX_MERCATOR_LATITUDE=io,o.MercatorCoordinate=Ku,o.ONE_EM=hr,o.OverscaledTileID=Gs,o.PerformanceMarkers=Tt,o.Properties=Ei,o.RGBAImage=ha,o.Ray=Ip,o.RequestManager=class{constructor(i,t,n){this._transformRequestFn=i,this._customAccessToken=t,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const i=function(){let t="";for(let n=0;n<10;n++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Le,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,t){return this._transformRequestFn&&this._transformRequestFn(i,t)||{url:i}}normalizeStyleURL(i,t){if(!oo(i))return i;const n=Fs(i);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(i,t){if(!oo(i))return i;const n=Fs(i);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(i,t,n,l){if(!oo(i))return i;const u=Fs(i);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),n&&u.params.push(`language=${n}`),l&&u.params.push(`worldview=${l}`),this._makeAPIURL(u,this._customAccessToken||t)}normalizeSpriteURL(i,t,n,l){const u=Fs(i);return oo(i)?(u.path=`/styles/v1${u.path}/sprite${t}${n}`,this._makeAPIURL(u,this._customAccessToken||l)):(u.path+=`${t}${n}`,Ua(u))}normalizeTileURL(i,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!oo(i))return i;const l=Fs(i);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||n&&l.authority!=="raster"&&n===512?"@2x":""}${he.supported?".webp":"$1"}`),l.authority==="raster"?l.path=`/${Z.RASTER_URL_PREFIX}${l.path}`:(l.path=l.path.replace(/^.+\/v4\//,"/"),l.path=`/${Z.TILE_URL_VERSION}${l.path}`);const u=this._customAccessToken||function(p){for(const g of p){const b=g.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(l.params)||Z.ACCESS_TOKEN;return Z.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&l.params.push(`sku=${this._skuToken}`),this._makeAPIURL(l,u)}canonicalizeTileURL(i,t){const n=Fs(i);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return i;let l="mapbox://";n.path.match(/^\/raster\/v1\//)?l+=`raster/${n.path.replace(`/${Z.RASTER_URL_PREFIX}/`,"")}`:l+=`tiles/${n.path.replace(`/${Z.TILE_URL_VERSION}/`,"")}`;let u=n.params;return t&&(u=u.filter(p=>!p.match(/^access_token=/))),u.length&&(l+=`?${u.join("&")}`),l}canonicalizeTileset(i,t){const n=!!t&&oo(t),l=[];for(const u of i.tiles||[])Eo(u)?l.push(this.canonicalizeTileURL(u,n)):l.push(u);return l}_makeAPIURL(i,t){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",l=Fs(Z.API_URL);if(i.protocol=l.protocol,i.authority=l.authority,i.protocol==="http"){const u=i.params.indexOf("secure");u>=0&&i.params.splice(u,1)}if(l.path!=="/"&&(i.path=`${l.path}${i.path}`),!Z.REQUIRE_ACCESS_TOKEN)return Ua(i);if(t=t||Z.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if(t[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return i.params=i.params.filter(u=>u.indexOf("access_token")===-1),i.params.push(`access_token=${t||""}`),Ua(i)}},o.ResourceType=nr,o.SegmentVector=rs,o.SourceCache=Cf,o.StencilMode=px,o.StructArrayLayout1ui2=zc,o.StructArrayLayout2f1f2i16=eo,o.StructArrayLayout2i4=zn,o.StructArrayLayout2ui4=Ka,o.StructArrayLayout3f12=Pa,o.StructArrayLayout3ui6=$s,o.StructArrayLayout4i8=Hn,o.StructArrayLayout5f20=dn,o.Texture=Ef,o.Tile=Xi,o.Transitionable=vt,o.Uniform1f=$d,o.Uniform1i=class extends uc{constructor(i){super(i),this.current=0}set(i,t,n){this.fetchUniformLocation(i,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},o.Uniform2f=class extends uc{constructor(i){super(i),this.current=[0,0]}set(i,t,n){this.fetchUniformLocation(i,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},o.Uniform3f=class extends uc{constructor(i){super(i),this.current=[0,0,0]}set(i,t,n){this.fetchUniformLocation(i,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},o.Uniform4f=v_,o.UniformColor=x_,o.UniformMatrix2f=class extends uc{constructor(i){super(i),this.current=w_}set(i,t,n){if(this.fetchUniformLocation(i,t)){for(let l=0;l<4;l++)if(n[l]!==this.current[l]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}}},o.UniformMatrix3f=class extends uc{constructor(i){super(i),this.current=b_}set(i,t,n){if(this.fetchUniformLocation(i,t)){for(let l=0;l<9;l++)if(n[l]!==this.current[l]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}}},o.UniformMatrix4f=class extends uc{constructor(i){super(i),this.current=L2}set(i,t,n){if(this.fetchUniformLocation(i,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let l=1;l<16;l++)if(n[l]!==this.current[l]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},o.UnwrappedTileID=tg,o.ValidationError=li,o.VectorTileFeature=zp,o.VectorTileWorkerSource=class extends ao{constructor(i,t,n,l,u){super(),this.actor=i,this.layerIndex=t,this.availableImages=n,this.loadVectorData=u||Ew,this.loading={},this.loaded={},this.deduped=new Tw(i.scheduler),this.isSpriteLoaded=l,this.scheduler=i.scheduler}loadTile(i,t){const n=i.uid,l=i&&i.request,u=l&&l.collectResourceTiming,p=this.loading[n]=new SE(i);p.abort=this.loadVectorData(i,(g,b)=>{const S=!this.loading[n];if(delete this.loading[n],S||g||!b)return p.status="done",S||(this.loaded[n]=p),t(g);const C=b.rawData,P={};b.expires&&(P.expires=b.expires),b.cacheControl&&(P.cacheControl=b.cacheControl),p.vectorTile=b.vectorTile||new Dm(new ff(C));const O=()=>{p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,(B,$)=>{if(B||!$)return t(B);const G={};if(u){const Y=Ci(l);Y.length>0&&(G.resourceTiming=JSON.parse(JSON.stringify(Y)))}t(null,Fn({rawTileData:C.slice(0)},$,P,G))})};this.isSpriteLoaded?O():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(O,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):O()}),this.loaded=this.loaded||{},this.loaded[n]=p})}reloadTile(i,t){const n=this.loaded,l=i.uid,u=this;if(n&&n[l]){const p=n[l];p.showCollisionBoxes=i.showCollisionBoxes,p.enableTerrain=!!i.enableTerrain,p.projection=i.projection,p.tileTransform=ud(i.tileID.canonical,i.projection);const g=(b,S)=>{const C=p.reloadCallback;C&&(delete p.reloadCallback,p.parse(p.vectorTile,u.layerIndex,this.availableImages,u.actor,C)),t(b,S)};p.status==="parsing"?p.reloadCallback=g:p.status==="done"&&(p.vectorTile?p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,g):g())}}abortTile(i,t){const n=i.uid,l=this.loading[n];l&&(l.abort&&l.abort(),delete this.loading[n]),t()}removeTile(i,t){const n=this.loaded,l=i.uid;n&&n[l]&&delete n[l],t()}},o.WritingMode=Hi,o.add=pc,o.addDynamicAttributes=s0,o.adjoint=function(i,t){var n=t[0],l=t[1],u=t[2],p=t[3],g=t[4],b=t[5],S=t[6],C=t[7],P=t[8];return i[0]=g*P-b*C,i[1]=u*C-l*P,i[2]=l*b-u*g,i[3]=b*S-p*P,i[4]=n*P-u*S,i[5]=u*p-n*b,i[6]=p*C-g*S,i[7]=l*S-n*C,i[8]=n*g-l*p,i},o.asyncAll=tn,o.bezier=hi,o.bindAll=Hr,o.boundsAttributes=gi,o.bufferConvexPolygon=function(i,t){const n=[];for(let l=0;l<i.length;l++){const u=mn(l-1,-1,i.length-1),p=mn(l+1,-1,i.length-1),g=i[l],b=i[p],S=i[u].sub(g).unit(),C=b.sub(g).unit(),P=C.angleWithSep(S.x,S.y),O=S.add(C).unit().mult(-1*t/Math.sin(P/2));n.push(g.add(O))}return n},o.cacheEntryPossiblyAdded=function(i){Yn++,Yn>Di&&(i.getActor().send("enforceCacheSizeLimit",Ti),Yn=0)},o.calculateGlobeLabelMatrix=function(i,t){const{x:n,y:l}=i.point,u=e0(n,l,i.worldSize/i._pixelsPerMercatorPixel,0,0);return ed(u,u,t1(gc(t)))},o.calculateGlobeMatrix=function(i){const{x:t,y:n}=i.point,{lng:l,lat:u}=i._center;return e0(t,n,i.worldSize,l,u)},o.calculateGlobeMercatorMatrix=function(i){const t=i.pixelsPerMeter,n=t/Oa(1,i.center.lat),l=Ja(new Float64Array(16));return Qh(l,l,[i.point.x,i.point.y,0]),td(l,l,[n,n,t]),Float32Array.from(l)},o.circumferenceAtLatitude=tm,o.clamp=fi,o.clearTileCache=function(i){if(!Yi())return;const t=D.caches.delete(Nt);i&&t.catch(i).then(()=>i())},o.clipLine=yg,o.clone=function(i){var t=new ua(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},o.clone$1=bs,o.collisionCircleLayout=Mv,o.config=Z,o.conjugate=function(i,t){return i[0]=-t[0],i[1]=-t[1],i[2]=-t[2],i[3]=t[3],i},o.create=function(){var i=new ua(16);return ua!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},o.create$1=A_,o.createExpression=js,o.createLayout=ci,o.createStyleLayer=function(i){return i.type==="custom"?new ux(i):new hx[i.type](i)},o.cross=gm,o.degToRad=bt,o.distance=function(i,t){return Math.hypot(t[0]-i[0],t[1]-i[1],t[2]-i[2])},o.div=function(i,t,n){return i[0]=t[0]/n[0],i[1]=t[1]/n[1],i[2]=t[2]/n[2],i},o.dot=Qa,o.earthRadius=Xu,o.ease=ri,o.easeCubicInOut=Wt,o.ecefToLatLng=function([i,t,n]){const l=Math.hypot(i,t,n),u=Math.atan2(i,n),p=.5*Math.PI-Math.acos(-t/l);return new En(Ht(u),Ht(p))},o.emitValidationErrors=lp,o.endsWith=Zr,o.enforceCacheSizeLimit=function(i){_n(),pi&&pi.then(t=>{t.keys().then(n=>{for(let l=0;l<n.length-i;l++)t.delete(n[l])})})},o.evaluateSizeForFeature=Fl,o.evaluateSizeForZoom=nh,o.evaluateVariableOffset=Hm,o.evented=we,o.exactEquals=function(i,t){return i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]&&i[3]===t[3]},o.exactEquals$1=function(i,t){return i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]},o.exported=bi,o.exported$1=he,o.extend=Fn,o.extend$1=So,o.fillExtrusionHeightLift=Rm,o.filterObject=Sr,o.fromMat4=function(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[4],i[4]=t[5],i[5]=t[6],i[6]=t[8],i[7]=t[9],i[8]=t[10],i},o.fromQuat=function(i,t){var n=t[0],l=t[1],u=t[2],p=t[3],g=n+n,b=l+l,S=u+u,C=n*g,P=l*g,O=l*b,B=u*g,$=u*b,G=u*S,Y=p*g,ne=p*b,ye=p*S;return i[0]=1-O-G,i[1]=P+ye,i[2]=B-ne,i[3]=0,i[4]=P-ye,i[5]=1-C-G,i[6]=$+Y,i[7]=0,i[8]=B+ne,i[9]=$-Y,i[10]=1-C-O,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},o.fromRotation=function(i,t){var n=Math.sin(t),l=Math.cos(t);return i[0]=l,i[1]=n,i[2]=0,i[3]=-n,i[4]=l,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},o.fromScaling=pm,o.furthestTileCorner=function(i){const t=Math.round((i+45+360)%360/90)%4;return Yt[t]},o.getAABBPointSquareDist=function(i,t,n){let l=0;for(let u=0;u<2;++u){const p=n?n[u]:0;i[u]>p&&(l+=(i[u]-p)*(i[u]-p)),t[u]<p&&(l+=(p-t[u])*(p-t[u]))}return l},o.getAnchorAlignment=Gm,o.getAnchorJustification=Zm,o.getBounds=function(i){let t=1/0,n=1/0,l=-1/0,u=-1/0;for(const p of i)t=Math.min(t,p.x),n=Math.min(n,p.y),l=Math.max(l,p.x),u=Math.max(u,p.y);return{min:new Fe(t,n),max:new Fe(l,u)}},o.getColumn=Kt,o.getGridMatrix=function(i,t,n,l){const u=t.getNorth(),p=t.getSouth(),g=t.getWest(),b=t.getEast(),S=1<<i.z,C=b-g,P=u-p,O=C/ah,B=-P/lh[n],$=[0,O,0,B,0,0,u,g,0];if(i.z>0){const G=180/l;Yd($,$,[G/C+1,0,0,0,G/P+1,0,-.5*G/O,.5*G/B,1])}return $[2]=S,$[5]=i.x,$[8]=i.y,$},o.getImage=Yl,o.getJSON=function(i,t){return Yr(Fn(i,{type:"json"}),t)},o.getLatitudinalLod=function(i){const t=80.051129;i=fi(i,-80.051129,t)/t*90;const n=Math.pow(Math.abs(Math.sin(bt(i))),3);return Math.round(n*(lh.length-1))},o.getMapSessionAPI=Be,o.getPerformanceMeasurement=Ci,o.getProjection=Lg,o.getRTLTextPluginStatus=Ue,o.getReferrer=ks,o.getTilePoint=function(i,{x:t,y:n},l=0){return new Fe(((t-l)*i.scale-i.x)*Pi,(n*i.scale-i.y)*Pi)},o.getTileVec3=function(i,t,n=0){return nd(((t.x-n)*i.scale-i.x)*Pi,(t.y*i.scale-i.y)*Pi,im(t.z,t.y))},o.getVideo=function(i,t){const n=D.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(let l=0;l<i.length;l++){const u=D.document.createElement("source");Or(i[l])||(n.crossOrigin="Anonymous"),u.src=i[l],n.appendChild(u)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(i){const t=[0,0,0],n=Ja(new Float64Array(16));return ed(n,i.pixelMatrix,i.globeMatrix),Qr(t,t,n),new Fe(t[0],t[1])},o.globeDenormalizeECEF=t1,o.globeECEFOrigin=function(i,t){const n=[0,0,0];return Qr(n,n,vf(gc(t.canonical))),Qr(n,n,i),n},o.globeNormalizeECEF=vf,o.globePixelsToTileUnits=function(i,t){return Pi/(512*Math.pow(2,i))*Qp(gc(t))},o.globePoleMatrixForTile=function(i,t,n){const l=Ja(new Float64Array(16)),u=(t/(1<<i)-.5)*Math.PI*2;return ef(l,n.globeMatrix,u),Float32Array.from(l)},o.globeTileBounds=gc,o.globeTiltAtLngLat=i1,o.globeToMercatorTransition=cd,o.globeUseCustomAntiAliasing=function(i,t,n){const l=cd(n.zoom),u=i.style.map._antialias,p=!!t.extStandardDerivatives,g=t.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return l===0&&!u&&!g&&p},o.identity=Ja,o.identity$1=vm,o.invert=Mp,o.isFullscreen=function(){return!!D.document.fullscreenElement||!!D.document.webkitFullscreenElement},o.isLngLatBehindGlobe=n1,o.isMapAuthenticated=function(i){return Qe.has(i)},o.isMapboxURL=oo,o.isSafariWithAntialiasingBug=function(i){const t=i.navigator?i.navigator.userAgent:null;return!!ui(i)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=to,o.latLngToECEF=gf,o.len=U2,o.length=id,o.length$1=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},o.lngFromMercatorX=Zo,o.loadVectorTile=Ew,o.makeRequest=Yr,o.mapValue=function(i,t,n,l,u){return fi((i-t)/(n-t)*(u-l)+l,l,u)},o.mercatorScale=nm,o.mercatorXfromLng=Pl,o.mercatorYfromLat=Ra,o.mercatorZfromAltitude=Oa,o.mul=mm,o.mul$1=N2,o.multiply=ed,o.multiply$1=Yd,o.multiply$2=_m,o.nextPowerOfTwo=zs,o.normalize=Oo,o.normalize$1=j2,o.normalize$2=P_,o.number=Ji,o.ortho=function(i,t,n,l,u,p,g){var b=1/(t-n),S=1/(l-u),C=1/(p-g);return i[0]=-2*b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*C,i[11]=0,i[12]=(t+n)*b,i[13]=(u+l)*S,i[14]=(g+p)*C,i[15]=1,i},o.pbf=ff,o.perspective=function(i,t,n,l,u){var p,g=1/Math.tan(t/2);return i[0]=g/n,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=g,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,u!=null&&u!==1/0?(i[10]=(u+l)*(p=1/(l-u)),i[14]=2*u*l*p):(i[10]=-1,i[14]=-2*l),i},o.pick=function(i,t){const n={};for(let l=0;l<t.length;l++){const u=t[l];u in i&&(n[u]=i[u])}return n},o.plugin=Je,o.pointGeometry=Fe,o.polesInViewport=function(i){const t=Ja(new Float64Array(16));ed(t,i.pixelMatrix,i.globeMatrix);const n=[0,tl,0],l=[0,il,0];return Qr(n,n,t),Qr(l,l,t),[n[0]>0&&n[0]<=i.width&&n[1]>0&&n[1]<=i.height&&!n1(i,new En(i.center.lat,90)),l[0]>0&&l[0]<=i.width&&l[1]>0&&l[1]<=i.height&&!n1(i,new En(i.center.lat,-90))]},o.polygonContainsPoint=Qu,o.polygonIntersectsBox=dm,o.polygonIntersectsPolygon=Ep,o.polygonizeBounds=function(i,t,n=0,l=!0){const u=new Fe(n,n),p=i.sub(u),g=t.add(u),b=[p,new Fe(g.x,p.y),g,new Fe(p.x,g.y)];return l&&b.push(p.clone()),b},o.posAttributes=_f,o.postMapLoadEvent=ve,o.postPerformanceEvent=He,o.postTurnstileEvent=Q,o.potpack=Vm,o.prevPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},o.radToDeg=Ht,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(i){return i({pluginStatus:me,pluginURL:ue}),we.on("pluginStateChange",i),i},o.removeAuthState=function(i){Qe.delete(i)},o.renderColorRamp=nf,o.resample=sm,o.rotateX=fm,o.rotateX$1=L_,o.rotateY=ef,o.rotateY$1=R_,o.rotateZ=function(i,t,n){var l=Math.sin(n),u=Math.cos(n),p=t[0],g=t[1],b=t[2],S=t[3],C=t[4],P=t[5],O=t[6],B=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=p*u+C*l,i[1]=g*u+P*l,i[2]=b*u+O*l,i[3]=S*u+B*l,i[4]=C*u-p*l,i[5]=P*u-g*l,i[6]=O*u-b*l,i[7]=B*u-S*l,i},o.rotateZ$1=function(i,t,n){n*=.5;var l=t[0],u=t[1],p=t[2],g=t[3],b=Math.sin(n),S=Math.cos(n);return i[0]=l*S+u*b,i[1]=u*S-l*b,i[2]=p*S+g*b,i[3]=g*S-p*b,i},o.scale=td,o.scale$1=D_,o.scale$2=za,o.scaleAndAdd=Jd,o.set=function(i,t,n,l){return i[0]=t,i[1]=n,i[2]=l,i},o.setCacheLimits=function(i,t){Ti=i,Di=t},o.setColumn=function(i,t,n){i[4*t+0]=n[0],i[4*t+1]=n[1],i[4*t+2]=n[2],i[4*t+3]=n[3]},o.setRTLTextPlugin=function(i,t,n=!1){if(me===ce||me===de||me===ie)throw new Error("setRTLTextPlugin cannot be called multiple times.");ue=bi.resolveURL(i),me=ce,se=t,De(),n||st()},o.smoothstep=pn,o.spec=yt,o.squaredLength=function(i){var t=i[0],n=i[1],l=i[2];return t*t+n*n+l*l},o.storeAuthState=function(i,t){t?Qe.add(i):Qe.delete(i)},o.sub=zl,o.subtract=Kd,o.symbolSize=Av,o.tileAABB=function(i,t,n,l,u,p,g,b,S){if(S.name==="globe")return Kv(i,t,new Up(n,l,u));const C=ud({z:n,x:l,y:u},S);return new zo([(p+C.x/C.scale)*t,t*(C.y/C.scale),g],[(p+C.x2/C.scale)*t,t*(C.y2/C.scale),b])},o.tileCornersToBounds=Jp,o.tileTransform=ud,o.transformMat3=function(i,t,n){var l=t[0],u=t[1],p=t[2];return i[0]=l*n[0]+u*n[3]+p*n[6],i[1]=l*n[1]+u*n[4]+p*n[7],i[2]=l*n[2]+u*n[5]+p*n[8],i},o.transformMat4=Qr,o.transformMat4$1=yu,o.transformQuat=k_,o.transitionTileAABBinECEF=Cg,o.translate=Qh,o.transpose=function(i,t){if(i===t){var n=t[1],l=t[2],u=t[5];i[1]=t[3],i[2]=t[6],i[3]=n,i[5]=t[7],i[6]=l,i[7]=u}else i[0]=t[0],i[1]=t[3],i[2]=t[6],i[3]=t[1],i[4]=t[4],i[5]=t[7],i[6]=t[2],i[7]=t[5],i[8]=t[8];return i},o.triggerPluginCompletionEvent=xe,o.uniqueId=Is,o.updateGlobeVertexNormal=function(i,t,n,l,u){const p=5*t+2;i.float32[p+0]=n,i.float32[p+1]=l,i.float32[p+2]=u},o.validateCustomStyleLayer=function(i){const t=[],n=i.id;return n===void 0&&t.push({message:`layers.${n}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${n}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},o.validateFilter=i=>kl(ac(i)),o.validateFog=i=>kl(qu(i)),o.validateLayer=i=>kl(Nd(i)),o.validateLight=i=>kl(re(i)),o.validateSource=i=>kl(hu(i)),o.validateStyle=jh,o.validateTerrain=i=>kl(Il(i)),o.values=ts,o.vectorTile=Rp,o.version=V,o.warnOnce=Ce,o.window=D,o.wrap=mn}),x(["./shared"],function(o){function D(pe){if(typeof pe=="number"||typeof pe=="boolean"||typeof pe=="string"||pe==null)return JSON.stringify(pe);if(Array.isArray(pe)){let Q="[";for(const fe of pe)Q+=`${D(fe)},`;return`${Q}]`}let q="{";for(const Q of Object.keys(pe).sort())q+=`${Q}:${D(pe[Q])},`;return`${q}}`}function V(pe){let q="";for(const Q of o.refProperties)q+=`/${D(pe[Q])}`;return q}class X{constructor(q){this.keyCache={},q&&this.replace(q)}replace(q){this._layerConfigs={},this._layers={},this.update(q,[])}update(q,Q){for(const ve of q)this._layerConfigs[ve.id]=ve,(this._layers[ve.id]=o.createStyleLayer(ve)).compileFilter(),this.keyCache[ve.id]&&delete this.keyCache[ve.id];for(const ve of Q)delete this.keyCache[ve],delete this._layerConfigs[ve],delete this._layers[ve];this.familiesBySource={};const fe=function(ve,Oe){const He={};for(let Be=0;Be<ve.length;Be++){const Qe=Oe&&Oe[ve[Be].id]||V(ve[Be]);Oe&&(Oe[ve[Be].id]=Qe);let Tt=He[Qe];Tt||(Tt=He[Qe]=[]),Tt.push(ve[Be])}const Ye=[];for(const Be in He)Ye.push(He[Be]);return Ye}(o.values(this._layerConfigs),this.keyCache);for(const ve of fe){const Oe=ve.map(ii=>this._layers[ii.id]),He=Oe[0];if(He.visibility==="none")continue;const Ye=He.source||"";let Be=this.familiesBySource[Ye];Be||(Be=this.familiesBySource[Ye]={});const Qe=He.sourceLayer||"_geojsonTileLayer";let Tt=Be[Qe];Tt||(Tt=Be[Qe]=[]),Tt.push(Oe)}}}class Z{loadTile(q,Q){const{uid:fe,encoding:ve,rawImageData:Oe,padding:He,buildQuadTree:Ye}=q,Be=o.window.ImageBitmap&&Oe instanceof o.window.ImageBitmap?this.getImageData(Oe,He):Oe;Q(null,new o.DEMData(fe,Be,ve,He<1,Ye))}getImageData(q,Q){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(q.width,q.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=q.width,this.offscreenCanvas.height=q.height,this.offscreenCanvasContext.drawImage(q,0,0,q.width,q.height);const fe=this.offscreenCanvasContext.getImageData(-Q,-Q,q.width+2*Q,q.height+2*Q);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),fe}}var he=function pe(q,Q){var fe,ve=q&&q.type;if(ve==="FeatureCollection")for(fe=0;fe<q.features.length;fe++)pe(q.features[fe],Q);else if(ve==="GeometryCollection")for(fe=0;fe<q.geometries.length;fe++)pe(q.geometries[fe],Q);else if(ve==="Feature")pe(q.geometry,Q);else if(ve==="Polygon")Se(q.coordinates,Q);else if(ve==="MultiPolygon")for(fe=0;fe<q.coordinates.length;fe++)Se(q.coordinates[fe],Q);return q};function Se(pe,q){if(pe.length!==0){_e(pe[0],q);for(var Q=1;Q<pe.length;Q++)_e(pe[Q],!q)}}function _e(pe,q){for(var Q=0,fe=0,ve=0,Oe=pe.length,He=Oe-1;ve<Oe;He=ve++){var Ye=(pe[ve][0]-pe[He][0])*(pe[He][1]+pe[ve][1]),Be=Q+Ye;fe+=Math.abs(Q)>=Math.abs(Ye)?Q-Be+Ye:Ye-Be+Q,Q=Be}Q+fe>=0!=!!q&&pe.reverse()}const Re=o.VectorTileFeature.prototype.toGeoJSON;class nt{constructor(q){this._feature=q,this.extent=o.EXTENT,this.type=q.type,this.properties=q.tags,"id"in q&&!isNaN(q.id)&&(this.id=parseInt(q.id,10))}loadGeometry(){if(this._feature.type===1){const q=[];for(const Q of this._feature.geometry)q.push([new o.pointGeometry(Q[0],Q[1])]);return q}{const q=[];for(const Q of this._feature.geometry){const fe=[];for(const ve of Q)fe.push(new o.pointGeometry(ve[0],ve[1]));q.push(fe)}return q}}toGeoJSON(q,Q,fe){return Re.call(this,q,Q,fe)}}class ke{constructor(q){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=q.length,this._features=q}feature(q){return new nt(this._features[q])}}var Le={exports:{}},$e=o.pointGeometry,Et=o.vectorTile.VectorTileFeature,Fe=z;function z(pe,q){this.options=q||{},this.features=pe,this.length=pe.length}function Lt(pe,q){this.id=typeof pe.id=="number"?pe.id:void 0,this.type=pe.type,this.rawGeometry=pe.type===1?[pe.geometry]:pe.geometry,this.properties=pe.tags,this.extent=q||4096}z.prototype.feature=function(pe){return new Lt(this.features[pe],this.options.extent)},Lt.prototype.loadGeometry=function(){var pe=this.rawGeometry;this.geometry=[];for(var q=0;q<pe.length;q++){for(var Q=pe[q],fe=[],ve=0;ve<Q.length;ve++)fe.push(new $e(Q[ve][0],Q[ve][1]));this.geometry.push(fe)}return this.geometry},Lt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var pe=this.geometry,q=1/0,Q=-1/0,fe=1/0,ve=-1/0,Oe=0;Oe<pe.length;Oe++)for(var He=pe[Oe],Ye=0;Ye<He.length;Ye++){var Be=He[Ye];q=Math.min(q,Be.x),Q=Math.max(Q,Be.x),fe=Math.min(fe,Be.y),ve=Math.max(ve,Be.y)}return[q,fe,Q,ve]},Lt.prototype.toGeoJSON=Et.prototype.toGeoJSON;var ot=o.pbf,bt=Fe;function Ht(pe){var q=new ot;return function(Q,fe){for(var ve in Q.layers)fe.writeMessage(3,Yt,Q.layers[ve])}(pe,q),q.finish()}function Yt(pe,q){var Q;q.writeVarintField(15,pe.version||1),q.writeStringField(1,pe.name||""),q.writeVarintField(5,pe.extent||4096);var fe={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<pe.length;Q++)fe.feature=pe.feature(Q),q.writeMessage(2,Wt,fe);var ve=fe.keys;for(Q=0;Q<ve.length;Q++)q.writeStringField(3,ve[Q]);var Oe=fe.values;for(Q=0;Q<Oe.length;Q++)q.writeMessage(4,mn,Oe[Q])}function Wt(pe,q){var Q=pe.feature;Q.id!==void 0&&q.writeVarintField(1,Q.id),q.writeMessage(2,hi,pe),q.writeVarintField(3,Q.type),q.writeMessage(4,pn,Q)}function hi(pe,q){var Q=pe.feature,fe=pe.keys,ve=pe.values,Oe=pe.keycache,He=pe.valuecache;for(var Ye in Q.properties){var Be=Q.properties[Ye],Qe=Oe[Ye];if(Be!==null){Qe===void 0&&(fe.push(Ye),Oe[Ye]=Qe=fe.length-1),q.writeVarint(Qe);var Tt=typeof Be;Tt!=="string"&&Tt!=="boolean"&&Tt!=="number"&&(Be=JSON.stringify(Be));var ii=Tt+":"+Be,Ot=He[ii];Ot===void 0&&(ve.push(Be),He[ii]=Ot=ve.length-1),q.writeVarint(Ot)}}}function ri(pe,q){return(q<<3)+(7&pe)}function fi(pe){return pe<<1^pe>>31}function pn(pe,q){for(var Q=pe.loadGeometry(),fe=pe.type,ve=0,Oe=0,He=Q.length,Ye=0;Ye<He;Ye++){var Be=Q[Ye],Qe=1;fe===1&&(Qe=Be.length),q.writeVarint(ri(1,Qe));for(var Tt=fe===3?Be.length-1:Be.length,ii=0;ii<Tt;ii++){ii===1&&fe!==1&&q.writeVarint(ri(2,Tt-1));var Ot=Be[ii].x-ve,Ai=Be[ii].y-Oe;q.writeVarint(fi(Ot)),q.writeVarint(fi(Ai)),ve+=Ot,Oe+=Ai}fe===3&&q.writeVarint(ri(7,1))}}function mn(pe,q){var Q=typeof pe;Q==="string"?q.writeStringField(1,pe):Q==="boolean"?q.writeBooleanField(7,pe):Q==="number"&&(pe%1!=0?q.writeDoubleField(3,pe):pe<0?q.writeSVarintField(6,pe):q.writeVarintField(5,pe))}function tn(pe,q,Q,fe,ve,Oe){if(ve-fe<=Q)return;const He=fe+ve>>1;ts(pe,q,He,fe,ve,Oe%2),tn(pe,q,Q,fe,He-1,Oe+1),tn(pe,q,Q,He+1,ve,Oe+1)}function ts(pe,q,Q,fe,ve,Oe){for(;ve>fe;){if(ve-fe>600){const Qe=ve-fe+1,Tt=Q-fe+1,ii=Math.log(Qe),Ot=.5*Math.exp(2*ii/3),Ai=.5*Math.sqrt(ii*Ot*(Qe-Ot)/Qe)*(Tt-Qe/2<0?-1:1);ts(pe,q,Q,Math.max(fe,Math.floor(Q-Tt*Ot/Qe+Ai)),Math.min(ve,Math.floor(Q+(Qe-Tt)*Ot/Qe+Ai)),Oe)}const He=q[2*Q+Oe];let Ye=fe,Be=ve;for(Fn(pe,q,fe,Q),q[2*ve+Oe]>He&&Fn(pe,q,fe,ve);Ye<Be;){for(Fn(pe,q,Ye,Be),Ye++,Be--;q[2*Ye+Oe]<He;)Ye++;for(;q[2*Be+Oe]>He;)Be--}q[2*fe+Oe]===He?Fn(pe,q,fe,Be):(Be++,Fn(pe,q,Be,ve)),Be<=Q&&(fe=Be+1),Q<=Be&&(ve=Be-1)}}function Fn(pe,q,Q,fe){Nn(pe,Q,fe),Nn(q,2*Q,2*fe),Nn(q,2*Q+1,2*fe+1)}function Nn(pe,q,Q){const fe=pe[q];pe[q]=pe[Q],pe[Q]=fe}function Is(pe,q,Q,fe){const ve=pe-Q,Oe=q-fe;return ve*ve+Oe*Oe}Le.exports=Ht,Le.exports.fromVectorTileJs=Ht,Le.exports.fromGeojsonVt=function(pe,q){q=q||{};var Q={};for(var fe in pe)Q[fe]=new bt(pe[fe].features,q),Q[fe].name=fe,Q[fe].version=q.version,Q[fe].extent=q.extent;return Ht({layers:Q})},Le.exports.GeoJSONWrapper=bt;const xs=pe=>pe[0],zs=pe=>pe[1];class Bs{constructor(q,Q=xs,fe=zs,ve=64,Oe=Float64Array){this.nodeSize=ve,this.points=q;const He=q.length<65536?Uint16Array:Uint32Array,Ye=this.ids=new He(q.length),Be=this.coords=new Oe(2*q.length);for(let Qe=0;Qe<q.length;Qe++)Ye[Qe]=Qe,Be[2*Qe]=Q(q[Qe]),Be[2*Qe+1]=fe(q[Qe]);tn(Ye,Be,ve,0,Ye.length-1,0)}range(q,Q,fe,ve){return function(Oe,He,Ye,Be,Qe,Tt,ii){const Ot=[0,Oe.length-1,0],Ai=[];let Ci,yi;for(;Ot.length;){const Li=Ot.pop(),an=Ot.pop(),Mn=Ot.pop();if(an-Mn<=ii){for(let Rn=Mn;Rn<=an;Rn++)Ci=He[2*Rn],yi=He[2*Rn+1],Ci>=Ye&&Ci<=Qe&&yi>=Be&&yi<=Tt&&Ai.push(Oe[Rn]);continue}const bi=Math.floor((Mn+an)/2);Ci=He[2*bi],yi=He[2*bi+1],Ci>=Ye&&Ci<=Qe&&yi>=Be&&yi<=Tt&&Ai.push(Oe[bi]);const Xn=(Li+1)%2;(Li===0?Ye<=Ci:Be<=yi)&&(Ot.push(Mn),Ot.push(bi-1),Ot.push(Xn)),(Li===0?Qe>=Ci:Tt>=yi)&&(Ot.push(bi+1),Ot.push(an),Ot.push(Xn))}return Ai}(this.ids,this.coords,q,Q,fe,ve,this.nodeSize)}within(q,Q,fe){return function(ve,Oe,He,Ye,Be,Qe){const Tt=[0,ve.length-1,0],ii=[],Ot=Be*Be;for(;Tt.length;){const Ai=Tt.pop(),Ci=Tt.pop(),yi=Tt.pop();if(Ci-yi<=Qe){for(let Xn=yi;Xn<=Ci;Xn++)Is(Oe[2*Xn],Oe[2*Xn+1],He,Ye)<=Ot&&ii.push(ve[Xn]);continue}const Li=Math.floor((yi+Ci)/2),an=Oe[2*Li],Mn=Oe[2*Li+1];Is(an,Mn,He,Ye)<=Ot&&ii.push(ve[Li]);const bi=(Ai+1)%2;(Ai===0?He-Be<=an:Ye-Be<=Mn)&&(Tt.push(yi),Tt.push(Li-1),Tt.push(bi)),(Ai===0?He+Be>=an:Ye+Be>=Mn)&&(Tt.push(Li+1),Tt.push(Ci),Tt.push(bi))}return ii}(this.ids,this.coords,q,Q,fe,this.nodeSize)}}const Hr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:pe=>pe},Zr=Math.fround||(ds=new Float32Array(1),pe=>(ds[0]=+pe,ds[0]));var ds;class Sr{constructor(q){this.options=zt(Object.create(Hr),q),this.trees=new Array(this.options.maxZoom+1)}load(q){const{log:Q,minZoom:fe,maxZoom:ve,nodeSize:Oe}=this.options;Q&&console.time("total time");const He=`prepare ${q.length} points`;Q&&console.time(He),this.points=q;let Ye=[];for(let Be=0;Be<q.length;Be++)q[Be].geometry&&Ye.push(Uo(q[Be],Be));this.trees[ve+1]=new Bs(Ye,ui,Xt,Oe,Float32Array),Q&&console.timeEnd(He);for(let Be=ve;Be>=fe;Be--){const Qe=+Date.now();Ye=this._cluster(Ye,Be),this.trees[Be]=new Bs(Ye,ui,Xt,Oe,Float32Array),Q&&console.log("z%d: %d clusters in %dms",Be,Ye.length,+Date.now()-Qe)}return Q&&console.timeEnd("total time"),this}getClusters(q,Q){let fe=((q[0]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,q[1]));let Oe=q[2]===180?180:((q[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,q[3]));if(q[2]-q[0]>=360)fe=-180,Oe=180;else if(fe>Oe){const Tt=this.getClusters([fe,ve,180,He],Q),ii=this.getClusters([-180,ve,Oe,He],Q);return Tt.concat(ii)}const Ye=this.trees[this._limitZoom(Q)],Be=Ye.range(tt(fe),kt(He),tt(Oe),kt(ve)),Qe=[];for(const Tt of Be){const ii=Ye.points[Tt];Qe.push(ii.numPoints?Ce(ii):this.points[ii.index])}return Qe}getChildren(q){const Q=this._getOriginId(q),fe=this._getOriginZoom(q),ve="No cluster with the specified id.",Oe=this.trees[fe];if(!Oe)throw new Error(ve);const He=Oe.points[Q];if(!He)throw new Error(ve);const Ye=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),Be=Oe.within(He.x,He.y,Ye),Qe=[];for(const Tt of Be){const ii=Oe.points[Tt];ii.parentId===q&&Qe.push(ii.numPoints?Ce(ii):this.points[ii.index])}if(Qe.length===0)throw new Error(ve);return Qe}getLeaves(q,Q,fe){const ve=[];return this._appendLeaves(ve,q,Q=Q||10,fe=fe||0,0),ve}getTile(q,Q,fe){const ve=this.trees[this._limitZoom(q)],Oe=Math.pow(2,q),{extent:He,radius:Ye}=this.options,Be=Ye/He,Qe=(fe-Be)/Oe,Tt=(fe+1+Be)/Oe,ii={features:[]};return this._addTileFeatures(ve.range((Q-Be)/Oe,Qe,(Q+1+Be)/Oe,Tt),ve.points,Q,fe,Oe,ii),Q===0&&this._addTileFeatures(ve.range(1-Be/Oe,Qe,1,Tt),ve.points,Oe,fe,Oe,ii),Q===Oe-1&&this._addTileFeatures(ve.range(0,Qe,Be/Oe,Tt),ve.points,-1,fe,Oe,ii),ii.features.length?ii:null}getClusterExpansionZoom(q){let Q=this._getOriginZoom(q)-1;for(;Q<=this.options.maxZoom;){const fe=this.getChildren(q);if(Q++,fe.length!==1)break;q=fe[0].properties.cluster_id}return Q}_appendLeaves(q,Q,fe,ve,Oe){const He=this.getChildren(Q);for(const Ye of He){const Be=Ye.properties;if(Be&&Be.cluster?Oe+Be.point_count<=ve?Oe+=Be.point_count:Oe=this._appendLeaves(q,Be.cluster_id,fe,ve,Oe):Oe<ve?Oe++:q.push(Ye),q.length===fe)break}return Oe}_addTileFeatures(q,Q,fe,ve,Oe,He){for(const Ye of q){const Be=Q[Ye],Qe=Be.numPoints;let Tt,ii,Ot;if(Qe)Tt=Ve(Be),ii=Be.x,Ot=Be.y;else{const yi=this.points[Be.index];Tt=yi.properties,ii=tt(yi.geometry.coordinates[0]),Ot=kt(yi.geometry.coordinates[1])}const Ai={type:1,geometry:[[Math.round(this.options.extent*(ii*Oe-fe)),Math.round(this.options.extent*(Ot*Oe-ve))]],tags:Tt};let Ci;Qe?Ci=Be.id:this.options.generateId?Ci=Be.index:this.points[Be.index].id&&(Ci=this.points[Be.index].id),Ci!==void 0&&(Ai.id=Ci),He.features.push(Ai)}}_limitZoom(q){return Math.max(this.options.minZoom,Math.min(Math.floor(+q),this.options.maxZoom+1))}_cluster(q,Q){const fe=[],{radius:ve,extent:Oe,reduce:He,minPoints:Ye}=this.options,Be=ve/(Oe*Math.pow(2,Q));for(let Qe=0;Qe<q.length;Qe++){const Tt=q[Qe];if(Tt.zoom<=Q)continue;Tt.zoom=Q;const ii=this.trees[Q+1],Ot=ii.within(Tt.x,Tt.y,Be),Ai=Tt.numPoints||1;let Ci=Ai;for(const yi of Ot){const Li=ii.points[yi];Li.zoom>Q&&(Ci+=Li.numPoints||1)}if(Ci>Ai&&Ci>=Ye){let yi=Tt.x*Ai,Li=Tt.y*Ai,an=He&&Ai>1?this._map(Tt,!0):null;const Mn=(Qe<<5)+(Q+1)+this.points.length;for(const bi of Ot){const Xn=ii.points[bi];if(Xn.zoom<=Q)continue;Xn.zoom=Q;const Rn=Xn.numPoints||1;yi+=Xn.x*Rn,Li+=Xn.y*Rn,Xn.parentId=Mn,He&&(an||(an=this._map(Tt,!0)),He(an,this._map(Xn)))}Tt.parentId=Mn,fe.push(bs(yi/Ci,Li/Ci,Mn,Ci,an))}else if(fe.push(Tt),Ci>1)for(const yi of Ot){const Li=ii.points[yi];Li.zoom<=Q||(Li.zoom=Q,fe.push(Li))}}return fe}_getOriginId(q){return q-this.points.length>>5}_getOriginZoom(q){return(q-this.points.length)%32}_map(q,Q){if(q.numPoints)return Q?zt({},q.properties):q.properties;const fe=this.points[q.index].properties,ve=this.options.map(fe);return Q&&ve===fe?zt({},ve):ve}}function bs(pe,q,Q,fe,ve){return{x:Zr(pe),y:Zr(q),zoom:1/0,id:Q,parentId:-1,numPoints:fe,properties:ve}}function Uo(pe,q){const[Q,fe]=pe.geometry.coordinates;return{x:Zr(tt(Q)),y:Zr(kt(fe)),zoom:1/0,index:q,parentId:-1}}function Ce(pe){return{type:"Feature",id:pe.id,properties:Ve(pe),geometry:{type:"Point",coordinates:[(q=pe.x,360*(q-.5)),ct(pe.y)]}};var q}function Ve(pe){const q=pe.numPoints,Q=q>=1e4?`${Math.round(q/1e3)}k`:q>=1e3?Math.round(q/100)/10+"k":q;return zt(zt({},pe.properties),{cluster:!0,cluster_id:pe.id,point_count:q,point_count_abbreviated:Q})}function tt(pe){return pe/360+.5}function kt(pe){const q=Math.sin(pe*Math.PI/180),Q=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return Q<0?0:Q>1?1:Q}function ct(pe){const q=(180-360*pe)*Math.PI/180;return 360*Math.atan(Math.exp(q))/Math.PI-90}function zt(pe,q){for(const Q in q)pe[Q]=q[Q];return pe}function ui(pe){return pe.x}function Xt(pe){return pe.y}function Kt(pe,q,Q,fe){for(var ve,Oe=fe,He=Q-q>>1,Ye=Q-q,Be=pe[q],Qe=pe[q+1],Tt=pe[Q],ii=pe[Q+1],Ot=q+3;Ot<Q;Ot+=3){var Ai=Nt(pe[Ot],pe[Ot+1],Be,Qe,Tt,ii);if(Ai>Oe)ve=Ot,Oe=Ai;else if(Ai===Oe){var Ci=Math.abs(Ot-He);Ci<Ye&&(ve=Ot,Ye=Ci)}}Oe>fe&&(ve-q>3&&Kt(pe,q,ve,fe),pe[ve+2]=Oe,Q-ve>3&&Kt(pe,ve,Q,fe))}function Nt(pe,q,Q,fe,ve,Oe){var He=ve-Q,Ye=Oe-fe;if(He!==0||Ye!==0){var Be=((pe-Q)*He+(q-fe)*Ye)/(He*He+Ye*Ye);Be>1?(Q=ve,fe=Oe):Be>0&&(Q+=He*Be,fe+=Ye*Be)}return(He=pe-Q)*He+(Ye=q-fe)*Ye}function pi(pe,q,Q,fe){var ve={id:pe===void 0?null:pe,type:q,geometry:Q,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Oe){var He=Oe.geometry,Ye=Oe.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")di(Oe,He);else if(Ye==="Polygon"||Ye==="MultiLineString")for(var Be=0;Be<He.length;Be++)di(Oe,He[Be]);else if(Ye==="MultiPolygon")for(Be=0;Be<He.length;Be++)for(var Qe=0;Qe<He[Be].length;Qe++)di(Oe,He[Be][Qe])}(ve),ve}function di(pe,q){for(var Q=0;Q<q.length;Q+=3)pe.minX=Math.min(pe.minX,q[Q]),pe.minY=Math.min(pe.minY,q[Q+1]),pe.maxX=Math.max(pe.maxX,q[Q]),pe.maxY=Math.max(pe.maxY,q[Q+1])}function Ti(pe,q,Q,fe){if(q.geometry){var ve=q.geometry.coordinates,Oe=q.geometry.type,He=Math.pow(Q.tolerance/((1<<Q.maxZoom)*Q.extent),2),Ye=[],Be=q.id;if(Q.promoteId?Be=q.properties[Q.promoteId]:Q.generateId&&(Be=fe||0),Oe==="Point")Di(ve,Ye);else if(Oe==="MultiPoint")for(var Qe=0;Qe<ve.length;Qe++)Di(ve[Qe],Ye);else if(Oe==="LineString")Yi(ve,Ye,He,!1);else if(Oe==="MultiLineString"){if(Q.lineMetrics){for(Qe=0;Qe<ve.length;Qe++)Yi(ve[Qe],Ye=[],He,!1),pe.push(pi(Be,"LineString",Ye,q.properties));return}_n(ve,Ye,He,!1)}else if(Oe==="Polygon")_n(ve,Ye,He,!0);else{if(Oe!=="MultiPolygon"){if(Oe==="GeometryCollection"){for(Qe=0;Qe<q.geometry.geometries.length;Qe++)Ti(pe,{id:Be,geometry:q.geometry.geometries[Qe],properties:q.properties},Q,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qe=0;Qe<ve.length;Qe++){var Tt=[];_n(ve[Qe],Tt,He,!0),Ye.push(Tt)}}pe.push(pi(Be,Oe,Ye,q.properties))}}function Di(pe,q){q.push(cn(pe[0])),q.push(Yn(pe[1])),q.push(0)}function Yi(pe,q,Q,fe){for(var ve,Oe,He=0,Ye=0;Ye<pe.length;Ye++){var Be=cn(pe[Ye][0]),Qe=Yn(pe[Ye][1]);q.push(Be),q.push(Qe),q.push(0),Ye>0&&(He+=fe?(ve*Qe-Be*Oe)/2:Math.sqrt(Math.pow(Be-ve,2)+Math.pow(Qe-Oe,2))),ve=Be,Oe=Qe}var Tt=q.length-3;q[2]=1,Kt(q,0,Tt,Q),q[Tt+2]=1,q.size=Math.abs(He),q.start=0,q.end=q.size}function _n(pe,q,Q,fe){for(var ve=0;ve<pe.length;ve++){var Oe=[];Yi(pe[ve],Oe,Q,fe),q.push(Oe)}}function cn(pe){return pe/360+.5}function Yn(pe){var q=Math.sin(pe*Math.PI/180),Q=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return Q<0?0:Q>1?1:Q}function nr(pe,q,Q,fe,ve,Oe,He,Ye){if(fe/=q,Oe>=(Q/=q)&&He<fe)return pe;if(He<Q||Oe>=fe)return null;for(var Be=[],Qe=0;Qe<pe.length;Qe++){var Tt=pe[Qe],ii=Tt.geometry,Ot=Tt.type,Ai=ve===0?Tt.minX:Tt.minY,Ci=ve===0?Tt.maxX:Tt.maxY;if(Ai>=Q&&Ci<fe)Be.push(Tt);else if(!(Ci<Q||Ai>=fe)){var yi=[];if(Ot==="Point"||Ot==="MultiPoint")Zs(ii,yi,Q,fe,ve);else if(Ot==="LineString")ks(ii,yi,Q,fe,ve,!1,Ye.lineMetrics);else if(Ot==="MultiLineString")Ys(ii,yi,Q,fe,ve,!1);else if(Ot==="Polygon")Ys(ii,yi,Q,fe,ve,!0);else if(Ot==="MultiPolygon")for(var Li=0;Li<ii.length;Li++){var an=[];Ys(ii[Li],an,Q,fe,ve,!0),an.length&&yi.push(an)}if(yi.length){if(Ye.lineMetrics&&Ot==="LineString"){for(Li=0;Li<yi.length;Li++)Be.push(pi(Tt.id,Ot,yi[Li],Tt.tags));continue}Ot!=="LineString"&&Ot!=="MultiLineString"||(yi.length===1?(Ot="LineString",yi=yi[0]):Ot="MultiLineString"),Ot!=="Point"&&Ot!=="MultiPoint"||(Ot=yi.length===3?"Point":"MultiPoint"),Be.push(pi(Tt.id,Ot,yi,Tt.tags))}}}return Be.length?Be:null}function Zs(pe,q,Q,fe,ve){for(var Oe=0;Oe<pe.length;Oe+=3){var He=pe[Oe+ve];He>=Q&&He<=fe&&(q.push(pe[Oe]),q.push(pe[Oe+1]),q.push(pe[Oe+2]))}}function ks(pe,q,Q,fe,ve,Oe,He){for(var Ye,Be,Qe=Yr(pe),Tt=ve===0?rr:Cr,ii=pe.start,Ot=0;Ot<pe.length-3;Ot+=3){var Ai=pe[Ot],Ci=pe[Ot+1],yi=pe[Ot+2],Li=pe[Ot+3],an=pe[Ot+4],Mn=ve===0?Ai:Ci,bi=ve===0?Li:an,Xn=!1;He&&(Ye=Math.sqrt(Math.pow(Ai-Li,2)+Math.pow(Ci-an,2))),Mn<Q?bi>Q&&(Be=Tt(Qe,Ai,Ci,Li,an,Q),He&&(Qe.start=ii+Ye*Be)):Mn>fe?bi<fe&&(Be=Tt(Qe,Ai,Ci,Li,an,fe),He&&(Qe.start=ii+Ye*Be)):Or(Qe,Ai,Ci,yi),bi<Q&&Mn>=Q&&(Be=Tt(Qe,Ai,Ci,Li,an,Q),Xn=!0),bi>fe&&Mn<=fe&&(Be=Tt(Qe,Ai,Ci,Li,an,fe),Xn=!0),!Oe&&Xn&&(He&&(Qe.end=ii+Ye*Be),q.push(Qe),Qe=Yr(pe)),He&&(ii+=Ye)}var Rn=pe.length-3;Ai=pe[Rn],Ci=pe[Rn+1],yi=pe[Rn+2],(Mn=ve===0?Ai:Ci)>=Q&&Mn<=fe&&Or(Qe,Ai,Ci,yi),Rn=Qe.length-3,Oe&&Rn>=3&&(Qe[Rn]!==Qe[0]||Qe[Rn+1]!==Qe[1])&&Or(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&q.push(Qe)}function Yr(pe){var q=[];return q.size=pe.size,q.start=pe.start,q.end=pe.end,q}function Ys(pe,q,Q,fe,ve,Oe){for(var He=0;He<pe.length;He++)ks(pe[He],q,Q,fe,ve,Oe,!1)}function Or(pe,q,Q,fe){pe.push(q),pe.push(Q),pe.push(fe)}function rr(pe,q,Q,fe,ve,Oe){var He=(Oe-q)/(fe-q);return pe.push(Oe),pe.push(Q+(ve-Q)*He),pe.push(1),He}function Cr(pe,q,Q,fe,ve,Oe){var He=(Oe-Q)/(ve-Q);return pe.push(q+(fe-q)*He),pe.push(Oe),pe.push(1),He}function ia(pe,q){for(var Q=[],fe=0;fe<pe.length;fe++){var ve,Oe=pe[fe],He=Oe.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")ve=Yl(Oe.geometry,q);else if(He==="MultiLineString"||He==="Polygon"){ve=[];for(var Ye=0;Ye<Oe.geometry.length;Ye++)ve.push(Yl(Oe.geometry[Ye],q))}else if(He==="MultiPolygon")for(ve=[],Ye=0;Ye<Oe.geometry.length;Ye++){for(var Be=[],Qe=0;Qe<Oe.geometry[Ye].length;Qe++)Be.push(Yl(Oe.geometry[Ye][Qe],q));ve.push(Be)}Q.push(pi(Oe.id,He,ve,Oe.tags))}return Q}function Yl(pe,q){var Q=[];Q.size=pe.size,pe.start!==void 0&&(Q.start=pe.start,Q.end=pe.end);for(var fe=0;fe<pe.length;fe+=3)Q.push(pe[fe]+q,pe[fe+1],pe[fe+2]);return Q}function dl(pe,q){if(pe.transformed)return pe;var Q,fe,ve,Oe=1<<pe.z,He=pe.x,Ye=pe.y;for(Q=0;Q<pe.features.length;Q++){var Be=pe.features[Q],Qe=Be.geometry,Tt=Be.type;if(Be.geometry=[],Tt===1)for(fe=0;fe<Qe.length;fe+=2)Be.geometry.push(oo(Qe[fe],Qe[fe+1],q,Oe,He,Ye));else for(fe=0;fe<Qe.length;fe++){var ii=[];for(ve=0;ve<Qe[fe].length;ve+=2)ii.push(oo(Qe[fe][ve],Qe[fe][ve+1],q,Oe,He,Ye));Be.geometry.push(ii)}}return pe.transformed=!0,pe}function oo(pe,q,Q,fe,ve,Oe){return[Math.round(Q*(pe*fe-ve)),Math.round(Q*(q*fe-Oe))]}function Eo(pe,q,Q,fe,ve){for(var Oe=q===ve.maxZoom?0:ve.tolerance/((1<<q)*ve.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Q,y:fe,z:q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<pe.length;Ye++){He.numFeatures++,Ea(He,pe[Ye],Oe,ve);var Be=pe[Ye].minX,Qe=pe[Ye].minY,Tt=pe[Ye].maxX,ii=pe[Ye].maxY;Be<He.minX&&(He.minX=Be),Qe<He.minY&&(He.minY=Qe),Tt>He.maxX&&(He.maxX=Tt),ii>He.maxY&&(He.maxY=ii)}return He}function Ea(pe,q,Q,fe){var ve=q.geometry,Oe=q.type,He=[];if(Oe==="Point"||Oe==="MultiPoint")for(var Ye=0;Ye<ve.length;Ye+=3)He.push(ve[Ye]),He.push(ve[Ye+1]),pe.numPoints++,pe.numSimplified++;else if(Oe==="LineString")Xl(He,ve,pe,Q,!1,!1);else if(Oe==="MultiLineString"||Oe==="Polygon")for(Ye=0;Ye<ve.length;Ye++)Xl(He,ve[Ye],pe,Q,Oe==="Polygon",Ye===0);else if(Oe==="MultiPolygon")for(var Be=0;Be<ve.length;Be++){var Qe=ve[Be];for(Ye=0;Ye<Qe.length;Ye++)Xl(He,Qe[Ye],pe,Q,!0,Ye===0)}if(He.length){var Tt=q.tags||null;if(Oe==="LineString"&&fe.lineMetrics){for(var ii in Tt={},q.tags)Tt[ii]=q.tags[ii];Tt.mapbox_clip_start=ve.start/ve.size,Tt.mapbox_clip_end=ve.end/ve.size}var Ot={geometry:He,type:Oe==="Polygon"||Oe==="MultiPolygon"?3:Oe==="LineString"||Oe==="MultiLineString"?2:1,tags:Tt};q.id!==null&&(Ot.id=q.id),pe.features.push(Ot)}}function Xl(pe,q,Q,fe,ve,Oe){var He=fe*fe;if(fe>0&&q.size<(ve?He:fe))Q.numPoints+=q.length/3;else{for(var Ye=[],Be=0;Be<q.length;Be+=3)(fe===0||q[Be+2]>He)&&(Q.numSimplified++,Ye.push(q[Be]),Ye.push(q[Be+1])),Q.numPoints++;ve&&function(Qe,Tt){for(var ii=0,Ot=0,Ai=Qe.length,Ci=Ai-2;Ot<Ai;Ci=Ot,Ot+=2)ii+=(Qe[Ot]-Qe[Ci])*(Qe[Ot+1]+Qe[Ci+1]);if(ii>0===Tt)for(Ot=0,Ai=Qe.length;Ot<Ai/2;Ot+=2){var yi=Qe[Ot],Li=Qe[Ot+1];Qe[Ot]=Qe[Ai-2-Ot],Qe[Ot+1]=Qe[Ai-1-Ot],Qe[Ai-2-Ot]=yi,Qe[Ai-1-Ot]=Li}}(Ye,Oe),pe.push(Ye)}}function hl(pe,q){var Q=(q=this.options=function(ve,Oe){for(var He in Oe)ve[He]=Oe[He];return ve}(Object.create(this.options),q)).debug;if(Q&&console.time("preprocess data"),q.maxZoom<0||q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw new Error("promoteId and generateId cannot be used together.");var fe=function(ve,Oe){var He=[];if(ve.type==="FeatureCollection")for(var Ye=0;Ye<ve.features.length;Ye++)Ti(He,ve.features[Ye],Oe,Ye);else Ti(He,ve.type==="Feature"?ve:{geometry:ve},Oe);return He}(pe,q);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),fe=function(ve,Oe){var He=Oe.buffer/Oe.extent,Ye=ve,Be=nr(ve,1,-1-He,He,0,-1,2,Oe),Qe=nr(ve,1,1-He,2+He,0,-1,2,Oe);return(Be||Qe)&&(Ye=nr(ve,1,-He,1+He,0,-1,2,Oe)||[],Be&&(Ye=ia(Be,1).concat(Ye)),Qe&&(Ye=Ye.concat(ia(Qe,-1)))),Ye}(fe,q),fe.length&&this.splitTile(fe,0,0,0),Q&&(fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Na(pe,q,Q){return 32*((1<<pe)*Q+q)+pe}function Fs(pe,q){const Q=pe.tileID.canonical;if(!this._geoJSONIndex)return q(null,null);const fe=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!fe)return q(null,null);const ve=new ke(fe.features);let Oe=Le.exports(ve);Oe.byteOffset===0&&Oe.byteLength===Oe.buffer.byteLength||(Oe=new Uint8Array(Oe)),q(null,{vectorTile:ve,rawData:Oe.buffer})}hl.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},hl.prototype.splitTile=function(pe,q,Q,fe,ve,Oe,He){for(var Ye=[pe,q,Q,fe],Be=this.options,Qe=Be.debug;Ye.length;){fe=Ye.pop(),Q=Ye.pop(),q=Ye.pop(),pe=Ye.pop();var Tt=1<<q,ii=Na(q,Q,fe),Ot=this.tiles[ii];if(!Ot&&(Qe>1&&console.time("creation"),Ot=this.tiles[ii]=Eo(pe,q,Q,fe,Be),this.tileCoords.push({z:q,x:Q,y:fe}),Qe)){Qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",q,Q,fe,Ot.numFeatures,Ot.numPoints,Ot.numSimplified),console.timeEnd("creation"));var Ai="z"+q;this.stats[Ai]=(this.stats[Ai]||0)+1,this.total++}if(Ot.source=pe,ve){if(q===Be.maxZoom||q===ve)continue;var Ci=1<<ve-q;if(Q!==Math.floor(Oe/Ci)||fe!==Math.floor(He/Ci))continue}else if(q===Be.indexMaxZoom||Ot.numPoints<=Be.indexMaxPoints)continue;if(Ot.source=null,pe.length!==0){Qe>1&&console.time("clipping");var yi,Li,an,Mn,bi,Xn,Rn=.5*Be.buffer/Be.extent,na=.5-Rn,ja=.5+Rn,ao=1+Rn;yi=Li=an=Mn=null,bi=nr(pe,Tt,Q-Rn,Q+ja,0,Ot.minX,Ot.maxX,Be),Xn=nr(pe,Tt,Q+na,Q+ao,0,Ot.minX,Ot.maxX,Be),pe=null,bi&&(yi=nr(bi,Tt,fe-Rn,fe+ja,1,Ot.minY,Ot.maxY,Be),Li=nr(bi,Tt,fe+na,fe+ao,1,Ot.minY,Ot.maxY,Be),bi=null),Xn&&(an=nr(Xn,Tt,fe-Rn,fe+ja,1,Ot.minY,Ot.maxY,Be),Mn=nr(Xn,Tt,fe+na,fe+ao,1,Ot.minY,Ot.maxY,Be),Xn=null),Qe>1&&console.timeEnd("clipping"),Ye.push(yi||[],q+1,2*Q,2*fe),Ye.push(Li||[],q+1,2*Q,2*fe+1),Ye.push(an||[],q+1,2*Q+1,2*fe),Ye.push(Mn||[],q+1,2*Q+1,2*fe+1)}}},hl.prototype.getTile=function(pe,q,Q){var fe=this.options,ve=fe.extent,Oe=fe.debug;if(pe<0||pe>24)return null;var He=1<<pe,Ye=Na(pe,q=(q%He+He)%He,Q);if(this.tiles[Ye])return dl(this.tiles[Ye],ve);Oe>1&&console.log("drilling down to z%d-%d-%d",pe,q,Q);for(var Be,Qe=pe,Tt=q,ii=Q;!Be&&Qe>0;)Qe--,Tt=Math.floor(Tt/2),ii=Math.floor(ii/2),Be=this.tiles[Na(Qe,Tt,ii)];return Be&&Be.source?(Oe>1&&console.log("found parent tile z%d-%d-%d",Qe,Tt,ii),Oe>1&&console.time("drilling down"),this.splitTile(Be.source,Qe,Tt,ii,pe,q,Q),Oe>1&&console.timeEnd("drilling down"),this.tiles[Ye]?dl(this.tiles[Ye],ve):null):null};class Ua extends o.VectorTileWorkerSource{constructor(q,Q,fe,ve,Oe){super(q,Q,fe,ve,Fs),Oe&&(this.loadGeoJSON=Oe)}loadData(q,Q){const fe=q&&q.request,ve=fe&&fe.collectResourceTiming;this.loadGeoJSON(q,(Oe,He)=>{if(Oe||!He)return Q(Oe);if(typeof He!="object")return Q(new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`));{he(He,!0);try{if(q.filter){const Be=o.createExpression(q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Be.result==="error")throw new Error(Be.value.map(Tt=>`${Tt.key}: ${Tt.message}`).join(", "));He={type:"FeatureCollection",features:He.features.filter(Tt=>Be.value.evaluate({zoom:0},Tt))}}this._geoJSONIndex=q.cluster?new Sr(function({superclusterOptions:Be,clusterProperties:Qe}){if(!Qe||!Be)return Be;const Tt={},ii={},Ot={accumulated:null,zoom:0},Ai={properties:null},Ci=Object.keys(Qe);for(const yi of Ci){const[Li,an]=Qe[yi],Mn=o.createExpression(an),bi=o.createExpression(typeof Li=="string"?[Li,["accumulated"],["get",yi]]:Li);Tt[yi]=Mn.value,ii[yi]=bi.value}return Be.map=yi=>{Ai.properties=yi;const Li={};for(const an of Ci)Li[an]=Tt[an].evaluate(Ot,Ai);return Li},Be.reduce=(yi,Li)=>{Ai.properties=Li;for(const an of Ci)Ot.accumulated=yi[an],yi[an]=ii[an].evaluate(Ot,Ai)},Be}(q)).load(He.features):function(Be,Qe){return new hl(Be,Qe)}(He,q.geojsonVtOptions)}catch(Be){return Q(Be)}this.loaded={};const Ye={};if(ve){const Be=o.getPerformanceMeasurement(fe);Be&&(Ye.resourceTiming={},Ye.resourceTiming[q.source]=JSON.parse(JSON.stringify(Be)))}Q(null,Ye)}})}reloadTile(q,Q){const fe=this.loaded;return fe&&fe[q.uid]?super.reloadTile(q,Q):this.loadTile(q,Q)}loadGeoJSON(q,Q){if(q.request)o.getJSON(q.request,Q);else{if(typeof q.data!="string")return Q(new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`));try{return Q(null,JSON.parse(q.data))}catch{return Q(new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(q,Q){try{Q(null,this._geoJSONIndex.getClusterExpansionZoom(q.clusterId))}catch(fe){Q(fe)}}getClusterChildren(q,Q){try{Q(null,this._geoJSONIndex.getChildren(q.clusterId))}catch(fe){Q(fe)}}getClusterLeaves(q,Q){try{Q(null,this._geoJSONIndex.getLeaves(q.clusterId,q.limit,q.offset))}catch(fe){Q(fe)}}}class Mc{constructor(q){this.self=q,this.actor=new o.Actor(q,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Ua},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Q,fe)=>{if(this.workerSourceTypes[Q])throw new Error(`Worker source with name "${Q}" already registered.`);this.workerSourceTypes[Q]=fe},this.self.registerRTLTextPlugin=Q=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Q.applyArabicShaping,o.plugin.processBidirectionalText=Q.processBidirectionalText,o.plugin.processStyledBidirectionalText=Q.processStyledBidirectionalText}}clearCaches(q,Q,fe){delete this.layerIndexes[q],delete this.availableImages[q],delete this.workerSources[q],delete this.demWorkerSources[q],fe()}checkIfReady(q,Q,fe){fe()}setReferrer(q,Q){this.referrer=Q}spriteLoaded(q,Q){this.isSpriteLoaded[q]=Q;for(const fe in this.workerSources[q]){const ve=this.workerSources[q][fe];for(const Oe in ve)ve[Oe]instanceof o.VectorTileWorkerSource&&(ve[Oe].isSpriteLoaded=Q,ve[Oe].fire(new o.Event("isSpriteLoaded")))}}setImages(q,Q,fe){this.availableImages[q]=Q;for(const ve in this.workerSources[q]){const Oe=this.workerSources[q][ve];for(const He in Oe)Oe[He].availableImages=Q}fe()}enableTerrain(q,Q,fe){this.terrain=Q,fe()}setProjection(q,Q){this.projections[q]=o.getProjection(Q)}setLayers(q,Q,fe){this.getLayerIndex(q).replace(Q),fe()}updateLayers(q,Q,fe){this.getLayerIndex(q).update(Q.layers,Q.removedIds),fe()}loadTile(q,Q,fe){const ve=this.enableTerrain?o.extend({enableTerrain:this.terrain},Q):Q;ve.projection=this.projections[q]||this.defaultProjection,this.getWorkerSource(q,Q.type,Q.source).loadTile(ve,fe)}loadDEMTile(q,Q,fe){const ve=this.enableTerrain?o.extend({buildQuadTree:this.terrain},Q):Q;this.getDEMWorkerSource(q,Q.source).loadTile(ve,fe)}reloadTile(q,Q,fe){const ve=this.enableTerrain?o.extend({enableTerrain:this.terrain},Q):Q;ve.projection=this.projections[q]||this.defaultProjection,this.getWorkerSource(q,Q.type,Q.source).reloadTile(ve,fe)}abortTile(q,Q,fe){this.getWorkerSource(q,Q.type,Q.source).abortTile(Q,fe)}removeTile(q,Q,fe){this.getWorkerSource(q,Q.type,Q.source).removeTile(Q,fe)}removeSource(q,Q,fe){if(!this.workerSources[q]||!this.workerSources[q][Q.type]||!this.workerSources[q][Q.type][Q.source])return;const ve=this.workerSources[q][Q.type][Q.source];delete this.workerSources[q][Q.type][Q.source],ve.removeSource!==void 0?ve.removeSource(Q,fe):fe()}loadWorkerSource(q,Q,fe){try{this.self.importScripts(Q.url),fe()}catch(ve){fe(ve.toString())}}syncRTLPluginState(q,Q,fe){try{o.plugin.setState(Q);const ve=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&ve!=null){this.self.importScripts(ve);const Oe=o.plugin.isParsed();fe(Oe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ve}`),Oe)}}catch(ve){fe(ve.toString())}}getAvailableImages(q){let Q=this.availableImages[q];return Q||(Q=[]),Q}getLayerIndex(q){let Q=this.layerIndexes[q];return Q||(Q=this.layerIndexes[q]=new X),Q}getWorkerSource(q,Q,fe){if(this.workerSources[q]||(this.workerSources[q]={}),this.workerSources[q][Q]||(this.workerSources[q][Q]={}),!this.workerSources[q][Q][fe]){const ve={send:(Oe,He,Ye,Be,Qe,Tt)=>{this.actor.send(Oe,He,Ye,q,Qe,Tt)},scheduler:this.actor.scheduler};this.workerSources[q][Q][fe]=new this.workerSourceTypes[Q](ve,this.getLayerIndex(q),this.getAvailableImages(q),this.isSpriteLoaded[q])}return this.workerSources[q][Q][fe]}getDEMWorkerSource(q,Q){return this.demWorkerSources[q]||(this.demWorkerSources[q]={}),this.demWorkerSources[q][Q]||(this.demWorkerSources[q][Q]=new Z),this.demWorkerSources[q][Q]}enforceCacheSizeLimit(q,Q){o.enforceCacheSizeLimit(Q)}getWorkerPerformanceMetrics(q,Q,fe){fe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Mc(self)),Mc}),x(["./shared"],function(o){function D(f,s){if(Array.isArray(f)){if(!Array.isArray(s)||f.length!==s.length)return!1;for(let c=0;c<f.length;c++)if(!D(f[c],s[c]))return!1;return!0}if(typeof f=="object"&&f!==null&&s!==null){if(typeof s!="object"||Object.keys(f).length!==Object.keys(s).length)return!1;for(const c in f)if(!D(f[c],s[c]))return!1;return!0}return f===s}var V=X;function X(f){return!function(s){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var m,v,w=new Blob([""],{type:"text/javascript"}),M=URL.createObjectURL(w);try{v=new Worker(M),m=!0}catch{m=!1}return v&&v.terminate(),URL.revokeObjectURL(M),m}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var m=document.createElement("canvas");m.width=m.height=1;var v=m.getContext("2d");if(!v)return!1;var w=v.getImageData(0,0,1,1);return w&&w.width===m.width}()?(Z[c=s&&s.failIfMajorPerformanceCaveat]===void 0&&(Z[c]=function(m){var v,w=function(M){var k=document.createElement("canvas"),L=Object.create(X.webGLContextAttributes);return L.failIfMajorPerformanceCaveat=M,k.getContext("webgl",L)||k.getContext("experimental-webgl",L)}(m);if(!w)return!1;try{v=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!v||w.isContextLost())&&(w.shaderSource(v,"void main() {}"),w.compileShader(v),w.getShaderParameter(v,w.COMPILE_STATUS)===!0)}(c)),Z[c]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var c}(f)}var Z={};function he(f,s,c){const m=o.window.document.createElement(f);return s!==void 0&&(m.className=s),c&&c.appendChild(m),m}function Se(f,s,c){const m=o.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const v of Object.keys(s))m.setAttributeNS(null,v,s[v]);return c&&c.appendChild(m),m}X.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const _e=o.window.document&&o.window.document.documentElement.style,Re=_e&&_e.userSelect!==void 0?"userSelect":"WebkitUserSelect";let nt;function ke(){_e&&Re&&(nt=_e[Re],_e[Re]="none")}function Le(){_e&&Re&&(_e[Re]=nt)}function $e(f){f.preventDefault(),f.stopPropagation(),o.window.removeEventListener("click",$e,!0)}function Et(){o.window.addEventListener("click",$e,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",$e,!0)},0)}function Fe(f,s){const c=f.getBoundingClientRect();return ot(f,c,s)}function z(f,s){const c=f.getBoundingClientRect(),m=[];for(let v=0;v<s.length;v++)m.push(ot(f,c,s[v]));return m}function Lt(f){return o.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function ot(f,s,c){const m=f.offsetWidth===s.width?1:f.offsetWidth/s.width;return new o.pointGeometry((c.clientX-s.left)*m,(c.clientY-s.top)*m)}function bt(f,s){var c=s[0],m=s[1],v=s[2],w=s[3],M=c*w-v*m;return M?(f[0]=w*(M=1/M),f[1]=-m*M,f[2]=-v*M,f[3]=c*M,f):null}function Ht(f){const{userImage:s}=f;return!!(s&&s.render&&s.render())&&(f.data.replace(new Uint8Array(s.data.buffer)),!0)}class Yt extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:c,callback:m}of this.requestors)this._notify(c,m);this.requestors=[]}}hasImage(s){return!!this.getImage(s)}getImage(s){return this.images[s]}addImage(s,c){this._validate(s,c)&&(this.images[s]=c)}_validate(s,c){let m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new o.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),m=!1),m}_validateStretch(s,c){if(!s)return!0;let m=0;for(const v of s){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(s,c){return!(s&&(s.length!==4||s[0]<0||c.data.width<s[0]||s[1]<0||c.data.height<s[1]||s[2]<0||c.data.width<s[2]||s[3]<0||c.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,c){c.version=this.images[s].version+1,this.images[s]=c,this.updatedImages[s]=!0}removeImage(s){const c=this.images[s];delete this.images[s],delete this.patterns[s],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,c){let m=!0;if(!this.isLoaded())for(const v of s)this.images[v]||(m=!1);this.isLoaded()||m?this._notify(s,c):this.requestors.push({ids:s,callback:c})}_notify(s,c){const m={};for(const v of s){this.images[v]||this.fire(new o.Event("styleimagemissing",{id:v}));const w=this.images[v];w?m[v]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:Boolean(w.userImage&&w.userImage.render)}:o.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,m)}getPixelSize(){const{width:s,height:c}=this.atlasImage;return{width:s,height:c}}getPattern(s){const c=this.patterns[s],m=this.getImage(s);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},w=new o.ImagePosition(v,m);this.patterns[s]={bin:v,position:w}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const c=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(s,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const w in this.patterns)s.push(this.patterns[w].bin);const{w:c,h:m}=o.potpack(s),v=this.atlasImage;v.resize({width:c||1,height:m||1});for(const w in this.patterns){const{bin:M}=this.patterns[w],k=M.x+1,L=M.y+1,j=this.images[w].data,N=j.width,W=j.height;o.RGBAImage.copy(j,v,{x:0,y:0},{x:k,y:L},{width:N,height:W}),o.RGBAImage.copy(j,v,{x:0,y:W-1},{x:k,y:L-1},{width:N,height:1}),o.RGBAImage.copy(j,v,{x:0,y:0},{x:k,y:L+W},{width:N,height:1}),o.RGBAImage.copy(j,v,{x:N-1,y:0},{x:k-1,y:L},{width:1,height:W}),o.RGBAImage.copy(j,v,{x:0,y:0},{x:k+N,y:L},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const c of s){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.images[c];Ht(m)&&this.updateImage(c,m)}}}const Wt=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(f,s){return function([c,m,v]){const w=o.degToRad(m+90),M=o.degToRad(v);return{x:c*Math.cos(w)*Math.sin(M),y:c*Math.sin(w)*Math.sin(M),z:c*Math.cos(M),azimuthal:m,polar:v}}(f.expression.evaluate(s))}interpolate(f,s,c){return{x:o.number(f.x,s.x,c),y:o.number(f.y,s.y,c),z:o.number(f.z,s.z,c),azimuthal:o.number(f.azimuthal,s.azimuthal,c),polar:o.number(f.polar,s.polar,c)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),hi="-transition";class ri extends o.Evented{constructor(s){super(),this._transitionable=new o.Transitionable(Wt),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,c={}){if(!this._validate(o.validateLight,s,c))for(const m in s){const v=s[m];o.endsWith(m,hi)?this._transitionable.setTransition(m.slice(0,-hi.length),v):this._transitionable.setValue(m,v)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,c,m){return(!m||m.validate!==!1)&&o.emitValidationErrors(this,s.call(o.validateStyle,o.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const fi=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)}),pn="-transition";class mn extends o.Evented{constructor(s,c){super(),this._transitionable=new o.Transitionable(fi),this.set(s),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(s){for(const c in s){const m=s[c];o.endsWith(c,pn)?this._transitionable.setTransition(c.slice(0,-pn.length),m):this._transitionable.setValue(c,m)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}}function tn(f,s,c,m){const v=o.smoothstep(45,65,c),[w,M]=ts(f,m),k=o.length(s);let L=1-Math.min(1,Math.exp((k-w)/(M-w)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*v*f.alpha}function ts(f,s){const c=.5/Math.tan(.5*s);return[f.range[0]+c,f.range[1]+c]}const Fn=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])}),Nn="-transition";class Is extends o.Evented{constructor(s,c){super(),this._transitionable=new o.Transitionable(Fn),this.set(s),this._transitioning=this._transitionable.untransitioned(),this._transform=c}get state(){const s=this._transform,c=s.projection.name==="globe",m=o.globeToMercatorTransition(s.zoom),v=this.properties.get("range"),w=[.5,3];return{range:c?[o.number(w[0],v[0],m),o.number(w[1],v[1],m)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(s,c={}){if(!this._validate(o.validateFog,s,c)){for(const m of Object.keys(o.spec.fog))s&&s[m]===void 0&&(s[m]=o.spec.fog[m].default);for(const m in s){const v=s[m];o.endsWith(m,Nn)?this._transitionable.setTransition(m.slice(0,-Nn.length),v):this._transitionable.setValue(m,v)}}}getOpacity(s){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,s))*c.a}getOpacityAtLatLng(s,c){return this._transform.projection.supportsFog?function(m,v,w){const M=o.MercatorCoordinate.fromLngLat(v),k=w.elevation?w.elevation.getAtPointOrZero(M):0,L=[M.x,M.y,k];return o.transformMat4(L,L,w.mercatorFogMatrix),tn(m,L,w.pitch,w._fov)}(this.state,s,c):0}getFovAdjustedRange(s){return this._transform.projection.supportsFog?ts(this.state,s):[0,1]}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,c,m){return(!m||m.validate!==!1)&&o.emitValidationErrors(this,s.call(o.validateStyle,o.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class xs{constructor(s,c){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const m=this.workerPool.acquire(this.id);for(let v=0;v<m.length;v++){const w=new xs.Actor(m[v],c,this.id);w.name=`Worker ${v}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,c,m){o.asyncAll(this.actors,(v,w)=>{v.send(s,c,w)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}function zs(f,s,c){return s*(o.EXTENT/(f.tileSize*Math.pow(2,c-f.tileID.overscaledZ)))}xs.Actor=o.Actor;class Bs{constructor(s,c,m,v){this.screenBounds=s,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=m,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(s,c){let m,v;if(s instanceof o.pointGeometry||typeof s[0]=="number"){const w=o.pointGeometry.convert(s);m=[w],v=c.isPointAboveHorizon(w)}else{const w=o.pointGeometry.convert(s[0]),M=o.pointGeometry.convert(s[1]);m=[w,M],v=o.polygonizeBounds(w,M).every(k=>c.isPointAboveHorizon(k))}return new Bs(m,c.getCameraPoint(),v,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(s){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],s)}bufferedCameraGeometry(s){const c=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],v=o.polygonizeBounds(c,m,0,!1);return this.cameraPoint.y>m.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<m.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=m.x?v[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(v[3]=this.cameraPoint)),o.bufferConvexPolygon(v,s)}bufferedCameraGeometryGlobe(s){const c=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],v=o.polygonizeBounds(c,m,s),w=this.cameraPoint.clone();switch(3*((w.y>c.y)+(w.y>m.y))+((w.x>c.x)+(w.x>m.x))){case 0:v[0]=w,v[4]=w.clone();break;case 1:v.splice(1,0,w);break;case 2:v[1]=w;break;case 3:v.splice(4,0,w);break;case 5:v.splice(2,0,w);break;case 6:v[3]=w;break;case 7:v.splice(3,0,w);break;case 8:v[2]=w}return v}containsTile(s,c,m,v=0){const w=s.queryPadding/c._pixelsPerMercatorPixel+1,M=m?this._bufferedCameraMercator(w,c):this._bufferedScreenMercator(w,c);let k=s.tileID.wrap+(M.unwrapped?v:0);const L=M.polygon.map(ie=>o.getTilePoint(s.tileTransform,ie,k));if(!o.polygonIntersectsBox(L,0,0,o.EXTENT,o.EXTENT))return;k=s.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const j=this.screenGeometryMercator.polygon.map(ie=>o.getTileVec3(s.tileTransform,ie,k)),N=j.map(ie=>new o.pointGeometry(ie[0],ie[1])),W=c.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),ee=o.getTileVec3(s.tileTransform,W,k),le=j.map(ie=>{const se=o.sub(ie,ie,ee);return o.normalize(se,se),new o.Ray(ee,se)}),ce=zs(s,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:N,tilespaceRays:le,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(de=o.getBounds(L),de.min.x=o.clamp(de.min.x,0,o.EXTENT),de.min.y=o.clamp(de.min.y,0,o.EXTENT),de.max.x=o.clamp(de.max.x,0,o.EXTENT),de.max.y=o.clamp(de.max.y,0,o.EXTENT),de),tile:s,tileID:s.tileID,pixelToTileUnitsFactor:ce};var de}_bufferedScreenMercator(s,c){const m=ds(s);if(this._screenRaycastCache[m])return this._screenRaycastCache[m];{let v;return v=c.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(s),c):{polygon:this.bufferedScreenGeometry(s).map(w=>c.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[m]=v,v}}_bufferedCameraMercator(s,c){const m=ds(s);if(this._cameraRaycastCache[m])return this._cameraRaycastCache[m];{let v;return v=c.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(s),c):{polygon:this.bufferedCameraGeometry(s).map(w=>c.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[m]=v,v}}_projectAndResample(s,c){const m=function(w,M){const k=o.multiply([],M.pixelMatrix,M.globeMatrix),L=[0,-o.GLOBE_RADIUS,0,1],j=[0,o.GLOBE_RADIUS,0,1],N=[0,0,0,1];o.transformMat4$1(L,L,k),o.transformMat4$1(j,j,k),o.transformMat4$1(N,N,k);const W=new o.pointGeometry(L[0]/L[3],L[1]/L[3]),ee=new o.pointGeometry(j[0]/j[3],j[1]/j[3]),le=o.polygonContainsPoint(w,W)&&L[3]<N[3],ce=o.polygonContainsPoint(w,ee)&&j[3]<N[3];if(!le&&!ce)return null;const de=function(Ue,st,Je){for(let Ge=1;Ge<Ue.length;Ge++){const It=Zr(st.pointCoordinate3D(Ue[Ge-1]).x),Ke=Zr(st.pointCoordinate3D(Ue[Ge]).x);if(Je<0){if(It<Ke)return{idx:Ge,t:-It/(Ke-1-It)}}else if(Ke<It)return{idx:Ge,t:(1-It)/(Ke+1-It)}}return null}(w,M,le?-1:1);if(!de)return null;const{idx:ie,t:se}=de;let me=ie>1?Hr(w.slice(0,ie),M):[],ue=ie<w.length?Hr(w.slice(ie),M):[];me=me.map(Ue=>new o.pointGeometry(Zr(Ue.x),Ue.y)),ue=ue.map(Ue=>new o.pointGeometry(Zr(Ue.x),Ue.y));const xe=[...me];xe.length===0&&xe.push(ue[ue.length-1]);const De=o.number(xe[xe.length-1].y,(ue.length===0?me[0]:ue[0]).y,se);let we;return we=le?[new o.pointGeometry(0,De),new o.pointGeometry(0,0),new o.pointGeometry(1,0),new o.pointGeometry(1,De)]:[new o.pointGeometry(1,De),new o.pointGeometry(1,1),new o.pointGeometry(0,1),new o.pointGeometry(0,De)],xe.push(...we),ue.length===0?xe.push(me[0]):xe.push(...ue),{polygon:xe.map(Ue=>new o.MercatorCoordinate(Ue.x,Ue.y)),unwrapped:!1}}(s,c);if(m)return m;const v=function(w,M){let k=!1,L=-1/0,j=0;for(let W=0;W<w.length-1;W++)w[W].x>L&&(L=w[W].x,j=W);for(let W=0;W<w.length-1;W++){const ee=(j+W)%(w.length-1),le=w[ee],ce=w[ee+1];Math.abs(le.x-ce.x)>.5&&(le.x<ce.x?(le.x+=1,ee===0&&(w[w.length-1].x+=1)):(ce.x+=1,ee+1===w.length-1&&(w[0].x+=1)),k=!0)}const N=o.mercatorXfromLng(M.center.lng);return k&&N<Math.abs(N-1)&&w.forEach(W=>{W.x-=1}),{polygon:w,unwrapped:k}}(Hr(s,c).map(w=>new o.pointGeometry(Zr(w.x),w.y)),c);return{polygon:v.polygon.map(w=>new o.MercatorCoordinate(w.x,w.y)),unwrapped:v.unwrapped}}}function Hr(f,s){return o.resample(f,c=>{const m=s.pointCoordinate3D(c);c.x=m.x,c.y=m.y},1/256)}function Zr(f){return f<0?1+f%1:f%1}function ds(f){return 100*f|0}function Sr(f,s,c,m,v){const w=function(M,k){if(M)return v(M);if(k){f.url&&k.tiles&&f.tiles&&delete f.tiles;const L=o.pick(o.extend(k,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);k.vector_layers&&(L.vectorLayers=k.vector_layers,L.vectorLayerIds=L.vectorLayers.map(j=>j.id)),L.tiles=s.canonicalizeTileset(L,f.url),v(null,L)}};return f.url?o.getJSON(s.transformRequest(s.normalizeSourceURL(f.url,null,c,m),o.ResourceType.Source),w):o.exported.frame(()=>w(null,f))}class bs{constructor(s,c,m){this.bounds=o.LngLatBounds.convert(this.validateBounds(s)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const c=Math.pow(2,s.z),m=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*c),v=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*c),w=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*c),M=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*c);return s.x>=m&&s.x<w&&s.y>=v&&s.y<M}}class Uo{constructor(s,c,m){this.context=s;const v=s.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ce={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ve{constructor(s,c,m,v){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=s;const w=s.gl;this.buffer=w.createBuffer(),s.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];v!==void 0&&s.enableVertexAttribArray(v)}}setVertexAttribPointers(s,c,m){for(let v=0;v<this.attributes.length;v++){const w=this.attributes[v],M=c.attributes[w.name];M!==void 0&&s.vertexAttribPointer(M,w.components,s[Ce[w.type]],!1,this.itemSize,w.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class tt{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class kt extends tt{getDefault(){return o.Color.transparent}set(s){const c=this.current;(s.r!==c.r||s.g!==c.g||s.b!==c.b||s.a!==c.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class ct extends tt{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class zt extends tt{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class ui extends tt{getDefault(){return[!0,!0,!0,!0]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||s[2]!==c[2]||s[3]!==c[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Xt extends tt{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Kt extends tt{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Nt extends tt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const c=this.current;(s.func!==c.func||s.ref!==c.ref||s.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class pi extends tt{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||s[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class di extends tt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;s?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=s,this.dirty=!1}}class Ti extends tt{getDefault(){return[0,1]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Di extends tt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;s?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=s,this.dirty=!1}}class Yi extends tt{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class _n extends tt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;s?c.enable(c.BLEND):c.disable(c.BLEND),this.current=s,this.dirty=!1}}class cn extends tt{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Yn extends tt{getDefault(){return o.Color.transparent}set(s){const c=this.current;(s.r!==c.r||s.g!==c.g||s.b!==c.b||s.a!==c.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class nr extends tt{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Zs extends tt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;s?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=s,this.dirty=!1}}class ks extends tt{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class Yr extends tt{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Ys extends tt{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class Or extends tt{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class rr extends tt{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||s[2]!==c[2]||s[3]!==c[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Cr extends tt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class ia extends tt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Yl extends tt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class dl extends tt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class oo extends tt{getDefault(){return null}set(s){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Eo extends tt{constructor(s){super(s),this.vao=s.extVertexArrayObject}getDefault(){return null}set(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)}}class Ea extends tt{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Xl extends tt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class hl extends tt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Na extends tt{constructor(s,c){super(s),this.context=s,this.parent=c}getDefault(){return null}}class Fs extends Na{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Ua extends Na{attachment(){return this.gl.DEPTH_ATTACHMENT}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Mc extends Ua{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class pe{constructor(s,c,m,v){this.context=s,this.width=c,this.height=m;const w=this.framebuffer=s.gl.createFramebuffer();this.colorAttachment=new Fs(s,w),v&&(this.depthAttachment=new Ua(s,w))}destroy(){const s=this.context.gl,c=this.colorAttachment.get();if(c&&s.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&s.deleteRenderbuffer(m)}s.deleteFramebuffer(this.framebuffer)}}class q{constructor(s){this.gl=s,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new kt(this),this.clearDepth=new ct(this),this.clearStencil=new zt(this),this.colorMask=new ui(this),this.depthMask=new Xt(this),this.stencilMask=new Kt(this),this.stencilFunc=new Nt(this),this.stencilOp=new pi(this),this.stencilTest=new di(this),this.depthRange=new Ti(this),this.depthTest=new Di(this),this.depthFunc=new Yi(this),this.blend=new _n(this),this.blendFunc=new cn(this),this.blendColor=new Yn(this),this.blendEquation=new nr(this),this.cullFace=new Zs(this),this.cullFaceSide=new ks(this),this.frontFace=new Yr(this),this.program=new Ys(this),this.activeTexture=new Or(this),this.viewport=new rr(this),this.bindFramebuffer=new Cr(this),this.bindRenderbuffer=new ia(this),this.bindTexture=new Yl(this),this.bindVertexBuffer=new dl(this),this.bindElementBuffer=new oo(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Eo(this),this.pixelStoreUnpack=new Ea(this),this.pixelStoreUnpackPremultiplyAlpha=new Xl(this),this.pixelStoreUnpackFlipY=new hl(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=s.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=s.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=s.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=s.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(s.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=s.getExtension("OES_standard_derivatives"),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,c){return new Uo(this,s,c)}createVertexBuffer(s,c,m){return new Ve(this,s,c,m)}createRenderbuffer(s,c,m){const v=this.gl,w=v.createRenderbuffer();return this.bindRenderbuffer.set(w),v.renderbufferStorage(v.RENDERBUFFER,s,c,m),this.bindRenderbuffer.set(null),w}createFramebuffer(s,c,m){return new pe(this,s,c,m)}clear({color:s,depth:c,stencil:m}){const v=this.gl;let w=0;s&&(w|=v.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(w|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(w|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),v.clear(w)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){D(s.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Q extends o.Evented{constructor(s,c,m,v){super(),this.id=s,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},c),o.extend(this,o.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Sr(this._options,this.map._requestManager,null,null,(s,c)=>{this._tileJSONRequest=null,this._loaded=!0,s?this.fire(new o.ErrorEvent(s)):c&&(o.extend(this,c),c.bounds&&(this.tileBounds=new bs(c.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(c.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,c){const m=o.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),m,this.tileSize);s.request=o.getImage(this.map._requestManager.transformRequest(v,o.ResourceType.Tile),(w,M,k,L)=>(delete s.request,s.aborted?(s.state="unloaded",c(null)):w?(s.state="errored",c(w)):M?(this.map._refreshExpiredTiles&&s.setExpiryData({cacheControl:k,expires:L}),s.setTexture(M,this.map.painter),s.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void c(null)):c(null)))}static loadTileData(s,c,m){s.setTexture(c,m)}static unloadTileData(s,c){s.texture&&c.saveTileTexture(s.texture)}abortTile(s,c){s.request&&(s.request.cancel(),delete s.request),c()}unloadTile(s,c){s.texture&&this.map.painter.saveTileTexture(s.texture),c()}hasTransition(){return!1}}let fe;function ve(f,s,c,m,v,w,M,k){const L=[f,c,v,s,m,w,1,1,1],j=[M,k,1],N=o.adjoint([],L),[W,ee,le]=o.transformMat3(j,j,o.transpose(N,N));return o.multiply$1(L,[W,0,0,0,ee,0,0,0,le],L)}class Oe extends o.Evented{constructor(s,c,m,v){super(),this.id=s,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c,this._dirty=!1}load(s,c){this._loaded=c||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(m,v)=>{if(this._imageRequest=null,this._loaded=!0,m)this.fire(new o.ErrorEvent(m));else if(v){const{HTMLImageElement:w}=o.window;this.image=v instanceof w?o.exported.getImageData(v):v,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading()}})}loaded(){return this._loaded}updateImage(s){return this.image&&s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(s){this.coordinates=s,this._boundsArray=void 0;const c=s.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(m){let v=1/0,w=1/0,M=-1/0,k=-1/0;for(const W of m)v=Math.min(v,W.x),w=Math.min(w,W.y),M=Math.max(M,W.x),k=Math.max(k,W.y);const L=Math.max(M-v,k-w),j=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),N=Math.pow(2,j);return new o.CanonicalTileID(j,Math.floor((v+M)/2*N),Math.floor((w+k)/2*N))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(s){for(const L in this.tiles){const j=this.tiles[L];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture)}if(this._boundsArray)return;const c=o.tileTransform(this.tileID,this.map.transform.projection),[m,v,w,M]=this.coordinates.map(L=>{const j=c.projection.project(L[0],L[1]);return o.getTilePoint(c,j)._round()});this.perspectiveTransform=function(L,j,N,W,ee,le,ce,de,ie,se){const me=ve(0,0,L,0,0,j,L,j),ue=ve(N,W,ee,le,ce,de,ie,se);return o.multiply$1(ue,o.adjoint(me,me),ue),[ue[6]/ue[8]*L/o.EXTENT,ue[7]/ue[8]*j/o.EXTENT]}(this.width,this.height,m.x,m.y,v.x,v.y,M.x,M.y,w.x,w.y);const k=this._boundsArray=new o.StructArrayLayout4i8;k.emplaceBack(m.x,m.y,0,0),k.emplaceBack(v.x,v.y,o.EXTENT,0),k.emplaceBack(M.x,M.y,0,o.EXTENT),k.emplaceBack(w.x,w.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=s.createVertexBuffer(k,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,c=s.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(s,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(s)}loadTile(s,c){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},c(null)):(s.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const He={vector:class extends o.Evented{constructor(f,s,c,m){if(super(),this.id=f,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(s,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(f){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const s=Array.isArray(this.map._language)?this.map._language.join():this.map._language,c=this.map._worldview;this._tileJSONRequest=Sr(this._options,this.map._requestManager,s,c,(m,v)=>{this._tileJSONRequest=null,this._loaded=!0,m?(s&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${s}`),c&&c.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${c}`),this.fire(new o.ErrorEvent(m))):v&&(o.extend(this,v),v.bounds&&(this.tileBounds=new bs(v.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(v.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),f&&f(m)})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>{const f=this.map.style._getSourceCaches(this.id);for(const s of f)s.clearTiles()})}setSourceProperty(f){f(),this.reload()}setTiles(f){return this._options.tiles=f,this.reload(),this}setUrl(f){return this.url=f,this._options.url=f,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(f,s){const c=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),m={request:this.map._requestManager.transformRequest(c,o.ResourceType.Tile),data:void 0,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:f.isSymbolTile};if(m.request.collectResourceTiming=this._collectResourceTiming,f.actor&&f.state!=="expired")f.state==="loading"?f.reloadCallback=s:f.request=f.actor.send("reloadTile",m,v.bind(this));else if(f.actor=this._tileWorkers[c]=this._tileWorkers[c]||this.dispatcher.getActor(),this.dispatcher.ready)f.request=f.actor.send("loadTile",m,v.bind(this),void 0,!0);else{const w=o.loadVectorTile.call({deduped:this._deduped},m,(M,k)=>{M||!k?v.call(this,M):(m.data={cacheControl:k.cacheControl,expires:k.expires,rawData:k.rawData.slice(0)},f.actor&&f.actor.send("loadTile",m,v.bind(this),void 0,!0))},!0);f.request={cancel:w}}function v(w,M){return delete f.request,f.aborted?s(null):w&&w.status!==404?s(w):(M&&M.resourceTiming&&(f.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&f.setExpiryData(M),f.loadVectorData(M,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),s(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id})}unloadTile(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},raster:Q,"raster-dem":class extends Q{constructor(f,s,c,m){super(f,s,c,m),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}loadTile(f,s){const c=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function m(v,w){v&&(f.state="errored",s(v)),w&&(f.dem=w,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",s(null))}f.request=o.getImage(this.map._requestManager.transformRequest(c,o.ResourceType.Tile),function(v,w,M,k){if(delete f.request,f.aborted)f.state="unloaded",s(null);else if(v)f.state="errored",s(v);else if(w){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:M,expires:k});const L=o.window.ImageBitmap&&w instanceof o.window.ImageBitmap&&(fe==null&&(fe=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),fe),j=1-(w.width-o.prevPowerOfTwo(w.width))/2;j<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const N=L?w:o.exported.getImageData(w,j),W={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:N,encoding:this.encoding,padding:j};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",W,m.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const s=f.canonical,c=Math.pow(2,s.z),m=(s.x-1+c)%c,v=s.x===0?f.wrap-1:f.wrap,w=(s.x+1+c)%c,M=s.x+1===c?f.wrap+1:f.wrap,k={};return k[new o.OverscaledTileID(f.overscaledZ,v,s.z,m,s.y).key]={backfilled:!1},k[new o.OverscaledTileID(f.overscaledZ,M,s.z,w,s.y).key]={backfilled:!1},s.y>0&&(k[new o.OverscaledTileID(f.overscaledZ,v,s.z,m,s.y-1).key]={backfilled:!1},k[new o.OverscaledTileID(f.overscaledZ,f.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},k[new o.OverscaledTileID(f.overscaledZ,M,s.z,w,s.y-1).key]={backfilled:!1}),s.y+1<c&&(k[new o.OverscaledTileID(f.overscaledZ,v,s.z,m,s.y+1).key]={backfilled:!1},k[new o.OverscaledTileID(f.overscaledZ,f.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},k[new o.OverscaledTileID(f.overscaledZ,M,s.z,w,s.y+1).key]={backfilled:!1}),k}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends o.Evented{constructor(f,s,c,m){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(m),this._data=s.data,this._options=o.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const v=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*v,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*v,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:o.EXTENT,radius:(s.clusterRadius!==void 0?s.clusterRadius:50)*v,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},s),this}getClusterChildren(f,s){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},s),this}getClusterLeaves(f,s,c,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:s,offset:c},m),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=o.extend({},this.workerOptions),s=this._data;typeof s=="string"?(f.request=this.map._requestManager.transformRequest(o.exported.resolveURL(s),o.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(s),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(c,m)=>{if(this._loaded=!0,this._pendingLoad=null,c)this.fire(new o.ErrorEvent(c));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&m&&m.resourceTiming&&m.resourceTiming[this.id]&&(v.resourceTiming=m.resourceTiming[this.id]),this.fire(new o.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,s){const c=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(c,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(m,v)=>(delete f.request,f.unloadVectorData(),f.aborted?s(null):m?s(m):(f.loadVectorData(v,this.map.painter,c==="reloadTile"),s(null))),void 0,c==="loadTile")}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Oe{constructor(f,s,c,m){super(f,s,c,m),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const s of f.urls)this.urls.push(this.map._requestManager.transformRequest(s,o.ResourceType.Source).url);o.getVideo(this.urls,(s,c)=>{this._loaded=!0,s?this.fire(new o.ErrorEvent(s)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const s=this.video.seekable;f<s.start(0)||f>s.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,s=f.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(f,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Oe,canvas:class extends Oe{constructor(f,s,c,m){super(f,s,c,m),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(w=>typeof w!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(s,this.canvas,s.gl.RGBA,{premultiply:!0}),this._prepareData(s)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends o.Evented{constructor(f,s,c,m){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=s,this.setEventedParent(m),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new bs(this._implementation.bounds,this.minzoom,this.maxzoom)),s.update=this._update.bind(this),s.clearTiles=this._clearTiles.bind(this),s.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(s,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:s,y:c,z:m}=f.canonical;return this._implementation.hasTile({x:s,y:c,z:m})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,s){const{x:c,y:m,z:v}=f.tileID.canonical,w=new o.window.AbortController;f.request=Promise.resolve(this._implementation.loadTile({x:c,y:m,z:v},{signal:w.signal})).then(function(M){return delete f.request,f.aborted?(f.state="unloaded",s(null)):M===void 0?(f.state="errored",s(null)):M===null?(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",s(null)):function(k){return k instanceof o.window.ImageData||k instanceof o.window.HTMLCanvasElement||k instanceof o.window.ImageBitmap||k instanceof o.window.HTMLImageElement}(M)?(this.loadTileData(f,M),f.state="loaded",void s(null)):(f.state="errored",s(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(M=>{M.code!==20&&(f.state="errored",s(M))}),f.request.cancel=()=>w.abort()}loadTileData(f,s){Q.loadTileData(f,s,this._map.painter)}unloadTileData(f){Q.unloadTileData(f,this._map.painter)}unloadTile(f,s){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:c,y:m,z:v}=f.tileID.canonical;this._implementation.unloadTile({x:c,y:m,z:v})}s()}abortTile(f,s){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),s()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ye=function(f,s,c,m){const v=new He[s.type](f,s,c,m);if(v.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${v.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],v),v};function Be(f,s){const c=o.identity([]);return o.scale(c,c,[.5*f.width,.5*-f.height,1]),o.translate(c,c,[1,-1,0]),o.multiply(c,c,f.calculateProjMatrix(s.toUnwrapped())),Float32Array.from(c)}function Qe(f,s,c,m,v,w,M,k=!1){const L=f.tilesIn(m,M,k);L.sort(ii);const j=[];for(const W of L)j.push({wrappedTileID:W.tile.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(s,c,f._state,W,v,w,Be(f.transform,W.tile.tileID),k)});const N=function(W){const ee={},le={};for(const ce of W){const de=ce.queryResults,ie=ce.wrappedTileID,se=le[ie]=le[ie]||{};for(const me in de){const ue=de[me],xe=se[me]=se[me]||{},De=ee[me]=ee[me]||[];for(const we of ue)xe[we.featureIndex]||(xe[we.featureIndex]=!0,De.push(we))}}return ee}(j);for(const W in N)N[W].forEach(ee=>{const le=ee.feature,ce=le.layer;ce&&ce.type!=="background"&&ce.type!=="sky"&&(le.source=ce.source,ce["source-layer"]&&(le.sourceLayer=ce["source-layer"]),le.state=le.id!==void 0?f.getFeatureState(ce["source-layer"],le.id):{})});return N}function Tt(f,s){const c=f.getRenderableIds().map(w=>f.getTileByID(w)),m=[],v={};for(let w=0;w<c.length;w++){const M=c[w],k=M.tileID.canonical.key;v[k]||(v[k]=!0,M.querySourceFeatures(m,s))}return m}function ii(f,s){const c=f.tileID,m=s.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}function Ot(){return Oc.workerClass!=null?new Oc.workerClass:new o.window.Worker(Oc.workerUrl)}const Ai="mapboxgl_preloaded_worker_pool";class Ci{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Ci.workerCount;)this.workers.push(new Ot);return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ai]}numActive(){return Object.keys(this.active).length}}let yi;function Li(){return yi||(yi=new Ci),yi}function an(f,s){const c={};for(const m in f)m!=="ref"&&(c[m]=f[m]);return o.refProperties.forEach(m=>{m in s&&(c[m]=s[m])}),c}function Mn(f){f=f.slice();const s=Object.create(null);for(let c=0;c<f.length;c++)s[f[c].id]=f[c];for(let c=0;c<f.length;c++)"ref"in f[c]&&(f[c]=an(f[c],s[f[c].ref]));return f}Ci.workerCount=2;const bi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Xn(f,s,c){c.push({command:bi.addSource,args:[f,s[f]]})}function Rn(f,s,c){s.push({command:bi.removeSource,args:[f]}),c[f]=!0}function na(f,s,c,m){Rn(f,c,m),Xn(f,s,c)}function ja(f,s,c){let m;for(m in f[c])if(f[c].hasOwnProperty(m)&&m!=="data"&&!D(f[c][m],s[c][m]))return!1;for(m in s[c])if(s[c].hasOwnProperty(m)&&m!=="data"&&!D(f[c][m],s[c][m]))return!1;return!0}function ao(f,s,c,m,v,w){let M;for(M in s=s||{},f=f||{})f.hasOwnProperty(M)&&(D(f[M],s[M])||c.push({command:w,args:[m,M,s[M],v]}));for(M in s)s.hasOwnProperty(M)&&!f.hasOwnProperty(M)&&(D(f[M],s[M])||c.push({command:w,args:[m,M,s[M],v]}))}function yt(f){return f.id}function So(f,s){return f[s.id]=s,f}class zr{constructor(s,c){this.reset(s,c)}reset(s,c){this.points=s||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=o.clamp(s,0,1);let c=1,m=this._distances[c];const v=s*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const w=c-1,M=this._distances[w],k=m-M,L=k>0?(v-M)/k:0;return this.points[w].mult(1-L).add(this.points[c].mult(L))}}class Br{constructor(s,c,m){const v=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(s/m),this.yCellCount=Math.ceil(c/m);for(let M=0;M<this.xCellCount*this.yCellCount;M++)v.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=c,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,c,m,v,w){this._forEachCell(c,m,v,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(w)}insertCircle(s,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(s,c,m,v,w,M){this.boxCells[w].push(M)}_insertCircleCell(s,c,m,v,w,M){this.circleCells[w].push(M)}_query(s,c,m,v,w,M){if(m<0||s>this.width||v<0||c>this.height)return!w&&[];const k=[];if(s<=0&&c<=0&&this.width<=m&&this.height<=v){if(w)return!0;for(let L=0;L<this.boxKeys.length;L++)k.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const j=this.circles[3*L],N=this.circles[3*L+1],W=this.circles[3*L+2];k.push({key:this.circleKeys[L],x1:j-W,y1:N-W,x2:j+W,y2:N+W})}return M?k.filter(M):k}return this._forEachCell(s,c,m,v,this._queryCell,k,{hitTest:w,seenUids:{box:{},circle:{}}},M),w?k.length>0:k}_queryCircle(s,c,m,v,w){const M=s-m,k=s+m,L=c-m,j=c+m;if(k<0||M>this.width||j<0||L>this.height)return!v&&[];const N=[];return this._forEachCell(M,L,k,j,this._queryCellCircle,N,{hitTest:v,circle:{x:s,y:c,radius:m},seenUids:{box:{},circle:{}}},w),v?N.length>0:N}query(s,c,m,v,w){return this._query(s,c,m,v,!1,w)}hitTest(s,c,m,v,w){return this._query(s,c,m,v,!0,w)}hitTestCircle(s,c,m,v){return this._queryCircle(s,c,m,!0,v)}_queryCell(s,c,m,v,w,M,k,L){const j=k.seenUids,N=this.boxCells[w];if(N!==null){const ee=this.bboxes;for(const le of N)if(!j.box[le]){j.box[le]=!0;const ce=4*le;if(s<=ee[ce+2]&&c<=ee[ce+3]&&m>=ee[ce+0]&&v>=ee[ce+1]&&(!L||L(this.boxKeys[le]))){if(k.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[le],x1:ee[ce],y1:ee[ce+1],x2:ee[ce+2],y2:ee[ce+3]})}}}const W=this.circleCells[w];if(W!==null){const ee=this.circles;for(const le of W)if(!j.circle[le]){j.circle[le]=!0;const ce=3*le;if(this._circleAndRectCollide(ee[ce],ee[ce+1],ee[ce+2],s,c,m,v)&&(!L||L(this.circleKeys[le]))){if(k.hitTest)return M.push(!0),!0;{const de=ee[ce],ie=ee[ce+1],se=ee[ce+2];M.push({key:this.circleKeys[le],x1:de-se,y1:ie-se,x2:de+se,y2:ie+se})}}}}}_queryCellCircle(s,c,m,v,w,M,k,L){const j=k.circle,N=k.seenUids,W=this.boxCells[w];if(W!==null){const le=this.bboxes;for(const ce of W)if(!N.box[ce]){N.box[ce]=!0;const de=4*ce;if(this._circleAndRectCollide(j.x,j.y,j.radius,le[de+0],le[de+1],le[de+2],le[de+3])&&(!L||L(this.boxKeys[ce])))return M.push(!0),!0}}const ee=this.circleCells[w];if(ee!==null){const le=this.circles;for(const ce of ee)if(!N.circle[ce]){N.circle[ce]=!0;const de=3*ce;if(this._circlesCollide(le[de],le[de+1],le[de+2],j.x,j.y,j.radius)&&(!L||L(this.circleKeys[ce])))return M.push(!0),!0}}}_forEachCell(s,c,m,v,w,M,k,L){const j=this._convertToXCellCoord(s),N=this._convertToYCellCoord(c),W=this._convertToXCellCoord(m),ee=this._convertToYCellCoord(v);for(let le=j;le<=W;le++)for(let ce=N;ce<=ee;ce++)if(w.call(this,s,c,m,v,this.xCellCount*ce+le,M,k,L))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,c,m,v,w,M){const k=v-s,L=w-c,j=m+M;return j*j>k*k+L*L}_circleAndRectCollide(s,c,m,v,w,M,k){const L=(M-v)/2,j=Math.abs(s-(v+L));if(j>L+m)return!1;const N=(k-w)/2,W=Math.abs(c-(w+N));if(W>N+m)return!1;if(j<=L||W<=N)return!0;const ee=j-L,le=W-N;return ee*ee+le*le<=m*m}}const Kl=Math.tan(85*Math.PI/180);function Ds(f,s,c,m,v,w,M){const k=o.create();if(c)if(w.name==="globe"){const L=o.calculateGlobeLabelMatrix(v,s);o.multiply(k,k,L)}else{const L=bt([],M);k[0]=L[0],k[1]=L[1],k[4]=L[2],k[5]=L[3],m||o.rotateZ(k,k,v.angle)}else o.multiply(k,v.labelPlaneMatrix,f);return k}function Jc(f,s,c,m,v,w,M){const k=Ds(f,s,c,m,v,w,M);return w.name==="globe"&&c||(k[2]=k[6]=k[10]=k[14]=0),k}function Ou(f,s,c,m,v,w,M){if(c){if(w.name==="globe"){const k=Ds(f,s,c,m,v,w,M);return o.invert(k,k),o.multiply(k,f,k),k}{const k=o.clone(f),L=o.identity([]);return L[0]=M[0],L[1]=M[1],L[4]=M[2],L[5]=M[3],o.multiply(k,k,L),m||o.rotateZ(k,k,-v.angle),k}}return v.glCoordMatrix}function hs(f,s,c,m){const v=[f,s,c,1];c?o.transformMat4$1(v,v,m):Wn(v,v,m);const w=v[3];return v[0]/=w,v[1]/=w,v[2]/=w,v}function ti(f,s){return Math.min(.5+f/s*.5,1.5)}function on(f,s){const c=f[0]/f[3],m=f[1]/f[3];return c>=-s[0]&&c<=s[0]&&m>=-s[1]&&m<=s[1]}function ln(f,s,c,m,v,w,M,k,L,j){const N=c.transform,W=m?f.textSizeData:f.iconSizeData,ee=o.evaluateSizeForZoom(W,c.transform.zoom),le=N.projection.name==="globe",ce=[256/c.width*2+1,256/c.height*2+1],de=m?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;de.clear();let ie=null;le&&(ie=m?f.text.globeExtVertexArray:f.icon.globeExtVertexArray);const se=f.lineVertexArray,me=m?f.text.placedSymbolArray:f.icon.placedSymbolArray,ue=c.transform.width/c.transform.height;let xe,De=!1;for(let we=0;we<me.length;we++){const Ue=me.get(we),{numGlyphs:st,writingMode:Je}=Ue;if(Je!==o.WritingMode.vertical||De||xe===o.WritingMode.horizontal||(De=!0),xe=Je,(Ue.hidden||Je===o.WritingMode.vertical)&&!De){is(st,de);continue}De=!1;const Ge=new o.pointGeometry(Ue.tileAnchorX,Ue.tileAnchorY);let{x:It,y:Ke,z:vt}=N.projection.projectTilePoint(Ge.x,Ge.y,j.canonical);if(L){const[Ei,_i,zi]=L(Ge);It+=Ei,Ke+=_i,vt+=zi}const lt=[It,Ke,vt,1];if(o.transformMat4$1(lt,lt,s),!on(lt,ce)){is(st,de);continue}const Bt=ti(c.transform.cameraToCenterDistance,lt[3]),ut=o.evaluateSizeForFeature(W,ee,Ue),Mt=M?ut/Bt:ut*Bt,jt=hs(It,Ke,vt,v);if(jt[3]<=0){is(st,de);continue}let Ze={};const at=M?null:L,mi=Ui(Ue,Mt,!1,k,s,v,w,f.glyphOffsetArray,se,de,ie,jt,Ge,Ze,ue,at,N.projection,j,M);De=mi.useVertical,at&&mi.needsFlipping&&(Ze={}),(mi.notEnoughRoom||De||mi.needsFlipping&&Ui(Ue,Mt,!0,k,s,v,w,f.glyphOffsetArray,se,de,ie,jt,Ge,Ze,ue,at,N.projection,j,M).notEnoughRoom)&&is(st,de)}m?(f.text.dynamicLayoutVertexBuffer.updateData(de),ie&&f.text.globeExtVertexBuffer.updateData(ie)):(f.icon.dynamicLayoutVertexBuffer.updateData(de),ie&&f.icon.globeExtVertexBuffer.updateData(ie))}function Co(f,s,c,m,v,w,M,k,L,j,N,W,ee,le,ce,de){const{lineStartIndex:ie,glyphStartIndex:se,segment:me}=k,ue=se+k.numGlyphs,xe=ie+k.lineLength,De=s.getoffsetX(se),we=s.getoffsetX(ue-1),Ue=Sa(f*De,c,m,v,w,M,me,ie,xe,L,j,N,W,ee,!0,le,ce,de);if(!Ue)return null;const st=Sa(f*we,c,m,v,w,M,me,ie,xe,L,j,N,W,ee,!0,le,ce,de);return st?{first:Ue,last:st}:null}function ra(f,s,c,m){return f===o.WritingMode.horizontal&&Math.abs(m)>Math.abs(c)?{useVertical:!0}:f===o.WritingMode.vertical?m>0?{needsFlipping:!0}:null:s!==0&&function(v,w){return v===0||Math.abs(w/v)>Kl}(c,m)?s===1?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null}function Ui(f,s,c,m,v,w,M,k,L,j,N,W,ee,le,ce,de,ie,se,me){const ue=s/24,xe=f.lineOffsetX*ue,De=f.lineOffsetY*ue,{lineStartIndex:we,glyphStartIndex:Ue,numGlyphs:st,segment:Je,writingMode:Ge,flipState:It}=f,Ke=we+f.lineLength,vt=lt=>{if(N){const[jt,Ze,at]=lt.up,mi=j.length;o.updateGlobeVertexNormal(N,mi+0,jt,Ze,at),o.updateGlobeVertexNormal(N,mi+1,jt,Ze,at),o.updateGlobeVertexNormal(N,mi+2,jt,Ze,at),o.updateGlobeVertexNormal(N,mi+3,jt,Ze,at)}const[Bt,ut,Mt]=lt.point;o.addDynamicAttributes(j,Bt,ut,Mt,lt.angle)};if(st>1){const lt=Co(ue,k,xe,De,c,W,ee,f,L,w,le,de,!1,ie,se,me);if(!lt)return{notEnoughRoom:!0};if(m&&!c){let[Bt,ut,Mt]=lt.first.point,[jt,Ze,at]=lt.last.point;[Bt,ut]=hs(Bt,ut,Mt,M),[jt,Ze]=hs(jt,Ze,at,M);const mi=ra(Ge,It,(jt-Bt)*ce,Ze-ut);if(f.flipState=mi&&mi.needsFlipping?1:2,mi)return mi}vt(lt.first);for(let Bt=Ue+1;Bt<Ue+st-1;Bt++){const ut=Sa(ue*k.getoffsetX(Bt),xe,De,c,W,ee,Je,we,Ke,L,w,le,de,!1,!1,ie,se,me);if(!ut)return j.length-=4*(Bt-Ue),{notEnoughRoom:!0};vt(ut)}vt(lt.last)}else{if(m&&!c){const Bt=hs(ee.x,ee.y,0,v),ut=we+Je+1,Mt=new o.pointGeometry(L.getx(ut),L.gety(ut)),jt=hs(Mt.x,Mt.y,0,v),Ze=jt[3]>0?jt:jo(ee,Mt,Bt,1,v,void 0,ie,se.canonical),at=ra(Ge,It,(Ze[0]-Bt[0])*ce,Ze[1]-Bt[1]);if(f.flipState=at&&at.needsFlipping?1:2,at)return at}const lt=Sa(ue*k.getoffsetX(Ue),xe,De,c,W,ee,Je,we,Ke,L,w,le,de,!1,!1,ie,se,me);if(!lt)return{notEnoughRoom:!0};vt(lt)}return{}}function Jl(f,s,c,m,v){const{x:w,y:M,z:k}=m.projectTilePoint(f.x,f.y,s);if(!v)return hs(w,M,k,c);const[L,j,N]=v(f);return hs(w+L,M+j,k+N,c)}function jo(f,s,c,m,v,w,M,k){const L=Jl(f.sub(s)._unit()._add(f),k,v,M,w);return o.sub(L,c,L),o.normalize(L,L),o.scaleAndAdd(L,c,L,m)}function Sa(f,s,c,m,v,w,M,k,L,j,N,W,ee,le,ce,de,ie,se){const me=m?f-s:f+s;let ue=me>0?1:-1,xe=0;m&&(ue*=-1,xe=Math.PI),ue<0&&(xe+=Math.PI);let De=k+M+(ue>0?0:1)|0,we=v,Ue=v,st=0,Je=0;const Ge=Math.abs(me),It=[],Ke=[];let vt=w,lt=vt;const Bt=()=>jo(lt,vt,Ue,Ge-st+1,N,ee,de,ie.canonical);for(;st+Je<=Ge;){if(De+=ue,De<k||De>=L)return null;if(Ue=we,lt=vt,It.push(Ue),le&&Ke.push(lt),vt=new o.pointGeometry(j.getx(De),j.gety(De)),we=W[De],!we){const zi=Jl(vt,ie.canonical,N,de,ee);we=zi[3]>0?W[De]=zi:Bt()}st+=Je,Je=o.distance(Ue,we)}ce&&ee&&(W[De]&&(we=Bt(),Je=o.distance(Ue,we)),W[De]=we);const ut=(Ge-st)/Je,Mt=vt.sub(lt)._mult(ut)._add(lt),jt=o.sub([],we,Ue),Ze=o.scaleAndAdd([],Ue,jt,ut);let at=[0,0,1],mi=jt[0],Ei=jt[1];if(se&&(at=de.upVector(ie.canonical,Mt.x,Mt.y),at[0]!==0||at[1]!==0||at[2]!==1)){const zi=[at[2],0,-at[0]],sn=o.cross([],at,zi);o.normalize(zi,zi),o.normalize(sn,sn),mi=o.dot(jt,zi),Ei=o.dot(jt,sn)}if(c){const zi=o.cross([],at,jt);o.normalize(zi,zi),o.scaleAndAdd(Ze,Ze,zi,c*ue)}const _i=xe+Math.atan2(Ei,mi);return It.push(Ze),le&&Ke.push(Mt),{point:Ze,angle:_i,path:It,tilePath:Ke,up:at}}function is(f,s){const c=s.length,m=c+4*f;s.resize(m),s.float32.fill(-1/0,4*c,4*m)}function Wn(f,s,c){const m=s[0],v=s[1];return f[0]=c[0]*m+c[4]*v+c[12],f[1]=c[1]*m+c[5]*v+c[13],f[3]=c[3]*m+c[7]*v+c[15],f}const ws=100;class Ca{constructor(s,c,m=new Br(s.width+200,s.height+200,25),v=new Br(s.width+200,s.height+200,25)){this.transform=s,this.grid=m,this.ignoredGrid=v,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+ws,this.screenBottomBoundary=s.height+ws,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.fogState=c}placeCollisionBox(s,c,m,v,w,M,k,L){let j=m.projectedAnchorX,N=m.projectedAnchorY,W=m.projectedAnchorZ;const ee=m.elevation,le=m.tileID,ce=s.getProjection();if(ee&&le){const[we,Ue,st]=ce.upVector(le.canonical,m.tileAnchorX,m.tileAnchorY),Je=ce.upVectorScale(le.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;j+=we*ee*Je,N+=Ue*ee*Je,W+=st*ee*Je}const de=this.projectAndGetPerspectiveRatio(k,j,N,W,m.tileID,ce.name==="globe"||!!ee||this.transform.pitch>0,ce),ie=M*de.perspectiveRatio,se=(m.x1*c+v.x-m.padding)*ie+de.point.x,me=(m.y1*c+v.y-m.padding)*ie+de.point.y,ue=(m.x2*c+v.x+m.padding)*ie+de.point.x,xe=(m.y2*c+v.y+m.padding)*ie+de.point.y,De=de.perspectiveRatio<=.55||de.occluded;return!this.isInsideGrid(se,me,ue,xe)||!w&&this.grid.hitTest(se,me,ue,xe,L)||De?{box:[],offscreen:!1,occluded:de.occluded}:{box:[se,me,ue,xe],offscreen:this.isOffscreen(se,me,ue,xe),occluded:!1}}placeCollisionCircles(s,c,m,v,w,M,k,L,j,N,W,ee,le,ce,de){const ie=[],se=this.transform.elevation,me=s.getProjection(),ue=se?se.getAtTileOffsetFunc(de,this.transform.center.lat,this.transform.worldSize,me):null,xe=new o.pointGeometry(m.tileAnchorX,m.tileAnchorY);let{x:De,y:we,z:Ue}=me.projectTilePoint(xe.x,xe.y,de.canonical);if(ue){const[Mt,jt,Ze]=ue(xe);De+=Mt,we+=jt,Ue+=Ze}const st=me.name==="globe",Je=this.projectAndGetPerspectiveRatio(k,De,we,Ue,de,st||!!se||this.transform.pitch>0,me),{perspectiveRatio:Ge}=Je,It=(W?M/Ge:M*Ge)/o.ONE_EM,Ke=hs(De,we,Ue,L),vt=Je.signedDistanceFromCamera>0?Co(It,w,m.lineOffsetX*It,m.lineOffsetY*It,!1,Ke,xe,m,v,L,{},se&&!W?ue:null,W&&!!se,me,de,W):null;let lt=!1,Bt=!1,ut=!0;if(vt&&!Je.occluded){const Mt=.5*le*Ge+ce,jt=new o.pointGeometry(-100,-100),Ze=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),at=new zr,{first:mi,last:Ei}=vt,_i=mi.path.length;let zi=[];for(let ci=_i-1;ci>=1;ci--)zi.push(mi.path[ci]);for(let ci=1;ci<Ei.path.length;ci++)zi.push(Ei.path[ci]);const sn=2.5*Mt;j&&(zi=zi.map(([ci,Kn,zn],tr)=>(ue&&!st&&(zn=ue(tr<_i-1?mi.tilePath[_i-1-tr]:Ei.tilePath[tr-_i+2])[2]),hs(ci,Kn,zn,j))),zi.some(ci=>ci[3]<=0)&&(zi=[]));let Mi=[];if(zi.length>0){let ci=1/0,Kn=-1/0,zn=1/0,tr=-1/0;for(const Hn of zi)ci=Math.min(ci,Hn[0]),zn=Math.min(zn,Hn[1]),Kn=Math.max(Kn,Hn[0]),tr=Math.max(tr,Hn[1]);Kn>=jt.x&&ci<=Ze.x&&tr>=jt.y&&zn<=Ze.y&&(Mi=[zi.map(Hn=>new o.pointGeometry(Hn[0],Hn[1]))],(ci<jt.x||Kn>Ze.x||zn<jt.y||tr>Ze.y)&&(Mi=o.clipLine(Mi,jt.x,jt.y,Ze.x,Ze.y)))}for(const ci of Mi){at.reset(ci,.25*Mt);let Kn=0;Kn=at.length<=.5*Mt?1:Math.ceil(at.paddedLength/sn)+1;for(let zn=0;zn<Kn;zn++){const tr=zn/Math.max(Kn-1,1),Hn=at.lerp(tr),Do=Hn.x+ws,fo=Hn.y+ws;ie.push(Do,fo,Mt,0);const Qs=Do-Mt,Da=fo-Mt,ur=Do+Mt,Zn=fo+Mt;if(ut=ut&&this.isOffscreen(Qs,Da,ur,Zn),Bt=Bt||this.isInsideGrid(Qs,Da,ur,Zn),!c&&this.grid.hitTestCircle(Do,fo,Mt,ee)&&(lt=!0,!N))return{circles:[],offscreen:!1,collisionDetected:lt,occluded:!1}}}}return{circles:!N&&lt||!Bt?[]:ie,offscreen:ut,collisionDetected:lt,occluded:Je.occluded}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let m=1/0,v=1/0,w=-1/0,M=-1/0;for(const N of s){const W=new o.pointGeometry(N.x+ws,N.y+ws);m=Math.min(m,W.x),v=Math.min(v,W.y),w=Math.max(w,W.x),M=Math.max(M,W.y),c.push(W)}const k=this.grid.query(m,v,w,M).concat(this.ignoredGrid.query(m,v,w,M)),L={},j={};for(const N of k){const W=N.key;if(L[W.bucketInstanceId]===void 0&&(L[W.bucketInstanceId]={}),L[W.bucketInstanceId][W.featureIndex])continue;const ee=[new o.pointGeometry(N.x1,N.y1),new o.pointGeometry(N.x2,N.y1),new o.pointGeometry(N.x2,N.y2),new o.pointGeometry(N.x1,N.y2)];o.polygonIntersectsPolygon(c,ee)&&(L[W.bucketInstanceId][W.featureIndex]=!0,j[W.bucketInstanceId]===void 0&&(j[W.bucketInstanceId]=[]),j[W.bucketInstanceId].push(W.featureIndex))}return j}insertCollisionBox(s,c,m,v,w){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:w},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,c,m,v,w){const M=c?this.ignoredGrid:this.grid,k={bucketInstanceId:m,featureIndex:v,collisionGroupID:w};for(let L=0;L<s.length;L+=4)M.insertCircle(k,s[L],s[L+1],s[L+2])}projectAndGetPerspectiveRatio(s,c,m,v,w,M,k){const L=[c,m,v,1];let j=!1;if(v||this.transform.pitch>0){o.transformMat4$1(L,L,s);const W=k.name==="globe";this.fogState&&w&&!W&&(j=function(le,ce,de,ie,se,me){const ue=me.calculateFogTileMatrix(se),xe=[ce,de,ie];return o.transformMat4(xe,xe,ue),tn(le,xe,me.pitch,me._fov)}(this.fogState,c,m,v,w.toUnwrapped(),this.transform)>.9)}else Wn(L,L,s);const N=L[3];return{point:new o.pointGeometry((L[0]/N+1)/2*this.transform.width+ws,(-L[1]/N+1)/2*this.transform.height+ws),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/N*.5,1.5),signedDistanceFromCamera:N,occluded:M&&L[2]>N||j}}isOffscreen(s,c,m,v){return m<ws||s>=this.screenRightBoundary||v<ws||c>this.screenBottomBoundary}isInsideGrid(s,c,m,v){return m>=0&&s<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const s=o.identity([]);return o.translate(s,s,[-100,-100,0]),s}}function fl(f,s,c){const m=s.createTileMatrix(f,f.worldSize,c.toUnwrapped());return o.multiply(new Float32Array(16),f.projMatrix,m)}function Vo(f,s,c){if(s.projection.name===c.projection.name)return f.projMatrix;const m=c.clone();return m.setProjection(s.projection),fl(m,s.getProjection(),f)}function pl(f,s,c){return s.name===c.projection.name?f.projMatrix:fl(c,s,f)}class Va{constructor(s,c,m,v){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Ma{constructor(s,c,m,v,w,M=!1){this.text=new Va(s?s.text:null,c,m,w),this.icon=new Va(s?s.icon:null,c,v,w),this.clipped=M}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class $a{constructor(s,c,m,v=!1){this.text=s,this.icon=c,this.skipFade=m,this.clipped=v}}class Ac{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Ic{constructor(s,c,m,v,w){this.bucketInstanceId=s,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=w}}class Ns{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const c=++this.maxGroupID;this.collisionGroups[s]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[s]}}function kr(f,s,c,m,v){const{horizontalAlign:w,verticalAlign:M}=o.getAnchorAlignment(f),k=-(w-.5)*s,L=-(M-.5)*c,j=o.evaluateVariableOffset(f,m);return new o.pointGeometry(k+j[0]*v,L+j[1]*v)}function ml(f,s,c,m,v){const w=new o.pointGeometry(f,s);return c&&w._rotate(m?v:-v),w}class zu{constructor(s,c,m,v,w){this.transform=s.clone(),this.projection=s.projection.name,this.collisionIndex=new Ca(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Ns(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,c,m,v){const w=m.getBucket(c),M=m.latestFeatureIndex;if(!w||!M||c.id!==w.layerIds[0])return;const k=w.layers[0].layout,L=m.collisionBoxArray,j=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),N=m.tileSize/o.EXTENT,W=m.tileID.toUnwrapped();this.transform.setProjection(w.projection);const ee=(le=m.tileID,ce=w.getProjection(),de=this.transform,ce.name===this.projection?de.calculateProjMatrix(le.toUnwrapped()):fl(de,ce,le));var le,ce,de;const ie=k.get("text-pitch-alignment")==="map",se=k.get("text-rotation-alignment")==="map";c.compileFilter();const me=c.dynamicFilter(),ue=c.dynamicFilterNeedsFeature(),xe=this.transform.calculatePixelsToTileUnitsMatrix(m),De=Jc(ee,m.tileID.canonical,ie,se,this.transform,w.getProjection(),xe);let we=null;if(ie){const Je=Ou(ee,m.tileID.canonical,ie,se,this.transform,w.getProjection(),xe);we=o.multiply([],this.transform.labelPlaneMatrix,Je)}let Ue=null;me&&m.latestFeatureIndex&&(Ue={unwrappedTileID:W,dynamicFilter:me,dynamicFilterNeedsFeature:ue,featureIndex:m.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Ic(w.bucketInstanceId,M,w.sourceLayerIndex,w.index,m.tileID);const st={bucket:w,layout:k,posMatrix:ee,textLabelPlaneMatrix:De,labelToScreenMatrix:we,clippingData:Ue,scale:j,textPixelRatio:N,holdingForFade:m.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(v)for(const Je of w.sortKeyRanges){const{sortKey:Ge,symbolInstanceStart:It,symbolInstanceEnd:Ke}=Je;s.push({sortKey:Ge,symbolInstanceStart:It,symbolInstanceEnd:Ke,parameters:st})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:st})}attemptAnchorPlacement(s,c,m,v,w,M,k,L,j,N,W,ee,le,ce,de,ie,se,me){const{textOffset0:ue,textOffset1:xe,crossTileID:De}=ee,we=[ue,xe],Ue=kr(s,m,v,we,w),st=this.collisionIndex.placeCollisionBox(ce,w,c,ml(Ue.x,Ue.y,M,k,this.transform.angle),W,L,j,N.predicate);if(ie){const Je=ce.getSymbolInstanceIconSize(me,this.transform.zoom,ee.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ce,Je,ie,ml(Ue.x,Ue.y,M,k,this.transform.angle),W,L,j,N.predicate).box.length===0)return}if(st.box.length>0){let Je;return this.prevPlacement&&this.prevPlacement.variableOffsets[De]&&this.prevPlacement.placements[De]&&this.prevPlacement.placements[De].text&&(Je=this.prevPlacement.variableOffsets[De].anchor),this.variableOffsets[De]={textOffset:we,width:m,height:v,anchor:s,textScale:w,prevAnchor:Je},this.markUsedJustification(ce,s,ee,de),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,de,ee),this.placedOrientations[De]=de),{shift:Ue,placedGlyphBoxes:st}}}placeLayerBucketPart(s,c,m,v){const{bucket:w,layout:M,posMatrix:k,textLabelPlaneMatrix:L,labelToScreenMatrix:j,clippingData:N,textPixelRatio:W,holdingForFade:ee,collisionBoxArray:le,partiallyEvaluatedTextSize:ce,partiallyEvaluatedIconSize:de,collisionGroup:ie}=s.parameters,se=M.get("text-optional"),me=M.get("icon-optional"),ue=M.get("text-allow-overlap"),xe=M.get("icon-allow-overlap"),De=M.get("text-rotation-alignment")==="map",we=M.get("text-pitch-alignment")==="map",Ue=M.get("icon-text-fit")!=="none",st=M.get("symbol-z-order")==="viewport-y";this.transform.setProjection(w.projection);let Je=ue&&(xe||!w.hasIconData()||me),Ge=xe&&(ue||!w.hasTextData()||se);!w.collisionArrays&&le&&w.deserializeCollisionBoxes(le),m&&v&&w.updateCollisionDebugBuffers(this.transform.zoom,le);const It=(Ke,vt,lt)=>{const{crossTileID:Bt,numVerticalGlyphVertices:ut}=Ke;if(N){const ur={zoom:this.transform.zoom,pitch:this.transform.pitch};let Zn=null;if(N.dynamicFilterNeedsFeature){const Pn=this.retainedQueryData[w.bucketInstanceId];Zn=N.featureIndex.loadFeature({featureIndex:Ke.featureIndex,bucketIndex:Pn.bucketIndex,sourceLayerIndex:Pn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,N.dynamicFilter)(ur,Zn,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new o.pointGeometry(Ke.tileAnchorX,Ke.tileAnchorY),this.transform.calculateDistanceTileData(N.unwrappedTileID)))return this.placements[Bt]=new $a(!1,!1,!1,!0),void(c[Bt]=!0)}if(c[Bt])return;if(ee)return void(this.placements[Bt]=new $a(!1,!1,!1));let Mt=!1,jt=!1,Ze=!0,at=!1,mi=!1,Ei=null,_i={box:null,offscreen:null,occluded:null},zi={box:null,offscreen:null,occluded:null},sn=null,Mi=null,ci=null,Kn=0,zn=0,tr=0;lt.textFeatureIndex?Kn=lt.textFeatureIndex:Ke.useRuntimeCollisionCircles&&(Kn=Ke.featureIndex),lt.verticalTextFeatureIndex&&(zn=lt.verticalTextFeatureIndex);const Hn=ur=>{ur.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const Zn=this.transform.elevation;(Zn||ur.elevation)&&(ur.elevation=Zn?Zn.getAtTileOffset(ur.tileID,ur.tileAnchorX,ur.tileAnchorY):0)},Do=lt.textBox;if(Do){Hn(Do);const ur=Pn=>{let Gr=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Pn&&this.prevPlacement){const Vs=this.prevPlacement.placedOrientations[Bt];Vs&&(this.placedOrientations[Bt]=Vs,Gr=Vs,this.markUsedOrientation(w,Gr,Ke))}return Gr},Zn=(Pn,Gr)=>{if(w.allowVerticalPlacement&&ut>0&&lt.verticalTextBox){for(const Vs of w.writingModes)if(Vs===o.WritingMode.vertical?(_i=Gr(),zi=_i):_i=Pn(),_i&&_i.box&&_i.box.length)break}else _i=Pn()};if(M.get("text-variable-anchor")){let Pn=M.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Bt]){const dr=this.prevPlacement.variableOffsets[Bt];Pn.indexOf(dr.anchor)>0&&(Pn=Pn.filter(eo=>eo!==dr.anchor),Pn.unshift(dr.anchor))}const Gr=(dr,eo,Hu)=>{const Pa=w.getSymbolInstanceTextSize(ce,Ke,this.transform.zoom,vt),$s=(dr.x2-dr.x1)*Pa+2*dr.padding,Po=(dr.y2-dr.y1)*Pa+2*dr.padding,Xa=Ue&&!xe?eo:null;Xa&&Hn(Xa);let la={box:[],offscreen:!1,occluded:!1};const dn=ue?2*Pn.length:Pn.length;for(let mu=0;mu<dn;++mu){const Ka=this.attemptAnchorPlacement(Pn[mu%Pn.length],dr,$s,Po,Pa,De,we,W,k,ie,mu>=Pn.length,Ke,vt,w,Hu,Xa,ce,de);if(Ka&&(la=Ka.placedGlyphBoxes,la&&la.box&&la.box.length)){Mt=!0,Ei=Ka.shift;break}}return la};Zn(()=>Gr(Do,lt.iconBox,o.WritingMode.horizontal),()=>{const dr=lt.verticalTextBox;return dr&&Hn(dr),w.allowVerticalPlacement&&!(_i&&_i.box&&_i.box.length)&&ut>0&&dr?Gr(dr,lt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),_i&&(Mt=_i.box,Ze=_i.offscreen,at=_i.occluded);const Vs=ur(_i&&_i.box);if(!Mt&&this.prevPlacement){const dr=this.prevPlacement.variableOffsets[Bt];dr&&(this.variableOffsets[Bt]=dr,this.markUsedJustification(w,dr.anchor,Ke,Vs))}}else{const Pn=(Gr,Vs)=>{const dr=w.getSymbolInstanceTextSize(ce,Ke,this.transform.zoom,vt),eo=this.collisionIndex.placeCollisionBox(w,dr,Gr,new o.pointGeometry(0,0),ue,W,k,ie.predicate);return eo&&eo.box&&eo.box.length&&(this.markUsedOrientation(w,Vs,Ke),this.placedOrientations[Bt]=Vs),eo};Zn(()=>Pn(Do,o.WritingMode.horizontal),()=>{const Gr=lt.verticalTextBox;return w.allowVerticalPlacement&&ut>0&&Gr?(Hn(Gr),Pn(Gr,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),ur(_i&&_i.box&&_i.box.length)}}if(sn=_i,Mt=sn&&sn.box&&sn.box.length>0,Ze=sn&&sn.offscreen,at=sn&&sn.occluded,Ke.useRuntimeCollisionCircles){const ur=w.text.placedSymbolArray.get(Ke.centerJustifiedTextSymbolIndex>=0?Ke.centerJustifiedTextSymbolIndex:Ke.verticalPlacedTextSymbolIndex),Zn=o.evaluateSizeForFeature(w.textSizeData,ce,ur),Pn=M.get("text-padding");Mi=this.collisionIndex.placeCollisionCircles(w,ue,ur,w.lineVertexArray,w.glyphOffsetArray,Zn,k,L,j,m,we,ie.predicate,Ke.collisionCircleDiameter*Zn/o.ONE_EM,Pn,this.retainedQueryData[w.bucketInstanceId].tileID),Mt=ue||Mi.circles.length>0&&!Mi.collisionDetected,Ze=Ze&&Mi.offscreen,at=Mi.occluded}if(lt.iconFeatureIndex&&(tr=lt.iconFeatureIndex),lt.iconBox){const ur=Zn=>{Hn(Zn);const Pn=Ue&&Ei?ml(Ei.x,Ei.y,De,we,this.transform.angle):new o.pointGeometry(0,0),Gr=w.getSymbolInstanceIconSize(de,this.transform.zoom,Ke.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,Gr,Zn,Pn,xe,W,k,ie.predicate)};zi&&zi.box&&zi.box.length&&lt.verticalIconBox?(ci=ur(lt.verticalIconBox),jt=ci.box.length>0):(ci=ur(lt.iconBox),jt=ci.box.length>0),Ze=Ze&&ci.offscreen,mi=ci.occluded}const fo=se||Ke.numHorizontalGlyphVertices===0&&ut===0,Qs=me||Ke.numIconVertices===0;if(fo||Qs?Qs?fo||(jt=jt&&Mt):Mt=jt&&Mt:jt=Mt=jt&&Mt,Mt&&sn&&sn.box&&this.collisionIndex.insertCollisionBox(sn.box,M.get("text-ignore-placement"),w.bucketInstanceId,zi&&zi.box&&zn?zn:Kn,ie.ID),jt&&ci&&this.collisionIndex.insertCollisionBox(ci.box,M.get("icon-ignore-placement"),w.bucketInstanceId,tr,ie.ID),Mi&&(Mt&&this.collisionIndex.insertCollisionCircles(Mi.circles,M.get("text-ignore-placement"),w.bucketInstanceId,Kn,ie.ID),m)){const ur=w.bucketInstanceId;let Zn=this.collisionCircleArrays[ur];Zn===void 0&&(Zn=this.collisionCircleArrays[ur]=new Ac);for(let Pn=0;Pn<Mi.circles.length;Pn+=4)Zn.circles.push(Mi.circles[Pn+0]),Zn.circles.push(Mi.circles[Pn+1]),Zn.circles.push(Mi.circles[Pn+2]),Zn.circles.push(Mi.collisionDetected?1:0)}const Da=w.projection.name!=="globe";Je=Je&&(Da||!at),Ge=Ge&&(Da||!mi),this.placements[Bt]=new $a(Mt||Je,jt||Ge,Ze||w.justReloaded),c[Bt]=!0};if(st){const Ke=w.getSortedSymbolIndexes(this.transform.angle);for(let vt=Ke.length-1;vt>=0;--vt){const lt=Ke[vt];It(w.symbolInstances.get(lt),lt,w.collisionArrays[lt])}}else for(let Ke=s.symbolInstanceStart;Ke<s.symbolInstanceEnd;Ke++)It(w.symbolInstances.get(Ke),Ke,w.collisionArrays[Ke]);if(m&&w.bucketInstanceId in this.collisionCircleArrays){const Ke=this.collisionCircleArrays[w.bucketInstanceId];o.invert(Ke.invProjMatrix,k),Ke.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(s,c,m,v){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:L,crossTileID:j}=m,N=o.getAnchorJustification(c),W=v===o.WritingMode.vertical?L:N==="left"?w:N==="center"?M:N==="right"?k:-1;w>=0&&(s.text.placedSymbolArray.get(w).crossTileID=W>=0&&w!==W?0:j),M>=0&&(s.text.placedSymbolArray.get(M).crossTileID=W>=0&&M!==W?0:j),k>=0&&(s.text.placedSymbolArray.get(k).crossTileID=W>=0&&k!==W?0:j),L>=0&&(s.text.placedSymbolArray.get(L).crossTileID=W>=0&&L!==W?0:j)}markUsedOrientation(s,c,m){const v=c===o.WritingMode.horizontal||c===o.WritingMode.horizontalOnly?c:0,w=c===o.WritingMode.vertical?c:0,{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:j}=m,N=s.text.placedSymbolArray;M>=0&&(N.get(M).placedOrientation=v),k>=0&&(N.get(k).placedOrientation=v),L>=0&&(N.get(L).placedOrientation=v),j>=0&&(N.get(j).placedOrientation=w)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(s):1,w=c?c.opacities:{},M=c?c.variableOffsets:{},k=c?c.placedOrientations:{};for(const L in this.placements){const j=this.placements[L],N=w[L];N?(this.opacities[L]=new Ma(N,v,j.text,j.icon,null,j.clipped),m=m||j.text!==N.text.placed||j.icon!==N.icon.placed):(this.opacities[L]=new Ma(null,v,j.text,j.icon,j.skipFade,j.clipped),m=m||j.text||j.icon)}for(const L in w){const j=w[L];if(!this.opacities[L]){const N=new Ma(j,v,!1,!1);N.isHidden()||(this.opacities[L]=N,m=m||j.text.placed||j.icon.placed)}}for(const L in M)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=M[L]);for(const L in k)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=k[L]);m?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:s)}updateLayerOpacities(s,c){const m={};for(const v of c){const w=v.getBucket(s);w&&v.latestFeatureIndex&&s.id===w.layerIds[0]&&this.updateBucketOpacities(w,m,v.collisionBoxArray)}}updateBucketOpacities(s,c,m){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const v=s.layers[0].layout,w=!!s.layers[0].dynamicFilter(),M=new Ma(null,0,!1,!1,!0),k=v.get("text-allow-overlap"),L=v.get("icon-allow-overlap"),j=v.get("text-variable-anchor"),N=v.get("text-rotation-alignment")==="map",W=v.get("text-pitch-alignment")==="map",ee=v.get("icon-text-fit")!=="none",le=new Ma(null,0,k&&(L||!s.hasIconData()||v.get("icon-optional")),L&&(k||!s.hasTextData()||v.get("text-optional")),!0);!s.collisionArrays&&m&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(m);const ce=(ie,se,me)=>{for(let ue=0;ue<se/4;ue++)ie.opacityVertexArray.emplaceBack(me)};let de=0;for(let ie=0;ie<s.symbolInstances.length;ie++){const se=s.symbolInstances.get(ie),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:ue,crossTileID:xe,numIconVertices:De}=se;let we=this.opacities[xe];c[xe]?we=M:we||(we=le,this.opacities[xe]=we),c[xe]=!0;const Ue=me>0||ue>0,st=De>0,Je=this.placedOrientations[xe],Ge=Je===o.WritingMode.vertical,It=Je===o.WritingMode.horizontal||Je===o.WritingMode.horizontalOnly;if(!Ue&&!st||we.isHidden()||de++,Ue){const Ke=ns(we.text);ce(s.text,me,Ge?Ga:Ke),ce(s.text,ue,It?Ga:Ke);const vt=we.text.isHidden(),{leftJustifiedTextSymbolIndex:lt,centerJustifiedTextSymbolIndex:Bt,rightJustifiedTextSymbolIndex:ut,verticalPlacedTextSymbolIndex:Mt}=se,jt=s.text.placedSymbolArray,Ze=vt||Ge?1:0;lt>=0&&(jt.get(lt).hidden=Ze),Bt>=0&&(jt.get(Bt).hidden=Ze),ut>=0&&(jt.get(ut).hidden=Ze),Mt>=0&&(jt.get(Mt).hidden=vt||It?1:0);const at=this.variableOffsets[xe];at&&this.markUsedJustification(s,at.anchor,se,Je);const mi=this.placedOrientations[xe];mi&&(this.markUsedJustification(s,"left",se,mi),this.markUsedOrientation(s,mi,se))}if(st){const Ke=ns(we.icon),{placedIconSymbolIndex:vt,verticalPlacedIconSymbolIndex:lt}=se,Bt=s.icon.placedSymbolArray,ut=we.icon.isHidden()?1:0;vt>=0&&(ce(s.icon,De,Ge?Ga:Ke),Bt.get(vt).hidden=ut),lt>=0&&(ce(s.icon,se.numVerticalIconVertices,It?Ga:Ke),Bt.get(lt).hidden=ut)}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const Ke=s.collisionArrays[ie];if(Ke){let vt=new o.pointGeometry(0,0),lt=!0;if(Ke.textBox||Ke.verticalTextBox){if(j){const ut=this.variableOffsets[xe];ut?(vt=kr(ut.anchor,ut.width,ut.height,ut.textOffset,ut.textScale),N&&vt._rotate(W?this.transform.angle:-this.transform.angle)):lt=!1}w&&(lt=!we.clipped),Ke.textBox&&fs(s.textCollisionBox.collisionVertexArray,we.text.placed,!lt||Ge,vt.x,vt.y),Ke.verticalTextBox&&fs(s.textCollisionBox.collisionVertexArray,we.text.placed,!lt||It,vt.x,vt.y)}const Bt=lt&&Boolean(!It&&Ke.verticalIconBox);Ke.iconBox&&fs(s.iconCollisionBox.collisionVertexArray,we.icon.placed,Bt,ee?vt.x:0,ee?vt.y:0),Ke.verticalIconBox&&fs(s.iconCollisionBox.collisionVertexArray,we.icon.placed,!Bt,ee?vt.x:0,ee?vt.y:0)}}}if(s.fullyClipped=de===0,s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.bucketInstanceId in this.collisionCircleArrays){const ie=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=ie.invProjMatrix,s.placementViewportMatrix=ie.viewportMatrix,s.collisionCircleArray=ie.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>s}setStale(){this.stale=!0}}function fs(f,s,c,m,v){f.emplaceBack(s?1:0,c?1:0,m||0,v||0),f.emplaceBack(s?1:0,c?1:0,m||0,v||0),f.emplaceBack(s?1:0,c?1:0,m||0,v||0),f.emplaceBack(s?1:0,c?1:0,m||0,v||0)}const Mo=Math.pow(2,25),Dd=Math.pow(2,24),Qc=Math.pow(2,17),Xr=Math.pow(2,16),_l=Math.pow(2,9),eu=Math.pow(2,8),gl=Math.pow(2,1);function ns(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const s=f.placed?1:0,c=Math.floor(127*f.opacity);return c*Mo+s*Dd+c*Qc+s*Xr+c*_l+s*eu+c*gl+s}const Ga=0;class tu{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&s.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,c,m,v,w){const M=this._bucketParts;for(;this._currentTileIndex<s.length;)if(c.getBucketParts(M,v,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((k,L)=>k.sortKey-L.sortKey));this._currentPartIndex<M.length;){const k=M[this._currentPartIndex];if(c.placeLayerBucketPart(k,this._seenCrossTileIDs,m,k.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class kn{constructor(s,c,m,v,w,M,k,L){this.placement=new zu(s,w,M,k,L),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(s,c,m){const v=o.exported.now(),w=()=>{const M=o.exported.now()-v;return!this._forceFullPlacement&&M>2};for(;this._currentPlacementIndex>=0;){const M=c[s[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=k)&&(!M.maxzoom||M.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new tu(M)),this._inProgressLayer.continuePlacement(m[M.source],this.placement,this._showCollisionBoxes,M,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Un=512/o.EXTENT/2;class iu{constructor(s,c,m){this.tileID=s,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(let v=0;v<c.length;v++){const w=c.get(v),M=w.key;this.indexedSymbolInstances[M]||(this.indexedSymbolInstances[M]=[]),this.indexedSymbolInstances[M].push({crossTileID:w.crossTileID,coord:this.getScaledCoordinates(w,s)})}}getScaledCoordinates(s,c){const m=Un/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*o.EXTENT+s.tileAnchorX)*m),y:Math.floor((c.canonical.y*o.EXTENT+s.tileAnchorY)*m)}}findMatches(s,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let w=0;w<s.length;w++){const M=s.get(w);if(M.crossTileID)continue;const k=this.indexedSymbolInstances[M.key];if(!k)continue;const L=this.getScaledCoordinates(M,c);for(const j of k)if(Math.abs(j.coord.x-L.x)<=v&&Math.abs(j.coord.y-L.y)<=v&&!m[j.crossTileID]){m[j.crossTileID]=!0,M.crossTileID=j.crossTileID;break}}}}class Oh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Bu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const c=Math.round((s-this.lng)/360);if(c!==0)for(const m in this.indexes){const v=this.indexes[m],w={};for(const M in v){const k=v[M];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),w[k.tileID.key]=k}this.indexes[m]=w}this.lng=s}addBucket(s,c,m){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let w=0;w<c.symbolInstances.length;w++)c.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const v=this.usedCrossTileIDs[s.overscaledZ];for(const w in this.indexes){const M=this.indexes[w];if(Number(w)>s.overscaledZ)for(const k in M){const L=M[k];L.tileID.isChildOf(s)&&L.findMatches(c.symbolInstances,s,v)}else{const k=M[s.scaledTo(Number(w)).key];k&&k.findMatches(c.symbolInstances,s,v)}}for(let w=0;w<c.symbolInstances.length;w++){const M=c.symbolInstances.get(w);M.crossTileID||(M.crossTileID=m.generate(),v[M.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new iu(s,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(s,c){for(const m in c.indexedSymbolInstances)for(const v of c.indexedSymbolInstances[m])delete this.usedCrossTileIDs[s][v.crossTileID]}removeStaleBuckets(s){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const w in v)s[v[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[w]),delete v[w],c=!0)}return c}}class $o{constructor(){this.layerIndexes={},this.crossTileIDs=new Oh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,c,m,v){let w=this.layerIndexes[s.id];w===void 0&&(w=this.layerIndexes[s.id]=new Bu);let M=!1;const k={};v.name!=="globe"&&w.handleWrapJump(m);for(const L of c){const j=L.getBucket(s);j&&s.id===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(L.tileID,j,this.crossTileIDs)&&(M=!0),k[j.bucketInstanceId]=!0)}return w.removeStaleBuckets(k)&&(M=!0),M}pruneUnusedLayers(s){const c={};s.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}const kc=(f,s)=>o.emitValidationErrors(f,s&&s.filter(c=>c.identifier!=="source.canvas")),nu=o.pick(bi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),yl=o.pick(bi,["setCenter","setZoom","setBearing","setPitch"]),qa={version:8,layers:[],sources:{}},Kr={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class T extends o.Evented{constructor(s,c={}){super(),this.map=s,this.dispatcher=new xs(Li(),this),this.imageManager=new Yt,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(s._requestManager,c.localFontFamily?o.LocalGlyphMode.all:c.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,c.localFontFamily||c.localIdeographFontFamily),this.crossTileSymbolIndex=new $o,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const m=this;this._rtlTextPluginCallback=T.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(w,M)=>{if(o.triggerPluginCompletionEvent(w),M&&M.every(k=>k))for(const k in m._sourceCaches){const L=m._sourceCaches[k],j=L.getSource().type;j!=="vector"&&j!=="geojson"||L.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const w=this.getSource(v.sourceId);if(w&&w.vectorLayerIds)for(const M in this._layers){const k=this._layers[M];k.source===w.id&&this._validateLayer(k)}})}loadURL(s,c={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const m=typeof c.validate=="boolean"?c.validate:!o.isMapboxURL(s);s=this.map._requestManager.normalizeStyleURL(s,c.accessToken);const v=this.map._requestManager.transformRequest(s,o.ResourceType.Style);this._request=o.getJSON(v,(w,M)=>{this._request=null,w?this.fire(new o.ErrorEvent(w)):M&&this._load(M,m)})}loadJSON(s,c={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(s,c.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(qa,!1)}_updateLayerCount(s,c){const m=c?1:-1;s.is3D()&&(this._num3DLayers+=m),s.type==="circle"&&(this._numCircleLayers+=m),s.type==="symbol"&&(this._numSymbolLayers+=m)}_load(s,c){if(c&&kc(this,o.validateStyle(s)))return;this._loaded=!0,this.stylesheet=o.clone$1(s),this._updateMapProjection();for(const v in s.sources)this.addSource(v,s.sources[v],{validate:!1});this._changed=!1,s.sprite?this._loadSprite(s.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(s.glyphs);const m=Mn(this.stylesheet.layers);this._order=m.map(v=>v.id),this._layers={},this._serializedLayers={};for(let v of m)v=o.createStyleLayer(v),v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ri(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(s){s?this.stylesheet.projection=s:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(s){this._spriteRequest=function(c,m,v){let w,M,k;const L=o.exported.devicePixelRatio>1?"@2x":"";let j=o.getJSON(m.transformRequest(m.normalizeSpriteURL(c,L,".json"),o.ResourceType.SpriteJSON),(ee,le)=>{j=null,k||(k=ee,w=le,W())}),N=o.getImage(m.transformRequest(m.normalizeSpriteURL(c,L,".png"),o.ResourceType.SpriteImage),(ee,le)=>{N=null,k||(k=ee,M=le,W())});function W(){if(k)v(k);else if(w&&M){const ee=o.exported.getImageData(M),le={};for(const ce in w){const{width:de,height:ie,x:se,y:me,sdf:ue,pixelRatio:xe,stretchX:De,stretchY:we,content:Ue}=w[ce],st=new o.RGBAImage({width:de,height:ie});o.RGBAImage.copy(ee,st,{x:se,y:me},{x:0,y:0},{width:de,height:ie}),le[ce]={data:st,pixelRatio:xe,sdf:ue,stretchX:De,stretchY:we,content:Ue}}v(null,le)}}return{cancel(){j&&(j.cancel(),j=null),N&&(N.cancel(),N=null)}}}(s,this.map._requestManager,(c,m)=>{if(this._spriteRequest=null,c)this.fire(new o.ErrorEvent(c));else if(m)for(const v in m)this.imageManager.addImage(v,m[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(s){const c=this.getSource(s.source);if(!c)return;const m=s.sourceLayer;m&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${c.id}" as specified by style layer "${s.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this._sourceCaches)if(!this._sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(s){const c=[];for(const m of s){const v=this._layers[m];v.type!=="custom"&&c.push(v.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const s in this._sourceCaches)if(this._sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(s){return!!this.terrain&&Kr[s.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(s){if(!this._loaded)return;const c=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(v.length||w.length)&&this._updateWorkerLayers(v,w);for(const M in this._updatedSources){const k=this._updatedSources[M];k==="reload"?this._reloadSource(M):k==="clear"&&this._clearSource(M)}this._updateTilesForChangedImages();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(s);this.light.updateTransitions(s),this.fog&&this.fog.updateTransitions(s),this._resetUpdates()}const m={};for(const v in this._sourceCaches){const w=this._sourceCaches[v];m[v]=w.used,w.used=!1}for(const v of this._order){const w=this._layers[v];if(w.recalculate(s,this._availableImages),!w.isHidden(s.zoom)){const k=this._getLayerSourceCache(w);k&&(k.used=!0)}const M=this.map.painter;if(M){const k=w.getProgramIds();if(!k)continue;const L=w.getProgramConfiguration(s.zoom);for(const j of k)M.useProgram(j,L)}}for(const v in m){const w=this._sourceCaches[v];m[v]!==w.used&&w.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(s),this.terrain&&this.terrain.recalculate(s),this.fog&&this.fog.recalculate(s),this.z=s.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),c&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const c in this._sourceCaches)this._sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateWorkerLayers(s,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(s){if(this._checkLoaded(),kc(this,o.validateStyle(s)))return!1;(s=o.clone$1(s)).layers=Mn(s.layers);const c=function(v,w){if(!v)return[{command:bi.setStyle,args:[w]}];let M=[];try{if(!D(v.version,w.version))return[{command:bi.setStyle,args:[w]}];D(v.center,w.center)||M.push({command:bi.setCenter,args:[w.center]}),D(v.zoom,w.zoom)||M.push({command:bi.setZoom,args:[w.zoom]}),D(v.bearing,w.bearing)||M.push({command:bi.setBearing,args:[w.bearing]}),D(v.pitch,w.pitch)||M.push({command:bi.setPitch,args:[w.pitch]}),D(v.sprite,w.sprite)||M.push({command:bi.setSprite,args:[w.sprite]}),D(v.glyphs,w.glyphs)||M.push({command:bi.setGlyphs,args:[w.glyphs]}),D(v.transition,w.transition)||M.push({command:bi.setTransition,args:[w.transition]}),D(v.light,w.light)||M.push({command:bi.setLight,args:[w.light]}),D(v.fog,w.fog)||M.push({command:bi.setFog,args:[w.fog]}),D(v.projection,w.projection)||M.push({command:bi.setProjection,args:[w.projection]});const k={},L=[];(function(W,ee,le,ce){let de;for(de in ee=ee||{},W=W||{})W.hasOwnProperty(de)&&(ee.hasOwnProperty(de)||Rn(de,le,ce));for(de in ee)ee.hasOwnProperty(de)&&(W.hasOwnProperty(de)?D(W[de],ee[de])||(W[de].type==="geojson"&&ee[de].type==="geojson"&&ja(W,ee,de)?le.push({command:bi.setGeoJSONSourceData,args:[de,ee[de].data]}):na(de,ee,le,ce)):Xn(de,ee,le))})(v.sources,w.sources,L,k);const j=[];v.layers&&v.layers.forEach(W=>{W.source&&k[W.source]?M.push({command:bi.removeLayer,args:[W.id]}):j.push(W)});let N=v.terrain;N&&k[N.source]&&(M.push({command:bi.setTerrain,args:[void 0]}),N=void 0),M=M.concat(L),D(N,w.terrain)||M.push({command:bi.setTerrain,args:[w.terrain]}),function(W,ee,le){ee=ee||[];const ce=(W=W||[]).map(yt),de=ee.map(yt),ie=W.reduce(So,{}),se=ee.reduce(So,{}),me=ce.slice(),ue=Object.create(null);let xe,De,we,Ue,st,Je,Ge;for(xe=0,De=0;xe<ce.length;xe++)we=ce[xe],se.hasOwnProperty(we)?De++:(le.push({command:bi.removeLayer,args:[we]}),me.splice(me.indexOf(we,De),1));for(xe=0,De=0;xe<de.length;xe++)we=de[de.length-1-xe],me[me.length-1-xe]!==we&&(ie.hasOwnProperty(we)?(le.push({command:bi.removeLayer,args:[we]}),me.splice(me.lastIndexOf(we,me.length-De),1)):De++,Je=me[me.length-xe],le.push({command:bi.addLayer,args:[se[we],Je]}),me.splice(me.length-xe,0,we),ue[we]=!0);for(xe=0;xe<de.length;xe++)if(we=de[xe],Ue=ie[we],st=se[we],!ue[we]&&!D(Ue,st))if(D(Ue.source,st.source)&&D(Ue["source-layer"],st["source-layer"])&&D(Ue.type,st.type)){for(Ge in ao(Ue.layout,st.layout,le,we,null,bi.setLayoutProperty),ao(Ue.paint,st.paint,le,we,null,bi.setPaintProperty),D(Ue.filter,st.filter)||le.push({command:bi.setFilter,args:[we,st.filter]}),D(Ue.minzoom,st.minzoom)&&D(Ue.maxzoom,st.maxzoom)||le.push({command:bi.setLayerZoomRange,args:[we,st.minzoom,st.maxzoom]}),Ue)Ue.hasOwnProperty(Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?ao(Ue[Ge],st[Ge],le,we,Ge.slice(6),bi.setPaintProperty):D(Ue[Ge],st[Ge])||le.push({command:bi.setLayerProperty,args:[we,Ge,st[Ge]]}));for(Ge in st)st.hasOwnProperty(Ge)&&!Ue.hasOwnProperty(Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?ao(Ue[Ge],st[Ge],le,we,Ge.slice(6),bi.setPaintProperty):D(Ue[Ge],st[Ge])||le.push({command:bi.setLayerProperty,args:[we,Ge,st[Ge]]}))}else le.push({command:bi.removeLayer,args:[we]}),Je=me[me.lastIndexOf(we)+1],le.push({command:bi.addLayer,args:[st,Je]})}(j,w.layers,M)}catch(k){console.warn("Unable to compute style diff:",k),M=[{command:bi.setStyle,args:[w]}]}return M}(this.serialize(),s).filter(v=>!(v.command in yl));if(c.length===0)return!1;const m=c.filter(v=>!(v.command in nu));if(m.length>0)throw new Error(`Unimplemented: ${m.map(v=>v.command).join(", ")}.`);return c.forEach(v=>{v.command!=="setTransition"&&v.command!=="setProjection"&&this[v.command].apply(this,v.args)}),this.stylesheet=s,this._updateMapProjection(),!0}addImage(s,c){return this.getImage(s)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(s,c),this._afterImageUpdated(s),this)}updateImage(s,c){this.imageManager.updateImage(s,c)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){return this.getImage(s)?(this.imageManager.removeImage(s),this._afterImageUpdated(s),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(s,c,m={}){if(this._checkLoaded(),this.getSource(s)!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.validateSource,`sources.${s}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=Ye(s,c,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(s),source:v.serialize(),sourceId:s}));const w=M=>{const k=(M?"symbol:":"other:")+s,L=this._sourceCaches[k]=new o.SourceCache(k,v,M);(M?this._symbolSourceCaches:this._otherSourceCaches)[s]=L,L.style=this,L.onAdd(this.map)};w(!1),c.type!=="vector"&&c.type!=="geojson"||w(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(s){this._checkLoaded();const c=this.getSource(s);if(!c)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===s)return this.fire(new o.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===s)return this.fire(new o.ErrorEvent(new Error(`Source "${s}" cannot be removed while terrain is using it.`)));const m=this._getSourceCaches(s);for(const v of m)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();return delete this._otherSourceCaches[s],delete this._symbolSourceCaches[s],c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(s,c){this._checkLoaded(),this.getSource(s).setData(c),this._changed=!0}getSource(s){const c=this._getSourceCache(s);return c&&c.getSource()}_getSources(){const s=[];for(const c in this._otherSourceCaches){const m=this._getSourceCache(c);m&&s.push(m.getSource())}return s}addLayer(s,c,m={}){this._checkLoaded();const v=s.id;if(this.getLayer(v))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let w;if(s.type==="custom"){if(kc(this,o.validateCustomStyleLayer(s)))return;w=o.createStyleLayer(s)}else{if(typeof s.source=="object"&&(this.addSource(v,s.source),s=o.clone$1(s),s=o.extend(s,{source:v})),this._validate(o.validateLayer,`layers.${v}`,s,{arrayIndex:-1},m))return;w=o.createStyleLayer(s),this._validateLayer(w),w.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const M=c?this._order.indexOf(c):this._order.length;if(c&&M===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`)));this._order.splice(M,0,v),this._layerOrderChanged=!0,this._layers[v]=w;const k=this._getLayerSourceCache(w);if(this._removedLayers[v]&&w.source&&k&&w.type!=="custom"){const L=this._removedLayers[v];delete this._removedLayers[v],L.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",k.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(s,c){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new o.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===c)return;const m=this._order.indexOf(s);this._order.splice(m,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`))):(this._order.splice(v,0,s),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(s){this._checkLoaded();const c=this._layers[s];if(!c)return void this.fire(new o.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be removed.`)));c.setEventedParent(null),this._updateLayerCount(c,!1);const m=this._order.indexOf(s);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=c,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],c.onRemove&&c.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}hasLayerType(s){for(const c in this._layers)if(this._layers[c].type===s)return!0;return!1}setLayerZoomRange(s,c,m){this._checkLoaded();const v=this.getLayer(s);v?v.minzoom===c&&v.maxzoom===m||(c!=null&&(v.minzoom=c),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new o.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(s,c,m={}){this._checkLoaded();const v=this.getLayer(s);if(v){if(!D(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(o.validateFilter,`layers.${v.id}.filter`,c,{layerType:v.type},m)||(v.filter=o.clone$1(c),this._updateLayer(v)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be filtered.`)))}getFilter(s){const c=this.getLayer(s);return c&&o.clone$1(c.filter)}setLayoutProperty(s,c,m,v={}){this._checkLoaded();const w=this.getLayer(s);w?D(w.getLayoutProperty(c),m)||(w.setLayoutProperty(c,m,v),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(s,c){const m=this.getLayer(s);if(m)return m.getLayoutProperty(c);this.fire(new o.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style.`)))}setPaintProperty(s,c,m,v={}){this._checkLoaded();const w=this.getLayer(s);w?D(w.getPaintProperty(c),m)||(w.setPaintProperty(c,m,v)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(s,c){const m=this.getLayer(s);return m&&m.getPaintProperty(c)}setFeatureState(s,c){this._checkLoaded();const m=s.source,v=s.sourceLayer,w=this.getSource(m);if(!w)return void this.fire(new o.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const M=w.type;if(M==="geojson"&&v)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(M==="vector"&&!v)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));s.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const k=this._getSourceCaches(m);for(const L of k)L.setFeatureState(v,s.id,c)}removeFeatureState(s,c){this._checkLoaded();const m=s.source,v=this.getSource(m);if(!v)return void this.fire(new o.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const w=v.type,M=w==="vector"?s.sourceLayer:void 0;if(w==="vector"&&!M)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof s.id!="string"&&typeof s.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const k=this._getSourceCaches(m);for(const L of k)L.removeFeatureState(M,s.id,c)}getFeatureState(s){this._checkLoaded();const c=s.source,m=s.sourceLayer,v=this.getSource(c);if(v){if(v.type!=="vector"||m)return s.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(c)[0].getFeatureState(m,s.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const s={};for(const c in this._sourceCaches){const m=this._sourceCaches[c].getSource();s[m.id]||(s[m.id]=m.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:s,layers:this._serializeLayers(this._order)},c=>c!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0;const c=this._getLayerSourceCache(s);s.source&&!this._updatedSources[s.source]&&c&&c.getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",c.pause()),this._changed=!0,s.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(s){const c=M=>this._layers[M].type==="fill-extrusion",m={},v=[];for(let M=this._order.length-1;M>=0;M--){const k=this._order[M];if(c(k)){m[k]=M;for(const L of s){const j=L[k];if(j)for(const N of j)v.push(N)}}}v.sort((M,k)=>k.intersectionZ-M.intersectionZ);const w=[];for(let M=this._order.length-1;M>=0;M--){const k=this._order[M];if(c(k))for(let L=v.length-1;L>=0;L--){const j=v[L].feature;if(m[j.layer.id]<M)break;w.push(j),v.pop()}else for(const L of s){const j=L[k];if(j)for(const N of j)w.push(N.feature)}}return w}queryRenderedFeatures(s,c,m){c&&c.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const L of c.layers){const j=this._layers[L];if(!j)return this.fire(new o.ErrorEvent(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];v[j.source]=!0}}const w=[];c.availableImages=this._availableImages;const M=c&&c.layers?c.layers.some(L=>{const j=this.getLayer(L);return j&&j.is3D()}):this.has3DLayers(),k=Bs.createFromScreenPoints(s,m);for(const L in this._sourceCaches){const j=this._sourceCaches[L].getSource().id;c.layers&&!v[j]||w.push(Qe(this._sourceCaches[L],this._layers,this._serializedLayers,k,c,m,M,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(L,j,N,W,ee,le,ce){const de={},ie=le.queryRenderedSymbols(W),se=[];for(const me of Object.keys(ie).map(Number))se.push(ce[me]);se.sort(ii);for(const me of se){const ue=me.featureIndex.lookupSymbolFeatures(ie[me.bucketInstanceId],j,me.bucketIndex,me.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,L);for(const xe in ue){const De=de[xe]=de[xe]||[],we=ue[xe];we.sort((Ue,st)=>{const Je=me.featureSortOrder;if(Je){const Ge=Je.indexOf(Ue.featureIndex);return Je.indexOf(st.featureIndex)-Ge}return st.featureIndex-Ue.featureIndex});for(const Ue of we)De.push(Ue)}}for(const me in de)de[me].forEach(ue=>{const xe=ue.feature,De=N(L[me]).getFeatureState(xe.layer["source-layer"],xe.id);xe.source=xe.layer.source,xe.layer["source-layer"]&&(xe.sourceLayer=xe.layer["source-layer"]),xe.state=De});return de}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),k.screenGeometry,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(s,c){c&&c.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",c.filter,null,c);const m=this._getSourceCaches(s);let v=[];for(const w of m)v=v.concat(Tt(w,c));return v}addSourceType(s,c,m){return T.getSourceType(s)?m(new Error(`A source type called "${s}" already exists.`)):(T.setSourceType(s,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:c.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(s,c={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const M in s)if(!D(s[M],m[M])){v=!0;break}if(!v)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(s,c),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(s,c=1){if(this._checkLoaded(),!s)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(c===1){if(typeof s.source=="object"){const m="terrain-dem-src";this.addSource(m,s.source),s=o.clone$1(s),s=o.extend(s,{source:m})}if(this._validate(o.validateTerrain,"terrain",s))return}if(!this.terrain||this.terrain&&c!==this.terrain.drapeRenderMode)this._createTerrain(s,c);else{const m=this.terrain,v=m.get();for(const w of Object.keys(o.spec.terrain))!s.hasOwnProperty(w)&&o.spec.terrain[w].default&&(s[w]=o.spec.terrain[w].default);for(const w in s)if(!D(s[w],v[w])){m.set(s),this.stylesheet.terrain=s;const M=this._setTransitionParameters({duration:0});m.updateTransitions(M);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(s){const c=this.fog=new Is(s,this.map.transform);this.stylesheet.fog=s;const m=this._setTransitionParameters({duration:0});c.updateTransitions(m)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const s of this.map._markers)s._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(s){if(this._checkLoaded(),!s)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog,m=c.get();Object.keys(s).length===0&&c.set(s);for(const v in s)if(!D(s[v],m[v])){c.set(s),this.stylesheet.fog=s;const w=this._setTransitionParameters({duration:0});c.updateTransitions(w);break}}else this._createFog(s);this._markersNeedUpdate=!0}_setTransitionParameters(s){return{now:o.exported.now(),transition:o.extend(s,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const s=this._order.filter(m=>this.isLayerDraped(this._layers[m])),c=this._order.filter(m=>!this.isLayerDraped(this._layers[m]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...s),this._drapedFirstOrder.push(...c)}_createTerrain(s,c){const m=this.terrain=new mn(s,c);this.stylesheet.terrain=s,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const v=this._setTransitionParameters({duration:0});m.updateTransitions(v)}_force3DLayerUpdate(){for(const s in this._layers){const c=this._layers[s];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const s in this._layers){const c=this._layers[s];c.type==="symbol"&&this._updateLayer(c)}}_validate(s,c,m,v,w={}){return(!w||w.validate!==!1)&&kc(this,s.call(o.validateStyle,o.extend({key:c,style:this.serialize(),value:m,styleSpec:o.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this._sourceCaches)this._sourceCaches[s].clearTiles(),this._sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(s){const c=this._getSourceCaches(s);for(const m of c)m.clearTiles()}_reloadSource(s){const c=this._getSourceCaches(s);for(const m of c)m.resume(),m.reload()}_reloadSources(){for(const s of this._getSources())s.reload&&s.reload()}_updateSources(s){for(const c in this._sourceCaches)this._sourceCaches[c].update(s)}_generateCollisionBoxes(){for(const s in this._sourceCaches){const c=this._sourceCaches[s];c.resume(),c.reload()}}_updatePlacement(s,c,m,v,w=!1){let M=!1,k=!1;const L={};for(const j of this._order){const N=this._layers[j];if(N.type!=="symbol")continue;if(!L[N.source]){const ee=this._getLayerSourceCache(N);if(!ee)continue;L[N.source]=ee.getRenderableIds(!0).map(le=>ee.getTileByID(le)).sort((le,ce)=>ce.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(ce.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer(N,L[N.source],s.center.lng,s.projection);M=M||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||m===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),s.zoom))&&(this.pauseablePlacement=new kn(s,this._order,w,c,m,v,this.placement,this.fog&&s.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),k=!0),M&&this.pauseablePlacement.placement.setStale()),k||M)for(const j of this._order){const N=this._layers[j];N.type==="symbol"&&this.placement.updateLayerOpacities(N,L[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const s in this._sourceCaches)this._sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();const v=w=>{w&&w.setDependencies(c.tileID.key,c.type,c.icons)};v(this._otherSourceCaches[c.source]),v(this._symbolSourceCaches[c.source])}getGlyphs(s,c,m){this.glyphManager.getGlyphs(c.stacks,m)}getResource(s,c,m){return o.makeRequest(c,m)}_getSourceCache(s){return this._otherSourceCaches[s]}_getLayerSourceCache(s){return s.type==="symbol"?this._symbolSourceCaches[s.source]:this._otherSourceCaches[s.source]}_getSourceCaches(s){const c=[];return this._otherSourceCaches[s]&&c.push(this._otherSourceCaches[s]),this._symbolSourceCaches[s]&&c.push(this._symbolSourceCaches[s]),c}_isSourceCacheLoaded(s){const c=this._getSourceCaches(s);return c.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${s}'`))),!1):c.every(m=>m.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}T.getSourceType=function(f){return He[f]},T.setSourceType=function(f,s){He[f]=s},T.registerForPluginStateChange=o.registerForPluginStateChange;var I=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,R="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",F=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,H=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,K=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let te={},ze={};const Me=[];mt(I,Me),mt(F,Me),mt(H,Me),mt(K,Me),te=Jt("",F),ze=Jt(K,H);const et=Jt(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),gt=I,Dt=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var ht={background:Jt(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Jt(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Jt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Jt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Jt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Jt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Jt("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Jt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Jt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Jt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Jt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Jt(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Jt(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Jt(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Jt(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Jt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Jt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Jt(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Jt(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Jt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Jt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Jt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Jt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Jt(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Jt(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Jt(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,R),skyboxGradient:Jt(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,R),skyboxCapture:Jt(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Jt(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Jt(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function mt(f,s){const c=f.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let m of c)if(m=m.trim(),m[0]==="#"&&m.includes("if")&&!m.includes("endif")){m=m.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=m.split(" ");for(const w of v)s.includes(w)||s.push(w)}}function Jt(f,s){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=s.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),v={},w=[...Me];return mt(f,w),mt(s,w),{fragmentSource:f=f.replace(c,(M,k,L,j,N)=>(v[N]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${N}
varying ${L} ${j} ${N};
#else
uniform ${L} ${j} u_${N};
#endif
`:`
#ifdef HAS_UNIFORM_u_${N}
    ${L} ${j} ${N} = u_${N};
#endif
`)),vertexSource:s=s.replace(c,(M,k,L,j,N)=>{const W=j==="float"?"vec2":"vec4",ee=N.match(/color/)?"color":W;return v[N]?k==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
attribute ${L} ${W} a_${N};
varying ${L} ${j} ${N};
#else
uniform ${L} ${j} u_${N};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = a_${N};
#else
    ${L} ${j} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = unpack_mix_${ee}(a_${N}, u_${N}_t);
#else
    ${L} ${j} ${N} = u_${N};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
attribute ${L} ${W} a_${N};
#else
uniform ${L} ${j} u_${N};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${L} ${j} ${N} = a_${N};
#else
    ${L} ${j} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${L} ${j} ${N} = unpack_mix_${ee}(a_${N}, u_${N}_t);
#else
    ${L} ${j} ${N} = u_${N};
#endif
`}),staticAttributes:m,usedDefines:w}}class nn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(s,c,m,v,w,M,k){this.context=s;let L=this.boundPaintVertexBuffers.length!==v.length;for(let N=0;!L&&N<v.length;N++)this.boundPaintVertexBuffers[N]!==v[N]&&(L=!0);let j=this.boundDynamicVertexBuffers.length!==k.length;for(let N=0;!j&&N<k.length;N++)this.boundDynamicVertexBuffers[N]!==k[N]&&(j=!0);if(!s.extVertexArrayObject||!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||L||j||this.boundIndexBuffer!==w||this.boundVertexOffset!==M)this.freshBind(c,m,v,w,M,k);else{s.bindVertexArrayOES.set(this.vao);for(const N of k)N&&N.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(s,c,m,v,w,M){let k;const L=s.numAttributes,j=this.context,N=j.gl;if(j.extVertexArrayObject)this.vao&&this.destroy(),this.vao=j.extVertexArrayObject.createVertexArrayOES(),j.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=s,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=M;else{k=j.currentNumAttributes||0;for(let W=L;W<k;W++)N.disableVertexAttribArray(W)}c.enableAttributes(N,s),c.bind(),c.setVertexAttribPointers(N,s,w);for(const W of m)W.enableAttributes(N,s),W.bind(),W.setVertexAttribPointers(N,s,w);for(const W of M)W&&(W.enableAttributes(N,s),W.bind(),W.setVertexAttribPointers(N,s,w));v&&v.bind(),j.currentNumAttributes=L}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function wi(f,s){const c=Math.pow(2,s.canonical.z),m=s.canonical.y;return[new o.MercatorCoordinate(0,m/c).toLngLat().lat,new o.MercatorCoordinate(0,(m+1)/c).toLngLat().lat]}function Mr(f,s,c,m,v,w,M){const k=f.context,L=k.gl,j=c.fbo;if(!j)return;f.prepareDrawTile();const N=f.useProgram("hillshade");k.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,j.colorAttachment.get());const W=((de,ie,se,me)=>{const ue=se.paint.get("hillshade-shadow-color"),xe=se.paint.get("hillshade-highlight-color"),De=se.paint.get("hillshade-accent-color");let we=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(we-=de.transform.angle);const Ue=!de.options.moving;return{u_matrix:me||de.transform.calculateProjMatrix(ie.tileID.toUnwrapped(),Ue),u_image:0,u_latrange:wi(0,ie.tileID),u_light:[se.paint.get("hillshade-exaggeration"),we],u_shadow:ue,u_highlight:xe,u_accent:De}})(f,c,m,f.terrain?s.projMatrix:null);f.prepareDrawProgram(k,N,s.toUnwrapped());const{tileBoundsBuffer:ee,tileBoundsIndexBuffer:le,tileBoundsSegments:ce}=f.getTileBoundsBuffers(c);N.draw(k,L.TRIANGLES,v,w,M,o.CullFaceMode.disabled,W,m.id,ee,le,ce)}function lr(f,s,c){if(!s.needsDEMTextureUpload)return;const m=f.context,v=m.gl;m.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||f.getTileTexture(c.stride);const w=c.getPixels();s.demTexture?s.demTexture.update(w,{premultiply:!1}):s.demTexture=new o.Texture(m,w,v.RGBA,{premultiply:!1}),s.needsDEMTextureUpload=!1}function gn(f,s,c,m,v,w){const M=f.context,k=M.gl;if(!s.dem)return;const L=s.dem;if(M.activeTexture.set(k.TEXTURE1),lr(f,s,L),!s.demTexture)return;s.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);const j=L.dim;M.activeTexture.set(k.TEXTURE0);let N=s.fbo;if(!N){const ce=new o.Texture(M,{width:j,height:j,data:null},k.RGBA);ce.bind(k.LINEAR,k.CLAMP_TO_EDGE),N=s.fbo=M.createFramebuffer(j,j,!0),N.colorAttachment.set(ce.texture)}M.bindFramebuffer.set(N.framebuffer),M.viewport.set([0,0,j,j]);const{tileBoundsBuffer:W,tileBoundsIndexBuffer:ee,tileBoundsSegments:le}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(M,k.TRIANGLES,m,v,w,o.CullFaceMode.disabled,((ce,de)=>{const ie=de.stride,se=o.create();return o.ortho(se,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(se,se,[0,-o.EXTENT,0]),{u_matrix:se,u_image:1,u_dimension:[ie,ie],u_zoom:ce.overscaledZ,u_unpack:de.unpackVector}})(s.tileID,L),c.id,W,ee,le),s.needsHillshadePrepare=!1}const yn=f=>({u_matrix:new o.UniformMatrix4f(f),u_image0:new o.Uniform1i(f),u_skirt_height:new o.Uniform1f(f)}),Gi=(f,s)=>({u_matrix:f,u_image0:0,u_skirt_height:s}),Ps=(f,s,c,m,v,w,M,k,L,j,N,W,ee,le)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:s,u_normalize_matrix:Float32Array.from(m),u_merc_matrix:c,u_zoom_transition:v,u_merc_center:w,u_image0:0,u_frustum_tl:M,u_frustum_tr:k,u_frustum_br:L,u_frustum_bl:j,u_globe_pos:N,u_globe_radius:W,u_viewport:ee,u_grid_matrix:le?Float32Array.from(le):new Float32Array(9)});function bn(f,s){return f!=null&&s!=null&&!(!f.hasData()||!s.hasData())&&f.demTexture!=null&&s.demTexture!=null&&f.tileID.key!==s.tileID.key}const Qn=new class{constructor(){this.operations={}}newMorphing(f,s,c,m,v){if(f in this.operations){const w=this.operations[f];w.to.tileID.key!==c.tileID.key&&(w.queued=c)}else this.operations[f]={startTime:m,phase:0,duration:v,from:s,to:c,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const s=this.operations[f];return{from:s.from,to:s.to,phase:s.phase}}update(f){for(const s in this.operations){const c=this.operations[s];for(c.phase=(f-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,f)){delete this.operations[s];break}}}_nextOp(f,s){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=s,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},sa={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function vl(f,s){const c=1<<f.z;return!s&&(f.x===0||f.x===c-1)||f.y===0||f.y===c-1}const ps=f=>({u_matrix:f});function lo(f,s,c,m,v){if(v>0){const w=o.exported.now(),M=(w-f.timeAdded)/v,k=s?(w-s.timeAdded)/v:-1,L=c.getSource(),j=m.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),N=!s||Math.abs(s.tileID.overscaledZ-j)>Math.abs(f.tileID.overscaledZ-j),W=N&&f.refreshedUponExpiration?1:o.clamp(N?M:1-k,0,1);return f.refreshedUponExpiration&&M>=1&&(f.refreshedUponExpiration=!1),s?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}class Ji extends o.SourceCache{constructor(s){const c={type:"raster-dem",maxzoom:s.transform.maxZoom},m=new xs(Li(),null),v=Ye("mock-dem",c,m,s.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(s,c){s.state="loaded",c(null)}}class Ts extends o.SourceCache{constructor(s){const c=Ye("proxy",{type:"geojson",maxzoom:s.transform.maxZoom},new xs(Li(),null),s.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=s,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(s,c,m){if(s.freezeTileCoverage)return;this.transform=s;const v=s.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,M)=>{if(w[M.key]="",!this._tiles[M.key]){const k=new o.Tile(M,this._source.tileSize*M.overscaleFactor(),s.tileZoom);k.state="loaded",this._tiles[M.key]=k}return w},{});for(const w in this._tiles)w in v||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(s){const c=this.proxyCachedFBO[s];if(c!==void 0){const m=Object.values(c);this.renderCachePool.push(...m),delete this.proxyCachedFBO[s]}}deallocRenderCache(){this.renderCache.forEach(s=>s.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Go extends o.OverscaledTileID{constructor(s,c,m){super(s.overscaledZ,s.wrap,s.canonical.z,s.canonical.x,s.canonical.y),this.proxyTileKey=c,this.projMatrix=m}}class Xs extends o.Elevation{constructor(s,c){super(),this.painter=s,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[m,v,w]=function(L){const j=new o.StructArrayLayout4i8,N=new o.StructArrayLayout3ui6,W=131;j.reserve(17161),N.reserve(33800);const ee=o.EXTENT/128,le=o.EXTENT+ee/2,ce=le+ee;for(let ie=-ee;ie<ce;ie+=ee)for(let se=-ee;se<ce;se+=ee){const me=se<0||se>le||ie<0||ie>le?24575:0,ue=o.clamp(Math.round(se),0,o.EXTENT),xe=o.clamp(Math.round(ie),0,o.EXTENT);j.emplaceBack(ue+me,xe,ue,xe)}const de=(ie,se)=>{const me=se*W+ie;N.emplaceBack(me+1,me,me+W),N.emplaceBack(me+W,me+W+1,me+1)};for(let ie=1;ie<129;ie++)for(let se=1;se<129;se++)de(se,ie);return[0,129].forEach(ie=>{for(let se=0;se<130;se++)de(se,ie),de(ie,se)}),[j,N,32768]}(),M=s.context;this.gridBuffer=M.createVertexBuffer(m,o.boundsAttributes.members),this.gridIndexBuffer=M.createIndexBuffer(v),this.gridSegments=o.SegmentVector.simpleSegment(0,0,m.length,v.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,m.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ts(c.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const k=M.gl;this._overlapStencilMode=new o.StencilMode({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=s.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ji(c.map)}set style(s){s.on("data",this._onStyleDataEvent.bind(this)),s.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=s,this._checkRenderCacheEfficiency()}update(s,c,m){if(s&&s.terrain){this._style!==s&&(this.style=s),this.enabled=!0;const v=s.terrain.properties;this.sourceCache=s.terrain.drapeRenderMode===0?this._mockSourceCache:s._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const w=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const M=this.getScaledDemTileSize();this.sourceCache.update(c,M,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),c.updateElevation(!0,m),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(s){this._findCoveringTileCache[s]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const s=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||s.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${s.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${s.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(s){s.coord&&s.dataType==="source"?this._clearRenderCacheForTile(s.sourceCacheId,s.coord):s.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const s in this._style._sourceCaches)this._style._sourceCaches[s].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(s=>s.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const s=2*this.proxySourceCache.getSource().tileSize;return[s,s]}set useVertexMorphing(s){this._useVertexMorphing=s}updateTileBinding(s){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,m=this.painter.transform;this._initializing&&(this._initializing=m._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(m.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=c.getIds().map(L=>{const j=c.getTileByID(L).tileID;return j.projMatrix=m.calculateProjMatrix(j.toUnwrapped()),j});(function(L,j){const N=j.transform.pointCoordinate(j.transform.getCameraPoint()),W=new o.pointGeometry(N.x,N.y);L.sort((ee,le)=>{if(le.overscaledZ-ee.overscaledZ)return le.overscaledZ-ee.overscaledZ;const ce=new o.pointGeometry(ee.canonical.x+(1<<ee.canonical.z)*ee.wrap,ee.canonical.y),de=new o.pointGeometry(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),ie=W.mult(1<<ee.canonical.z);return ie.x-=.5,ie.y-=.5,ie.distSqr(ce)-ie.distSqr(de)})})(v,this.painter),this._previousZoom=m.zoom;const w=this.proxyToSource||{};this.proxyToSource={},v.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const M=this._style._sourceCaches;for(const L in M){const j=M[L];if(!j.used||(j!==this.sourceCache&&this.resetTileLookupCache(j.id),this._setupProxiedCoordsForOrtho(j,s[L],w),j.usedForTerrain))continue;const N=s[L];j.getSource().reparseOverscaled&&this._assignTerrainTiles(N)}this.proxiedCoords[c.id]=v.map(L=>new Go(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const k={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const j=this.terrainTileForTile[L.key];if(!j)continue;const N=j.tileID.key;N in k||(this._visibleDemTiles.push(j),k[N]=N)}}_assignTerrainTiles(s){this._initializing||s.forEach(c=>{if(this.terrainTileForTile[c.key])return;const m=this._findTileCoveringTileID(c,this.sourceCache);m&&(this.terrainTileForTile[c.key]=m)})}_prepareDEMTextures(){const s=this.painter.context,c=s.gl;for(const m in this.terrainTileForTile){const v=this.terrainTileForTile[m],w=v.dem;!w||v.demTexture&&!v.needsDEMTextureUpload||(s.activeTexture.set(c.TEXTURE1),lr(this.painter,v,w))}}_prepareDemTileUniforms(s,c,m,v){if(!c||c.demTexture==null)return!1;const w=s.tileID.canonical,M=Math.pow(2,c.tileID.canonical.z-w.z),k=v||"";return m[`u_dem_tl${k}`]=[w.x*M%1,w.y*M%1],m[`u_dem_scale${k}`]=M,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const s=this.painter.context,c=s.gl;if(!this._emptyDepthBufferTexture){const m=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(s,m,c.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let s=0;const c=this._visibleDemTiles.reduce((m,v)=>{if(!v.dem)return m;const w=v.dem.tree.minimums[0];return w>0&&s++,m+w},0);return s?c/s:0}_updateEmptyDEMTexture(){const s=this.painter.context,c=s.gl;s.activeTexture.set(c.TEXTURE2);const m=this._getLoadedAreaMinimum(),v=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(m,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(v,{premultiply:!1}):w=this._emptyDEMTexture=new o.Texture(s,v,c.RGBA,{premultiply:!1}),w}setupElevationDraw(s,c,m){const v=this.painter.context,w=v.gl,M=(k=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(k),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var k;M.u_dem_size=this.sourceCache.getSource().tileSize,M.u_exaggeration=this.exaggeration();let L=null,j=null,N=1;if(m&&m.morphing&&this._useVertexMorphing){const W=m.morphing.srcDemTile,ee=m.morphing.dstDemTile;N=m.morphing.phase,W&&ee&&(this._prepareDemTileUniforms(s,W,M,"_prev")&&(j=W),this._prepareDemTileUniforms(s,ee,M)&&(L=ee))}if(j&&L?(v.activeTexture.set(w.TEXTURE2),L.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),v.activeTexture.set(w.TEXTURE4),j.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),M.u_dem_lerp=N):(L=this.terrainTileForTile[s.tileID.key],v.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(s,L,M)?L.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),v.activeTexture.set(w.TEXTURE3),m&&m.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(M.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),M.u_depth_size_inv=[1,1]),m&&m.useMeterToDem&&L){const W=(1<<L.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;M.u_meter_to_dem=W}if(m&&m.labelPlaneMatrixInv&&(M.u_label_plane_matrix_inv=m.labelPlaneMatrixInv),c.setTerrainUniformValues(v,M),this.painter.transform.projection.name==="globe"){const W=this.globeUniformValues(this.painter.transform,s.tileID.canonical,m&&m.useDenormalizedUpVectorScale);c.setGlobeUniformValues(v,W)}}globeUniformValues(s,c,m){const v=s.projection;return{u_tile_tl_up:v.upVector(c,0,0),u_tile_tr_up:v.upVector(c,o.EXTENT,0),u_tile_br_up:v.upVector(c,o.EXTENT,o.EXTENT),u_tile_bl_up:v.upVector(c,0,o.EXTENT),u_tile_up_scale:m?o.GLOBE_METERS_TO_ECEF:v.upVectorScale(c,s.center.lat,s.worldSize).metersToTile}}renderToBackBuffer(s){const c=this.painter,m=this.painter.context;s.length!==0&&(m.bindFramebuffer.set(null),m.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,w,M,k,L){if(v.transform.projection.name==="globe")(function(j,N,W,ee,le){const ce=j.context,de=ce.gl;let ie,se;const me=j.options.showTerrainWireframe?2:0,ue=j.transform,xe=o.globeUseCustomAntiAliasing(j,ce,ue),De=(Bt,ut)=>{if(se===Bt)return;const Mt=[sa[Bt],"PROJECTION_GLOBE_VIEW"];xe&&Mt.push("CUSTOM_ANTIALIASING"),ut&&Mt.push(sa[me]),ie=j.useProgram("globeRaster",null,Mt),se=Bt},we=j.colorModeForRenderPass(),Ue=new o.DepthMode(de.LEQUAL,o.DepthMode.ReadWrite,j.depthRangeFor3D);Qn.update(le);const st=o.calculateGlobeMercatorMatrix(ue),Je=[o.mercatorXfromLng(ue.center.lng),o.mercatorYfromLat(ue.center.lat)],Ge=me?[!1,!0]:[!1],It=j.globeSharedBuffers,Ke=[ue.width*o.exported.devicePixelRatio,ue.height*o.exported.devicePixelRatio],vt=Float32Array.from(ue.globeMatrix),lt={useDenormalizedUpVectorScale:!0};if(Ge.forEach(Bt=>{se=-1;const ut=Bt?de.LINES:de.TRIANGLES;for(const Mt of ee){const jt=W.getTile(Mt),Ze=o.StencilMode.disabled,at=N.prevTerrainTileForTile[Mt.key],mi=N.terrainTileForTile[Mt.key];bn(at,mi)&&Qn.newMorphing(Mt.key,at,mi,le,250),ce.activeTexture.set(de.TEXTURE0),jt.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE);const Ei=Qn.getMorphValuesForProxy(Mt.key),_i=Ei?1:0;Ei&&o.extend$1(lt,{morphing:{srcDemTile:Ei.from,dstDemTile:Ei.to,phase:o.easeCubicInOut(Ei.phase)}});const zi=o.tileCornersToBounds(Mt.canonical),sn=o.getLatitudinalLod(zi.getCenter().lat),Mi=o.getGridMatrix(Mt.canonical,zi,sn,ue.worldSize/ue._pixelsPerMercatorPixel),ci=o.globeNormalizeECEF(o.globeTileBounds(Mt.canonical)),Kn=Ps(ue.projMatrix,vt,st,ci,o.globeToMercatorTransition(ue.zoom),Je,ue.frustumCorners.TL,ue.frustumCorners.TR,ue.frustumCorners.BR,ue.frustumCorners.BL,ue.globeCenterInViewSpace,ue.globeRadius,Ke,Mi);if(De(_i,Bt),N.setupElevationDraw(jt,ie,lt),j.prepareDrawProgram(ce,ie,Mt.toUnwrapped()),It){const[zn,tr,Hn]=Bt?It.getWirefameBuffers(j.context,sn):It.getGridBuffers(sn);ie.draw(ce,ut,Ue,Ze,we,o.CullFaceMode.backCCW,Kn,"globe_raster",zn,tr,Hn)}}}),It){const Bt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];xe&&Bt.push("CUSTOM_ANTIALIASING"),ie=j.useProgram("globeRaster",null,Bt);for(const ut of ee){const{x:Mt,y:jt,z:Ze}=ut.canonical,at=jt===0,mi=jt===(1<<Ze)-1,[Ei,_i,zi,sn]=It.getPoleBuffers(Ze);if(sn&&(at||mi)){const Mi=W.getTile(ut);ce.activeTexture.set(de.TEXTURE0),Mi.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE);let ci=o.globePoleMatrixForTile(Ze,Mt,ue);const Kn=o.globeNormalizeECEF(o.globeTileBounds(ut.canonical)),zn=(tr,Hn)=>tr.draw(ce,de.TRIANGLES,Ue,o.StencilMode.disabled,we,o.CullFaceMode.disabled,Ps(ue.projMatrix,ci,ci,Kn,0,Je,ue.frustumCorners.TL,ue.frustumCorners.TR,ue.frustumCorners.BR,ue.frustumCorners.BL,ue.globeCenterInViewSpace,ue.globeRadius,Ke),"globe_pole_raster",Hn,zi,sn);N.setupElevationDraw(Mi,ie,lt),j.prepareDrawProgram(ce,ie,ut.toUnwrapped()),at&&zn(ie,Ei),mi&&(ci=o.scale(o.create(),ci,[1,-1,1]),zn(ie,_i))}}}})(v,w,M,k,L);else{const j=v.context,N=j.gl;let W,ee;const le=v.options.showTerrainWireframe?2:0,ce=(ue,xe)=>{if(ee===ue)return;const De=[sa[ue]];xe&&De.push(sa[le]),W=v.useProgram("terrainRaster",null,De),ee=ue},de=v.colorModeForRenderPass(),ie=new o.DepthMode(N.LEQUAL,o.DepthMode.ReadWrite,v.depthRangeFor3D);Qn.update(L);const se=v.transform,me=6*Math.pow(1.5,22-se.zoom)*w.exaggeration();(le?[!1,!0]:[!1]).forEach(ue=>{ee=-1;const xe=ue?N.LINES:N.TRIANGLES,[De,we]=ue?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const Ue of k){const st=M.getTile(Ue),Je=o.StencilMode.disabled,Ge=w.prevTerrainTileForTile[Ue.key],It=w.terrainTileForTile[Ue.key];bn(Ge,It)&&Qn.newMorphing(Ue.key,Ge,It,L,250),j.activeTexture.set(N.TEXTURE0),st.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST);const Ke=Qn.getMorphValuesForProxy(Ue.key),vt=Ke?1:0;let lt;Ke&&(lt={morphing:{srcDemTile:Ke.from,dstDemTile:Ke.to,phase:o.easeCubicInOut(Ke.phase)}});const Bt=Gi(Ue.projMatrix,vl(Ue.canonical,se.renderWorldCopies)?me/10:me);ce(vt,ue),w.setupElevationDraw(st,W,lt),v.prepareDrawProgram(j,W,Ue.toUnwrapped()),W.draw(j,xe,ie,Je,de,o.CullFaceMode.backCCW,Bt,"terrain_raster",w.gridBuffer,De,we)}})}}(c,this,this.proxySourceCache,s,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),s.splice(0,s.length))}renderBatch(s){if(this._drapedRenderBatches.length===0)return s+1;this.renderingToTexture=!0;const c=this.painter,m=this.painter.context,v=this.proxySourceCache,w=this.proxiedCoords[v.id],M=this._drapedRenderBatches.shift(),k=[],L=c.style.order;let j=0;for(const N of w){const W=v.getTileByID(N.proxyTileKey),ee=v.proxyCachedFBO[N.key]?v.proxyCachedFBO[N.key][s]:void 0,le=ee!==void 0?v.renderCache[ee]:this.pool[j++],ce=ee!==void 0;if(W.texture=le.tex,ce&&!le.dirty){k.push(W.tileID);continue}let de;m.bindFramebuffer.set(le.fb.framebuffer),this.renderedToTile=!1,le.dirty&&(m.clear({color:o.Color.transparent,stencil:0}),le.dirty=!1);for(let ie=M.start;ie<=M.end;++ie){const se=c.style._layers[L[ie]];if(se.isHidden(c.transform.zoom))continue;const me=c.style._getLayerSourceCache(se),ue=me?this.proxyToSource[N.key][me.id]:[N];if(!ue)continue;const xe=ue;m.viewport.set([0,0,le.fb.width,le.fb.height]),de!==(me?me.id:null)&&(this._setupStencil(le,ue,se,me),de=me?me.id:null),c.renderLayer(c,me,se,xe)}this.renderedToTile?(le.dirty=!0,k.push(W.tileID)):ce||--j,j===5&&(j=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,m.bindFramebuffer.set(null),m.viewport.set([0,0,c.width,c.height]),M.end+1}postRender(){}renderCacheEfficiency(s){const c=s.order.length;if(c===0)return{efficiency:100};let m,v=0,w=0,M=!1;for(let k=0;k<c;++k){const L=s._layers[s.order[k]];this._style.isLayerDraped(L)?(M&&++v,++w):M||(M=!0,m=L.id)}return w===0?{efficiency:100}:{efficiency:100*(1-v/w),firstUndrapedLayer:m}}getMinElevationBelowMSL(){let s=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{s=Math.min(s,c.dem.tree.minimums[0])}),s===0?s:(s-30)*this._exaggeration}raycast(s,c,m){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const M=w.tileID,k=1<<M.overscaledZ,{x:L,y:j}=M.canonical,N=L/k,W=(L+1)/k,ee=j/k,le=(j+1)/k;return{minx:N,miny:ee,maxx:W,maxy:le,t:w.dem.tree.raycastRoot(N,ee,W,le,s,c,m),tile:w}});v.sort((w,M)=>(w.t!==null?w.t:Number.MAX_VALUE)-(M.t!==null?M.t:Number.MAX_VALUE));for(const w of v){if(w.t==null)return null;const M=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,s,c,m);if(M!=null)return M}return null}_createFBO(){const s=this.painter.context,c=s.gl,m=this.drapeBufferSize;s.activeTexture.set(c.TEXTURE0);const v=new o.Texture(s,{width:m[0],height:m[1],data:null},c.RGBA);v.bind(c.LINEAR,c.CLAMP_TO_EDGE);const w=s.createFramebuffer(m[0],m[1],!1);return w.colorAttachment.set(v.texture),w.depthAttachment=new Mc(s,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=s.createRenderbuffer(s.gl.DEPTH_STENCIL,m[0],m[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),s.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),s.extTextureFilterAnisotropic&&!s.extTextureFilterAnisotropicForceOff&&c.texParameterf(c.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax),{fb:w,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const s in this._style._sourceCaches)if(this._style._sourceCaches[s].hasTransition())return!0;return this._style.order.some(s=>{const c=this._style._layers[s],m=c.isHidden(this.painter.transform.zoom);return c.type!=="custom"&&!m&&c.hasTransition()})}_clearRasterFadeFromRenderCache(){let s=!1;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c]._source instanceof Q){s=!0;break}if(s)for(let c=0;c<this._style.order.length;++c){const m=this._style._layers[this._style.order[c]],v=m.isHidden(this.painter.transform.zoom),w=this._style._getLayerSourceCache(m);if(m.type!=="raster"||v||!w)continue;const M=m.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const L=this.proxyToSource[k.key][w.id];if(L)for(const j of L){const N=lo(w.getTile(j),w.findLoadedParent(j,0),w,this.painter.transform,M);(N.opacity!==1||N.mix!==0)&&this._clearRenderCacheForTile(w.id,j)}}}}_setupDrapedRenderBatches(){const s=this._style.order,c=s.length;if(c===0)return;const m=[];let v,w=0,M=this._style._layers[s[w]];for(;!this._style.isLayerDraped(M)&&M.isHidden(this.painter.transform.zoom)&&++w<c;)M=this._style._layers[s[w]];for(;w<c;++w){const k=this._style._layers[s[w]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?v===void 0&&(v=w):v!==void 0&&(m.push({start:v,end:w-1}),v=void 0))}v!==void 0&&m.push({start:v,end:w-1}),this._drapedRenderBatches=m}_setupRenderCache(s){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const M=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let k=0;k<M.length;++k){const L=Object.values(M[k]);c.renderCachePool.push(...L)}}return}this._clearRasterFadeFromRenderCache();const m=this.proxyCoords,v=this._tilesDirty;for(let M=m.length-1;M>=0;M--){const k=m[M];if(c.getTileByID(k.key),c.proxyCachedFBO[k.key]!==void 0){const L=s[k.key],j=this.proxyToSource[k.key];let N=0;for(const W in j){const ee=j[W],le=L[W];if(!le||le.length!==ee.length||ee.some((ce,de)=>ce!==le[de]||v[W]&&v[W].hasOwnProperty(ce.key))){N=-1;break}++N}for(const W in c.proxyCachedFBO[k.key])c.renderCache[c.proxyCachedFBO[k.key][W]].dirty=N<0||N!==Object.values(L).length}}const w=[...this._drapedRenderBatches];w.sort((M,k)=>k.end-k.start-(M.end-M.start));for(const M of w)for(const k of m){if(c.proxyCachedFBO[k.key])continue;let L=c.renderCachePool.pop();L===void 0&&c.renderCache.length<50&&(L=c.renderCache.length,c.renderCache.push(this._createFBO())),L!==void 0&&(c.proxyCachedFBO[k.key]={},c.proxyCachedFBO[k.key][M.start]=L,c.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(s,c,m,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,M=w.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let k;if(m.isTileClipped())k=c.length,this._overlapStencilMode.test={func:M.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:M.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,m.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(s){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[s.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(s,c){const m=this.painter,v=this.painter.context,w=v.gl;m._tileClippingMaskIDs={},v.setColorMode(o.ColorMode.disabled),v.setDepthMode(o.DepthMode.disabled);const M=m.useProgram("clippingMask");for(const k of s){const L=m._tileClippingMaskIDs[k.key]=--c;M.draw(v,w.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:w.ALWAYS,mask:0},L,255,w.KEEP,w.KEEP,w.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,ps(k.projMatrix),"$clipping",m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}pointCoordinate(s){const c=this.painter.transform;if(s.x<0||s.x>c.width||s.y<0||s.y>c.height)return null;const m=[s.x,s.y,1,1];o.transformMat4$1(m,m,c.pixelMatrixInverse),o.scale$1(m,m,1/m[3]),m[0]/=c.worldSize,m[1]/=c.worldSize;const v=c._camera.position,w=o.mercatorZfromAltitude(1,c.center.lat),M=[v[0],v[1],v[2]/w,0],k=o.subtract([],m.slice(0,3),M);o.normalize(k,k);const L=this.raycast(M,k,this._exaggeration);return L!==null&&L?(o.scaleAndAdd(M,M,k,L),M[3]=M[2],M[2]*=w,M):null}drawDepth(){const s=this.painter,c=s.context,m=this.proxySourceCache,v=Math.ceil(s.width),w=Math.ceil(s.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const M=c.gl,k=c.createFramebuffer(v,w,!0);c.activeTexture.set(M.TEXTURE0);const L=new o.Texture(c,{width:v,height:w,data:null},M.RGBA);L.bind(M.NEAREST,M.CLAMP_TO_EDGE),k.colorAttachment.set(L.texture);const j=c.createRenderbuffer(c.gl.DEPTH_COMPONENT16,v,w);k.depthAttachment.set(j),this._depthFBO=k,this._depthTexture=L}c.bindFramebuffer.set(this._depthFBO.framebuffer),c.viewport.set([0,0,v,w]),function(M,k,L,j){if(M.transform.projection.name==="globe")return;const N=M.context,W=N.gl;N.clear({depth:1});const ee=M.useProgram("terrainDepth"),le=new o.DepthMode(W.LESS,o.DepthMode.ReadWrite,M.depthRangeFor3D);for(const ce of j){const de=L.getTile(ce),ie=Gi(ce.projMatrix,0);k.setupElevationDraw(de,ee),ee.draw(N,W.TRIANGLES,le,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,ie,"terrain_depth",k.gridBuffer,k.gridIndexBuffer,k.gridNoSkirtSegments)}}(s,this,m,this.proxyCoords)}_setupProxiedCoordsForOrtho(s,c,m){if(s.getSource()instanceof Oe)return this._setupProxiedCoordsForImageSource(s,c,m);this._findCoveringTileCache[s.id]=this._findCoveringTileCache[s.id]||{};const v=this.proxiedCoords[s.id]=[],w=this.proxyCoords;for(let k=0;k<w.length;k++){const L=w[k],j=this._findTileCoveringTileID(L,s);if(j){const N=this._createProxiedId(L,j,m[L.key]&&m[L.key][s.id]);v.push(N),this.proxyToSource[L.key][s.id]=[N]}}let M=!1;for(let k=0;k<c.length;k++){const L=s.getTile(c[k]);if(!L||!L.hasData())continue;const j=this._findTileCoveringTileID(L.tileID,this.proxySourceCache);if(j&&j.tileID.canonical.z!==L.tileID.canonical.z){const N=this.proxyToSource[j.tileID.key][s.id],W=this._createProxiedId(j.tileID,L,m[j.tileID.key]&&m[j.tileID.key][s.id]);N?N.splice(N.length-1,0,W):this.proxyToSource[j.tileID.key][s.id]=[W],v.push(W),M=!0}}this._sourceTilesOverlap[s.id]=M}_setupProxiedCoordsForImageSource(s,c,m){if(!s.getSource().loaded())return;const v=this.proxiedCoords[s.id]=[],w=this.proxyCoords,M=s.getSource(),k=new o.pointGeometry(M.tileID.x,M.tileID.y)._div(1<<M.tileID.z),L=M.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((N,W)=>(N.min.x=Math.min(N.min.x,W.x-k.x),N.min.y=Math.min(N.min.y,W.y-k.y),N.max.x=Math.max(N.max.x,W.x-k.x),N.max.y=Math.max(N.max.y,W.y-k.y),N),{min:new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),j=(N,W)=>{const ee=N.wrap+N.canonical.x/(1<<N.canonical.z),le=N.canonical.y/(1<<N.canonical.z),ce=o.EXTENT/(1<<N.canonical.z),de=W.wrap+W.canonical.x/(1<<W.canonical.z),ie=W.canonical.y/(1<<W.canonical.z);return ee+ce<de+L.min.x||ee>de+L.max.x||le+ce<ie+L.min.y||le>ie+L.max.y};for(let N=0;N<w.length;N++){const W=w[N];for(let ee=0;ee<c.length;ee++){const le=s.getTile(c[ee]);if(!le||!le.hasData()||j(W,le.tileID))continue;const ce=this._createProxiedId(W,le,m[W.key]&&m[W.key][s.id]),de=this.proxyToSource[W.key][s.id];de?de.push(ce):this.proxyToSource[W.key][s.id]=[ce],v.push(ce)}}}_createProxiedId(s,c,m){let v=this.orthoMatrix;if(m){const w=m.find(M=>M.key===c.tileID.key);if(w)return w}if(c.tileID.key!==s.key){const w=s.canonical.z-c.tileID.canonical.z;let M,k,L;v=o.create();const j=c.tileID.wrap-s.wrap<<s.overscaledZ;w>0?(M=o.EXTENT>>w,k=M*((c.tileID.canonical.x<<w)-s.canonical.x+j),L=M*((c.tileID.canonical.y<<w)-s.canonical.y)):(M=o.EXTENT<<-w,k=o.EXTENT*(c.tileID.canonical.x-(s.canonical.x+j<<-w)),L=o.EXTENT*(c.tileID.canonical.y-(s.canonical.y<<-w))),o.ortho(v,0,M,0,M,0,1),o.translate(v,v,[k,L,0])}return new Go(c.tileID,s.key,v)}_findTileCoveringTileID(s,c){let m=c.getTile(s);if(m&&m.hasData())return m;const v=this._findCoveringTileCache[c.id],w=v[s.key];if(m=w?c.getTileByID(w):null,m&&m.hasData()||w===null)return m;let M=m?m.tileID:s,k=M.overscaledZ;const L=c.getSource().minzoom,j=[];if(!w){const W=c.getSource().maxzoom;if(s.canonical.z>=W){const ee=s.canonical.z-W;c.getSource().reparseOverscaled?(k=Math.max(s.canonical.z+2,c.transform.tileZoom),M=new o.OverscaledTileID(k,s.wrap,W,s.canonical.x>>ee,s.canonical.y>>ee)):ee!==0&&(k=W,M=new o.OverscaledTileID(k,s.wrap,W,s.canonical.x>>ee,s.canonical.y>>ee))}M.key!==s.key&&(j.push(M.key),m=c.getTile(M))}const N=W=>{j.forEach(ee=>{v[ee]=W}),j.length=0};for(k-=1;k>=L&&(!m||!m.hasData());k--){m&&N(m.tileID.key);const W=M.calculateScaledKey(k);if(m=c.getTileByID(W),m&&m.hasData())break;const ee=v[W];if(ee===null)break;ee===void 0?j.push(W):m=c.getTileByID(ee)}return N(m?m.tileID.key:null),m&&m.hasData()?m:null}findDEMTileFor(s){return this.enabled?this._findTileCoveringTileID(s,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(s,c){let m=this._tilesDirty[s];m||(m=this._tilesDirty[s]={}),m[c.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const s=function(c){let m=0;const v=new o.StructArrayLayout2ui4,w=131;for(let M=1;M<129;M++){for(let k=1;k<129;k++)m=M*w+k,v.emplaceBack(m,m+1),v.emplaceBack(m,m+w),v.emplaceBack(m+1,m+w),M===128&&v.emplaceBack(m+w,m+w+1);v.emplaceBack(m+1,m+1+w)}return v}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(s),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,s.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Ao{static cacheKey(s,c,m,v){let w=`${c}${v?v.cacheKey:""}`;for(const M of m)s.usedDefines.includes(M)&&(w+=`/${M}`);return w}constructor(s,c,m,v,w,M){const k=s.gl;this.program=k.createProgram();const L=function(ie){const se=[];for(let me=0;me<ie.length;me++){if(ie[me]===null)continue;const ue=ie[me].split(" ");se.push(ue.pop())}return se}(m.staticAttributes),j=v?v.getBinderAttributes():[],N=L.concat(j);let W=v?v.defines():[];W=W.concat(M.map(ie=>`#define ${ie}`));const ee=W.concat(s.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(Dt):Dt,Dt,gt,et.fragmentSource,ze.fragmentSource,m.fragmentSource).join(`
`),le=W.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,gt,et.vertexSource,ze.vertexSource,te.vertexSource,m.vertexSource).join(`
`),ce=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(ce,ee),k.compileShader(ce),k.attachShader(this.program,ce);const de=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(de,le),k.compileShader(de),k.attachShader(this.program,de),this.attributes={},this.numAttributes=N.length;for(let ie=0;ie<this.numAttributes;ie++)N[ie]&&(k.bindAttribLocation(this.program,ie,N[ie]),this.attributes[N[ie]]=ie);k.linkProgram(this.program),k.deleteShader(de),k.deleteShader(ce),this.fixedUniforms=w(s),this.binderUniforms=v?v.getUniforms(s):[],M.includes("TERRAIN")&&(this.terrainUniforms=(ie=>({u_dem:new o.Uniform1i(ie),u_dem_prev:new o.Uniform1i(ie),u_dem_unpack:new o.Uniform4f(ie),u_dem_tl:new o.Uniform2f(ie),u_dem_scale:new o.Uniform1f(ie),u_dem_tl_prev:new o.Uniform2f(ie),u_dem_scale_prev:new o.Uniform1f(ie),u_dem_size:new o.Uniform1f(ie),u_dem_lerp:new o.Uniform1f(ie),u_exaggeration:new o.Uniform1f(ie),u_depth:new o.Uniform1i(ie),u_depth_size_inv:new o.Uniform2f(ie),u_meter_to_dem:new o.Uniform1f(ie),u_label_plane_matrix_inv:new o.UniformMatrix4f(ie)}))(s)),M.includes("GLOBE")&&(this.globeUniforms=(ie=>({u_tile_tl_up:new o.Uniform3f(ie),u_tile_tr_up:new o.Uniform3f(ie),u_tile_br_up:new o.Uniform3f(ie),u_tile_bl_up:new o.Uniform3f(ie),u_tile_up_scale:new o.Uniform1f(ie)}))(s)),M.includes("FOG")&&(this.fogUniforms=(ie=>({u_fog_matrix:new o.UniformMatrix4f(ie),u_fog_range:new o.Uniform2f(ie),u_fog_color:new o.Uniform4f(ie),u_fog_horizon_blend:new o.Uniform1f(ie),u_fog_temporal_offset:new o.Uniform1f(ie),u_frustum_tl:new o.Uniform3f(ie),u_frustum_tr:new o.Uniform3f(ie),u_frustum_br:new o.Uniform3f(ie),u_frustum_bl:new o.Uniform3f(ie),u_globe_pos:new o.Uniform3f(ie),u_globe_radius:new o.Uniform1f(ie),u_globe_transition:new o.Uniform1f(ie),u_is_globe:new o.Uniform1i(ie),u_viewport:new o.Uniform2f(ie)}))(s))}}setTerrainUniformValues(s,c){if(!this.terrainUniforms)return;const m=this.terrainUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const v in c)m[v]&&m[v].set(this.program,v,c[v])}}setGlobeUniformValues(s,c){if(!this.globeUniforms)return;const m=this.globeUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const v in c)m[v]&&m[v].set(this.program,v,c[v])}}setFogUniformValues(s,c){if(!this.fogUniforms)return;const m=this.fogUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const v in c)m[v].set(this.program,v,c[v])}}draw(s,c,m,v,w,M,k,L,j,N,W,ee,le,ce,de){const ie=s.gl;if(this.failedToCreate)return;s.program.set(this.program),s.setDepthMode(m),s.setStencilMode(v),s.setColorMode(w),s.setCullFace(M);for(const me of Object.keys(this.fixedUniforms))this.fixedUniforms[me].set(this.program,me,k[me]);ce&&ce.setUniforms(this.program,s,this.binderUniforms,ee,{zoom:le});const se={[ie.LINES]:2,[ie.TRIANGLES]:3,[ie.LINE_STRIP]:1}[c];for(const me of W.get()){const ue=me.vaos||(me.vaos={});(ue[L]||(ue[L]=new nn)).bind(s,this,j,ce?ce.getPaintVertexBuffers():[],N,me.vertexOffset,de||[]),ie.drawElements(c,me.primitiveLength*se,ie.UNSIGNED_SHORT,me.primitiveOffset*se*2)}}}function xl(f,s){const c=Math.pow(2,s.tileID.overscaledZ),m=s.tileSize*Math.pow(2,f.transform.tileZoom)/c,v=m*(s.tileID.canonical.x+s.tileID.wrap*c),w=m*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_tile_units_to_pixels:1/zs(s,1,f.transform.tileZoom),u_pixel_coord_upper:[v>>16,w>>16],u_pixel_coord_lower:[65535&v,65535&w]}}const Aa=o.create(),ru=(f,s,c,m,v,w,M,k,L,j,N)=>{const W=s.style.light,ee=W.properties.get("position"),le=[ee.x,ee.y,ee.z],ce=o.create$1();W.properties.get("anchor")==="viewport"&&(o.fromRotation(ce,-s.transform.angle),o.transformMat3(le,le,ce));const de=W.properties.get("color"),ie=s.transform,se={u_matrix:f,u_lightpos:le,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[de.r,de.g,de.b],u_vertical_gradient:+c,u_opacity:m,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Aa,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:v,u_edge_radius:w};return ie.projection.name==="globe"&&(se.u_tile_id=[M.canonical.x,M.canonical.y,1<<M.canonical.z],se.u_zoom_transition=L,se.u_inv_rot_matrix=N,se.u_merc_center=j,se.u_up_dir=ie.projection.upVector(new o.CanonicalTileID(0,0,0),j[0]*o.EXTENT,j[1]*o.EXTENT),se.u_height_lift=k),se},jn=(f,s,c,m,v,w,M,k,L,j,N,W)=>{const ee=ru(f,s,c,m,v,w,M,L,j,N,W),le={u_height_factor:-Math.pow(2,M.overscaledZ)/k.tileSize/8};return o.extend(ee,xl(s,k),le)},Io=f=>({u_matrix:f}),Dc=(f,s,c)=>o.extend(Io(f),xl(s,c)),Ql=(f,s)=>({u_matrix:f,u_world:s}),Us=(f,s,c,m)=>o.extend(Dc(f,s,c),{u_world:m}),bl=o.create(),ec=(f,s,c,m,v,w)=>{const M=f.transform,k=M.projection.name==="globe";let L;if(w.paint.get("circle-pitch-alignment")==="map")if(k){const N=o.globePixelsToTileUnits(M.zoom,s.canonical)*M._pixelsPerMercatorPixel;L=Float32Array.from([N,0,0,N])}else L=M.calculatePixelsToTileUnitsMatrix(c);else L=new Float32Array([M.pixelsToGLUnits[0],0,0,M.pixelsToGLUnits[1]]);const j={u_camera_to_center_distance:M.cameraToCenterDistance,u_matrix:f.translatePosMatrix(s.projMatrix,c,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:L,u_inv_rot_matrix:bl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){j.u_inv_rot_matrix=m,j.u_merc_center=v,j.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],j.u_zoom_transition=o.globeToMercatorTransition(M.zoom);const N=v[0]*o.EXTENT,W=v[1]*o.EXTENT;j.u_up_dir=M.projection.upVector(new o.CanonicalTileID(0,0,0),N,W)}return j},Fu=f=>{const s=[];return f.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s},tc=(f,s,c,m)=>{const v=o.EXTENT/c.tileSize;return{u_matrix:f,u_camera_to_center_distance:s.getCameraToCenterDistance(m),u_extrude_scale:[s.pixelsToGLUnits[0]/v,s.pixelsToGLUnits[1]/v]}},ic=(f,s,c=1)=>({u_matrix:f,u_color:s,u_overlay:0,u_overlay_scale:c}),Pd=o.create(),wl=(f,s,c,m,v,w,M)=>{const k=f.transform,L=k.projection.name==="globe",j=L?o.globePixelsToTileUnits(k.zoom,s.canonical)*k._pixelsPerMercatorPixel:zs(c,1,w),N={u_matrix:s.projMatrix,u_extrude_scale:j,u_intensity:M,u_inv_rot_matrix:Pd,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){N.u_inv_rot_matrix=m,N.u_merc_center=v,N.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],N.u_zoom_transition=o.globeToMercatorTransition(k.zoom);const W=v[0]*o.EXTENT,ee=v[1]*o.EXTENT;N.u_up_dir=k.projection.upVector(new o.CanonicalTileID(0,0,0),W,ee)}return N},Nu=(f,s,c,m,v,w,M)=>{const k=f.transform,L=k.calculatePixelsToTileUnitsMatrix(s);return{u_matrix:Tl(f,s,c,m),u_pixels_to_tile_units:L,u_device_pixel_ratio:w,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:v,u_texsize:su(c)?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Ia(s,f.transform),u_alpha_discard_threshold:0,u_trim_offset:M}},oa=(f,s,c,m,v)=>{const w=f.transform;return{u_matrix:Tl(f,s,c,m),u_texsize:s.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:v,u_image:0,u_tile_units_to_pixels:Ia(s,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ia(f,s){return 1/zs(f,1,s.tileZoom)}function Tl(f,s,c,m){return f.translatePosMatrix(m||s.tileID.projMatrix,s,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}function su(f){const s=f.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}const nc=(f,s,c,m,v,w)=>{return{u_matrix:f,u_tl_parent:s,u_scale_parent:c,u_fade_t:m.mix,u_opacity:m.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(k=v.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(M=v.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:ko(v.paint.get("raster-hue-rotate")),u_perspective_transform:w};var M,k};function ko(f){f*=Math.PI/180;const s=Math.sin(f),c=Math.cos(f);return[(2*c+1)/3,(-Math.sqrt(3)*s-c+1)/3,(Math.sqrt(3)*s-c+1)/3]}const Es=o.create(),Wa=(f,s,c,m,v,w,M,k,L,j,N,W,ee,le,ce,de)=>{const ie=v.transform,se={u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:ie.cameraToCenterDistance,u_rotate_symbol:+c,u_aspect_ratio:ie.width/ie.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:M,u_coord_matrix:k,u_is_text:+L,u_pitch_with_map:+m,u_texsize:j,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Es,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Es,u_up_vector:[0,-1,0]};return de.name==="globe"&&(se.u_tile_id=[N.canonical.x,N.canonical.y,1<<N.canonical.z],se.u_zoom_transition=W,se.u_inv_rot_matrix=le,se.u_merc_center=ee,se.u_camera_forward=ie._camera.forward(),se.u_ecef_origin=o.globeECEFOrigin(ie.globeMatrix,N.toUnwrapped()),se.u_tile_matrix=Float32Array.from(ie.globeMatrix),se.u_up_vector=ce),se},Uu=(f,s,c,m,v,w,M,k,L,j,N,W,ee,le,ce,de,ie)=>o.extend(Wa(f,s,c,m,v,w,M,k,L,j,W,ee,le,ce,de,ie),{u_gamma_scale:m?v.transform.cameraToCenterDistance*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+N}),Pc=(f,s,c,m,v,w,M,k,L,j,N,W,ee,le,ce,de)=>o.extend(Uu(f,s,c,m,v,w,M,k,!0,L,!0,N,W,ee,le,ce,de),{u_texsize_icon:j,u_texture_icon:1}),zh=(f,s,c)=>({u_matrix:f,u_opacity:s,u_color:c}),Dn=(f,s,c,m,v)=>o.extend(function(w,M,k){const L=M.imageManager.getPattern(w.toString()),{width:j,height:N}=M.imageManager.getPixelSize(),W=Math.pow(2,k.tileID.overscaledZ),ee=k.tileSize*Math.pow(2,M.transform.tileZoom)/W,le=ee*(k.tileID.canonical.x+k.tileID.wrap*W),ce=ee*k.tileID.canonical.y;return{u_image:0,u_pattern_tl:L.tl,u_pattern_br:L.br,u_texsize:[j,N],u_pattern_size:L.displaySize,u_tile_units_to_pixels:1/zs(k,1,M.transform.tileZoom),u_pixel_coord_upper:[le>>16,ce>>16],u_pixel_coord_lower:[65535&le,65535&ce]}}(m,c,v),{u_matrix:f,u_opacity:s}),Ks={fillExtrusion:f=>({u_matrix:new o.UniformMatrix4f(f),u_lightpos:new o.Uniform3f(f),u_lightintensity:new o.Uniform1f(f),u_lightcolor:new o.Uniform3f(f),u_vertical_gradient:new o.Uniform1f(f),u_opacity:new o.Uniform1f(f),u_edge_radius:new o.Uniform1f(f),u_ao:new o.Uniform2f(f),u_tile_id:new o.Uniform3f(f),u_zoom_transition:new o.Uniform1f(f),u_inv_rot_matrix:new o.UniformMatrix4f(f),u_merc_center:new o.Uniform2f(f),u_up_dir:new o.Uniform3f(f),u_height_lift:new o.Uniform1f(f)}),fillExtrusionPattern:f=>({u_matrix:new o.UniformMatrix4f(f),u_lightpos:new o.Uniform3f(f),u_lightintensity:new o.Uniform1f(f),u_lightcolor:new o.Uniform3f(f),u_vertical_gradient:new o.Uniform1f(f),u_height_factor:new o.Uniform1f(f),u_edge_radius:new o.Uniform1f(f),u_ao:new o.Uniform2f(f),u_tile_id:new o.Uniform3f(f),u_zoom_transition:new o.Uniform1f(f),u_inv_rot_matrix:new o.UniformMatrix4f(f),u_merc_center:new o.Uniform2f(f),u_up_dir:new o.Uniform3f(f),u_height_lift:new o.Uniform1f(f),u_image:new o.Uniform1i(f),u_texsize:new o.Uniform2f(f),u_pixel_coord_upper:new o.Uniform2f(f),u_pixel_coord_lower:new o.Uniform2f(f),u_tile_units_to_pixels:new o.Uniform1f(f),u_opacity:new o.Uniform1f(f)}),fill:f=>({u_matrix:new o.UniformMatrix4f(f)}),fillPattern:f=>({u_matrix:new o.UniformMatrix4f(f),u_image:new o.Uniform1i(f),u_texsize:new o.Uniform2f(f),u_pixel_coord_upper:new o.Uniform2f(f),u_pixel_coord_lower:new o.Uniform2f(f),u_tile_units_to_pixels:new o.Uniform1f(f)}),fillOutline:f=>({u_matrix:new o.UniformMatrix4f(f),u_world:new o.Uniform2f(f)}),fillOutlinePattern:f=>({u_matrix:new o.UniformMatrix4f(f),u_world:new o.Uniform2f(f),u_image:new o.Uniform1i(f),u_texsize:new o.Uniform2f(f),u_pixel_coord_upper:new o.Uniform2f(f),u_pixel_coord_lower:new o.Uniform2f(f),u_tile_units_to_pixels:new o.Uniform1f(f)}),circle:f=>({u_camera_to_center_distance:new o.Uniform1f(f),u_extrude_scale:new o.UniformMatrix2f(f),u_device_pixel_ratio:new o.Uniform1f(f),u_matrix:new o.UniformMatrix4f(f),u_inv_rot_matrix:new o.UniformMatrix4f(f),u_merc_center:new o.Uniform2f(f),u_tile_id:new o.Uniform3f(f),u_zoom_transition:new o.Uniform1f(f),u_up_dir:new o.Uniform3f(f)}),collisionBox:f=>({u_matrix:new o.UniformMatrix4f(f),u_camera_to_center_distance:new o.Uniform1f(f),u_extrude_scale:new o.Uniform2f(f)}),collisionCircle:f=>({u_matrix:new o.UniformMatrix4f(f),u_inv_matrix:new o.UniformMatrix4f(f),u_camera_to_center_distance:new o.Uniform1f(f),u_viewport_size:new o.Uniform2f(f)}),debug:f=>({u_color:new o.UniformColor(f),u_matrix:new o.UniformMatrix4f(f),u_overlay:new o.Uniform1i(f),u_overlay_scale:new o.Uniform1f(f)}),clippingMask:f=>({u_matrix:new o.UniformMatrix4f(f)}),heatmap:f=>({u_extrude_scale:new o.Uniform1f(f),u_intensity:new o.Uniform1f(f),u_matrix:new o.UniformMatrix4f(f),u_inv_rot_matrix:new o.UniformMatrix4f(f),u_merc_center:new o.Uniform2f(f),u_tile_id:new o.Uniform3f(f),u_zoom_transition:new o.Uniform1f(f),u_up_dir:new o.Uniform3f(f)}),heatmapTexture:f=>({u_image:new o.Uniform1i(f),u_color_ramp:new o.Uniform1i(f),u_opacity:new o.Uniform1f(f)}),hillshade:f=>({u_matrix:new o.UniformMatrix4f(f),u_image:new o.Uniform1i(f),u_latrange:new o.Uniform2f(f),u_light:new o.Uniform2f(f),u_shadow:new o.UniformColor(f),u_highlight:new o.UniformColor(f),u_accent:new o.UniformColor(f)}),hillshadePrepare:f=>({u_matrix:new o.UniformMatrix4f(f),u_image:new o.Uniform1i(f),u_dimension:new o.Uniform2f(f),u_zoom:new o.Uniform1f(f),u_unpack:new o.Uniform4f(f)}),line:f=>({u_matrix:new o.UniformMatrix4f(f),u_pixels_to_tile_units:new o.UniformMatrix2f(f),u_device_pixel_ratio:new o.Uniform1f(f),u_units_to_pixels:new o.Uniform2f(f),u_dash_image:new o.Uniform1i(f),u_gradient_image:new o.Uniform1i(f),u_image_height:new o.Uniform1f(f),u_texsize:new o.Uniform2f(f),u_tile_units_to_pixels:new o.Uniform1f(f),u_alpha_discard_threshold:new o.Uniform1f(f),u_trim_offset:new o.Uniform2f(f)}),linePattern:f=>({u_matrix:new o.UniformMatrix4f(f),u_texsize:new o.Uniform2f(f),u_pixels_to_tile_units:new o.UniformMatrix2f(f),u_device_pixel_ratio:new o.Uniform1f(f),u_image:new o.Uniform1i(f),u_units_to_pixels:new o.Uniform2f(f),u_tile_units_to_pixels:new o.Uniform1f(f),u_alpha_discard_threshold:new o.Uniform1f(f)}),raster:f=>({u_matrix:new o.UniformMatrix4f(f),u_tl_parent:new o.Uniform2f(f),u_scale_parent:new o.Uniform1f(f),u_fade_t:new o.Uniform1f(f),u_opacity:new o.Uniform1f(f),u_image0:new o.Uniform1i(f),u_image1:new o.Uniform1i(f),u_brightness_low:new o.Uniform1f(f),u_brightness_high:new o.Uniform1f(f),u_saturation_factor:new o.Uniform1f(f),u_contrast_factor:new o.Uniform1f(f),u_spin_weights:new o.Uniform3f(f),u_perspective_transform:new o.Uniform2f(f)}),symbolIcon:f=>({u_is_size_zoom_constant:new o.Uniform1i(f),u_is_size_feature_constant:new o.Uniform1i(f),u_size_t:new o.Uniform1f(f),u_size:new o.Uniform1f(f),u_camera_to_center_distance:new o.Uniform1f(f),u_rotate_symbol:new o.Uniform1i(f),u_aspect_ratio:new o.Uniform1f(f),u_fade_change:new o.Uniform1f(f),u_matrix:new o.UniformMatrix4f(f),u_label_plane_matrix:new o.UniformMatrix4f(f),u_coord_matrix:new o.UniformMatrix4f(f),u_is_text:new o.Uniform1i(f),u_pitch_with_map:new o.Uniform1i(f),u_texsize:new o.Uniform2f(f),u_tile_id:new o.Uniform3f(f),u_zoom_transition:new o.Uniform1f(f),u_inv_rot_matrix:new o.UniformMatrix4f(f),u_merc_center:new o.Uniform2f(f),u_camera_forward:new o.Uniform3f(f),u_tile_matrix:new o.UniformMatrix4f(f),u_up_vector:new o.Uniform3f(f),u_ecef_origin:new o.Uniform3f(f),u_texture:new o.Uniform1i(f)}),symbolSDF:f=>({u_is_size_zoom_constant:new o.Uniform1i(f),u_is_size_feature_constant:new o.Uniform1i(f),u_size_t:new o.Uniform1f(f),u_size:new o.Uniform1f(f),u_camera_to_center_distance:new o.Uniform1f(f),u_rotate_symbol:new o.Uniform1i(f),u_aspect_ratio:new o.Uniform1f(f),u_fade_change:new o.Uniform1f(f),u_matrix:new o.UniformMatrix4f(f),u_label_plane_matrix:new o.UniformMatrix4f(f),u_coord_matrix:new o.UniformMatrix4f(f),u_is_text:new o.Uniform1i(f),u_pitch_with_map:new o.Uniform1i(f),u_texsize:new o.Uniform2f(f),u_texture:new o.Uniform1i(f),u_gamma_scale:new o.Uniform1f(f),u_device_pixel_ratio:new o.Uniform1f(f),u_tile_id:new o.Uniform3f(f),u_zoom_transition:new o.Uniform1f(f),u_inv_rot_matrix:new o.UniformMatrix4f(f),u_merc_center:new o.Uniform2f(f),u_camera_forward:new o.Uniform3f(f),u_tile_matrix:new o.UniformMatrix4f(f),u_up_vector:new o.Uniform3f(f),u_ecef_origin:new o.Uniform3f(f),u_is_halo:new o.Uniform1i(f)}),symbolTextAndIcon:f=>({u_is_size_zoom_constant:new o.Uniform1i(f),u_is_size_feature_constant:new o.Uniform1i(f),u_size_t:new o.Uniform1f(f),u_size:new o.Uniform1f(f),u_camera_to_center_distance:new o.Uniform1f(f),u_rotate_symbol:new o.Uniform1i(f),u_aspect_ratio:new o.Uniform1f(f),u_fade_change:new o.Uniform1f(f),u_matrix:new o.UniformMatrix4f(f),u_label_plane_matrix:new o.UniformMatrix4f(f),u_coord_matrix:new o.UniformMatrix4f(f),u_is_text:new o.Uniform1i(f),u_pitch_with_map:new o.Uniform1i(f),u_texsize:new o.Uniform2f(f),u_texsize_icon:new o.Uniform2f(f),u_texture:new o.Uniform1i(f),u_texture_icon:new o.Uniform1i(f),u_gamma_scale:new o.Uniform1f(f),u_device_pixel_ratio:new o.Uniform1f(f),u_is_halo:new o.Uniform1i(f)}),background:f=>({u_matrix:new o.UniformMatrix4f(f),u_opacity:new o.Uniform1f(f),u_color:new o.UniformColor(f)}),backgroundPattern:f=>({u_matrix:new o.UniformMatrix4f(f),u_opacity:new o.Uniform1f(f),u_image:new o.Uniform1i(f),u_pattern_tl:new o.Uniform2f(f),u_pattern_br:new o.Uniform2f(f),u_texsize:new o.Uniform2f(f),u_pattern_size:new o.Uniform2f(f),u_pixel_coord_upper:new o.Uniform2f(f),u_pixel_coord_lower:new o.Uniform2f(f),u_tile_units_to_pixels:new o.Uniform1f(f)}),terrainRaster:yn,terrainDepth:yn,skybox:f=>({u_matrix:new o.UniformMatrix4f(f),u_sun_direction:new o.Uniform3f(f),u_cubemap:new o.Uniform1i(f),u_opacity:new o.Uniform1f(f),u_temporal_offset:new o.Uniform1f(f)}),skyboxGradient:f=>({u_matrix:new o.UniformMatrix4f(f),u_color_ramp:new o.Uniform1i(f),u_center_direction:new o.Uniform3f(f),u_radius:new o.Uniform1f(f),u_opacity:new o.Uniform1f(f),u_temporal_offset:new o.Uniform1f(f)}),skyboxCapture:f=>({u_matrix_3f:new o.UniformMatrix3f(f),u_sun_direction:new o.Uniform3f(f),u_sun_intensity:new o.Uniform1f(f),u_color_tint_r:new o.Uniform4f(f),u_color_tint_m:new o.Uniform4f(f),u_luminance:new o.Uniform1f(f)}),globeRaster:f=>({u_proj_matrix:new o.UniformMatrix4f(f),u_globe_matrix:new o.UniformMatrix4f(f),u_normalize_matrix:new o.UniformMatrix4f(f),u_merc_matrix:new o.UniformMatrix4f(f),u_zoom_transition:new o.Uniform1f(f),u_merc_center:new o.Uniform2f(f),u_image0:new o.Uniform1i(f),u_grid_matrix:new o.UniformMatrix3f(f),u_frustum_tl:new o.Uniform3f(f),u_frustum_tr:new o.Uniform3f(f),u_frustum_br:new o.Uniform3f(f),u_frustum_bl:new o.Uniform3f(f),u_globe_pos:new o.Uniform3f(f),u_globe_radius:new o.Uniform1f(f),u_viewport:new o.Uniform2f(f)}),globeAtmosphere:f=>({u_frustum_tl:new o.Uniform3f(f),u_frustum_tr:new o.Uniform3f(f),u_frustum_br:new o.Uniform3f(f),u_frustum_bl:new o.Uniform3f(f),u_horizon:new o.Uniform1f(f),u_transition:new o.Uniform1f(f),u_fadeout_range:new o.Uniform1f(f),u_color:new o.Uniform4f(f),u_high_color:new o.Uniform4f(f),u_space_color:new o.Uniform4f(f),u_star_intensity:new o.Uniform1f(f),u_star_density:new o.Uniform1f(f),u_star_size:new o.Uniform1f(f),u_temporal_offset:new o.Uniform1f(f),u_horizon_angle:new o.Uniform1f(f),u_rotation_matrix:new o.UniformMatrix4f(f)})};let Ss;function co(f,s,c,m,v,w,M){const k=f.context,L=k.gl,j=f.transform,N=f.useProgram("collisionBox"),W=[];let ee=0,le=0;for(let xe=0;xe<m.length;xe++){const De=m[xe],we=s.getTile(De),Ue=we.getBucket(c);if(!Ue)continue;const st=Vo(De,Ue,j);let Je=st;v[0]===0&&v[1]===0||(Je=f.translatePosMatrix(st,we,v,w));const Ge=M?Ue.textCollisionBox:Ue.iconCollisionBox,It=Ue.collisionCircleArray;if(It.length>0){const Ke=o.create(),vt=Je;o.mul(Ke,Ue.placementInvProjMatrix,j.glCoordMatrix),o.mul(Ke,Ke,Ue.placementViewportMatrix),W.push({circleArray:It,circleOffset:le,transform:vt,invTransform:Ke,projection:Ue.getProjection()}),ee+=It.length/4,le=ee}Ge&&(f.terrain&&f.terrain.setupElevationDraw(we,N),N.draw(k,L.LINES,o.DepthMode.disabled,o.StencilMode.disabled,f.colorModeForRenderPass(),o.CullFaceMode.disabled,tc(Je,j,we,Ue.getProjection()),c.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,null,j.zoom,null,[Ge.collisionVertexBuffer,Ge.collisionVertexBufferExt]))}if(!M||!W.length)return;const ce=f.useProgram("collisionCircle"),de=new o.StructArrayLayout2f1f2i16;de.resize(4*ee),de._trim();let ie=0;for(const xe of W)for(let De=0;De<xe.circleArray.length/4;De++){const we=4*De,Ue=xe.circleArray[we+0],st=xe.circleArray[we+1],Je=xe.circleArray[we+2],Ge=xe.circleArray[we+3];de.emplace(ie++,Ue,st,Je,Ge,0),de.emplace(ie++,Ue,st,Je,Ge,1),de.emplace(ie++,Ue,st,Je,Ge,2),de.emplace(ie++,Ue,st,Je,Ge,3)}(!Ss||Ss.length<2*ee)&&(Ss=function(xe){const De=2*xe,we=new o.StructArrayLayout3ui6;we.resize(De),we._trim();for(let Ue=0;Ue<De;Ue++){const st=6*Ue;we.uint16[st+0]=4*Ue+0,we.uint16[st+1]=4*Ue+1,we.uint16[st+2]=4*Ue+2,we.uint16[st+3]=4*Ue+2,we.uint16[st+4]=4*Ue+3,we.uint16[st+5]=4*Ue+0}return we}(ee));const se=k.createIndexBuffer(Ss,!0),me=k.createVertexBuffer(de,o.collisionCircleLayout.members,!0);for(const xe of W){const De={u_matrix:xe.transform,u_inv_matrix:xe.invTransform,u_camera_to_center_distance:(ue=j).getCameraToCenterDistance(xe.projection),u_viewport_size:[ue.width,ue.height]};ce.draw(k,L.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,f.colorModeForRenderPass(),o.CullFaceMode.disabled,De,c.id,me,se,o.SegmentVector.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,j.zoom)}var ue;me.destroy(),se.destroy()}const El=o.create();function Ld({width:f,height:s,anchor:c,textOffset:m,textScale:v},w){const{horizontalAlign:M,verticalAlign:k}=o.getAnchorAlignment(c),L=-(M-.5)*f,j=-(k-.5)*s,N=o.evaluateVariableOffset(c,m);return new o.pointGeometry((L/v+N[0])*w,(j/v+N[1])*w)}function Rd(f,s,c,m,v,w,M,k,L,j,N){const W=f.text.placedSymbolArray,ee=f.text.dynamicLayoutVertexArray,le=f.icon.dynamicLayoutVertexArray,ce={},de=f.getProjection(),ie=pl(k,de,w),se=w.elevation,me=de.upVectorScale(k.canonical,w.center.lat,w.worldSize).metersToTile;ee.clear();for(let ue=0;ue<W.length;ue++){const xe=W.get(ue),{tileAnchorX:De,tileAnchorY:we,numGlyphs:Ue}=xe,st=f.allowVerticalPlacement&&!xe.placedOrientation,Je=xe.hidden||!xe.crossTileID||st?null:m[xe.crossTileID];if(Je){let Ge=0,It=0,Ke=0;if(se){const mi=se?se.getAtTileOffset(k,De,we):0,[Ei,_i,zi]=de.upVector(k.canonical,De,we);Ge=mi*Ei*me,It=mi*_i*me,Ke=mi*zi*me}let[vt,lt,Bt,ut]=hs(xe.projectedAnchorX+Ge,xe.projectedAnchorY+It,xe.projectedAnchorZ+Ke,c?ie:M);const Mt=ti(w.getCameraToCenterDistance(de),ut);let jt=v.evaluateSizeForFeature(f.textSizeData,j,xe)*Mt/o.ONE_EM;c&&(jt*=f.tilePixelRatio/L);const Ze=Ld(Je,jt);c?({x:vt,y:lt,z:Bt}=de.projectTilePoint(De+Ze.x,we+Ze.y,k.canonical),[vt,lt,Bt]=hs(vt+Ge,lt+It,Bt+Ke,M)):(s&&Ze._rotate(-w.angle),vt+=Ze.x,lt+=Ze.y,Bt=0);const at=f.allowVerticalPlacement&&xe.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let mi=0;mi<Ue;mi++)o.addDynamicAttributes(ee,vt,lt,Bt,at);N&&xe.associatedIconIndex>=0&&(ce[xe.associatedIconIndex]={x:vt,y:lt,z:Bt,angle:at})}else is(Ue,ee)}if(N){le.clear();const ue=f.icon.placedSymbolArray;for(let xe=0;xe<ue.length;xe++){const De=ue.get(xe),{numGlyphs:we}=De,Ue=ce[xe];if(De.hidden||!Ue)is(we,le);else{const{x:st,y:Je,z:Ge,angle:It}=Ue;for(let Ke=0;Ke<we;Ke++)o.addDynamicAttributes(le,st,Je,Ge,It)}}f.icon.dynamicLayoutVertexBuffer.updateData(le)}f.text.dynamicLayoutVertexBuffer.updateData(ee)}function Od(f,s,c){return c.iconsInText&&s?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function uo(f,s,c,m,v,w,M,k,L,j,N,W){const ee=f.context,le=ee.gl,ce=f.transform,de=k==="map",ie=L==="map",se=de&&c.layout.get("symbol-placement")!=="point",me=de&&!ie&&!se,ue=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let xe=!1;const De=f.depthModeForSublayer(0,o.DepthMode.ReadOnly),we=[o.mercatorXfromLng(ce.center.lng),o.mercatorYfromLat(ce.center.lat)],Ue=c.layout.get("text-variable-anchor"),st=ce.projection.name==="globe",Je=[],Ge=[0,-1,0];let It=Ge;!st&&!ce.mercatorFromTransition||de||(It=function(Ke){const vt=Ke._camera.getWorldToCamera(Ke.worldSize,1),lt=o.multiply([],vt,Ke.globeMatrix);o.invert(lt,lt);const Bt=[0,0,0],ut=[0,1,0,0];return o.transformMat4$1(ut,ut,lt),Bt[0]=ut[0],Bt[1]=ut[1],Bt[2]=ut[2],o.normalize(Bt,Bt),Bt}(ce));for(const Ke of m){const vt=s.getTile(Ke),lt=vt.getBucket(c);if(!lt||lt.projection.name==="mercator"&&st)continue;const Bt=v?lt.text:lt.icon;if(!Bt||lt.fullyClipped||!Bt.segments.get().length)continue;const ut=Bt.programConfigurations.get(c.id),Mt=v||lt.sdfIcons,jt=v?lt.textSizeData:lt.iconSizeData,Ze=ie||ce.pitch!==0,at=o.evaluateSizeForZoom(jt,ce.zoom);let mi,Ei,_i,zi,sn=[0,0],Mi=null;if(v){if(Ei=vt.glyphAtlasTexture,_i=le.LINEAR,mi=vt.glyphAtlasTexture.size,lt.iconsInText){sn=vt.imageAtlasTexture.size,Mi=vt.imageAtlasTexture;const Po=jt.kind==="composite"||jt.kind==="camera";zi=Ze||f.options.rotating||f.options.zooming||Po?le.LINEAR:le.NEAREST}}else{const Po=c.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;Ei=vt.imageAtlasTexture,_i=Mt||f.options.rotating||f.options.zooming||Po||Ze?le.LINEAR:le.NEAREST,mi=vt.imageAtlasTexture.size}const ci=lt.projection.name==="globe",Kn=ci?It:Ge,zn=ci?o.globeToMercatorTransition(ce.zoom):0,tr=pl(Ke,lt.getProjection(),ce),Hn=ce.calculatePixelsToTileUnitsMatrix(vt),Do=Ds(tr,vt.tileID.canonical,ie,de,ce,lt.getProjection(),Hn),fo=f.terrain&&ie&&se?o.invert(o.create(),Do):El,Qs=Ou(tr,vt.tileID.canonical,ie,de,ce,lt.getProjection(),Hn),Da=Ue&&lt.hasTextData(),ur=c.layout.get("icon-text-fit")!=="none"&&Da&&lt.hasIconData();if(se){const Po=ce.elevation,Xa=Po?Po.getAtTileOffsetFunc(Ke,ce.center.lat,ce.worldSize,lt.getProjection()):null,la=Jc(tr,vt.tileID.canonical,ie,de,ce,lt.getProjection(),Hn);ln(lt,tr,f,v,la,Qs,ie,j,Xa,Ke)}const Zn=se||v&&Ue||ur,Pn=f.translatePosMatrix(tr,vt,w,M),Gr=Zn?El:Do,Vs=f.translatePosMatrix(Qs,vt,w,M,!0),dr=lt.getProjection().createInversionMatrix(ce,Ke.canonical),eo=[];f.terrainRenderModeElevated()&&ie&&eo.push("PITCH_WITH_MAP_TERRAIN"),ci&&eo.push("PROJECTION_GLOBE_VIEW"),Zn&&eo.push("PROJECTED_POS_ON_VIEWPORT");const Hu=Mt&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Pa;Pa=Mt?lt.iconsInText?Pc(jt.kind,at,me,ie,f,Pn,Gr,Vs,mi,sn,Ke,zn,we,dr,Kn,lt.getProjection()):Uu(jt.kind,at,me,ie,f,Pn,Gr,Vs,v,mi,!0,Ke,zn,we,dr,Kn,lt.getProjection()):Wa(jt.kind,at,me,ie,f,Pn,Gr,Vs,v,mi,Ke,zn,we,dr,Kn,lt.getProjection());const $s={program:f.useProgram(Od(Mt,v,lt),ut,eo),buffers:Bt,uniformValues:Pa,atlasTexture:Ei,atlasTextureIcon:Mi,atlasInterpolation:_i,atlasInterpolationIcon:zi,isSDF:Mt,hasHalo:Hu,tile:vt,labelPlaneMatrixInv:fo};if(ue&&lt.canOverlap){xe=!0;const Po=Bt.segments.get();for(const Xa of Po)Je.push({segments:new o.SegmentVector([Xa]),sortKey:Xa.sortKey,state:$s})}else Je.push({segments:Bt.segments,sortKey:0,state:$s})}xe&&Je.sort((Ke,vt)=>Ke.sortKey-vt.sortKey);for(const Ke of Je){const vt=Ke.state;if(f.terrain&&f.terrain.setupElevationDraw(vt.tile,vt.program,{useDepthForOcclusion:!st,labelPlaneMatrixInv:vt.labelPlaneMatrixInv}),ee.activeTexture.set(le.TEXTURE0),vt.atlasTexture.bind(vt.atlasInterpolation,le.CLAMP_TO_EDGE),vt.atlasTextureIcon&&(ee.activeTexture.set(le.TEXTURE1),vt.atlasTextureIcon&&vt.atlasTextureIcon.bind(vt.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),vt.isSDF){const lt=vt.uniformValues;vt.hasHalo&&(lt.u_is_halo=1,qe(vt.buffers,Ke.segments,c,f,vt.program,De,N,W,lt)),lt.u_is_halo=0}qe(vt.buffers,Ke.segments,c,f,vt.program,De,N,W,vt.uniformValues)}}function qe(f,s,c,m,v,w,M,k,L){const j=m.context,N=[f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer,f.globeExtVertexBuffer];v.draw(j,j.gl.TRIANGLES,w,M,k,o.CullFaceMode.disabled,L,c.id,f.layoutVertexBuffer,f.indexBuffer,s,c.paint,m.transform.zoom,f.programConfigurations.get(c.id),N)}function St(f,s,c,m,v,w,M){const k=f.context.gl,L=c.paint.get("fill-pattern"),j=L&&L.constantOr(1);let N,W,ee,le,ce;M?(W=j&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",N=k.LINES):(W=j?"fillPattern":"fill",N=k.TRIANGLES);for(const de of m){const ie=s.getTile(de);if(j&&!ie.patternsLoaded())continue;const se=ie.getBucket(c);if(!se)continue;f.prepareDrawTile();const me=se.programConfigurations.get(c.id),ue=f.useProgram(W,me);j&&(f.context.activeTexture.set(k.TEXTURE0),ie.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),me.updatePaintBuffers());const xe=L.constantOr(null);if(xe&&ie.imageAtlas){const we=ie.imageAtlas.patternPositions[xe.toString()];we&&me.setConstantPatternPositions(we)}const De=f.translatePosMatrix(de.projMatrix,ie,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(M){le=se.indexBuffer2,ce=se.segments2;const we=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];ee=W==="fillOutlinePattern"&&j?Us(De,f,ie,we):Ql(De,we)}else le=se.indexBuffer,ce=se.segments,ee=j?Dc(De,f,ie):Io(De);f.prepareDrawProgram(f.context,ue,de.toUnwrapped()),ue.draw(f.context,N,v,f.stencilModeForClipping(de),w,o.CullFaceMode.disabled,ee,c.id,se.layoutVertexBuffer,le,ce,c.paint,f.transform.zoom,me)}}function _t(f,s,c,m,v,w,M){const k=f.context,L=k.gl,j=f.transform,N=c.paint.get("fill-extrusion-pattern"),W=N.constantOr(1),ee=c.paint.get("fill-extrusion-opacity"),le=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),c.paint.get("fill-extrusion-ambient-occlusion-radius")],ce=c.layout.get("fill-extrusion-edge-radius"),de=j.projection.name==="globe"?o.fillExtrusionHeightLift():0,ie=j.projection.name==="globe",se=ie?o.globeToMercatorTransition(j.zoom):0,me=[o.mercatorXfromLng(j.center.lng),o.mercatorYfromLat(j.center.lat)],ue=[];ie&&(ue.push("PROJECTION_GLOBE_VIEW"),f.style.terrainSetForDrapingOnly()&&ue.push("TERRAIN")),le[0]>0&&ue.push("FAUX_AO");for(const xe of m){const De=s.getTile(xe),we=De.getBucket(c);if(!we||we.projection.name!==j.projection.name)continue;const Ue=we.programConfigurations.get(c.id),st=f.useProgram(W?"fillExtrusionPattern":"fillExtrusion",Ue,ue);if(f.terrain){const Bt=f.terrain;if(f.style.terrainSetForDrapingOnly())Bt.setupElevationDraw(De,st,{useMeterToDem:!0});else{if(!we.enableTerrain)continue;if(Bt.setupElevationDraw(De,st,{useMeterToDem:!0}),vi(k,s,xe,we,c,Bt),!we.centroidVertexBuffer){const ut=st.attributes.a_centroid_pos;ut!==void 0&&L.vertexAttrib2f(ut,0,0)}}}W&&(f.context.activeTexture.set(L.TEXTURE0),De.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ue.updatePaintBuffers());const Je=N.constantOr(null);if(Je&&De.imageAtlas){const Bt=De.imageAtlas.patternPositions[Je.toString()];Bt&&Ue.setConstantPatternPositions(Bt)}const Ge=f.translatePosMatrix(xe.projMatrix,De,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),It=j.projection.createInversionMatrix(j,xe.canonical),Ke=c.paint.get("fill-extrusion-vertical-gradient"),vt=W?jn(Ge,f,Ke,ee,le,ce,xe,De,de,se,me,It):ru(Ge,f,Ke,ee,le,ce,xe,de,se,me,It);f.prepareDrawProgram(k,st,xe.toUnwrapped());const lt=[];f.terrain&&lt.push(we.centroidVertexBuffer),ie&&lt.push(we.layoutVertexExtBuffer),st.draw(k,k.gl.TRIANGLES,v,w,M,o.CullFaceMode.backCCW,vt,c.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,c.paint,f.transform.zoom,Ue,lt)}}function vi(f,s,c,m,v,w){const M=[se=>{let me=se.canonical.x-1,ue=se.wrap;return me<0&&(me=(1<<se.canonical.z)-1,ue--),new o.OverscaledTileID(se.overscaledZ,ue,se.canonical.z,me,se.canonical.y)},se=>{let me=se.canonical.x+1,ue=se.wrap;return me===1<<se.canonical.z&&(me=0,ue++),new o.OverscaledTileID(se.overscaledZ,ue,se.canonical.z,me,se.canonical.y)},se=>new o.OverscaledTileID(se.overscaledZ,se.wrap,se.canonical.z,se.canonical.x,(se.canonical.y===0?1<<se.canonical.z:se.canonical.y)-1),se=>new o.OverscaledTileID(se.overscaledZ,se.wrap,se.canonical.z,se.canonical.x,se.canonical.y===(1<<se.canonical.z)-1?0:se.canonical.y+1)],k=se=>{const me=s.getSource().minzoom,ue=De=>{const we=s.getTileByID(De);if(we&&we.hasData())return we.getBucket(v)},xe=[0,-1,1];for(const De of xe){if(se.overscaledZ+De<me)continue;const we=ue(se.calculateScaledKey(se.overscaledZ+De));if(we)return we}},L=[0,0,0],j=(se,me)=>(L[0]=Math.min(se.min.y,me.min.y),L[1]=Math.max(se.max.y,me.max.y),L[2]=o.EXTENT-me.min.x>se.max.x?me.min.x-o.EXTENT:se.max.x,L),N=(se,me)=>(L[0]=Math.min(se.min.x,me.min.x),L[1]=Math.max(se.max.x,me.max.x),L[2]=o.EXTENT-me.min.y>se.max.y?me.min.y-o.EXTENT:se.max.y,L),W=[(se,me)=>j(se,me),(se,me)=>j(me,se),(se,me)=>N(se,me),(se,me)=>N(me,se)],ee=new o.pointGeometry(0,0);let le,ce,de;const ie=(se,me,ue,xe,De)=>{const we=[[xe?ue:se,xe?se:ue,0],[xe?ue:me,xe?me:ue,0]],Ue=De<0?o.EXTENT+De:De,st=[xe?Ue:(se+me)/2,xe?(se+me)/2:Ue,0];return ue===0&&De<0||ue!==0&&De>0?w.getForTilePoints(de,[st],!0,ce):we.push(st),w.getForTilePoints(c,we,!0,le),Math.max(we[0][2],we[1][2],st[2])/w.exaggeration()};for(let se=0;se<4;se++){const me=(se<2?1:5)-se,ue=m.borders[se];if(ue.length===0)continue;const xe=de=M[se](c),De=k(xe);if(!(De&&De instanceof o.FillExtrusionBucket&&De.enableTerrain)||m.borderDoneWithNeighborZ[se]===De.canonical.z&&De.borderDoneWithNeighborZ[me]===m.canonical.z||(ce=w.findDEMTileFor(xe),!ce||!ce.dem))continue;if(!le){const Je=w.findDEMTileFor(c);if(!Je||!Je.dem)return;le=Je}const we=De.borders[me];let Ue=0;const st=De.borderDoneWithNeighborZ[me]!==m.canonical.z;if(m.canonical.z===De.canonical.z){for(let Je=0;Je<ue.length;Je++){const Ge=m.featuresOnBorder[ue[Je]],It=Ge.borders[se];let Ke;for(;Ue<we.length&&(Ke=De.featuresOnBorder[we[Ue]],!(Ke.borders[me][1]>It[0]+3));)st&&De.encodeCentroid(void 0,Ke,!1),Ue++;if(Ke&&Ue<we.length){const vt=Ue;let lt=0;for(;!(Ke.borders[me][0]>It[1]-3)&&(lt++,++Ue!==we.length);)Ke=De.featuresOnBorder[we[Ue]];if(Ke=De.featuresOnBorder[we[vt]],Ge.intersectsCount()>1||Ke.intersectsCount()>1||lt!==1){lt!==1&&(Ue=vt),m.encodeCentroid(void 0,Ge,!1),st&&De.encodeCentroid(void 0,Ke,!1);continue}const Bt=W[se](Ge,Ke),ut=se%2?o.EXTENT-1:0;ee.x=ie(Bt[0],Math.min(o.EXTENT-1,Bt[1]),ut,se<2,Bt[2]),ee.y=0,m.encodeCentroid(ee,Ge,!1),st&&De.encodeCentroid(ee,Ke,!1)}else m.encodeCentroid(void 0,Ge,!1)}m.borderDoneWithNeighborZ[se]=De.canonical.z,m.needsCentroidUpdate=!0,st&&(De.borderDoneWithNeighborZ[me]=m.canonical.z,De.needsCentroidUpdate=!0)}else{for(const Je of ue)m.encodeCentroid(void 0,m.featuresOnBorder[Je],!1);if(st){for(const Je of we)De.encodeCentroid(void 0,De.featuresOnBorder[Je],!1);De.borderDoneWithNeighborZ[me]=m.canonical.z,De.needsCentroidUpdate=!0}m.borderDoneWithNeighborZ[se]=De.canonical.z,m.needsCentroidUpdate=!0}}(m.needsCentroidUpdate||!m.centroidVertexBuffer&&m.centroidVertexArray.length!==0)&&m.uploadCentroid(f)}const Qi=new o.Color(1,0,0,1),On=new o.Color(0,1,0,1),Vr=new o.Color(0,0,1,1),Vn=new o.Color(1,0,1,1),rc=new o.Color(0,1,1,1);function ou(f,s,c){const m=f.context,v=f.transform,w=m.gl,M=v.projection.name==="globe",k=M?["PROJECTION_GLOBE_VIEW"]:null;let L=c.projMatrix;if(M&&o.globeToMercatorTransition(v.zoom)>0){const Ge=o.transitionTileAABBinECEF(c.canonical,v),It=o.globeDenormalizeECEF(Ge);L=o.multiply(new Float32Array(16),v.globeMatrix,It),o.multiply(L,v.projMatrix,L)}const j=f.useProgram("debug",null,k),N=s.getTileByID(c.key);f.terrain&&f.terrain.setupElevationDraw(N,j);const W=o.DepthMode.disabled,ee=o.StencilMode.disabled,le=f.colorModeForRenderPass(),ce="$debug";m.activeTexture.set(w.TEXTURE0),f.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),M?N._makeGlobeTileDebugBuffers(f.context,v):N._makeDebugTileBoundsBuffers(f.context,v.projection);const de=N._tileDebugBuffer||f.debugBuffer,ie=N._tileDebugIndexBuffer||f.debugIndexBuffer,se=N._tileDebugSegments||f.debugSegments;j.draw(m,w.LINE_STRIP,W,ee,le,o.CullFaceMode.disabled,ic(L,o.Color.red),ce,de,ie,se,null,null,null,[N._globeTileDebugBorderBuffer]);const me=N.latestRawTileData,ue=Math.floor((me&&me.byteLength||0)/1024),xe=s.getTile(c).tileSize,De=512/Math.min(xe,512)*(c.overscaledZ/v.zoom)*.5;let we=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(we+=` => ${c.overscaledZ}`),we+=` ${ue}kb`,function(Ge,It){Ge.initDebugOverlayCanvas();const Ke=Ge.debugOverlayCanvas,vt=Ge.context.gl,lt=Ge.debugOverlayCanvas.getContext("2d");lt.clearRect(0,0,Ke.width,Ke.height),lt.shadowColor="white",lt.shadowBlur=2,lt.lineWidth=1.5,lt.strokeStyle="white",lt.textBaseline="top",lt.font="bold 36px Open Sans, sans-serif",lt.fillText(It,5,5),lt.strokeText(It,5,5),Ge.debugOverlayTexture.update(Ke),Ge.debugOverlayTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)}(f,we);const Ue=N._tileDebugTextBuffer||f.debugBuffer,st=N._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,Je=N._tileDebugTextSegments||f.debugSegments;j.draw(m,w.TRIANGLES,W,ee,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,ic(L,o.Color.transparent,De),ce,Ue,st,Je,null,null,null,[N._globeTileDebugTextBuffer])}function Js(f,s,c,m){Ae(f,0,s+c/2,f.transform.width,c,m)}function oe(f,s,c,m){Ae(f,s-c/2,0,c,f.transform.height,m)}function Ae(f,s,c,m,v,w){const M=f.context,k=M.gl;k.enable(k.SCISSOR_TEST),k.scissor(s*o.exported.devicePixelRatio,c*o.exported.devicePixelRatio,m*o.exported.devicePixelRatio,v*o.exported.devicePixelRatio),M.clear({color:w}),k.disable(k.SCISSOR_TEST)}const je=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ct}=je;function We(f,s,c,m){f.emplaceBack(s,c,m)}class pt{constructor(s){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,We(this.vertexArray,-1,-1,1),We(this.vertexArray,1,-1,1),We(this.vertexArray,-1,1,1),We(this.vertexArray,1,1,1),We(this.vertexArray,-1,-1,-1),We(this.vertexArray,1,-1,-1),We(this.vertexArray,-1,1,-1),We(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=s.createVertexBuffer(this.vertexArray,Ct),this.indexBuffer=s.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function $t(f,s,c,m,v,w){const M=f.gl,k=s.paint.get("sky-atmosphere-color"),L=s.paint.get("sky-atmosphere-halo-color"),j=s.paint.get("sky-atmosphere-sun-intensity"),N=((W,ee,le,ce,de)=>({u_matrix_3f:W,u_sun_direction:ee,u_sun_intensity:le,u_color_tint_r:[ce.r,ce.g,ce.b,ce.a],u_color_tint_m:[de.r,de.g,de.b,de.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),m),v,j,k,L);M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+w,s.skyboxTexture,0),c.draw(f,M.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,N,"skyboxCapture",s.skyboxGeometry.vertexBuffer,s.skyboxGeometry.indexBuffer,s.skyboxGeometry.segment)}const oi=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ut{constructor(s){const c=new o.StructArrayLayout5f20;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const m=new o.StructArrayLayout3ui6;m.emplaceBack(0,1,2),m.emplaceBack(2,3,0),this.vertexBuffer=s.createVertexBuffer(c,oi.members),this.indexBuffer=s.createIndexBuffer(m),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Bi={symbol:function(f,s,c,m,v){if(f.renderPass!=="translucent")return;const w=o.StencilMode.disabled,M=f.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(k,L,j,N,W,ee,le){const ce=L.transform,de=W==="map",ie=ee==="map";for(const se of k){const me=N.getTile(se),ue=me.getBucket(j);if(!ue||!ue.text||!ue.text.segments.get().length)continue;const xe=o.evaluateSizeForZoom(ue.textSizeData,ce.zoom),De=pl(se,ue.getProjection(),ce),we=ce.calculatePixelsToTileUnitsMatrix(me),Ue=Ds(De,me.tileID.canonical,ie,de,ce,ue.getProjection(),we),st=j.layout.get("icon-text-fit")!=="none"&&ue.hasIconData();if(xe){const Je=Math.pow(2,ce.zoom-me.tileID.overscaledZ);Rd(ue,de,ie,le,o.symbolSize,ce,Ue,se,Je,xe,st)}}}(m,f,c,s,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),v),c.paint.get("icon-opacity").constantOr(1)!==0&&uo(f,s,c,m,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),w,M),c.paint.get("text-opacity").constantOr(1)!==0&&uo(f,s,c,m,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),w,M),s.map.showCollisionBoxes&&(co(f,s,c,m,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),co(f,s,c,m,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(f,s,c,m){if(f.renderPass!=="translucent")return;const v=c.paint.get("circle-opacity"),w=c.paint.get("circle-stroke-width"),M=c.paint.get("circle-stroke-opacity"),k=c.layout.get("circle-sort-key").constantOr(1)!==void 0;if(v.constantOr(1)===0&&(w.constantOr(1)===0||M.constantOr(1)===0))return;const L=f.context,j=L.gl,N=f.transform,W=f.depthModeForSublayer(0,o.DepthMode.ReadOnly),ee=o.StencilMode.disabled,le=f.colorModeForRenderPass(),ce=N.projection.name==="globe",de=[o.mercatorXfromLng(N.center.lng),o.mercatorYfromLat(N.center.lat)],ie=[];for(let me=0;me<m.length;me++){const ue=m[me],xe=s.getTile(ue),De=xe.getBucket(c);if(!De||De.projection.name!==N.projection.name)continue;const we=De.programConfigurations.get(c.id),Ue=Fu(c);ce&&Ue.push("PROJECTION_GLOBE_VIEW");const st=f.useProgram("circle",we,Ue),Je=De.layoutVertexBuffer,Ge=De.globeExtVertexBuffer,It=De.indexBuffer,Ke=N.projection.createInversionMatrix(N,ue.canonical),vt={programConfiguration:we,program:st,layoutVertexBuffer:Je,globeExtVertexBuffer:Ge,indexBuffer:It,uniformValues:ec(f,ue,xe,Ke,de,c),tile:xe};if(k){const lt=De.segments.get();for(const Bt of lt)ie.push({segments:new o.SegmentVector([Bt]),sortKey:Bt.sortKey,state:vt})}else ie.push({segments:De.segments,sortKey:0,state:vt})}k&&ie.sort((me,ue)=>me.sortKey-ue.sortKey);const se={useDepthForOcclusion:!ce};for(const me of ie){const{programConfiguration:ue,program:xe,layoutVertexBuffer:De,globeExtVertexBuffer:we,indexBuffer:Ue,uniformValues:st,tile:Je}=me.state,Ge=me.segments;f.terrain&&f.terrain.setupElevationDraw(Je,xe,se),f.prepareDrawProgram(L,xe,Je.tileID.toUnwrapped()),xe.draw(L,j.TRIANGLES,W,ee,le,o.CullFaceMode.disabled,st,c.id,De,Ue,Ge,c.paint,N.zoom,ue,[we])}},heatmap:function(f,s,c,m){if(c.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const v=f.context,w=v.gl,M=o.StencilMode.disabled,k=new o.ColorMode([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(le,ce,de,ie){const se=le.gl,me=ce.width*ie,ue=ce.height*ie;le.activeTexture.set(se.TEXTURE1),le.viewport.set([0,0,me,ue]);let xe=de.heatmapFbo;if(!xe||xe&&(xe.width!==me||xe.height!==ue)){xe&&xe.destroy();const De=se.createTexture();se.bindTexture(se.TEXTURE_2D,De),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_S,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_T,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MIN_FILTER,se.LINEAR),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MAG_FILTER,se.LINEAR),xe=de.heatmapFbo=le.createFramebuffer(me,ue,!1),function(we,Ue,st,Je,Ge,It){const Ke=we.gl;Ke.texImage2D(Ke.TEXTURE_2D,0,Ke.RGBA,Ge,It,0,Ke.RGBA,we.extRenderToTextureHalfFloat?we.extTextureHalfFloat.HALF_FLOAT_OES:Ke.UNSIGNED_BYTE,null),Je.colorAttachment.set(st)}(le,0,De,xe,me,ue)}else se.bindTexture(se.TEXTURE_2D,xe.colorAttachment.get()),le.bindFramebuffer.set(xe.framebuffer)})(v,f,c,f.transform.projection.name==="globe"?.5:.25),v.clear({color:o.Color.transparent});const L=f.transform,j=L.projection.name==="globe",N=j?["PROJECTION_GLOBE_VIEW"]:null,W=j?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,ee=[o.mercatorXfromLng(L.center.lng),o.mercatorYfromLat(L.center.lat)];for(let le=0;le<m.length;le++){const ce=m[le];if(s.hasRenderableParent(ce))continue;const de=s.getTile(ce),ie=de.getBucket(c);if(!ie||ie.projection.name!==L.projection.name)continue;const se=ie.programConfigurations.get(c.id),me=f.useProgram("heatmap",se,N),{zoom:ue}=f.transform;f.terrain&&f.terrain.setupElevationDraw(de,me),f.prepareDrawProgram(v,me,ce.toUnwrapped());const xe=L.projection.createInversionMatrix(L,ce.canonical);me.draw(v,w.TRIANGLES,o.DepthMode.disabled,M,k,W,wl(f,ce,de,xe,ee,ue,c.paint.get("heatmap-intensity")),c.id,ie.layoutVertexBuffer,ie.indexBuffer,ie.segments,c.paint,f.transform.zoom,se,j?[ie.globeExtVertexBuffer]:null)}v.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(v,w){const M=v.context,k=M.gl,L=w.heatmapFbo;if(!L)return;M.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,L.colorAttachment.get()),M.activeTexture.set(k.TEXTURE1);let j=w.colorRampTexture;j||(j=w.colorRampTexture=new o.Texture(M,w.colorRamp,k.RGBA)),j.bind(k.LINEAR,k.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(M,k.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,v.colorModeForRenderPass(),o.CullFaceMode.disabled,((N,W,ee,le)=>({u_image:0,u_color_ramp:1,u_opacity:W.paint.get("heatmap-opacity")}))(0,w),w.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,w.paint,v.transform.zoom)}(f,c))},line:function(f,s,c,m){if(f.renderPass!=="translucent")return;const v=c.paint.get("line-opacity"),w=c.paint.get("line-width");if(v.constantOr(1)===0||w.constantOr(1)===0)return;const M=f.depthModeForSublayer(0,o.DepthMode.ReadOnly),k=f.colorModeForRenderPass(),L=f.terrain&&f.terrain.renderingToTexture?1:o.exported.devicePixelRatio,j=c.paint.get("line-dasharray"),N=j.constantOr(1),W=c.layout.get("line-cap"),ee=c.paint.get("line-pattern"),le=ee.constantOr(1),ce=c.paint.get("line-gradient"),de=le?"linePattern":"line",ie=f.context,se=ie.gl,me=(xe=>{const De=[];su(xe)&&De.push("RENDER_LINE_DASH"),xe.paint.get("line-gradient")&&De.push("RENDER_LINE_GRADIENT");const we=xe.paint.get("line-trim-offset");we[0]===0&&we[1]===0||De.push("RENDER_LINE_TRIM_OFFSET");const Ue=xe.paint.get("line-pattern").constantOr(1),st=xe.paint.get("line-opacity").constantOr(1)!==1;return!Ue&&st&&De.push("RENDER_LINE_ALPHA_DISCARD"),De})(c);let ue=me.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(ue=!1);for(const xe of m){const De=s.getTile(xe);if(le&&!De.patternsLoaded())continue;const we=De.getBucket(c);if(!we)continue;f.prepareDrawTile();const Ue=we.programConfigurations.get(c.id),st=f.useProgram(de,Ue,me),Je=ee.constantOr(null);if(Je&&De.imageAtlas){const Mt=De.imageAtlas.patternPositions[Je.toString()];Mt&&Ue.setConstantPatternPositions(Mt)}const Ge=j.constantOr(null),It=W.constantOr(null);if(!le&&Ge&&It&&De.lineAtlas){const Mt=De.lineAtlas.getDash(Ge,It);Mt&&Ue.setConstantPatternPositions(Mt)}let[Ke,vt]=c.paint.get("line-trim-offset");(It==="round"||It==="square")&&Ke!==vt&&(Ke===0&&(Ke-=1),vt===1&&(vt+=1));const lt=f.terrain?xe.projMatrix:null,Bt=le?oa(f,De,c,lt,L):Nu(f,De,c,lt,we.lineClipsArray.length,L,[Ke,vt]);if(ce){const Mt=we.gradients[c.id];let jt=Mt.texture;if(c.gradientVersion!==Mt.version){let Ze=256;if(c.stepInterpolant){const at=s.getSource().maxzoom,mi=xe.canonical.z===at?Math.ceil(1<<f.transform.maxZoom-xe.canonical.z):1;Ze=o.clamp(o.nextPowerOfTwo(we.maxLineLength/o.EXTENT*1024*mi),256,ie.maxTextureSize)}Mt.gradient=o.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:Ze,image:Mt.gradient||void 0,clips:we.lineClipsArray}),Mt.texture?Mt.texture.update(Mt.gradient):Mt.texture=new o.Texture(ie,Mt.gradient,se.RGBA),Mt.version=c.gradientVersion,jt=Mt.texture}ie.activeTexture.set(se.TEXTURE1),jt.bind(c.stepInterpolant?se.NEAREST:se.LINEAR,se.CLAMP_TO_EDGE)}N&&(ie.activeTexture.set(se.TEXTURE0),De.lineAtlasTexture.bind(se.LINEAR,se.REPEAT),Ue.updatePaintBuffers()),le&&(ie.activeTexture.set(se.TEXTURE0),De.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),Ue.updatePaintBuffers()),f.prepareDrawProgram(ie,st,xe.toUnwrapped());const ut=Mt=>{st.draw(ie,se.TRIANGLES,M,Mt,k,o.CullFaceMode.disabled,Bt,c.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,c.paint,f.transform.zoom,Ue,[we.layoutVertexBuffer2])};if(ue){const Mt=f.stencilModeForClipping(xe).ref;Mt===0&&f.terrain&&ie.clear({stencil:0});const jt={func:se.EQUAL,mask:255};Bt.u_alpha_discard_threshold=.8,ut(new o.StencilMode(jt,Mt,255,se.KEEP,se.KEEP,se.INVERT)),Bt.u_alpha_discard_threshold=0,ut(new o.StencilMode(jt,Mt,255,se.KEEP,se.KEEP,se.KEEP))}else ut(f.stencilModeForClipping(xe))}ue&&(f.resetStencilClippingMasks(),f.terrain&&ie.clear({stencil:0}))},fill:function(f,s,c,m){const v=c.paint.get("fill-color"),w=c.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const M=f.colorModeForRenderPass(),k=c.paint.get("fill-pattern"),L=f.opaquePassEnabledForLayer()&&!k.constantOr(1)&&v.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===L){const j=f.depthModeForSublayer(1,f.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);St(f,s,c,m,j,M,!1)}if(f.renderPass==="translucent"&&c.paint.get("fill-antialias")){const j=f.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);St(f,s,c,m,j,M,!0)}},"fill-extrusion":function(f,s,c,m){const v=c.paint.get("fill-extrusion-opacity");if(v!==0&&f.renderPass==="translucent"){const w=new o.DepthMode(f.context.gl.LEQUAL,o.DepthMode.ReadWrite,f.depthRangeFor3D);if(v!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))_t(f,s,c,m,w,o.StencilMode.disabled,o.ColorMode.disabled),_t(f,s,c,m,w,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const M=f.colorModeForRenderPass();_t(f,s,c,m,w,o.StencilMode.disabled,M)}}},hillshade:function(f,s,c,m){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const v=f.context,w=f.depthModeForSublayer(0,o.DepthMode.ReadOnly),M=f.colorModeForRenderPass(),k=f.terrain&&f.terrain.renderingToTexture,[L,j]=f.renderPass!=="translucent"||k?[{},m]:f.stencilConfigForOverlap(m);for(const N of j){const W=s.getTile(N);if(W.needsHillshadePrepare&&f.renderPass==="offscreen")gn(f,W,c,w,o.StencilMode.disabled,M);else if(f.renderPass==="translucent"){const ee=k&&f.terrain?f.terrain.stencilModeForRTTOverlap(N):L[N.overscaledZ];Mr(f,N,W,c,w,ee,M)}}v.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,s,c,m,v,w){if(f.renderPass!=="translucent"||c.paint.get("raster-opacity")===0||!m.length)return;const M=f.context,k=M.gl,L=s.getSource(),j=f.useProgram("raster"),N=f.colorModeForRenderPass(),W=f.terrain&&f.terrain.renderingToTexture,[ee,le]=L instanceof Oe||W?[{},m]:f.stencilConfigForOverlap(m),ce=le[le.length-1].overscaledZ,de=!f.options.moving;for(const ie of le){const se=W?o.DepthMode.disabled:f.depthModeForSublayer(ie.overscaledZ-ce,c.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,k.LESS),me=ie.toUnwrapped(),ue=s.getTile(ie);if(W&&(!ue||!ue.hasData()))continue;const xe=W?ie.projMatrix:f.transform.calculateProjMatrix(me,de),De=f.terrain&&W?f.terrain.stencilModeForRTTOverlap(ie):ee[ie.overscaledZ],we=w?0:c.paint.get("raster-fade-duration");ue.registerFadeDuration(we);const Ue=s.findLoadedParent(ie,0),st=lo(ue,Ue,s,f.transform,we);let Je,Ge;f.terrain&&f.terrain.prepareDrawTile();const It=c.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;M.activeTexture.set(k.TEXTURE0),ue.texture.bind(It,k.CLAMP_TO_EDGE),M.activeTexture.set(k.TEXTURE1),Ue?(Ue.texture.bind(It,k.CLAMP_TO_EDGE),Je=Math.pow(2,Ue.tileID.overscaledZ-ue.tileID.overscaledZ),Ge=[ue.tileID.canonical.x*Je%1,ue.tileID.canonical.y*Je%1]):ue.texture.bind(It,k.CLAMP_TO_EDGE);const Ke=nc(xe,Ge||[0,0],Je||1,st,c,L instanceof Oe?L.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(M,j,me),L instanceof Oe)L.boundsBuffer&&L.boundsSegments&&j.draw(M,k.TRIANGLES,se,o.StencilMode.disabled,N,o.CullFaceMode.disabled,Ke,c.id,L.boundsBuffer,f.quadTriangleIndexBuffer,L.boundsSegments);else{const{tileBoundsBuffer:vt,tileBoundsIndexBuffer:lt,tileBoundsSegments:Bt}=f.getTileBoundsBuffers(ue);j.draw(M,k.TRIANGLES,se,De,N,o.CullFaceMode.disabled,Ke,c.id,vt,lt,Bt)}}f.resetStencilClippingMasks()},background:function(f,s,c,m){const v=c.paint.get("background-color"),w=c.paint.get("background-opacity");if(w===0)return;const M=f.context,k=M.gl,L=f.transform,j=L.tileSize,N=c.paint.get("background-pattern");if(f.isPatternMissing(N))return;const W=!N&&v.a===1&&w===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==W)return;const ee=o.StencilMode.disabled,le=f.depthModeForSublayer(0,W==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),ce=f.colorModeForRenderPass(),de=f.useProgram(N?"backgroundPattern":"background");let ie,se=m;se||(ie=f.getBackgroundTiles(),se=Object.values(ie).map(me=>me.tileID)),N&&(M.activeTexture.set(k.TEXTURE0),f.imageManager.bind(f.context));for(const me of se){const ue=me.toUnwrapped(),xe=m?me.projMatrix:f.transform.calculateProjMatrix(ue);f.prepareDrawTile();const De=s?s.getTile(me):ie?ie[me.key]:new o.Tile(me,j,L.zoom,f),we=N?Dn(xe,w,f,N,{tileID:me,tileSize:j}):zh(xe,w,v);f.prepareDrawProgram(M,de,ue);const{tileBoundsBuffer:Ue,tileBoundsIndexBuffer:st,tileBoundsSegments:Je}=f.getTileBoundsBuffers(De);de.draw(M,k.TRIANGLES,le,ee,ce,o.CullFaceMode.disabled,we,c.id,Ue,st,Je)}},sky:function(f,s,c){const m=f.transform,v=m.projection.name==="mercator"||m.projection.name==="globe"?1:o.smoothstep(7,8,m.zoom),w=c.paint.get("sky-opacity")*v;if(w===0)return;const M=f.context,k=c.paint.get("sky-type"),L=new o.DepthMode(M.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),j=f.frameCounter/1e3%1;k==="atmosphere"?f.renderPass==="offscreen"?c.needsSkyboxCapture(f)&&(function(N,W,ee,le){const ce=N.context,de=ce.gl;let ie=W.skyboxFbo;if(!ie){ie=W.skyboxFbo=ce.createFramebuffer(32,32,!1),W.skyboxGeometry=new pt(ce),W.skyboxTexture=ce.gl.createTexture(),de.bindTexture(de.TEXTURE_CUBE_MAP,W.skyboxTexture),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_S,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_T,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MAG_FILTER,de.LINEAR);for(let xe=0;xe<6;++xe)de.texImage2D(de.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,de.RGBA,32,32,0,de.RGBA,de.UNSIGNED_BYTE,null)}ce.bindFramebuffer.set(ie.framebuffer),ce.viewport.set([0,0,32,32]);const se=W.getCenter(N,!0),me=N.useProgram("skyboxCapture"),ue=new Float64Array(16);o.identity(ue),o.rotateY(ue,ue,.5*-Math.PI),$t(ce,W,me,ue,se,0),o.identity(ue),o.rotateY(ue,ue,.5*Math.PI),$t(ce,W,me,ue,se,1),o.identity(ue),o.rotateX(ue,ue,.5*-Math.PI),$t(ce,W,me,ue,se,2),o.identity(ue),o.rotateX(ue,ue,.5*Math.PI),$t(ce,W,me,ue,se,3),o.identity(ue),$t(ce,W,me,ue,se,4),o.identity(ue),o.rotateY(ue,ue,Math.PI),$t(ce,W,me,ue,se,5),ce.viewport.set([0,0,N.width,N.height])}(f,c),c.markSkyboxValid(f)):f.renderPass==="sky"&&function(N,W,ee,le,ce){const de=N.context,ie=de.gl,se=N.transform,me=N.useProgram("skybox");de.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_CUBE_MAP,W.skyboxTexture);const ue=((xe,De,we,Ue,st)=>({u_matrix:xe,u_sun_direction:De,u_cubemap:0,u_opacity:Ue,u_temporal_offset:st}))(se.skyboxMatrix,W.getCenter(N,!1),0,le,ce);N.prepareDrawProgram(de,me),me.draw(de,ie.TRIANGLES,ee,o.StencilMode.disabled,N.colorModeForRenderPass(),o.CullFaceMode.backCW,ue,"skybox",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(f,c,L,w,j):k==="gradient"&&f.renderPass==="sky"&&function(N,W,ee,le,ce){const de=N.context,ie=de.gl,se=N.transform,me=N.useProgram("skyboxGradient");W.skyboxGeometry||(W.skyboxGeometry=new pt(de)),de.activeTexture.set(ie.TEXTURE0);let ue=W.colorRampTexture;ue||(ue=W.colorRampTexture=new o.Texture(de,W.colorRamp,ie.RGBA)),ue.bind(ie.LINEAR,ie.CLAMP_TO_EDGE);const xe=((De,we,Ue,st,Je)=>({u_matrix:De,u_color_ramp:0,u_center_direction:we,u_radius:o.degToRad(Ue),u_opacity:st,u_temporal_offset:Je}))(se.skyboxMatrix,W.getCenter(N,!1),W.paint.get("sky-gradient-radius"),le,ce);N.prepareDrawProgram(de,me),me.draw(de,ie.TRIANGLES,ee,o.StencilMode.disabled,N.colorModeForRenderPass(),o.CullFaceMode.backCW,xe,"skyboxGradient",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(f,c,L,w,j)},debug:function(f,s,c){for(let m=0;m<c.length;m++)ou(f,s,c[m])},custom:function(f,s,c){const m=f.context,v=c.implementation;if(f.transform.projection.unsupportedLayers&&f.transform.projection.unsupportedLayers.includes("custom"))o.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(f.renderPass==="offscreen"){const w=v.prerender;w&&(f.setCustomLayerDefaults(),m.setColorMode(f.colorModeForRenderPass()),w.call(v,m.gl,f.transform.customLayerMatrix()),m.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),m.setColorMode(f.colorModeForRenderPass()),m.setStencilMode(o.StencilMode.disabled);const w=v.renderingMode==="3d"?new o.DepthMode(f.context.gl.LEQUAL,o.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,o.DepthMode.ReadOnly);m.setDepthMode(w),v.render(m.gl,f.transform.customLayerMatrix()),m.setDirty(),f.setBaseState(),m.bindFramebuffer.set(null)}}};class ji{constructor(s,c){this.context=new q(s),this.transform=c,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $o,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(s,c){const m=!!s&&!!s.terrain&&this.transform.projection.supportsTerrain;if(!(m||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Xs(this,s));const v=this._terrain;this.transform.elevation=m?v:null,v.update(s,this.transform,c)}_updateFog(s){const c=s.fog;if(!c||this.transform.projection.name==="globe"||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[m,v]=c.getFovAdjustedRange(this.transform._fov);if(m>v)return void(this.transform.fogCullDistSq=null);const w=m+.78*(v-m);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(s,c){if(this.width=s*o.exported.devicePixelRatio,this.height=c*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style.order)this.style._layers[m].resize()}setup(){const s=this.context,c=new o.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(o.EXTENT,0),c.emplaceBack(0,o.EXTENT),c.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(c,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const m=new o.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(o.EXTENT,0),m.emplaceBack(0,o.EXTENT),m.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=s.createVertexBuffer(m,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const v=new o.StructArrayLayout2i4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(v,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const w=new o.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(o.EXTENT,0,o.EXTENT,0),w.emplaceBack(0,o.EXTENT,0,o.EXTENT),w.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=s.createVertexBuffer(w,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const M=new o.StructArrayLayout3ui6;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(M);const k=new o.StructArrayLayout1ui2;for(const j of[0,1,3,2,0])k.emplaceBack(j);this.debugIndexBuffer=s.createIndexBuffer(k),this.emptyTexture=new o.Texture(s,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),s.gl.RGBA),this.identityMat=o.create();const L=this.context.gl;this.stencilClearMode=new o.StencilMode({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new Ut(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(s){return s._makeTileBoundsBuffers(this.context,this.transform.projection),s._tileBoundsBuffer?{tileBoundsBuffer:s._tileBoundsBuffer,tileBoundsIndexBuffer:s._tileBoundsIndexBuffer,tileBoundsSegments:s._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const s=this.context,c=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(s,c.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,ps(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(s,c,m){if(!c||this.currentStencilSource===c.id||!s.isTileClipped()||!m||m.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const L of m)if(this._tileClippingMaskIDs[L.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=c.id;const v=this.context,w=v.gl;this.nextStencilID+m.length>256&&this.clearStencil(),v.setColorMode(o.ColorMode.disabled),v.setDepthMode(o.DepthMode.disabled);const M=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of m){const L=c.getTile(k),j=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:N,tileBoundsIndexBuffer:W,tileBoundsSegments:ee}=this.getTileBoundsBuffers(L);M.draw(v,w.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:w.ALWAYS,mask:0},j,255,w.KEEP,w.KEEP,w.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,ps(k.projMatrix),"$clipping",N,W,ee)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,c=this.context.gl;return new o.StencilMode({func:c.NOTEQUAL,mask:255},s,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(s){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(s);const c=this.context.gl;return new o.StencilMode({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(s){const c=this.context.gl,m=s.sort((M,k)=>k.overscaledZ-M.overscaledZ),v=m[m.length-1].overscaledZ,w=m[0].overscaledZ-v+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const M={};for(let k=0;k<w;k++)M[k+v]=new o.StencilMode({func:c.GEQUAL,mask:255},k+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=w,[M,m]}return[{[v]:o.StencilMode.disabled},m]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([s.CONSTANT_COLOR,s.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(s,c,m){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new o.DepthMode(m||this.context.gl.LEQUAL,c,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,c){this.style=s,this.options=c,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const m=this.style.order,v=this.style._sourceCaches;for(const L in v){const j=v[L];j.used&&j.prepare(this.context)}const w={},M={},k={};for(const L in v){const j=v[L];w[L]=j.getVisibleCoordinates(),M[L]=w[L].slice().reverse(),k[L]=j.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<m.length;L++)if(this.style._layers[m[L]].is3D()){this.opaquePassCutoff=L;break}if(this.terrain&&(this.terrain.updateTileBinding(k),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),o.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const L of m){const j=this.style._layers[L],N=s._getLayerSourceCache(j);if(!j.hasOffscreenPass()||j.isHidden(this.transform.zoom))continue;const W=N?M[N.id]:void 0;(j.type==="custom"||j.isSky()||W&&W.length)&&this.renderLayer(this,N,j,W)}if(this.depthRangeFor3D=[0,1-(s.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:c.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const L=this.style._layers[m[this.currentLayer]],j=s._getLayerSourceCache(L);if(L.isSky())continue;const N=j?M[j.id]:void 0;this._renderTileClippingMasks(L,j,N),this.renderLayer(this,j,L,N)}if(this.style.fog&&this.transform.projection.supportsFog&&function(L,j){const N=L.context,W=N.gl,ee=L.transform,le=new o.DepthMode(W.LEQUAL,o.DepthMode.ReadOnly,[0,1]),ce=L.useProgram("globeAtmosphere",null,ee.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),de=o.globeToMercatorTransition(ee.zoom),ie=j.properties.get("color").toArray01(),se=j.properties.get("high-color").toArray01(),me=j.properties.get("space-color").toArray01PremultipliedAlpha(),ue=o.identity$1([]);o.rotateY$1(ue,ue,-o.degToRad(ee._center.lng)),o.rotateX$1(ue,ue,o.degToRad(ee._center.lat)),o.rotateZ$1(ue,ue,ee.angle),o.rotateX$1(ue,ue,-ee._pitch);const xe=o.fromQuat(new Float32Array(16),ue),De=o.mapValue(j.properties.get("star-intensity"),0,1,0,.25),we=5e-4,Ue=o.mapValue(j.properties.get("horizon-blend"),0,1,we,.25),st=o.globeUseCustomAntiAliasing(L,N,ee)&&Ue===we?ee.worldSize/(2*Math.PI*1.025)-1:ee.globeRadius,Je=L.frameCounter/1e3%1,Ge=o.length(ee.globeCenterInViewSpace),It=Math.sqrt(Math.pow(Ge,2)-Math.pow(st,2)),Ke=Math.acos(It/Ge),vt=((Bt,ut,Mt,jt,Ze,at,mi,Ei,_i,zi,sn,Mi,ci,Kn)=>({u_frustum_tl:Bt,u_frustum_tr:ut,u_frustum_br:Mt,u_frustum_bl:jt,u_horizon:Ze,u_transition:at,u_fadeout_range:mi,u_color:Ei,u_high_color:_i,u_space_color:zi,u_star_intensity:sn,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Mi,u_horizon_angle:ci,u_rotation_matrix:Kn}))(ee.frustumCorners.TL,ee.frustumCorners.TR,ee.frustumCorners.BR,ee.frustumCorners.BL,ee.frustumCorners.horizon,de,Ue,ie,se,me,De,Je,Ke,xe);L.prepareDrawProgram(N,ce);const lt=L.atmosphereBuffer;lt&&ce.draw(N,W.TRIANGLES,le,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,vt,"skybox",lt.vertexBuffer,lt.indexBuffer,lt.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const L=this.style._layers[m[this.currentLayer]],j=s._getLayerSourceCache(L);L.isSky()&&this.renderLayer(this,j,L,j?M[j.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;){const L=this.style._layers[m[this.currentLayer]],j=s._getLayerSourceCache(L);if(L.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(L)){if(L.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const N=j?(L.type==="symbol"?k:M)[j.id]:void 0;this._renderTileClippingMasks(L,j,j?w[j.id]:void 0),this.renderLayer(this,j,L,N),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let L=null;o.values(this.style._layers).forEach(j=>{const N=s._getLayerSourceCache(j);N&&!j.isHidden(this.transform.zoom)&&(!L||L.getSource().maxzoom<N.getSource().maxzoom)&&(L=N)}),L&&this.options.showTileBoundaries&&Bi.debug(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){const j=L.transform.padding;Js(L,L.transform.height-(j.top||0),3,Qi),Js(L,j.bottom||0,3,On),oe(L,j.left||0,3,Vr),oe(L,L.transform.width-(j.right||0),3,Vn);const N=L.transform.centerPoint;(function(W,ee,le,ce){Ae(W,ee-1,le-10,2,20,ce),Ae(W,ee-10,le-1,20,2,ce)})(L,N.x,L.transform.height-N.y,rc)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}}renderLayer(s,c,m,v){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="sky"||m.type==="custom"||v&&v.length)&&(this.id=m.id,this.gpuTimingStart(m),s.transform.projection.unsupportedLayers&&s.transform.projection.unsupportedLayers.includes(m.type)||Bi[m.type](s,c,m,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let m=this.gpuTimers[s.id];m||(m=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),m.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,m.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const s=this.context.extTimerQuery,c=s.createQueryEXT();this.deferredRenderGpuTimeQueries.push(c),s.beginQueryEXT(s.TIME_ELAPSED_EXT,c)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}collectDeferredRenderGpuQueries(){const s=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],s}queryGpuTimers(s){const c={};for(const m in s){const v=s[m],w=this.context.extTimerQuery,M=w.getQueryObjectEXT(v.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(v.query),c[m]=M}return c}queryGpuTimeDeferredRender(s){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.extTimerQuery;let m=0;for(const v of s)m+=c.getQueryObjectEXT(v,c.QUERY_RESULT_EXT)/1e6,c.deleteQueryEXT(v);return m}translatePosMatrix(s,c,m,v,w){if(!m[0]&&!m[1])return s;const M=w?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(M){const j=Math.sin(M),N=Math.cos(M);m=[m[0]*N-m[1]*j,m[0]*j+m[1]*N]}const k=[w?m[0]:zs(c,m[0],this.transform.zoom),w?m[1]:zs(c,m[1],this.transform.zoom),0],L=new Float32Array(16);return o.translate(L,s,k),L}saveTileTexture(s){const c=this._tileTextures[s.size[0]];c?c.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const c=this._tileTextures[s];return c&&c.length>0?c.pop():null}isPatternMissing(s){return s===null||s!==void 0&&!this.imageManager.getPattern(s.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const s=this.terrain&&this.terrain.renderingToTexture,c=this.terrain&&this.terrain.exaggeration()===0,m=this.style&&this.style.fog,v=[];return this.terrainRenderModeElevated()&&v.push("TERRAIN"),this.transform.projection.name==="globe"&&v.push("GLOBE"),c&&v.push("ZERO_EXAGGERATION"),m&&!s&&m.getOpacity(this.transform.pitch)!==0&&v.push("FOG"),s&&v.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&v.push("OVERDRAW_INSPECTOR"),v}useProgram(s,c,m){this.cache=this.cache||{};const v=m||[],w=this.currentGlobalDefines().concat(v),M=Ao.cacheKey(ht[s],s,w,c);return this.cache[M]||(this.cache[M]=new Ao(this.context,s,ht[s],c,Ks[s],w)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(s,c,m){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const w=v.getOpacity(this.transform.pitch),M=((k,L,j,N,W,ee,le,ce,de,ie,se)=>{const me=k.transform,ue=L.properties.get("color").toArray01();ue[3]=N;const xe=k.frameCounter/1e3%1;return{u_fog_matrix:j?me.calculateFogTileMatrix(j):k.identityMat,u_fog_range:L.getFovAdjustedRange(me._fov),u_fog_color:ue,u_fog_horizon_blend:L.properties.get("horizon-blend"),u_fog_temporal_offset:xe,u_frustum_tl:W,u_frustum_tr:ee,u_frustum_br:le,u_frustum_bl:ce,u_globe_pos:de,u_globe_radius:ie,u_viewport:se,u_globe_transition:o.globeToMercatorTransition(me.zoom),u_is_globe:+(me.projection.name==="globe")}})(this,v,m,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);c.setFogUniformValues(s,M)}}setTileLoadedFlag(s){this.tileLoaded=s}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const s=this.context.gl,c=s.createTexture();return s.bindTexture(s.TEXTURE_2D,c),s.copyTexImage2D(s.TEXTURE_2D,0,s.RGBA,0,0,s.drawingBufferWidth,s.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const s=this.style&&this.style.fog;return!!s&&s.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const s=this._backgroundTiles,c=this._backgroundTiles={},m=this.transform.coveringTiles({tileSize:512});for(const v of m)c[v.key]=s[v.key]||new o.Tile(v,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}}class $i{constructor(s=0,c=0,m=0,v=0){if(isNaN(s)||s<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=c,this.left=m,this.right=v}interpolate(s,c,m){return c.top!=null&&s.top!=null&&(this.top=o.number(s.top,c.top,m)),c.bottom!=null&&s.bottom!=null&&(this.bottom=o.number(s.bottom,c.bottom,m)),c.left!=null&&s.left!=null&&(this.left=o.number(s.left,c.left,m)),c.right!=null&&s.right!=null&&(this.right=o.number(s.right,c.right,m)),this}getCenter(s,c){const m=o.clamp((this.left+s-this.right)/2,0,s),v=o.clamp((this.top+c-this.bottom)/2,0,c);return new o.pointGeometry(m,v)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new $i(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function rn(f,s){const c=o.getColumn(f,3);o.fromQuat(f,s),o.setColumn(f,3,c)}function Sn(f,s){const c=o.identity$1([]);return o.rotateZ$1(c,c,-s),o.rotateX$1(c,c,-f),c}function Fi(f,s){const c=[f[0],f[1],0],m=[s[0],s[1],0];if(o.length(c)>=1e-15){const M=o.normalize([],c);o.scale$2(m,M,o.dot(m,M)),s[0]=m[0],s[1]=m[1]}const v=o.cross([],s,f);if(o.len(v)<1e-15)return null;const w=Math.atan2(-v[1],v[0]);return Sn(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),w)}class Fr{constructor(s,c){this.position=s,this.orientation=c}get position(){return this._position}set position(s){if(s){const c=s instanceof o.MercatorCoordinate?s:new o.MercatorCoordinate(s[0],s[1],s[2]);this._renderWorldCopies&&(c.x=o.wrap(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(s,c){if(this.orientation=null,!this.position)return;const m=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(s)):0,v=this.position,w=o.MercatorCoordinate.fromLngLat(s,m),M=[w.x-v.x,w.y-v.y,w.z-v.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=Fi(M,c)}setPitchBearing(s,c){this.orientation=Sn(o.degToRad(s),o.degToRad(-c))}}class $r{constructor(s,c){this._transform=o.identity([]),this.orientation=c,this.position=s}get mercatorPosition(){const s=this.position;return new o.MercatorCoordinate(s[0],s[1],s[2])}get position(){const s=o.getColumn(this._transform,3);return[s[0],s[1],s[2]]}set position(s){var c;s&&o.setColumn(this._transform,3,[(c=s)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(s){this._orientation=s||o.identity$1([]),s&&rn(this._transform,this._orientation)}getPitchBearing(){const s=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(s[0]*s[0]+s[1]*s[1]),-s[2])}}setPitchBearing(s,c){this._orientation=Sn(s,c),rn(this._transform,this._orientation)}forward(){const s=o.getColumn(this._transform,2);return[-s[0],-s[1],-s[2]]}up(){const s=o.getColumn(this._transform,1);return[-s[0],-s[1],-s[2]]}right(){const s=o.getColumn(this._transform,0);return[s[0],s[1],s[2]]}getCameraToWorld(s,c){const m=new Float64Array(16);return o.invert(m,this.getWorldToCamera(s,c)),m}getWorldToCameraPosition(s,c,m){const v=this.position;o.scale$2(v,v,-s);const w=new Float64Array(16);return o.fromScaling(w,[m,m,m]),o.translate(w,w,v),w[10]*=c,w}getWorldToCamera(s,c){const m=new Float64Array(16),v=new Float64Array(4),w=this.position;return o.conjugate(v,this._orientation),o.scale$2(w,w,-s),o.fromQuat(m,v),o.translate(m,m,w),m[1]*=-1,m[5]*=-1,m[9]*=-1,m[13]*=-1,m[8]*=c,m[9]*=c,m[10]*=c,m[11]*=c,m}getCameraToClipPerspective(s,c,m,v){const w=new Float64Array(16);return o.perspective(w,s,c,m,v),w}getDistanceToElevation(s,c=!1){const m=s===0?0:o.mercatorZfromAltitude(s,c?o.latFromMercatorY(this.position[1]):this.position[1]),v=this.forward();return(m-this.position[2])/v[2]}clone(){return new $r([...this.position],[...this.orientation])}}function Cs(f,s){const c=js(f.projection,f.zoom,f.width,f.height),m=function(w,M,k,L,j){const N=new o.LngLat(k.lng-180*ho,k.lat),W=new o.LngLat(k.lng+180*ho,k.lat),ee=w.project(N.lng,N.lat),le=w.project(W.lng,W.lat),ce=-Math.atan2(le.y-ee.y,le.x-ee.x),de=o.MercatorCoordinate.fromLngLat(k);de.y=o.clamp(de.y,-.999975,.999975);const ie=de.toLngLat(),se=w.project(ie.lng,ie.lat),me=o.MercatorCoordinate.fromLngLat(ie);me.x+=ho;const ue=me.toLngLat(),xe=w.project(ue.lng,ue.lat),De=Sl(xe.x-se.x,xe.y-se.y,ce),we=o.MercatorCoordinate.fromLngLat(ie);we.y+=ho;const Ue=we.toLngLat(),st=w.project(Ue.lng,Ue.lat),Je=Sl(st.x-se.x,st.y-se.y,ce),Ge=Math.abs(De.x)/Math.abs(Je.y),It=o.identity([]);o.rotateZ(It,It,-ce*(1-(j?0:L)));const Ke=o.identity([]);return o.scale(Ke,Ke,[1,1-(1-Ge)*L,1]),Ke[4]=-Je.x/Je.y*L,o.rotateZ(Ke,Ke,ce),o.multiply(Ke,It,Ke),Ke}(f.projection,0,f.center,c,s),v=er(f);return o.scale(m,m,[v,v,1]),m}function er(f){const s=f.projection,c=js(f.projection,f.zoom,f.width,f.height),m=Jr(s,f.center),v=Jr(s,o.LngLat.convert(s.center));return Math.pow(2,m*c+(1-c)*v)}function js(f,s,c,m,v=1/0){const w=f.range;if(!w)return 0;const M=Math.min(v,Math.max(c,m)),k=Math.log(M/1024)/Math.LN2;return o.smoothstep(w[0]+k,w[1]+k,s)}const ho=1/4e4;function Jr(f,s){const c=o.clamp(s.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),m=new o.LngLat(s.lng-180*ho,c),v=new o.LngLat(s.lng+180*ho,c),w=f.project(m.lng,c),M=f.project(v.lng,c),k=o.MercatorCoordinate.fromLngLat(m),L=o.MercatorCoordinate.fromLngLat(v),j=M.x-w.x,N=M.y-w.y,W=L.x-k.x,ee=L.y-k.y,le=Math.sqrt((W*W+ee*ee)/(j*j+N*N));return Math.log(le)/Math.LN2}function Sl(f,s,c){const m=Math.cos(c),v=Math.sin(c);return{x:f*m-s*v,y:f*v+s*m}}class Cl{constructor(s,c,m,v,w,M,k){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=s||0,this._maxZoom=c||22,this._minPitch=m??0,this._maxPitch=v??60,this.setProjection(M),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new $i,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new $r,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const s=new Cl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return s._elevation=this._elevation,s._centerAltitude=this._centerAltitude,s._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,s.tileSize=this.tileSize,s.mercatorFromTransition=this.mercatorFromTransition,s.width=this.width,s.height=this.height,s.cameraElevationReference=this.cameraElevationReference,s._center=this._center,s._setZoom(this.zoom),s._seaLevelZoom=this._seaLevelZoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._nearZ=this._nearZ,s._farZ=this._farZ,s._averageElevation=this._averageElevation,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._camera=this._camera.clone(),s._calcMatrices(),s.freezeTileCoverage=this.freezeTileCoverage,s.frustumCorners=this.frustumCorners,s}get elevation(){return this._elevation}set elevation(s){this._elevation!==s&&(this._elevation=s,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(s,c=!1){const m=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||m)&&this._updateCameraOnTerrain(),(s||m)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(s){this.projectionOptions=s||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const m=!D(c,this.getProjection());return m&&this._calcMatrices(),this.mercatorFromTransition=!1,m}setMercatorFromTransition(){const s=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const c=s!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get cameraWorldSize(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(s){this.rotation=s}get rotation(){return-this.angle/Math.PI*180}set rotation(s){const c=-s*Math.PI/180;var m;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=(m=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(v,w,M){var k=w[0],L=w[1],j=w[2],N=w[3],W=Math.sin(M),ee=Math.cos(M);v[0]=k*ee+j*W,v[1]=L*ee+N*W,v[2]=k*-W+j*ee,v[3]=L*-W+N*ee}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const c=o.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const s=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/s)}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=o.degToRad(s),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(s){this._averageElevation=s,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(s){const c=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(s){this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const s=this._elevation;this._centerAltitude=s.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=s.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const s=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],m=this.horizonLineFromTop();let v=0,w=0;for(let M=0;M<c.length;M++){const k=new o.pointGeometry(c[M][0]*this.width,m+c[M][1]*(this.height-m)),L=s.pointCoordinate(k);if(!L)continue;const j=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);v+=L[3]*j,w+=j}return w===0?NaN:v/w}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const s=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),m=this.pixelsPerMeter/this.worldSize*c,v=this._mercatorZfromZoom(s),w=this._mercatorZfromZoom(this._maxZoom),M=Math.max(v-m,w);this._setZoom(this._zoomFromMercatorZ(M))}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}computeZoomRelativeTo(s){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,s.toAltitude()));let m;m=s.z<this._camera.position[2]?[c.x,c.y,c.z]:[s.x,s.y,s.z];const v=o.length(o.sub([],this._camera.position,m));return o.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(s){if(!this.height||!s.position&&!s.orientation)return;this._updateCameraState();let c=!1;if(s.orientation&&!o.exactEquals(s.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(s.orientation)),s.position){const m=[s.position.x,s.position.y,s.position.z];o.exactEquals$1(m,this._camera.position)||(this._setCameraPosition(m),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const s=this._camera.position,c=new Fr;return c.position=new o.MercatorCoordinate(s[0],s[1],s[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(s){if(!o.length$1(s))return!1;o.normalize$1(s,s);const c=o.transformQuat([],[0,0,-1],s),m=o.transformQuat([],[0,-1,0],s);if(m[2]<0)return!1;const v=Fi(c,m);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(s){const c=this.zoomScale(this.minZoom)*this.tileSize,m=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;s[2]=o.clamp(s[2],v/m,v/c),this._camera.position=s}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,c,m){this._unmodified=!1,this._edgeInsets.interpolate(s,c,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const c=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(s){const c=[new o.UnwrappedTileID(0,s)];if(this.renderWorldCopies){const m=this.pointCoordinate(new o.pointGeometry(0,0)),v=this.pointCoordinate(new o.pointGeometry(this.width,0)),w=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),M=this.pointCoordinate(new o.pointGeometry(0,this.height)),k=Math.floor(Math.min(m.x,v.x,w.x,M.x)),L=Math.floor(Math.max(m.x,v.x,w.x,M.x)),j=1;for(let N=k-j;N<=L+j;N++)N!==0&&c.push(new o.UnwrappedTileID(N,s))}return c}coveringTiles(s){let c=this.coveringZoomLevel(s);const m=c,v=this.elevation&&!s.isTerrainDEM,w=this.projection.name==="mercator";if(s.minzoom!==void 0&&c<s.minzoom)return[];s.maxzoom!==void 0&&c>s.maxzoom&&(c=s.maxzoom);const M=this.locationCoordinate(this.center),k=this.center.lat,L=1<<c,j=[L*M.x,L*M.y,0],N=this.projection.name==="globe",W=!N,ee=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,W),le=N?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ce=L*o.mercatorZfromAltitude(1,this.center.lat),de=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),ie=[L*le.x,L*le.y,de*(W?1:ce)],se=this.cameraToCenterDistance/s.tileSize*(s.roundZoom?1:.502),me=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?c:0,ue=s.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,xe=s.isTerrainDEM?-ue:this._elevation?this._elevation.getMinElevationBelowMSL():0,De=this.projection.isReprojectedInTileSpace?er(this):1,we=ut=>{const jt=new o.MercatorCoordinate(ut.x+25e-6,ut.y,ut.z),Ze=new o.MercatorCoordinate(ut.x,ut.y+25e-6,ut.z),at=ut.toLngLat(),mi=jt.toLngLat(),Ei=Ze.toLngLat(),_i=this.locationCoordinate(at),zi=this.locationCoordinate(mi),sn=this.locationCoordinate(Ei),Mi=Math.hypot(zi.x-_i.x,zi.y-_i.y),ci=Math.hypot(sn.x-_i.x,sn.y-_i.y);return Math.sqrt(Mi*ci)*De/25e-6},Ue=ut=>{const Mt=ue,jt=xe;return{aabb:o.tileAABB(this,L,0,0,0,ut,jt,Mt,this.projection),zoom:0,x:0,y:0,minZ:jt,maxZ:Mt,wrap:ut,fullyVisible:!1}},st=[];let Je=[];const Ge=c,It=s.reparseOverscaled?m:c,Ke=ut=>ut*ut,vt=Ke((de-this._centerAltitude)*ce),lt=ut=>{if(!this._elevation||!ut.tileID||!w)return;const Mt=this._elevation.getMinMaxForTile(ut.tileID),jt=ut.aabb;Mt?(jt.min[2]=Mt.min,jt.max[2]=Mt.max,jt.center[2]=(jt.min[2]+jt.max[2])/2):(ut.shouldSplit=Bt(ut),ut.shouldSplit||(jt.min[2]=jt.max[2]=jt.center[2]=this._centerAltitude))},Bt=ut=>{if(ut.zoom<me)return!0;if(ut.zoom===Ge)return!1;if(ut.shouldSplit!=null)return ut.shouldSplit;const Mt=ut.aabb.distanceX(ie),jt=ut.aabb.distanceY(ie);let Ze=vt,at=1;if(N){Ze=Ke(ut.aabb.distanceZ(ie));const _i=Math.pow(2,ut.zoom),zi=o.latFromMercatorY((ut.y+1)/_i),sn=o.latFromMercatorY(ut.y/_i),Mi=Math.min(Math.max(k,zi),sn),ci=o.circumferenceAtLatitude(Mi)/o.circumferenceAtLatitude(k);if(at=Mi===k?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,ci/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&ut.zoom===Ge-1&&ci>=.9)return!0}else if(v&&(Ze=Ke(ut.aabb.distanceZ(ie)*ce)),this.projection.isReprojectedInTileSpace&&m<=5){const _i=Math.pow(2,ut.zoom),zi=we(new o.MercatorCoordinate((ut.x+.5)/_i,(ut.y+.5)/_i));at=zi>.85?1:zi}const mi=Mt*Mt+jt*jt+Ze,Ei=Ke((1<<Ge-ut.zoom)*se*at*((_i,zi)=>{if(zi*Ke(.707)<_i)return 1;const sn=Math.sqrt(zi/_i);return sn/(1.4144271570014144+(Math.pow(1.1,sn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Ze,vt),mi));return mi<Ei};if(this.renderWorldCopies)for(let ut=1;ut<=3;ut++)st.push(Ue(-ut)),st.push(Ue(ut));for(st.push(Ue(0));st.length>0;){const ut=st.pop(),Mt=ut.x,jt=ut.y;let Ze=ut.fullyVisible;if(!Ze){const at=ut.aabb.intersects(ee);if(at===0)continue;Ze=at===2}if(ut.zoom!==Ge&&Bt(ut))for(let at=0;at<4;at++){const mi=(Mt<<1)+at%2,Ei=(jt<<1)+(at>>1),_i={aabb:w?ut.aabb.quadrant(at):o.tileAABB(this,L,ut.zoom+1,mi,Ei,ut.wrap,ut.minZ,ut.maxZ,this.projection),zoom:ut.zoom+1,x:mi,y:Ei,wrap:ut.wrap,fullyVisible:Ze,tileID:void 0,shouldSplit:void 0,minZ:ut.minZ,maxZ:ut.maxZ};v&&!N&&(_i.tileID=new o.OverscaledTileID(ut.zoom+1===Ge?It:ut.zoom+1,ut.wrap,ut.zoom+1,mi,Ei),lt(_i)),st.push(_i)}else{const at=ut.zoom===Ge?It:ut.zoom;if(s.minzoom&&s.minzoom>at)continue;const mi=j[0]-(.5+Mt+(ut.wrap<<ut.zoom))*(1<<c-ut.zoom),Ei=j[1]-.5-jt,_i=ut.tileID?ut.tileID:new o.OverscaledTileID(at,ut.wrap,ut.zoom,Mt,jt);Je.push({tileID:_i,distanceSq:mi*mi+Ei*Ei})}}if(this.fogCullDistSq){const ut=this.fogCullDistSq,Mt=this.horizonLineFromTop();Je=Je.filter(jt=>{const Ze=[0,0,0,1],at=[o.EXTENT,o.EXTENT,0,1],mi=this.calculateFogTileMatrix(jt.tileID.toUnwrapped());o.transformMat4$1(Ze,Ze,mi),o.transformMat4$1(at,at,mi);const Ei=o.getAABBPointSquareDist(Ze,at);if(Ei===0)return!0;let _i=!1;const zi=this._elevation;if(zi&&Ei>ut&&Mt!==0){const sn=this.calculateProjMatrix(jt.tileID.toUnwrapped());let Mi;s.isTerrainDEM||(Mi=zi.getMinMaxForTile(jt.tileID)),Mi||(Mi={min:xe,max:ue});const ci=o.furthestTileCorner(this.rotation),Kn=[ci[0]*o.EXTENT,ci[1]*o.EXTENT,Mi.max];o.transformMat4(Kn,Kn,sn),_i=(1-Kn[1])*this.height*.5<Mt}return Ei<ut||_i})}return Je.sort((ut,Mt)=>ut.distanceSq-Mt.distanceSq).map(ut=>ut.tileID)}resize(s,c){this.width=s,this.height=c,this.pixelsToGLUnits=[2/s,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const c=o.clamp(s.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),m=this.projection.project(s.lng,c);return new o.pointGeometry(m.x*this.worldSize,m.y*this.worldSize)}unproject(s){return this.projection.unproject(s.x/this.worldSize,s.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(s,c){let m,v;const w=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;m=(c.x-w.x)/k,v=(c.y-w.y)/k}else{const k=this.pointCoordinate(c),L=this.pointCoordinate(w);m=k.x-L.x,v=k.y-L.y}const M=this.locationCoordinate(s);this.setLocation(new o.MercatorCoordinate(M.x-m,M.y-v))}setLocation(s){this.center=this.coordinateLocation(s),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(s){return this.projection.locationPoint(this,s)}locationPoint3D(s){return this.projection.locationPoint(this,s,!0)}pointLocation(s){return this.coordinateLocation(this.pointCoordinate(s))}pointLocation3D(s){return this.coordinateLocation(this.pointCoordinate3D(s))}locationCoordinate(s,c){const m=c?o.mercatorZfromAltitude(c,s.lat):void 0,v=this.projection.project(s.lng,s.lat);return new o.MercatorCoordinate(v.x,v.y,m)}coordinateLocation(s){return this.projection.unproject(s.x,s.y)}pointRayIntersection(s,c){const m=c??this._centerAltitude,v=[s.x,s.y,0,1],w=[s.x,s.y,1,1];o.transformMat4$1(v,v,this.pixelMatrixInverse),o.transformMat4$1(w,w,this.pixelMatrixInverse);const M=w[3];o.scale$1(v,v,1/v[3]),o.scale$1(w,w,1/M);const k=v[2],L=w[2];return{p0:v,p1:w,t:k===L?0:(m-k)/(L-k)}}screenPointToMercatorRay(s){const c=[s.x,s.y,0,1],m=[s.x,s.y,1,1];return o.transformMat4$1(c,c,this.pixelMatrixInverse),o.transformMat4$1(m,m,this.pixelMatrixInverse),o.scale$1(c,c,1/c[3]),o.scale$1(m,m,1/m[3]),c[2]=o.mercatorZfromAltitude(c[2],this._center.lat)*this.worldSize,m[2]=o.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,o.scale$1(c,c,1/this.worldSize),o.scale$1(m,m,1/this.worldSize),new o.Ray([c[0],c[1],c[2]],o.normalize([],o.sub([],m,c)))}rayIntersectionCoordinate(s){const{p0:c,p1:m,t:v}=s,w=o.mercatorZfromAltitude(c[2],this._center.lat),M=o.mercatorZfromAltitude(m[2],this._center.lat);return new o.MercatorCoordinate(o.number(c[0],m[0],v)/this.worldSize,o.number(c[1],m[1],v)/this.worldSize,o.number(w,M,v))}pointCoordinate(s,c=this._centerAltitude){return this.projection.pointCoordinate(this,s.x,s.y,c)}pointCoordinate3D(s){if(!this.elevation)return this.pointCoordinate(s);let c=this.projection.pointCoordinate3D(this,s.x,s.y);if(c)return new o.MercatorCoordinate(c[0],c[1],c[2]);let m=0,v=this.horizonLineFromTop();if(s.y>v)return this.pointCoordinate(s);const w=.02*v,M=s.clone();for(let k=0;k<10&&v-m>w;k++){M.y=o.number(m,v,.66);const L=this.projection.pointCoordinate3D(this,M.x,M.y);L?(v=M.y,c=L):m=M.y}return c?new o.MercatorCoordinate(c[0],c[1],c[2]):this.pointCoordinate(s)}isPointAboveHorizon(s){return this.projection.isPointAboveHorizon(this,s)}_coordinatePoint(s,c){const m=c&&this.elevation?this.elevation.getAtPointOrZero(s,this._centerAltitude):this._centerAltitude,v=[s.x*this.worldSize,s.y*this.worldSize,m+s.toAltitude(),1];return o.transformMat4$1(v,v,this.pixelMatrix),v[3]>0?new o.pointGeometry(v[0]/v[3],v[1]/v[3]):new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getGlobeBounds(){const{top:s,left:c}=this._edgeInsets,m=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,w=this.pointCoordinate3D(new o.pointGeometry(c,s)),M=this.pointCoordinate3D(new o.pointGeometry(v,s)),k=this.pointCoordinate3D(new o.pointGeometry(v,m)),L=this.pointCoordinate3D(new o.pointGeometry(c,m));let j=Math.min(w.x,L.x),N=Math.max(M.x,k.x),W=Math.min(w.y,M.y),ee=Math.max(L.y,k.y);const le=Math.pow(2,-this.zoom)/16,ce=(we,Ue,st,Je)=>{const Ge=(we+st)/2,It=(Ue+Je)/2,Ke=new o.pointGeometry(Ge,It),vt=this.pointCoordinate3D(Ke),lt=Math.max(0,j-vt.x,W-vt.y,vt.x-N,vt.y-ee);j=Math.min(j,vt.x),N=Math.max(N,vt.x),W=Math.min(W,vt.y),ee=Math.max(ee,vt.y),lt>le&&(ce(we,Ue,Ge,It),ce(Ge,It,st,Je))};ce(c,s,v,s),ce(v,s,v,m),ce(v,m,c,m),ce(c,m,c,s);const[de,ie]=o.polesInViewport(this),se=de||ie,me=de?90:o.latFromMercatorY(W),ue=se?180:o.lngFromMercatorX(N),xe=ie?-90:o.latFromMercatorY(ee),De=se?-180:o.lngFromMercatorX(j);return new o.LngLatBounds(new o.LngLat(De,xe),new o.LngLat(ue,me))}_getBounds(s,c){if(this.projection.name==="globe")return this._getGlobeBounds();const m=new o.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),v=new o.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),w=new o.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),M=new o.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let k=this.pointCoordinate(m,s),L=this.pointCoordinate(v,s);const j=this.pointCoordinate(w,c),N=this.pointCoordinate(M,c),W=(ee,le)=>(le.y-ee.y)/(le.x-ee.x);return k.y>1&&L.y>=0?k=new o.MercatorCoordinate((1-N.y)/W(N,k)+N.x,1):k.y<0&&L.y<=1&&(k=new o.MercatorCoordinate(-N.y/W(N,k)+N.x,0)),L.y>1&&k.y>=0?L=new o.MercatorCoordinate((1-j.y)/W(j,L)+j.x,1):L.y<0&&k.y<=1&&(L=new o.MercatorCoordinate(-j.y/W(j,L)+j.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(k)).extend(this.coordinateLocation(L)).extend(this.coordinateLocation(N)).extend(this.coordinateLocation(j))}_getBounds3D(){const s=this.elevation;if(!s.visibleDemTiles.length||s.isUsingMockSource())return this._getBounds(0,0);const c=s.visibleDemTiles.reduce((m,v)=>{if(v.dem){const w=v.dem.tree;m.min=Math.min(m.min,w.minimums[0]),m.max=Math.max(m.max,w.maximums[0])}return m},{min:Number.MAX_VALUE,max:0});return this._getBounds(c.min*s.exaggeration(),c.max*s.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(s=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,m=this.height/2-c*(1-this._horizonShift);return s?Math.max(0,m):m}getMaxBounds(){return this.maxBounds}setMaxBounds(s){this.maxBounds=s,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,s&&(this.minLat=s.getSouth(),this.maxLat=s.getNorth(),this.minLng=s.getWest(),this.maxLng=s.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(s,c){return this.projection.createTileMatrix(this,c,s)}calculateDistanceTileData(s){const c=s.key,m=this._distanceTileDataCache;if(m[c])return m[c];const v=s.canonical,w=1/this.height,M=this.cameraWorldSize,k=M/this.zoomScale(v.z),L=(v.x+Math.pow(2,v.z)*s.wrap)*k,j=v.y*k,N=this.point;N.x*=M/this.worldSize,N.y*=M/this.worldSize;const W=this.angle,ee=Math.sin(-W),le=-Math.cos(-W);return m[c]={bearing:[ee,le],center:[(N.x-L)*w,(N.y-j)*w],scale:k/o.EXTENT*w},m[c]}calculateFogTileMatrix(s){const c=s.key,m=this._fogTileMatrixCache;if(m[c])return m[c];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,s);return o.multiply(v,this.worldToFogMatrix,v),m[c]=new Float32Array(v),m[c]}calculateProjMatrix(s,c=!1){const m=s.key,v=c?this._alignedProjMatrixCache:this._projMatrixCache;if(v[m])return v[m];const w=this.calculatePosMatrix(s,this.worldSize);return o.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:c?this.alignedProjMatrix:this.projMatrix,w),v[m]=new Float32Array(w),v[m]}calculatePixelsToTileUnitsMatrix(s){const c=s.tileID.key,m=this._pixelsToTileUnitsCache;if(m[c])return m[c];const v=function(w,M){const{scale:k}=w.tileTransform,L=k*o.EXTENT/(w.tileSize*Math.pow(2,M.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return j=new Float32Array(4),ee=(N=M.inverseAdjustmentMatrix)[1],le=N[2],ce=N[3],ie=(W=[L,L])[1],j[0]=N[0]*(de=W[0]),j[1]=ee*de,j[2]=le*ie,j[3]=ce*ie,j;var j,N,W,ee,le,ce,de,ie}(s,this);return m[c]=v,m[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const s=this._elevation;this._updateCameraState();const c=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(c),v=this._camera.forward(),w=o.mercatorZfromAltitude(1,this._center.lat);m[2]/=w,v[2]/=w,o.normalize(v,v);const M=s.raycast(m,v,s.exaggeration());if(M){const k=o.scaleAndAdd([],m,v,M),L=new o.MercatorCoordinate(k[0],k[1],o.mercatorZfromAltitude(k[2],o.latFromMercatorY(k[1]))),j=(L.z+o.length([L.x-m[0],L.y-m[1],L.z-m[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(j),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(s=!1){if(!this._elevation)return;const c=this._elevation,m=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(m),w=c.getAtPointOrZero(new o.MercatorCoordinate(...v)),M=this.pixelsPerMeter/this.worldSize*w,k=this._minimumHeightOverTerrain(),L=v[2]-M;if(L<=k)if(L<0||s){const j=this.locationCoordinate(this._center,this._centerAltitude),N=[v[0],v[1],j.z-v[2]],W=o.length(N);N[2]-=(k-L)/this._pixelsPerMercatorPixel;const ee=o.length(N);if(ee===0)return;o.scale$2(N,N,W/ee*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],j.z*this._pixelsPerMercatorPixel-N[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||s){const ee=this.center;return ee.lat=o.clamp(ee.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!s)&&(ee.lng=o.clamp(ee.lng,this.minLng,this.maxLng)),this.center=ee,void(this._constraining=!1)}const c=this._unmodified,{x:m,y:v}=this.point;let w=0,M=m,k=v;const L=this.width/2,j=this.height/2,N=this.worldMinY*this.scale,W=this.worldMaxY*this.scale;if(v-j<N&&(k=N+j),v+j>W&&(k=W-j),W-N<this.height&&(w=Math.max(w,this.height/(W-N)),k=(W+N)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ee=this.worldMinX*this.scale,le=this.worldMaxX*this.scale,ce=this.worldSize/2-(ee+le)/2;M=(m+ce+this.worldSize)%this.worldSize-ce,M-L<ee&&(M=ee+L),M+L>le&&(M=le-L),le-ee<this.width&&(w=Math.max(w,this.width/(le-ee)),M=(le+ee)/2)}M===m&&k===v||(this.center=this.unproject(new o.pointGeometry(M,k))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let s=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(s=Math.max(s,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),s}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,c=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const m=js(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,m),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const v=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?c:1),w=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);w[8]=2*-s.x/this.width,w[9]=2*s.y/this.height;let M=o.mul([],w,v);if(this.projection.isReprojectedInTileSpace){const De=this.locationCoordinate(this.center),we=o.identity([]);o.translate(we,we,[De.x*this.worldSize,De.y*this.worldSize,0]),o.multiply(we,we,Cs(this)),o.translate(we,we,[-De.x*this.worldSize,-De.y*this.worldSize,0]),o.multiply(M,M,we),this.inverseAdjustmentMatrix=function(Ue){const st=Cs(Ue,!0);return bt([],[st[0],st[1],st[4],st[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],M,[this.worldSize,this.worldSize,this.worldSize/c,1]),this.projMatrix=M,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const k=o.invert([],w);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(k,this.horizonLineFromTop(),this.height);const L=new Float32Array(16);o.identity(L),o.scale(L,L,[1,-1,1]),o.rotateX(L,L,this._pitch),o.rotateZ(L,L,this.angle);const j=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),N=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;j[8]=2*-s.x/this.width,j[9]=2*(s.y+N)/this.height,this.skyboxMatrix=o.multiply(L,j,L);const W=this.point,ee=W.x,le=W.y,ce=this.width%2/2,de=this.height%2/2,ie=Math.cos(this.angle),se=Math.sin(this.angle),me=ee-Math.round(ee)+ie*ce+se*de,ue=le-Math.round(le)+ie*de+se*ce,xe=new Float64Array(M);if(o.translate(xe,xe,[me>.5?me-1:me,ue>.5?ue-1:ue,0]),this.alignedProjMatrix=xe,M=o.create(),o.scale(M,M,[this.width/2,-this.height/2,1]),o.translate(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=o.create(),o.scale(M,M,[1,-1,1]),o.translate(M,M,[-1,-1,0]),o.scale(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},M=o.invert(new Float64Array(16),this.pixelMatrix),!M)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=M,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const De=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(De,De,v),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=M;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const s=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,m=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,w=[s,s,c];o.scale$2(w,w,v),o.scale$2(m,m,-1),o.multiply$2(m,m,w);const M=o.create();o.translate(M,M,m),o.scale(M,M,w),this.mercatorFogMatrix=M,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(s,c,v)}_computeCameraPosition(s){const c=(s=s||this.pixelsPerMeter)/this.pixelsPerMeter,m=this._camera.forward(),v=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-s/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-m[0]*w,v.y/this.worldSize-m[1]*w,s/this.worldSize*this._centerAltitude-m[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(s){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),m=this._camera.position[2],v=s[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(w=Math.min((c-m)/v,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,s,w),this._updateStateFromCamera()}_updateStateFromCamera(){const s=this._camera.position,c=this._camera.forward(),{pitch:m,bearing:v}=this._camera.getPitchBearing(),w=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,M=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),k=Math.max((s[2]-w)/Math.cos(m),M),L=this._zoomFromMercatorZ(k);o.scaleAndAdd(s,s,c,k),this._pitch=o.clamp(m,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(v,-Math.PI,Math.PI),this._setZoom(o.clamp(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(s[0],s[1],s[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(s){return Math.pow(2,s)*this.tileSize}_mercatorZfromZoom(s){return this.cameraToCenterDistance/this._worldSizeFromZoom(s)}_minimumHeightOverTerrain(){const s=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(s)}_zoomFromMercatorZ(s){return this.scaleZoom(this.cameraToCenterDistance/(s*this.tileSize))}zoomFromMercatorZAdjusted(s){const c=M=>{const k=this.getCameraToCenterDistance(this.projection,M);return this.scaleZoom(k/(s*this.tileSize))};let m,v=c(this.zoom),w=Math.abs(v-c(v));for(;m!==w;)v=c(v),m=w,w=Math.abs(v-c(v));return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(s,c){const m=Math.min(s.x,c.x),v=Math.max(s.x,c.x),w=Math.min(s.y,c.y),M=Math.max(s.y,c.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new o.pointGeometry(m,w),new o.pointGeometry(v,M),new o.pointGeometry(m,M),new o.pointGeometry(v,w)],L=this.renderWorldCopies?-3:0,j=this.renderWorldCopies?4:1;for(const N of k){const W=this.pointRayIntersection(N);if(W.t<0)return!0;const ee=this.rayIntersectionCoordinate(W);if(ee.x<L||ee.y<0||ee.x>j||ee.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.pointGeometry(0,0),new o.pointGeometry(this.width,this.height))}zoomDeltaToMovement(s,c){const m=o.length(o.sub([],this._camera.position,s)),v=this._zoomFromMercatorZ(m)+c;return m-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const s=function([c,m,v],w){const M=[c,m,v,1];o.transformMat4$1(M,M,w);const k=M[3]=Math.max(M[3],1e-6);return M[0]/=k,M[1]/=k,M[2]/=k,M}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.pointGeometry(s[0],s[1])}{const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,s))}}getCameraToCenterDistance(s,c=this.zoom){const m=js(s,c,this.width,this.height,1024),v=s.pixelSpaceConversion(this.center.lat,this.worldSize,m);return .5/Math.tan(.5*this._fov)*this.height*v}getWorldToCameraMatrix(){const s=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(s,s,this.globeMatrix),s}}function ju(f,s){let c=!1,m=null;const v=()=>{m=null,c&&(f(),m=setTimeout(v,s),c=!1)};return()=>(c=!0,m||v(),m)}class li{constructor(s){this._hashName=s&&encodeURIComponent(s),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ju(this._updateHashUnthrottled.bind(this),300)}addTo(s){return this._map=s,o.window.addEventListener("hashchange",this._onHashChange,!1),s.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const s=this._map;if(!s)return"";const c=aa(s);if(this._hashName){const m=this._hashName;let v=!1;const w=o.window.location.hash.slice(1).split("&").map(M=>{const k=M.split("=")[0];return k===m?(v=!0,`${k}=${c}`):M}).filter(M=>M);return v||w.push(`${m}=${c}`),`#${w.join("&")}`}return`#${c}`}_getCurrentHash(){const s=o.window.location.hash.replace("#","");if(this._hashName){let c;return s.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(c=m)}),(c&&c[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._map;if(!s)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(m=>isNaN(m))){const m=s.dragRotate.isEnabled()&&s.touchZoomRotate.isEnabled()?+(c[3]||0):s.getBearing();return s.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:m,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){const s=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,s)}}function aa(f,s){const c=f.getCenter(),m=Math.round(100*f.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,v),M=Math.round(c.lng*w)/w,k=Math.round(c.lat*w)/w,L=f.getBearing(),j=f.getPitch();let N=s?`/${M}/${k}/${m}`:`${m}/${k}/${M}`;return(L||j)&&(N+="/"+Math.round(10*L)/10),j&&(N+=`/${Math.round(j)}`),N}const sc={linearity:.3,easing:o.bezier(0,0,.3,1)},Vu=o.extend({deceleration:2500,maxSpeed:1400},sc),zd=o.extend({deceleration:20,maxSpeed:1400},sc),au=o.extend({deceleration:1e3,maxSpeed:360},sc),Bh=o.extend({deceleration:1e3,maxSpeed:90},sc);class Bd{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,c=o.exported.now();for(;s.length>0&&c-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)c.zoom+=w.zoomDelta||0,c.bearing+=w.bearingDelta||0,c.pitch+=w.pitchDelta||0,w.panDelta&&c.pan._add(w.panDelta),w.around&&(c.around=w.around),w.pinchAround&&(c.pinchAround=w.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const w=Dr(c.pan.mag(),m,o.extend({},Vu,s||{}));v.offset=c.pan.mult(w.amount/c.pan.mag()),v.center=this._map.transform.center,lu(v,w)}if(c.zoom){const w=Dr(c.zoom,m,zd);v.zoom=this._map.transform.zoom+w.amount,lu(v,w)}if(c.bearing){const w=Dr(c.bearing,m,au);v.bearing=this._map.transform.bearing+o.clamp(w.amount,-179,179),lu(v,w)}if(c.pitch){const w=Dr(c.pitch,m,Bh);v.pitch=this._map.transform.pitch+w.amount,lu(v,w)}if(v.zoom||v.bearing){const w=c.pinchAround===void 0?c.around:c.pinchAround;v.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function lu(f,s){(!f.duration||f.duration<s.duration)&&(f.duration=s.duration,f.easing=s.easing)}function Dr(f,s,c){const{maxSpeed:m,linearity:v,deceleration:w}=c,M=o.clamp(f*v/(s/1e3),-m,m),k=Math.abs(M)/(w*v);return{easing:c.easing,duration:1e3*k,amount:M*(k/2)}}class cr extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,c,m,v={}){const w=Fe(c.getCanvasContainer(),m),M=c.unproject(w);super(s,o.extend({point:w,lngLat:M,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}}class $u extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,c,m){const v=s==="touchend"?m.changedTouches:m.touches,w=z(c.getCanvasContainer(),v),M=w.map(L=>c.unproject(L)),k=w.reduce((L,j,N,W)=>L.add(j.div(W.length)),new o.pointGeometry(0,0));super(s,{points:w,point:k,lngLats:M,lngLat:c.unproject(k),originalEvent:m}),this._defaultPrevented=!1}}class cu extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,c,m){super(s,{originalEvent:m}),this._defaultPrevented=!1}}class op{constructor(s,c){this._map=s,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(s){return this._firePreventable(new cu(s.type,this._map,s))}mousedown(s,c){return this._mousedownPos=c,this._firePreventable(new cr(s.type,this._map,s))}mouseup(s){this._map.fire(new cr(s.type,this._map,s))}preclick(s){const c=o.extend({},s);c.type="preclick",this._map.fire(new cr(c.type,this._map,c))}click(s,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(s),this._map.fire(new cr(s.type,this._map,s)))}dblclick(s){return this._firePreventable(new cr(s.type,this._map,s))}mouseover(s){this._map.fire(new cr(s.type,this._map,s))}mouseout(s){this._map.fire(new cr(s.type,this._map,s))}touchstart(s){return this._firePreventable(new $u(s.type,this._map,s))}touchmove(s){this._map.fire(new $u(s.type,this._map,s))}touchend(s){this._map.fire(new $u(s.type,this._map,s))}touchcancel(s){this._map.fire(new $u(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class q0{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(s){this._map.fire(new cr(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new cr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._map.fire(new cr(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fd{constructor(s,c){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,c){this.isEnabled()&&s.shiftKey&&s.button===0&&(ke(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(s,c){if(!this._active)return;const m=c,v=this._startPos,w=this._lastPos;if(!v||!w||w.equals(m)||!this._box&&m.dist(v)<this._clickTolerance)return;this._lastPos=m,this._box||(this._box=he("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const M=Math.min(v.x,m.x),k=Math.max(v.x,m.x),L=Math.min(v.y,m.y),j=Math.max(v.y,m.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${L}px)`,this._box.style.width=k-M+"px",this._box.style.height=j-L+"px")})}mouseupWindow(s,c){if(!this._active)return;const m=this._startPos,v=c;if(m&&s.button===0){if(this.reset(),Et(),m.x!==v.x||m.y!==v.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:w=>w.fitScreenCoordinates(m,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",s)}}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Le(),delete this._startPos,delete this._lastPos}_fireEvent(s,c){return this._map.fire(new o.Event(s,{originalEvent:c}))}}function Ha(f,s){const c={};for(let m=0;m<f.length;m++)c[f[m].identifier]=s[m];return c}class Gu{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(s,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=s.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const w=new o.pointGeometry(0,0);for(const M of v)w._add(M);return w.div(v.length)}(c),this.touches=Ha(m,c)))}touchmove(s,c,m){if(this.aborted||!this.centroid)return;const v=Ha(m,c);for(const w in this.touches){const M=this.touches[w],k=v[w];(!k||k.dist(M)>30)&&(this.aborted=!0)}}touchend(s,c,m){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Ml{constructor(s){this.singleTap=new Gu(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(s,c,m){this.singleTap.touchstart(s,c,m)}touchmove(s,c,m){this.singleTap.touchmove(s,c,m)}touchend(s,c,m){const v=this.singleTap.touchend(s,c,m);if(v){const w=s.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(v)<30;if(w&&M||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class uu{constructor(){this._zoomIn=new Ml({numTouches:1,numTaps:2}),this._zoomOut=new Ml({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,c,m){this._zoomIn.touchstart(s,c,m),this._zoomOut.touchstart(s,c,m)}touchmove(s,c,m){this._zoomIn.touchmove(s,c,m),this._zoomOut.touchmove(s,c,m)}touchend(s,c,m){const v=this._zoomIn.touchend(s,c,m),w=this._zoomOut.touchend(s,c,m);return v?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(v)},{originalEvent:s})}):w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(w)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const oc={0:1,2:2};class ac{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(s,c){return!1}_move(s,c){return{}}mousedown(s,c){if(this._lastPoint)return;const m=Lt(s);this._correctButton(s,m)&&(this._lastPoint=c,this._eventButton=m)}mousemoveWindow(s,c){const m=this._lastPoint;if(m){if(s.preventDefault(),this._eventButton!=null&&function(v,w){const M=oc[w];return v.buttons===void 0||(v.buttons&M)!==M}(s,this._eventButton))this.reset();else if(this._moved||!(c.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(m,c)}}mouseupWindow(s){this._lastPoint&&Lt(s)===this._eventButton&&(this._moved&&Et(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lc extends ac{mousedown(s,c){super.mousedown(s,c),this._lastPoint&&(this._active=!0)}_correctButton(s,c){return c===0&&!s.ctrlKey}_move(s,c){return{around:c,panDelta:c.sub(s)}}}class Fh extends ac{_correctButton(s,c){return c===0&&s.ctrlKey||c===2}_move(s,c){const m=.8*(c.x-s.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(s){s.preventDefault()}}class Nh extends ac{_correctButton(s,c){return c===0&&s.ctrlKey||c===2}_move(s,c){const m=-.5*(c.y-s.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(s){s.preventDefault()}}class ap{constructor(s,c){this._map=s,this._el=s.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0)}touchstart(s,c,m){return this._calculateTransform(s,c,m)}touchmove(s,c,m){if(this._active&&!(m.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(m.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return s.cancelable&&s.preventDefault(),this._calculateTransform(s,c,m)}}touchend(s,c,m){this._calculateTransform(s,c,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,c,m){m.length>0&&(this._active=!0);const v=Ha(m,c),w=new o.pointGeometry(0,0),M=new o.pointGeometry(0,0);let k=0;for(const j in v){const N=v[j],W=this._touches[j];W&&(w._add(N),M._add(N.sub(W)),k++,v[j]=N)}if(this._touches=v,k<this._minTouches||!M.mag())return;const L=M.div(k);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(k),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=he("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Nd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(s){}_move(s,c,m){return{}}touchstart(s,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(s,c,m){const v=this._firstTwoTouches;if(!v)return;s.preventDefault();const[w,M]=v,k=Al(m,c,w),L=Al(m,c,M);if(!k||!L)return;const j=this._aroundCenter?null:k.add(L).div(2);return this._move([k,L],j,s)}touchend(s,c,m){if(!this._firstTwoTouches)return;const[v,w]=this._firstTwoTouches,M=Al(m,c,v),k=Al(m,c,w);M&&k||(this._active&&Et(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Al(f,s,c){for(let m=0;m<f.length;m++)if(f[m].identifier===c)return s[m]}function du(f,s){return Math.log(f/s)/Math.LN2}class hu extends Nd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,c){const m=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(du(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:du(this._distance,m),pinchAround:c}}}function Uh(f,s){return 180*f.angleWith(s)/Math.PI}class re extends Nd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,c){const m=this._vector;if(this._vector=s[0].sub(s[1]),m&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Uh(this._vector,m),pinchAround:c}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const c=25/(Math.PI*this._minDiameter)*360,m=this._startVector;if(!m)return!1;const v=Uh(s,m);return Math.abs(v)<c}}function Il(f){return Math.abs(f.y)>Math.abs(f.x)}class qu extends Nd{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(s){this._lastPoints=s,Il(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,c,m){const v=this._lastPoints;if(!v)return;const w=s[0].sub(v[0]),M=s[1].sub(v[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&m.touches.length<3||(this._valid=this.gestureBeginsVertically(w,M,m.timeStamp),!this._valid)?void 0:(this._lastPoints=s,this._active=!0,{pitchDelta:(w.y+M.y)/2*-.5})}gestureBeginsVertically(s,c,m){if(this._valid!==void 0)return this._valid;const v=s.mag()>=2,w=c.mag()>=2;if(!v&&!w)return;if(!v||!w)return this._firstMove==null&&(this._firstMove=m),m-this._firstMove<100&&void 0;const M=s.y>0==c.y>0;return Il(s)&&Il(c)&&M}}const qo={panStep:100,bearingStep:15,pitchStep:10};class Wi{constructor(){const s=qo;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let c=0,m=0,v=0,w=0,M=0;switch(s.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:s.shiftKey?m=-1:(s.preventDefault(),w=-1);break;case 39:s.shiftKey?m=1:(s.preventDefault(),w=1);break;case 38:s.shiftKey?v=1:(s.preventDefault(),M=-1);break;case 40:s.shiftKey?v=-1:(s.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:k=>{const L=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:W0,zoom:c?Math.round(L)+c*(s.shiftKey?2:1):L,bearing:k.getBearing()+m*this._bearingStep,pitch:k.getPitch()+v*this._pitchStep,offset:[-w*this._panStep,-M*this._panStep],center:k.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function W0(f){return f*(2-f)}const jh=4.000244140625;class H0{constructor(s,c){this._map=s,this._el=s.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(s.ctrlKey||s.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=s.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const m=o.exported.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%jh==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),s.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=s,this._delta-=c,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Fe(this._el,s);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;this._type==="wheel"&&s.projection.wrap&&(s._center.lng>=180||s._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>s._terrainEnabled()&&this._aroundCoord?s.computeZoomRelativeTo(this._aroundCoord):s.zoom;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>jh?this._wheelZoomRate:this._defaultZoomRate;let j=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&j!==0&&(j=1/j);const N=c(),W=Math.pow(2,N),ee=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):W;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(ee*j))),this._type==="wheel"&&(this._startZoom=N,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:c(),v=this._startZoom,w=this._easing;let M,k=!1;if(this._type==="wheel"&&v&&w){const L=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),j=w(L);M=o.number(v,m,j),L<1?this._frameId||(this._frameId=!0):k=!0}else M=m,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:M-c(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let c=o.ease;if(this._prevEase){const m=this._prevEase,v=(o.exported.now()-m.start)/m.duration,w=m.easing(v+.01)-m.easing(v),M=.27/Math.sqrt(w*w+1e-4)*.01,k=Math.sqrt(.0729-M*M);c=o.bezier(M,k,.25,1)}return this._prevEase={start:o.exported.now(),duration:s,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=he("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Rc{constructor(s,c){this._clickZoom=s,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kl{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(s,c){return s.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(s.shiftKey?-1:1),around:m.unproject(c)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lp{constructor(){this._tap=new Ml({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(s,c,m){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=c[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(s,c,m))}touchmove(s,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],w=v.y-this._swipePoint.y;return this._swipePoint=v,s.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(s,c,m)}touchend(s,c,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(s,c,m)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fu{constructor(s,c,m){this._el=s,this._mousePan=c,this._touchPan=m}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Za{constructor(s,c,m){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=c,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ud{constructor(s,c,m,v){this._el=s,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ni=f=>f.zoom||f.drag||f.pitch||f.rotate;class cp extends o.Event{}class up{constructor(){this.constants=[1,1,.01],this.radius=0}setup(s,c){const m=o.sub([],c,s);this.radius=o.length(m[2]<0?o.div([],m,this.constants):[m[0],m[1],0])}projectRay(s){o.div(s,s,this.constants),o.normalize(s,s),o.mul$1(s,s,this.constants);const c=o.scale$2([],s,this.radius);if(c[2]>0){const m=o.scale$2([],[0,0,1],o.dot(c,[0,0,1])),v=o.scale$2([],o.normalize([],[c[0],c[1],0]),this.radius),w=o.add([],c,o.scale$2([],o.sub([],o.add([],v,m),c),2));c[0]=w[0],c[1]=w[1]}return c}}function lc(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class Wu{constructor(s,c){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Bd(s),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new up,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),o.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[v,w,M]of this._listeners)v.addEventListener(w,v===o.window.document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[s,c,m]of this._listeners)s.removeEventListener(c,s===o.window.document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(s){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new op(c,s));const v=c.boxZoom=new Fd(c,s);this._add("boxZoom",v);const w=new uu,M=new kl;c.doubleClickZoom=new Rc(M,w),this._add("tapZoom",w),this._add("clickZoom",M);const k=new lp;this._add("tapDragZoom",k);const L=c.touchPitch=new qu(c);this._add("touchPitch",L);const j=new Fh(s),N=new Nh(s);c.dragRotate=new Za(s,j,N),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);const W=new Lc(s),ee=new ap(c,s);c.dragPan=new fu(m,W,ee),this._add("mousePan",W),this._add("touchPan",ee,["touchZoom","touchRotate"]);const le=new re,ce=new hu;c.touchZoomRotate=new Ud(m,ce,le,k),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),this._add("blockableMapEvent",new q0(c));const de=c.scrollZoom=new H0(c,this);this._add("scrollZoom",de,["mousePan"]);const ie=c.keyboard=new Wi;this._add("keyboard",ie);for(const se of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[se]&&c[se].enable(s[se])}_add(s,c,m){this._handlers.push({handlerName:s,handler:c,allowed:m}),this._handlersById[s]=c}stop(s){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ni(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(s,c,m){for(const v in s)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const c=[];for(const m of s)this._el.contains(m.target)&&c.push(m);return c}handleEvent(s,c){this._updatingCamera=!0;const m=s.type==="renderFrame",v=m?void 0:s,w={needsRenderFrame:!1},M={},k={},L=s.touches?this._getMapTouches(s.touches):void 0,j=L?z(this._el,L):m?void 0:Fe(this._el,s);for(const{handlerName:ee,handler:le,allowed:ce}of this._handlers){if(!le.isEnabled())continue;let de;this._blockedByActive(k,ce,ee)?le.reset():le[c||s.type]&&(de=le[c||s.type](s,j,L),this.mergeHandlerResult(w,M,de,ee,v),de&&de.needsRenderFrame&&this._triggerRenderFrame()),(de||le.isActive())&&(k[ee]=le)}const N={};for(const ee in this._previousActiveHandlers)k[ee]||(N[ee]=v);this._previousActiveHandlers=k,(Object.keys(N).length||lc(w))&&(this._changes.push([w,M,N]),this._triggerRenderFrame()),(Object.keys(k).length||lc(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=w;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))}mergeHandlerResult(s,c,m,v,w){if(!m)return;o.extend(s,m);const M={handlerName:v,originalEvent:m.originalEvent||w};m.zoomDelta!==void 0&&(c.zoom=M),m.panDelta!==void 0&&(c.drag=M),m.pitchDelta!==void 0&&(c.pitch=M),m.bearingDelta!==void 0&&(c.rotate=M)}_applyChanges(){const s={},c={},m={};for(const[v,w,M]of this._changes)v.panDelta&&(s.panDelta=(s.panDelta||new o.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(s.around=v.around),v.aroundCoord!==void 0&&(s.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(s.pinchAround=v.pinchAround),v.noInertia&&(s.noInertia=v.noInertia),o.extend(c,w),o.extend(m,M);this._updateMapTransform(s,c,m),this._changes=[]}_updateMapTransform(s,c,m){const v=this._map,w=v.transform,M=me=>[me.x,me.y,me.z];if((me=>{const ue=this._eventsInProgress.drag;return ue&&!this._handlersById[ue.handlerName].isActive()})()&&!lc(s)){const me=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",me!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&v._stop(!0),!lc(s))return void this._fireEvents(c,m,!0);let{panDelta:k,zoomDelta:L,bearingDelta:j,pitchDelta:N,around:W,aroundCoord:ee,pinchAround:le}=s;w._isCameraConstrained&&(L>0&&(L=0),w._isCameraConstrained=!1),le!==void 0&&(W=le),(me=>c.drag&&!this._eventsInProgress.drag)()&&W&&(this._dragOrigin=M(w.pointCoordinate3D(W)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",v._stop(!0),W=W||v.transform.centerPoint,j&&(w.bearing+=j),N&&(w.pitch+=N),w._updateCameraState();const ce=[0,0,0];if(k)if(w.projection.name==="mercator"){const me=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W).dir),ue=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W.sub(k)).dir);ce[0]=ue[0]-me[0],ce[1]=ue[1]-me[1]}else{const me=w.pointCoordinate(W);if(w.projection.name==="globe"){k=k.rotate(-w.angle);const ue=w._pixelsPerMercatorPixel/w.worldSize;ce[0]=-k.x*o.mercatorScale(o.latFromMercatorY(me.y))*ue,ce[1]=-k.y*o.mercatorScale(w.center.lat)*ue}else{const ue=w.pointCoordinate(W.sub(k));me&&ue&&(ce[0]=ue.x-me.x,ce[1]=ue.y-me.y)}}const de=w.zoom,ie=[0,0,0];if(L){const me=M(ee||w.pointCoordinate3D(W)),ue={dir:o.normalize([],o.sub([],me,w._camera.position))};if(ue.dir[2]<0){const xe=w.zoomDeltaToMovement(me,L);o.scale$2(ie,ue.dir,xe)}}const se=o.add(ce,ce,ie);w._translateCameraConstrained(se),L&&Math.abs(w.zoom-de)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(c,m,!0)}_fireEvents(s,c,m){const v=ni(this._eventsInProgress),w=ni(s),M={};for(const N in s){const{originalEvent:W}=s[N];this._eventsInProgress[N]||(M[`${N}start`]=W),this._eventsInProgress[N]=s[N]}!v&&w&&this._fireEvent("movestart",w.originalEvent);for(const N in M)this._fireEvent(N,M[N]);w&&this._fireEvent("move",w.originalEvent);for(const N in s){const{originalEvent:W}=s[N];this._fireEvent(N,W)}const k={};let L;for(const N in this._eventsInProgress){const{handlerName:W,originalEvent:ee}=this._eventsInProgress[N];this._handlersById[W].isActive()||(delete this._eventsInProgress[N],L=c[W]||ee,k[`${N}end`]=L)}for(const N in k)this._fireEvent(N,k[N]);const j=ni(this._eventsInProgress);if(m&&(v||w)&&!j){this._updatingCamera=!0;const N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;N?(W(N.bearing||this._map.getBearing())&&(N.bearing=0),this._map.easeTo(N,{originalEvent:L})):(this._map.fire(new o.Event("moveend",{originalEvent:L})),W(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,c){this._map.fire(new o.Event(s,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{this._frameId=void 0,this.handleEvent(new cp("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Vh="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ya extends o.Evented{constructor(s,c){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=c.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,c){return this.jumpTo({center:s},c)}panBy(s,c,m){return s=o.pointGeometry.convert(s).mult(-1),this.panTo(this.transform.center,o.extend({offset:s},c),m)}panTo(s,c,m){return this.easeTo(o.extend({center:s},c),m)}getZoom(){return this.transform.zoom}setZoom(s,c){return this.jumpTo({zoom:s},c),this}zoomTo(s,c,m){return this.easeTo(o.extend({zoom:s},c),m)}zoomIn(s,c){return this.zoomTo(this.getZoom()+1,s,c),this}zoomOut(s,c){return this.zoomTo(this.getZoom()-1,s,c),this}getBearing(){return this.transform.bearing}setBearing(s,c){return this.jumpTo({bearing:s},c),this}getPadding(){return this.transform.padding}setPadding(s,c){return this.jumpTo({padding:s},c),this}rotateTo(s,c,m){return this.easeTo(o.extend({bearing:s},c),m)}resetNorth(s,c){return this.rotateTo(0,o.extend({duration:1e3},s),c),this}resetNorthPitch(s,c){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},s),c),this}snapToNorth(s,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,c):this}getPitch(){return this.transform.pitch}setPitch(s,c){return this.jumpTo({pitch:s},c),this}cameraForBounds(s,c){s=o.LngLatBounds.convert(s);const m=c&&c.bearing||0,v=c&&c.pitch||0,w=s.getNorthWest(),M=s.getSouthEast();return this._cameraForBounds(this.transform,w,M,m,v,c)}_extendCameraOptions(s){const c={top:0,bottom:0,right:0,left:0};if(typeof(s=o.extend({padding:c,offset:[0,0],maxZoom:this.transform.maxZoom},s)).padding=="number"){const m=s.padding;s.padding={top:m,bottom:m,right:m,left:m}}return s.padding=o.extend(c,s.padding),s}_minimumAABBFrustumDistance(s,c){const m=c.max[0]-c.min[0],v=c.max[1]-c.min[1];return m/v>s.aspect?m/(2*Math.tan(.5*s.fovX)*s.aspect):v/(2*Math.tan(.5*s.fovY)*s.aspect)}_cameraForBoundsOnGlobe(s,c,m,v,w,M){const k=s.clone(),L=this._extendCameraOptions(M);k.bearing=v,k.pitch=w;const j=o.LngLat.convert(c),N=o.LngLat.convert(m),W=.5*(j.lat+N.lat),ee=.5*(j.lng+N.lng),le=o.latLngToECEF(W,ee),ce=o.normalize([],le),de=o.normalize([],o.cross([],ce,[0,1,0])),ie=o.cross([],de,ce),se=[de[0],de[1],de[2],0,ie[0],ie[1],ie[2],0,ce[0],ce[1],ce[2],0,0,0,0,1],me=[le,o.latLngToECEF(j.lat,j.lng),o.latLngToECEF(N.lat,j.lng),o.latLngToECEF(N.lat,N.lng),o.latLngToECEF(j.lat,N.lng),o.latLngToECEF(W,j.lng),o.latLngToECEF(W,N.lng),o.latLngToECEF(j.lat,ee),o.latLngToECEF(N.lat,ee)];let ue=o.Aabb.fromPoints(me.map(Ze=>[o.dot(de,Ze),o.dot(ie,Ze),o.dot(ce,Ze)]));const xe=o.transformMat4([],ue.center,se);o.squaredLength(xe)===0&&o.set(xe,0,0,1),o.normalize(xe,xe),o.scale$2(xe,xe,o.GLOBE_RADIUS),k.center=o.ecefToLatLng(xe);const De=k.getWorldToCameraMatrix(),we=o.invert(new Float64Array(16),De);ue=o.Aabb.applyTransform(ue,o.multiply([],De,se)),o.transformMat4(xe,xe,De);const Ue=.5*(ue.max[2]-ue.min[2]),st=this._minimumAABBFrustumDistance(k,ue),Je=o.scale$2([],[0,0,1],Ue),Ge=o.add(Je,xe,Je),It=st+(k.pitch===0?0:o.distance(xe,Ge)),Ke=k.globeCenterInViewSpace,vt=o.sub([],xe,[Ke[0],Ke[1],Ke[2]]);o.normalize(vt,vt),o.scale$2(vt,vt,It);const lt=o.add([],xe,vt);o.transformMat4(lt,lt,we);const Bt=o.earthRadius/o.GLOBE_RADIUS,ut=o.length(lt),Mt=o.mercatorZfromAltitude(ut*Bt-o.earthRadius,0),jt=Math.min(k.zoomFromMercatorZAdjusted(Mt),L.maxZoom);return jt>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"mercator"}),k.zoom=jt,this._cameraForBounds(k,c,m,v,w,M)):{center:k.center,zoom:jt,bearing:v,pitch:w}}queryTerrainElevation(s,c){const m=this.transform.elevation;return m?(c=o.extend({},{exaggerated:!0},c),m.getAtPoint(o.MercatorCoordinate.fromLngLat(s),null,c.exaggerated)):null}_cameraForBounds(s,c,m,v,w,M){if(s.projection.name==="globe")return this._cameraForBoundsOnGlobe(s,c,m,v,w,M);const k=s.clone(),L=this._extendCameraOptions(M),j=k.padding;k.bearing=v,k.pitch=w;const N=o.LngLat.convert(c),W=o.LngLat.convert(m),ee=new o.LngLat(N.lng,W.lat),le=new o.LngLat(W.lng,N.lat),ce=k.project(N),de=k.project(W),ie=this.queryTerrainElevation(N),se=this.queryTerrainElevation(W),me=this.queryTerrainElevation(ee),ue=this.queryTerrainElevation(le),xe=[[ce.x,ce.y,Math.min(ie||0,se||0,me||0,ue||0)],[de.x,de.y,Math.max(ie||0,se||0,me||0,ue||0)]];let De=o.Aabb.fromPoints(xe);const we=k.getWorldToCameraMatrix(),Ue=o.invert(new Float64Array(16),we);De=o.Aabb.applyTransform(De,we);const st=o.sub([],De.max,De.min),Je=j.left||0,Ge=j.right||0,It=j.bottom||0,Ke=j.top||0,{left:vt,right:lt,top:Bt,bottom:ut}=L.padding,Mt=.5*(Je+Ge),jt=.5*(Ke+It),Ze=Math.min(k.scaleZoom(k.scale*Math.min((k.width-(Je+Ge+vt+lt))/st[0],(k.height-(It+Ke+ut+Bt))/st[1])),L.maxZoom),at=k.scale/k.zoomScale(Ze);De=new o.Aabb([De.min[0]-(vt+Mt)*at,De.min[1]-(ut+jt)*at,De.min[2]],[De.max[0]+(lt+Mt)*at,De.max[1]+(Bt+jt)*at,De.max[2]]);const mi=.5*st[2],Ei=this._minimumAABBFrustumDistance(k,De),_i=[0,0,1,0];o.transformMat4$1(_i,_i,we),o.normalize$2(_i,_i);const zi=o.scale$2([],_i,Ei+mi),sn=o.add([],De.center,zi),Mi=(typeof L.offset.x=="number"&&typeof L.offset.y=="number"?new o.pointGeometry(L.offset.x,L.offset.y):o.pointGeometry.convert(L.offset)).rotate(-o.degToRad(v));De.center[0]-=Mi.x*at,De.center[1]+=Mi.y*at,o.transformMat4(De.center,De.center,Ue),o.transformMat4(sn,sn,Ue);const ci=[De.center[0],De.center[1],sn[2]*k.pixelsPerMeter];o.scale$2(ci,ci,1/k.worldSize);const Kn=o.lngFromMercatorX(ci[0]),zn=o.latFromMercatorY(ci[1]),tr=Math.min(k._zoomFromMercatorZ(ci[2]),L.maxZoom),Hn=new o.LngLat(Kn,zn);return k.mercatorFromTransition&&tr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"globe"}),k.zoom=tr,this._cameraForBounds(k,c,m,v,w,M)):{center:Hn,zoom:tr,bearing:v,pitch:w}}fitBounds(s,c,m){const v=this.cameraForBounds(s,c);return this._fitInternal(v,c,m)}fitScreenCoordinates(s,c,m,v,w){const M=o.pointGeometry.convert(s),k=o.pointGeometry.convert(c),L=new o.pointGeometry(Math.min(M.x,k.x),Math.min(M.y,k.y)),j=new o.pointGeometry(Math.max(M.x,k.x),Math.max(M.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(M,k))return this;const N=this.transform.pointLocation3D(L),W=this.transform.pointLocation3D(j),ee=this.transform.pointLocation3D(new o.pointGeometry(L.x,j.y)),le=this.transform.pointLocation3D(new o.pointGeometry(j.x,L.y)),ce=[Math.min(N.lng,W.lng,ee.lng,le.lng),Math.min(N.lat,W.lat,ee.lat,le.lat)],de=[Math.max(N.lng,W.lng,ee.lng,le.lng),Math.max(N.lat,W.lat,ee.lat,le.lat)],ie=v&&v.pitch?v.pitch:this.getPitch(),se=this._cameraForBounds(this.transform,ce,de,m,ie,v);return this._fitInternal(se,v,w)}_fitInternal(s,c,m){return s?(delete(c=o.extend(s,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(s,c){this.stop();const m=s.preloadOnly?this.transform.clone():this.transform;let v=!1,w=!1,M=!1;return"zoom"in s&&m.zoom!==+s.zoom&&(v=!0,m.zoom=+s.zoom),s.center!==void 0&&(m.center=o.LngLat.convert(s.center)),"bearing"in s&&m.bearing!==+s.bearing&&(w=!0,m.bearing=+s.bearing),"pitch"in s&&m.pitch!==+s.pitch&&(M=!0,m.pitch=+s.pitch),s.padding==null||m.isPaddingEqual(s.padding)||(m.padding=s.padding),s.preloadOnly?(this._preloadTiles(m),this):(this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),v&&this.fire(new o.Event("zoomstart",c)).fire(new o.Event("zoom",c)).fire(new o.Event("zoomend",c)),w&&this.fire(new o.Event("rotatestart",c)).fire(new o.Event("rotate",c)).fire(new o.Event("rotateend",c)),M&&this.fire(new o.Event("pitchstart",c)).fire(new o.Event("pitch",c)).fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Vh),this.transform.getFreeCameraOptions()}setFreeCameraOptions(s,c){const m=this.transform;if(!m.projection.supportsFreeCamera)return o.warnOnce(Vh),this;this.stop();const v=m.zoom,w=m.pitch,M=m.bearing;m.setFreeCameraOptions(s);const k=v!==m.zoom,L=w!==m.pitch,j=M!==m.bearing;return this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),k&&this.fire(new o.Event("zoomstart",c)).fire(new o.Event("zoom",c)).fire(new o.Event("zoomend",c)),j&&this.fire(new o.Event("rotatestart",c)).fire(new o.Event("rotate",c)).fire(new o.Event("rotateend",c)),L&&this.fire(new o.Event("pitchstart",c)).fire(new o.Event("pitch",c)).fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c)),this}easeTo(s,c){this._stop(!1,s.easeId),((s=o.extend({offset:[0,0],duration:500,easing:o.ease},s)).animate===!1||!s.essential&&o.exported.prefersReducedMotion)&&(s.duration=0);const m=this.transform,v=this.getZoom(),w=this.getBearing(),M=this.getPitch(),k=this.getPadding(),L="zoom"in s?+s.zoom:v,j="bearing"in s?this._normalizeBearing(s.bearing,w):w,N="pitch"in s?+s.pitch:M,W="padding"in s?s.padding:m.padding,ee=o.pointGeometry.convert(s.offset);let le,ce,de;if(m.projection.name==="globe"){const Je=o.MercatorCoordinate.fromLngLat(m.center),Ge=ee.rotate(-m.angle);Je.x+=Ge.x/m.worldSize,Je.y+=Ge.y/m.worldSize;const It=Je.toLngLat(),Ke=o.LngLat.convert(s.center||It);this._normalizeCenter(Ke),le=m.centerPoint.add(Ge),ce=new o.pointGeometry(Je.x,Je.y).mult(m.worldSize),de=new o.pointGeometry(o.mercatorXfromLng(Ke.lng),o.mercatorYfromLat(Ke.lat)).mult(m.worldSize).sub(ce)}else{le=m.centerPoint.add(ee);const Je=m.pointLocation(le),Ge=o.LngLat.convert(s.center||Je);this._normalizeCenter(Ge),ce=m.project(Je),de=m.project(Ge).sub(ce)}const ie=m.zoomScale(L-v);let se,me;s.around&&(se=o.LngLat.convert(s.around),me=m.locationPoint(se));const ue=this._zooming||L!==v,xe=this._rotating||w!==j,De=this._pitching||N!==M,we=!m.isPaddingEqual(W),Ue=Je=>Ge=>{if(ue&&(Je.zoom=o.number(v,L,Ge)),xe&&(Je.bearing=o.number(w,j,Ge)),De&&(Je.pitch=o.number(M,N,Ge)),we&&(Je.interpolatePadding(k,W,Ge),le=Je.centerPoint.add(ee)),se)Je.setLocationAtPoint(se,me);else{const It=Je.zoomScale(Je.zoom-v),Ke=L>v?Math.min(2,ie):Math.max(.5,ie),vt=Math.pow(Ke,1-Ge),lt=Je.unproject(ce.add(de.mult(Ge*vt)).mult(It));Je.setLocationAtPoint(Je.renderWorldCopies?lt.wrap():lt,le)}return s.preloadOnly||this._fireMoveEvents(c),Je};if(s.preloadOnly){const Je=this._emulate(Ue,s.duration,m);return this._preloadTiles(Je),this}const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ue,this._rotating=xe,this._pitching=De,this._padding=we,this._easeId=s.easeId,this._prepareEase(c,s.noMoveStart,st),this._ease(Ue(m),Je=>{m.recenterOnTerrain(),this._afterEase(c,Je)},s),this}_prepareEase(s,c,m={}){this._moving=!0,this.transform.cameraElevationReference="sea",c||m.moving||this.fire(new o.Event("movestart",s)),this._zooming&&!m.zooming&&this.fire(new o.Event("zoomstart",s)),this._rotating&&!m.rotating&&this.fire(new o.Event("rotatestart",s)),this._pitching&&!m.pitching&&this.fire(new o.Event("pitchstart",s))}_fireMoveEvents(s){this.fire(new o.Event("move",s)),this._zooming&&this.fire(new o.Event("zoom",s)),this._rotating&&this.fire(new o.Event("rotate",s)),this._pitching&&this.fire(new o.Event("pitch",s))}_afterEase(s,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const m=this._zooming,v=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new o.Event("zoomend",s)),v&&this.fire(new o.Event("rotateend",s)),w&&this.fire(new o.Event("pitchend",s)),this.fire(new o.Event("moveend",s))}flyTo(s,c){if(!s.essential&&o.exported.prefersReducedMotion){const Ze=o.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ze,c)}this.stop(),s=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},s);const m=this.transform,v=this.getZoom(),w=this.getBearing(),M=this.getPitch(),k=this.getPadding(),L="zoom"in s?o.clamp(+s.zoom,m.minZoom,m.maxZoom):v,j="bearing"in s?this._normalizeBearing(s.bearing,w):w,N="pitch"in s?+s.pitch:M,W="padding"in s?s.padding:m.padding,ee=m.zoomScale(L-v),le=o.pointGeometry.convert(s.offset);let ce=m.centerPoint.add(le);const de=m.pointLocation(ce),ie=o.LngLat.convert(s.center||de);this._normalizeCenter(ie);const se=m.project(de),me=m.project(ie).sub(se);let ue=s.curve;const xe=Math.max(m.width,m.height),De=xe/ee,we=me.mag();if("minZoom"in s){const Ze=o.clamp(Math.min(s.minZoom,v,L),m.minZoom,m.maxZoom),at=xe/m.zoomScale(Ze-v);ue=Math.sqrt(at/we*2)}const Ue=ue*ue;function st(Ze){const at=(De*De-xe*xe+(Ze?-1:1)*Ue*Ue*we*we)/(2*(Ze?De:xe)*Ue*we);return Math.log(Math.sqrt(at*at+1)-at)}function Je(Ze){return(Math.exp(Ze)-Math.exp(-Ze))/2}function Ge(Ze){return(Math.exp(Ze)+Math.exp(-Ze))/2}const It=st(0);let Ke=function(Ze){return Ge(It)/Ge(It+ue*Ze)},vt=function(Ze){return xe*((Ge(It)*(Je(at=It+ue*Ze)/Ge(at))-Je(It))/Ue)/we;var at},lt=(st(1)-It)/ue;if(Math.abs(we)<1e-6||!isFinite(lt)){if(Math.abs(xe-De)<1e-6)return this.easeTo(s,c);const Ze=De<xe?-1:1;lt=Math.abs(Math.log(De/xe))/ue,vt=function(){return 0},Ke=function(at){return Math.exp(Ze*ue*at)}}s.duration="duration"in s?+s.duration:1e3*lt/("screenSpeed"in s?+s.screenSpeed/ue:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0);const Bt=w!==j,ut=N!==M,Mt=!m.isPaddingEqual(W),jt=Ze=>at=>{const mi=at*lt,Ei=1/Ke(mi);Ze.zoom=at===1?L:v+Ze.scaleZoom(Ei),Bt&&(Ze.bearing=o.number(w,j,at)),ut&&(Ze.pitch=o.number(M,N,at)),Mt&&(Ze.interpolatePadding(k,W,at),ce=Ze.centerPoint.add(le));const _i=at===1?ie:Ze.unproject(se.add(me.mult(vt(mi))).mult(Ei));return Ze.setLocationAtPoint(Ze.renderWorldCopies?_i.wrap():_i,ce),Ze._updateCameraOnTerrain(),s.preloadOnly||this._fireMoveEvents(c),Ze};if(s.preloadOnly){const Ze=this._emulate(jt,s.duration,m);return this._preloadTiles(Ze),this}return this._zooming=!0,this._rotating=Bt,this._pitching=ut,this._padding=Mt,this._prepareEase(c,!1),this._ease(jt(m),()=>this._afterEase(c),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const m=this._onEaseEnd;this._onEaseEnd=void 0,m.call(this,c)}if(!s){const m=this.handlers;m&&m.stop(!1)}return this}_ease(s,c,m){m.animate===!1||m.duration===0?(s(1),c()):(this._easeStart=o.exported.now(),this._easeOptions=m,this._onEaseFrame=s,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,c){s=o.wrap(s,-180,180);const m=Math.abs(s-c);return Math.abs(s-360-c)<m&&(s-=360),Math.abs(s+360-c)<m&&(s+=360),s}_normalizeCenter(s){const c=this.transform;if(!c.renderWorldCopies||c.maxBounds)return;const m=s.lng-c.center.lng;s.lng+=m>180?-360:m<-180?360:0}_emulate(s,c,m){const v=Math.ceil(15*c/1e3),w=[],M=s(m.clone());for(let k=0;k<=v;k++){const L=M(k/v);w.push(L.clone())}return w}}class $h{constructor(s={}){this.options=s,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){const c=this.options&&this.options.compact;return this._map=s,this._container=he("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=he("button","mapboxgl-ctrl-attrib-button",this._container),he("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=he("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(s,c){const m=this._map._getUIString(`AttributionControl.${c}`);s.setAttribute("aria-label",m),s.removeAttribute("title"),s.firstElementChild&&s.firstElementChild.setAttribute("title",m)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let s=this._editLink;s||(s=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(s){const m=c.reduce((v,w,M)=>(w.value&&(v+=`${w.key}=${w.value}${M<c.length-1?"&":""}`),v),"?");s.href=`${o.config.FEEDBACK_URL}/${m}#${aa(this._map,!0)}`,s.rel="noopener nofollow",this._setElementTitle(s,"MapFeedback")}}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let s=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style._sourceCaches;for(const v in c){const w=c[v];if(w.used){const M=w.getSource();M.attribution&&s.indexOf(M.attribution)<0&&s.push(M.attribution)}}s.sort((v,w)=>v.length-w.length),s=s.filter((v,w)=>{for(let M=w+1;M<s.length;M++)if(s[M].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=[...this.options.customAttribution,...s]:s.unshift(this.options.customAttribution));const m=s.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,s.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Gh{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(s){this._map=s,this._container=he("div","mapboxgl-ctrl");const c=he("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(s){s&&s.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const s=this._map.style._sourceCaches;if(Object.entries(s).length===0)return!0;for(const c in s){const m=s[c].getSource();if(m.hasOwnProperty("mapbox_logo")&&!m.mapbox_logo)return!1}return!0}_updateCompact(){const s=this._container.children;if(s.length){const c=s[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class qh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const c=++this._id;return this._queue.push({callback:s,id:c,cancelled:!1}),c}remove(s){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===s)return void(v.cancelled=!0)}run(s=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Wh(f,s,c){if(f=new o.LngLat(f.lng,f.lat),s){const m=new o.LngLat(f.lng-360,f.lat),v=new o.LngLat(f.lng+360,f.lat),w=360*Math.ceil(Math.abs(f.lng-c.center.lng)/360),M=c.locationPoint(f).distSqr(s),k=s.x<0||s.y<0||s.x>c.width||s.y>c.height;c.locationPoint(m).distSqr(s)<M&&(k||Math.abs(m.lng-c.center.lng)<w)?f=m:c.locationPoint(v).distSqr(s)<M&&(k||Math.abs(v.lng-c.center.lng)<w)&&(f=v)}for(;Math.abs(f.lng-c.center.lng)>180;){const m=c.locationPoint(f);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;f.lng>c.center.lng?f.lng-=360:f.lng+=360}return f}const pu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ka extends o.Evented{constructor(s,c){if(super(),(s instanceof o.window.HTMLElement||c)&&(s=o.extend({element:s},c)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=s&&s.occludedOpacity||.2,s&&s.element)this._element=s.element,this._offset=o.pointGeometry.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=he("div");const v=41,w=27,M=Se("svg",{display:"block",height:v*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${v}`},this._element),k=Se("radialGradient",{id:"shadowGradient"},Se("defs",{},M));Se("stop",{offset:"10%","stop-opacity":.4},k),Se("stop",{offset:"100%","stop-opacity":.05},k),Se("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},M),Se("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},M),Se("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},M),Se("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},M),this._offset=o.pointGeometry.convert(s&&s.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()});const m=this._element.classList;for(const v in pu)m.remove(`mapboxgl-marker-anchor-${v}`);m.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(s){return s===this._map||(this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._updateMoving),s.on("moveend",this._update),s.on("remove",this._clearFadeTimer),s._addMarker(this),this.setDraggable(this._draggable),this._update(),s.on("click",this._onMapClick)),this}remove(){const s=this._map;return s&&(s.off("click",this._onMapClick),s.off("move",this._updateMoving),s.off("moveend",this._update),s.off("mousedown",this._addDragHandler),s.off("touchstart",this._addDragHandler),s.off("mouseup",this._onUp),s.off("touchend",this._onUp),s.off("mousemove",this._onMove),s.off("touchmove",this._onMove),s.off("remove",this._clearFadeTimer),s._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=o.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,s._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(s){const c=s.code,m=s.charCode||s.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(s){const c=s.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?(s.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(s.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const s=this._map,c=this._pos;if(!s||!c)return!1;const m=s.unproject(c),v=s.getFreeCameraOptions();if(!v.position)return!1;const w=v.position.toLngLat();return w.distanceTo(m)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const s=this._map;if(!s)return;const c=this._pos;if(!c||c.x<0||c.x>s.transform.width||c.y<0||c.y>s.transform.height)return void this._clearFadeTimer();const m=s.unproject(c);let v;s._showingGlobe()&&o.isLngLatBehindGlobe(s.transform,this._lngLat)?v=0:(v=1-s._queryFogOpacity(m),s.transform._terrainEnabled()&&s.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const s=this._pos;if(!s||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${s.x}px,${s.y}px)
            ${pu[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${c.x}px,${c.y}px)
        `}_calculateXYTransform(){const s=this._pos,c=this._map,m=this.getPitchAlignment();if(!c||!s||m!=="map")return"";if(!c._showingGlobe()){const L=c.getPitch();return L?`rotateX(${L}deg)`:""}const v=o.radToDeg(o.globeTiltAtLngLat(c.transform,this._lngLat)),w=s.sub(o.globeCenterToScreenPoint(c.transform)),M=Math.abs(w.x)+Math.abs(w.y);if(M===0)return"";const k=v/M;return`rotateX(${-w.y*k}deg) rotateY(${w.x*k}deg)`}_calculateZTransform(){const s=this._pos,c=this._map;if(!c||!s)return"";let m=0;const v=this.getRotationAlignment();if(v==="map")if(c._showingGlobe()){const w=c.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),M=c.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);m=o.radToDeg(Math.atan2(M.y,M.x))-90}else m=-c.getBearing();else if(v==="horizon"){const w=o.smoothstep(4,6,c.getZoom()),M=o.globeCenterToScreenPoint(c.transform);M.y+=w*c.transform.height;const k=s.sub(M),L=o.radToDeg(Math.atan2(k.y,k.x));m=(L>90?L-270:L+90)*(1-w)}return m+=this._rotation,m?`rotateZ(${m}deg)`:""}_update(s){o.window.cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=Wh(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat),s===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(s){return this._offset=o.pointGeometry.convert(s),this._update(),this}_onMove(s){const c=this._map;if(!c)return;const m=this._pointerdownPos,v=this._positionDelta;if(m&&v){if(!this._isDragging){const w=this._clickTolerance||c._clickTolerance;if(s.point.dist(m)<w)return;this._isDragging=!0}this._pos=s.point.sub(v),this._lngLat=c.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const s=this._map;s&&(s.off("mousemove",this._onMove),s.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(s){const c=this._map,m=this._pos;c&&m&&this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(m),this._pointerdownPos=s.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(s){this._draggable=!!s;const c=this._map;return c&&(s?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(s){return this._occludedOpacity=s||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const jd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},dp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Wo(f=new o.pointGeometry(0,0),s="bottom"){if(typeof f=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(s){case"top":return new o.pointGeometry(0,f);case"top-left":return new o.pointGeometry(c,c);case"top-right":return new o.pointGeometry(-c,c);case"bottom":return new o.pointGeometry(0,-f);case"bottom-left":return new o.pointGeometry(c,-c);case"bottom-right":return new o.pointGeometry(-c,-c);case"left":return new o.pointGeometry(f,0);case"right":return new o.pointGeometry(-f,0)}return new o.pointGeometry(0,0)}return f instanceof o.pointGeometry||Array.isArray(f)?o.pointGeometry.convert(f):o.pointGeometry.convert(f[s]||[0,0])}class hp{constructor(s){this.jumpTo(s)}getValue(s){if(s<=this._startTime)return this._start;if(s>=this._endTime)return this._end;const c=o.easeCubicInOut((s-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(s){return s>=this._startTime&&s<=this._endTime}jumpTo(s){this._startTime=-1/0,this._endTime=-1/0,this._start=s,this._end=s}easeTo(s,c,m){this._start=this.getValue(c),this._end=s,this._startTime=c,this._endTime=c+m}}const fp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},pp={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},mp={showCompass:!0,showZoom:!0,visualizePitch:!1};class _p{constructor(s,c,m=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Fh({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,m&&(this.mousePitch=new Nh({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(s,c){this.mouseRotate.mousedown(s,c),this.mousePitch&&this.mousePitch.mousedown(s,c),ke()}move(s,c){const m=this.map,v=this.mouseRotate.mousemoveWindow(s,c),w=v&&v.bearingDelta;if(w&&m.setBearing(m.getBearing()+w),this.mousePitch){const M=this.mousePitch.mousemoveWindow(s,c),k=M&&M.pitchDelta;k&&m.setPitch(m.getPitch()+k)}}off(){const s=this.element;s.removeEventListener("mousedown",this.mousedown),s.removeEventListener("touchstart",this.touchstart,{passive:!1}),s.removeEventListener("touchmove",this.touchmove),s.removeEventListener("touchend",this.touchend),s.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Le(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(s){this.down(o.extend({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),Fe(this.element,s)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(s){this.move(s,Fe(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=z(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=z(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Vd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Hh={maxWidth:100,unit:"metric"};function gp(f,s,c){const m=Zh(s),v=m/s,w={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[c];this._map._requestDomTask(()=>{this._container.style.width=f*v+"px",this._container.innerHTML=`${m}&nbsp;${w}`})}function Zh(f){const s=Math.pow(10,`${Math.floor(f)}`.length-1);let c=f/s;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:c>=1?1:function(m){const v=Math.pow(10,Math.ceil(-Math.log(m)/Math.LN10));return Math.round(m*v)/v}(c),s*c}const Oc={version:o.version,supported:V,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends Ya{constructor(f){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(f=o.extend({},pp,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(f.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Cl(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._language=this._parseLanguage(f.language),this._worldview=f.worldview,this._renderTaskQueue=new qh,this._domRenderTaskQueue=new qh,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},fp,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._performanceMetricsCollection=f.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new hp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,typeof f.container=="string"){if(this._container=o.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Wu(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new li(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,o.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new $h({customAttribution:f.customAttribution})),this._logoControl=new Gh,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new o.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new o.Event(`${s.dataType}dataloading`,s))})}_getMapId(){return this._mapId}addControl(f,s){if(s===void 0&&(s=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=f.onAdd(this);this._controls.push(f);const m=this._controlPositions[s];return s.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(f);return s>-1&&this._controls.splice(s,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const s=!this._moving;return s&&this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),this.fire(new o.Event("resize",f)),s&&this.fire(new o.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(o.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(f){return f==="auto"?o.window.navigator.language:Array.isArray(f)?f.length===0?void 0:f.map(s=>s==="auto"?o.window.navigator.language:s):f}setLanguage(f){const s=this._parseLanguage(f);if(!this.style||s===this._language)return this;this._language=s,this.style._reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(f){return this.style&&f!==this._worldview?(this._worldview=f,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(f){return this._lazyInitEmptyStyle(),f?typeof f=="string"&&(f={name:f}):f=null,this._useExplicitProjection=!!f,this._prioritizeAndUpdateProjection(f,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const f=this.transform,s=f.projection.name;let c;s==="globe"&&f.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(f.setMercatorFromTransition(),c=!0):s==="mercator"&&f.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(f.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(f,s){return this._updateProjection(f||s||{name:"mercator"})}_updateProjection(f){let s;if(s=f.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(f),this.style.applyProjectionUpdate(),s){this.painter.clearBackgroundTiles();for(const c in this.style._sourceCaches)this.style._sourceCaches[c].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(f){return this.transform.locationPoint3D(o.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(o.pointGeometry.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(f,s,c){if(f==="mouseenter"||f==="mouseover"){let m=!1;const v=M=>{const k=s.filter(j=>this.getLayer(j)),L=k.length?this.queryRenderedFeatures(M.point,{layers:k}):[];L.length?m||(m=!0,c.call(this,new cr(f,this,M.originalEvent,{features:L}))):m=!1},w=()=>{m=!1};return{layers:new Set(s),listener:c,delegates:{mousemove:v,mouseout:w}}}if(f==="mouseleave"||f==="mouseout"){let m=!1;const v=M=>{const k=s.filter(L=>this.getLayer(L));(k.length?this.queryRenderedFeatures(M.point,{layers:k}):[]).length?m=!0:m&&(m=!1,c.call(this,new cr(f,this,M.originalEvent)))},w=M=>{m&&(m=!1,c.call(this,new cr(f,this,M.originalEvent)))};return{layers:new Set(s),listener:c,delegates:{mousemove:v,mouseout:w}}}{const m=v=>{const w=s.filter(k=>this.getLayer(k)),M=w.length?this.queryRenderedFeatures(v.point,{layers:w}):[];M.length&&(v.features=M,c.call(this,v),delete v.features)};return{layers:new Set(s),listener:c,delegates:{[f]:m}}}}on(f,s,c){if(c===void 0)return super.on(f,s);Array.isArray(s)||(s=[s]);const m=this._createDelegatedListener(f,s,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(f,s,c){if(c===void 0)return super.once(f,s);Array.isArray(s)||(s=[s]);const m=this._createDelegatedListener(f,s,c);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(f,s,c){if(c===void 0)return super.off(f,s);s=new Set(Array.isArray(s)?s:[s]);const m=(w,M)=>{if(w.size!==M.size)return!1;for(const k of w)if(!M.has(k))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[f]:void 0;return v&&(w=>{for(let M=0;M<w.length;M++){const k=w[M];if(k.listener===c&&m(k.layers,s)){for(const L in k.delegates)this.off(L,k.delegates[L]);return w.splice(M,1),this}}})(v),this}queryRenderedFeatures(f,s){return this.style?(s!==void 0||f===void 0||f instanceof o.pointGeometry||Array.isArray(f)||(s=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],s=s||{},this.transform)):[]}querySourceFeatures(f,s){return this.style.querySourceFeatures(f,s)}setStyle(f,s){return(s=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&s.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._localFontFamily=s.localFontFamily,this._updateStyle(f,s))}_getUIString(f){const s=this._locale[f];if(s==null)throw new Error(`Missing UI string '${f}'`);return s}_updateStyle(f,s){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new T(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new T(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,s){if(typeof f=="string"){const c=this._requestManager.normalizeStyleURL(f),m=this._requestManager.transformRequest(c,o.ResourceType.Style);o.getJSON(m,(v,w)=>{v?this.fire(new o.ErrorEvent(v)):w&&this._updateDiff(w,s)})}else typeof f=="object"&&this._updateDiff(f,s)}_updateDiff(f,s){try{this.style.setState(f)&&this._update(!0)}catch(c){o.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(f,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(f,s){return this._lazyInitEmptyStyle(),this.style.addSource(f,s),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const s in f){const c=f[s]._tiles;for(const m in c){const v=c[m];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(f,s,c){this._lazyInitEmptyStyle(),this.style.addSourceType(f,s,c)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,s,{pixelRatio:c=1,sdf:m=!1,stretchX:v,stretchY:w,content:M}={}){if(this._lazyInitEmptyStyle(),s instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&s instanceof o.window.ImageBitmap){const{width:k,height:L,data:j}=o.exported.getImageData(s);this.style.addImage(f,{data:new o.RGBAImage({width:k,height:L},j),pixelRatio:c,stretchX:v,stretchY:w,content:M,sdf:m,version:0})}else if(s.width===void 0||s.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:k,height:L}=s,j=s;this.style.addImage(f,{data:new o.RGBAImage({width:k,height:L},new Uint8Array(j.data)),pixelRatio:c,stretchX:v,stretchY:w,content:M,sdf:m,version:0,userImage:j}),j.onAdd&&j.onAdd(this,f)}}updateImage(f,s){const c=this.style.getImage(f);if(!c)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=s instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&s instanceof o.window.ImageBitmap?o.exported.getImageData(s):s,{width:v,height:w}=m;v!==void 0&&w!==void 0?v===c.data.width&&w===c.data.height?(c.data.replace(m.data,!(s instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&s instanceof o.window.ImageBitmap)),this.style.updateImage(f,c)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${v}, ${w})
                must be that same as the previous version of the image
                (${c.data.width}, ${c.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,s){o.getImage(this._requestManager.transformRequest(f,o.ResourceType.Image),(c,m)=>{s(c,m instanceof o.window.HTMLImageElement?o.exported.getImageData(m):m)})}listImages(){return this.style.listImages()}addLayer(f,s){return this._lazyInitEmptyStyle(),this.style.addLayer(f,s),this._update(!0)}moveLayer(f,s){return this.style.moveLayer(f,s),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,s,c){return this.style.setLayerZoomRange(f,s,c),this._update(!0)}setFilter(f,s,c={}){return this.style.setFilter(f,s,c),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,s,c,m={}){return this.style.setPaintProperty(f,s,c,m),this._update(!0)}getPaintProperty(f,s){return this.style.getPaintProperty(f,s)}setLayoutProperty(f,s,c,m={}){return this.style.setLayoutProperty(f,s,c,m),this._update(!0)}getLayoutProperty(f,s){return this.style.getLayoutProperty(f,s)}setLight(f,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,s),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(f),this.transform):0}setFeatureState(f,s){return this.style.setFeatureState(f,s),this._update()}removeFeatureState(f,s){return this.style.removeFeatureState(f,s),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,s=this._container.getBoundingClientRect().height||300;let c,m,v,w=this._container;for(;w&&(!m||!v);){const M=o.window.getComputedStyle(w).transform;M&&M!=="none"&&(c=M.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(m=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(v=c[3])),w=w.parentElement}this._containerWidth=m?Math.abs(f/m):f,this._containerHeight=v?Math.abs(s/v):s}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=he("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const s=this._canvasContainer=he("div","mapboxgl-canvas-container",f);this._interactive&&s.classList.add("mapboxgl-interactive"),this._canvas=he("canvas","mapboxgl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=he("div","mapboxgl-control-container",f),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{m[v]=he("div",`mapboxgl-ctrl-${v}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,s){const c=o.exported.devicePixelRatio||1;this._canvas.width=c*Math.ceil(f),this._canvas.height=c*Math.ceil(s),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${s}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const s=this._markers.indexOf(f);s!==-1&&this._markers.splice(s,1)}_addPopup(f){this._popups.push(f)}_removePopup(f){const s=this._popups.indexOf(f);s!==-1&&this._popups.splice(s,1)}_setupPainter(){const f=o.extend({},V.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);s?(o.storeAuthState(s,!0),this.painter=new ji(s,this.transform),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(s)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let s;const c=this.painter.context.extTimerQuery,m=o.exported.now();if(this.listens("gpu-timing-frame")&&(s=c.createQueryEXT(),c.beginQueryEXT(c.TIME_ELAPSED_EXT,s)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;this._updateProjectionTransition();const v=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,L=this.transform.pitch,j=o.exported.now(),N=new o.EvaluationParameters(k,{now:j,fadeDuration:v,pitch:L,transition:this.style.getTransition()});this.style.update(N)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(m),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(m),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,v,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),s){const k=o.exported.now()-m;c.endQueryEXT(c.TIME_ELAPSED_EXT,s),setTimeout(()=>{const L=c.getQueryObjectEXT(s,c.QUERY_RESULT_EXT)/1e6;c.deleteQueryEXT(s),this.fire(new o.Event("gpu-timing-frame",{cpuTime:k,gpuTime:L})),o.window.performance.mark("frame-gpu",{startTime:m,detail:{gpuTime:L}})},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(k);this.fire(new o.Event("gpu-timing-layer",{layerTimes:L}))},50)}if(this.listens("gpu-timing-deferred-render")){const k=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const L=this.painter.queryGpuTimeDeferredRender(k);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:L}))},50)}const M=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(M||this._repaint)this.triggerRepaint();else{const k=!this.isMoving()&&this.loaded();if(k&&(w=this._updateAverageElevation(m,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),k&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const L=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:L})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||M||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(f){for(const s of this._markers)f&&!this.getRenderWorldCopies()&&(s._lngLat=s._lngLat.wrap()),s._update();for(const s of this._popups)!f||this.getRenderWorldCopies()||s._trackPointer||(s._lngLat=s._lngLat.wrap()),s._update()}_updateAverageElevation(f,s=!1){const c=m=>(this.transform.averageElevation=m,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);if((s||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const m=this.transform.averageElevation;let v=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(v)?v=0:this._averageElevationLastSampledAt=f;const M=Math.abs(m-v);if(M>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(v),c(v);this._averageElevation.easeTo(v,f,300)}else if(M>1e-4)return this._averageElevation.jumpTo(v),c(v)}return!!this._averageElevation.isEasing(f)&&c(this._averageElevation.getValue(f))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===o.AUTH_ERR_MSG||f.status===401)){const s=this.painter.context.gl;o.storeAuthState(s,!1),this._logoControl instanceof Gh&&this._logoControl._updateLogo(),s&&s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const f=this._isDragging();this.painter.updateTerrain(this.style,f)}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),s=this.painter.getCanvasCopiesAndTimestamps();s.timeStamps.push(performance.now());const c=this.painter.context.gl,m=c.createFramebuffer();function v(w){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,w,0);const M=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,M),M}return c.bindFramebuffer(c.FRAMEBUFFER,m),this._canvasPixelComparison(v(f),s.canvasCopies.map(v),s.timeStamps)}_canvasPixelComparison(f,s,c){let m=c[1]-c[0];const v=f.length/4;for(let w=0;w<s.length;w++){const M=s[w];let k=0;for(let L=0;L<M.length;L+=4)M[L]===f[L]&&M[L+1]===f[L+1]&&M[L+2]===f[L+2]&&M[L+3]===f[L+3]&&(k+=1);m+=(c[w+2]-c[w+1])*(1-k/v)}return m}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=o.exported.frame(s=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(s)}))}_preloadTiles(f){const s=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(s,(c,m)=>c._preloadTiles(f,m),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(f){this._showTileAABBs!==f&&(this._showTileAABBs=f,f&&this._update())}_setCacheLimits(f,s){o.setCacheLimits(f,s)}get version(){return o.version}},NavigationControl:class{constructor(f){this.options=o.extend({},mp,f),this._container=he("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",s=>{this._map&&this._map.zoomIn({},{originalEvent:s})}),he("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",s=>{this._map&&this._map.zoomOut({},{originalEvent:s})}),he("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",s=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:s}):c.resetNorth({},{originalEvent:s}))}),this._compassIcon=he("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const s=f.getZoom(),c=s===f.getMaxZoom(),m=s===f.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=s)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _p(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,s){const c=he("button",f,this._container);return c.type="button",c.addEventListener("click",s),c}_setButtonTitle(f,s){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${s}`);f.setAttribute("aria-label",c),f.firstElementChild&&f.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends o.Evented{constructor(f){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},Vd,f),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ju(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(f){return this._map=f,this._container=he("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(f){const s=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,f(c)};this._supportsGeolocation!==void 0?f(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(c=>s(c.state!=="denied")).catch(()=>s()):s()}_isOutOfMapMaxBounds(f){const s=this._map.getMaxBounds(),c=f.coords;return!!s&&(c.longitude<s.getWest()||c.longitude>s.getEast()||c.latitude<s.getSouth()||c.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",f)),this._finish()}}_updateCamera(f){const s=new o.LngLat(f.coords.longitude,f.coords.latitude),c=f.coords.accuracy,m=this._map.getBearing(),v=o.extend({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(c),v,{geolocateSource:!0})}_updateMarker(f){if(f){const s=new o.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.transform,s=o.mercatorZfromAltitude(1,f._center.lat)*f.worldSize,c=Math.ceil(2*this._accuracy*s);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=he("button","mapboxgl-ctrl-geolocate",this._container),he("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=he("div","mapboxgl-user-location"),this._dotElement.appendChild(he("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(he("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ka({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=he("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ka({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:f.absolute===!0&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(f={maximumAge:6e5,timeout:0},this._noTimeout=!0):(f=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(s=>{s==="granted"&&f()}).catch(console.error):f()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:$h,ScaleControl:class{constructor(f){this.options=o.extend({},Hh,f),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=gp.bind(this)),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const f=this.options.maxWidth||100,s=this._map,c=s._containerHeight/2,m=s._containerWidth/2-f/2,v=s.unproject([m,c]),w=s.unproject([m+f,c]),M=v.distanceTo(w);if(this.options.unit==="imperial"){const k=3.2808*M;k>5280?this._setScale(f,k/5280,"mile"):this._setScale(f,k,"foot")}else this.options.unit==="nautical"?this._setScale(f,M/1852,"nautical-mile"):M>=1e3?this._setScale(f,M/1e3,"kilometer"):this._setScale(f,M,"meter")}_setScale(f,s,c){const m=Zh(s),v=m/s;this._map._requestDomTask(()=>{this._container.style.width=f*v+"px",this._container.innerHTML=c!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:c}).format(m):`${m}&nbsp;nm`})}onAdd(f){return this._map=f,this._language=f.getLanguage(),this._container=he("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(f){this._language=f,this._update()}setUnit(f){this.options.unit=f,this._update()}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof o.window.HTMLElement?this._container=f.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=he("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=he("button","mapboxgl-ctrl-fullscreen",this._controlContainer);he("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(f){super(),this.options=o.extend(Object.create(jd),f),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),f._addPopup(this),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),f._canvasContainer&&f._canvasContainer.classList.remove("mapboxgl-track-pointer"),f._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=o.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const s=this._map;return s&&(s.on("move",this._update),s.off("mousemove",this._onMouseEvent),s._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(o.window.document.createTextNode(f))}setHTML(f){const s=o.window.document.createDocumentFragment(),c=o.window.document.createElement("body");let m;for(c.innerHTML=f;m=c.firstChild,m;)s.appendChild(m);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let s=this._content;if(s)for(;s.hasChildNodes();)s.firstChild&&s.removeChild(s.firstChild);else s=this._content=he("div","mapboxgl-popup-content",this._container||void 0);if(s.appendChild(f),this.options.closeButton){const c=this._closeButton=he("button","mapboxgl-popup-close-button",s);c.type="button",c.setAttribute("aria-label","Close popup"),c.setAttribute("aria-hidden","true"),c.innerHTML="&#215;",c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let s;return this._classList.delete(f)?s=!1:(this._classList.add(f),s=!0),this._updateClassList(),s}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const s=this._map,c=this._container,m=this._pos;if(!s||!c||!m)return"bottom";const v=c.offsetWidth,w=c.offsetHeight,M=m.x<v/2,k=m.x>s.transform.width-v/2;if(m.y+f<w)return M?"top-left":k?"top-right":"top";if(m.y>s.transform.height-w){if(M)return"bottom-left";if(k)return"bottom-right"}return M?"left":k?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const s=[...this._classList];s.push("mapboxgl-popup"),this._anchor&&s.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&s.push("mapboxgl-popup-track-pointer"),f.className=s.join(" ")}_update(f){const s=this._map,c=this._content;if(!s||!this._lngLat&&!this._trackPointer||!c)return;let m=this._container;if(m||(m=this._container=he("div","mapboxgl-popup",s.getContainer()),this._tip=he("div","mapboxgl-popup-tip",m),m.appendChild(c)),this.options.maxWidth&&m.style.maxWidth!==this.options.maxWidth&&(m.style.maxWidth=this.options.maxWidth),s.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Wh(this._lngLat,this._pos,s.transform)),!this._trackPointer||f){const v=this._pos=this._trackPointer&&f?f:s.project(this._lngLat),w=Wo(this.options.offset),M=this._anchor=this._getAnchor(w.y),k=Wo(this.options.offset,M),L=v.add(k).round();s._requestDomTask(()=>{this._container&&M&&(this._container.style.transform=`${pu[M]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&s._showingGlobe()){const v=o.isLngLatBehindGlobe(s.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(dp);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._container&&(this._container.style.opacity=`${f}`),this._content&&(this._content.style.pointerEvents=f?"auto":"none")}},Marker:ka,Style:T,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:Fr,Evented:o.Evented,config:o.config,prewarm:function(){Li().acquire(Ai)},clearPrewarmedResources:function(){const f=yi;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(Ai),yi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(f){o.config.ACCESS_TOKEN=f},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(f){o.config.API_URL=f},get workerCount(){return Ci.workerCount},set workerCount(f){Ci.workerCount=f},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){o.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){o.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Oc});var E=_;return E})})(tL);const Cd=R3;var G0=nL,iL=Object.prototype.hasOwnProperty;function nL(){for(var e={},r=0;r<arguments.length;r++){var a=arguments[r];for(var d in a)iL.call(a,d)&&(e[d]=a[d])}return e}var O3={},rL={get exports(){return O3},set exports(e){O3=e}};(function(e,r){(function(){var a={};e.exports=a,a.simpleFilter=function(d,_){return _.filter(function(x){return a.test(d,x)})},a.test=function(d,_){return a.match(d,_)!==null},a.match=function(d,_,x){x=x||{};var E=0,o=[],D=_.length,V=0,X=0,Z=x.pre||"",he=x.post||"",Se=x.caseSensitive&&_||_.toLowerCase(),_e;d=x.caseSensitive&&d||d.toLowerCase();for(var Re=0;Re<D;Re++)_e=_[Re],Se[Re]===d[E]?(_e=Z+_e+he,E+=1,X+=1+X):X=0,V+=X,o[o.length]=_e;return E===d.length?(V=Se===d?1/0:V,{rendered:o.join(""),score:V}):null},a.filter=function(d,_,x){return!_||_.length===0?[]:typeof d!="string"?_:(x=x||{},_.reduce(function(E,o,D,V){var X=o;x.extract&&(X=x.extract(o));var Z=a.match(d,X,x);return Z!=null&&(E[E.length]={string:Z.rendered,score:Z.score,index:D,original:o}),E},[]).sort(function(E,o){var D=o.score-E.score;return D||E.index-o.index}))}})()})(rL);var ul=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};ul.prototype.show=function(){this.element.style.display="block"};ul.prototype.hide=function(){this.element.style.display="none"};ul.prototype.add=function(e){this.items.push(e)};ul.prototype.clear=function(){this.items=[],this.active=0};ul.prototype.isEmpty=function(){return!this.items.length};ul.prototype.isVisible=function(){return this.element.style.display==="block"};ul.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};ul.prototype.drawItem=function(e,r){var a=document.createElement("li"),d=document.createElement("a");r&&(a.className+=" active"),d.innerHTML=e.string,a.appendChild(d),this.element.appendChild(a),a.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),a.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};ul.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};ul.prototype.move=function(e){this.active=e,this.draw()};ul.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};ul.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};ul.prototype.drawError=function(e){var r=document.createElement("li");r.innerHTML=e,this.element.appendChild(r),this.show()};var sL=ul,oL=G0,aL=O3,lL=sL,Ta=function(e,r,a){return a=a||{},this.options=oL({minLength:2,limit:5,filter:!0,hideOnBlur:!0},a),this.el=e,this.data=r||[],this.list=new lL(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(d){this.handleKeyUp(d.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(d){this.handleKeyDown(d)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(d){this.handlePaste(d)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Ta.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};Ta.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Ta.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Ta.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var r=this;setTimeout(function(){r.handleInputChange(e.target.value)},100)}};Ta.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(r){for(var a=0;a<r.length&&(this.list.add(r[a]),a!==this.options.limit-1);a++);this.list.draw()}.bind(this))};Ta.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Ta.prototype.update=function(e){this.data=e,this.handleKeyUp()};Ta.prototype.clear=function(){this.data=[],this.list.clear()};Ta.prototype.normalize=function(e){return e=e.toLowerCase(),e};Ta.prototype.match=function(e,r){return e.indexOf(r)>-1};Ta.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var r=document.createEvent("HTMLEvents");r.initEvent("change",!0,!1),this.el.dispatchEvent(r)}else this.el.fireEvent("onchange")};Ta.prototype.getCandidates=function(e){var r={pre:"<strong>",post:"</strong>",extract:function(d){return this.getItemValue(d)}.bind(this)},a;this.options.filter?(a=aL.filter(this.query,this.data,r),a=a.map(function(d){return{original:d.original,string:this.render(d.original,d.string)}}.bind(this))):a=this.data.map(function(d){var _=this.render(d);return{original:d,string:_}}.bind(this)),e(a)};Ta.prototype.getItemValue=function(e){return e};Ta.prototype.render=function(e,r){if(r)return r;for(var a=e.original?this.getItemValue(e.original):this.getItemValue(e),d=this.normalize(a),_=d.lastIndexOf(this.query);_>-1;){var x=_+this.query.length;a=a.slice(0,_)+"<strong>"+a.slice(_,x)+"</strong>"+a.slice(x),_=d.slice(0,_).lastIndexOf(this.query)}return a};Ta.prototype.renderError=function(e){this.list.drawError(e)};var cL=Ta,FT=cL,uL=FT;typeof window<"u"&&(window.Suggestions=FT);var dL="Expected a function",H5=0/0,hL="[object Symbol]",fL=/^\s+|\s+$/g,pL=/^[-+]0x[0-9a-f]+$/i,mL=/^0b[01]+$/i,_L=/^0o[0-7]+$/i,gL=parseInt,yL=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo,vL=typeof self=="object"&&self&&self.Object===Object&&self,xL=yL||vL||Function("return this")(),bL=Object.prototype,wL=bL.toString,TL=Math.max,EL=Math.min,Ux=function(){return xL.Date.now()};function SL(e,r,a){var d,_,x,E,o,D,V=0,X=!1,Z=!1,he=!0;if(typeof e!="function")throw new TypeError(dL);r=Z5(r)||0,z3(a)&&(X=!!a.leading,Z="maxWait"in a,x=Z?TL(Z5(a.maxWait)||0,r):x,he="trailing"in a?!!a.trailing:he);function Se(z){var Lt=d,ot=_;return d=_=void 0,V=z,E=e.apply(ot,Lt),E}function _e(z){return V=z,o=setTimeout(ke,r),X?Se(z):E}function Re(z){var Lt=z-D,ot=z-V,bt=r-Lt;return Z?EL(bt,x-ot):bt}function nt(z){var Lt=z-D,ot=z-V;return D===void 0||Lt>=r||Lt<0||Z&&ot>=x}function ke(){var z=Ux();if(nt(z))return Le(z);o=setTimeout(ke,Re(z))}function Le(z){return o=void 0,he&&d?Se(z):(d=_=void 0,E)}function $e(){o!==void 0&&clearTimeout(o),V=0,d=D=_=o=void 0}function Et(){return o===void 0?E:Le(Ux())}function Fe(){var z=Ux(),Lt=nt(z);if(d=arguments,_=this,D=z,Lt){if(o===void 0)return _e(D);if(Z)return o=setTimeout(ke,r),Se(D)}return o===void 0&&(o=setTimeout(ke,r)),E}return Fe.cancel=$e,Fe.flush=Et,Fe}function z3(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function CL(e){return!!e&&typeof e=="object"}function ML(e){return typeof e=="symbol"||CL(e)&&wL.call(e)==hL}function Z5(e){if(typeof e=="number")return e;if(ML(e))return H5;if(z3(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=z3(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(fL,"");var a=mL.test(e);return a||_L.test(e)?gL(e.slice(2),a?2:8):pL.test(e)?H5:+e}var AL=SL,zy={},IL={get exports(){return zy},set exports(e){zy=e}},S0=typeof Reflect=="object"?Reflect:null,Y5=S0&&typeof S0.apply=="function"?S0.apply:function(r,a,d){return Function.prototype.apply.call(r,a,d)},dy;S0&&typeof S0.ownKeys=="function"?dy=S0.ownKeys:Object.getOwnPropertySymbols?dy=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:dy=function(r){return Object.getOwnPropertyNames(r)};function kL(e){console&&console.warn&&console.warn(e)}var NT=Number.isNaN||function(r){return r!==r};function Ur(){Ur.init.call(this)}IL.exports=Ur;zy.once=RL;Ur.EventEmitter=Ur;Ur.prototype._events=void 0;Ur.prototype._eventsCount=0;Ur.prototype._maxListeners=void 0;var X5=10;function A2(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Ur,"defaultMaxListeners",{enumerable:!0,get:function(){return X5},set:function(e){if(typeof e!="number"||e<0||NT(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");X5=e}});Ur.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ur.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||NT(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function UT(e){return e._maxListeners===void 0?Ur.defaultMaxListeners:e._maxListeners}Ur.prototype.getMaxListeners=function(){return UT(this)};Ur.prototype.emit=function(r){for(var a=[],d=1;d<arguments.length;d++)a.push(arguments[d]);var _=r==="error",x=this._events;if(x!==void 0)_=_&&x.error===void 0;else if(!_)return!1;if(_){var E;if(a.length>0&&(E=a[0]),E instanceof Error)throw E;var o=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw o.context=E,o}var D=x[r];if(D===void 0)return!1;if(typeof D=="function")Y5(D,this,a);else for(var V=D.length,X=qT(D,V),d=0;d<V;++d)Y5(X[d],this,a);return!0};function jT(e,r,a,d){var _,x,E;if(A2(a),x=e._events,x===void 0?(x=e._events=Object.create(null),e._eventsCount=0):(x.newListener!==void 0&&(e.emit("newListener",r,a.listener?a.listener:a),x=e._events),E=x[r]),E===void 0)E=x[r]=a,++e._eventsCount;else if(typeof E=="function"?E=x[r]=d?[a,E]:[E,a]:d?E.unshift(a):E.push(a),_=UT(e),_>0&&E.length>_&&!E.warned){E.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=r,o.count=E.length,kL(o)}return e}Ur.prototype.addListener=function(r,a){return jT(this,r,a,!1)};Ur.prototype.on=Ur.prototype.addListener;Ur.prototype.prependListener=function(r,a){return jT(this,r,a,!0)};function DL(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function VT(e,r,a){var d={fired:!1,wrapFn:void 0,target:e,type:r,listener:a},_=DL.bind(d);return _.listener=a,d.wrapFn=_,_}Ur.prototype.once=function(r,a){return A2(a),this.on(r,VT(this,r,a)),this};Ur.prototype.prependOnceListener=function(r,a){return A2(a),this.prependListener(r,VT(this,r,a)),this};Ur.prototype.removeListener=function(r,a){var d,_,x,E,o;if(A2(a),_=this._events,_===void 0)return this;if(d=_[r],d===void 0)return this;if(d===a||d.listener===a)--this._eventsCount===0?this._events=Object.create(null):(delete _[r],_.removeListener&&this.emit("removeListener",r,d.listener||a));else if(typeof d!="function"){for(x=-1,E=d.length-1;E>=0;E--)if(d[E]===a||d[E].listener===a){o=d[E].listener,x=E;break}if(x<0)return this;x===0?d.shift():PL(d,x),d.length===1&&(_[r]=d[0]),_.removeListener!==void 0&&this.emit("removeListener",r,o||a)}return this};Ur.prototype.off=Ur.prototype.removeListener;Ur.prototype.removeAllListeners=function(r){var a,d,_;if(d=this._events,d===void 0)return this;if(d.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):d[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete d[r]),this;if(arguments.length===0){var x=Object.keys(d),E;for(_=0;_<x.length;++_)E=x[_],E!=="removeListener"&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(a=d[r],typeof a=="function")this.removeListener(r,a);else if(a!==void 0)for(_=a.length-1;_>=0;_--)this.removeListener(r,a[_]);return this};function $T(e,r,a){var d=e._events;if(d===void 0)return[];var _=d[r];return _===void 0?[]:typeof _=="function"?a?[_.listener||_]:[_]:a?LL(_):qT(_,_.length)}Ur.prototype.listeners=function(r){return $T(this,r,!0)};Ur.prototype.rawListeners=function(r){return $T(this,r,!1)};Ur.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):GT.call(e,r)};Ur.prototype.listenerCount=GT;function GT(e){var r=this._events;if(r!==void 0){var a=r[e];if(typeof a=="function")return 1;if(a!==void 0)return a.length}return 0}Ur.prototype.eventNames=function(){return this._eventsCount>0?dy(this._events):[]};function qT(e,r){for(var a=new Array(r),d=0;d<r;++d)a[d]=e[d];return a}function PL(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}function LL(e){for(var r=new Array(e.length),a=0;a<r.length;++a)r[a]=e[a].listener||e[a];return r}function RL(e,r){return new Promise(function(a,d){function _(E){e.removeListener(r,x),d(E)}function x(){typeof e.removeListener=="function"&&e.removeListener("error",_),a([].slice.call(arguments))}WT(e,r,x,{once:!0}),r!=="error"&&OL(e,_,{once:!0})})}function OL(e,r,a){typeof e.on=="function"&&WT(e,"error",r,a)}function WT(e,r,a,d){if(typeof e.on=="function")d.once?e.once(r,a):e.on(r,a);else if(typeof e.addEventListener=="function")e.addEventListener(r,function _(x){d.once&&e.removeEventListener(r,_),a(x)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var zL={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function BL(e){var r=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return r?{key:r[1],value:r[2]}:null}function FL(e){var r=e.match(/<?([^>]*)>(.*)/);if(!r)return null;var a=r[1],d=r[2].split(";"),_=null,x=d.reduce(function(E,o){var D=BL(o);return D?D.key==="rel"?(_||(_=D.value),E):(E[D.key]=D.value,E):E},{});return _?{url:a,rel:_,params:x}:null}function NL(e){return e?e.split(/,\s*</).reduce(function(r,a){var d=FL(a);if(!d)return r;var _=d.rel.split(/\s+/);return _.forEach(function(x){r[x]||(r[x]={url:d.url,params:d.params})}),r},{}):{}}var UL=NL,jL=UL;function fw(e,r){this.request=e,this.headers=r.headers,this.rawBody=r.body,this.statusCode=r.statusCode;try{this.body=JSON.parse(r.body||"{}")}catch{this.body=r.body}this.links=jL(this.headers.link)}fw.prototype.hasNextPage=function(){return!!this.links.next};fw.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var VL=fw,I2={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},K5=I2;function $L(e){var r=e.type||K5.ERROR_HTTP,a;if(e.body)try{a=JSON.parse(e.body)}catch{a=e.body}else a=null;var d=e.message||null;d||(typeof a=="string"?d=a:a&&typeof a.message=="string"?d=a.message:r===K5.ERROR_REQUEST_ABORTED&&(d="Request aborted")),this.message=d,this.type=r,this.statusCode=e.statusCode||null,this.request=e.request,this.body=a}var GL=$L;function qL(e){var r=e.indexOf(":"),a=e.substring(0,r).trim().toLowerCase(),d=e.substring(r+1).trim();return{name:a,value:d}}function WL(e){var r={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(a){var d=qL(a);r[d.name]=d.value}),r}var HL=WL,ZL=VL,J5=GL,jx=I2,YL=HL,By={};function XL(e){var r=By[e.id];r&&(r.abort(),delete By[e.id])}function KL(e,r){return new ZL(e,{body:r.response,headers:YL(r.getAllResponseHeaders()),statusCode:r.status})}function Q5(e){var r=e.total,a=e.loaded,d=100*a/r;return{total:r,transferred:a,percent:d}}function HT(e,r){return new Promise(function(a,d){r.onprogress=function(E){e.emitter.emit(jx.EVENT_PROGRESS_DOWNLOAD,Q5(E))};var _=e.file;_&&(r.upload.onprogress=function(E){e.emitter.emit(jx.EVENT_PROGRESS_UPLOAD,Q5(E))}),r.onerror=function(E){d(E)},r.onabort=function(){var E=new J5({request:e,type:jx.ERROR_REQUEST_ABORTED});d(E)},r.onload=function(){if(delete By[e.id],r.status<200||r.status>=400){var E=new J5({request:e,body:r.response,statusCode:r.status});d(E);return}a(r)};var x=e.body;typeof x=="string"?r.send(x):x?r.send(JSON.stringify(x)):_?r.send(_):r.send(),By[e.id]=r}).then(function(a){return KL(e,a)})}function ZT(e,r){var a=e.url(r),d=new window.XMLHttpRequest;return d.open(e.method,a),Object.keys(e.headers).forEach(function(_){d.setRequestHeader(_,e.headers[_])}),d}function JL(e){return Promise.resolve().then(function(){var r=ZT(e,e.client.accessToken);return HT(e,r)})}var QL={browserAbort:XL,sendRequestXhr:HT,browserSend:JL,createRequestXhr:ZT},Fy={},eR={get exports(){return Fy},set exports(e){Fy=e}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(e,r){(function(a){var d=r,_=e&&e.exports==d&&e,x=typeof Jo=="object"&&Jo;(x.global===x||x.window===x)&&(a=x);var E=function(_e){this.message=_e};E.prototype=new Error,E.prototype.name="InvalidCharacterError";var o=function(_e){throw new E(_e)},D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V=/[\t\n\f\r ]/g,X=function(_e){_e=String(_e).replace(V,"");var Re=_e.length;Re%4==0&&(_e=_e.replace(/==?$/,""),Re=_e.length),(Re%4==1||/[^+a-zA-Z0-9/]/.test(_e))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var nt=0,ke,Le,$e="",Et=-1;++Et<Re;)Le=D.indexOf(_e.charAt(Et)),ke=nt%4?ke*64+Le:Le,nt++%4&&($e+=String.fromCharCode(255&ke>>(-2*nt&6)));return $e},Z=function(_e){_e=String(_e),/[^\0-\xFF]/.test(_e)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var Re=_e.length%3,nt="",ke=-1,Le,$e,Et,Fe,z=_e.length-Re;++ke<z;)Le=_e.charCodeAt(ke)<<16,$e=_e.charCodeAt(++ke)<<8,Et=_e.charCodeAt(++ke),Fe=Le+$e+Et,nt+=D.charAt(Fe>>18&63)+D.charAt(Fe>>12&63)+D.charAt(Fe>>6&63)+D.charAt(Fe&63);return Re==2?(Le=_e.charCodeAt(ke)<<8,$e=_e.charCodeAt(++ke),Fe=Le+$e,nt+=D.charAt(Fe>>10)+D.charAt(Fe>>4&63)+D.charAt(Fe<<2&63)+"="):Re==1&&(Fe=_e.charCodeAt(ke),nt+=D.charAt(Fe>>2)+D.charAt(Fe<<4&63)+"=="),nt},he={encode:Z,decode:X,version:"0.1.0"};if(d&&!d.nodeType)if(_)_.exports=he;else for(var Se in he)he.hasOwnProperty(Se)&&(d[Se]=he[Se]);else a.base64=he})(Jo)})(eR,Fy);var tR=Fy,Vx={};function iR(e){if(Vx[e])return Vx[e];var r=e.split("."),a=r[0],d=r[1];if(!d)throw new Error("Invalid token");var _=nR(d),x={usage:a,user:_.u};return Pf(_,"a")&&(x.authorization=_.a),Pf(_,"exp")&&(x.expires=_.exp*1e3),Pf(_,"iat")&&(x.created=_.iat*1e3),Pf(_,"scopes")&&(x.scopes=_.scopes),Pf(_,"client")&&(x.client=_.client),Pf(_,"ll")&&(x.lastLogin=_.ll),Pf(_,"iu")&&(x.impersonator=_.iu),Vx[e]=x,x}function nR(e){try{return JSON.parse(tR.decode(e))}catch{throw new Error("Invalid token")}}function Pf(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var YT=iR,B3={},rR={get exports(){return B3},set exports(e){B3=e}};(function(e){var r=Object.prototype.hasOwnProperty,a="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(a=!1));function _(D,V,X){this.fn=D,this.context=V,this.once=X||!1}function x(D,V,X,Z,he){if(typeof X!="function")throw new TypeError("The listener must be a function");var Se=new _(X,Z||D,he),_e=a?a+V:V;return D._events[_e]?D._events[_e].fn?D._events[_e]=[D._events[_e],Se]:D._events[_e].push(Se):(D._events[_e]=Se,D._eventsCount++),D}function E(D,V){--D._eventsCount===0?D._events=new d:delete D._events[V]}function o(){this._events=new d,this._eventsCount=0}o.prototype.eventNames=function(){var V=[],X,Z;if(this._eventsCount===0)return V;for(Z in X=this._events)r.call(X,Z)&&V.push(a?Z.slice(1):Z);return Object.getOwnPropertySymbols?V.concat(Object.getOwnPropertySymbols(X)):V},o.prototype.listeners=function(V){var X=a?a+V:V,Z=this._events[X];if(!Z)return[];if(Z.fn)return[Z.fn];for(var he=0,Se=Z.length,_e=new Array(Se);he<Se;he++)_e[he]=Z[he].fn;return _e},o.prototype.listenerCount=function(V){var X=a?a+V:V,Z=this._events[X];return Z?Z.fn?1:Z.length:0},o.prototype.emit=function(V,X,Z,he,Se,_e){var Re=a?a+V:V;if(!this._events[Re])return!1;var nt=this._events[Re],ke=arguments.length,Le,$e;if(nt.fn){switch(nt.once&&this.removeListener(V,nt.fn,void 0,!0),ke){case 1:return nt.fn.call(nt.context),!0;case 2:return nt.fn.call(nt.context,X),!0;case 3:return nt.fn.call(nt.context,X,Z),!0;case 4:return nt.fn.call(nt.context,X,Z,he),!0;case 5:return nt.fn.call(nt.context,X,Z,he,Se),!0;case 6:return nt.fn.call(nt.context,X,Z,he,Se,_e),!0}for($e=1,Le=new Array(ke-1);$e<ke;$e++)Le[$e-1]=arguments[$e];nt.fn.apply(nt.context,Le)}else{var Et=nt.length,Fe;for($e=0;$e<Et;$e++)switch(nt[$e].once&&this.removeListener(V,nt[$e].fn,void 0,!0),ke){case 1:nt[$e].fn.call(nt[$e].context);break;case 2:nt[$e].fn.call(nt[$e].context,X);break;case 3:nt[$e].fn.call(nt[$e].context,X,Z);break;case 4:nt[$e].fn.call(nt[$e].context,X,Z,he);break;default:if(!Le)for(Fe=1,Le=new Array(ke-1);Fe<ke;Fe++)Le[Fe-1]=arguments[Fe];nt[$e].fn.apply(nt[$e].context,Le)}}return!0},o.prototype.on=function(V,X,Z){return x(this,V,X,Z,!1)},o.prototype.once=function(V,X,Z){return x(this,V,X,Z,!0)},o.prototype.removeListener=function(V,X,Z,he){var Se=a?a+V:V;if(!this._events[Se])return this;if(!X)return E(this,Se),this;var _e=this._events[Se];if(_e.fn)_e.fn===X&&(!he||_e.once)&&(!Z||_e.context===Z)&&E(this,Se);else{for(var Re=0,nt=[],ke=_e.length;Re<ke;Re++)(_e[Re].fn!==X||he&&!_e[Re].once||Z&&_e[Re].context!==Z)&&nt.push(_e[Re]);nt.length?this._events[Se]=nt.length===1?nt[0]:nt:E(this,Se)}return this},o.prototype.removeAllListeners=function(V){var X;return V?(X=a?a+V:V,this._events[X]&&E(this,X)):(this._events=new d,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=a,o.EventEmitter=o,e.exports=o})(rR);function sR(e){return e.map(encodeURIComponent).join(",")}function XT(e){return Array.isArray(e)?sR(e):encodeURIComponent(String(e))}function KT(e,r,a){if(a===!1||a===null)return e;var d=/\?/.test(e)?"&":"?",_=encodeURIComponent(r);return a!==void 0&&a!==""&&a!==!0&&(_+="="+XT(a)),""+e+d+_}function oR(e,r){if(!r)return e;var a=e;return Object.keys(r).forEach(function(d){var _=r[d];_!==void 0&&(Array.isArray(_)&&(_=_.filter(function(x){return x!=null}).join(",")),a=KT(a,d,_))}),a}function aR(e,r){if(!r||e.slice(0,4)==="http")return e;var a=e[0]==="/"?"":"/";return""+r.replace(/\/$/,"")+a+e}function lR(e,r){return r?e.replace(/\/:([a-zA-Z0-9]+)/g,function(a,d){var _=r[d];if(_===void 0)throw new Error("Unspecified route parameter "+d);var x=XT(_);return"/"+x}):e}var cR={appendQueryObject:oR,appendQueryParam:KT,prependOrigin:aR,interpolateRouteParams:lR},uR=YT,pw=G0,dR=B3,Jg=cR,e8=I2,hR=1;function Ph(e,r){if(!e)throw new Error("MapiRequest requires a client");if(!r||!r.path||!r.method)throw new Error("MapiRequest requires an options object with path and method properties");var a={};r.body&&(a["content-type"]="application/json");var d=pw(a,r.headers),_=Object.keys(d).reduce(function(x,E){return x[E.toLowerCase()]=d[E],x},{});this.id=hR++,this._options=r,this.emitter=new dR,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=r.path,this.method=r.method,this.origin=r.origin||e.origin,this.query=r.query||{},this.params=r.params||{},this.body=r.body||null,this.file=r.file||null,this.encoding=r.encoding||"utf8",this.sendFileAs=r.sendFileAs||null,this.headers=_}Ph.prototype.url=function(r){var a=Jg.prependOrigin(this.path,this.origin);a=Jg.appendQueryObject(a,this.query);var d=this.params,_=r??this.client.accessToken;if(_){a=Jg.appendQueryParam(a,"access_token",_);var x=uR(_).user;d=pw({ownerId:x},d)}return a=Jg.interpolateRouteParams(a,d),a};Ph.prototype.send=function(){var r=this;if(r.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return r.sent=!0,r.client.sendRequest(r).then(function(a){return r.response=a,r.emitter.emit(e8.EVENT_RESPONSE,a),a},function(a){throw r.error=a,r.emitter.emit(e8.EVENT_ERROR,a),a})};Ph.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Ph.prototype.eachPage=function(r){var a=this;function d(E){function o(){delete a._nextPageRequest;var D=E.nextPage();D&&(a._nextPageRequest=D,x(D))}r(null,E,o)}function _(E){r(E,null,function(){})}function x(E){E.send().then(d,_)}x(this)};Ph.prototype.clone=function(){return this._extend()};Ph.prototype._extend=function(r){var a=pw(this._options,r);return new Ph(this.client,a)};var fR=Ph,pR=YT,mR=fR,_R=I2;function JT(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");pR(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||_R.API_ORIGIN}JT.prototype.createRequest=function(r){return new mR(this,r)};var QT=JT,eE=QL,tE=QT;function z0(e){tE.call(this,e)}z0.prototype=Object.create(tE.prototype);z0.prototype.constructor=z0;z0.prototype.sendRequest=eE.browserSend;z0.prototype.abortRequest=eE.browserAbort;function gR(e){return new z0(e)}var iE=gR,yR=iE,vR=yR,xR=Object.prototype.toString,bR=function(e){var r;return xR.call(e)==="[object Object]"&&(r=Object.getPrototypeOf(e),r===null||r===Object.getPrototypeOf({}))},wR=bR,TR=G0,nE="value",$x=`
  `,es={};es.assert=function(e,r){return r=r||{},function(a){var d=Lh(e,a);if(d){var _=mw(d,r);throw r.apiName&&(_=r.apiName+": "+_),new Error(_)}}};es.shape=function(r){var a=MR(r);return function(_){var x=Lh(es.plainObject,_);if(x)return x;for(var E,o,D=[],V=0;V<a.length;V++)E=a[V].key,o=a[V].value,x=Lh(o,_[E]),x&&D.push([E].concat(x));return D.length<2?D[0]:function(X){D=D.map(function(Se){var _e=Se[0],Re=mw(Se,X).split(`
`).join($x);return"- "+_e+": "+Re});var Z=X.path.join("."),he=Z===nE?"":" of "+Z;return"The following properties"+he+" have invalid values:"+$x+D.join($x)}}};es.strictShape=function(r){var a=es.shape(r);return function(_){var x=a(_);if(x)return x;var E=Object.keys(_).reduce(function(o,D){return r[D]===void 0&&o.push(D),o},[]);if(E.length!==0)return function(){return"The following keys are invalid: "+E.join(", ")}}};es.arrayOf=function(r){return rE(r)};es.tuple=function(){var r=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return rE(r)};function rE(e){var r=Array.isArray(e),a=function(d){return r?e[d]:e};return function(_){var x=Lh(es.plainArray,_);if(x)return x;if(r&&_.length!==e.length)return"an array with "+e.length+" items";for(var E=0;E<_.length;E++)if(x=Lh(a(E),_[E]),x)return[E].concat(x)}}es.required=function(r){function a(d){return d==null?function(_){return sE(_,oE(_.path)?"cannot be undefined/null.":"is required.")}:r.apply(this,arguments)}return a.__required=!0,a};es.oneOfType=function(){var r=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(d){var _=r.map(function(x){return Lh(x,d)}).filter(Boolean);if(_.length===r.length)return _.every(function(x){return x.length===1&&typeof x[0]=="string"})?ER(_.map(function(x){return x[0]})):_.reduce(function(x,E){return E.length>x.length?E:x})}};es.equal=function(r){return function(d){if(d!==r)return JSON.stringify(r)}};es.oneOf=function(){var r=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),a=r.map(function(d){return es.equal(d)});return es.oneOfType.apply(this,a)};es.range=function(r){var a=r[0],d=r[1];return function(x){var E=Lh(es.number,x);if(E||x<a||x>d)return"number between "+a+" & "+d+" (inclusive)"}};es.any=function(){};es.boolean=function(r){if(typeof r!="boolean")return"boolean"};es.number=function(r){if(typeof r!="number")return"number"};es.plainArray=function(r){if(!Array.isArray(r))return"array"};es.plainObject=function(r){if(!wR(r))return"object"};es.string=function(r){if(typeof r!="string")return"string"};es.func=function(r){if(typeof r!="function")return"function"};function Lh(e,r){if(!(r==null&&!e.hasOwnProperty("__required"))){var a=e(r);if(a)return Array.isArray(a)?a:[a]}}function mw(e,r){var a=e.length,d=e[a-1],_=e.slice(0,a-1);return _.length===0&&(_=[nE]),r=TR(r,{path:_}),typeof d=="function"?d(r):sE(r,SR(d))}function ER(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function SR(e){return"must be "+CR(e)+"."}function CR(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function sE(e,r){var a=oE(e.path),d=e.path.join(".")+" "+r,_=a?"Item at position ":"";return _+d}function oE(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function MR(e){return Object.keys(e||{}).map(function(r){return{key:r,value:e[r]}})}es.validate=Lh;es.processMessage=mw;var AR=es,IR=G0,C0=AR;function kR(e){if(typeof window<"u")return e instanceof Jo.Blob||e instanceof Jo.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function DR(e,r){return C0.assert(C0.strictShape(e),r)}function PR(e){var r="date";if(typeof e=="boolean")return r;try{var a=new Date(e);if(a.getTime&&isNaN(a.getTime()))return r}catch{return r}}function LR(e){return C0.tuple(C0.number,C0.number)(e)}var RR=IR(C0,{file:kR,date:PR,coordinates:LR,assertShape:DR});function OR(e,r){var a=function(d,_){return r.indexOf(d)!==-1&&_!==void 0};return typeof r=="function"&&(a=r),Object.keys(e).filter(function(d){return a(d,e[d])}).reduce(function(d,_){return d[_]=e[_],d},{})}var zR=OR;function BR(e,r){return Object.keys(e).reduce(function(a,d){return a[d]=r(d,e[d]),a},{})}var FR=BR,NR=FR;function UR(e){return NR(e,function(r,a){return typeof a=="boolean"?JSON.stringify(a):a})}var jR=UR,VR=QT,$R=iE;function GR(e){return function(r){var a;VR.prototype.isPrototypeOf(r)?a=r:a=$R(r);var d=Object.create(e);return d.client=a,d}}var qR=GR,aE=G0,ir=RR,Ny=zR,lE=jR,WR=qR,_w={},cE=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];_w.forwardGeocode=function(e){ir.assertShape({query:ir.required(ir.string),mode:ir.oneOf("mapbox.places","mapbox.places-permanent"),countries:ir.arrayOf(ir.string),proximity:ir.oneOf(ir.coordinates,"ip"),types:ir.arrayOf(ir.oneOf(cE)),autocomplete:ir.boolean,bbox:ir.arrayOf(ir.number),limit:ir.number,language:ir.arrayOf(ir.string),routing:ir.boolean,fuzzyMatch:ir.boolean,worldview:ir.string})(e),e.mode=e.mode||"mapbox.places";var r=lE(aE({country:e.countries},Ny(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Ny(e,["mode","query"]),query:r})};_w.reverseGeocode=function(e){ir.assertShape({query:ir.required(ir.coordinates),mode:ir.oneOf("mapbox.places","mapbox.places-permanent"),countries:ir.arrayOf(ir.string),types:ir.arrayOf(ir.oneOf(cE)),bbox:ir.arrayOf(ir.number),limit:ir.number,language:ir.arrayOf(ir.string),reverseMode:ir.oneOf("distance","score"),routing:ir.boolean,worldview:ir.string})(e),e.mode=e.mode||"mapbox.places";var r=lE(aE({country:e.countries},Ny(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Ny(e,["mode","query"]),query:r})};var HR=WR(_w);let ZR="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",uE=e=>crypto.getRandomValues(new Uint8Array(e)),dE=(e,r,a)=>{let d=(2<<Math.log(e.length-1)/Math.LN2)-1,_=-~(1.6*d*r/e.length);return(x=r)=>{let E="";for(;;){let o=a(_),D=_;for(;D--;)if(E+=e[o[D]&d]||"",E.length===x)return E}}},YR=(e,r=21)=>dE(e,r,uE),XR=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((r,a)=>(a&=63,a<36?r+=a.toString(36):a<62?r+=(a-26).toString(36).toUpperCase():a>62?r+="-":r+="_",r),"");const KR=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:YR,customRandom:dE,nanoid:XR,random:uE,urlAlphabet:ZR},Symbol.toStringTag,{value:"Module"})),JR=AE(KR);var QR=JR.nanoid;function hE(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}hE.prototype={select:function(e,r){var a=this.getSelectedIndex(e,r),d=this.getEventPayload("search.select",r);if(d.resultIndex=a,d.resultPlaceName=e.place_name,d.resultId=e.id,!(a===this.lastSentIndex&&d.queryString===this.lastSentInput||a==-1)&&(this.lastSentIndex=a,this.lastSentInput=d.queryString,!!d.queryString))return this.push(d)},start:function(e){var r=this.getEventPayload("search.start",e);if(r.queryString)return this.push(r)},keyevent:function(e,r){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var a=this.getEventPayload("search.keystroke",r);if(a.lastAction=e.key,!!a.queryString)return this.push(a)}},send:function(e,r){if(!this.enableEventLogging)return r?r():void 0;var a=this.getRequestOptions(e);this.request(a,function(d){if(d)return this.handleError(d,r);if(r)return r()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var r={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return r},getEventPayload:function(e,r){var a;r.options.proximity?typeof r.options.proximity=="object"?a=[r.options.proximity.longitude,r.options.proximity.latitude]:r.options.proximity==="ip"?a=[999,999]:a=r.options.proximity:a=null;var d=r._map?r._map.getZoom():void 0,_={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:r.options.autocomplete,fuzzyMatch:r.options.fuzzyMatch,proximity:a,limit:r.options.limit,routing:r.options.routing,worldview:r.options.worldview,mapZoom:d,keyboardLocale:this.locale};return e==="search.select"?_.queryString=r.inputString:e!="search.select"&&r._inputEl?_.queryString=r._inputEl.value:_.queryString=r.inputString,_},request:function(e,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(this.readyState==4)return this.status==204?r(null):r(this.statusText)},a.open(e.method,e.host+"/"+e.path,!0);for(var d in e.headers){var _=e.headers[d];a.setRequestHeader(d,_)}a.send(e.body)},handleError:function(e,r){if(r)return r(e)},generateSessionID:function(){return QR()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,r){if(r._typeahead){var a=r._typeahead.data,d=e.id,_=a.map(function(E){return E.id}),x=_.indexOf(d);return x}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,r){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||r)&&this.flush()},remove:function(){this.flush()}};var eO=hE,tO={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},iO={placeholder:tO},F3={},nO={get exports(){return F3},set exports(e){F3=e}};(function(e){(function(r,a,d){e.exports?e.exports=d():r[a]=d()})(Jo,"subtag",function(){var r="",a=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function d(D){return D.match(a)||[]}function _(D){return d(D).filter(function(V,X){return V&&X})}function x(D){return D=d(D),{language:D[1]||r,extlang:D[2]||r,script:D[3]||r,region:D[4]||r}}function E(D,V,X){Object.defineProperty(D,V,{value:X,enumerable:!0})}function o(D,V,X){function Z(he){return d(he)[D]||r}E(Z,"pattern",V),E(x,X,Z)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),E(x,"split",_),x})})(nO);function fE(){}fE.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(r,a){window.navigator.geolocation.getCurrentPosition(r,a,e)})}};var rO=fE;function sO(e,r){const a=pE(e),d=["address","street","place","country"];var _;if(typeof r=="function")return r(a);const x=d.indexOf(r);return x===-1?_=d:_=d.slice(x),_.reduce(function(E,o){return a[o]?(E!==""&&(E=E+", "),E+a[o]):E},"")}function pE(e){const r=e.address||"",a=e.text||"",d=e.place_name||"",x={address:d.split(",")[0],houseNumber:r,street:a,placeName:d};return e.context.forEach(function(E){const o=E.id.split(".")[0];x[o]=E.text}),x}const oO=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var aO={transformFeatureToGeolocationText:sO,getAddressInfo:pE,REVERSE_GEOCODE_COORD_RGX:oO},lO=uL,cO=AL,Rf=G0,uO=zy.EventEmitter,t8=zL,Gx=vR,qx=HR,dO=eO,hO=iO,fO=F3,pO=rO,i8=aO;const gh={FORWARD:0,LOCAL:1,REVERSE:2};function mO(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function mE(e){this._eventEmitter=new uO,this.options=Rf({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new pO}mE.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var r=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+r[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"}},addTo:function(e){function r(a,d){if(!document.body.contains(d))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const _=a.onAdd();d.appendChild(_)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)r(this,e);else if(typeof e=="string"){const a=document.querySelectorAll(e);if(a.length===0)throw new Error("Element ",e,"not found.");if(a.length>1)throw new Error("Geocoder can only be added to a single html element");r(this,a[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=qx(Gx({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new dO(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var r=this.container=document.createElement("div");r.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var a=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",cO(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(V){this.eventManager.keyevent(V,this)}.bind(this));var d=document.createElement("div");d.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var _=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(_),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),d.appendChild(this._clearEl),d.appendChild(this._loadingEl),r.appendChild(a),r.appendChild(this._inputEl),r.appendChild(d),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var x=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(x),d.appendChild(this._geolocateEl),this._showGeolocateButton()}var E=this._typeahead=new lO(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),E.getItemValue=this.options.getItemValue;var o=E.list.draw,D=this._footerNode=mO();return E.list.draw=function(){o.call(this),D.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),D.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(D)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),r},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const r={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(r),this._fly(r),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(r),this._showClearButton(),this.fresh=!1;const a={limit:1,language:[this.options.language],query:r.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const d=r.geometry.coordinates[0]+","+r.geometry.coordinates[1];this._setInputValue(d),this._eventEmitter.emit("result",{result:r})}else this.geocoderService.reverseGeocode(a).send().then(function(d){const _=d.body.features[0];if(_){const x=i8.transformFeatureToGeolocationText(_,this.options.addressAccuracy);this._setInputValue(x),_.user_coordinates=r.geometry.coordinates,this._eventEmitter.emit("result",{result:_})}else this._eventEmitter.emit("result",{result:{user_coordinates:r.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,r){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");return a.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),a.setAttribute("viewBox","0 0 18 18"),a.setAttribute("xml:space","preserve"),a.setAttribute("width",18),a.setAttribute("height",18),a.innerHTML=r,a},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var r=(e.clipboardData||window.clipboardData).getData("text");r.length>=this.options.minLength&&this._geocode(r)},_onKeyDown:function(e){var r=27,a=9;if(e.keyCode===r&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var d=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,_=d?d.value:"";if(!_)return this.fresh=!0,e.keyCode!==a&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[a,r,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&d.value.length>=this.options.minLength&&this._geocode(d.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var r;if(e.properties&&t8[e.properties.short_code])r=Rf({},this.options.flyTo),this._map&&this._map.fitBounds(t8[e.properties.short_code].bbox,r);else if(e.bbox){var a=e.bbox;r=Rf({},this.options.flyTo),this._map&&this._map.fitBounds([[a[0],a[1]],[a[2],a[3]]],r)}else{var d={zoom:this.options.zoom};r=Rf({},d,this.options.flyTo),e.center?r.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(r.center=e.geometry.coordinates),this._map&&this._map.flyTo(r)}},_requestType:function(e,r){var a;return e.localGeocoderOnly?a=gh.LOCAL:e.reverseGeocode&&i8.REVERSE_GEOCODE_COORD_RGX.test(r)?a=gh.REVERSE:a=gh.FORWARD,a},_setupConfig:function(e,r){const a=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],d=/[\s,]+/;var _=this,x=a.reduce(function(o,D){if(_.options[D]===void 0||_.options[D]===null)return o;["countries","types","language"].indexOf(D)>-1?o[D]=_.options[D].split(d):o[D]=_.options[D];const V=typeof _.options[D].longitude=="number"&&typeof _.options[D].latitude=="number";if(D==="proximity"&&V){const X=_.options[D].longitude,Z=_.options[D].latitude;o[D]=[X,Z]}return o},{});switch(e){case gh.REVERSE:{var E=r.split(d).map(function(o){return parseFloat(o,10)});_.options.flipCoordinates||E.reverse(),x.types&&x.types[0],x=Rf(x,{query:E,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(o){o in x&&delete x[o]})}break;case gh.FORWARD:{const o=r.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(o)&&(r=r.replace(/,/g," ")),x=Rf(x,{query:r})}break}return x},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const r=this._requestType(this.options,e),a=this._setupConfig(r,e);var d;switch(r){case gh.LOCAL:d=Promise.resolve();break;case gh.FORWARD:d=this.geocoderService.forwardGeocode(a).send();break;case gh.REVERSE:d=this.geocoderService.reverseGeocode(a).send();break}var _=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],x=[],E=null;return d.catch(function(o){E=o}.bind(this)).then(function(o){this._hideLoadingIcon();var D={};return o?o.statusCode=="200"&&(D=o.body,D.request=o.request,D.headers=o.headers):D={type:"FeatureCollection",features:[]},D.config=a,this.fresh&&(this.eventManager.start(this),this.fresh=!1),D.features=D.features?_.concat(D.features):_,this.options.externalGeocoder?(x=this.options.externalGeocoder(e,D.features)||Promise.resolve([]),x.then(function(V){return D.features=D.features?V.concat(D.features):V,D},function(){return D})):D}.bind(this)).then(function(o){if(E)throw E;this.options.filter&&o.features.length&&(o.features=o.features.filter(this.options.filter)),o.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",o),this._typeahead.update(o.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",o))}.bind(this)).catch(function(o){this._hideLoadingIcon(),this._hideAttribution(),_.length&&this.options.localGeocoder||x.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(_)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:_}),this._eventEmitter.emit("error",{error:o})}.bind(this)),d},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var r=this;e.relatedTarget&&r._clear(e)},_onQueryResult:function(e){var r=e.body;if(r.features.length){var a=r.features[0];this._typeahead.selected=a,this._inputEl.value=a.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],r=fO.language(e),a=hO.placeholder[r];if(a)return a}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,r=!0){return this.options.proximity=e,r&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var r=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||r,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=qx(Gx({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=qx(Gx({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var r={color:"#4668F2"},a=Rf({},r,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(a),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,r){return this._eventEmitter.on(e,r),this},off:function(e,r){return this._eventEmitter.removeListener(e,r),this.eventManager.remove(),this}};var _O=mE;function gO(){return{map:b0("mapbox-map")}}var Wx=new Map,yO=/onMb([A-Z])(.+)/;function vO(e){return Wx.has(e)||Wx.set(e,e.replace(yO,(r,a,d)=>a.toLowerCase()+d)),Wx.get(e)}function _E(e,r,a=[],d=null){const _=B4(),x=c2(()=>Object.entries(_).filter(([V,X])=>V.startsWith("on")&&typeof X=="function").map(([V])=>V)),E=new Map;function o(V){Array.isArray(V)&&V.forEach(X=>{const Z=E.get(X);typeof Z=="function"&&Z()})}function D(V){Array.isArray(V)&&V.forEach(X=>{const Z=vO(X);if(!a.includes(Z))return;const he=(...Se)=>{e(`mb-${Z}`,...Se)};d?(vo(r).on(Z,d,he),E.set(X,()=>{vo(r).off(Z,d,he)})):(vo(r).on(Z,he),E.set(X,()=>{vo(r).off(Z,he)}))})}ku(x,(V,X)=>{const Z=Array.isArray(V)?(X??[]).filter(Se=>!V.includes(Se)):X??[],he=Array.isArray(X)?(V??[]).filter(Se=>!X.includes(Se)):V??[];if(vo(r))o(Z),D(he);else{const Se=ku(r,_e=>{_e&&(o(Z),D(he),Se())})}},{immediate:!0})}function xO(e){return e.charAt(0).toUpperCase()+e.slice(1)}function gE(e,r,a){function d(_){Object.keys(e).filter(x=>e[x]!==void 0&&e[x]!==null).forEach(x=>{var E,o;const D=x==="mapStyle"?"setStyle":`set${xO(x)}`,V=typeof _[D]=="function",X=typeof a[x]>"u"||"bind"in a[x]?(o=(E=a[x])==null?void 0:E.bind)!=null?o:!1:!0;if(!V||!X)return;const{type:Z}=e[x],he={deep:Z===Object||Array.isArray(Z)&&Z.includes(Object)};ku(()=>e[x],Se=>{_[D](Se)},he)})}if(vo(r))d(vo(r));else{const _=ku(r,x=>{x&&(d(x),_())})}}function bO(e,{propsConfig:r,props:a,emit:d,events:_=[]}){const{map:x}=gO(),E=Th();return Array.isArray(_)&&_.length&&_E(d,E,_),typeof r<"u"&&gE(a,E,r),ku(()=>a.position,o=>{vo(x)&&vo(x).removeControl(vo(E)).addControl(vo(E),o)}),rp(async()=>{const o=new e(a);vo(x)&&vo(x).addControl(o,a.position),await Jy(),E.value=o}),U0(()=>{vo(E)&&vo(x)&&vo(x).removeControl(vo(E))}),{control:E,map:x}}var yE=(e,r)=>{const a=e.__vccOpts||e;for(const[d,_]of r)a[d]=_;return a};if(!Cd)throw new Error("mapboxgl is not installed.");if(!_O)throw new Error("MapboxGeocoder is not installed.");var wO={key:0},TO={key:1};if(!Cd)throw new Error("mapboxgl is not installed.");var{LngLatBounds:n8,LngLat:EO}=Cd,r8={accessToken:{type:String,default:"no-token"},container:{type:[typeof HTMLElement<"u"&&HTMLElement,String],default:void 0},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},minPitch:{type:Number,default:0},maxPitch:{type:Number,default:60},mapStyle:{type:[Object,String],required:!0},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},pitchWithRotate:{type:Boolean,default:!0},clickTolerance:{type:Number,default:3},attributionControl:{type:Boolean,default:!0},customAttribution:{type:[String,Array],default:null},logoPosition:{type:String,default:"bottom-left"},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},antialias:{type:Boolean,default:!1},refreshExpiredTiles:{type:Boolean,default:!0},maxBounds:{type:[n8,Array],default:void 0},scrollZoom:{type:[Boolean,Object],default:!0},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:[Boolean,Object],default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default:!0},trackResize:{type:Boolean,default:!0},center:{type:[EO,Array,Object],default:()=>[0,0]},zoom:{type:Number,default:0},bearing:{type:Number,default:0},pitch:{type:Number,default:0},bounds:{type:[n8,Array],default:void 0},fitBoundsOptions:{type:Object,default:null},renderWorldCopies:{type:Boolean,default:!0},maxTileCacheSize:{type:Number,default:null},localIdeographFontFamily:{type:String,default:"sans-serif"},transformRequest:{type:Function,default:null},collectResourceTiming:{type:Boolean,default:!1},fadeDuration:{type:Number,default:300},crossSourceCollisions:{type:Boolean,default:!0}},SO=["boxzoomcancel","boxzoomend","boxzoomstart","click","contextmenu","data","dataloading","dblclick","drag","dragend","dragstart","error","idle","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","move","moveend","movestart","pitch","pitchend","pitchstart","remove","render","resize","rotate","rotateend","rotatestart","sourcedata","sourcedataloading","styledata","styledataloading","styleimagemissing","touchcancel","touchend","touchmove","touchstart","webglcontextlost","webglcontextrestored","wheel","zoom","zoomend","zoomstart"],CO={inheritAttrs:!1},MO=Object.assign(CO,{__name:"MapboxMap",props:r8,setup(e,{expose:r,emit:a}){const d=e,_=Th();hb("mapbox-map",_);const x=Th(),E=Th(!1),o=c2(()=>{const{accessToken:D,mapStyle:V,...X}=d;return!X.container&&x.value&&(X.container=x.value),{style:V,...X}});return _E(a,_,SO),gE(d,_,r8),rp(()=>{Cd.accessToken=d.accessToken,_.value=new Cd.Map(o.value),_.value.on("load",()=>{E.value=!0}),a("mb-created",_.value);const D=new ResizeObserver(()=>{_.value.resize()});D.observe(o.value.container),U0(()=>{D.disconnect(),_.value.remove()})}),r({map:_}),(D,V)=>(so(),ea(Hs,null,[un("div",Eb({ref_key:"root",ref:x},D.$attrs),null,16),E.value?(so(),ea("div",wO,[r3(D.$slots,"default")])):(so(),ea("div",TO,[r3(D.$slots,"loader")]))],64))}}),vE=yE(MO,[["__file","/home/runner/work/vue-mapbox-gl/vue-mapbox-gl/packages/vue-mapbox-gl/components/MapboxMap.vue"]]);if(!Cd)throw new Error("mapboxgl is not installed.");var s8={showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0},visualizePitch:{type:Boolean,default:!1},position:{type:String,default:"top-right",bind:!1}},AO={__name:"MapboxNavigationControl",props:s8,setup(e,{expose:r}){const a=e,{NavigationControl:d}=Cd,{control:_}=bO(d,{props:a,propsConfig:s8});return r({control:_}),(x,E)=>(so(),ea("div"))}},xE=yE(AO,[["__file","/home/runner/work/vue-mapbox-gl/vue-mapbox-gl/packages/vue-mapbox-gl/components/MapboxNavigationControl.vue"]]);const bE="/build/assets/ship-c94d8078.png",k2=(e,r)=>{const a=e.__vccOpts||e;for(const[d,_]of r)a[d]=_;return a},IO={data(){return{isExpand:!1,keyword:null}},methods:{searchExpand(){this.isExpand=!this.isExpand;let e=this.$refs.searchBody;this.isExpand?(e.style.display="block",this.$refs.cSearch.style.bottom="40px"):(e.style.display="none",this.$refs.cSearch.style.bottom="unset")},search(){this.keyword.length>3&&!this.isExpand&&this.searchExpand(),this.keyword.length==0&&this.isExpand&&this.searchExpand()}}},kO={class:"ships-list position-absolute",ref:"cSearch"},DO={class:"card",style:{height:"100%"}},PO={class:"card-header search"},LO={action:"#",method:"get",style:{width:"100%"}},RO={class:"input-icon"},OO=j0('<span class="input-icon-addon"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="10" cy="10" r="7"></circle><line x1="21" y1="21" x2="15" y2="15"></line></svg></span>',1),zO={class:"card-actions btn-actions"},BO={key:0,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-left",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},FO=un("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),NO=un("polyline",{points:"15 6 9 12 15 18"},null,-1),UO=[FO,NO],jO={key:1,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-down",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},VO=un("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),$O=un("polyline",{points:"6 9 12 15 18 9"},null,-1),GO=[VO,$O],qO={class:"card-body card-body-scrollable card-body-scrollable-shadow search-body",ref:"searchBody"},WO={class:"divide-y"},HO=j0('<div class="row"><div class="col-auto"><span class="avatar" style="background-image:url(./static/avatars/002m.jpg);"></span></div><div class="col p-0"><div class="text-truncate"> GAS WIDURI </div><div class="text-muted text-sm">IMO 100002</div></div><div class="col-auto"><div class="badge bg-success"></div><span class="text-xs ml-1">Online</span></div></div>',1),ZO=[HO];function YO(e,r,a,d,_,x){return so(),ea("div",kO,[un("div",DO,[un("div",PO,[un("form",LO,[un("div",RO,[OO,f4(un("input",{type:"text",onKeyup:r[0]||(r[0]=(...E)=>x.search&&x.search(...E)),"onUpdate:modelValue":r[1]||(r[1]=E=>_.keyword=E),class:"form-control",placeholder:"Search…","aria-label":"Search in website"},null,544),[[V1,_.keyword]])])]),un("div",zO,[un("a",{href:"#",class:"btn-action",onClick:r[2]||(r[2]=(...E)=>x.searchExpand&&x.searchExpand(...E))},[_.isExpand?j1("",!0):(so(),ea("svg",BO,UO)),_.isExpand?(so(),ea("svg",jO,GO)):j1("",!0)])])]),un("div",qO,[un("div",WO,[(so(),ea(Hs,null,o2(700,E=>un("div",{key:E},ZO)),64))])],512)])],512)}const XO=k2(IO,[["render",YO]]),KO={data(){return{isExpand:!0}},methods:{notifExpand(){this.isExpand=!this.isExpand;let e=this.$refs.notifBody;this.isExpand?(e.style.display="block",this.$refs.cSearch.style.bottom="150px"):(e.style.display="none",this.$refs.cSearch.style.bottom="unset")}}},D2=e=>(lb("data-v-98245400"),e=e(),cb(),e),JO={class:"ships-notification position-absolute",ref:"cSearch"},QO={class:"card",style:{height:"100%"}},ez={class:"card-header search"},tz=j0('<h4 class="card-title" data-v-98245400><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-v-98245400><path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-98245400></path><path d="M10 5a2 2 0 0 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6" data-v-98245400></path><path d="M9 17v1a3 3 0 0 0 6 0v-1" data-v-98245400></path></svg> Notifications </h4>',1),iz={class:"card-actions btn-actions"},nz={key:0,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-left",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},rz=D2(()=>un("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),sz=D2(()=>un("polyline",{points:"15 6 9 12 15 18"},null,-1)),oz=[rz,sz],az={key:1,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-down",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},lz=D2(()=>un("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),cz=D2(()=>un("polyline",{points:"6 9 12 15 18 9"},null,-1)),uz=[lz,cz],dz={class:"card-body card-body-scrollable card-body-scrollable-shadow notif-body",ref:"notifBody"},hz={class:"divide-y"},fz=j0('<div class="row" data-v-98245400><div class="col-auto" data-v-98245400><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-building-broadcast-tower" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-v-98245400><path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-98245400></path><circle cx="12" cy="12" r="1" data-v-98245400></circle><path d="M16.616 13.924a5 5 0 1 0 -9.23 .004" data-v-98245400></path><path d="M20.307 15.469a9 9 0 1 0 -16.615 0" data-v-98245400></path><path d="M9 21l3 -9l3 9" data-v-98245400></path><path d="M10 19h4" data-v-98245400></path></svg></div><div class="col" data-v-98245400> Lorem ipsum dolor sit amet conse, adipisicing elit. <div class="text-muted text-sm" data-v-98245400>22/07/2022 08:00</div></div></div>',1),pz=[fz];function mz(e,r,a,d,_,x){return so(),ea("div",JO,[un("div",QO,[un("div",ez,[tz,un("div",iz,[un("a",{href:"#",class:"btn-action",onClick:r[0]||(r[0]=(...E)=>x.notifExpand&&x.notifExpand(...E))},[_.isExpand?j1("",!0):(so(),ea("svg",nz,oz)),_.isExpand?(so(),ea("svg",az,uz)):j1("",!0)])])]),un("div",dz,[un("div",hz,[(so(),ea(Hs,null,o2(12,E=>un("div",null,pz)),64))])],512)])],512)}const _z=k2(KO,[["render",mz],["__scopeId","data-v-98245400"]]);var gz=["second","minute","hour","day","week","month","year"];function yz(e,r){if(r===0)return["just now","right now"];var a=gz[Math.floor(r/2)];return e>1&&(a+="s"),[e+" "+a+" ago","in "+e+" "+a]}var vz=["秒","分钟","小时","天","周","个月","年"];function xz(e,r){if(r===0)return["刚刚","片刻后"];var a=vz[~~(r/2)];return[e+" "+a+"前",e+" "+a+"后"]}var N3={},wE=function(e,r){N3[e]=r},bz=function(e){return N3[e]||N3.en_US},Hx=[60,60,24,7,365/7/12,12];function o8(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function wz(e,r){var a=e<0?1:0;e=Math.abs(e);for(var d=e,_=0;e>=Hx[_]&&_<Hx.length;_++)e/=Hx[_];return e=Math.floor(e),_*=2,e>(_===0?9:1)&&(_+=1),r(e,_,d)[a].replace("%s",e.toString())}function Tz(e,r){var a=r?o8(r):new Date;return(+a-+o8(e))/1e3}var Ez=function(e,r,a){var d=Tz(e,a&&a.relativeDate);return wz(d,bz(r))};wE("en_US",yz);wE("zh_CN",xz);const Sz={components:{"x-search":XO,"x-notification":_z,MapboxMap:vE,MapboxNavigationControl:xE},data(){return{map:null,current:[],timer:null}},mounted(){this.timer=setInterval(()=>{},1e3)},methods:{async loaded(){let{data:e}=await axios.get("/api/vessel/navi");e.forEach(r=>{this.positionShip(r)})},pointerLocation(e){let r=e.lngLat.wrap();this.$refs.pointerInfo.innerHTML=`<span> ${r.lat.toFixed(5)}</span><span> ${r.lng.toFixed(5)}</span>`},positionShip(e){if(!e.navigation)return;let r=this;this.map.loadImage(bE,(d,_)=>{if(d)throw d;this.map.addImage(`ship-${e.id}`,_)}),this.map.addSource(`ship-points-${e.id}`,{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e.navigation.lng,e.navigation.lat]},properties:{scale:1,id:e.id,heading:e.navigation.heading,name:e.name,image:e.image,sog:e.navigation.sog,cog:e.navigation.cog,last_update:Ez(e.navigation.updated_at+"+7")}}]}}),this.map.addLayer({id:`ship-positions-${e.id}`,type:"symbol",source:`ship-points-${e.id}`,layout:{"icon-image":`ship-${e.id}`,"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-size":.3,"icon-rotate":{property:"heading",stops:[[-360,-360],[0,0],[360,360]]},"icon-rotation-alignment":"map"}});const a=new Cd.Popup({closeButton:!1,closeOnClick:!1});this.map.on("click",`ship-positions-${e.id}`,d=>{let _=d.features[0].properties.id;location.href=`/vessel/${_}`}),this.map.on("mouseenter",`ship-positions-${e.id}`,d=>{r.map.getCanvas().style.cursor="pointer";const _=d.features[0].geometry.coordinates.slice(),x=`<b>${d.features[0].properties.name} [ID]</b> at ${d.features[0].properties.sog} <b>kn</b> / ${d.features[0].properties.cog}&deg;<br>last update: <b>${d.features[0].properties.last_update}</b>`;for(;Math.abs(d.lngLat.lng-_[0])>180;)_[0]+=d.lngLat.lng>_[0]?360:-360;a.setLngLat(_).setHTML(x).addTo(r.map)}),this.map.on("mouseleave",`ship-positions-${e.id}`,()=>{r.map.getCanvas().style.cursor="",a.remove()})},calcCrow(o,r,D,d){var _=6371,x=this.toRad(D-o),E=this.toRad(d-r),o=this.toRad(o),D=this.toRad(D),V=Math.sin(x/2)*Math.sin(x/2)+Math.sin(E/2)*Math.sin(E/2)*Math.cos(o)*Math.cos(D),X=2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V)),Z=_*X;return Z},toRad(e){return e*Math.PI/180}}},Cz={class:"position-relative"},Mz={class:"pointer-info",ref:"pointerInfo"};function Az(e,r,a,d,_,x){const E=Ff("x-search"),o=Ff("x-notification"),D=Ff("MapboxNavigationControl"),V=Ff("MapboxMap");return so(),ea("div",Cz,[Tr(E),Tr(o),un("div",Mz,null,512),Tr(V,{onMbCreated:r[0]||(r[0]=X=>_.map=X),onMbLoad:x.loaded,onMbMousemove:x.pointerLocation,style:{height:"calc(100vh - 128px)",width:"100%"},"access-token":"pk.eyJ1Ijoia3JvbmljayIsImEiOiJjaWxyZGZwcHQwOHRidWxrbnd0OTB0cDBzIn0.u2R3NY5PnevWH3cHRk6TWQ","map-style":"mapbox://styles/mapbox/navigation-day-v1",center:[118.987732,0],zoom:4},{default:r_(()=>[Tr(D,{position:"bottom-right"})]),_:1},8,["onMbLoad","onMbMousemove","center"])])}const Iz=k2(Sz,[["render",Az]]),kz=[{time:1673037001e3,id:"c78219c1-d81e-4d33-8984-e39fa3710bfa",ship_id:1,terminal_time:"2023-01-06 20:30:01",lat:-6.009818,lng:106.900525,wind_speed:17.4,wind_direction:21,heading:249.1,distance:88548.42,depth:-12,cog:282.6,sog:0,created_at:"2023-01-07 08:06:28",updated_at:"2023-01-07 08:06:28"},{time:1673037901e3,id:"ee8ec98d-526d-46bf-9d00-ec50433fafb3",ship_id:1,terminal_time:"2023-01-06 20:45:01",lat:-6.009707,lng:106.900482,wind_speed:19.6,wind_direction:15.4,heading:242.9,distance:88548.43,depth:-12.1,cog:358.3,sog:0,created_at:"2023-01-07 08:07:15",updated_at:"2023-01-07 08:07:15"},{time:1673038801e3,id:"22cab800-8d22-44fb-abc1-f5fafd1947a3",ship_id:1,terminal_time:"2023-01-06 21:00:01",lat:-6.00976,lng:106.90053,wind_speed:17.1,wind_direction:16.8,heading:247,distance:88548.44,depth:-12.3,cog:285.2,sog:.1,created_at:"2023-01-07 08:07:02",updated_at:"2023-01-07 08:07:02"},{time:1673039701e3,id:"ee9bb42d-3fac-455b-8140-e032fc3abdcc",ship_id:1,terminal_time:"2023-01-06 21:15:01",lat:-6.0098,lng:106.900533,wind_speed:16.5,wind_direction:19.6,heading:247.1,distance:88548.45,depth:-12.1,cog:208.1,sog:.1,created_at:"2023-01-07 08:06:48",updated_at:"2023-01-07 08:06:48"},{time:1673040601e3,id:"9bf240fd-0767-4f62-94c9-91a4ef95f0cd",ship_id:1,terminal_time:"2023-01-06 21:30:01",lat:-6.009815,lng:106.900515,wind_speed:18.8,wind_direction:21,heading:248,distance:88548.46,depth:-12.1,cog:192.2,sog:0,created_at:"2023-01-07 08:06:43",updated_at:"2023-01-07 08:06:43"},{time:1673041501e3,id:"f4b05071-bc72-44fd-b58b-63e43e69112b",ship_id:1,terminal_time:"2023-01-06 21:45:01",lat:-6.00981,lng:106.900533,wind_speed:18.8,wind_direction:19.6,heading:0,distance:0,depth:-12.1,cog:79.9,sog:0,created_at:"2023-01-07 08:07:29",updated_at:"2023-01-07 08:07:29"},{time:1673042401e3,id:"2d2f89d4-18d5-4ac9-b08b-949a44cad43a",ship_id:1,terminal_time:"2023-01-06 22:00:01",lat:-6.009765,lng:106.900487,wind_speed:15.1,wind_direction:16.8,heading:0,distance:0,depth:-12.1,cog:11.7,sog:0,created_at:"2023-01-07 08:08:00",updated_at:"2023-01-07 08:08:00"},{time:1673043301e3,id:"e79b359c-6eb7-41e3-a526-c4c06282e62a",ship_id:1,terminal_time:"2023-01-06 22:15:01",lat:-6.009688,lng:106.900457,wind_speed:18.6,wind_direction:11.2,heading:242.7,distance:88548.47,depth:-12.1,cog:121.2,sog:0,created_at:"2023-01-07 08:07:47",updated_at:"2023-01-07 08:07:47"},{time:1673044201e3,id:"2750d1e6-4e3c-4946-a145-3e66185627ef",ship_id:1,terminal_time:"2023-01-06 22:30:01",lat:-6.009655,lng:106.900433,wind_speed:14.7,wind_direction:12.5,heading:242.4,distance:88548.48,depth:-12.1,cog:185.9,sog:.1,created_at:"2023-01-07 08:07:40",updated_at:"2023-01-07 08:07:40"},{time:1673045101e3,id:"85d26971-e86f-4f16-8fa5-bc711fcb9b91",ship_id:1,terminal_time:"2023-01-06 22:45:01",lat:-6.0096,lng:106.900403,wind_speed:13.2,wind_direction:11.2,heading:239.6,distance:88548.48,depth:-12.1,cog:180.1,sog:0,created_at:"2023-01-07 08:08:22",updated_at:"2023-01-07 08:08:22"},{time:1673046001e3,id:"06fa9922-e8d6-41c9-886e-e5295949399c",ship_id:1,terminal_time:"2023-01-06 23:00:01",lat:-16.056667,lng:116.8825,wind_speed:16.3,wind_direction:16.8,heading:241.5,distance:88548.49,depth:-12.1,cog:0,sog:0,created_at:"2023-01-07 08:08:11",updated_at:"2023-01-07 08:08:11"},{time:1673046901e3,id:"557403a0-0bc2-42f1-9a07-646c8d66822e",ship_id:1,terminal_time:"2023-01-06 23:15:01",lat:-6.009613,lng:106.900427,wind_speed:18.6,wind_direction:16.8,heading:240.7,distance:88548.49,depth:-12.3,cog:.9,sog:0,created_at:"2023-01-07 08:08:10",updated_at:"2023-01-07 08:08:10"},{time:1673047801e3,id:"bb7144ef-0827-4d3d-9c7b-b0bb7881f441",ship_id:1,terminal_time:"2023-01-06 23:30:01",lat:-6.009658,lng:106.900407,wind_speed:14.1,wind_direction:21,heading:0,distance:0,depth:-12.3,cog:192.5,sog:0,created_at:"2023-01-07 08:07:55",updated_at:"2023-01-07 08:07:55"},{time:1673048701e3,id:"8df2a863-e7d4-4c66-ab22-310f7ac661f2",ship_id:1,terminal_time:"2023-01-06 23:45:01",lat:-6.009732,lng:106.900458,wind_speed:15.7,wind_direction:21,heading:244.8,distance:88548.49,depth:-12.3,cog:152.6,sog:0,created_at:"2023-01-07 08:08:26",updated_at:"2023-01-07 08:08:26"},{time:1673049601e3,id:"e7d31596-5cc9-4fab-850b-c892908430b8",ship_id:1,terminal_time:"2023-01-07 00:00:01",lat:-6.009775,lng:106.900575,wind_speed:19.8,wind_direction:21,heading:250.9,distance:88548.5,depth:-12.3,cog:178.6,sog:.1,created_at:"2023-01-07 08:08:38",updated_at:"2023-01-07 08:08:38"},{time:1673050503e3,id:"1ae1dd53-7f4b-48cb-9aa3-af6f97274fdb",ship_id:1,terminal_time:"2023-01-07 00:15:03",lat:-6.010635,lng:106.898792,wind_speed:21.1,wind_direction:33.6,heading:236.2,distance:88548.61,depth:-12.3,cog:236.1,sog:2.5,created_at:"2023-01-07 08:09:21",updated_at:"2023-01-07 08:09:21"},{time:1673051403e3,id:"c12a6b0d-c9db-4451-a7c5-6f13c29e0954",ship_id:1,terminal_time:"2023-01-07 00:30:03",lat:-6.030335,lng:106.886345,wind_speed:19.8,wind_direction:54.9,heading:195.2,distance:88550.03,depth:-10.6,cog:193.8,sog:7.1,created_at:"2023-01-07 08:08:47",updated_at:"2023-01-07 08:08:47"},{time:1673052303e3,id:"c5971d9c-2c92-4736-950d-6734e6b305cd",ship_id:1,terminal_time:"2023-01-07 00:45:03",lat:-6.059783,lng:106.883237,wind_speed:19.6,wind_direction:67.5,heading:185.4,distance:88551.81,depth:-9.3,cog:182.4,sog:6.5,created_at:"2023-01-07 08:09:35",updated_at:"2023-01-07 08:09:35"},{time:1673053308e3,id:"bd9913a5-6be1-4c3b-89d1-938a9cf2f382",ship_id:1,terminal_time:"2023-01-07 01:01:48",lat:-6.08938,lng:106.883468,wind_speed:16.3,wind_direction:78.7,heading:0,distance:0,depth:-9,cog:161.9,sog:8.8,created_at:"2023-01-07 08:09:28",updated_at:"2023-01-07 08:09:28"},{time:1673054103e3,id:"aac0a1a7-cf35-4a7c-bdff-faef950524be",ship_id:1,terminal_time:"2023-01-07 01:15:03",lat:-6.095888,lng:106.902867,wind_speed:7.9,wind_direction:168.9,heading:0,distance:0,depth:-8.5,cog:97.1,sog:4.1,created_at:"2023-01-07 08:09:07",updated_at:"2023-01-07 08:09:07"},{time:1673055003e3,id:"db38b400-18fe-4637-84bc-441c4333900c",ship_id:1,terminal_time:"2023-01-07 01:30:03",lat:-6.100858,lng:106.906243,wind_speed:6.2,wind_direction:259,heading:0,distance:0,depth:-6,cog:181,sog:1,created_at:"2023-01-07 08:09:40",updated_at:"2023-01-07 08:09:40"},{time:1673055903e3,id:"52f58367-b5da-4516-99ac-401425b6889a",ship_id:1,terminal_time:"2023-01-07 01:45:03",lat:-6.101412,lng:106.90592,wind_speed:7.7,wind_direction:270.3,heading:0,distance:88555.15,depth:-2.1,cog:209.8,sog:0,created_at:"2023-01-07 08:09:32",updated_at:"2023-01-07 08:09:32"},{time:1673056803e3,id:"f8144029-2e71-4a9f-a077-871b58532749",ship_id:1,terminal_time:"2023-01-07 02:00:03",lat:-6.101405,lng:106.905882,wind_speed:3.3,wind_direction:280,heading:0,distance:88555.16,depth:-2.1,cog:349.2,sog:0,created_at:"2023-01-07 08:09:31",updated_at:"2023-01-07 08:09:31"},{time:1673057703e3,id:"03be7e48-aa1c-4ffb-8c39-402c203a283e",ship_id:1,terminal_time:"2023-01-07 02:15:03",lat:-6.101395,lng:106.905868,wind_speed:8.1,wind_direction:281.5,heading:359.9,distance:88555.18,depth:-2.1,cog:328.8,sog:.1,created_at:"2023-01-07 08:10:05",updated_at:"2023-01-07 08:10:05"},{time:1673058603e3,id:"fa44cb0f-6f3d-4e8d-b2b5-6540c952f48b",ship_id:1,terminal_time:"2023-01-07 02:30:03",lat:-6.101392,lng:106.90591,wind_speed:11,wind_direction:259,heading:359.9,distance:88555.18,depth:-2.1,cog:302,sog:0,created_at:"2023-01-07 08:10:07",updated_at:"2023-01-07 08:10:07"},{time:1673059503e3,id:"75810f78-b08f-42b1-a508-ee1b5d13c9e5",ship_id:1,terminal_time:"2023-01-07 02:45:03",lat:-6.101392,lng:106.90587,wind_speed:11,wind_direction:274.5,heading:359.7,distance:88555.19,depth:-2.1,cog:336.9,sog:.1,created_at:"2023-01-07 08:10:09",updated_at:"2023-01-07 08:10:09"},{time:1673060403e3,id:"b8076a15-7e98-4b6b-af9b-0261c6d1ce26",ship_id:1,terminal_time:"2023-01-07 03:00:03",lat:-6.101413,lng:106.905907,wind_speed:9.3,wind_direction:267.4,heading:359.5,distance:88555.2,depth:-2.1,cog:327.9,sog:0,created_at:"2023-01-07 08:09:38",updated_at:"2023-01-07 08:09:38"},{time:1673061303e3,id:"32656a8d-db24-44cc-af81-a149b2fa4e1f",ship_id:1,terminal_time:"2023-01-07 03:15:03",lat:-6.101405,lng:106.905922,wind_speed:8.5,wind_direction:270.3,heading:359.3,distance:88555.2,depth:-5.5,cog:34.4,sog:.1,created_at:"2023-01-07 08:10:40",updated_at:"2023-01-07 08:10:40"},{time:1673062203e3,id:"3e3fcfcf-19d1-4d33-857a-f68b14328338",ship_id:1,terminal_time:"2023-01-07 03:30:03",lat:-6.101402,lng:106.905877,wind_speed:6.2,wind_direction:268.8,heading:359.5,distance:88555.2,depth:-2.1,cog:292.1,sog:0,created_at:"2023-01-07 08:10:33",updated_at:"2023-01-07 08:10:33"},{time:1673063103e3,id:"1c4697c3-b6e6-4eb4-b165-94d5d36d3aa1",ship_id:1,terminal_time:"2023-01-07 03:45:03",lat:-6.10142,lng:106.905858,wind_speed:5.2,wind_direction:264.5,heading:359.7,distance:88555.2,depth:-2.1,cog:129.7,sog:0,created_at:"2023-01-07 08:10:44",updated_at:"2023-01-07 08:10:44"},{time:1673064003e3,id:"ba69338a-3d22-4a08-bb11-d3f886eb6c9b",ship_id:1,terminal_time:"2023-01-07 04:00:03",lat:-6.101392,lng:106.905878,wind_speed:5.6,wind_direction:264.5,heading:359.8,distance:88555.2,depth:-2.3,cog:233.4,sog:0,created_at:"2023-01-07 08:10:39",updated_at:"2023-01-07 08:10:39"},{time:1673064903e3,id:"bd930a40-a514-4c87-8044-e8633e1c1c52",ship_id:1,terminal_time:"2023-01-07 04:15:03",lat:-6.101395,lng:106.905902,wind_speed:6.4,wind_direction:252,heading:359.7,distance:88555.2,depth:0,cog:274.4,sog:0,created_at:"2023-01-07 08:11:40",updated_at:"2023-01-07 08:11:40"},{time:1673065803e3,id:"6544c411-e0b0-40bb-bf1e-efd22c3a2595",ship_id:1,terminal_time:"2023-01-07 04:30:03",lat:-6.101398,lng:106.905932,wind_speed:5.4,wind_direction:252,heading:359.7,distance:88555.2,depth:-2.5,cog:276.2,sog:0,created_at:"2023-01-07 08:11:26",updated_at:"2023-01-07 08:11:26"},{time:1673066703e3,id:"02b25b22-4c20-48a6-a3ad-5944f017c3b9",ship_id:1,terminal_time:"2023-01-07 04:45:03",lat:-6.101387,lng:106.9059,wind_speed:9.3,wind_direction:257.5,heading:0,distance:0,depth:-2.5,cog:163.2,sog:0,created_at:"2023-01-07 08:10:53",updated_at:"2023-01-07 08:10:53"},{time:1673067608e3,id:"523c3936-bffc-4662-9879-e3dff459febf",ship_id:1,terminal_time:"2023-01-07 05:00:08",lat:-6.101402,lng:106.905932,wind_speed:3.6,wind_direction:257.5,heading:359.7,distance:88555.21,depth:-2.5,cog:195.8,sog:0,created_at:"2023-01-07 08:11:05",updated_at:"2023-01-07 08:11:05"},{time:1673068503e3,id:"ccdee8cd-a739-471e-9dfc-0aa08c034f7a",ship_id:1,terminal_time:"2023-01-07 05:15:03",lat:-6.101402,lng:106.905907,wind_speed:6,wind_direction:257.5,heading:359.6,distance:88555.21,depth:-6.1,cog:162.3,sog:0,created_at:"2023-01-07 08:10:45",updated_at:"2023-01-07 08:10:45"},{time:1673069403e3,id:"d3d4589c-77e7-48fc-b418-c5957dae636d",ship_id:1,terminal_time:"2023-01-07 05:30:03",lat:-6.101398,lng:106.905877,wind_speed:7.7,wind_direction:263.1,heading:359.6,distance:88555.21,depth:-6,cog:295.8,sog:0,created_at:"2023-01-07 08:11:06",updated_at:"2023-01-07 08:11:06"},{time:1673070303e3,id:"9285db16-04b0-4d1a-812e-94fe03b78b0d",ship_id:1,terminal_time:"2023-01-07 05:45:03",lat:-6.101412,lng:106.90585,wind_speed:9.3,wind_direction:274.5,heading:359.6,distance:88555.21,depth:-2.6,cog:268.8,sog:0,created_at:"2023-01-07 08:11:37",updated_at:"2023-01-07 08:11:37"},{time:1673071203e3,id:"4cb25dd1-23a6-4a37-81de-b46cc1e8df0b",ship_id:1,terminal_time:"2023-01-07 06:00:03",lat:-6.101398,lng:106.905858,wind_speed:5.6,wind_direction:268.8,heading:359.6,distance:88555.21,depth:-2.8,cog:327.7,sog:0,created_at:"2023-01-07 08:12:02",updated_at:"2023-01-07 08:12:02"},{time:1673072103e3,id:"6ebeea29-07ba-4384-8f78-c0244a1a85e8",ship_id:1,terminal_time:"2023-01-07 06:15:03",lat:-6.101398,lng:106.905865,wind_speed:6,wind_direction:268.8,heading:0,distance:0,depth:-2.8,cog:324.2,sog:0,created_at:"2023-01-07 08:11:27",updated_at:"2023-01-07 08:11:27"},{time:1673073003e3,id:"de3806a1-9032-426c-84dc-93a8c6d7c31d",ship_id:1,terminal_time:"2023-01-07 06:30:03",lat:-6.101413,lng:106.905873,wind_speed:3.6,wind_direction:256.1,heading:359.7,distance:88555.21,depth:-2.8,cog:5.8,sog:0,created_at:"2023-01-07 08:12:23",updated_at:"2023-01-07 08:12:23"},{time:1673073903e3,id:"65707fec-2ee3-473e-beeb-9b2e845a36ca",ship_id:1,terminal_time:"2023-01-07 06:45:03",lat:-6.101433,lng:106.905833,wind_speed:6.8,wind_direction:257.5,heading:359.7,distance:88555.21,depth:-2.8,cog:304.6,sog:0,created_at:"2023-01-07 08:12:19",updated_at:"2023-01-07 08:12:19"},{time:1673074803e3,id:"6fa32b36-f399-4d56-8fa7-bea17b414006",ship_id:1,terminal_time:"2023-01-07 07:00:03",lat:-6.101392,lng:106.905888,wind_speed:3.4,wind_direction:246.3,heading:0,distance:0,depth:-2.8,cog:93.1,sog:0,created_at:"2023-01-07 08:12:40",updated_at:"2023-01-07 08:12:40"},{time:1673075703e3,id:"67ff30a8-02ef-41c0-bd19-463ebbd32668",ship_id:1,terminal_time:"2023-01-07 07:15:03",lat:-6.101408,lng:106.905885,wind_speed:7.5,wind_direction:229.4,heading:359.7,distance:88555.21,depth:-2.8,cog:197,sog:0,created_at:"2023-01-07 08:12:42",updated_at:"2023-01-07 08:12:42"},{time:1673094603e3,id:"3f01785d-ea13-49f9-b6ae-419329c8f20a",ship_id:1,terminal_time:"2023-01-07 12:30:03",lat:-6.101452,lng:106.905917,wind_speed:14.7,wind_direction:347.6,heading:0,distance:0,depth:-3.1,cog:35.3,sog:0,created_at:"2023-01-08 08:13:52",updated_at:"2023-01-08 08:13:52"},{time:1673095503e3,id:"317256ef-d958-4792-ac19-0af4678f296f",ship_id:1,terminal_time:"2023-01-07 12:45:03",lat:-6.101427,lng:106.905863,wind_speed:14.9,wind_direction:315.3,heading:359.7,distance:88555.22,depth:-3,cog:35.3,sog:0,created_at:"2023-01-08 08:24:39",updated_at:"2023-01-08 08:24:39"},{time:1673096403e3,id:"01638351-e630-4d24-a1b3-dc902b3abd82",ship_id:1,terminal_time:"2023-01-07 13:00:03",lat:-6.10141,lng:106.905895,wind_speed:17.3,wind_direction:326.5,heading:359.7,distance:88555.22,depth:-3,cog:91.4,sog:0,created_at:"2023-01-08 08:20:11",updated_at:"2023-01-08 08:20:11"},{time:1673097303e3,id:"70c8224a-27c3-469d-9482-f3b2e98f4bee",ship_id:1,terminal_time:"2023-01-07 13:15:03",lat:-6.101365,lng:106.905885,wind_speed:13.9,wind_direction:342,heading:359.7,distance:88555.22,depth:-3,cog:153.7,sog:0,created_at:"2023-01-08 08:07:44",updated_at:"2023-01-08 08:07:44"},{time:1673098203e3,id:"54be4b76-e5c1-4af2-b06a-d08e68ca8e6d",ship_id:1,terminal_time:"2023-01-07 13:30:03",lat:-6.101402,lng:106.905883,wind_speed:8.3,wind_direction:309.6,heading:359.9,distance:88555.22,depth:-2.8,cog:103.8,sog:0,created_at:"2023-01-08 08:05:41",updated_at:"2023-01-08 08:05:41"},{time:1673099103e3,id:"f45be026-3f21-4763-9f2e-599cfd772936",ship_id:1,terminal_time:"2023-01-07 13:45:03",lat:-6.101387,lng:106.90587,wind_speed:7.1,wind_direction:336.4,heading:359.6,distance:88555.22,depth:-3,cog:22,sog:0,created_at:"2023-01-08 08:25:15",updated_at:"2023-01-08 08:25:15"},{time:1673100003e3,id:"dda32aec-7c91-4a18-bc02-c6f8b1d47700",ship_id:1,terminal_time:"2023-01-07 14:00:03",lat:-6.101395,lng:106.905882,wind_speed:7.9,wind_direction:332.1,heading:0,distance:0,depth:-2.8,cog:57.4,sog:0,created_at:"2023-01-08 08:08:16",updated_at:"2023-01-08 08:08:16"},{time:1673100903e3,id:"b22e0b57-db66-4fe8-8773-39a691c334f9",ship_id:1,terminal_time:"2023-01-07 14:15:03",lat:-6.101398,lng:106.905873,wind_speed:8.3,wind_direction:350.5,heading:359.6,distance:88555.22,depth:-2.8,cog:37.9,sog:0,created_at:"2023-01-08 08:21:48",updated_at:"2023-01-08 08:21:48"},{time:1673101803e3,id:"4cb687f7-6740-478a-b9d8-7c415359678f",ship_id:1,terminal_time:"2023-01-07 14:30:03",lat:-6.101415,lng:106.90584,wind_speed:7.1,wind_direction:334.9,heading:359.7,distance:88555.23,depth:-2.8,cog:335.3,sog:0,created_at:"2023-01-08 08:14:53",updated_at:"2023-01-08 08:14:53"},{time:1673102703e3,id:"31d66256-54fa-4245-874b-a971ded2ac22",ship_id:1,terminal_time:"2023-01-07 14:45:03",lat:-6.10138,lng:106.905867,wind_speed:14.9,wind_direction:337.8,heading:359.7,distance:88555.23,depth:-2.8,cog:27.8,sog:0,created_at:"2023-01-08 08:03:26",updated_at:"2023-01-08 08:03:26"},{time:1673103603e3,id:"6e9c3626-321a-4c87-adb4-5e285a43cdf7",ship_id:1,terminal_time:"2023-01-07 15:00:03",lat:-6.101413,lng:106.905813,wind_speed:9.3,wind_direction:315.3,heading:359.6,distance:88555.24,depth:-2.6,cog:326.6,sog:.1,created_at:"2023-01-08 08:01:50",updated_at:"2023-01-08 08:01:50"},{time:1673104503e3,id:"dabbcbd4-70dc-48a7-9bf6-6a791bf70bf0",ship_id:1,terminal_time:"2023-01-07 15:15:03",lat:-6.101362,lng:106.905902,wind_speed:8.5,wind_direction:315.3,heading:359.6,distance:88555.25,depth:-2.6,cog:286.2,sog:0,created_at:"2023-01-08 08:14:31",updated_at:"2023-01-08 08:14:31"},{time:1673105403e3,id:"9ce52c58-26fe-4b79-acf6-efd91d7c3dea",ship_id:1,terminal_time:"2023-01-07 15:30:03",lat:-6.101402,lng:106.905895,wind_speed:8.7,wind_direction:290,heading:359.6,distance:88555.25,depth:-2.5,cog:39.8,sog:0,created_at:"2023-01-08 08:06:38",updated_at:"2023-01-08 08:06:38"},{time:1673106303e3,id:"fab10037-7bec-4b1b-a448-af671c2e5a09",ship_id:1,terminal_time:"2023-01-07 15:45:03",lat:-6.101377,lng:106.905907,wind_speed:9.1,wind_direction:302.5,heading:359.6,distance:88555.25,depth:-2.5,cog:11.5,sog:0,created_at:"2023-01-08 08:26:36",updated_at:"2023-01-08 08:26:36"},{time:1673107203e3,id:"72c4e9f4-b126-4cd5-af12-72d225bcc777",ship_id:1,terminal_time:"2023-01-07 16:00:03",lat:-6.101407,lng:106.90585,wind_speed:16.5,wind_direction:261,heading:359.5,distance:88555.26,depth:-2.5,cog:227.4,sog:0,created_at:"2023-01-08 08:29:59",updated_at:"2023-01-08 08:29:59"},{time:1673108103e3,id:"4dda9ef7-b131-499c-abb6-90d31b833212",ship_id:1,terminal_time:"2023-01-07 16:15:03",lat:-6.101415,lng:106.905928,wind_speed:7.7,wind_direction:274.5,heading:359.7,distance:88555.26,depth:-2.5,cog:276.8,sog:0,created_at:"2023-01-08 08:35:23",updated_at:"2023-01-08 08:35:23"},{time:1673109003e3,id:"eb055a93-284e-490c-b241-fc286a5245cb",ship_id:1,terminal_time:"2023-01-07 16:30:03",lat:-6.101398,lng:106.905935,wind_speed:18.4,wind_direction:281.5,heading:359.5,distance:88555.26,depth:-2.5,cog:150.5,sog:.1,created_at:"2023-01-08 08:19:17",updated_at:"2023-01-08 08:19:17"},{time:1673109903e3,id:"70fe1092-70d1-4e3e-9e6a-880e95753afe",ship_id:1,terminal_time:"2023-01-07 16:45:03",lat:-6.101348,lng:106.905867,wind_speed:12.8,wind_direction:244.9,heading:359.6,distance:88555.27,depth:-2.3,cog:354.6,sog:0,created_at:"2023-01-08 08:39:36",updated_at:"2023-01-08 08:39:36"},{time:1673110803e3,id:"256314cb-dc49-4a3d-bfc0-33982995e693",ship_id:1,terminal_time:"2023-01-07 17:00:03",lat:-6.101383,lng:106.905903,wind_speed:12,wind_direction:291.4,heading:359.6,distance:88555.27,depth:-2.5,cog:354.6,sog:0,created_at:"2023-01-08 08:12:53",updated_at:"2023-01-08 08:12:53"},{time:1673111703e3,id:"3cec9ede-f851-4440-95b3-e72f237da615",ship_id:1,terminal_time:"2023-01-07 17:15:03",lat:-6.101377,lng:106.905882,wind_speed:9.9,wind_direction:292.8,heading:359.6,distance:88555.27,depth:-2.5,cog:311.3,sog:0,created_at:"2023-01-08 08:18:20",updated_at:"2023-01-08 08:18:20"},{time:1673112893e3,id:"da145ee1-2387-4054-9190-cfd1c2e5f63c",ship_id:1,terminal_time:"2023-01-07 17:34:53",lat:-6.101393,lng:106.905928,wind_speed:13.6,wind_direction:257.1,heading:359.6,distance:88555.27,depth:-2.5,cog:278.9,sog:0,created_at:"2023-01-08 08:26:11",updated_at:"2023-01-08 08:26:11"},{time:1673113508e3,id:"25b0fe9e-9b29-4029-a7db-9138ef1c0173",ship_id:1,terminal_time:"2023-01-07 17:45:08",lat:-6.101463,lng:106.90597,wind_speed:14.3,wind_direction:263.1,heading:359.6,distance:88555.27,depth:-2.5,cog:350.3,sog:.1,created_at:"2023-01-08 08:06:11",updated_at:"2023-01-08 08:06:11"},{time:1673114403e3,id:"d85ae345-eb3f-420f-ae10-c8f0c078fb2d",ship_id:1,terminal_time:"2023-01-07 18:00:03",lat:-6.101395,lng:106.90591,wind_speed:15.3,wind_direction:246.3,heading:359.6,distance:88555.28,depth:-2.5,cog:8.3,sog:0,created_at:"2023-01-08 08:21:44",updated_at:"2023-01-08 08:21:44"},{time:1673115303e3,id:"388136b9-939e-4016-bb94-69e2165428e2",ship_id:1,terminal_time:"2023-01-07 18:15:03",lat:-6.101417,lng:106.905957,wind_speed:11,wind_direction:237,heading:359.7,distance:88555.28,depth:-2.5,cog:320.6,sog:0,created_at:"2023-01-08 08:27:27",updated_at:"2023-01-08 08:27:27"},{time:1673116203e3,id:"718bb2e9-5a2a-47c8-9899-3f613b300f13",ship_id:1,terminal_time:"2023-01-07 18:30:03",lat:-6.1014230000000005,lng:106.90596,wind_speed:10.1,wind_direction:252,heading:359.7,distance:88555.28,depth:-2.5,cog:262,sog:.3,created_at:"2023-01-08 08:35:15",updated_at:"2023-01-08 08:35:15"},{time:1673117103e3,id:"58662b8e-afe4-4e8d-9d81-e92fd5bd6de1",ship_id:1,terminal_time:"2023-01-07 18:45:03",lat:-6.101337,lng:106.905935,wind_speed:16.7,wind_direction:259,heading:359.6,distance:88555.28,depth:-2.5,cog:265.6,sog:0,created_at:"2023-01-08 08:24:32",updated_at:"2023-01-08 08:24:32"},{time:1673118003e3,id:"9dcc2e7d-fc6a-4026-8452-732e033d633d",ship_id:1,terminal_time:"2023-01-07 19:00:03",lat:-6.101408,lng:106.905923,wind_speed:12.6,wind_direction:270.4,heading:0,distance:0,depth:-2.5,cog:251.1,sog:.1,created_at:"2023-01-08 08:31:10",updated_at:"2023-01-08 08:31:10"},{time:1673118903e3,id:"d77f77c6-11e3-4d58-8a75-767aacbdee1c",ship_id:1,terminal_time:"2023-01-07 19:15:03",lat:-6.101403,lng:106.905935,wind_speed:9.3,wind_direction:274.5,heading:359.7,distance:88555.28,depth:-2.5,cog:242.4,sog:.1,created_at:"2023-01-08 08:32:39",updated_at:"2023-01-08 08:32:39"},{time:1673119803e3,id:"8676ff37-9bd6-4f53-8ba7-7eaad2bd126b",ship_id:1,terminal_time:"2023-01-07 19:30:03",lat:-6.101392,lng:106.905928,wind_speed:15.3,wind_direction:247.7,heading:359.7,distance:88555.28,depth:-2.5,cog:252.7,sog:0,created_at:"2023-01-08 08:34:35",updated_at:"2023-01-08 08:34:35"},{time:1673120703e3,id:"5a10a4d6-445d-4387-9c6a-e002b768b83b",ship_id:1,terminal_time:"2023-01-07 19:45:03",lat:-6.101385,lng:106.905918,wind_speed:9.1,wind_direction:259,heading:359.7,distance:88555.29,depth:-2.5,cog:142.2,sog:0,created_at:"2023-01-08 08:31:06",updated_at:"2023-01-08 08:31:06"},{time:1673121603e3,id:"b43588b1-8bee-476f-ba71-4ee6dc1af694",ship_id:1,terminal_time:"2023-01-07 20:00:03",lat:-6.101337,lng:106.90589,wind_speed:9.9,wind_direction:268.8,heading:359.6,distance:88555.29,depth:-6,cog:205.2,sog:0,created_at:"2023-01-08 08:47:20",updated_at:"2023-01-08 08:47:20"},{time:1673122503e3,id:"6ef2d5ef-f541-4f4e-98b6-8369ed0998fb",ship_id:1,terminal_time:"2023-01-07 20:15:03",lat:-6.101357,lng:106.90591,wind_speed:9.1,wind_direction:274.5,heading:359.7,distance:88555.29,depth:-2.5,cog:133.2,sog:0,created_at:"2023-01-08 08:45:51",updated_at:"2023-01-08 08:45:51"},{time:1673123403e3,id:"9ac81b12-4d78-42fa-926f-0e27f16a6abe",ship_id:1,terminal_time:"2023-01-07 20:30:03",lat:-6.101347,lng:106.905885,wind_speed:11.2,wind_direction:268.8,heading:359.7,distance:88555.29,depth:-2.5,cog:129.4,sog:0,created_at:"2023-01-08 08:43:43",updated_at:"2023-01-08 08:43:43"},{time:1673124303e3,id:"9c3c0c72-7ede-45ce-8cd0-45f46d05cf4f",ship_id:1,terminal_time:"2023-01-07 20:45:03",lat:-6.101392,lng:106.905992,wind_speed:9.9,wind_direction:280,heading:359.7,distance:88555.29,depth:-2.5,cog:269.2,sog:0,created_at:"2023-01-08 08:42:24",updated_at:"2023-01-08 08:42:24"},{time:1673125203e3,id:"180ab6f9-b46b-4175-9c0c-cfbd47d75a75",ship_id:1,terminal_time:"2023-01-07 21:00:03",lat:-6.10138,lng:106.905928,wind_speed:6.2,wind_direction:259,heading:359.6,distance:88555.29,depth:-2.5,cog:273,sog:.1,created_at:"2023-01-08 08:44:15",updated_at:"2023-01-08 08:44:15"},{time:1673126103e3,id:"aca79290-d836-4f81-b20c-db5c3d1c9ed5",ship_id:1,terminal_time:"2023-01-07 21:15:03",lat:-6.101395,lng:106.905888,wind_speed:8.5,wind_direction:270.3,heading:359.7,distance:88555.29,depth:-5.5,cog:284.7,sog:0,created_at:"2023-01-08 08:44:39",updated_at:"2023-01-08 08:44:39"},{time:1673127003e3,id:"3d37da9b-e78d-4c94-9628-2f75dfacd975",ship_id:1,terminal_time:"2023-01-07 21:30:03",lat:-6.10136,lng:106.905928,wind_speed:7.1,wind_direction:291.4,heading:359.7,distance:88555.29,depth:-2.5,cog:288.6,sog:0,created_at:"2023-01-08 08:43:59",updated_at:"2023-01-08 08:43:59"},{time:1673127903e3,id:"c85fc3eb-6766-4f04-b655-698bee2b112a",ship_id:1,terminal_time:"2023-01-07 21:45:03",lat:-6.101362,lng:106.905857,wind_speed:6.9,wind_direction:257.5,heading:359.8,distance:88555.29,depth:-2.3,cog:157.1,sog:0,created_at:"2023-01-08 08:48:25",updated_at:"2023-01-08 08:48:25"},{time:1673128803e3,id:"e0371ba8-d853-4a52-b612-ef2dd4db6f02",ship_id:1,terminal_time:"2023-01-07 22:00:03",lat:-6.101388,lng:106.905863,wind_speed:9.9,wind_direction:248,heading:359.6,distance:88555.29,depth:-2.5,cog:157.1,sog:0,created_at:"2023-01-08 08:46:57",updated_at:"2023-01-08 08:46:57"},{time:1673129703e3,id:"6aabe75f-fedb-42af-8440-6af78469558d",ship_id:1,terminal_time:"2023-01-07 22:15:03",lat:-6.101375,lng:106.905928,wind_speed:6.9,wind_direction:287.1,heading:359.7,distance:88555.29,depth:-2.3,cog:216.5,sog:0,created_at:"2023-01-08 08:54:20",updated_at:"2023-01-08 08:54:20"},{time:1673130603e3,id:"4068d565-7aa1-427b-8727-8edb9c691ecc",ship_id:1,terminal_time:"2023-01-07 22:30:03",lat:-6.101373,lng:106.905895,wind_speed:7.9,wind_direction:287.1,heading:359.8,distance:88555.29,depth:-2.5,cog:205.4,sog:0,created_at:"2023-01-08 08:51:59",updated_at:"2023-01-08 08:51:59"},{time:1673131503e3,id:"701364de-f35b-4f45-b2f2-65f53ffe574a",ship_id:1,terminal_time:"2023-01-07 22:45:03",lat:-6.101392,lng:106.905898,wind_speed:12.4,wind_direction:287.1,heading:359.8,distance:88555.29,depth:-2.5,cog:222.7,sog:0,created_at:"2023-01-08 08:48:51",updated_at:"2023-01-08 08:48:51"},{time:1673132403e3,id:"658bd145-0a61-4c2d-94fb-1bf054a3264c",ship_id:1,terminal_time:"2023-01-07 23:00:03",lat:-6.101363,lng:106.905863,wind_speed:7.9,wind_direction:274.5,heading:359.7,distance:88555.29,depth:-5.6,cog:129.2,sog:0,created_at:"2023-01-08 08:48:31",updated_at:"2023-01-08 08:48:31"},{time:1673133303e3,id:"58f92089-82d0-4bd5-9832-04677dc76be5",ship_id:1,terminal_time:"2023-01-07 23:15:03",lat:-6.101358,lng:106.905842,wind_speed:8.7,wind_direction:294.1,heading:359.7,distance:88555.29,depth:-2.5,cog:128.4,sog:0,created_at:"2023-01-08 08:55:51",updated_at:"2023-01-08 08:55:51"},{time:1673134203e3,id:"4736fadb-7f73-40fa-a2de-b9fa0a792b3e",ship_id:1,terminal_time:"2023-01-07 23:30:03",lat:-6.101348,lng:106.905888,wind_speed:10.6,wind_direction:297,heading:359.6,distance:88555.29,depth:-2.5,cog:344,sog:0,created_at:"2023-01-08 08:59:25",updated_at:"2023-01-08 08:59:25"},{time:1673135178e3,id:"bf83dfc7-4cb9-4b55-965a-1452ed8e111e",ship_id:1,terminal_time:"2023-01-07 23:46:18",lat:-6.101382,lng:106.905902,wind_speed:10.8,wind_direction:281.6,heading:359.7,distance:88555.29,depth:-5.6,cog:32.8,sog:0,created_at:"2023-01-08 08:58:17",updated_at:"2023-01-08 08:58:17"},{time:1673136003e3,id:"1e9d6cbb-3da5-46c2-8c1d-7c43e9e347d7",ship_id:1,terminal_time:"2023-01-08 00:00:03",lat:-6.10139,lng:106.905845,wind_speed:6.9,wind_direction:270.3,heading:0,distance:0,depth:-5.8,cog:57.4,sog:0,created_at:"2023-01-08 08:54:51",updated_at:"2023-01-08 08:54:51"},{time:1673136904e3,id:"9a56f8c9-a895-41ed-88cb-c63672950f2c",ship_id:1,terminal_time:"2023-01-08 00:15:04",lat:-6.101378,lng:106.905893,wind_speed:6.8,wind_direction:274.5,heading:359.7,distance:88555.29,depth:-5.6,cog:336.6,sog:0,created_at:"2023-01-08 08:58:04",updated_at:"2023-01-08 08:58:04"},{time:1673137804e3,id:"71adab84-32a5-43f8-9a16-44dd7cdf4c02",ship_id:1,terminal_time:"2023-01-08 00:30:04",lat:-6.101417,lng:106.905875,wind_speed:2.5,wind_direction:268.8,heading:359.6,distance:88555.29,depth:-2.5,cog:80.7,sog:0,created_at:"2023-01-08 08:56:16",updated_at:"2023-01-08 08:56:16"},{time:1673138704e3,id:"2b4e0681-bca8-423e-968c-9cbb94911ade",ship_id:1,terminal_time:"2023-01-08 00:45:04",lat:-6.101407,lng:106.905868,wind_speed:6.6,wind_direction:270.3,heading:359.5,distance:88555.29,depth:-2.5,cog:281.8,sog:0,created_at:"2023-01-08 09:02:07",updated_at:"2023-01-08 09:02:07"},{time:1673139604e3,id:"a5757655-280b-4850-9423-55cce4abb3d4",ship_id:1,terminal_time:"2023-01-08 01:00:04",lat:-6.101452,lng:106.905895,wind_speed:8.7,wind_direction:302.5,heading:359.6,distance:88555.29,depth:-2.5,cog:159.5,sog:0,created_at:"2023-01-08 09:02:50",updated_at:"2023-01-08 09:02:50"},{time:1673140504e3,id:"38de4f6b-61c5-490a-a785-9c11f352809e",ship_id:1,terminal_time:"2023-01-08 01:15:04",lat:-6.101402,lng:106.905898,wind_speed:7.9,wind_direction:292.8,heading:359.8,distance:88555.29,depth:-2.5,cog:171.7,sog:0,created_at:"2023-01-08 09:05:18",updated_at:"2023-01-08 09:05:18"},{time:1673141404e3,id:"0a1776c1-1425-41e8-91b9-367b23512d33",ship_id:1,terminal_time:"2023-01-08 01:30:04",lat:-6.101413,lng:106.905882,wind_speed:5.6,wind_direction:297,heading:359.7,distance:88555.29,depth:-2.5,cog:149.7,sog:.2,created_at:"2023-01-08 09:02:30",updated_at:"2023-01-08 09:02:30"},{time:1673142304e3,id:"25822b6e-cc26-4120-a534-707fae66297d",ship_id:1,terminal_time:"2023-01-08 01:45:04",lat:-6.101383,lng:106.905855,wind_speed:3.8,wind_direction:291.4,heading:359.7,distance:88555.3,depth:-2.5,cog:211.1,sog:0,created_at:"2023-01-08 09:05:11",updated_at:"2023-01-08 09:05:11"},{time:1673143204e3,id:"e6ba87a3-cf19-4484-886d-ed8a0850dd54",ship_id:1,terminal_time:"2023-01-08 02:00:04",lat:-6.101395,lng:106.905888,wind_speed:6.4,wind_direction:268.8,heading:359.8,distance:88555.31,depth:-2.5,cog:342.7,sog:.1,created_at:"2023-01-08 09:04:03",updated_at:"2023-01-08 09:04:03"},{time:1673144104e3,id:"828812ff-8977-46cf-8927-bec2687ff712",ship_id:1,terminal_time:"2023-01-08 02:15:04",lat:-6.101372,lng:106.905882,wind_speed:3.8,wind_direction:268.8,heading:359.8,distance:88555.33,depth:-2.6,cog:297.3,sog:.1,created_at:"2023-01-08 09:13:33",updated_at:"2023-01-08 09:13:33"},{time:1673145004e3,id:"25389b81-dc4a-46e8-ad1c-1660eb03a08f",ship_id:1,terminal_time:"2023-01-08 02:30:04",lat:-6.101395,lng:106.905907,wind_speed:7.5,wind_direction:264.5,heading:359.8,distance:88555.33,depth:-2.6,cog:315.1,sog:0,created_at:"2023-01-08 09:06:48",updated_at:"2023-01-08 09:06:48"},{time:1673145904e3,id:"0047c054-acbc-4a29-9ccd-52ba001da3a7",ship_id:1,terminal_time:"2023-01-08 02:45:04",lat:-6.101398,lng:106.905878,wind_speed:6.6,wind_direction:264.5,heading:0,distance:0,depth:-2.6,cog:336.3,sog:0,created_at:"2023-01-08 09:11:48",updated_at:"2023-01-08 09:11:48"},{time:1673146804e3,id:"829090c9-17ba-4477-8592-deb4da86dc63",ship_id:1,terminal_time:"2023-01-08 03:00:04",lat:-6.101402,lng:106.905895,wind_speed:5.4,wind_direction:264.5,heading:359.7,distance:88555.35,depth:-2.6,cog:17.1,sog:0,created_at:"2023-01-08 09:06:28",updated_at:"2023-01-08 09:06:28"},{time:1673147709e3,id:"1098eec6-77fe-4726-9e36-eea8a0a47b48",ship_id:1,terminal_time:"2023-01-08 03:15:09",lat:-6.101387,lng:106.905917,wind_speed:6.2,wind_direction:260.4,heading:359.7,distance:88555.35,depth:-2.6,cog:23.6,sog:0,created_at:"2023-01-08 09:09:10",updated_at:"2023-01-08 09:09:10"},{time:1673148604e3,id:"04d539ed-3c9f-49ed-aec5-3d4926391e7e",ship_id:1,terminal_time:"2023-01-08 03:30:04",lat:-6.101397,lng:106.90589,wind_speed:6.8,wind_direction:260.4,heading:359.7,distance:88555.36,depth:-2.6,cog:65.8,sog:0,created_at:"2023-01-08 09:15:33",updated_at:"2023-01-08 09:15:33"},{time:1673149504e3,id:"e5e010fd-95da-4dfb-a12f-ef9f733b8165",ship_id:1,terminal_time:"2023-01-08 03:45:04",lat:-6.101377,lng:106.905885,wind_speed:5.6,wind_direction:274.5,heading:359.6,distance:88555.36,depth:-2.6,cog:67.7,sog:0,created_at:"2023-01-08 09:10:57",updated_at:"2023-01-08 09:10:57"},{time:1673150404e3,id:"dcfe2cd6-711d-461f-90f7-4bf6c4a1b9ee",ship_id:1,terminal_time:"2023-01-08 04:00:04",lat:-6.101388,lng:106.905938,wind_speed:2.5,wind_direction:274.5,heading:359.5,distance:88555.36,depth:-2.6,cog:223,sog:.1,created_at:"2023-01-08 09:14:36",updated_at:"2023-01-08 09:14:36"},{time:1673151304e3,id:"ddf54501-6fbc-456e-bf5a-c79e016e9b00",ship_id:1,terminal_time:"2023-01-08 04:15:04",lat:-6.101403,lng:106.905913,wind_speed:6.4,wind_direction:280,heading:359.7,distance:88555.36,depth:-2.8,cog:188.7,sog:.1,created_at:"2023-01-08 09:21:25",updated_at:"2023-01-08 09:21:25"},{time:1673152204e3,id:"081423ac-f636-4f7a-9daf-5f4dab29c404",ship_id:1,terminal_time:"2023-01-08 04:30:04",lat:-6.101418,lng:106.90596,wind_speed:9.3,wind_direction:287.1,heading:0,distance:0,depth:-2.8,cog:159.5,sog:0,created_at:"2023-01-08 09:15:25",updated_at:"2023-01-08 09:15:25"},{time:1673153104e3,id:"c45710ce-5dc1-4757-ab7a-4d938442da15",ship_id:1,terminal_time:"2023-01-08 04:45:04",lat:-6.101403,lng:106.905892,wind_speed:8.1,wind_direction:274.5,heading:359.8,distance:88555.36,depth:-2.8,cog:125.5,sog:0,created_at:"2023-01-08 09:19:12",updated_at:"2023-01-08 09:19:12"},{time:1673154004e3,id:"15229013-0e45-4bf3-9949-1ea58fc0908a",ship_id:1,terminal_time:"2023-01-08 05:00:04",lat:-6.101338,lng:106.905882,wind_speed:9.1,wind_direction:259,heading:359.9,distance:88555.36,depth:-2.6,cog:136.1,sog:0,created_at:"2023-01-08 09:20:01",updated_at:"2023-01-08 09:20:01"},{time:1673154904e3,id:"d27c1b20-889b-4499-ba40-6e6c614178f8",ship_id:1,terminal_time:"2023-01-08 05:15:04",lat:-6.101348,lng:106.905915,wind_speed:10.1,wind_direction:257.5,heading:359.8,distance:88555.36,depth:-2.8,cog:151.6,sog:.1,created_at:"2023-01-08 09:23:27",updated_at:"2023-01-08 09:23:27"},{time:1673155804e3,id:"9a444a98-e7df-4f70-975d-85d5d62e290f",ship_id:1,terminal_time:"2023-01-08 05:30:04",lat:-6.101363,lng:106.905898,wind_speed:6.9,wind_direction:259,heading:359.7,distance:88555.36,depth:-2.8,cog:33.5,sog:0,created_at:"2023-01-08 09:21:23",updated_at:"2023-01-08 09:21:23"},{time:1673156704e3,id:"fc24c51c-214a-4d78-be5a-4c1c26802e09",ship_id:1,terminal_time:"2023-01-08 05:45:04",lat:-6.101373,lng:106.90589,wind_speed:9.9,wind_direction:257.5,heading:359.6,distance:88555.36,depth:-2.8,cog:325.1,sog:0,created_at:"2023-01-08 09:25:36",updated_at:"2023-01-08 09:25:36"},{time:1673157604e3,id:"32c80507-1d8e-4091-9311-50e25e285dae",ship_id:1,terminal_time:"2023-01-08 06:00:04",lat:-6.101387,lng:106.905902,wind_speed:13.9,wind_direction:257.5,heading:359.6,distance:88555.36,depth:-3,cog:329.3,sog:0,created_at:"2023-01-08 09:24:42",updated_at:"2023-01-08 09:24:42"},{time:1673158504e3,id:"ae9d8d04-f8b0-4358-bd9c-d9972e370315",ship_id:1,terminal_time:"2023-01-08 06:15:04",lat:-6.10138,lng:106.905895,wind_speed:6.8,wind_direction:257.5,heading:359.6,distance:88555.36,depth:-3,cog:248.9,sog:0,created_at:"2023-01-08 09:26:04",updated_at:"2023-01-08 09:26:04"},{time:1673159404e3,id:"c0502c55-c023-4042-9af3-bd285c098a35",ship_id:1,terminal_time:"2023-01-08 06:30:04",lat:-6.101373,lng:106.905888,wind_speed:14.1,wind_direction:270.9,heading:359.6,distance:88555.36,depth:-3,cog:292.9,sog:0,created_at:"2023-01-08 09:21:20",updated_at:"2023-01-08 09:21:20"},{time:1673160304e3,id:"034a249c-02ba-437a-8aac-456cab629385",ship_id:1,terminal_time:"2023-01-08 06:45:04",lat:-6.101378,lng:106.90591,wind_speed:11.4,wind_direction:257.5,heading:359.7,distance:88555.36,depth:-3.1,cog:80.9,sog:0,created_at:"2023-01-08 09:23:12",updated_at:"2023-01-08 09:23:12"},{time:1673161204e3,id:"54e8bfab-005b-4826-8206-a37b4decfd0b",ship_id:1,terminal_time:"2023-01-08 07:00:04",lat:-6.101373,lng:106.905887,wind_speed:8.5,wind_direction:257.5,heading:359.7,distance:88555.36,depth:-3.1,cog:80.9,sog:0,created_at:"2023-01-08 09:27:00",updated_at:"2023-01-08 09:27:00"},{time:1673162104e3,id:"a8f38c56-ba61-4de6-80d1-3ea034df630a",ship_id:1,terminal_time:"2023-01-08 07:15:04",lat:-6.101405,lng:106.90589,wind_speed:12.4,wind_direction:242.1,heading:359.7,distance:88555.36,depth:-3,cog:167.3,sog:0,created_at:"2023-01-08 09:31:10",updated_at:"2023-01-08 09:31:10"},{time:1673163004e3,id:"1d43c613-abc9-4209-bfb3-9d54ecc33748",ship_id:1,terminal_time:"2023-01-08 07:30:04",lat:-6.10138,lng:106.905852,wind_speed:15.5,wind_direction:229.4,heading:0,distance:0,depth:0,cog:4.1,sog:0,created_at:"2023-01-08 09:28:35",updated_at:"2023-01-08 09:28:35"},{time:1673163904e3,id:"58b7809e-b846-4fba-b046-e7a1c2f3f84c",ship_id:1,terminal_time:"2023-01-08 07:45:04",lat:-6.101412,lng:106.905907,wind_speed:6.6,wind_direction:245.6,heading:359.8,distance:88555.36,depth:-3.1,cog:145.5,sog:0,created_at:"2023-01-08 09:31:46",updated_at:"2023-01-08 09:31:46"},{time:1673164809e3,id:"4ef617d0-0adb-40ea-bad4-e57322f78fe8",ship_id:1,terminal_time:"2023-01-08 08:00:09",lat:-6.101433,lng:106.905895,wind_speed:7.9,wind_direction:292.8,heading:359.7,distance:88555.36,depth:-3.1,cog:145.5,sog:0,created_at:"2023-01-08 09:31:36",updated_at:"2023-01-08 09:31:36"},{time:1673165704e3,id:"384723ff-16ea-4a47-bd1b-987a84141b3e",ship_id:1,terminal_time:"2023-01-08 08:15:04",lat:-6.101402,lng:106.905893,wind_speed:9.7,wind_direction:247.7,heading:359.7,distance:88555.36,depth:-3.1,cog:145.5,sog:0,created_at:"2023-01-08 09:34:02",updated_at:"2023-01-08 09:34:02"},{time:1673166604e3,id:"4a0c6afb-a827-4d1b-b943-57faa3c5ccb7",ship_id:1,terminal_time:"2023-01-08 08:30:04",lat:-6.1014230000000005,lng:106.905875,wind_speed:6.8,wind_direction:257.5,heading:359.7,distance:88555.36,depth:-3.1,cog:242.5,sog:0,created_at:"2023-01-08 09:35:08",updated_at:"2023-01-08 09:35:08"},{time:1673167504e3,id:"4c434111-7470-469b-82a2-10a66585fbe7",ship_id:1,terminal_time:"2023-01-08 08:45:04",lat:-6.101393,lng:106.905873,wind_speed:9.7,wind_direction:259,heading:359.6,distance:88555.36,depth:-3.3,cog:73.3,sog:0,created_at:"2023-01-08 09:36:15",updated_at:"2023-01-08 09:36:15"},{time:1673168404e3,id:"64a1f0ab-872f-4c4a-8e98-84e8f7f2aa2b",ship_id:1,terminal_time:"2023-01-08 09:00:04",lat:-6.101383,lng:106.905898,wind_speed:8.3,wind_direction:267.4,heading:359.6,distance:88555.36,depth:-3.3,cog:91.6,sog:.1,created_at:"2023-01-08 09:37:22",updated_at:"2023-01-08 09:37:22"},{time:1673169304e3,id:"15eb000c-e49a-4288-b9ba-29120dd16bbc",ship_id:1,terminal_time:"2023-01-08 09:15:04",lat:-6.101392,lng:106.905832,wind_speed:13.6,wind_direction:315.8,heading:359.7,distance:88555.36,depth:-3.3,cog:104.3,sog:0,created_at:"2023-01-08 09:38:28",updated_at:"2023-01-08 09:38:28"},{time:1673170204e3,id:"5013bfeb-e3b7-40fe-956e-67d86ef062fc",ship_id:1,terminal_time:"2023-01-08 09:30:04",lat:-6.10143,lng:106.905883,wind_speed:10.1,wind_direction:291.4,heading:359.8,distance:88555.36,depth:-3.3,cog:111.5,sog:0,created_at:"2023-01-08 09:39:35",updated_at:"2023-01-08 09:39:35"},{time:1673171104e3,id:"c42441d4-6121-4fd5-a94e-40e8a5538f88",ship_id:1,terminal_time:"2023-01-08 09:45:04",lat:-6.101408,lng:106.9059,wind_speed:6.8,wind_direction:325.1,heading:0,distance:0,depth:-3.3,cog:111.5,sog:0,created_at:"2023-01-08 09:45:06",updated_at:"2023-01-08 09:45:06"},{time:1673172004e3,id:"b88f901e-4b17-4f4d-950a-3bbe7040bfe9",ship_id:1,terminal_time:"2023-01-08 10:00:04",lat:-6.101438,lng:106.905878,wind_speed:7.3,wind_direction:282.8,heading:359.8,distance:88555.36,depth:-3.3,cog:116.3,sog:0,created_at:"2023-01-08 10:00:07",updated_at:"2023-01-08 10:00:07"},{time:1673172904e3,id:"ebab5955-d934-4330-9ccd-5d8d1496b18c",ship_id:1,terminal_time:"2023-01-08 10:15:04",lat:-6.101392,lng:106.905872,wind_speed:11.4,wind_direction:335,heading:359.7,distance:88555.36,depth:-3.3,cog:269.6,sog:0,created_at:"2023-01-08 10:15:06",updated_at:"2023-01-08 10:15:06"},{time:1673173804e3,id:"9f29317b-07a0-4caf-b754-11930dd5bd44",ship_id:1,terminal_time:"2023-01-08 10:30:04",lat:-6.101372,lng:106.905888,wind_speed:6.4,wind_direction:332.1,heading:359.7,distance:88555.36,depth:-3.3,cog:157.9,sog:0,created_at:"2023-01-08 10:30:06",updated_at:"2023-01-08 10:30:06"},{time:1673174704e3,id:"962a2be6-5432-402b-9958-84252f281c30",ship_id:1,terminal_time:"2023-01-08 10:45:04",lat:-6.101405,lng:106.905885,wind_speed:10.3,wind_direction:336.4,heading:0,distance:0,depth:-3.3,cog:272.5,sog:0,created_at:"2023-01-08 10:45:05",updated_at:"2023-01-08 10:45:05"},{time:1673175604e3,id:"ce56291e-c8e3-440f-92e0-921395a84182",ship_id:1,terminal_time:"2023-01-08 11:00:04",lat:-6.10143,lng:106.905957,wind_speed:11.6,wind_direction:325.1,heading:0,distance:0,depth:-3.3,cog:104.1,sog:0,created_at:"2023-01-08 11:00:06",updated_at:"2023-01-08 11:00:06"},{time:1673176504e3,id:"b25e30f7-bd69-432d-af8c-a46b5423e161",ship_id:1,terminal_time:"2023-01-08 11:15:04",lat:-6.101388,lng:106.905873,wind_speed:7.9,wind_direction:332.1,heading:0,distance:0,depth:-3.3,cog:312.3,sog:0,created_at:"2023-01-08 11:15:06",updated_at:"2023-01-08 11:15:06"},{time:1673177404e3,id:"0ccfc4ba-378e-4ad6-a4db-6b35d30a1a23",ship_id:1,terminal_time:"2023-01-08 11:30:04",lat:-6.101405,lng:106.905895,wind_speed:7.9,wind_direction:319.5,heading:359.7,distance:88555.37,depth:-3.3,cog:83.1,sog:.1,created_at:"2023-01-08 11:30:06",updated_at:"2023-01-08 11:30:06"},{time:1673178304e3,id:"b458b825-fbb6-40f4-b251-c347a72a39ab",ship_id:1,terminal_time:"2023-01-08 11:45:04",lat:-6.101403,lng:106.905887,wind_speed:9.5,wind_direction:332.1,heading:0,distance:0,depth:-3.3,cog:75.4,sog:0,created_at:"2023-01-08 11:45:05",updated_at:"2023-01-08 11:45:05"},{time:1673179204e3,id:"25575159-9a0f-4a66-a7d0-20aea87d0feb",ship_id:1,terminal_time:"2023-01-08 12:00:04",lat:-6.101412,lng:106.905878,wind_speed:8.5,wind_direction:343.6,heading:359.6,distance:88555.37,depth:-3.3,cog:67,sog:0,created_at:"2023-01-08 12:00:06",updated_at:"2023-01-08 12:00:06"},{time:1673180104e3,id:"a3bdb7f9-22b7-4e38-b981-ff099e82bfb6",ship_id:1,terminal_time:"2023-01-08 12:15:04",lat:-6.101407,lng:106.90585,wind_speed:13.8,wind_direction:349,heading:359.6,distance:88555.37,depth:-3.3,cog:36.2,sog:0,created_at:"2023-01-09 08:01:28",updated_at:"2023-01-09 08:01:28"},{time:1673181004e3,id:"468f0650-9d89-4a66-a334-a4fac77e4728",ship_id:1,terminal_time:"2023-01-08 12:30:04",lat:-6.101405,lng:106.905903,wind_speed:19.4,wind_direction:281.5,heading:359.6,distance:88555.37,depth:-3.3,cog:282.7,sog:0,created_at:"2023-01-09 08:03:29",updated_at:"2023-01-09 08:03:29"},{time:1673181904e3,id:"03deb747-2062-4451-bd06-e9432e1f2596",ship_id:1,terminal_time:"2023-01-08 12:45:04",lat:-6.10138,lng:106.905892,wind_speed:14.5,wind_direction:287.1,heading:359.6,distance:88555.38,depth:-3.3,cog:308.6,sog:0,created_at:"2023-01-09 08:02:16",updated_at:"2023-01-09 08:02:16"},{time:1673182804e3,id:"d195359b-cc5d-4733-9a4a-c450f7ecdda8",ship_id:1,terminal_time:"2023-01-08 13:00:04",lat:-6.101337,lng:106.905855,wind_speed:12.2,wind_direction:291.4,heading:359.7,distance:88555.38,depth:-3.1,cog:137.7,sog:0,created_at:"2023-01-09 08:02:58",updated_at:"2023-01-09 08:02:58"},{time:1673183704e3,id:"46707f11-6637-4097-9f27-85c91102848f",ship_id:1,terminal_time:"2023-01-08 13:15:04",lat:-6.101385,lng:106.905878,wind_speed:11,wind_direction:281.5,heading:359.6,distance:88555.38,depth:-3.1,cog:153.4,sog:0,created_at:"2023-01-09 08:03:38",updated_at:"2023-01-09 08:03:38"},{time:1673184604e3,id:"44555a10-55f3-451d-8279-71fd68a98ddd",ship_id:1,terminal_time:"2023-01-08 13:30:04",lat:-6.101418,lng:106.905922,wind_speed:20,wind_direction:281.5,heading:359.7,distance:88555.38,depth:-3.1,cog:131.7,sog:0,created_at:"2023-01-09 08:01:25",updated_at:"2023-01-09 08:01:25"},{time:1673185504e3,id:"6f43d2f1-2e54-4989-a2b6-7b411249f2a8",ship_id:1,terminal_time:"2023-01-08 13:45:04",lat:-6.101397,lng:106.90586,wind_speed:15.7,wind_direction:298.3,heading:359.7,distance:88555.38,depth:-3.1,cog:51.2,sog:0,created_at:"2023-01-09 08:03:28",updated_at:"2023-01-09 08:03:28"},{time:1673186404e3,id:"e21e47e0-7761-45fc-aa87-dc06fb2b621c",ship_id:1,terminal_time:"2023-01-08 14:00:04",lat:-6.101392,lng:106.905875,wind_speed:9.5,wind_direction:297,heading:359.6,distance:88555.38,depth:-3,cog:80.4,sog:0,created_at:"2023-01-09 08:02:10",updated_at:"2023-01-09 08:02:10"},{time:1673187304e3,id:"dbf363e6-e9e5-4e72-95d5-fed707eab8c4",ship_id:1,terminal_time:"2023-01-08 14:15:04",lat:-6.101355,lng:106.905872,wind_speed:10.3,wind_direction:332.1,heading:359.8,distance:88555.38,depth:-2.8,cog:289.8,sog:0,created_at:"2023-01-09 08:04:34",updated_at:"2023-01-09 08:04:34"},{time:1673188204e3,id:"12b53920-e835-4c42-8ab7-ec8061a9ba5c",ship_id:1,terminal_time:"2023-01-08 14:30:04",lat:-6.101383,lng:106.90588,wind_speed:7.3,wind_direction:280,heading:359.8,distance:88555.38,depth:-2.8,cog:26.9,sog:0,created_at:"2023-01-09 08:03:54",updated_at:"2023-01-09 08:03:54"},{time:1673189104e3,id:"c5c563a3-fe51-4dab-bcae-351d28e5f4de",ship_id:1,terminal_time:"2023-01-08 14:45:04",lat:-6.101362,lng:106.905937,wind_speed:13.8,wind_direction:304,heading:359.7,distance:88555.39,depth:-2.8,cog:310.4,sog:.1,created_at:"2023-01-09 08:01:04",updated_at:"2023-01-09 08:01:04"},{time:1673190004e3,id:"3d7b3cbb-14a0-4a8f-93d0-9cf906bc7355",ship_id:1,terminal_time:"2023-01-08 15:00:04",lat:-6.101373,lng:106.905875,wind_speed:5.2,wind_direction:309.6,heading:359.7,distance:88555.4,depth:-2.8,cog:11.5,sog:0,created_at:"2023-01-09 08:03:22",updated_at:"2023-01-09 08:03:22"},{time:1673190904e3,id:"9bd54cb5-0df6-4220-852a-e9ff92994333",ship_id:1,terminal_time:"2023-01-08 15:15:04",lat:-6.10139,lng:106.9059,wind_speed:9.7,wind_direction:319.5,heading:359.7,distance:88555.4,depth:-2.8,cog:310.4,sog:0,created_at:"2023-01-09 08:01:20",updated_at:"2023-01-09 08:01:20"},{time:1673191804e3,id:"1039c335-c4fe-4407-9d86-0e0e6f3801d7",ship_id:1,terminal_time:"2023-01-08 15:30:04",lat:-6.101395,lng:106.905902,wind_speed:5,wind_direction:304,heading:359.7,distance:88555.4,depth:-2.6,cog:310.4,sog:0,created_at:"2023-01-09 08:03:22",updated_at:"2023-01-09 08:03:22"},{time:1673192704e3,id:"2a373c7d-78e5-475d-b34b-0236fd987dbb",ship_id:1,terminal_time:"2023-01-08 15:45:04",lat:-6.101373,lng:106.905892,wind_speed:8.1,wind_direction:246.3,heading:359.7,distance:88555.4,depth:-2.6,cog:310.4,sog:0,created_at:"2023-01-09 08:02:09",updated_at:"2023-01-09 08:02:09"},{time:1673193609e3,id:"27afb88f-711d-446a-80c1-5db6f4d652e8",ship_id:1,terminal_time:"2023-01-08 16:00:09",lat:-6.101383,lng:106.905923,wind_speed:16.7,wind_direction:267.4,heading:359.8,distance:88555.4,depth:-2.6,cog:274.8,sog:0,created_at:"2023-01-09 08:01:34",updated_at:"2023-01-09 08:01:34"},{time:1673194504e3,id:"7a688f79-a052-4162-98a4-93fbeec24b60",ship_id:1,terminal_time:"2023-01-08 16:15:04",lat:-6.101367,lng:106.90591,wind_speed:11.4,wind_direction:291.4,heading:359.6,distance:88555.41,depth:-2.6,cog:177.3,sog:.1,created_at:"2023-01-09 08:01:27",updated_at:"2023-01-09 08:01:27"},{time:1673195404e3,id:"1c77e367-adf9-4b24-9e28-1614417c0043",ship_id:1,terminal_time:"2023-01-08 16:30:04",lat:-6.101337,lng:106.90587,wind_speed:10.8,wind_direction:280,heading:359.6,distance:88555.42,depth:-2.6,cog:163.2,sog:0,created_at:"2023-01-09 08:02:53",updated_at:"2023-01-09 08:02:53"},{time:1673196304e3,id:"47c8015f-f5e4-44eb-af39-6631ab095c14",ship_id:1,terminal_time:"2023-01-08 16:45:04",lat:-6.101367,lng:106.905915,wind_speed:6.6,wind_direction:280,heading:359.8,distance:88555.42,depth:-2.6,cog:359.3,sog:0,created_at:"2023-01-09 08:01:48",updated_at:"2023-01-09 08:01:48"},{time:1673197204e3,id:"d0e28486-e7bc-4ac1-a4d8-0bbb6d72aee3",ship_id:1,terminal_time:"2023-01-08 17:00:04",lat:-6.101365,lng:106.905892,wind_speed:6.9,wind_direction:267.4,heading:359.8,distance:88555.42,depth:-2.6,cog:282.7,sog:0,created_at:"2023-01-09 08:05:29",updated_at:"2023-01-09 08:05:29"},{time:1673198104e3,id:"5791dc42-ed81-48a4-b540-b452a5633205",ship_id:1,terminal_time:"2023-01-08 17:15:04",lat:-6.101408,lng:106.905945,wind_speed:9.5,wind_direction:257.5,heading:0,distance:0,depth:-2.6,cog:300.4,sog:0,created_at:"2023-01-09 08:04:45",updated_at:"2023-01-09 08:04:45"},{time:1673199004e3,id:"603a0afa-1ca2-45d2-a9b6-0745a5e33b11",ship_id:1,terminal_time:"2023-01-08 17:30:04",lat:-6.10137,lng:106.905992,wind_speed:9.1,wind_direction:249.1,heading:359.5,distance:88555.42,depth:-2.5,cog:302.2,sog:0,created_at:"2023-01-09 08:03:51",updated_at:"2023-01-09 08:03:51"},{time:1673199904e3,id:"ab249c72-fe0b-4b61-aadb-60e506340e0a",ship_id:1,terminal_time:"2023-01-08 17:45:04",lat:-6.101405,lng:106.905933,wind_speed:8.5,wind_direction:247.7,heading:359.5,distance:88555.42,depth:-2.5,cog:346.1,sog:0,created_at:"2023-01-09 08:03:29",updated_at:"2023-01-09 08:03:29"},{time:1673200804e3,id:"ad719767-8da7-4530-af3a-e3d833d92178",ship_id:1,terminal_time:"2023-01-08 18:00:04",lat:-6.101377,lng:106.905882,wind_speed:10.4,wind_direction:247.7,heading:0,distance:0,depth:-2.5,cog:10.1,sog:0,created_at:"2023-01-09 08:01:03",updated_at:"2023-01-09 08:01:03"},{time:1673207354e3,id:"63c9d130-6bb7-4318-b5f2-675e7faf0e4c",ship_id:1,terminal_time:"2023-01-08 19:49:14",lat:-6.101343,lng:106.905863,wind_speed:7.9,wind_direction:246.3,heading:359.7,distance:88555.43,depth:-2.6,cog:159,sog:0,created_at:"2023-01-09 08:03:14",updated_at:"2023-01-09 08:03:14"},{time:1673208004e3,id:"3bf8de17-ebbb-4fcb-b854-a96a429acecb",ship_id:1,terminal_time:"2023-01-08 20:00:04",lat:-6.101333,lng:106.905857,wind_speed:9.9,wind_direction:235.1,heading:359.7,distance:88555.43,depth:-2.6,cog:83.4,sog:0,created_at:"2023-01-09 08:04:33",updated_at:"2023-01-09 08:04:33"},{time:1673208904e3,id:"fb4f8778-7bcb-40f3-956a-b79108ad31b2",ship_id:1,terminal_time:"2023-01-08 20:15:04",lat:-6.101393,lng:106.905902,wind_speed:7.5,wind_direction:252,heading:359.7,distance:88555.43,depth:-6,cog:131.2,sog:0,created_at:"2023-01-09 08:05:16",updated_at:"2023-01-09 08:05:16"},{time:1673209804e3,id:"5242adab-8959-40a5-8978-635cea013f84",ship_id:1,terminal_time:"2023-01-08 20:30:04",lat:-6.101357,lng:106.905868,wind_speed:5.6,wind_direction:246.3,heading:359.7,distance:88555.43,depth:-2.5,cog:274.3,sog:0,created_at:"2023-01-09 08:00:56",updated_at:"2023-01-09 08:00:56"},{time:1673210704e3,id:"0c83a2c4-2bcd-476e-ac3b-460d1b25f858",ship_id:1,terminal_time:"2023-01-08 20:45:04",lat:-6.101342,lng:106.905882,wind_speed:7.5,wind_direction:246.3,heading:359.7,distance:88555.43,depth:-2.6,cog:267.2,sog:0,created_at:"2023-01-09 08:02:36",updated_at:"2023-01-09 08:02:36"},{time:1673211604e3,id:"458708de-a317-4292-a57f-1117f5f9f56d",ship_id:1,terminal_time:"2023-01-08 21:00:04",lat:-6.101388,lng:106.905948,wind_speed:12.2,wind_direction:257.5,heading:359.8,distance:88555.43,depth:-2.6,cog:271.1,sog:0,created_at:"2023-01-09 08:05:06",updated_at:"2023-01-09 08:05:06"},{time:1673212504e3,id:"67504e3d-78c5-491b-ab2f-ead7b531eab7",ship_id:1,terminal_time:"2023-01-08 21:15:04",lat:-6.1014420000000005,lng:106.905875,wind_speed:9.5,wind_direction:257.5,heading:359.8,distance:88555.43,depth:-2.6,cog:273.1,sog:.1,created_at:"2023-01-09 08:03:54",updated_at:"2023-01-09 08:03:54"},{time:1673213404e3,id:"029c42f5-7b81-4393-94ab-d99385dd210e",ship_id:1,terminal_time:"2023-01-08 21:30:04",lat:-6.101397,lng:106.905873,wind_speed:9.1,wind_direction:280,heading:359.7,distance:88555.44,depth:-2.6,cog:278.6,sog:.1,created_at:"2023-01-09 08:05:28",updated_at:"2023-01-09 08:05:28"},{time:1673214304e3,id:"68b68fd8-c24d-4c82-8066-e3d469f5edbe",ship_id:1,terminal_time:"2023-01-08 21:45:04",lat:-6.101372,lng:106.905917,wind_speed:8.3,wind_direction:242.1,heading:359.8,distance:88555.44,depth:-6,cog:160.2,sog:0,created_at:"2023-01-09 08:05:13",updated_at:"2023-01-09 08:05:13"},{time:1673215204e3,id:"361ce47f-0c08-47bb-967f-d1db1b9a05c3",ship_id:1,terminal_time:"2023-01-08 22:00:04",lat:-6.10138,lng:106.905898,wind_speed:16.7,wind_direction:248.3,heading:359.6,distance:88555.44,depth:-2.6,cog:160.2,sog:0,created_at:"2023-01-09 08:05:04",updated_at:"2023-01-09 08:05:04"},{time:1673216104e3,id:"3ea2af9a-a3fc-420e-b179-53b02aa87e39",ship_id:1,terminal_time:"2023-01-08 22:15:04",lat:-6.10142,lng:106.90588,wind_speed:7.9,wind_direction:257.5,heading:359.6,distance:88555.44,depth:-6.1,cog:213.1,sog:0,created_at:"2023-01-09 08:05:49",updated_at:"2023-01-09 08:05:49"},{time:1673217004e3,id:"1cb11726-d0ad-4402-a975-0af78f5631b4",ship_id:1,terminal_time:"2023-01-08 22:30:04",lat:-6.101388,lng:106.905885,wind_speed:17.1,wind_direction:247.7,heading:359.8,distance:88555.44,depth:-6,cog:221.4,sog:0,created_at:"2023-01-09 08:06:08",updated_at:"2023-01-09 08:06:08"},{time:1673217904e3,id:"892a3800-b287-4c33-913e-0683528e0431",ship_id:1,terminal_time:"2023-01-08 22:45:04",lat:-6.101377,lng:106.905895,wind_speed:11.4,wind_direction:249.1,heading:359.7,distance:88555.44,depth:-2.6,cog:103.9,sog:0,created_at:"2023-01-09 08:06:00",updated_at:"2023-01-09 08:06:00"},{time:1673218804e3,id:"6f3b1990-857c-4d00-b25a-0434a0cc2c8d",ship_id:1,terminal_time:"2023-01-08 23:00:04",lat:-6.101413,lng:106.90589,wind_speed:10.4,wind_direction:257.5,heading:359.6,distance:88555.44,depth:-6.5,cog:131.5,sog:0,created_at:"2023-01-09 08:05:56",updated_at:"2023-01-09 08:05:56"},{time:1673219704e3,id:"f988100e-1c17-4430-ad7d-d42c5f9101cb",ship_id:1,terminal_time:"2023-01-08 23:15:04",lat:-6.101383,lng:106.905863,wind_speed:11.2,wind_direction:247.7,heading:359.6,distance:88555.44,depth:-6.3,cog:9.7,sog:0,created_at:"2023-01-09 08:06:57",updated_at:"2023-01-09 08:06:57"},{time:1673220604e3,id:"f9bfd7d8-0ed7-4e7c-9dd8-33793538967e",ship_id:1,terminal_time:"2023-01-08 23:30:04",lat:-6.101388,lng:106.905893,wind_speed:7.3,wind_direction:252,heading:359.7,distance:88555.44,depth:-6.3,cog:189.1,sog:.1,created_at:"2023-01-09 08:06:40",updated_at:"2023-01-09 08:06:40"},{time:1673221504e3,id:"d81f2408-511b-43f5-bc66-b9f8f3d84aea",ship_id:1,terminal_time:"2023-01-08 23:45:04",lat:-6.1014230000000005,lng:106.905862,wind_speed:11.2,wind_direction:246.3,heading:359.7,distance:88555.44,depth:-2.6,cog:195.3,sog:.1,created_at:"2023-01-09 08:06:41",updated_at:"2023-01-09 08:06:41"},{time:1673222404e3,id:"d1ae49e1-c912-4626-a700-c644a64c58ca",ship_id:1,terminal_time:"2023-01-09 00:00:04",lat:-6.101397,lng:106.905872,wind_speed:15.3,wind_direction:246.3,heading:359.8,distance:88555.44,depth:-6.5,cog:57.8,sog:0,created_at:"2023-01-09 08:06:43",updated_at:"2023-01-09 08:06:43"},{time:1673223301e3,id:"30c254de-ca32-4ae0-9bbe-50a124f42fb5",ship_id:1,terminal_time:"2023-01-09 00:15:01",lat:-6.101368,lng:106.905878,wind_speed:12,wind_direction:246.3,heading:359.8,distance:88555.44,depth:-6.1,cog:64.2,sog:0,created_at:"2023-01-09 08:07:06",updated_at:"2023-01-09 08:07:06"},{time:1673224201e3,id:"ce816a40-630c-48fa-abf2-50e2d743ecee",ship_id:1,terminal_time:"2023-01-09 00:30:01",lat:-6.101373,lng:106.905888,wind_speed:12.6,wind_direction:236.5,heading:359.8,distance:88555.44,depth:-2.8,cog:59.9,sog:0,created_at:"2023-01-09 08:07:38",updated_at:"2023-01-09 08:07:38"},{time:1673225101e3,id:"873c1631-7c9a-4a1d-b124-3879b28dd758",ship_id:1,terminal_time:"2023-01-09 00:45:01",lat:-6.101432,lng:106.905888,wind_speed:11.6,wind_direction:236.5,heading:359.8,distance:88555.44,depth:0,cog:222.4,sog:0,created_at:"2023-01-09 08:07:00",updated_at:"2023-01-09 08:07:00"},{time:1673226001e3,id:"53704def-9137-4944-8a3a-b36330fc1fb7",ship_id:1,terminal_time:"2023-01-09 01:00:01",lat:-6.1014420000000005,lng:106.905897,wind_speed:7.5,wind_direction:247.7,heading:359.7,distance:88555.44,depth:-6.1,cog:168.1,sog:0,created_at:"2023-01-09 08:06:44",updated_at:"2023-01-09 08:06:44"},{time:1673226901e3,id:"4c58ab98-4589-4979-82a3-2d5349e2d6d2",ship_id:1,terminal_time:"2023-01-09 01:15:01",lat:-6.101377,lng:106.905895,wind_speed:9.7,wind_direction:247.7,heading:359.6,distance:88555.44,depth:-6.3,cog:128.8,sog:0,created_at:"2023-01-09 08:07:55",updated_at:"2023-01-09 08:07:55"},{time:1673227801e3,id:"f53589c2-2628-4822-9efe-e9d5f6f97006",ship_id:1,terminal_time:"2023-01-09 01:30:01",lat:-6.101372,lng:106.905907,wind_speed:11,wind_direction:235.1,heading:359.7,distance:88555.44,depth:-2.8,cog:169.3,sog:0,created_at:"2023-01-09 08:07:52",updated_at:"2023-01-09 08:07:52"},{time:1673228701e3,id:"bbd3afac-671c-491d-9a53-a913b265f3a6",ship_id:1,terminal_time:"2023-01-09 01:45:01",lat:-6.101395,lng:106.905885,wind_speed:10.3,wind_direction:246.3,heading:359.8,distance:88555.44,depth:0,cog:336.2,sog:.1,created_at:"2023-01-09 08:07:54",updated_at:"2023-01-09 08:07:54"},{time:1673229626e3,id:"677d4da2-f2e4-4785-a282-e26977f5ff59",ship_id:1,terminal_time:"2023-01-09 02:00:26",lat:-6.101397,lng:106.905892,wind_speed:8.1,wind_direction:253.4,heading:359.8,distance:88555.46,depth:-6.3,cog:344.2,sog:.1,created_at:"2023-01-09 08:08:23",updated_at:"2023-01-09 08:08:23"},{time:1673230501e3,id:"6d6e995c-7f59-4690-9ba0-6bdde399168a",ship_id:1,terminal_time:"2023-01-09 02:15:01",lat:-6.10142,lng:106.90591,wind_speed:7.3,wind_direction:246.3,heading:359.7,distance:88555.47,depth:-2.8,cog:64.8,sog:0,created_at:"2023-01-09 08:08:12",updated_at:"2023-01-09 08:08:12"},{time:1673231401e3,id:"0be9f717-f25a-490d-bcae-34fa65d89a27",ship_id:1,terminal_time:"2023-01-09 02:30:01",lat:-6.1014,lng:106.905907,wind_speed:6.9,wind_direction:235.1,heading:359.6,distance:88555.48,depth:-2.8,cog:350.3,sog:0,created_at:"2023-01-09 08:08:21",updated_at:"2023-01-09 08:08:21"},{time:1673232301e3,id:"b89c57ee-02ec-4c81-a463-3ab63eea35d4",ship_id:1,terminal_time:"2023-01-09 02:45:01",lat:-6.10141,lng:106.905907,wind_speed:7.1,wind_direction:281.5,heading:359.7,distance:88555.49,depth:0,cog:340.6,sog:0,created_at:"2023-01-09 08:08:13",updated_at:"2023-01-09 08:08:13"},{time:1673233201e3,id:"a3fba678-1575-4c94-8040-8e2bb4f35c29",ship_id:1,terminal_time:"2023-01-09 03:00:01",lat:-6.101398,lng:106.905902,wind_speed:11,wind_direction:246.3,heading:359.6,distance:88555.49,depth:-6.6,cog:302,sog:0,created_at:"2023-01-09 08:09:06",updated_at:"2023-01-09 08:09:06"},{time:1673234101e3,id:"4d903123-c967-4aba-be64-4bfa45d2e9e2",ship_id:1,terminal_time:"2023-01-09 03:15:01",lat:-6.10139,lng:106.905878,wind_speed:7.7,wind_direction:259,heading:359.6,distance:88555.49,depth:-6.5,cog:314.3,sog:0,created_at:"2023-01-09 08:08:14",updated_at:"2023-01-09 08:08:14"},{time:1673235001e3,id:"1d4da80d-e1b4-46f3-b844-89cc8683bf40",ship_id:1,terminal_time:"2023-01-09 03:30:01",lat:-6.10141,lng:106.905928,wind_speed:6.2,wind_direction:247.7,heading:359.7,distance:88555.5,depth:0,cog:132.4,sog:0,created_at:"2023-01-09 08:08:53",updated_at:"2023-01-09 08:08:53"},{time:1673235901e3,id:"e71cde87-3b60-447e-b2e7-ba313276631d",ship_id:1,terminal_time:"2023-01-09 03:45:01",lat:-6.101413,lng:106.90591,wind_speed:7.7,wind_direction:252,heading:359.8,distance:88555.5,depth:0,cog:209.2,sog:0,created_at:"2023-01-09 08:08:23",updated_at:"2023-01-09 08:08:23"},{time:1673236801e3,id:"f5446243-0920-43f1-b55b-e1e7745911d7",ship_id:1,terminal_time:"2023-01-09 04:00:01",lat:-6.1013269999999995,lng:106.90594,wind_speed:7.1,wind_direction:257.5,heading:359.9,distance:88555.5,depth:-7.1,cog:206.1,sog:.1,created_at:"2023-01-09 08:08:58",updated_at:"2023-01-09 08:08:58"},{time:1673237701e3,id:"93eedeac-7e8c-4b16-8181-ccaa306bc5fd",ship_id:1,terminal_time:"2023-01-09 04:15:01",lat:-6.101417,lng:106.90591,wind_speed:8.1,wind_direction:264.5,heading:359.8,distance:88555.5,depth:-7,cog:278.5,sog:0,created_at:"2023-01-09 08:09:03",updated_at:"2023-01-09 08:09:03"},{time:1673238601e3,id:"5ea3a677-6e78-4773-a9e5-c6f4c365cfa1",ship_id:1,terminal_time:"2023-01-09 04:30:01",lat:-6.101412,lng:106.905892,wind_speed:9.5,wind_direction:249.1,heading:359.8,distance:88555.5,depth:-6.8,cog:161.2,sog:.1,created_at:"2023-01-09 08:09:01",updated_at:"2023-01-09 08:09:01"},{time:1673239501e3,id:"5c8c5a2a-ed74-4185-bef6-92c28a9fdf4e",ship_id:1,terminal_time:"2023-01-09 04:45:01",lat:-6.101433,lng:106.905898,wind_speed:6.9,wind_direction:246.3,heading:0,distance:0,depth:-3.1,cog:73.5,sog:0,created_at:"2023-01-09 08:08:43",updated_at:"2023-01-09 08:08:43"},{time:1673240401e3,id:"4c79c190-421c-4140-841f-2591d3cdafff",ship_id:1,terminal_time:"2023-01-09 05:00:01",lat:-6.10142,lng:106.905925,wind_speed:9.7,wind_direction:242.1,heading:359.8,distance:88555.5,depth:-3.1,cog:125.4,sog:0,created_at:"2023-01-09 08:09:52",updated_at:"2023-01-09 08:09:52"},{time:1673241301e3,id:"c259fb8e-9a36-4dfc-bc0a-68cd1a49a286",ship_id:1,terminal_time:"2023-01-09 05:15:01",lat:-6.101342,lng:106.905905,wind_speed:5.2,wind_direction:240.7,heading:359.8,distance:88555.5,depth:-7.1,cog:159.2,sog:0,created_at:"2023-01-09 08:10:04",updated_at:"2023-01-09 08:10:04"},{time:1673242201e3,id:"27226360-f285-47ad-94b4-61ad2013e144",ship_id:1,terminal_time:"2023-01-09 05:30:01",lat:-6.101395,lng:106.905882,wind_speed:6.4,wind_direction:242.1,heading:359.7,distance:88555.5,depth:-3.3,cog:250.3,sog:0,created_at:"2023-01-09 08:10:13",updated_at:"2023-01-09 08:10:13"},{time:1673243101e3,id:"2da1e4fe-f5f0-4895-b5fa-c4e50ec472d0",ship_id:1,terminal_time:"2023-01-09 05:45:01",lat:-6.101352,lng:106.905885,wind_speed:9.7,wind_direction:240.7,heading:359.7,distance:88555.5,depth:-3.5,cog:225.4,sog:0,created_at:"2023-01-09 08:10:15",updated_at:"2023-01-09 08:10:15"},{time:1673244001e3,id:"e101776c-0d25-4862-be01-60bdcd5c14e5",ship_id:1,terminal_time:"2023-01-09 06:00:01",lat:-6.101385,lng:106.905892,wind_speed:10.6,wind_direction:246.3,heading:359.6,distance:88555.5,depth:-3.5,cog:326.1,sog:0,created_at:"2023-01-09 08:10:03",updated_at:"2023-01-09 08:10:03"},{time:1673244901e3,id:"a9941a2b-e575-408e-a7bb-dacd988e6d96",ship_id:1,terminal_time:"2023-01-09 06:15:01",lat:-6.101383,lng:106.905903,wind_speed:7.1,wind_direction:247.7,heading:359.6,distance:88555.5,depth:-3.5,cog:256.6,sog:0,created_at:"2023-01-09 08:10:10",updated_at:"2023-01-09 08:10:10"},{time:1673245801e3,id:"a1187bf0-abe9-4353-82a3-d4fd442c22e3",ship_id:1,terminal_time:"2023-01-09 06:30:01",lat:-6.101395,lng:106.905883,wind_speed:7.7,wind_direction:247.7,heading:359.6,distance:88555.5,depth:-3.6,cog:215.4,sog:0,created_at:"2023-01-09 08:09:40",updated_at:"2023-01-09 08:09:40"},{time:1673246701e3,id:"c3d8f1fb-1911-4887-b3ce-949bd243f6c1",ship_id:1,terminal_time:"2023-01-09 06:45:01",lat:-6.101395,lng:106.90591,wind_speed:9.9,wind_direction:252,heading:359.8,distance:88555.5,depth:-3.8,cog:125.3,sog:0,created_at:"2023-01-09 08:10:36",updated_at:"2023-01-09 08:10:36"},{time:1673247601e3,id:"6d3fb6e4-4b62-422c-bd75-5562e48a058d",ship_id:1,terminal_time:"2023-01-09 07:00:01",lat:-6.101393,lng:106.905862,wind_speed:7.5,wind_direction:252,heading:359.9,distance:88555.5,depth:-3.8,cog:64.2,sog:0,created_at:"2023-01-09 08:10:33",updated_at:"2023-01-09 08:10:33"},{time:1673248501e3,id:"6c8d24c2-f12c-4698-a829-a0632f019df1",ship_id:1,terminal_time:"2023-01-09 07:15:01",lat:-6.101393,lng:106.905878,wind_speed:7.3,wind_direction:246.3,heading:359.7,distance:88555.5,depth:-4,cog:64.5,sog:0,created_at:"2023-01-09 08:10:33",updated_at:"2023-01-09 08:10:33"},{time:1673249401e3,id:"519acfef-d197-4cfa-afa7-4e6e5e4b8737",ship_id:1,terminal_time:"2023-01-09 07:30:01",lat:-6.101377,lng:106.905885,wind_speed:6.6,wind_direction:242.1,heading:359.7,distance:88555.5,depth:-4,cog:173.5,sog:0,created_at:"2023-01-09 08:10:41",updated_at:"2023-01-09 08:10:41"},{time:1673250301e3,id:"aa8fe1a7-57d9-445d-8f18-3f22b1a409c6",ship_id:1,terminal_time:"2023-01-09 07:45:01",lat:-6.101395,lng:106.905893,wind_speed:10.4,wind_direction:247.7,heading:0,distance:0,depth:-4,cog:173.5,sog:0,created_at:"2023-01-09 08:11:09",updated_at:"2023-01-09 08:11:09"},{time:1673251201e3,id:"5d87fb41-c0a5-49b5-aabc-e16448ec0db7",ship_id:1,terminal_time:"2023-01-09 08:00:01",lat:-6.101405,lng:106.905888,wind_speed:6,wind_direction:265.9,heading:359.7,distance:88555.5,depth:-4,cog:173.5,sog:0,created_at:"2023-01-09 08:10:51",updated_at:"2023-01-09 08:10:51"},{time:1673257766e3,id:"59f2dd21-3619-4d39-a699-a444c5f5039c",ship_id:1,terminal_time:"2023-01-09 09:49:26",lat:-6.10138,lng:106.905813,wind_speed:14.1,wind_direction:302.5,heading:359.8,distance:88555.5,depth:-4.1,cog:132.4,sog:0,created_at:"2023-01-10 08:00:06",updated_at:"2023-01-10 08:00:06"},{time:1673258401e3,id:"6b431693-2664-44b6-8518-5ab07bbf0c85",ship_id:1,terminal_time:"2023-01-09 10:00:01",lat:-6.101373,lng:106.9059,wind_speed:14.1,wind_direction:282.9,heading:359.8,distance:88555.5,depth:-4.1,cog:115.2,sog:0,created_at:"2023-01-10 08:02:29",updated_at:"2023-01-10 08:02:29"},{time:1673259301e3,id:"40fb792e-7a2e-4697-a25b-e79c2d2fdbc6",ship_id:1,terminal_time:"2023-01-09 10:15:01",lat:-6.10135,lng:106.905885,wind_speed:7.1,wind_direction:332.1,heading:359.9,distance:88555.5,depth:-4.3,cog:144.6,sog:0,created_at:"2023-01-10 08:01:40",updated_at:"2023-01-10 08:01:40"},{time:1673260201e3,id:"354963f0-7e7e-4ea0-97ae-5e69a9a932c9",ship_id:1,terminal_time:"2023-01-09 10:30:01",lat:-6.101405,lng:106.90586,wind_speed:12.6,wind_direction:292.8,heading:359.8,distance:88555.5,depth:-4.3,cog:105.8,sog:0,created_at:"2023-01-10 08:04:19",updated_at:"2023-01-10 08:04:19"},{time:1673261101e3,id:"5bbbf421-2adb-4fd3-81a0-b0cade6e5e67",ship_id:1,terminal_time:"2023-01-09 10:45:01",lat:-6.101395,lng:106.905892,wind_speed:9.5,wind_direction:297,heading:359.8,distance:88555.5,depth:-4.3,cog:214.9,sog:0,created_at:"2023-01-10 08:05:43",updated_at:"2023-01-10 08:05:43"},{time:1673262001e3,id:"630c5619-2b52-4cbb-93bf-85c73cae98ae",ship_id:1,terminal_time:"2023-01-09 11:00:01",lat:-6.101408,lng:106.905882,wind_speed:6.6,wind_direction:297,heading:0,distance:0,depth:-4.3,cog:99.6,sog:0,created_at:"2023-01-10 08:02:39",updated_at:"2023-01-10 08:02:39"},{time:1673262901e3,id:"b403636b-8619-4d42-9cb4-6c4166a1b9b3",ship_id:1,terminal_time:"2023-01-09 11:15:01",lat:-6.101393,lng:106.90587,wind_speed:5,wind_direction:311.5,heading:359.8,distance:88555.5,depth:-4.3,cog:93.5,sog:0,created_at:"2023-01-10 08:04:42",updated_at:"2023-01-10 08:04:42"},{time:1673263806e3,id:"5f165c7e-e6b7-44c1-a482-567e62bc4017",ship_id:1,terminal_time:"2023-01-09 11:30:06",lat:-6.1014,lng:106.905877,wind_speed:15.1,wind_direction:337.8,heading:359.8,distance:88555.51,depth:-4.1,cog:73.4,sog:0,created_at:"2023-01-10 08:02:10",updated_at:"2023-01-10 08:02:10"},{time:1673264701e3,id:"bd2a40ce-8f23-43e0-8272-8f201c185ec8",ship_id:1,terminal_time:"2023-01-09 11:45:01",lat:-6.101388,lng:106.905907,wind_speed:16.3,wind_direction:337.8,heading:359.9,distance:88555.51,depth:-4.1,cog:61.2,sog:0,created_at:"2023-01-10 08:05:49",updated_at:"2023-01-10 08:05:49"},{time:1673265601e3,id:"c24f89d3-7780-4ffc-a265-5b6d2f72f073",ship_id:1,terminal_time:"2023-01-09 12:00:01",lat:-6.1014,lng:106.905888,wind_speed:14.7,wind_direction:342,heading:359.8,distance:88555.51,depth:-4.1,cog:67.8,sog:0,created_at:"2023-01-10 08:03:23",updated_at:"2023-01-10 08:03:23"},{time:1673266501e3,id:"13982c0e-988a-46c5-bec8-355b5f7dc5ca",ship_id:1,terminal_time:"2023-01-09 12:15:01",lat:-6.101408,lng:106.905903,wind_speed:7.1,wind_direction:315.3,heading:359.8,distance:88555.51,depth:-4.1,cog:36.9,sog:0,created_at:"2023-01-10 08:02:34",updated_at:"2023-01-10 08:02:34"},{time:1673267401e3,id:"d0beec20-b06e-4fc7-ad00-6f35454bb257",ship_id:1,terminal_time:"2023-01-09 12:30:01",lat:-6.10138,lng:106.905855,wind_speed:11.2,wind_direction:337.8,heading:359.8,distance:88555.51,depth:-4.1,cog:37.8,sog:0,created_at:"2023-01-10 08:01:57",updated_at:"2023-01-10 08:01:57"},{time:1673268301e3,id:"98379784-93de-4f27-b326-467bfef4b682",ship_id:1,terminal_time:"2023-01-09 12:45:01",lat:-6.101353,lng:106.905848,wind_speed:12.6,wind_direction:337.8,heading:359.8,distance:88555.51,depth:-4.1,cog:90.6,sog:0,created_at:"2023-01-10 08:05:23",updated_at:"2023-01-10 08:05:23"},{time:1673269201e3,id:"05ff55cd-da21-40f7-83dd-131e0587880e",ship_id:1,terminal_time:"2023-01-09 13:00:01",lat:-6.101385,lng:106.905875,wind_speed:12.2,wind_direction:342,heading:359.7,distance:88555.51,depth:-4,cog:96.8,sog:.1,created_at:"2023-01-10 08:01:45",updated_at:"2023-01-10 08:01:45"},{time:1673270101e3,id:"f7cc3f27-2367-4a6d-a4c2-db1154e9e00f",ship_id:1,terminal_time:"2023-01-09 13:15:01",lat:-6.101383,lng:106.905865,wind_speed:14.5,wind_direction:337.8,heading:359.7,distance:88555.51,depth:-4,cog:150.1,sog:.1,created_at:"2023-01-10 08:03:50",updated_at:"2023-01-10 08:03:50"},{time:1673271001e3,id:"f662f7f2-d4d5-449f-873a-bcdfc3a00d51",ship_id:1,terminal_time:"2023-01-09 13:30:01",lat:-6.101357,lng:106.905865,wind_speed:12.8,wind_direction:337.8,heading:359.7,distance:88555.52,depth:-4,cog:321.4,sog:0,created_at:"2023-01-10 08:02:28",updated_at:"2023-01-10 08:02:28"},{time:1673271901e3,id:"89151d87-e6ce-4678-a3ef-8544ce5f573f",ship_id:1,terminal_time:"2023-01-09 13:45:01",lat:-6.101363,lng:106.905908,wind_speed:14.7,wind_direction:337.8,heading:359.6,distance:88555.52,depth:-4,cog:66.8,sog:0,created_at:"2023-01-10 08:04:30",updated_at:"2023-01-10 08:04:30"},{time:1673272801e3,id:"03f8f7d6-97b0-4dd5-be91-36f792a1a625",ship_id:1,terminal_time:"2023-01-09 14:00:01",lat:-6.101427,lng:106.905857,wind_speed:13,wind_direction:332.1,heading:.4,distance:88555.52,depth:-4,cog:287.6,sog:0,created_at:"2023-01-10 08:03:02",updated_at:"2023-01-10 08:03:02"},{time:1673273701e3,id:"a1f01e80-907b-4720-aaa7-aa073ffd06af",ship_id:1,terminal_time:"2023-01-09 14:15:01",lat:-6.095707,lng:106.89818,wind_speed:26.6,wind_direction:45,heading:276.6,distance:88556.26,depth:-11.3,cog:274.8,sog:6.6,created_at:"2023-01-10 08:01:52",updated_at:"2023-01-10 08:01:52"},{time:1673274601e3,id:"615a0d2a-2428-4c59-a170-a77f1278abfc",ship_id:1,terminal_time:"2023-01-09 14:30:01",lat:-6.079302,lng:106.881568,wind_speed:26.2,wind_direction:349,heading:355.1,distance:88557.85,depth:-10.8,cog:357.4,sog:7.3,created_at:"2023-01-10 08:01:54",updated_at:"2023-01-10 08:01:54"},{time:1673275501e3,id:"8a83141d-bf01-41b2-a27c-8b01697b30c7",ship_id:1,terminal_time:"2023-01-09 14:45:01",lat:-6.03759,lng:106.880487,wind_speed:28.9,wind_direction:0,heading:350.6,distance:88560.36,depth:-12.5,cog:353.9,sog:10.4,created_at:"2023-01-10 08:03:06",updated_at:"2023-01-10 08:03:06"},{time:1673276401e3,id:"f8617d50-8583-4cef-a0dd-29468fbc2d90",ship_id:1,terminal_time:"2023-01-09 15:00:01",lat:-5.98431,lng:106.873388,wind_speed:29.7,wind_direction:9.7,heading:330.3,distance:88563.54,depth:-16.6,cog:338.3,sog:12.5,created_at:"2023-01-10 08:03:19",updated_at:"2023-01-10 08:03:19"},{time:1673277301e3,id:"966ade39-66eb-4749-99b5-72528c7217e9",ship_id:1,terminal_time:"2023-01-09 15:15:01",lat:-5.961758,lng:106.82729,wind_speed:29.3,wind_direction:16.8,heading:312.6,distance:88566.7,depth:-19,cog:312.1,sog:13.2,created_at:"2023-01-10 08:02:20",updated_at:"2023-01-10 08:02:20"},{time:1673278201e3,id:"7531c730-0f9f-498f-85e9-d9704b5e56c3",ship_id:1,terminal_time:"2023-01-09 15:30:01",lat:-5.931025,lng:106.78072,wind_speed:28.1,wind_direction:21,heading:310.9,distance:88570,depth:-22.5,cog:312.1,sog:13.4,created_at:"2023-01-10 08:04:54",updated_at:"2023-01-10 08:04:54"},{time:1673279101e3,id:"0f5e09a8-fa21-4745-b847-90fe597eae7b",ship_id:1,terminal_time:"2023-01-09 15:45:01",lat:-14.161667,lng:116.66,wind_speed:27.2,wind_direction:32.3,heading:308,distance:88573.33,depth:-30.5,cog:0,sog:0,created_at:"2023-01-10 08:03:50",updated_at:"2023-01-10 08:03:50"},{time:1673280121e3,id:"b0c02cd1-d141-4cc5-b9f3-469c2154f3b2",ship_id:1,terminal_time:"2023-01-09 16:02:01",lat:-5.854772,lng:106.68859,wind_speed:23.7,wind_direction:33.6,heading:304.1,distance:88577.22,depth:-27.8,cog:305.1,sog:13.5,created_at:"2023-01-10 08:06:17",updated_at:"2023-01-10 08:06:17"},{time:1673280901e3,id:"60d837ed-22c2-4b7e-954a-8ed76765bb6b",ship_id:1,terminal_time:"2023-01-09 16:15:01",lat:-5.828417,lng:106.647598,wind_speed:19.2,wind_direction:54.9,heading:267.9,distance:88580.13,depth:-45.3,cog:273.5,sog:12.4,created_at:"2023-01-10 08:04:40",updated_at:"2023-01-10 08:04:40"},{time:1673281801e3,id:"5e868bf7-9f25-4361-9d84-88ccdcadc5bd",ship_id:1,terminal_time:"2023-01-09 16:30:01",lat:-5.833347,lng:106.590948,wind_speed:20.4,wind_direction:43.6,heading:263.3,distance:88583.55,depth:-70.6,cog:263.3,sog:13.8,created_at:"2023-01-10 08:03:21",updated_at:"2023-01-10 08:03:21"},{time:1673282701e3,id:"290d63d9-e0da-419c-880b-2ff176353be8",ship_id:1,terminal_time:"2023-01-09 16:45:01",lat:-5.83681,lng:106.533245,wind_speed:19.2,wind_direction:49.1,heading:269.3,distance:88586.99,depth:-83.3,cog:270,sog:13.8,created_at:"2023-01-10 08:04:36",updated_at:"2023-01-10 08:04:36"},{time:1673283601e3,id:"74437480-2eee-4b7d-bdec-bf2c3f57793e",ship_id:1,terminal_time:"2023-01-09 17:00:01",lat:-5.836503,lng:106.475305,wind_speed:20.4,wind_direction:49.1,heading:264.9,distance:88590.47,depth:-48.5,cog:266.8,sog:13.9,created_at:"2023-01-10 08:05:08",updated_at:"2023-01-10 08:05:08"},{time:1673284501e3,id:"a12b6836-7207-4ed4-b124-4d651273bb02",ship_id:1,terminal_time:"2023-01-09 17:15:01",lat:-5.845467,lng:106.417943,wind_speed:20.4,wind_direction:43.6,heading:267.7,distance:88593.93,depth:-51.6,cog:265.6,sog:14,created_at:"2023-01-10 08:04:19",updated_at:"2023-01-10 08:04:19"},{time:1673285401e3,id:"09588182-8517-4089-9f19-f6dfe3842699",ship_id:1,terminal_time:"2023-01-09 17:30:01",lat:-5.841642,lng:106.35981,wind_speed:21.3,wind_direction:33.6,heading:0,distance:0,depth:-27.1,cog:274.8,sog:14.1,created_at:"2023-01-10 08:05:40",updated_at:"2023-01-10 08:05:40"},{time:1673286301e3,id:"878bec49-a145-488f-ae6a-22e20f985adb",ship_id:1,terminal_time:"2023-01-09 17:45:01",lat:-5.838773,lng:106.300968,wind_speed:24.4,wind_direction:26.7,heading:269.9,distance:88600.96,depth:-32.6,cog:270.7,sog:14.2,created_at:"2023-01-10 08:04:41",updated_at:"2023-01-10 08:04:41"},{time:1673287201e3,id:"e479c84e-0867-465c-8999-5e588a85eea7",ship_id:1,terminal_time:"2023-01-09 18:00:01",lat:-5.837823,lng:106.239917,wind_speed:27.4,wind_direction:4.2,heading:270,distance:88604.52,depth:-23.8,cog:271.2,sog:14.3,created_at:"2023-01-10 08:05:14",updated_at:"2023-01-10 08:05:14"},{time:1673288101e3,id:"c65ffd03-8a74-4926-bed4-8610fa7e81a0",ship_id:1,terminal_time:"2023-01-09 18:15:01",lat:-5.838808,lng:106.181588,wind_speed:25,wind_direction:9.7,heading:264.9,distance:88608.11,depth:-28.1,cog:0,sog:0,created_at:"2023-01-10 08:06:48",updated_at:"2023-01-10 08:06:48"},{time:1673289001e3,id:"1c8548ab-cb0d-4bdb-9f57-195a3c362744",ship_id:1,terminal_time:"2023-01-09 18:30:01",lat:-5.841168,lng:106.120507,wind_speed:25,wind_direction:4.2,heading:268.9,distance:88611.69,depth:-38.3,cog:269.4,sog:14.3,created_at:"2023-01-10 08:06:38",updated_at:"2023-01-10 08:06:38"},{time:1673289901e3,id:"9205bfd4-683a-4325-8b29-103eb842219b",ship_id:1,terminal_time:"2023-01-09 18:45:01",lat:-5.8411,lng:106.061022,wind_speed:28.9,wind_direction:0,heading:269.1,distance:88615.22,depth:-50.3,cog:270.3,sog:14.2,created_at:"2023-01-10 08:06:30",updated_at:"2023-01-10 08:06:30"},{time:1673290801e3,id:"911bece6-7e5c-40f0-b0da-cf35b3eb7067",ship_id:1,terminal_time:"2023-01-09 19:00:01",lat:-5.854877,lng:106.006268,wind_speed:30.7,wind_direction:21,heading:225.6,distance:88618.76,depth:-74.5,cog:229.1,sog:14.3,created_at:"2023-01-10 08:07:24",updated_at:"2023-01-10 08:07:24"},{time:1673291701e3,id:"7fefd3ea-5a95-4eaf-a4ef-ec5bbb15390a",ship_id:1,terminal_time:"2023-01-09 19:15:01",lat:-5.897932,lng:105.964727,wind_speed:28.5,wind_direction:21,heading:224.8,distance:88622.34,depth:-37.1,cog:224.5,sog:14.2,created_at:"2023-01-10 08:07:04",updated_at:"2023-01-10 08:07:04"},{time:1673292601e3,id:"05a6f60e-0ee4-4d48-9f0c-6823f391ff6d",ship_id:1,terminal_time:"2023-01-09 19:30:01",lat:-5.94169,lng:105.92583,wind_speed:31.8,wind_direction:26.7,heading:221.9,distance:88625.93,depth:-38.1,cog:222.4,sog:13.9,created_at:"2023-01-10 08:05:52",updated_at:"2023-01-10 08:05:52"},{time:1673293501e3,id:"3582ee5f-9c1c-447c-a1c2-ad23d1fcdc4c",ship_id:1,terminal_time:"2023-01-09 19:45:01",lat:-5.985892,lng:105.888712,wind_speed:30.7,wind_direction:32.3,heading:215.3,distance:88629.38,depth:-50.8,cog:216.3,sog:14.2,created_at:"2023-01-10 08:05:36",updated_at:"2023-01-10 08:05:36"},{time:1673294401e3,id:"bae337b8-cf2c-4345-83f1-51a534c4756a",ship_id:1,terminal_time:"2023-01-09 20:00:01",lat:-6.007143,lng:105.844002,wind_speed:27.9,wind_direction:353.3,heading:291,distance:88632.81,depth:-84.1,cog:292.2,sog:13.7,created_at:"2023-01-10 08:08:12",updated_at:"2023-01-10 08:08:12"},{time:1673295301e3,id:"2bfe50aa-406d-420d-baba-3647f540a6db",ship_id:1,terminal_time:"2023-01-09 20:15:01",lat:-5.982978,lng:105.794872,wind_speed:28.5,wind_direction:0,heading:287.8,distance:88636.11,depth:-52,cog:293.4,sog:12.5,created_at:"2023-01-10 08:08:05",updated_at:"2023-01-10 08:08:05"},{time:1673296201e3,id:"226c6298-b20f-4d61-8d46-d20d9a16f764",ship_id:1,terminal_time:"2023-01-09 20:30:01",lat:-5.970388,lng:105.742705,wind_speed:31.8,wind_direction:4.2,heading:280,distance:88639.31,depth:-89.5,cog:282.8,sog:13.6,created_at:"2023-01-10 08:07:55",updated_at:"2023-01-10 08:07:55"},{time:1673297101e3,id:"0b3a3d1b-e2cd-412d-8949-052b468ac363",ship_id:1,terminal_time:"2023-01-09 20:45:01",lat:-5.952805,lng:105.689012,wind_speed:30.9,wind_direction:4.2,heading:288.7,distance:88642.69,depth:-66.1,cog:291,sog:13.4,created_at:"2023-01-10 08:06:29",updated_at:"2023-01-10 08:06:29"},{time:1673298001e3,id:"e5dc3b25-3498-4336-b51f-65360056bb47",ship_id:1,terminal_time:"2023-01-09 21:00:01",lat:-5.93262,lng:105.638005,wind_speed:32,wind_direction:4.2,heading:289,distance:88645.98,depth:-29.5,cog:291.5,sog:12.9,created_at:"2023-01-10 08:07:36",updated_at:"2023-01-10 08:07:36"},{time:1673298901e3,id:"97af2e02-a337-477c-b476-f8cc1f0f39bd",ship_id:1,terminal_time:"2023-01-09 21:15:01",lat:-5.918415,lng:105.586073,wind_speed:33,wind_direction:9.2,heading:274.4,distance:88649.16,depth:-20,cog:275.9,sog:12.5,created_at:"2023-01-10 08:06:55",updated_at:"2023-01-10 08:06:55"},{time:1673299801e3,id:"3f6e7fb8-8ed6-4139-af72-762e9a783f03",ship_id:1,terminal_time:"2023-01-09 21:30:01",lat:-5.913357,lng:105.534142,wind_speed:33.2,wind_direction:9.7,heading:272.1,distance:88652.27,depth:-36.3,cog:275.1,sog:12.2,created_at:"2023-01-10 08:06:51",updated_at:"2023-01-10 08:06:51"},{time:1673300701e3,id:"039c9a38-7354-41ae-a67f-1a28cc9ac563",ship_id:1,terminal_time:"2023-01-09 21:45:01",lat:-5.909802,lng:105.487677,wind_speed:31.6,wind_direction:4.2,heading:280.1,distance:88655.08,depth:-35.1,cog:281.9,sog:11.4,created_at:"2023-01-10 08:07:31",updated_at:"2023-01-10 08:07:31"},{time:1673301601e3,id:"c21c6af2-1b26-41e9-b6ef-1f8d76e84096",ship_id:1,terminal_time:"2023-01-09 22:00:01",lat:-5.902202,lng:105.43825,wind_speed:32.2,wind_direction:4.2,heading:0,distance:0,depth:-28.1,cog:278,sog:12.2,created_at:"2023-01-10 08:07:20",updated_at:"2023-01-10 08:07:20"},{time:1673302501e3,id:"6187beed-2f55-4f6c-ac4d-870ba4151a2b",ship_id:1,terminal_time:"2023-01-09 22:15:01",lat:-5.894857,lng:105.38688,wind_speed:33.6,wind_direction:7.5,heading:275.2,distance:88661.16,depth:-50.5,cog:279.6,sog:12.5,created_at:"2023-01-10 08:08:14",updated_at:"2023-01-10 08:08:14"},{time:1673303401e3,id:"d2860a82-a25f-4c3b-aaf3-db903c6c079d",ship_id:1,terminal_time:"2023-01-09 22:30:01",lat:-5.88575,lng:105.334428,wind_speed:37.7,wind_direction:4.2,heading:278.6,distance:88664.41,depth:-78.6,cog:282.5,sog:12.7,created_at:"2023-01-10 08:08:58",updated_at:"2023-01-10 08:08:58"},{time:1673304301e3,id:"bc8a41e1-d425-400a-afb9-2d64d783a252",ship_id:1,terminal_time:"2023-01-09 22:45:01",lat:-5.874368,lng:105.282648,wind_speed:34.4,wind_direction:9.7,heading:280.7,distance:88667.58,depth:-95.8,cog:284,sog:12.9,created_at:"2023-01-10 08:08:50",updated_at:"2023-01-10 08:08:50"},{time:1673305201e3,id:"2210ba63-e4e5-46bb-a238-f60a7ff5f63e",ship_id:1,terminal_time:"2023-01-09 23:00:01",lat:-5.862632,lng:105.230625,wind_speed:33.6,wind_direction:19,heading:281.1,distance:88670.78,depth:-105,cog:280.9,sog:12.6,created_at:"2023-01-10 08:08:39",updated_at:"2023-01-10 08:08:39"},{time:1673306101e3,id:"42f528f7-c57d-46a6-b362-95020790eb63",ship_id:1,terminal_time:"2023-01-09 23:15:01",lat:-5.850693,lng:105.178738,wind_speed:34.2,wind_direction:21,heading:283,distance:88673.97,depth:-120,cog:284.6,sog:12.8,created_at:"2023-01-10 08:09:21",updated_at:"2023-01-10 08:09:21"},{time:1673307001e3,id:"5e0ba177-15a5-4845-a33f-2b9be3696f90",ship_id:1,terminal_time:"2023-01-09 23:30:01",lat:-5.836418,lng:105.127365,wind_speed:37.3,wind_direction:16.8,heading:285.3,distance:88677.14,depth:-200,cog:290.4,sog:12.6,created_at:"2023-01-10 08:08:57",updated_at:"2023-01-10 08:08:57"},{time:1673307901e3,id:"74e77432-2815-4913-8e48-42a55e173eda",ship_id:1,terminal_time:"2023-01-09 23:45:01",lat:-5.821302,lng:105.076055,wind_speed:32.6,wind_direction:19.6,heading:285,distance:88680.34,depth:-206,cog:282.4,sog:12.7,created_at:"2023-01-10 08:08:36",updated_at:"2023-01-10 08:08:36"},{time:1673308801e3,id:"733111ca-d0a6-4cd2-a3c3-25a09999a0cc",ship_id:1,terminal_time:"2023-01-10 00:00:01",lat:-5.800392,lng:105.027445,wind_speed:28.7,wind_direction:9.7,heading:300.1,distance:88683.55,depth:-200.6,cog:302.4,sog:12.9,created_at:"2023-01-10 08:09:31",updated_at:"2023-01-10 08:09:31"},{time:1673309703e3,id:"f06e33ca-2719-4b1f-8f9d-3187c3f75fac",ship_id:1,terminal_time:"2023-01-10 00:15:03",lat:-5.7731770000000004,lng:104.980798,wind_speed:28.9,wind_direction:9.7,heading:297.3,distance:88686.7,depth:-202.3,cog:297,sog:12.5,created_at:"2023-01-10 08:10:07",updated_at:"2023-01-10 08:10:07"},{time:1673310603e3,id:"c856de4d-7236-4d94-9e85-c9fedbc48708",ship_id:1,terminal_time:"2023-01-10 00:30:03",lat:-5.747583,lng:104.93485,wind_speed:28.7,wind_direction:11.2,heading:296.8,distance:88689.82,depth:-198.3,cog:300,sog:12.6,created_at:"2023-01-10 08:10:05",updated_at:"2023-01-10 08:10:05"},{time:1673311503e3,id:"cd8a0d81-f531-4582-b2fb-e948ed042a0b",ship_id:1,terminal_time:"2023-01-10 00:45:03",lat:-5.720978,lng:104.889258,wind_speed:31.6,wind_direction:8.4,heading:298.9,distance:88692.97,depth:-77,cog:300.9,sog:12.5,created_at:"2023-01-10 08:09:46",updated_at:"2023-01-10 08:09:46"},{time:1673312403e3,id:"4dba530d-bc76-4355-ab28-1340d9ac5be7",ship_id:1,terminal_time:"2023-01-10 01:00:03",lat:-5.69468,lng:104.843363,wind_speed:27.2,wind_direction:11.2,heading:296.8,distance:88696.15,depth:-59.3,cog:299.2,sog:12.8,created_at:"2023-01-10 08:09:28",updated_at:"2023-01-10 08:09:28"},{time:1673313303e3,id:"325aec11-c392-479b-9d0d-41cbbd1feff8",ship_id:1,terminal_time:"2023-01-10 01:15:03",lat:-5.668635,lng:104.795995,wind_speed:25.4,wind_direction:16.8,heading:303.1,distance:88699.36,depth:-81.6,cog:305.2,sog:13.1,created_at:"2023-01-10 08:10:20",updated_at:"2023-01-10 08:10:20"},{time:1673314203e3,id:"b06943c5-9cd6-4fad-8ebe-f5449d7bffcc",ship_id:1,terminal_time:"2023-01-10 01:30:03",lat:-5.637213,lng:104.750302,wind_speed:25.4,wind_direction:16.8,heading:302.1,distance:88702.77,depth:-159.3,cog:302.6,sog:13.6,created_at:"2023-01-10 08:10:11",updated_at:"2023-01-10 08:10:11"},{time:1673315103e3,id:"9222b191-091c-4065-a00a-754b7a702ec9",ship_id:1,terminal_time:"2023-01-10 01:45:03",lat:-5.606022,lng:104.702637,wind_speed:24.1,wind_direction:12.5,heading:300.2,distance:88706.13,depth:-184.6,cog:302.6,sog:13.8,created_at:"2023-01-10 08:10:19",updated_at:"2023-01-10 08:10:19"},{time:1673316003e3,id:"352b8845-bef7-409c-a3e0-cf0aadac3054",ship_id:1,terminal_time:"2023-01-10 02:00:03",lat:-5.5799579999999995,lng:104.65319,wind_speed:21.1,wind_direction:16.8,heading:295.9,distance:88709.53,depth:-84.6,cog:296,sog:13.5,created_at:"2023-01-10 08:10:25",updated_at:"2023-01-10 08:10:25"},{time:1673316903e3,id:"329d6a2d-92b7-4284-a981-79ccaf315c9c",ship_id:1,terminal_time:"2023-01-10 02:15:03",lat:-5.562793,lng:104.609362,wind_speed:18.2,wind_direction:19.6,heading:300.2,distance:88712.38,depth:-42.6,cog:307.4,sog:8.5,created_at:"2023-01-10 08:10:25",updated_at:"2023-01-10 08:10:25"},{time:1673317803e3,id:"232ce1d3-f960-42b9-80f6-306f115e0844",ship_id:1,terminal_time:"2023-01-10 02:30:03",lat:-13.866667,lng:111.266667,wind_speed:15.9,wind_direction:19.6,heading:305.2,distance:88714.17,depth:-36,cog:0,sog:0,created_at:"2023-01-10 08:10:32",updated_at:"2023-01-10 08:10:32"},{time:1673318703e3,id:"06e72ee8-b924-4aca-b288-407b083f57f5",ship_id:1,terminal_time:"2023-01-10 02:45:03",lat:-5.5387,lng:104.573278,wind_speed:7.1,wind_direction:21,heading:333.4,distance:88715.01,depth:-31.3,cog:286.4,sog:.5,created_at:"2023-01-10 08:10:31",updated_at:"2023-01-10 08:10:31"},{time:1673319603e3,id:"96979015-3293-432b-acdb-18a40130c80d",ship_id:1,terminal_time:"2023-01-10 03:00:03",lat:-5.538557,lng:104.572997,wind_speed:4.8,wind_direction:11.2,heading:34,distance:88715.04,depth:-31,cog:104.3,sog:.1,created_at:"2023-01-10 08:10:58",updated_at:"2023-01-10 08:10:58"},{time:1673320503e3,id:"311160b5-f9c6-4799-ad43-d85555c84374",ship_id:1,terminal_time:"2023-01-10 03:15:03",lat:-5.538512,lng:104.573348,wind_speed:2.5,wind_direction:11.2,heading:322.4,distance:88715.04,depth:-31,cog:349.1,sog:.1,created_at:"2023-01-10 08:10:55",updated_at:"2023-01-10 08:10:55"},{time:1673321403e3,id:"73f5a73d-8652-4de0-a492-7e4d2da8a5e4",ship_id:1,terminal_time:"2023-01-10 03:30:03",lat:-5.538447,lng:104.573578,wind_speed:2.7,wind_direction:11.2,heading:311.9,distance:88715.05,depth:-31,cog:124.7,sog:0,created_at:"2023-01-10 08:11:31",updated_at:"2023-01-10 08:11:31"},{time:1673322303e3,id:"d0d88b43-dbf4-4712-b6e6-2ba40ee6cbe7",ship_id:1,terminal_time:"2023-01-10 03:45:03",lat:-5.5383569999999995,lng:104.573628,wind_speed:2.9,wind_direction:11.2,heading:306.3,distance:88715.06,depth:-31,cog:216.8,sog:.1,created_at:"2023-01-10 08:11:02",updated_at:"2023-01-10 08:11:02"},{time:1673323203e3,id:"108e11e3-a7fa-41b3-af81-0cca33e8ff4c",ship_id:1,terminal_time:"2023-01-10 04:00:03",lat:-5.538393,lng:104.573665,wind_speed:4.8,wind_direction:11.2,heading:306.8,distance:88715.07,depth:-31,cog:232.3,sog:0,created_at:"2023-01-10 08:11:43",updated_at:"2023-01-10 08:11:43"},{time:1673324103e3,id:"bd89b9b2-c51f-4cc4-8ef2-932d74a5a249",ship_id:1,terminal_time:"2023-01-10 04:15:03",lat:-5.538438,lng:104.573587,wind_speed:5,wind_direction:11.2,heading:312.8,distance:88715.08,depth:-31,cog:169,sog:.1,created_at:"2023-01-10 08:11:37",updated_at:"2023-01-10 08:11:37"},{time:1673325003e3,id:"78ae1344-a9e9-44ff-b1f4-0c24f28e8fd4",ship_id:1,terminal_time:"2023-01-10 04:30:03",lat:-5.538348,lng:104.5736,wind_speed:5.6,wind_direction:11.2,heading:310.3,distance:88715.08,depth:-31,cog:80.3,sog:0,created_at:"2023-01-10 08:11:34",updated_at:"2023-01-10 08:11:34"},{time:1673325903e3,id:"a3aed659-572b-4b7c-abbe-b6691c723542",ship_id:1,terminal_time:"2023-01-10 04:45:03",lat:-5.538425,lng:104.573628,wind_speed:5.4,wind_direction:11.2,heading:310.7,distance:88715.08,depth:-31,cog:249.5,sog:0,created_at:"2023-01-10 08:12:04",updated_at:"2023-01-10 08:12:04"},{time:1673326803e3,id:"8c399c42-218f-43da-b0aa-06ac26cd8f12",ship_id:1,terminal_time:"2023-01-10 05:00:03",lat:-5.538432,lng:104.573612,wind_speed:6,wind_direction:11.2,heading:311.6,distance:88715.09,depth:-31,cog:246.8,sog:0,created_at:"2023-01-10 08:12:42",updated_at:"2023-01-10 08:12:42"},{time:1673327703e3,id:"27a493f7-b14d-40e8-8f51-878ed652d553",ship_id:1,terminal_time:"2023-01-10 05:15:03",lat:-5.538348,lng:104.573678,wind_speed:7.9,wind_direction:11.2,heading:304.8,distance:88715.09,depth:-31,cog:251.7,sog:0,created_at:"2023-01-10 08:12:18",updated_at:"2023-01-10 08:12:18"},{time:1673328603e3,id:"f54bb566-292e-490c-883f-df6d70b3841b",ship_id:1,terminal_time:"2023-01-10 05:30:03",lat:-5.538438,lng:104.57369,wind_speed:6.2,wind_direction:11.2,heading:307.8,distance:88715.09,depth:-31.3,cog:246.1,sog:0,created_at:"2023-01-10 08:12:04",updated_at:"2023-01-10 08:12:04"},{time:1673329503e3,id:"31775419-f67f-4db4-a57d-40ae80fb1fee",ship_id:1,terminal_time:"2023-01-10 05:45:03",lat:-5.5385349999999995,lng:104.573568,wind_speed:7.7,wind_direction:11.2,heading:315.1,distance:88715.1,depth:-31.3,cog:246.9,sog:0,created_at:"2023-01-10 08:12:07",updated_at:"2023-01-10 08:12:07"},{time:1673330403e3,id:"2aa1b843-cd65-401d-ad7b-b8c474060a3b",ship_id:1,terminal_time:"2023-01-10 06:00:03",lat:-5.538448,lng:104.573675,wind_speed:6.9,wind_direction:11.2,heading:309.7,distance:88715.1,depth:-31.3,cog:337.6,sog:.1,created_at:"2023-01-10 08:12:18",updated_at:"2023-01-10 08:12:18"},{time:1673331303e3,id:"8f037bb3-2b98-4249-ae83-9bb727b265b0",ship_id:1,terminal_time:"2023-01-10 06:15:03",lat:-5.538453,lng:104.573677,wind_speed:6.6,wind_direction:11.2,heading:306.4,distance:88715.11,depth:-31.3,cog:223.5,sog:.1,created_at:"2023-01-10 08:13:02",updated_at:"2023-01-10 08:13:02"},{time:1673332203e3,id:"bb7e96d9-62c3-4ce3-b7bf-c5d7c72c9df1",ship_id:1,terminal_time:"2023-01-10 06:30:03",lat:-5.53864,lng:104.573363,wind_speed:8.3,wind_direction:11.2,heading:3,distance:88715.12,depth:-31.6,cog:0,sog:0,created_at:"2023-01-10 08:13:13",updated_at:"2023-01-10 08:13:13"},{time:1673333103e3,id:"cac4d244-d1fb-4d6a-92ac-bdbe7da18de9",ship_id:1,terminal_time:"2023-01-10 06:45:03",lat:-5.53888,lng:104.573258,wind_speed:7.5,wind_direction:11.2,heading:334.3,distance:88715.12,depth:-31.6,cog:96.5,sog:.1,created_at:"2023-01-10 08:12:49",updated_at:"2023-01-10 08:12:49"},{time:1673334003e3,id:"ef0d6a02-a51d-43d6-ae22-41c8f4263f47",ship_id:1,terminal_time:"2023-01-10 07:00:03",lat:-5.538878,lng:104.573242,wind_speed:6.2,wind_direction:11.2,heading:336.8,distance:88715.12,depth:-31.6,cog:86.3,sog:0,created_at:"2023-01-10 08:12:40",updated_at:"2023-01-10 08:12:40"},{time:1673334903e3,id:"c8300c89-faab-4152-8194-a46bb0b19e3a",ship_id:1,terminal_time:"2023-01-10 07:15:03",lat:-5.538762,lng:104.573413,wind_speed:4.6,wind_direction:11.2,heading:322.3,distance:88715.12,depth:-31.6,cog:358.1,sog:0,created_at:"2023-01-10 08:13:39",updated_at:"2023-01-10 08:13:39"},{time:1673335803e3,id:"5ef47cf2-3be4-4288-b43d-2dfb23367dbd",ship_id:1,terminal_time:"2023-01-10 07:30:03",lat:-5.538867,lng:104.573397,wind_speed:5,wind_direction:11.2,heading:326.8,distance:88715.12,depth:-31.6,cog:229,sog:0,created_at:"2023-01-10 08:13:25",updated_at:"2023-01-10 08:13:25"},{time:1673336703e3,id:"c28bf5e0-d94c-4f83-8bfd-8cd79550a629",ship_id:1,terminal_time:"2023-01-10 07:45:03",lat:-5.538897,lng:104.573083,wind_speed:5.4,wind_direction:11.2,heading:341.4,distance:88715.13,depth:-32,cog:251.6,sog:0,created_at:"2023-01-10 08:13:39",updated_at:"2023-01-10 08:13:39"},{time:1673337608e3,id:"8170db59-e578-4892-80c4-85355054b0d1",ship_id:1,terminal_time:"2023-01-10 08:00:08",lat:-5.538908,lng:104.572883,wind_speed:3.6,wind_direction:11.2,heading:351.4,distance:88715.14,depth:-32,cog:316.1,sog:0,created_at:"2023-01-10 08:13:38",updated_at:"2023-01-10 08:13:38"},{time:1673338503e3,id:"32200fd0-ad31-4afc-86c6-0eae8d39b303",ship_id:1,terminal_time:"2023-01-10 08:15:03",lat:-5.538917,lng:104.572915,wind_speed:3.8,wind_direction:11.2,heading:351.1,distance:88715.14,depth:-32,cog:324.3,sog:0,created_at:"2023-01-10 08:15:05",updated_at:"2023-01-10 08:15:05"},{time:1673339403e3,id:"c3f39b55-e63f-47d2-9aeb-e7a3c11e6b6c",ship_id:1,terminal_time:"2023-01-10 08:30:03",lat:-5.538923,lng:104.572508,wind_speed:2.7,wind_direction:11.2,heading:0,distance:0,depth:-32,cog:292.2,sog:.2,created_at:"2023-01-10 08:30:05",updated_at:"2023-01-10 08:30:05"},{time:1673340303e3,id:"0f1d7c32-e1b4-4223-813c-3bcb9ff99519",ship_id:1,terminal_time:"2023-01-10 08:45:03",lat:-5.538778,lng:104.5725,wind_speed:2.9,wind_direction:11.2,heading:13,distance:88715.16,depth:-33,cog:110.6,sog:.1,created_at:"2023-01-10 08:45:05",updated_at:"2023-01-10 08:45:05"},{time:1673341203e3,id:"514696b1-d5c1-4d56-ac70-c12912248928",ship_id:1,terminal_time:"2023-01-10 09:00:03",lat:-5.538873,lng:104.572512,wind_speed:2.1,wind_direction:11.2,heading:9.6,distance:88715.17,depth:-32,cog:61.8,sog:0,created_at:"2023-01-10 09:00:05",updated_at:"2023-01-10 09:00:05"},{time:1673342103e3,id:"bb13fd39-bf15-4e3f-9f37-7ba8e070e27b",ship_id:1,terminal_time:"2023-01-10 09:15:03",lat:-5.538902,lng:104.572612,wind_speed:.3,wind_direction:11.2,heading:1.6,distance:88715.18,depth:-32,cog:209.1,sog:0,created_at:"2023-01-10 09:15:06",updated_at:"2023-01-10 09:15:06"},{time:1673343003e3,id:"52799df0-4dda-42e4-ae26-5f9ecb2e1f35",ship_id:1,terminal_time:"2023-01-10 09:30:03",lat:-5.53877,lng:104.572458,wind_speed:.7,wind_direction:11.2,heading:13,distance:88715.19,depth:-31.6,cog:274.9,sog:0,created_at:"2023-01-10 09:30:04",updated_at:"2023-01-10 09:30:04"},{time:1673343903e3,id:"582eb540-8281-4f06-be77-4f020238e88e",ship_id:1,terminal_time:"2023-01-10 09:45:03",lat:-5.538838,lng:104.572397,wind_speed:.3,wind_direction:11.2,heading:17.9,distance:88715.2,depth:-32,cog:98.3,sog:0,created_at:"2023-01-10 09:45:04",updated_at:"2023-01-10 09:45:04"},{time:1673344803e3,id:"d018284e-96bc-40a5-afdf-706261c83173",ship_id:1,terminal_time:"2023-01-10 10:00:03",lat:-5.538725,lng:104.572233,wind_speed:1.7,wind_direction:11.2,heading:26,distance:88715.22,depth:-32,cog:289.9,sog:.2,created_at:"2023-01-10 10:00:05",updated_at:"2023-01-10 10:00:05"},{time:1673345703e3,id:"c7e76799-9152-4732-b4a8-78b81f78ecbb",ship_id:1,terminal_time:"2023-01-10 10:15:03",lat:-5.538707,lng:104.572228,wind_speed:1.5,wind_direction:11.2,heading:28.8,distance:88715.23,depth:-32,cog:295.6,sog:0,created_at:"2023-01-10 10:15:06",updated_at:"2023-01-10 10:15:06"},{time:1673346603e3,id:"5aa686e9-1f35-4d75-94e0-4b24e6575a96",ship_id:1,terminal_time:"2023-01-10 10:30:03",lat:-5.538782,lng:104.572288,wind_speed:2.1,wind_direction:11.2,heading:0,distance:0,depth:-32,cog:115,sog:0,created_at:"2023-01-10 10:30:06",updated_at:"2023-01-10 10:30:06"},{time:1673347503e3,id:"4980bff8-4764-4dad-81cb-0f47d3ebeddc",ship_id:1,terminal_time:"2023-01-10 10:45:03",lat:-5.538625,lng:104.572078,wind_speed:2.1,wind_direction:11.2,heading:0,distance:0,depth:-31.6,cog:306.6,sog:.1,created_at:"2023-01-11 08:19:01",updated_at:"2023-01-11 08:19:01"},{time:1673348403e3,id:"04b85d97-df61-4c7c-9ca5-fadbac1226ee",ship_id:1,terminal_time:"2023-01-10 11:00:03",lat:-5.538578,lng:104.572077,wind_speed:2.7,wind_direction:11.2,heading:40.3,distance:88715.28,depth:-33,cog:99.9,sog:.1,created_at:"2023-01-11 08:09:51",updated_at:"2023-01-11 08:09:51"},{time:1673349303e3,id:"a246a336-7d32-4004-9c36-0669444bfb5f",ship_id:1,terminal_time:"2023-01-10 11:15:03",lat:-5.538568,lng:104.57207,wind_speed:3.3,wind_direction:11.2,heading:0,distance:0,depth:-31.6,cog:307.3,sog:.1,created_at:"2023-01-11 08:59:53",updated_at:"2023-01-11 08:59:53"},{time:1673350203e3,id:"7a34bddb-396b-42bc-8b79-427c5236a76f",ship_id:1,terminal_time:"2023-01-10 11:30:03",lat:-5.538305,lng:104.57185,wind_speed:6.8,wind_direction:88.6,heading:59.8,distance:88715.33,depth:-31.6,cog:9.6,sog:.1,created_at:"2023-01-11 09:18:11",updated_at:"2023-01-11 09:18:11"},{time:1673351103e3,id:"d9220e3e-bbc0-4395-bf55-bf94ebcd524d",ship_id:1,terminal_time:"2023-01-10 11:45:03",lat:-5.537692,lng:104.571797,wind_speed:9.7,wind_direction:116.8,heading:95.5,distance:88715.36,depth:-31.6,cog:26,sog:.3,created_at:"2023-01-11 08:23:10",updated_at:"2023-01-11 08:23:10"},{time:1673352003e3,id:"8a8a13ef-e698-438c-930f-49ec0bb09f63",ship_id:1,terminal_time:"2023-01-10 12:00:03",lat:-5.537127,lng:104.571998,wind_speed:11.2,wind_direction:109.8,heading:122.7,distance:88715.36,depth:-31.6,cog:26.7,sog:.3,created_at:"2023-01-11 09:34:41",updated_at:"2023-01-11 09:34:41"},{time:1673352903e3,id:"229984b5-6b7d-4e00-9a08-4206488dca9d",ship_id:1,terminal_time:"2023-01-10 12:15:03",lat:-5.536328,lng:104.573425,wind_speed:14.9,wind_direction:56.3,heading:188.4,distance:88715.37,depth:-31,cog:121.6,sog:.5,created_at:"2023-01-11 08:16:13",updated_at:"2023-01-11 08:16:13"},{time:1673353803e3,id:"6a965009-1ee6-44b6-9d4a-a8749a1c4dd8",ship_id:1,terminal_time:"2023-01-10 12:30:03",lat:-5.536405,lng:104.573513,wind_speed:17.6,wind_direction:54.9,heading:199.6,distance:88715.39,depth:-31,cog:328,sog:.3,created_at:"2023-01-11 10:05:28",updated_at:"2023-01-11 10:05:28"},{time:1673354703e3,id:"13b5ce26-e32d-45b6-9906-297e9012334b",ship_id:1,terminal_time:"2023-01-10 12:45:03",lat:-5.536357,lng:104.573753,wind_speed:19.2,wind_direction:43.6,heading:197.7,distance:88715.4,depth:-30.6,cog:289.1,sog:.2,created_at:"2023-01-11 08:18:32",updated_at:"2023-01-11 08:18:32"},{time:1673355603e3,id:"ecda7f05-7d69-4f20-bcb7-310ce62047a6",ship_id:1,terminal_time:"2023-01-10 13:00:03",lat:-5.536677,lng:104.574085,wind_speed:20.4,wind_direction:43.6,heading:215.3,distance:88715.42,depth:-31,cog:95.7,sog:.1,created_at:"2023-01-11 08:16:09",updated_at:"2023-01-11 08:16:09"},{time:1673356503e3,id:"67d9e2e8-6850-45c7-a608-0f6f3750adf7",ship_id:1,terminal_time:"2023-01-10 13:15:03",lat:-5.536792,lng:104.574192,wind_speed:15.9,wind_direction:33.6,heading:225.5,distance:88715.43,depth:-31.3,cog:209.7,sog:.1,created_at:"2023-01-11 09:28:23",updated_at:"2023-01-11 09:28:23"},{time:1673357403e3,id:"7c6d8e6c-0652-4c08-9c17-13466996bfa9",ship_id:1,terminal_time:"2023-01-10 13:30:03",lat:-5.536822,lng:104.574207,wind_speed:14.1,wind_direction:32.3,heading:224.4,distance:88715.45,depth:-31,cog:109.6,sog:.1,created_at:"2023-01-11 08:01:23",updated_at:"2023-01-11 08:01:23"},{time:1673358303e3,id:"f71a5fe4-a992-470c-87d5-901a98539cd8",ship_id:1,terminal_time:"2023-01-10 13:45:03",lat:-5.536855,lng:104.574237,wind_speed:11.6,wind_direction:50.6,heading:220.9,distance:88715.47,depth:-31,cog:99.8,sog:.1,created_at:"2023-01-11 08:59:38",updated_at:"2023-01-11 08:59:38"},{time:1673359203e3,id:"bdb096b3-a7b1-479a-bef5-ea8f3b003506",ship_id:1,terminal_time:"2023-01-10 14:00:03",lat:-5.537295,lng:104.574445,wind_speed:15.5,wind_direction:21,heading:249.2,distance:88715.48,depth:-31,cog:132.1,sog:.1,created_at:"2023-01-11 08:44:42",updated_at:"2023-01-11 08:44:42"},{time:1673360103e3,id:"19bccdc4-4e82-4152-b765-cba9d3cdc2fb",ship_id:1,terminal_time:"2023-01-10 14:15:03",lat:-5.537357,lng:104.574448,wind_speed:20.9,wind_direction:15.4,heading:253.6,distance:88715.49,depth:-31,cog:25,sog:.1,created_at:"2023-01-11 09:05:09",updated_at:"2023-01-11 09:05:09"},{time:1673361003e3,id:"9545fd94-a3ad-4016-bbd4-072cc971b7b4",ship_id:1,terminal_time:"2023-01-10 14:30:03",lat:-5.537183,lng:104.574422,wind_speed:15.3,wind_direction:21,heading:243.8,distance:88715.51,depth:-31,cog:317.2,sog:.2,created_at:"2023-01-11 08:05:43",updated_at:"2023-01-11 08:05:43"},{time:1673361903e3,id:"775ad8f3-7486-4dda-8b7b-a41720291bd7",ship_id:1,terminal_time:"2023-01-10 14:45:03",lat:-5.537147,lng:104.574497,wind_speed:20,wind_direction:11.2,heading:243.4,distance:88715.53,depth:-31,cog:18.5,sog:.1,created_at:"2023-01-11 08:54:04",updated_at:"2023-01-11 08:54:04"},{time:1673362803e3,id:"83abeb04-acff-403c-9cc5-7fb61c8448d9",ship_id:1,terminal_time:"2023-01-10 15:00:03",lat:-5.537225,lng:104.574413,wind_speed:14.5,wind_direction:21,heading:243.4,distance:88715.56,depth:-31,cog:321.2,sog:.1,created_at:"2023-01-11 09:13:01",updated_at:"2023-01-11 09:13:01"},{time:1673363703e3,id:"acaa3bc0-f391-4ec9-8168-4d6ebc980f12",ship_id:1,terminal_time:"2023-01-10 15:15:03",lat:-5.537107,lng:104.574492,wind_speed:19,wind_direction:9.7,heading:243.3,distance:88715.58,depth:-31,cog:319.3,sog:.2,created_at:"2023-01-11 10:25:25",updated_at:"2023-01-11 10:25:25"},{time:1673364603e3,id:"83580a71-bc32-40ba-a819-59e1591bae49",ship_id:1,terminal_time:"2023-01-10 15:30:03",lat:-5.537295,lng:104.574417,wind_speed:18.8,wind_direction:26.7,heading:237.1,distance:88715.61,depth:-31,cog:72.7,sog:.2,created_at:"2023-01-11 08:24:04",updated_at:"2023-01-11 08:24:04"},{time:1673365503e3,id:"d107598f-b613-40ad-80e8-f021392d01a3",ship_id:1,terminal_time:"2023-01-10 15:45:03",lat:-5.53849,lng:104.561972,wind_speed:19.2,wind_direction:8.4,heading:266.7,distance:88716.39,depth:-35.6,cog:265.4,sog:2.8,created_at:"2023-01-11 09:19:29",updated_at:"2023-01-11 09:19:29"},{time:1673366403e3,id:"859441a4-aad6-4ebd-aa8e-4a8578c5526d",ship_id:1,terminal_time:"2023-01-10 16:00:03",lat:-5.541455,lng:104.560142,wind_speed:10.8,wind_direction:0,heading:260.5,distance:88716.58,depth:-41.3,cog:93.6,sog:.4,created_at:"2023-01-11 09:56:23",updated_at:"2023-01-11 09:56:23"},{time:1673367303e3,id:"28c5590a-1222-4129-b1f8-464f4a1ab33d",ship_id:1,terminal_time:"2023-01-10 16:15:03",lat:-5.542728,lng:104.560063,wind_speed:15.9,wind_direction:315.3,heading:0,distance:0,depth:-42,cog:203.9,sog:.3,created_at:"2023-01-11 08:16:55",updated_at:"2023-01-11 08:16:55"},{time:1673368203e3,id:"9331e12a-800b-44a4-8481-ef5423926243",ship_id:1,terminal_time:"2023-01-10 16:30:03",lat:-5.54335,lng:104.559467,wind_speed:14.7,wind_direction:336.4,heading:316.8,distance:88716.61,depth:-42,cog:326.5,sog:.1,created_at:"2023-01-11 09:02:06",updated_at:"2023-01-11 09:02:06"},{time:1673369413e3,id:"b6c2fdc4-0a36-412f-97b3-e19f5f1b754e",ship_id:1,terminal_time:"2023-01-10 16:50:13",lat:-5.54225,lng:104.560177,wind_speed:7.9,wind_direction:16.8,heading:280.8,distance:88716.63,depth:-41.6,cog:348.4,sog:.2,created_at:"2023-01-11 08:36:51",updated_at:"2023-01-11 08:36:51"},{time:1673370003e3,id:"88544c71-07ec-47a3-9425-83443bf1543f",ship_id:1,terminal_time:"2023-01-10 17:00:03",lat:-5.541955,lng:104.560087,wind_speed:12,wind_direction:9.7,heading:270.3,distance:88716.64,depth:-41.6,cog:5.6,sog:.2,created_at:"2023-01-11 09:17:54",updated_at:"2023-01-11 09:17:54"},{time:1673370903e3,id:"0439c29f-90b9-48cc-bec9-af020ee12223",ship_id:1,terminal_time:"2023-01-10 17:15:03",lat:-5.54169,lng:104.560058,wind_speed:8.1,wind_direction:32.3,heading:260.5,distance:88716.65,depth:-41.6,cog:309,sog:.2,created_at:"2023-01-11 10:17:44",updated_at:"2023-01-11 10:17:44"},{time:1673371803e3,id:"5d8047ae-778e-4dae-b543-c5d312c91b89",ship_id:1,terminal_time:"2023-01-10 17:30:03",lat:-5.541797,lng:104.560018,wind_speed:10.4,wind_direction:43.6,heading:258.3,distance:88716.67,depth:-42,cog:106.2,sog:.2,created_at:"2023-01-11 09:22:34",updated_at:"2023-01-11 09:22:34"},{time:1673372703e3,id:"90fec783-94f4-4620-879e-cfd5bf0f9b98",ship_id:1,terminal_time:"2023-01-10 17:45:03",lat:-5.542028,lng:104.560158,wind_speed:7.7,wind_direction:32.3,heading:273,distance:88716.67,depth:-41.6,cog:229.3,sog:.1,created_at:"2023-01-11 09:13:40",updated_at:"2023-01-11 09:13:40"},{time:1673373603e3,id:"925227d5-1685-4efc-8d4d-07ee45b665cb",ship_id:1,terminal_time:"2023-01-10 18:00:03",lat:-5.542407,lng:104.559988,wind_speed:4.6,wind_direction:49.1,heading:282.2,distance:88716.68,depth:-42,cog:194,sog:.1,created_at:"2023-01-11 09:36:51",updated_at:"2023-01-11 09:36:51"},{time:1673374503e3,id:"2c1746d2-52ed-4878-96e6-c5bcb5e15f57",ship_id:1,terminal_time:"2023-01-10 18:15:03",lat:-5.542953,lng:104.559968,wind_speed:4.8,wind_direction:45,heading:303.8,distance:88716.69,depth:-42.3,cog:184.6,sog:.1,created_at:"2023-01-11 09:53:35",updated_at:"2023-01-11 09:53:35"},{time:1673375403e3,id:"458bc847-49b8-4103-b441-5b85070c4a26",ship_id:1,terminal_time:"2023-01-10 18:30:03",lat:-5.54319,lng:104.559698,wind_speed:8.1,wind_direction:26.7,heading:317.6,distance:88716.71,depth:-42.3,cog:259,sog:.2,created_at:"2023-01-11 10:41:12",updated_at:"2023-01-11 10:41:12"},{time:1673376303e3,id:"7a04d24c-562e-4260-8524-122266d76b5d",ship_id:1,terminal_time:"2023-01-10 18:45:03",lat:-5.543392,lng:104.559572,wind_speed:6.8,wind_direction:353.3,heading:326.9,distance:88716.71,depth:-42.3,cog:198.2,sog:.1,created_at:"2023-01-11 10:01:54",updated_at:"2023-01-11 10:01:54"},{time:1673377203e3,id:"4914b017-1b9f-4f4b-a291-d9b6bf8ecccd",ship_id:1,terminal_time:"2023-01-10 19:00:03",lat:-5.54358,lng:104.559465,wind_speed:4.2,wind_direction:359,heading:335.6,distance:88716.71,depth:-42.6,cog:264.1,sog:.1,created_at:"2023-01-11 10:59:54",updated_at:"2023-01-11 10:59:54"},{time:1673378108e3,id:"b76818db-b6a8-430f-a64e-55aacb30bd1e",ship_id:1,terminal_time:"2023-01-10 19:15:08",lat:-5.54346,lng:104.559573,wind_speed:9.3,wind_direction:282.9,heading:336.1,distance:88716.71,depth:-42.6,cog:86,sog:.2,created_at:"2023-01-11 10:54:48",updated_at:"2023-01-11 10:54:48"},{time:1673379003e3,id:"b72a0185-3cac-4028-be33-d0d9cf496a5b",ship_id:1,terminal_time:"2023-01-10 19:30:03",lat:-5.5430150000000005,lng:104.559922,wind_speed:7.3,wind_direction:325.1,heading:311.5,distance:88716.72,depth:-42.3,cog:21.5,sog:.1,created_at:"2023-01-11 10:48:56",updated_at:"2023-01-11 10:48:56"},{time:1673379903e3,id:"00de7ba1-da7b-4f09-b03d-b1e05711ac14",ship_id:1,terminal_time:"2023-01-10 19:45:03",lat:-5.542545,lng:104.560115,wind_speed:7.9,wind_direction:354.6,heading:294.8,distance:88716.73,depth:-42.3,cog:19.6,sog:0,created_at:"2023-01-11 10:06:49",updated_at:"2023-01-11 10:06:49"},{time:1673380803e3,id:"bb4f09cd-d3ea-4bd7-8b43-631d7492bd52",ship_id:1,terminal_time:"2023-01-10 20:00:03",lat:-5.542382,lng:104.560208,wind_speed:12,wind_direction:347.6,heading:289,distance:88716.74,depth:-42.3,cog:354.6,sog:.1,created_at:"2023-01-11 10:02:10",updated_at:"2023-01-11 10:02:10"},{time:1673381703e3,id:"3214b99f-8371-483a-b938-aa3c97e21d86",ship_id:1,terminal_time:"2023-01-10 20:15:03",lat:-5.541937,lng:104.560167,wind_speed:10.4,wind_direction:359,heading:274,distance:88716.75,depth:-42.3,cog:354.7,sog:.1,created_at:"2023-01-11 10:43:38",updated_at:"2023-01-11 10:43:38"},{time:1673382603e3,id:"4ac048c2-864d-4e5c-b5d3-f9bf5206d98e",ship_id:1,terminal_time:"2023-01-10 20:30:03",lat:-5.541728,lng:104.560092,wind_speed:8.1,wind_direction:354.6,heading:267.6,distance:88716.75,depth:-42.3,cog:222.1,sog:0,created_at:"2023-01-11 11:15:05",updated_at:"2023-01-11 11:15:05"},{time:1673383503e3,id:"8149de7d-77d9-48e1-a53d-b6433e2f73d2",ship_id:1,terminal_time:"2023-01-10 20:45:03",lat:-5.541787,lng:104.56018,wind_speed:4.6,wind_direction:9.7,heading:265.9,distance:88716.76,depth:-42.3,cog:317,sog:.1,created_at:"2023-01-11 10:35:19",updated_at:"2023-01-11 10:35:19"},{time:1673384403e3,id:"2923b743-662d-4062-b187-ceeae60b90df",ship_id:1,terminal_time:"2023-01-10 21:00:03",lat:-5.541892,lng:104.55998,wind_speed:5.6,wind_direction:9.7,heading:268,distance:88716.78,depth:-42.3,cog:194,sog:.1,created_at:"2023-01-11 10:29:27",updated_at:"2023-01-11 10:29:27"},{time:1673385303e3,id:"6c1036d6-44a0-425b-8658-9db0c3ed493d",ship_id:1,terminal_time:"2023-01-10 21:15:03",lat:-5.542145,lng:104.56009,wind_speed:4,wind_direction:21,heading:277.4,distance:88716.79,depth:-42.6,cog:260.7,sog:.1,created_at:"2023-01-11 11:25:52",updated_at:"2023-01-11 11:25:52"},{time:1673386203e3,id:"6368e190-3bdc-4221-bff8-71d5bb0a3ca7",ship_id:1,terminal_time:"2023-01-10 21:30:03",lat:-5.542302,lng:104.560052,wind_speed:6.2,wind_direction:11.7,heading:285.8,distance:88716.79,depth:-42.6,cog:164.1,sog:0,created_at:"2023-01-11 11:21:34",updated_at:"2023-01-11 11:21:34"},{time:1673387103e3,id:"fc0088a3-893d-4fe4-bfe7-30679fbca91e",ship_id:1,terminal_time:"2023-01-10 21:45:03",lat:-5.542138,lng:104.560253,wind_speed:10.3,wind_direction:336.4,heading:286,distance:88716.8,depth:-42.3,cog:14.8,sog:.2,created_at:"2023-01-11 11:19:10",updated_at:"2023-01-11 11:19:10"},{time:1673388003e3,id:"71be65de-7a90-43dd-81c8-39b9fef2c290",ship_id:1,terminal_time:"2023-01-10 22:00:03",lat:-5.54161,lng:104.559828,wind_speed:2.7,wind_direction:336.4,heading:262.8,distance:88716.82,depth:-42,cog:266.4,sog:.1,created_at:"2023-01-11 10:57:14",updated_at:"2023-01-11 10:57:14"},{time:1673388908e3,id:"e42797d0-df06-4807-ab76-c37418dcfe02",ship_id:1,terminal_time:"2023-01-10 22:15:08",lat:-5.541503,lng:104.55974,wind_speed:6.6,wind_direction:336.4,heading:252.5,distance:88716.83,depth:-42,cog:14.8,sog:.1,created_at:"2023-01-11 11:11:30",updated_at:"2023-01-11 11:11:30"},{time:1673389803e3,id:"eee442cb-4b9b-47a6-9d4d-b678c812444b",ship_id:1,terminal_time:"2023-01-10 22:30:03",lat:-5.54109,lng:104.560015,wind_speed:12,wind_direction:16.8,heading:246.5,distance:88716.84,depth:-41.6,cog:347.3,sog:.1,created_at:"2023-01-11 11:10:12",updated_at:"2023-01-11 11:10:12"},{time:1673390703e3,id:"e4a937de-d12c-4530-90a5-f64aa8f75f72",ship_id:1,terminal_time:"2023-01-10 22:45:03",lat:-5.541293,lng:104.559667,wind_speed:2.7,wind_direction:43.6,heading:245.7,distance:88716.86,depth:-42,cog:209.6,sog:.1,created_at:"2023-01-11 11:04:22",updated_at:"2023-01-11 11:04:22"},{time:1673391698e3,id:"68a3ef72-960a-4387-8aa6-5b66611fe0a2",ship_id:1,terminal_time:"2023-01-10 23:01:38",lat:-5.541548,lng:104.559765,wind_speed:3.4,wind_direction:49.1,heading:0,distance:0,depth:-41.6,cog:134.3,sog:.1,created_at:"2023-01-11 11:39:16",updated_at:"2023-01-11 11:39:16"},{time:1673392503e3,id:"089eb567-2b29-41e9-9781-9030e190f220",ship_id:1,terminal_time:"2023-01-10 23:15:03",lat:-5.54197,lng:104.560077,wind_speed:4.2,wind_direction:56.3,heading:271.4,distance:88716.87,depth:-42,cog:164.7,sog:.2,created_at:"2023-01-11 11:30:13",updated_at:"2023-01-11 11:30:13"},{time:1673393403e3,id:"63129a87-03cc-4ede-ba2d-91ee71078d8a",ship_id:1,terminal_time:"2023-01-10 23:30:03",lat:-5.542198,lng:104.5601,wind_speed:2.3,wind_direction:43.5,heading:286,distance:88716.87,depth:-42,cog:207.2,sog:.1,created_at:"2023-01-11 11:43:42",updated_at:"2023-01-11 11:43:42"},{time:1673394303e3,id:"4aaecec9-7db3-489d-9e3f-9027a0451a1d",ship_id:1,terminal_time:"2023-01-10 23:45:03",lat:-5.542232,lng:104.56008,wind_speed:2.5,wind_direction:357.5,heading:289.4,distance:88716.87,depth:-42,cog:172.7,sog:.1,created_at:"2023-01-11 11:30:30",updated_at:"2023-01-11 11:30:30"},{time:1673395203e3,id:"5e443c1f-a779-458b-923d-d79b8bdb2950",ship_id:1,terminal_time:"2023-01-11 00:00:03",lat:-5.542575,lng:104.559993,wind_speed:4.2,wind_direction:49.1,heading:295.9,distance:88716.87,depth:-42,cog:178.8,sog:.1,created_at:"2023-01-11 11:20:30",updated_at:"2023-01-11 11:20:30"},{time:1673478415e3,id:"3a27a298-8266-41ea-83c2-1fa693ef93a8",ship_id:1,terminal_time:"2023-01-11 23:06:55",lat:-5.91961,lng:106.000188,wind_speed:15.1,wind_direction:201.2,heading:31.1,distance:88812.6,depth:-4,cog:306.2,sog:.1,created_at:"2023-01-12 08:00:07",updated_at:"2023-01-12 08:00:07"},{time:1673482021e3,id:"301c2657-23af-4610-8577-1267f195a1c7",ship_id:1,terminal_time:"2023-01-12 00:07:01",lat:-5.91961,lng:106.000188,wind_speed:15.1,wind_direction:201.2,heading:31.1,distance:88812.6,depth:-4,cog:306.2,sog:0,created_at:"2023-01-12 08:00:10",updated_at:"2023-01-12 08:00:10"},{time:1673482501e3,id:"ffe5c699-e3bc-4273-a0ff-33499003b397",ship_id:1,terminal_time:"2023-01-12 00:15:01",lat:-5.919605,lng:106.00021,wind_speed:12.8,wind_direction:212.5,heading:31.1,distance:88812.61,depth:-4,cog:295.9,sog:0,created_at:"2023-01-12 08:01:25",updated_at:"2023-01-12 08:01:25"},{time:1673483401e3,id:"95be2e54-e93e-4fe2-a470-028106f4827b",ship_id:1,terminal_time:"2023-01-12 00:30:01",lat:-5.919602,lng:106.000222,wind_speed:15.1,wind_direction:219.6,heading:31,distance:88812.61,depth:-4,cog:107.8,sog:0,created_at:"2023-01-12 08:00:38",updated_at:"2023-01-12 08:00:38"},{time:1673484301e3,id:"62eb058f-ab11-46fc-8990-a9da9a055cae",ship_id:1,terminal_time:"2023-01-12 00:45:01",lat:-5.91959,lng:106.00022,wind_speed:19.6,wind_direction:206.9,heading:31.2,distance:88812.61,depth:-4,cog:126.6,sog:0,created_at:"2023-01-12 08:02:17",updated_at:"2023-01-12 08:02:17"},{time:1673485201e3,id:"db170fcf-5c04-48b1-8b3e-1ea1a747de17",ship_id:1,terminal_time:"2023-01-12 01:00:01",lat:-5.919602,lng:106.000213,wind_speed:14.1,wind_direction:206.9,heading:31.2,distance:88812.61,depth:-3.6,cog:121.9,sog:0,created_at:"2023-01-12 08:03:00",updated_at:"2023-01-12 08:03:00"},{time:1673486101e3,id:"53202233-3f20-46fc-b124-4e5b880022cc",ship_id:1,terminal_time:"2023-01-12 01:15:01",lat:-5.919595,lng:106.00023,wind_speed:20.4,wind_direction:204,heading:31.2,distance:88812.61,depth:-3.6,cog:137,sog:.1,created_at:"2023-01-12 08:03:40",updated_at:"2023-01-12 08:03:40"},{time:1673487001e3,id:"f2ad03cf-9317-4535-884b-21401f965fa1",ship_id:1,terminal_time:"2023-01-12 01:30:01",lat:-5.91957,lng:106.000213,wind_speed:16.1,wind_direction:206.9,heading:31.6,distance:88812.62,depth:-3.6,cog:312.3,sog:0,created_at:"2023-01-12 08:01:18",updated_at:"2023-01-12 08:01:18"},{time:1673487901e3,id:"1717eafe-2674-4fab-ac02-c130433596ce",ship_id:1,terminal_time:"2023-01-12 01:45:01",lat:-5.919583,lng:106.000232,wind_speed:16.9,wind_direction:208.3,heading:31.3,distance:88812.62,depth:-3.6,cog:280.3,sog:.1,created_at:"2023-01-12 08:00:28",updated_at:"2023-01-12 08:00:28"},{time:1673488801e3,id:"a257ae15-7b7d-4982-9e0a-7d65c7724a0b",ship_id:1,terminal_time:"2023-01-12 02:00:01",lat:-5.919518,lng:106.000213,wind_speed:19.2,wind_direction:213.9,heading:30.9,distance:88812.62,depth:-3.6,cog:303.5,sog:0,created_at:"2023-01-12 08:02:13",updated_at:"2023-01-12 08:02:13"},{time:1673489701e3,id:"e16c56d6-2d75-447e-9552-8e9dc5c89d17",ship_id:1,terminal_time:"2023-01-12 02:15:01",lat:-5.919577,lng:106.000232,wind_speed:20,wind_direction:212.5,heading:31.1,distance:88812.63,depth:-3.6,cog:310.5,sog:.1,created_at:"2023-01-12 08:01:35",updated_at:"2023-01-12 08:01:35"},{time:1673490601e3,id:"f19c3f20-ab29-457b-939a-1b258e8f55ad",ship_id:1,terminal_time:"2023-01-12 02:30:01",lat:-5.919567,lng:106.000248,wind_speed:19,wind_direction:212.1,heading:31.2,distance:88812.64,depth:-3.3,cog:313.2,sog:.1,created_at:"2023-01-12 08:00:48",updated_at:"2023-01-12 08:00:48"},{time:1673491501e3,id:"36399975-75a1-4ae4-9944-fe85dc14f62b",ship_id:1,terminal_time:"2023-01-12 02:45:01",lat:-5.919593,lng:106.000235,wind_speed:14.9,wind_direction:202.7,heading:31.2,distance:88812.65,depth:-3.3,cog:331.5,sog:.1,created_at:"2023-01-12 08:02:40",updated_at:"2023-01-12 08:02:40"},{time:1673492401e3,id:"85c19f34-0992-4c6f-b7dc-db0b624a306b",ship_id:1,terminal_time:"2023-01-12 03:00:01",lat:-5.919592,lng:106.00023,wind_speed:17.6,wind_direction:209.2,heading:31.2,distance:88812.66,depth:-3.3,cog:99.6,sog:0,created_at:"2023-01-12 08:03:12",updated_at:"2023-01-12 08:03:12"},{time:1673493301e3,id:"c778fd18-b2e6-4009-9e52-6cb03b3fa5f9",ship_id:1,terminal_time:"2023-01-12 03:15:01",lat:-5.919595,lng:106.00021,wind_speed:18.4,wind_direction:206.9,heading:31.1,distance:88812.67,depth:-3.3,cog:304.7,sog:.1,created_at:"2023-01-12 08:03:47",updated_at:"2023-01-12 08:03:47"},{time:1673494201e3,id:"6475c752-084a-474b-83f3-ed822b2ccb81",ship_id:1,terminal_time:"2023-01-12 03:30:01",lat:-5.919612,lng:106.000213,wind_speed:17.6,wind_direction:213.9,heading:31,distance:88812.68,depth:-3.3,cog:294.5,sog:.1,created_at:"2023-01-12 08:01:24",updated_at:"2023-01-12 08:01:24"},{time:1673495101e3,id:"a56d58a7-c4ba-4709-923b-545fd0a68e23",ship_id:1,terminal_time:"2023-01-12 03:45:01",lat:-5.919602,lng:106.000232,wind_speed:17.4,wind_direction:201.2,heading:31.3,distance:88812.68,depth:-3.3,cog:257.4,sog:0,created_at:"2023-01-12 08:04:20",updated_at:"2023-01-12 08:04:20"},{time:1673496001e3,id:"cac79e4a-e15d-4f75-9273-d5e24645053e",ship_id:1,terminal_time:"2023-01-12 04:00:01",lat:-5.919602,lng:106.000252,wind_speed:15.3,wind_direction:213.9,heading:0,distance:0,depth:-3.3,cog:307.2,sog:.1,created_at:"2023-01-12 08:04:10",updated_at:"2023-01-12 08:04:10"},{time:1673496901e3,id:"3dfb8e71-93a9-4d4f-8965-013575f61a35",ship_id:1,terminal_time:"2023-01-12 04:15:01",lat:-5.919607,lng:106.000238,wind_speed:20.2,wind_direction:206.7,heading:31.3,distance:88812.68,depth:-3.3,cog:150.8,sog:.1,created_at:"2023-01-12 08:04:45",updated_at:"2023-01-12 08:04:45"},{time:1673497801e3,id:"0f7d7540-fe75-45e0-9a30-635c7128b620",ship_id:1,terminal_time:"2023-01-12 04:30:01",lat:-5.919607,lng:106.000257,wind_speed:15.9,wind_direction:206.9,heading:31,distance:88812.68,depth:-3.3,cog:149.1,sog:0,created_at:"2023-01-12 08:02:03",updated_at:"2023-01-12 08:02:03"},{time:1673498701e3,id:"f21a660b-dcfa-4b13-9856-215ab031fb29",ship_id:1,terminal_time:"2023-01-12 04:45:01",lat:-5.919532,lng:106.000253,wind_speed:18,wind_direction:206.9,heading:0,distance:0,depth:-3.3,cog:196,sog:0,created_at:"2023-01-12 08:03:57",updated_at:"2023-01-12 08:03:57"},{time:1673499601e3,id:"67284bea-ac4f-4fcb-be3d-67fb96501e12",ship_id:1,terminal_time:"2023-01-12 05:00:01",lat:-5.919563,lng:106.000252,wind_speed:12.8,wind_direction:206.9,heading:31.1,distance:88812.69,depth:-3.3,cog:313.2,sog:.1,created_at:"2023-01-12 08:02:05",updated_at:"2023-01-12 08:02:05"},{time:1673500501e3,id:"903255da-a46b-4560-be6f-54121a35e9d4",ship_id:1,terminal_time:"2023-01-12 05:15:01",lat:-5.919592,lng:106.00022,wind_speed:14.7,wind_direction:208.3,heading:31.2,distance:88812.69,depth:-3.3,cog:317.3,sog:0,created_at:"2023-01-12 08:01:18",updated_at:"2023-01-12 08:01:18"},{time:1673501401e3,id:"d15302d5-c880-455f-8e84-b63f78532405",ship_id:1,terminal_time:"2023-01-12 05:30:01",lat:-5.919553,lng:106.000257,wind_speed:14.1,wind_direction:206.9,heading:31.3,distance:88812.69,depth:-3.3,cog:85.3,sog:0,created_at:"2023-01-12 08:00:36",updated_at:"2023-01-12 08:00:36"},{time:1673502301e3,id:"6964957b-d44f-4ccd-9711-139c0f5321a6",ship_id:1,terminal_time:"2023-01-12 05:45:01",lat:-5.919598,lng:106.000232,wind_speed:12.4,wind_direction:213.9,heading:31,distance:88812.7,depth:-3.3,cog:71.8,sog:0,created_at:"2023-01-12 08:02:19",updated_at:"2023-01-12 08:02:19"},{time:1673503261e3,id:"9e325986-7d1b-4135-ba31-922a70ec7621",ship_id:1,terminal_time:"2023-01-12 06:01:01",lat:-5.919563,lng:106.000245,wind_speed:16.9,wind_direction:213.9,heading:31.1,distance:88812.7,depth:-3.3,cog:45.2,sog:0,created_at:"2023-01-12 08:04:33",updated_at:"2023-01-12 08:04:33"},{time:1673504101e3,id:"91e1667b-13ee-4042-b227-58b06be13ccd",ship_id:1,terminal_time:"2023-01-12 06:15:01",lat:-5.919573,lng:106.00022,wind_speed:6.6,wind_direction:213.9,heading:31.3,distance:88812.7,depth:-3.3,cog:144.5,sog:0,created_at:"2023-01-12 08:01:32",updated_at:"2023-01-12 08:01:32"},{time:1673505006e3,id:"8fbb2278-d875-4905-87a7-36e16bdc5d08",ship_id:1,terminal_time:"2023-01-12 06:30:06",lat:-5.919547,lng:106.00019,wind_speed:14.1,wind_direction:219.6,heading:31.1,distance:88812.7,depth:-3.3,cog:129.1,sog:0,created_at:"2023-01-12 08:03:24",updated_at:"2023-01-12 08:03:24"},{time:1673505901e3,id:"6dd47699-6d9e-4f4e-b03f-b3c7c179d628",ship_id:1,terminal_time:"2023-01-12 06:45:01",lat:-5.919567,lng:106.000218,wind_speed:11.2,wind_direction:206.9,heading:31.2,distance:88812.7,depth:-3.3,cog:302.6,sog:0,created_at:"2023-01-12 08:04:14",updated_at:"2023-01-12 08:04:14"},{time:1673506801e3,id:"e6b66228-a386-4585-8b24-beb353ada5df",ship_id:1,terminal_time:"2023-01-12 07:00:01",lat:-5.919573,lng:106.000242,wind_speed:13.8,wind_direction:212.5,heading:31.2,distance:88812.7,depth:-3.3,cog:130,sog:0,created_at:"2023-01-12 08:03:33",updated_at:"2023-01-12 08:03:33"},{time:1673507701e3,id:"87faa350-6df1-4360-a4a2-280d812558f8",ship_id:1,terminal_time:"2023-01-12 07:15:01",lat:-5.919583,lng:106.000195,wind_speed:11.2,wind_direction:201.2,heading:31.1,distance:88812.7,depth:-3.3,cog:122.9,sog:0,created_at:"2023-01-12 08:04:40",updated_at:"2023-01-12 08:04:40"},{time:1673508601e3,id:"9e3f7764-a732-42a0-94c3-1c0493a43105",ship_id:1,terminal_time:"2023-01-12 07:30:01",lat:-5.919588,lng:106.000215,wind_speed:11,wind_direction:223.8,heading:31.1,distance:88812.7,depth:-3.3,cog:125.7,sog:0,created_at:"2023-01-12 08:04:34",updated_at:"2023-01-12 08:04:34"},{time:1673509501e3,id:"c0d5821b-d4a0-469d-a793-634ffbcb381f",ship_id:1,terminal_time:"2023-01-12 07:45:01",lat:-5.919593,lng:106.000222,wind_speed:16.1,wind_direction:213.9,heading:31.1,distance:88812.7,depth:-3.3,cog:122.9,sog:0,created_at:"2023-01-12 08:03:50",updated_at:"2023-01-12 08:03:50"},{time:1673510406e3,id:"5bcbfbf1-6af1-45d4-9e4f-3f756ee3de58",ship_id:1,terminal_time:"2023-01-12 08:00:06",lat:-5.9196,lng:106.000238,wind_speed:10.8,wind_direction:215.4,heading:31,distance:88812.7,depth:-3.3,cog:117.8,sog:.1,created_at:"2023-01-12 08:04:56",updated_at:"2023-01-12 08:04:56"},{time:1673511301e3,id:"7d090cd0-aba9-42b6-bbe9-1f253ee7093b",ship_id:1,terminal_time:"2023-01-12 08:15:01",lat:-5.919602,lng:106.000217,wind_speed:12.2,wind_direction:223.8,heading:31.1,distance:88812.7,depth:-3.6,cog:92.7,sog:.1,created_at:"2023-01-12 08:15:05",updated_at:"2023-01-12 08:15:05"},{time:1673512201e3,id:"fc753b87-6977-4e80-b90b-05dc877e04c3",ship_id:1,terminal_time:"2023-01-12 08:30:01",lat:-5.919598,lng:106.000233,wind_speed:15.5,wind_direction:215.4,heading:31.1,distance:88812.71,depth:-3.6,cog:134.1,sog:0,created_at:"2023-01-12 08:30:04",updated_at:"2023-01-12 08:30:04"},{time:1673513101e3,id:"15468c4d-66ad-44c5-8692-70c97eca048f",ship_id:1,terminal_time:"2023-01-12 08:45:01",lat:-5.919635,lng:106.00023,wind_speed:13.8,wind_direction:235.1,heading:31.1,distance:88812.71,depth:-3.6,cog:105.9,sog:.1,created_at:"2023-01-12 08:45:04",updated_at:"2023-01-12 08:45:04"},{time:1673514001e3,id:"ebc3bf69-1d1f-495a-b4a4-9c32c0ed598d",ship_id:1,terminal_time:"2023-01-12 09:00:01",lat:-5.919602,lng:106.000208,wind_speed:15.5,wind_direction:212,heading:31.2,distance:88812.71,depth:-3.6,cog:112.4,sog:0,created_at:"2023-01-12 09:00:04",updated_at:"2023-01-12 09:00:04"},{time:1673514901e3,id:"545fefd0-b1bb-4e36-a7d3-c0c35e2dc06a",ship_id:1,terminal_time:"2023-01-12 09:15:01",lat:-5.919617,lng:106.000203,wind_speed:11.6,wind_direction:223.8,heading:31.33,distance:88812.71,depth:-3.6,cog:121.1,sog:0,created_at:"2023-01-12 09:15:04",updated_at:"2023-01-12 09:15:04"},{time:1673515801e3,id:"f45537e7-c24d-43d4-a111-c331f0185270",ship_id:1,terminal_time:"2023-01-12 09:30:01",lat:-5.919602,lng:106.000202,wind_speed:11.4,wind_direction:246.3,heading:31.3,distance:88812.71,depth:-3.6,cog:120.6,sog:0,created_at:"2023-01-12 09:30:05",updated_at:"2023-01-12 09:30:05"},{time:1673516706e3,id:"d927f6f3-c47e-4066-948b-8c47ce169ddd",ship_id:1,terminal_time:"2023-01-12 09:45:06",lat:-5.919607,lng:106.0002,wind_speed:11.8,wind_direction:246.3,heading:31.3,distance:88812.71,depth:-3.6,cog:281.2,sog:0,created_at:"2023-01-12 09:45:11",updated_at:"2023-01-12 09:45:11"},{time:1673517601e3,id:"6f2b17a6-fc9e-4272-b263-9372835e5cb7",ship_id:1,terminal_time:"2023-01-12 10:00:01",lat:-5.919583,lng:106.000217,wind_speed:13.2,wind_direction:235.1,heading:31.1,distance:88812.71,depth:-3.6,cog:122.7,sog:0,created_at:"2023-01-12 10:00:05",updated_at:"2023-01-12 10:00:05"},{time:1673518501e3,id:"8037d2bb-f96b-4bdc-8e1a-6cc0234defce",ship_id:1,terminal_time:"2023-01-12 10:15:01",lat:-5.919593,lng:106.000227,wind_speed:10.8,wind_direction:225.2,heading:31.2,distance:88812.71,depth:-3.6,cog:107.9,sog:0,created_at:"2023-01-12 10:15:05",updated_at:"2023-01-12 10:15:05"},{time:1673519401e3,id:"59efc70a-dfcf-475b-a578-d472d4b63f41",ship_id:1,terminal_time:"2023-01-12 10:30:01",lat:-5.91962,lng:106.000227,wind_speed:12.8,wind_direction:235.1,heading:0,distance:0,depth:-3.6,cog:127.3,sog:0,created_at:"2023-01-12 10:30:05",updated_at:"2023-01-12 10:30:05"},{time:1673520301e3,id:"14107e27-17a4-4f72-8bf5-b4ba6866475b",ship_id:1,terminal_time:"2023-01-12 10:45:01",lat:-5.919598,lng:106.000215,wind_speed:6.9,wind_direction:241.7,heading:31.2,distance:88812.72,depth:-3.6,cog:142.3,sog:0,created_at:"2023-01-12 10:45:05",updated_at:"2023-01-12 10:45:05"},{time:1673521201e3,id:"55f2910a-c9a9-400f-99ec-17d9ea4260ab",ship_id:1,terminal_time:"2023-01-12 11:00:01",lat:-5.919615,lng:106.000205,wind_speed:14.3,wind_direction:235.1,heading:31.2,distance:88812.72,depth:-3.6,cog:309,sog:0,created_at:"2023-01-12 11:00:05",updated_at:"2023-01-12 11:00:05"},{time:1673522101e3,id:"554cb944-60be-4c64-baf9-0244229277f5",ship_id:1,terminal_time:"2023-01-12 11:15:01",lat:-5.919627,lng:106.000208,wind_speed:12.4,wind_direction:237.5,heading:31,distance:88812.72,depth:-3.6,cog:63,sog:.1,created_at:"2023-01-12 11:15:05",updated_at:"2023-01-12 11:15:05"},{time:1673523001e3,id:"d0a7e914-9d36-4e3a-b078-429af76e139a",ship_id:1,terminal_time:"2023-01-12 11:30:01",lat:-5.919625,lng:106.000183,wind_speed:12.4,wind_direction:247.7,heading:31.3,distance:88812.74,depth:-3.6,cog:64.3,sog:.1,created_at:"2023-01-12 11:30:05",updated_at:"2023-01-12 11:30:05"},{time:1673523901e3,id:"3578112f-5993-44fc-9bcb-484ae892cb83",ship_id:1,terminal_time:"2023-01-12 11:45:01",lat:-5.91961,lng:106.00022,wind_speed:13.8,wind_direction:247.7,heading:31.2,distance:88812.75,depth:-3.6,cog:47.8,sog:.1,created_at:"2023-01-12 11:45:05",updated_at:"2023-01-12 11:45:05"},{time:1673524801e3,id:"63045459-e38d-4517-88ec-0e16f915455c",ship_id:1,terminal_time:"2023-01-12 12:00:01",lat:-5.919587,lng:106.000218,wind_speed:9.1,wind_direction:247.7,heading:31.1,distance:88812.76,depth:-3.6,cog:102.5,sog:.1,created_at:"2023-01-12 12:00:05",updated_at:"2023-01-12 12:00:05"},{time:1673525701e3,id:"8f235d26-eba0-4cf1-b387-1bbe467f5880",ship_id:1,terminal_time:"2023-01-12 12:15:01",lat:-5.919615,lng:106.000227,wind_speed:11.6,wind_direction:242.1,heading:31.1,distance:88812.77,depth:-3.6,cog:311.4,sog:0,created_at:"2023-01-12 12:15:02",updated_at:"2023-01-12 12:15:02"},{time:1673526601e3,id:"3a964569-c108-42ad-a009-fcbb362b6a7f",ship_id:1,terminal_time:"2023-01-12 12:30:01",lat:-5.91958,lng:106.000207,wind_speed:5.8,wind_direction:229.4,heading:31.2,distance:88812.77,depth:-3.3,cog:110.9,sog:.1,created_at:"2023-01-12 12:30:04",updated_at:"2023-01-12 12:30:04"},{time:1673527501e3,id:"6751b37a-cee9-487f-bb0f-011ea80d9cb4",ship_id:1,terminal_time:"2023-01-12 12:45:01",lat:-5.919628,lng:106.000247,wind_speed:7.9,wind_direction:206.9,heading:31.3,distance:88812.78,depth:-3.3,cog:293.2,sog:0,created_at:"2023-01-12 12:45:04",updated_at:"2023-01-12 12:45:04"},{time:1673528401e3,id:"9a2e95f6-e2a6-4136-a8a0-f05c56caf90e",ship_id:1,terminal_time:"2023-01-12 13:00:01",lat:-5.919595,lng:106.000223,wind_speed:9.7,wind_direction:223.8,heading:0,distance:0,depth:-3.3,cog:139,sog:.2,created_at:"2023-01-12 13:00:04",updated_at:"2023-01-12 13:00:04"},{time:1673529301e3,id:"7ecb61ef-4188-47ff-8bf4-6efd86f72928",ship_id:1,terminal_time:"2023-01-12 13:15:01",lat:-5.91958,lng:106.000175,wind_speed:7.3,wind_direction:237.9,heading:0,distance:0,depth:-3.3,cog:131.9,sog:0,created_at:"2023-01-12 13:15:04",updated_at:"2023-01-12 13:15:04"},{time:1673530201e3,id:"43466e7e-0a51-42ee-81ce-5bcb8067a0a0",ship_id:1,terminal_time:"2023-01-12 13:30:01",lat:-5.919583,lng:106.00021,wind_speed:8.7,wind_direction:219.6,heading:31.2,distance:88812.78,depth:-3.3,cog:114,sog:.1,created_at:"2023-01-12 13:30:04",updated_at:"2023-01-12 13:30:04"},{time:1673531101e3,id:"297a2025-c5ef-40bd-b16e-59dba6360dae",ship_id:1,terminal_time:"2023-01-12 13:45:01",lat:-5.919592,lng:106.000177,wind_speed:5.2,wind_direction:233.7,heading:31.1,distance:88812.78,depth:-3.3,cog:101.6,sog:0,created_at:"2023-01-12 13:45:04",updated_at:"2023-01-12 13:45:04"},{time:1673532001e3,id:"4d3b3fed-521a-4c4b-be34-bc1c12554aca",ship_id:1,terminal_time:"2023-01-12 14:00:01",lat:-5.919585,lng:106.000207,wind_speed:5.6,wind_direction:236.5,heading:31.3,distance:88812.79,depth:-3.3,cog:337.4,sog:0,created_at:"2023-01-12 14:00:04",updated_at:"2023-01-12 14:00:04"},{time:1673532901e3,id:"4d4f1774-36c0-419e-ba3a-b02fddf2626f",ship_id:1,terminal_time:"2023-01-12 14:15:01",lat:-5.919595,lng:106.000158,wind_speed:4.6,wind_direction:260.4,heading:31.2,distance:88812.79,depth:-3.3,cog:324.5,sog:0,created_at:"2023-01-12 14:15:04",updated_at:"2023-01-12 14:15:04"},{time:1673533801e3,id:"1698b5e0-d4ac-49ad-b810-49e9601d3853",ship_id:1,terminal_time:"2023-01-12 14:30:01",lat:-5.919583,lng:106.000225,wind_speed:4.6,wind_direction:256.1,heading:31.2,distance:88812.8,depth:-3.3,cog:322.1,sog:.1,created_at:"2023-01-12 14:30:04",updated_at:"2023-01-12 14:30:04"},{time:1673534701e3,id:"ad9fb6e4-5f14-4125-9e71-167e7c866606",ship_id:1,terminal_time:"2023-01-12 14:45:01",lat:-5.919595,lng:106.000203,wind_speed:6.8,wind_direction:233.7,heading:31.2,distance:88812.8,depth:-3,cog:95.3,sog:.1,created_at:"2023-01-12 14:45:04",updated_at:"2023-01-12 14:45:04"},{time:1673535601e3,id:"1fe7fc3b-36f4-404f-be9f-7b043d160fd3",ship_id:1,terminal_time:"2023-01-12 15:00:01",lat:-5.919605,lng:106.000208,wind_speed:8.3,wind_direction:252,heading:31.3,distance:88812.81,depth:-3,cog:332,sog:.1,created_at:"2023-01-12 15:00:05",updated_at:"2023-01-12 15:00:05"},{time:1673536501e3,id:"e70637eb-6415-42ce-9e73-20ef8a56d9b5",ship_id:1,terminal_time:"2023-01-12 15:15:01",lat:-5.919622,lng:106.000213,wind_speed:8.5,wind_direction:252,heading:31.5,distance:88812.81,depth:-3,cog:307.5,sog:0,created_at:"2023-01-12 15:15:05",updated_at:"2023-01-12 15:15:05"},{time:1673537401e3,id:"89cddc9c-a742-45c5-a8cb-95af58326154",ship_id:1,terminal_time:"2023-01-12 15:30:01",lat:-5.919613,lng:106.000245,wind_speed:6.4,wind_direction:247.7,heading:31.5,distance:88812.82,depth:-3,cog:180.8,sog:.1,created_at:"2023-01-12 15:30:05",updated_at:"2023-01-12 15:30:05"},{time:1673538301e3,id:"7eeb6682-f01b-4920-be65-5e0b691cda91",ship_id:1,terminal_time:"2023-01-12 15:45:01",lat:-5.918417,lng:105.999612,wind_speed:10.4,wind_direction:337.8,heading:291.7,distance:88812.88,depth:-3.3,cog:310.4,sog:2.1,created_at:"2023-01-12 15:45:05",updated_at:"2023-01-12 15:45:05"},{time:1673539201e3,id:"bca7ec47-e760-471e-bcd9-5a8aa2355046",ship_id:1,terminal_time:"2023-01-12 16:00:01",lat:-5.898973,lng:105.987732,wind_speed:18.2,wind_direction:324.5,heading:340.2,distance:88814.27,depth:-39,cog:332.8,sog:9.2,created_at:"2023-01-12 16:00:05",updated_at:"2023-01-12 16:00:05"},{time:1673540101e3,id:"6d1f8f41-c708-4913-9f3b-796181bd67ba",ship_id:1,terminal_time:"2023-01-12 16:15:01",lat:-5.868212,lng:106.003383,wind_speed:3.6,wind_direction:226.2,heading:60.3,distance:88816.54,depth:-55.6,cog:61.7,sog:11.4,created_at:"2023-01-12 16:15:02",updated_at:"2023-01-12 16:15:02"},{time:1673541001e3,id:"ffddd40d-2fb5-470b-935f-1f998984761a",ship_id:1,terminal_time:"2023-01-12 16:30:01",lat:-5.8487729999999996,lng:106.049228,wind_speed:5.8,wind_direction:157.5,heading:70.4,distance:88819.53,depth:-47,cog:70,sog:12.2,created_at:"2023-01-12 16:30:05",updated_at:"2023-01-12 16:30:05"},{time:1673541901e3,id:"225b2709-e620-4f1f-89f5-d761ea9a27f8",ship_id:1,terminal_time:"2023-01-12 16:45:01",lat:-5.834948,lng:106.097917,wind_speed:6.4,wind_direction:157.5,heading:80.2,distance:88822.55,depth:-31.6,cog:81.1,sog:12.2,created_at:"2023-01-12 16:45:05",updated_at:"2023-01-12 16:45:05"},{time:1673542801e3,id:"98589ed9-2a54-44e0-94d2-9b377e3c67c6",ship_id:1,terminal_time:"2023-01-12 17:00:01",lat:-5.832885,lng:106.14986,wind_speed:4,wind_direction:144.5,heading:99,distance:88825.66,depth:-28.6,cog:102.2,sog:12.8,created_at:"2023-01-12 17:00:05",updated_at:"2023-01-12 17:00:05"},{time:1673543701e3,id:"7fa7bf3b-acdb-4707-8e81-6860424af4b9",ship_id:1,terminal_time:"2023-01-12 17:15:01",lat:-5.838525,lng:106.20245,wind_speed:2.9,wind_direction:161.9,heading:89.2,distance:88828.85,depth:-22.6,cog:91.4,sog:12.7,created_at:"2023-01-12 17:15:05",updated_at:"2023-01-12 17:15:05"},{time:1673544601e3,id:"79865b86-826b-4cb0-bd95-1a88728a32ee",ship_id:1,terminal_time:"2023-01-12 17:30:01",lat:-5.839608,lng:106.25531,wind_speed:1.7,wind_direction:194.7,heading:88.8,distance:88831.98,depth:-23,cog:90.5,sog:12.7,created_at:"2023-01-12 17:30:03",updated_at:"2023-01-12 17:30:03"},{time:1673545501e3,id:"bcf27b90-6ee8-4dc4-91cd-4b5ab1188d9a",ship_id:1,terminal_time:"2023-01-12 17:45:01",lat:-5.83994,lng:106.30857,wind_speed:2.5,wind_direction:99.8,heading:89,distance:88835.27,depth:-31.6,cog:91.2,sog:13,created_at:"2023-01-12 17:45:03",updated_at:"2023-01-12 17:45:03"},{time:1673546401e3,id:"24294d87-37c8-401c-8120-3f6412ebbd31",ship_id:1,terminal_time:"2023-01-12 18:00:01",lat:-5.841293,lng:106.363258,wind_speed:3.6,wind_direction:54.9,heading:86.3,distance:88838.55,depth:-28.6,cog:88.1,sog:13.1,created_at:"2023-01-12 18:00:03",updated_at:"2023-01-12 18:00:03"},{time:1673547301e3,id:"1b983cb5-a7a5-4259-a3ed-68ba7093343e",ship_id:1,terminal_time:"2023-01-12 18:15:01",lat:-5.838722,lng:106.418933,wind_speed:7.3,wind_direction:56.3,heading:90.1,distance:88841.85,depth:-49.3,cog:90.8,sog:13.2,created_at:"2023-01-12 18:15:03",updated_at:"2023-01-12 18:15:03"},{time:1673548201e3,id:"15c3c6db-50aa-4a57-9238-2319a66b67aa",ship_id:1,terminal_time:"2023-01-12 18:30:01",lat:-5.83975,lng:106.47494,wind_speed:9.3,wind_direction:54.9,heading:89.9,distance:88845.21,depth:-45.6,cog:90.7,sog:13.5,created_at:"2023-01-13 08:01:29",updated_at:"2023-01-13 08:01:29"},{time:1673549101e3,id:"06e2801a-9747-4c80-9786-b47a946f07dd",ship_id:1,terminal_time:"2023-01-12 18:45:01",lat:-5.840233,lng:106.531412,wind_speed:9.9,wind_direction:65.2,heading:92.3,distance:88848.59,depth:-77.6,cog:94,sog:13.5,created_at:"2023-01-13 08:03:23",updated_at:"2023-01-13 08:03:23"},{time:1673550001e3,id:"69056518-ad05-4299-9844-8cdfaed1b01c",ship_id:1,terminal_time:"2023-01-12 19:00:01",lat:-5.837537,lng:106.585833,wind_speed:10.4,wind_direction:16.8,heading:77.9,distance:88851.84,depth:-70.6,cog:78.2,sog:13,created_at:"2023-01-13 08:02:35",updated_at:"2023-01-13 08:02:35"},{time:1673550901e3,id:"17bc32d5-5b7b-4c30-b1df-b7e55e45806b",ship_id:1,terminal_time:"2023-01-12 19:15:01",lat:-5.830312,lng:106.640343,wind_speed:13,wind_direction:21,heading:87.4,distance:88855.12,depth:-39,cog:86.4,sog:13.2,created_at:"2023-01-13 08:04:26",updated_at:"2023-01-13 08:04:26"},{time:1673551801e3,id:"f7476f04-656a-4e72-8e6c-57b0d831c5f5",ship_id:1,terminal_time:"2023-01-12 19:30:01",lat:-5.853542,lng:106.689242,wind_speed:13.2,wind_direction:21,heading:126.5,distance:88858.39,depth:-27,cog:128.5,sog:13.2,created_at:"2023-01-13 08:05:16",updated_at:"2023-01-13 08:05:16"},{time:1673552701e3,id:"88b9ecc4-9964-43d8-b6a4-aed13a07495c",ship_id:1,terminal_time:"2023-01-12 19:45:01",lat:-5.889747,lng:106.731723,wind_speed:18,wind_direction:12.5,heading:129.7,distance:88861.73,depth:-29,cog:131.9,sog:13.4,created_at:"2023-01-13 08:02:30",updated_at:"2023-01-13 08:02:30"},{time:1673553601e3,id:"26848018-c9ac-4503-838d-ae857206e20b",ship_id:1,terminal_time:"2023-01-12 20:00:01",lat:-5.927122,lng:106.772935,wind_speed:18.8,wind_direction:7.9,heading:130.5,distance:88865.07,depth:-21.6,cog:132.8,sog:13.3,created_at:"2023-01-13 08:01:15",updated_at:"2023-01-13 08:01:15"},{time:1673554501e3,id:"2e692d80-82f5-4549-91d5-8a2ed3fb2e12",ship_id:1,terminal_time:"2023-01-12 20:15:01",lat:-5.960285,lng:106.81634,wind_speed:17.4,wind_direction:9.7,heading:112.2,distance:88868.34,depth:-17.3,cog:114.9,sog:13.1,created_at:"2023-01-13 08:03:01",updated_at:"2023-01-13 08:03:01"},{time:1673555401e3,id:"aca95c12-4858-4cf9-94d3-a4f8e4de5aef",ship_id:1,terminal_time:"2023-01-12 20:30:01",lat:-5.983137,lng:106.859937,wind_speed:11.8,wind_direction:0,heading:130.3,distance:88871.33,depth:-15.3,cog:131.8,sog:9.7,created_at:"2023-01-13 08:02:21",updated_at:"2023-01-13 08:02:21"},{time:1673556301e3,id:"8b09c8fe-2ea4-494c-a5fb-dd2a24bf7270",ship_id:1,terminal_time:"2023-01-12 20:45:01",lat:-6.000398,lng:106.883002,wind_speed:7.9,wind_direction:1.4,heading:115.3,distance:88873.1,depth:-13.6,cog:118.2,sog:4.3,created_at:"2023-01-13 08:00:56",updated_at:"2023-01-13 08:00:56"},{time:1673557201e3,id:"284ce5ee-e703-4d6d-b114-c1df32919fd1",ship_id:1,terminal_time:"2023-01-12 21:00:01",lat:-6.00611,lng:106.893912,wind_speed:6,wind_direction:349,heading:106.4,distance:88873.88,depth:-13,cog:142.3,sog:.3,created_at:"2023-01-13 08:02:49",updated_at:"2023-01-13 08:02:49"},{time:1673558101e3,id:"45ad13f2-7559-4927-89c6-6f3c198a88b2",ship_id:1,terminal_time:"2023-01-12 21:15:01",lat:-6.007525,lng:106.893923,wind_speed:6.6,wind_direction:12.5,heading:3,distance:88873.88,depth:-13,cog:126.7,sog:.2,created_at:"2023-01-13 08:02:41",updated_at:"2023-01-13 08:02:41"},{time:1673559001e3,id:"a4a1e14d-14ab-43f6-9535-4fa2a9d49ae4",ship_id:1,terminal_time:"2023-01-12 21:30:01",lat:-6.00759,lng:106.894172,wind_speed:5.4,wind_direction:30.9,heading:25.3,distance:88873.89,depth:-13,cog:173.5,sog:.1,created_at:"2023-01-13 08:02:21",updated_at:"2023-01-13 08:02:21"},{time:1673559901e3,id:"02e22b70-2f1d-4ec5-be13-4924c441d425",ship_id:1,terminal_time:"2023-01-12 21:45:01",lat:-6.007575,lng:106.894195,wind_speed:7.3,wind_direction:32.3,heading:25.6,distance:88873.9,depth:-12.6,cog:225,sog:.1,created_at:"2023-01-13 08:03:11",updated_at:"2023-01-13 08:03:11"},{time:1673560801e3,id:"714b40ab-6959-4c7d-89d9-dbb4bb70e57c",ship_id:1,terminal_time:"2023-01-12 22:00:01",lat:-6.007612,lng:106.894137,wind_speed:5.8,wind_direction:33.6,heading:25,distance:88873.9,depth:-12.6,cog:168.2,sog:0,created_at:"2023-01-13 08:02:28",updated_at:"2023-01-13 08:02:28"},{time:1673561701e3,id:"8076bd11-03d4-4552-b96d-89e5d0255292",ship_id:1,terminal_time:"2023-01-12 22:15:01",lat:-6.007583,lng:106.894055,wind_speed:7.3,wind_direction:43.6,heading:29.2,distance:88873.9,depth:-13,cog:316.5,sog:.1,created_at:"2023-01-13 08:02:17",updated_at:"2023-01-13 08:02:17"},{time:1673562601e3,id:"d34040f5-d539-420c-bb97-d96c16081c94",ship_id:1,terminal_time:"2023-01-12 22:30:01",lat:-6.007425,lng:106.89391,wind_speed:5.6,wind_direction:43.6,heading:44.4,distance:88873.9,depth:-13,cog:126.5,sog:.1,created_at:"2023-01-13 08:03:38",updated_at:"2023-01-13 08:03:38"},{time:1673563501e3,id:"564f8c5e-2634-4ec9-9f48-e0af89ff5564",ship_id:1,terminal_time:"2023-01-12 22:45:01",lat:-6.007598,lng:106.894127,wind_speed:4.6,wind_direction:43.6,heading:27.2,distance:88873.9,depth:-13,cog:34.5,sog:0,created_at:"2023-01-13 08:04:15",updated_at:"2023-01-13 08:04:15"},{time:1673564401e3,id:"4926d7e4-dbc0-4a31-8d0a-6a052ff27bc0",ship_id:1,terminal_time:"2023-01-12 23:00:01",lat:-6.007682,lng:106.894268,wind_speed:5.6,wind_direction:43.6,heading:0,distance:0,depth:-13,cog:155.9,sog:0,created_at:"2023-01-13 08:03:58",updated_at:"2023-01-13 08:03:58"},{time:1673565301e3,id:"433693fd-81e1-4395-a29d-8eb5bb82c236",ship_id:1,terminal_time:"2023-01-12 23:15:01",lat:-6.007708,lng:106.894337,wind_speed:4.8,wind_direction:43.6,heading:14.8,distance:88873.9,depth:-13,cog:189.5,sog:0,created_at:"2023-01-13 08:03:48",updated_at:"2023-01-13 08:03:48"},{time:1673566201e3,id:"3bd7e61b-1373-4345-867a-dfe285746a32",ship_id:1,terminal_time:"2023-01-12 23:30:01",lat:-6.007645,lng:106.894262,wind_speed:3.4,wind_direction:43.6,heading:19.3,distance:88873.9,depth:-13,cog:200.6,sog:.1,created_at:"2023-01-13 08:05:28",updated_at:"2023-01-13 08:05:28"},{time:1673567101e3,id:"09b7824a-9980-4c9d-bf99-87e65e80069b",ship_id:1,terminal_time:"2023-01-12 23:45:01",lat:-6.007677,lng:106.8943,wind_speed:2.1,wind_direction:43.6,heading:16.6,distance:88873.9,depth:-13,cog:44.7,sog:0,created_at:"2023-01-13 08:04:21",updated_at:"2023-01-13 08:04:21"},{time:1673568001e3,id:"b38d3696-7f77-459c-863f-91445f63f3e9",ship_id:1,terminal_time:"2023-01-13 00:00:01",lat:-6.007713,lng:106.894375,wind_speed:3.1,wind_direction:43.6,heading:15.4,distance:88873.9,depth:-13,cog:108.7,sog:.1,created_at:"2023-01-13 08:01:36",updated_at:"2023-01-13 08:01:36"},{time:1673568903e3,id:"b55f2d04-80e5-45c3-8479-13897d8db096",ship_id:1,terminal_time:"2023-01-13 00:15:03",lat:-6.007727,lng:106.894435,wind_speed:2.7,wind_direction:43.6,heading:11.8,distance:88873.9,depth:-13,cog:68.7,sog:0,created_at:"2023-01-13 08:03:55",updated_at:"2023-01-13 08:03:55"},{time:1673570168e3,id:"bc973d32-96ff-4d4b-83fa-fdc69ab666a4",ship_id:1,terminal_time:"2023-01-13 00:36:08",lat:-6.00772,lng:106.894325,wind_speed:2.7,wind_direction:43.6,heading:17.2,distance:88873.9,depth:-13,cog:224.5,sog:0,created_at:"2023-01-13 08:01:47",updated_at:"2023-01-13 08:01:47"},{time:1673570703e3,id:"51065554-9c2a-4ead-9c62-cdd44d475009",ship_id:1,terminal_time:"2023-01-13 00:45:03",lat:-6.007642,lng:106.894265,wind_speed:3.3,wind_direction:43.6,heading:20.1,distance:88873.9,depth:-13,cog:237,sog:0,created_at:"2023-01-13 08:02:52",updated_at:"2023-01-13 08:02:52"},{time:1673571603e3,id:"f1dbff35-e7f7-4963-a643-80e87b251c8c",ship_id:1,terminal_time:"2023-01-13 01:00:03",lat:-6.0076,lng:106.894155,wind_speed:4.2,wind_direction:43.6,heading:25.4,distance:88873.91,depth:-13,cog:177.2,sog:0,created_at:"2023-01-13 08:05:07",updated_at:"2023-01-13 08:05:07"},{time:1673572503e3,id:"606bf160-10bf-4454-95c1-6abb21d4a9a8",ship_id:1,terminal_time:"2023-01-13 01:15:03",lat:-6.007512,lng:106.894067,wind_speed:4,wind_direction:43.6,heading:33,distance:88873.91,depth:-13,cog:204.5,sog:0,created_at:"2023-01-13 08:04:55",updated_at:"2023-01-13 08:04:55"},{time:1673573403e3,id:"46a99db5-3b12-4141-949d-a7f4f69451c9",ship_id:1,terminal_time:"2023-01-13 01:30:03",lat:-6.007512,lng:106.894075,wind_speed:1.7,wind_direction:43.6,heading:34.6,distance:88873.91,depth:-13,cog:110.9,sog:.1,created_at:"2023-01-13 08:04:51",updated_at:"2023-01-13 08:04:51"},{time:1673574303e3,id:"ab8768f7-f2c0-4c28-ba76-68c4d848ee1b",ship_id:1,terminal_time:"2023-01-13 01:45:03",lat:-6.0075,lng:106.894193,wind_speed:1.9,wind_direction:43.6,heading:32.2,distance:88873.91,depth:-13,cog:300.5,sog:.1,created_at:"2023-01-13 08:04:26",updated_at:"2023-01-13 08:04:26"},{time:1673575203e3,id:"6a14e9fa-b7ad-4ec4-9f66-fa4f814c54af",ship_id:1,terminal_time:"2023-01-13 02:00:03",lat:-6.007582,lng:106.894147,wind_speed:2.5,wind_direction:43.6,heading:29.3,distance:88873.92,depth:-13,cog:319.4,sog:0,created_at:"2023-01-13 08:05:13",updated_at:"2023-01-13 08:05:13"},{time:1673576103e3,id:"456740b7-62b5-4f33-b4c0-1dc7d824d0bb",ship_id:1,terminal_time:"2023-01-13 02:15:03",lat:-6.007527,lng:106.8941,wind_speed:2.7,wind_direction:43.6,heading:32.7,distance:88873.92,depth:-13.3,cog:336.3,sog:0,created_at:"2023-01-13 08:05:57",updated_at:"2023-01-13 08:05:57"},{time:1673577003e3,id:"9f03eb81-f440-4e94-a55f-ab45fcc7b6c0",ship_id:1,terminal_time:"2023-01-13 02:30:03",lat:-6.007453,lng:106.894015,wind_speed:2.5,wind_direction:43.6,heading:39.1,distance:88873.93,depth:-13.3,cog:345.7,sog:.1,created_at:"2023-01-13 08:05:39",updated_at:"2023-01-13 08:05:39"},{time:1673577903e3,id:"e4f82def-000e-40af-915a-fa2b0c177b50",ship_id:1,terminal_time:"2023-01-13 02:45:03",lat:-6.007433,lng:106.893978,wind_speed:2.3,wind_direction:43.6,heading:0,distance:0,depth:-13,cog:303.2,sog:0,created_at:"2023-01-13 08:06:18",updated_at:"2023-01-13 08:06:18"},{time:1673578803e3,id:"54b75262-94fb-4782-987c-ccbefeebec92",ship_id:1,terminal_time:"2023-01-13 03:00:03",lat:-6.00737,lng:106.893908,wind_speed:3.3,wind_direction:43.6,heading:0,distance:0,depth:-13,cog:348.7,sog:0,created_at:"2023-01-13 08:06:12",updated_at:"2023-01-13 08:06:12"},{time:1673579703e3,id:"fa539bb4-a28e-469c-9a4e-9a3d0c486050",ship_id:1,terminal_time:"2023-01-13 03:15:03",lat:-6.007335,lng:106.893948,wind_speed:2.7,wind_direction:45,heading:49.7,distance:88873.94,depth:-13.3,cog:137.5,sog:.1,created_at:"2023-01-13 08:06:05",updated_at:"2023-01-13 08:06:05"},{time:1673580603e3,id:"539a72f1-ac08-46d9-b981-d2b0ad986548",ship_id:1,terminal_time:"2023-01-13 03:30:03",lat:-6.007343,lng:106.893923,wind_speed:2.3,wind_direction:45,heading:46.6,distance:88873.94,depth:-13,cog:284,sog:.1,created_at:"2023-01-13 08:05:52",updated_at:"2023-01-13 08:05:52"},{time:1673581503e3,id:"4df156c5-a460-4977-8551-b187446e5412",ship_id:1,terminal_time:"2023-01-13 03:45:03",lat:-6.007297,lng:106.893842,wind_speed:3.4,wind_direction:45,heading:47.7,distance:88873.94,depth:-13,cog:168.1,sog:0,created_at:"2023-01-13 08:05:54",updated_at:"2023-01-13 08:05:54"},{time:1673582403e3,id:"a403298f-42d3-4529-b018-1af317d27868",ship_id:1,terminal_time:"2023-01-13 04:00:03",lat:-6.007198,lng:106.893723,wind_speed:2.5,wind_direction:45,heading:56.1,distance:88873.94,depth:-13.3,cog:178.4,sog:0,created_at:"2023-01-13 08:07:16",updated_at:"2023-01-13 08:07:16"},{time:1673583303e3,id:"dd731f40-8d09-4757-827b-9d4f1d4651e1",ship_id:1,terminal_time:"2023-01-13 04:15:03",lat:-6.007137,lng:106.893783,wind_speed:2.7,wind_direction:45,heading:58.1,distance:88873.94,depth:-13,cog:161.9,sog:0,created_at:"2023-01-13 08:07:09",updated_at:"2023-01-13 08:07:09"},{time:1673584203e3,id:"4108b2ac-c7e2-49e9-bef8-1aeb96d7d1da",ship_id:1,terminal_time:"2023-01-13 04:30:03",lat:-6.007167,lng:106.893807,wind_speed:2.5,wind_direction:45,heading:59.3,distance:88873.94,depth:-13,cog:52.2,sog:0,created_at:"2023-01-13 08:06:59",updated_at:"2023-01-13 08:06:59"},{time:1673585108e3,id:"cc3220d1-e43b-4f9e-8a0e-2f416fff3d82",ship_id:1,terminal_time:"2023-01-13 04:45:08",lat:-6.0070879999999995,lng:106.893705,wind_speed:2.3,wind_direction:45,heading:60.4,distance:88873.94,depth:-13,cog:336.7,sog:.1,created_at:"2023-01-13 08:06:48",updated_at:"2023-01-13 08:06:48"},{time:1673586003e3,id:"82f940ea-8953-425e-86b3-7899a04cc3d8",ship_id:1,terminal_time:"2023-01-13 05:00:03",lat:-6.006982,lng:106.893693,wind_speed:1.9,wind_direction:45,heading:0,distance:0,depth:-13.3,cog:265.2,sog:0,created_at:"2023-01-13 08:07:32",updated_at:"2023-01-13 08:07:32"},{time:1673586903e3,id:"ad2c1c63-d614-4095-8d40-e96424f5a6d7",ship_id:1,terminal_time:"2023-01-13 05:15:03",lat:-6.007068,lng:106.893725,wind_speed:.9,wind_direction:45,heading:61.6,distance:88873.94,depth:-13.3,cog:232.5,sog:.1,created_at:"2023-01-13 08:07:16",updated_at:"2023-01-13 08:07:16"},{time:1673587803e3,id:"e44c9ea1-fe7c-4076-8e00-c146f79d9ff1",ship_id:1,terminal_time:"2023-01-13 05:30:03",lat:-6.007113,lng:106.8937,wind_speed:.7,wind_direction:45,heading:57.9,distance:88873.94,depth:-13.3,cog:273.7,sog:0,created_at:"2023-01-13 08:07:16",updated_at:"2023-01-13 08:07:16"},{time:1673588703e3,id:"11fabb10-51d2-4b18-8c3e-8d5f30e0c604",ship_id:1,terminal_time:"2023-01-13 05:45:03",lat:-6.00707,lng:106.893708,wind_speed:0,wind_direction:45,heading:59.9,distance:88873.94,depth:-13,cog:179.4,sog:.1,created_at:"2023-01-13 08:07:45",updated_at:"2023-01-13 08:07:45"},{time:1673589603e3,id:"3d8e63b1-ef49-4faa-8668-2064fc7691b9",ship_id:1,terminal_time:"2023-01-13 06:00:03",lat:-6.007005,lng:106.893697,wind_speed:1.7,wind_direction:45,heading:61,distance:88873.94,depth:-13,cog:224.6,sog:0,created_at:"2023-01-13 08:08:35",updated_at:"2023-01-13 08:08:35"},{time:1673590503e3,id:"abedede7-fcef-4a6a-821c-96caff5b51dd",ship_id:1,terminal_time:"2023-01-13 06:15:03",lat:-6.007067,lng:106.893657,wind_speed:1.7,wind_direction:45,heading:56.4,distance:88873.94,depth:-13.3,cog:299.4,sog:0,created_at:"2023-01-13 08:08:07",updated_at:"2023-01-13 08:08:07"},{time:1673591403e3,id:"b51194a8-99a4-4d32-83a4-d5fbfaaa4d2b",ship_id:1,terminal_time:"2023-01-13 06:30:03",lat:-6.006965,lng:106.893667,wind_speed:2.1,wind_direction:45,heading:62.6,distance:88873.94,depth:-13.3,cog:139.2,sog:0,created_at:"2023-01-13 08:08:23",updated_at:"2023-01-13 08:08:23"},{time:1673592518e3,id:"b209dcbe-8749-41d2-b84b-c1258b5ab981",ship_id:1,terminal_time:"2023-01-13 06:48:38",lat:-6.006987,lng:106.893667,wind_speed:2.3,wind_direction:45,heading:66.4,distance:88873.94,depth:-13.3,cog:318.9,sog:0,created_at:"2023-01-13 08:08:09",updated_at:"2023-01-13 08:08:09"},{time:1673593203e3,id:"32347284-3eae-468f-bee0-b65b0ec6fc1e",ship_id:1,terminal_time:"2023-01-13 07:00:03",lat:-6.007023,lng:106.893678,wind_speed:2.7,wind_direction:45,heading:62.5,distance:88873.95,depth:-13.3,cog:111.2,sog:0,created_at:"2023-01-13 08:07:41",updated_at:"2023-01-13 08:07:41"},{time:1673594103e3,id:"d96b7d8b-3fd1-4062-a8fb-81b177ca4b7e",ship_id:1,terminal_time:"2023-01-13 07:15:03",lat:-6.007138,lng:106.89375,wind_speed:2.5,wind_direction:45,heading:62.4,distance:88873.95,depth:-13.3,cog:176.1,sog:0,created_at:"2023-01-13 08:08:24",updated_at:"2023-01-13 08:08:24"},{time:1673595003e3,id:"fb3aea68-d3b4-4a82-8246-b492385b9b9b",ship_id:1,terminal_time:"2023-01-13 07:30:03",lat:-6.006977,lng:106.893747,wind_speed:2.7,wind_direction:45,heading:66.3,distance:88873.95,depth:-13.3,cog:176.1,sog:0,created_at:"2023-01-13 08:08:37",updated_at:"2023-01-13 08:08:37"},{time:1673595903e3,id:"4b32822b-aad7-4b21-b989-0f1651010609",ship_id:1,terminal_time:"2023-01-13 07:45:03",lat:-6.00699,lng:106.89368,wind_speed:2.3,wind_direction:45,heading:68.2,distance:88873.95,depth:-13.3,cog:194.5,sog:0,created_at:"2023-01-13 08:08:55",updated_at:"2023-01-13 08:08:55"},{time:1673596808e3,id:"5e31ea31-de98-4291-b5ed-bc79c4642d2e",ship_id:1,terminal_time:"2023-01-13 08:00:08",lat:-6.006908,lng:106.89369,wind_speed:2.1,wind_direction:45,heading:72.3,distance:88873.95,depth:-13.3,cog:194.5,sog:0,created_at:"2023-01-13 08:08:48",updated_at:"2023-01-13 08:08:48"},{time:1673597703e3,id:"1f625245-9ea7-4f96-9bf2-627e75f1ea29",ship_id:1,terminal_time:"2023-01-13 08:15:03",lat:-6.006837,lng:106.893615,wind_speed:2.3,wind_direction:45,heading:0,distance:0,depth:-13.3,cog:3.7,sog:0,created_at:"2023-01-13 08:15:07",updated_at:"2023-01-13 08:15:07"},{time:1673598603e3,id:"f2ecdf0b-2cd9-40ce-ad89-0a8d73cad5c1",ship_id:1,terminal_time:"2023-01-13 08:30:03",lat:-6.006838,lng:106.893623,wind_speed:2.1,wind_direction:45,heading:75,distance:88873.95,depth:-13.3,cog:135.5,sog:0,created_at:"2023-01-13 08:30:07",updated_at:"2023-01-13 08:30:07"},{time:1673599503e3,id:"8327765d-9bf8-4fc4-8584-95359d3bbbb0",ship_id:1,terminal_time:"2023-01-13 08:45:03",lat:-6.006812,lng:106.893627,wind_speed:3.4,wind_direction:45,heading:75.5,distance:88873.95,depth:-13.3,cog:89.4,sog:0,created_at:"2023-01-13 08:45:04",updated_at:"2023-01-13 08:45:04"},{time:1673600403e3,id:"f5eb5331-437b-4c35-a486-84a8fa9d5644",ship_id:1,terminal_time:"2023-01-13 09:00:03",lat:-6.006815,lng:106.893662,wind_speed:3.6,wind_direction:45,heading:75.4,distance:88873.96,depth:-13.3,cog:94.9,sog:0,created_at:"2023-01-13 09:00:05",updated_at:"2023-01-13 09:00:05"},{time:1673601303e3,id:"2a247c20-bd73-4d19-8dab-7a2254a80a62",ship_id:1,terminal_time:"2023-01-13 09:15:03",lat:-6.006802,lng:106.893608,wind_speed:5.2,wind_direction:45,heading:75.8,distance:88873.96,depth:-13.3,cog:92.2,sog:0,created_at:"2023-01-13 09:15:05",updated_at:"2023-01-13 09:15:05"},{time:1673602203e3,id:"6153d12f-d552-4ab9-bba7-9e250f663945",ship_id:1,terminal_time:"2023-01-13 09:30:03",lat:-6.006802,lng:106.893643,wind_speed:4.2,wind_direction:45,heading:76.9,distance:88873.96,depth:-13.3,cog:141.9,sog:0,created_at:"2023-01-13 09:30:06",updated_at:"2023-01-13 09:30:06"},{time:1673603103e3,id:"2f1058ed-c8da-4364-aab6-dc9645e1fde8",ship_id:1,terminal_time:"2023-01-13 09:45:03",lat:-6.006837,lng:106.893597,wind_speed:3.8,wind_direction:45,heading:72.8,distance:88873.96,depth:-13.3,cog:110.7,sog:0,created_at:"2023-01-13 09:45:06",updated_at:"2023-01-13 09:45:06"},{time:1673604003e3,id:"cc41dd89-f978-4edf-9ada-4667dbff60ce",ship_id:1,terminal_time:"2023-01-13 10:00:03",lat:-6.00683,lng:106.893597,wind_speed:3.6,wind_direction:45,heading:72.1,distance:88873.96,depth:-13.3,cog:135.3,sog:0,created_at:"2023-01-13 10:00:06",updated_at:"2023-01-13 10:00:06"},{time:1673604903e3,id:"396bffaa-c79e-49d7-bdf1-f426896bb87c",ship_id:1,terminal_time:"2023-01-13 10:15:03",lat:-6.00688,lng:106.89365,wind_speed:3.1,wind_direction:45,heading:70.9,distance:88873.96,depth:-13.3,cog:180.2,sog:.1,created_at:"2023-01-13 10:15:07",updated_at:"2023-01-13 10:15:07"},{time:1673605803e3,id:"d946fc22-50aa-4fcd-bd7c-b44f44547a46",ship_id:1,terminal_time:"2023-01-13 10:30:03",lat:-6.007095,lng:106.89367,wind_speed:3.3,wind_direction:45,heading:58.8,distance:88873.96,depth:-13.3,cog:157.1,sog:0,created_at:"2023-01-13 10:30:04",updated_at:"2023-01-13 10:30:04"},{time:1673606703e3,id:"580132f9-3c14-4d3c-9b66-d0ff9ec812f0",ship_id:1,terminal_time:"2023-01-13 10:45:03",lat:-6.007132,lng:106.893745,wind_speed:5.4,wind_direction:26.7,heading:53.2,distance:88873.96,depth:-13.3,cog:144.9,sog:0,created_at:"2023-01-13 10:45:05",updated_at:"2023-01-13 10:45:05"},{time:1673607603e3,id:"2a0785ea-942c-42cd-ad88-e982f8495a39",ship_id:1,terminal_time:"2023-01-13 11:00:03",lat:-6.007203,lng:106.893752,wind_speed:4.2,wind_direction:26.7,heading:0,distance:0,depth:-13.3,cog:260.4,sog:0,created_at:"2023-01-13 11:00:05",updated_at:"2023-01-13 11:00:05"},{time:1673608503e3,id:"b1840bc7-7b81-44b4-a120-b50cb7ed9631",ship_id:1,terminal_time:"2023-01-13 11:15:03",lat:-6.007423,lng:106.893847,wind_speed:5.6,wind_direction:26.7,heading:39,distance:88873.97,depth:-13.6,cog:90.2,sog:.1,created_at:"2023-01-13 11:15:05",updated_at:"2023-01-13 11:15:05"},{time:1673609403e3,id:"257a0ae0-3c67-4484-900c-ee1149e2541d",ship_id:1,terminal_time:"2023-01-13 11:30:03",lat:-6.007583,lng:106.89401,wind_speed:5,wind_direction:26.7,heading:27.7,distance:88873.98,depth:-13.3,cog:110.5,sog:.1,created_at:"2023-01-13 11:30:06",updated_at:"2023-01-13 11:30:06"},{time:1673610303e3,id:"0e80a0e4-2c6c-441f-8364-26416a9ce1dd",ship_id:1,terminal_time:"2023-01-13 11:45:03",lat:-6.0076730000000005,lng:106.89419,wind_speed:7.3,wind_direction:26.7,heading:18.3,distance:88873.99,depth:-13.3,cog:93.9,sog:0,created_at:"2023-01-13 11:45:06",updated_at:"2023-01-13 11:45:06"},{time:1673611203e3,id:"11866d32-1040-4bdb-b7bf-190db9704e3c",ship_id:1,terminal_time:"2023-01-13 12:00:03",lat:-6.00775,lng:106.894325,wind_speed:7.1,wind_direction:26.7,heading:13.3,distance:88873.99,depth:-13.3,cog:102.4,sog:0,created_at:"2023-01-13 12:00:07",updated_at:"2023-01-13 12:00:07"}],Dz={components:{MapboxMap:vE,MapboxNavigationControl:xE},data(){return{map:null,current:[],items:[],potition:!1}},methods:{async loaded(){let e=this,r={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}},a={type:"FeatureCollection",features:[]};kz.forEach((x,E)=>{this.current&&this.calcCrow(this.current[1],this.current[0],x.lat,x.lng)>20||(r.geometry.coordinates.push([x.lng,x.lat]),a.features.push({type:"Feature",properties:{cog:x.cog,sog:x.sog,time:x.terminal_time,lat:x.lat,lng:x.lng,heading:x.heading},geometry:{type:"Point",coordinates:[x.lng,x.lat]}}),this.current=[x.lng,x.lat],this.items.push(x))}),this.map.addSource("route",{type:"geojson",data:r}),this.map.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3B4EF5","line-width":1.5,"line-dasharray":[3,3]}}),e.map.addSource("points",{type:"geojson",data:a}),e.map.addLayer({id:"points",type:"circle",source:"points",paint:{"circle-radius":4,"circle-color":"#3B4EF5"}});const d=new Cd.Popup({closeButton:!1,closeOnClick:!1});this.map.on("click","points",x=>{let E=x.features[0].properties;this.positionShip(E)}),this.map.on("mouseenter","points",x=>{e.map.getCanvas().style.cursor="pointer";const E=x.features[0].geometry.coordinates.slice(),o=`<b>Lat : ${x.features[0].properties.lat} | Lng: ${x.features[0].properties.lng}</b> at ${x.features[0].properties.sog} <b>kn</b> / ${x.features[0].properties.cog}&deg;<br>time: <b>${x.features[0].properties.time}</b>`;for(;Math.abs(x.lngLat.lng-E[0])>180;)E[0]+=x.lngLat.lng>E[0]?360:-360;d.setLngLat(E).setHTML(o).addTo(e.map)}),this.map.on("mouseleave","points",()=>{e.map.getCanvas().style.cursor="",d.remove()}),this.map.loadImage(bE,(x,E)=>{if(x)throw x;e.map.addImage("ship-icon",E)});let _=this.items[this.items.length-1];this.positionShip({heading:_.heading,lng:_.lng,lat:_.lat})},toPotition(e){this.positionShip(e)},positionShip(e){this.potition&&(this.map.removeLayer("ship-point"),this.map.removeSource("ship-point")),this.map.addSource("ship-point",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:{scale:1,heading:e.heading}}]}}),this.map.addLayer({id:"ship-point",type:"symbol",source:"ship-point",layout:{"icon-image":"ship-icon","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-size":.3,"icon-rotate":{property:"heading",stops:[[-360,-360],[0,0],[360,360]]},"icon-rotation-alignment":"map"}}),this.potition=!0},pointerLocation(e){let r=e.lngLat.wrap();this.$refs.pointerInfo.innerHTML=`<span> ${r.lat.toFixed(5)}</span><span> ${r.lng.toFixed(5)}</span>`},calcCrow(o,r,D,d){var _=6371,x=this.toRad(D-o),E=this.toRad(d-r),o=this.toRad(o),D=this.toRad(D),V=Math.sin(x/2)*Math.sin(x/2)+Math.sin(E/2)*Math.sin(E/2)*Math.cos(o)*Math.cos(D),X=2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V)),Z=_*X;return Z},toRad(e){return e*Math.PI/180}}},Pz=e=>(lb("data-v-5271e908"),e=e(),cb(),e),Lz={class:"row g-0"},Rz={class:"col-9"},Oz={class:"position-relative"},zz={class:"pointer-info",ref:"pointerInfo"},Bz={class:"col-3"},Fz=j0('<header class="navbar navbar-expand-md navbar-dark bg-primary d-print-none" data-v-5271e908><div class="container-xl" data-v-5271e908><ul class="navbar-nav" data-v-5271e908><li class="nav-item" data-v-5271e908><a href="#" class="nav-link" data-v-5271e908><span class="nav-link-icon d-md-none d-lg-inline-block" data-v-5271e908><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-v-5271e908><path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-5271e908></path><path d="M4 6l16 0" data-v-5271e908></path><path d="M4 12l16 0" data-v-5271e908></path><path d="M4 18l16 0" data-v-5271e908></path></svg></span></a></li><li class="nav-item" data-v-5271e908><a href="#" class="nav-link" data-v-5271e908><span class="nav-link-icon d-md-none d-lg-inline-block" data-v-5271e908><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sailboat" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-v-5271e908><path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-5271e908></path><path d="M2 20a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1" data-v-5271e908></path><path d="M4 18l-1 -3h18l-1 3" data-v-5271e908></path><path d="M11 12h7l-7 -9v9" data-v-5271e908></path><path d="M8 7l-2 5" data-v-5271e908></path></svg></span> Voyage </a></li></ul></div></header>',1),Nz={class:"information"},Uz={class:"histories"},jz={class:"table card-table table-vcenter text-nowrap datatable table-fixed"},Vz=Pz(()=>un("thead",null,[un("tr",null,[un("th",null,"Time"),un("th",null,"Lon"),un("th",null,"Lat"),un("th",null,"Speed")])],-1)),$z=["onClick"];function Gz(e,r,a,d,_,x){const E=Ff("MapboxNavigationControl"),o=Ff("MapboxMap");return so(),ea("div",Lz,[un("div",Rz,[un("div",Oz,[un("div",zz,null,512),Tr(o,{onMbCreated:r[0]||(r[0]=D=>_.map=D),onMbLoad:x.loaded,onMbMousemove:x.pointerLocation,style:{height:"calc(100vh - 128px)",width:"100%"},"access-token":"pk.eyJ1Ijoia3JvbmljayIsImEiOiJjaWxyZGZwcHQwOHRidWxrbnd0OTB0cDBzIn0.u2R3NY5PnevWH3cHRk6TWQ","map-style":"mapbox://styles/mapbox/navigation-day-v1",center:[105.987732,-5.898973],zoom:7},{default:r_(()=>[Tr(E,{position:"bottom-right"})]),_:1},8,["onMbLoad","onMbMousemove","center"])])]),un("div",Bz,[Fz,un("div",Nz,[un("div",Uz,[un("table",jz,[Vz,un("tbody",null,[(so(!0),ea(Hs,null,o2(_.items,D=>(so(),ea("tr",{key:D.id,onClick:V=>x.toPotition(D),class:"pointer"},[un("td",null,T1(e.$filters.dateformat(D.terminal_time)),1),un("td",null,T1(e.$filters.str_limit(D.lng,7))+"°",1),un("td",null,T1(e.$filters.str_limit(D.lat,6))+"°",1),un("td",null,T1(D.sog),1)],8,$z))),128))])])])])])])}const qz=k2(Dz,[["render",Gz],["__scopeId","data-v-5271e908"]]),P2=o6({});P2.component("map-dashboard",Iz);P2.component("map-history",qz);P2.config.globalProperties.$filters={dateformat(e,r="DD/MM/YYYY hh:mm"){return Si(e,"YYYY-MM-DD hh:mm:ss").format(r)},str_limit(e,r=7){return e.toString().substring(0,r)}};P2.mount("#app")});export default Wz();
