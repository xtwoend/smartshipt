var NA=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import"./toast-fd51308c.js";import"./popper-b924b727.js";var SH=NA((kH,Qy)=>{var Oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function FA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function O5(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function l(){if(this instanceof l){var c=[null];c.push.apply(c,arguments);var d=Function.bind.apply(t,c);return new d}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var c=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(r,l,c.get?c:{enumerable:!0,get:function(){return e[l]}})}),r}var ev={},jA={get exports(){return ev},set exports(e){ev=e}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,l="4.17.21",c=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",n="Invalid `variable` option passed into `_.template`",T="__lodash_hash_undefined__",V=500,Q="__lodash_placeholder__",z=1,W=2,K=4,I=1,O=2,$=1,M=2,S=4,k=8,G=16,U=32,C=64,ie=128,J=256,N=512,F=30,H="...",E=800,L=16,f=1,y=2,b=3,D=1/0,X=9007199254740991,te=17976931348623157e292,q=0/0,ce=4294967295,fe=ce-1,we=ce>>>1,Z=[["ary",ie],["bind",$],["bindKey",M],["curry",k],["curryRight",G],["flip",N],["partial",U],["partialRight",C],["rearg",J]],se="[object Arguments]",ue="[object Array]",ye="[object AsyncFunction]",Pe="[object Boolean]",ae="[object Date]",xe="[object DOMException]",ve="[object Error]",le="[object Function]",me="[object GeneratorFunction]",be="[object Map]",Le="[object Number]",De="[object Null]",Ne="[object Object]",st="[object Promise]",it="[object Proxy]",ht="[object RegExp]",ke="[object Set]",Be="[object String]",Ue="[object Symbol]",We="[object Undefined]",nt="[object WeakMap]",wt="[object WeakSet]",Ut="[object ArrayBuffer]",Vt="[object DataView]",yi="[object Float32Array]",ri="[object Float64Array]",Mi="[object Int8Array]",$i="[object Int16Array]",zi="[object Int32Array]",qi="[object Uint8Array]",Oi="[object Uint8ClampedArray]",_n="[object Uint16Array]",wn="[object Uint32Array]",Yn=/\b__p \+= '';/g,Ts=/\b(__p \+=) '' \+/g,ur=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dr=/&(?:amp|lt|gt|quot|#39);/g,Ir=/[&<>"']/g,za=RegExp(Dr.source),uc=RegExp(Ir.source),Ml=/<%-([\s\S]+?)%>/g,Ja=/<%([\s\S]+?)%>/g,io=/<%=([\s\S]+?)%>/g,Qa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hc=/^\w*$/,at=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/[\\^$.*+?()[\]{}|]/g,Ve=RegExp(Oe.source),ot=/^\s+/,ut=/\s/,Et=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ot=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jt=/[()=,{}\[\]\/\s]/,li=/\\(\\)?/g,Ri=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_i=/\w*$/,on=/^[-+]0x[0-9a-f]+$/i,rn=/^0b[01]+$/i,Xi=/^\[object .+?Constructor\]$/,hn=/^0o[0-7]+$/i,Nn=/^(?:0|[1-9]\d*)$/,er=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qi=/($^)/,Tr=/['\n\r\u2028\u2029\\]/g,lr="\\ud800-\\udfff",ga="\\u0300-\\u036f",el="\\ufe20-\\ufe2f",wo="\\u20d0-\\u20ff",ni=ga+el+wo,jo="\\u2700-\\u27bf",as="a-z\\xdf-\\xf6\\xf8-\\xff",ls="\\xac\\xb1\\xd7\\xf7",pc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ks="\\u2000-\\u206f",xh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",od="A-Z\\xc0-\\xd6\\xd8-\\xde",Ls="\\ufe0e\\ufe0f",Li=ls+pc+Ks+xh,zn="['’]",Fn="["+lr+"]",Uo="["+Li+"]",_a="["+ni+"]",yn="\\d+",fc="["+jo+"]",ta="["+as+"]",Na="[^"+lr+Li+yn+jo+as+od+"]",Ss="\\ud83c[\\udffb-\\udfff]",xr="(?:"+_a+"|"+Ss+")",Vs="[^"+lr+"]",Fa="(?:\\ud83c[\\udde6-\\uddff]){2}",Al="[\\ud800-\\udbff][\\udc00-\\udfff]",ia="["+od+"]",kl="\\u200d",tl="(?:"+ta+"|"+Na+")",ja="(?:"+ia+"|"+Na+")",il="(?:"+zn+"(?:d|ll|m|re|s|t|ve))?",Wc="(?:"+zn+"(?:D|LL|M|RE|S|T|VE))?",Yc=xr+"?",no="["+Ls+"]?",is="(?:"+kl+"(?:"+[Vs,Fa,Al].join("|")+")"+no+Yc+")*",Pl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ad="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Os=no+Yc+is,Go="(?:"+[fc,Fa,Al].join("|")+")"+Os,su="(?:"+[Vs+_a+"?",_a,Fa,Al,Fn].join("|")+")",bh=RegExp(zn,"g"),ys=RegExp(_a,"g"),Dl=RegExp(Ss+"(?="+Ss+")|"+su+Os,"g"),wh=RegExp([ia+"?"+ta+"+"+il+"(?="+[Uo,ia,"$"].join("|")+")",ja+"+"+Wc+"(?="+[Uo,ia+tl,"$"].join("|")+")",ia+"?"+tl+"+"+il,ia+"+"+Wc,ad,Pl,yn,Go].join("|"),"g"),Il=RegExp("["+kl+lr+ni+Ls+"]"),Es=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Th=-1,nr={};nr[yi]=nr[ri]=nr[Mi]=nr[$i]=nr[zi]=nr[qi]=nr[Oi]=nr[_n]=nr[wn]=!0,nr[se]=nr[ue]=nr[Ut]=nr[Pe]=nr[Vt]=nr[ae]=nr[ve]=nr[le]=nr[be]=nr[Le]=nr[Ne]=nr[ht]=nr[ke]=nr[Be]=nr[nt]=!1;var pr={};pr[se]=pr[ue]=pr[Ut]=pr[Vt]=pr[Pe]=pr[ae]=pr[yi]=pr[ri]=pr[Mi]=pr[$i]=pr[zi]=pr[be]=pr[Le]=pr[Ne]=pr[ht]=pr[ke]=pr[Be]=pr[Ue]=pr[qi]=pr[Oi]=pr[_n]=pr[wn]=!0,pr[ve]=pr[le]=pr[nt]=!1;var Sh={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},_p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ld={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},na={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xc=parseFloat,Eh=parseInt,Ll=typeof Oo=="object"&&Oo&&Oo.Object===Object&&Oo,rl=typeof self=="object"&&self&&self.Object===Object&&self,vs=Ll||rl||Function("return this")(),j=t&&!t.nodeType&&t,oe=j&&!0&&e&&!e.nodeType&&e,ge=oe&&oe.exports===j,Se=ge&&Ll.process,ze=function(){try{var It=oe&&oe.require&&oe.require("util").types;return It||Se&&Se.binding&&Se.binding("util")}catch{}}(),je=ze&&ze.isArrayBuffer,He=ze&&ze.isDate,Ct=ze&&ze.isMap,vt=ze&&ze.isRegExp,Gt=ze&&ze.isSet,ii=ze&&ze.isTypedArray;function fi(It,ci,ti){switch(ti.length){case 0:return It.call(ci);case 1:return It.call(ci,ti[0]);case 2:return It.call(ci,ti[0],ti[1]);case 3:return It.call(ci,ti[0],ti[1],ti[2])}return It.apply(ci,ti)}function Kt(It,ci,ti,Zi){for(var Dn=-1,cr=It==null?0:It.length;++Dn<cr;){var ps=It[Dn];ci(Zi,ps,ti(ps),It)}return Zi}function ei(It,ci){for(var ti=-1,Zi=It==null?0:It.length;++ti<Zi&&ci(It[ti],ti,It)!==!1;);return It}function Pi(It,ci){for(var ti=It==null?0:It.length;ti--&&ci(It[ti],ti,It)!==!1;);return It}function Ln(It,ci){for(var ti=-1,Zi=It==null?0:It.length;++ti<Zi;)if(!ci(It[ti],ti,It))return!1;return!0}function en(It,ci){for(var ti=-1,Zi=It==null?0:It.length,Dn=0,cr=[];++ti<Zi;){var ps=It[ti];ci(ps,ti,It)&&(cr[Dn++]=ps)}return cr}function Qr(It,ci){var ti=It==null?0:It.length;return!!ti&&Pn(It,ci,0)>-1}function zr(It,ci,ti){for(var Zi=-1,Dn=It==null?0:It.length;++Zi<Dn;)if(ti(ci,It[Zi]))return!0;return!1}function Vn(It,ci){for(var ti=-1,Zi=It==null?0:It.length,Dn=Array(Zi);++ti<Zi;)Dn[ti]=ci(It[ti],ti,It);return Dn}function $n(It,ci){for(var ti=-1,Zi=ci.length,Dn=It.length;++ti<Zi;)It[Dn+ti]=ci[ti];return It}function Tn(It,ci,ti,Zi){var Dn=-1,cr=It==null?0:It.length;for(Zi&&cr&&(ti=It[++Dn]);++Dn<cr;)ti=ci(ti,It[Dn],Dn,It);return ti}function Js(It,ci,ti,Zi){var Dn=It==null?0:It.length;for(Zi&&Dn&&(ti=It[--Dn]);Dn--;)ti=ci(ti,It[Dn],Dn,It);return ti}function Xn(It,ci){for(var ti=-1,Zi=It==null?0:It.length;++ti<Zi;)if(ci(It[ti],ti,It))return!0;return!1}var Cr=Vo("length");function ya(It){return It.split("")}function Ol(It){return It.match(Mt)||[]}function Rs(It,ci,ti){var Zi;return ti(It,function(Dn,cr,ps){if(ci(Dn,cr,ps))return Zi=cr,!1}),Zi}function To(It,ci,ti,Zi){for(var Dn=It.length,cr=ti+(Zi?1:-1);Zi?cr--:++cr<Dn;)if(ci(It[cr],cr,It))return cr;return-1}function Pn(It,ci,ti){return ci===ci?Zc(It,ci,ti):To(It,ra,ti)}function $s(It,ci,ti,Zi){for(var Dn=ti-1,cr=It.length;++Dn<cr;)if(Zi(It[Dn],ci))return Dn;return-1}function ra(It){return It!==It}function uo(It,ci){var ti=It==null?0:It.length;return ti?fr(It,ci)/ti:q}function Vo(It){return function(ci){return ci==null?r:ci[It]}}function Rl(It){return function(ci){return It==null?r:It[ci]}}function Ua(It,ci,ti,Zi,Dn){return Dn(It,function(cr,ps,mr){ti=Zi?(Zi=!1,cr):ci(ti,cr,ps,mr)}),ti}function Ch(It,ci){var ti=It.length;for(It.sort(ci);ti--;)It[ti]=It[ti].value;return It}function fr(It,ci){for(var ti,Zi=-1,Dn=It.length;++Zi<Dn;){var cr=ci(It[Zi]);cr!==r&&(ti=ti===r?cr:ti+cr)}return ti}function $o(It,ci){for(var ti=-1,Zi=Array(It);++ti<It;)Zi[ti]=ci(ti);return Zi}function qc(It,ci){return Vn(ci,function(ti){return[ti,It[ti]]})}function mc(It){return It&&It.slice(0,Ws(It)+1).replace(ot,"")}function ro(It){return function(ci){return It(ci)}}function Bl(It,ci){return Vn(ci,function(ti){return It[ti]})}function gc(It,ci){return It.has(ci)}function cd(It,ci){for(var ti=-1,Zi=It.length;++ti<Zi&&Pn(ci,It[ti],0)>-1;);return ti}function _c(It,ci){for(var ti=It.length;ti--&&Pn(ci,It[ti],0)>-1;);return ti}function yc(It,ci){for(var ti=It.length,Zi=0;ti--;)It[ti]===ci&&++Zi;return Zi}var ou=Rl(Sh),zl=Rl(_p);function hd(It){return"\\"+na[It]}function va(It,ci){return It==null?r:It[ci]}function Ga(It){return Il.test(It)}function Nl(It){return Es.test(It)}function Mh(It){for(var ci,ti=[];!(ci=It.next()).done;)ti.push(ci.value);return ti}function vc(It){var ci=-1,ti=Array(It.size);return It.forEach(function(Zi,Dn){ti[++ci]=[Dn,Zi]}),ti}function Ho(It,ci){return function(ti){return It(ci(ti))}}function Hs(It,ci){for(var ti=-1,Zi=It.length,Dn=0,cr=[];++ti<Zi;){var ps=It[ti];(ps===ci||ps===Q)&&(It[ti]=Q,cr[Dn++]=ti)}return cr}function sl(It){var ci=-1,ti=Array(It.size);return It.forEach(function(Zi){ti[++ci]=Zi}),ti}function dd(It){var ci=-1,ti=Array(It.size);return It.forEach(function(Zi){ti[++ci]=[Zi,Zi]}),ti}function Zc(It,ci,ti){for(var Zi=ti-1,Dn=It.length;++Zi<Dn;)if(It[Zi]===ci)return Zi;return-1}function yp(It,ci,ti){for(var Zi=ti+1;Zi--;)if(It[Zi]===ci)return Zi;return Zi}function rr(It){return Ga(It)?Fl(It):Cr(It)}function po(It){return Ga(It)?au(It):ya(It)}function Ws(It){for(var ci=It.length;ci--&&ut.test(It.charAt(ci)););return ci}var So=Rl(ld);function Fl(It){for(var ci=Dl.lastIndex=0;Dl.test(It);)++ci;return ci}function au(It){return It.match(Dl)||[]}function lu(It){return It.match(wh)||[]}var cu=function It(ci){ci=ci==null?vs:Eo.defaults(vs.Object(),ci,Eo.pick(vs,nl));var ti=ci.Array,Zi=ci.Date,Dn=ci.Error,cr=ci.Function,ps=ci.Math,mr=ci.Object,xc=ci.RegExp,Ah=ci.String,fo=ci.TypeError,Ke=ti.prototype,xt=cr.prototype,Pt=mr.prototype,hi=ci["__core-js_shared__"],Lt=xt.toString,Qt=Pt.hasOwnProperty,Si=0,ji=function(){var g=/[^.]+$/.exec(hi&&hi.keys&&hi.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),bi=Pt.toString,fn=Lt.call(mr),vn=vs._,bn=xc("^"+Lt.call(Qt).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),On=ge?ci.Buffer:r,Jn=ci.Symbol,mn=ci.Uint8Array,cs=On?On.allocUnsafe:r,fs=Ho(mr.getPrototypeOf,mr),Ys=mr.create,Mr=Pt.propertyIsEnumerable,so=Ke.splice,Co=Jn?Jn.isConcatSpreadable:r,xs=Jn?Jn.iterator:r,jl=Jn?Jn.toStringTag:r,Ul=function(){try{var g=Td(mr,"defineProperty");return g({},"",{}),g}catch{}}(),ud=ci.clearTimeout!==vs.clearTimeout&&ci.clearTimeout,Gi=Zi&&Zi.now!==vs.Date.now&&Zi.now,xa=ci.setTimeout!==vs.setTimeout&&ci.setTimeout,bc=ps.ceil,pd=ps.floor,hu=mr.getOwnPropertySymbols,kh=On?On.isBuffer:r,vp=ci.isFinite,du=Ke.join,Ph=Ho(mr.keys,mr),ns=ps.max,Nr=ps.min,fd=Zi.now,Dh=ci.parseInt,Hf=ps.random,Im=Ke.reverse,uu=Td(ci,"DataView"),ol=Td(ci,"Map"),md=Td(ci,"Promise"),Gl=Td(ci,"Set"),Ih=Td(ci,"WeakMap"),wc=Td(mr,"create"),Tc=Ih&&new Ih,Kc={},xp=Zl(uu),bp=Zl(ol),Wf=Zl(md),pu=Zl(Gl),Vl=Zl(Ih),Lh=Jn?Jn.prototype:r,Oh=Lh?Lh.valueOf:r,wp=Lh?Lh.toString:r;function qe(g){if(As(g)&&!Un(g)&&!(g instanceof En)){if(g instanceof sa)return g;if(Qt.call(g,"__wrapped__"))return Cu(g)}return new sa(g)}var $l=function(){function g(){}return function(A){if(!gs(A))return{};if(Ys)return Ys(A);g.prototype=A;var re=new g;return g.prototype=r,re}}();function gd(){}function sa(g,A){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=r}qe.templateSettings={escape:Ml,evaluate:Ja,interpolate:io,variable:"",imports:{_:qe}},qe.prototype=gd.prototype,qe.prototype.constructor=qe,sa.prototype=$l(gd.prototype),sa.prototype.constructor=sa;function En(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function Lm(){var g=new En(this.__wrapped__);return g.__actions__=Bs(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=Bs(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=Bs(this.__views__),g}function Tp(){if(this.__filtered__){var g=new En(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function Om(){var g=this.__wrapped__.value(),A=this.__dir__,re=Un(g),Ce=A<0,Ge=re?g.length:0,Je=Zm(0,Ge,this.__views__),_t=Je.start,At=Je.end,zt=At-_t,mi=Ce?At:_t-1,xi=this.__iteratees__,Ai=xi.length,Yi=0,dn=Nr(zt,this.__takeCount__);if(!re||!Ce&&Ge==zt&&dn==zt)return vd(g,this.__actions__);var An=[];e:for(;zt--&&Yi<dn;){mi+=A;for(var Qn=-1,In=g[mi];++Qn<Ai;){var or=xi[Qn],gr=or.iteratee,Ca=or.type,Qo=gr(In);if(Ca==y)In=Qo;else if(!Qo){if(Ca==f)continue e;break e}}An[Yi++]=In}return An}En.prototype=$l(gd.prototype),En.prototype.constructor=En;function Jc(g){var A=-1,re=g==null?0:g.length;for(this.clear();++A<re;){var Ce=g[A];this.set(Ce[0],Ce[1])}}function Hl(){this.__data__=wc?wc(null):{},this.size=0}function Yf(g){var A=this.has(g)&&delete this.__data__[g];return this.size-=A?1:0,A}function Rh(g){var A=this.__data__;if(wc){var re=A[g];return re===T?r:re}return Qt.call(A,g)?A[g]:r}function al(g){var A=this.__data__;return wc?A[g]!==r:Qt.call(A,g)}function fu(g,A){var re=this.__data__;return this.size+=this.has(g)?0:1,re[g]=wc&&A===r?T:A,this}Jc.prototype.clear=Hl,Jc.prototype.delete=Yf,Jc.prototype.get=Rh,Jc.prototype.has=al,Jc.prototype.set=fu;function Bi(g){var A=-1,re=g==null?0:g.length;for(this.clear();++A<re;){var Ce=g[A];this.set(Ce[0],Ce[1])}}function Xf(){this.__data__=[],this.size=0}function qf(g){var A=this.__data__,re=a(A,g);if(re<0)return!1;var Ce=A.length-1;return re==Ce?A.pop():so.call(A,re,1),--this.size,!0}function Sc(g){var A=this.__data__,re=a(A,g);return re<0?r:A[re][1]}function _d(g){return a(this.__data__,g)>-1}function Sp(g,A){var re=this.__data__,Ce=a(re,g);return Ce<0?(++this.size,re.push([g,A])):re[Ce][1]=A,this}Bi.prototype.clear=Xf,Bi.prototype.delete=qf,Bi.prototype.get=Sc,Bi.prototype.has=_d,Bi.prototype.set=Sp;function ll(g){var A=-1,re=g==null?0:g.length;for(this.clear();++A<re;){var Ce=g[A];this.set(Ce[0],Ce[1])}}function Ep(){this.size=0,this.__data__={hash:new Jc,map:new(ol||Bi),string:new Jc}}function Cp(g){var A=xu(this,g).delete(g);return this.size-=A?1:0,A}function Mp(g){return xu(this,g).get(g)}function Ap(g){return xu(this,g).has(g)}function Bh(g,A){var re=xu(this,g),Ce=re.size;return re.set(g,A),this.size+=re.size==Ce?0:1,this}ll.prototype.clear=Ep,ll.prototype.delete=Cp,ll.prototype.get=Mp,ll.prototype.has=Ap,ll.prototype.set=Bh;function Va(g){var A=-1,re=g==null?0:g.length;for(this.__data__=new ll;++A<re;)this.add(g[A])}function mu(g){return this.__data__.set(g,T),this}function Zf(g){return this.__data__.has(g)}Va.prototype.add=Va.prototype.push=mu,Va.prototype.has=Zf;function oa(g){var A=this.__data__=new Bi(g);this.size=A.size}function Kf(){this.__data__=new Bi,this.size=0}function Jf(g){var A=this.__data__,re=A.delete(g);return this.size=A.size,re}function Qf(g){return this.__data__.get(g)}function e0(g){return this.__data__.has(g)}function t0(g,A){var re=this.__data__;if(re instanceof Bi){var Ce=re.__data__;if(!ol||Ce.length<c-1)return Ce.push([g,A]),this.size=++re.size,this;re=this.__data__=new ll(Ce)}return re.set(g,A),this.size=re.size,this}oa.prototype.clear=Kf,oa.prototype.delete=Jf,oa.prototype.get=Qf,oa.prototype.has=e0,oa.prototype.set=t0;function gu(g,A){var re=Un(g),Ce=!re&&Pd(g),Ge=!re&&!Ce&&Ql(g),Je=!re&&!Ce&&!Ge&&ec(g),_t=re||Ce||Ge||Je,At=_t?$o(g.length,Ah):[],zt=At.length;for(var mi in g)(A||Qt.call(g,mi))&&!(_t&&(mi=="length"||Ge&&(mi=="offset"||mi=="parent")||Je&&(mi=="buffer"||mi=="byteLength"||mi=="byteOffset")||kc(mi,zt)))&&At.push(mi);return At}function kp(g){var A=g.length;return A?g[Yo(0,A-1)]:r}function i0(g,A){return Eu(Bs(g),he(A,0,g.length))}function Pp(g){return Eu(Bs(g))}function Qc(g,A,re){(re!==r&&!Jl(g[A],re)||re===r&&!(A in g))&&B(g,A,re)}function _(g,A,re){var Ce=g[A];(!(Qt.call(g,A)&&Jl(Ce,re))||re===r&&!(A in g))&&B(g,A,re)}function a(g,A){for(var re=g.length;re--;)if(Jl(g[re][0],A))return re;return-1}function u(g,A,re,Ce){return Qe(g,function(Ge,Je,_t){A(Ce,Ge,re(Ge),_t)}),Ce}function x(g,A){return g&&Qs(A,ks(A),g)}function P(g,A){return g&&Qs(A,ca(A),g)}function B(g,A,re){A=="__proto__"&&Ul?Ul(g,A,{configurable:!0,enumerable:!0,value:re,writable:!0}):g[A]=re}function ne(g,A){for(var re=-1,Ce=A.length,Ge=ti(Ce),Je=g==null;++re<Ce;)Ge[re]=Je?r:L0(g,A[re]);return Ge}function he(g,A,re){return g===g&&(re!==r&&(g=g<=re?g:re),A!==r&&(g=g>=A?g:A)),g}function pe(g,A,re,Ce,Ge,Je){var _t,At=A&z,zt=A&W,mi=A&K;if(re&&(_t=Ge?re(g,Ce,Ge,Je):re(g)),_t!==r)return _t;if(!gs(g))return g;var xi=Un(g);if(xi){if(_t=Sd(g),!At)return Bs(g,_t)}else{var Ai=Xo(g),Yi=Ai==le||Ai==me;if(Ql(g))return Cc(g,At);if(Ai==Ne||Ai==se||Yi&&!Ge){if(_t=zt||Yi?{}:Jm(g),!At)return zt?Fh(g,P(_t,g)):Nh(g,x(_t,g))}else{if(!pr[Ai])return Ge?g:{};_t=Rx(g,Ai,At)}}Je||(Je=new oa);var dn=Je.get(g);if(dn)return dn;Je.set(g,_t),H_(g)?g.forEach(function(In){_t.add(pe(In,A,re,In,g,Je))}):Mg(g)&&g.forEach(function(In,or){_t.set(or,pe(In,A,re,or,g,Je))});var An=mi?zt?Xm:l0:zt?ca:ks,Qn=xi?r:An(g);return ei(Qn||g,function(In,or){Qn&&(or=In,In=g[or]),_(_t,or,pe(In,A,re,or,g,Je))}),_t}function Me(g){var A=ks(g);return function(re){return Ee(re,g,A)}}function Ee(g,A,re){var Ce=re.length;if(g==null)return!Ce;for(g=mr(g);Ce--;){var Ge=re[Ce],Je=A[Ge],_t=g[Ge];if(_t===r&&!(Ge in g)||!Je(_t))return!1}return!0}function Re(g,A,re){if(typeof g!="function")throw new fo(m);return Su(function(){g.apply(r,re)},A)}function $e(g,A,re,Ce){var Ge=-1,Je=Qr,_t=!0,At=g.length,zt=[],mi=A.length;if(!At)return zt;re&&(A=Vn(A,ro(re))),Ce?(Je=zr,_t=!1):A.length>=c&&(Je=gc,_t=!1,A=new Va(A));e:for(;++Ge<At;){var xi=g[Ge],Ai=re==null?xi:re(xi);if(xi=Ce||xi!==0?xi:0,_t&&Ai===Ai){for(var Yi=mi;Yi--;)if(A[Yi]===Ai)continue e;zt.push(xi)}else Je(A,Ai,Ce)||zt.push(xi)}return zt}var Qe=a_(gt),et=a_(kt,!0);function rt(g,A){var re=!0;return Qe(g,function(Ce,Ge,Je){return re=!!A(Ce,Ge,Je),re}),re}function Ye(g,A,re){for(var Ce=-1,Ge=g.length;++Ce<Ge;){var Je=g[Ce],_t=A(Je);if(_t!=null&&(At===r?_t===_t&&!Jo(_t):re(_t,At)))var At=_t,zt=Je}return zt}function Ze(g,A,re,Ce){var Ge=g.length;for(re=Cn(re),re<0&&(re=-re>Ge?0:Ge+re),Ce=Ce===r||Ce>Ge?Ge:Cn(Ce),Ce<0&&(Ce+=Ge),Ce=re>Ce?0:Lu(Ce);re<Ce;)g[re++]=A;return g}function lt(g,A){var re=[];return Qe(g,function(Ce,Ge,Je){A(Ce,Ge,Je)&&re.push(Ce)}),re}function tt(g,A,re,Ce,Ge){var Je=-1,_t=g.length;for(re||(re=d0),Ge||(Ge=[]);++Je<_t;){var At=g[Je];A>0&&re(At)?A>1?tt(At,A-1,re,Ce,Ge):$n(Ge,At):Ce||(Ge[Ge.length]=At)}return Ge}var pt=l_(),Tt=l_(!0);function gt(g,A){return g&&pt(g,A,ks)}function kt(g,A){return g&&Tt(g,A,ks)}function Wt(g,A){return en(A,function(re){return Dc(g[re])})}function Ft(g,A){A=Wl(A,g);for(var re=0,Ce=A.length;g!=null&&re<Ce;)g=g[Sa(A[re++])];return re&&re==Ce?g:r}function Dt(g,A,re){var Ce=A(g);return Un(g)?Ce:$n(Ce,re(g))}function pi(g){return g==null?g===r?We:De:jl&&jl in mr(g)?h_(g):eg(g)}function Nt(g,A){return g>A}function si(g,A){return g!=null&&Qt.call(g,A)}function Xt(g,A){return g!=null&&A in mr(g)}function vi(g,A,re){return g>=Nr(A,re)&&g<ns(A,re)}function qt(g,A,re){for(var Ce=re?zr:Qr,Ge=g[0].length,Je=g.length,_t=Je,At=ti(Je),zt=1/0,mi=[];_t--;){var xi=g[_t];_t&&A&&(xi=Vn(xi,ro(A))),zt=Nr(xi.length,zt),At[_t]=!re&&(A||Ge>=120&&xi.length>=120)?new Va(_t&&xi):r}xi=g[0];var Ai=-1,Yi=At[0];e:for(;++Ai<Ge&&mi.length<zt;){var dn=xi[Ai],An=A?A(dn):dn;if(dn=re||dn!==0?dn:0,!(Yi?gc(Yi,An):Ce(mi,An,re))){for(_t=Je;--_t;){var Qn=At[_t];if(!(Qn?gc(Qn,An):Ce(g[_t],An,re)))continue e}Yi&&Yi.push(An),mi.push(dn)}}return mi}function di(g,A,re,Ce){return gt(g,function(Ge,Je,_t){A(Ce,re(Ge),Je,_t)}),Ce}function wi(g,A,re){A=Wl(A,g),g=tg(g,A);var Ce=g==null?g:g[Sa(pl(A))];return Ce==null?r:fi(Ce,g,re)}function Rt(g){return As(g)&&pi(g)==se}function Yt(g){return As(g)&&pi(g)==Ut}function Hi(g){return As(g)&&pi(g)==ae}function nn(g,A,re,Ce,Ge){return g===A?!0:g==null||A==null||!As(g)&&!As(A)?g!==g&&A!==A:Wi(g,A,re,Ce,nn,Ge)}function Wi(g,A,re,Ce,Ge,Je){var _t=Un(g),At=Un(A),zt=_t?ue:Xo(g),mi=At?ue:Xo(A);zt=zt==se?Ne:zt,mi=mi==se?Ne:mi;var xi=zt==Ne,Ai=mi==Ne,Yi=zt==mi;if(Yi&&Ql(g)){if(!Ql(A))return!1;_t=!0,xi=!1}if(Yi&&!xi)return Je||(Je=new oa),_t||ec(g)?Wm(g,A,re,Ce,Ge,Je):Ym(g,A,zt,re,Ce,Ge,Je);if(!(re&I)){var dn=xi&&Qt.call(g,"__wrapped__"),An=Ai&&Qt.call(A,"__wrapped__");if(dn||An){var Qn=dn?g.value():g,In=An?A.value():A;return Je||(Je=new oa),Ge(Qn,In,re,Ce,Je)}}return Yi?(Je||(Je=new oa),Ox(g,A,re,Ce,Ge,Je)):!1}function pn(g){return As(g)&&Xo(g)==be}function Rn(g,A,re,Ce){var Ge=re.length,Je=Ge,_t=!Ce;if(g==null)return!Je;for(g=mr(g);Ge--;){var At=re[Ge];if(_t&&At[2]?At[1]!==g[At[0]]:!(At[0]in g))return!1}for(;++Ge<Je;){At=re[Ge];var zt=At[0],mi=g[zt],xi=At[1];if(_t&&At[2]){if(mi===r&&!(zt in g))return!1}else{var Ai=new oa;if(Ce)var Yi=Ce(mi,xi,zt,g,A,Ai);if(!(Yi===r?nn(xi,mi,I|O,Ce,Ai):Yi))return!1}}return!0}function sn(g){if(!gs(g)||Ta(g))return!1;var A=Dc(g)?bn:Xi;return A.test(Zl(g))}function Vi(g){return As(g)&&pi(g)==ht}function Sr(g){return As(g)&&Xo(g)==ke}function hr(g){return As(g)&&Er(g.length)&&!!nr[pi(g)]}function Ar(g){return typeof g=="function"?g:g==null?Xs:typeof g=="object"?Un(g)?Fr(g[0],g[1]):$a(g):Xg(g)}function br(g){if(!Tu(g))return Ph(g);var A=[];for(var re in mr(g))Qt.call(g,re)&&re!="constructor"&&A.push(re);return A}function Wo(g){if(!gs(g))return Cd(g);var A=Tu(g),re=[];for(var Ce in g)Ce=="constructor"&&(A||!Qt.call(g,Ce))||re.push(Ce);return re}function Mo(g,A){return g<A}function mo(g,A){var re=-1,Ce=Ur(g)?ti(g.length):[];return Qe(g,function(Ge,Je,_t){Ce[++re]=A(Ge,Je,_t)}),Ce}function $a(g){var A=c0(g);return A.length==1&&A[0][2]?u0(A[0][0],A[0][1]):function(re){return re===g||Rn(re,g,A)}}function Fr(g,A){return Qm(g)&&dl(A)?u0(Sa(g),A):function(re){var Ce=L0(re,g);return Ce===r&&Ce===A?Dd(re,g):nn(A,Ce,I|O)}}function wr(g,A,re,Ce,Ge){g!==A&&pt(A,function(Je,_t){if(Ge||(Ge=new oa),gs(Je))sr(g,A,_t,re,wr,Ce,Ge);else{var At=Ce?Ce(ig(g,_t),Je,_t+"",g,A,Ge):r;At===r&&(At=Je),Qc(g,_t,At)}},ca)}function sr(g,A,re,Ce,Ge,Je,_t){var At=ig(g,re),zt=ig(A,re),mi=_t.get(zt);if(mi){Qc(g,re,mi);return}var xi=Je?Je(At,zt,re+"",g,A,_t):r,Ai=xi===r;if(Ai){var Yi=Un(zt),dn=!Yi&&Ql(zt),An=!Yi&&!dn&&ec(zt);xi=zt,Yi||dn||An?Un(At)?xi=At:Wr(At)?xi=Bs(At):dn?(Ai=!1,xi=Cc(zt,!0)):An?(Ai=!1,xi=s_(zt,!0)):xi=[]:qp(zt)||Pd(zt)?(xi=At,Pd(At)?xi=P0(At):(!gs(At)||Dc(At))&&(xi=Jm(zt))):Ai=!1}Ai&&(_t.set(zt,xi),Ge(xi,zt,Ce,Je,_t),_t.delete(zt)),Qc(g,re,xi)}function ms(g,A){var re=g.length;if(re)return A+=A<0?re:0,kc(A,re)?g[A]:r}function oo(g,A,re){A.length?A=Vn(A,function(Je){return Un(Je)?function(_t){return Ft(_t,Je.length===1?Je[0]:Je)}:Je}):A=[Xs];var Ce=-1;A=Vn(A,ro(Sn()));var Ge=mo(g,function(Je,_t,At){var zt=Vn(A,function(mi){return mi(Je)});return{criteria:zt,index:++Ce,value:Je}});return Ch(Ge,function(Je,_t){return jm(Je,_t,re)})}function jr(g,A){return go(g,A,function(re,Ce){return Dd(g,Ce)})}function go(g,A,re){for(var Ce=-1,Ge=A.length,Je={};++Ce<Ge;){var _t=A[Ce],At=Ft(g,_t);re(At,_t)&&eh(Je,Wl(_t,g),At)}return Je}function yd(g){return function(A){return Ft(A,g)}}function Ha(g,A,re,Ce){var Ge=Ce?$s:Pn,Je=-1,_t=A.length,At=g;for(g===A&&(A=Bs(A)),re&&(At=Vn(g,ro(re)));++Je<_t;)for(var zt=0,mi=A[Je],xi=re?re(mi):mi;(zt=Ge(At,xi,zt,Ce))>-1;)At!==g&&so.call(At,zt,1),so.call(g,zt,1);return g}function ao(g,A){for(var re=g?A.length:0,Ce=re-1;re--;){var Ge=A[re];if(re==Ce||Ge!==Je){var Je=Ge;kc(Ge)?so.call(g,Ge,1):r0(g,Ge)}}return g}function Yo(g,A){return g+pd(Hf()*(A-g+1))}function cl(g,A,re,Ce){for(var Ge=-1,Je=ns(bc((A-g)/(re||1)),0),_t=ti(Je);Je--;)_t[Ce?Je:++Ge]=g,g+=re;return _t}function ba(g,A){var re="";if(!g||A<1||A>X)return re;do A%2&&(re+=g),A=pd(A/2),A&&(g+=g);while(A);return re}function jn(g,A){return Md(Bp(g,A,Xs),g+"")}function zh(g){return kp(Id(g))}function hl(g,A){var re=Id(g);return Eu(re,he(A,0,re.length))}function eh(g,A,re,Ce){if(!gs(g))return g;A=Wl(A,g);for(var Ge=-1,Je=A.length,_t=Je-1,At=g;At!=null&&++Ge<Je;){var zt=Sa(A[Ge]),mi=re;if(zt==="__proto__"||zt==="constructor"||zt==="prototype")return g;if(Ge!=_t){var xi=At[zt];mi=Ce?Ce(xi,zt,At):r,mi===r&&(mi=gs(xi)?xi:kc(A[Ge+1])?[]:{})}_(At,zt,mi),At=At[zt]}return g}var Dp=Tc?function(g,A){return Tc.set(g,A),g}:Xs,Q1=Ul?function(g,A){return Ul(g,"toString",{configurable:!0,enumerable:!1,value:Hg(A),writable:!0})}:Xs;function Rm(g){return Eu(Id(g))}function Wa(g,A,re){var Ce=-1,Ge=g.length;A<0&&(A=-A>Ge?0:Ge+A),re=re>Ge?Ge:re,re<0&&(re+=Ge),Ge=A>re?0:re-A>>>0,A>>>=0;for(var Je=ti(Ge);++Ce<Ge;)Je[Ce]=g[Ce+A];return Je}function e_(g,A){var re;return Qe(g,function(Ce,Ge,Je){return re=A(Ce,Ge,Je),!re}),!!re}function Ip(g,A,re){var Ce=0,Ge=g==null?Ce:g.length;if(typeof A=="number"&&A===A&&Ge<=we){for(;Ce<Ge;){var Je=Ce+Ge>>>1,_t=g[Je];_t!==null&&!Jo(_t)&&(re?_t<=A:_t<A)?Ce=Je+1:Ge=Je}return Ge}return n0(g,A,Xs,re)}function n0(g,A,re,Ce){var Ge=0,Je=g==null?0:g.length;if(Je===0)return 0;A=re(A);for(var _t=A!==A,At=A===null,zt=Jo(A),mi=A===r;Ge<Je;){var xi=pd((Ge+Je)/2),Ai=re(g[xi]),Yi=Ai!==r,dn=Ai===null,An=Ai===Ai,Qn=Jo(Ai);if(_t)var In=Ce||An;else mi?In=An&&(Ce||Yi):At?In=An&&Yi&&(Ce||!dn):zt?In=An&&Yi&&!dn&&(Ce||!Qn):dn||Qn?In=!1:In=Ce?Ai<=A:Ai<A;In?Ge=xi+1:Je=xi}return Nr(Je,fe)}function Bm(g,A){for(var re=-1,Ce=g.length,Ge=0,Je=[];++re<Ce;){var _t=g[re],At=A?A(_t):_t;if(!re||!Jl(At,zt)){var zt=At;Je[Ge++]=_t===0?0:_t}}return Je}function zm(g){return typeof g=="number"?g:Jo(g)?q:+g}function wa(g){if(typeof g=="string")return g;if(Un(g))return Vn(g,wa)+"";if(Jo(g))return wp?wp.call(g):"";var A=g+"";return A=="0"&&1/g==-D?"-0":A}function th(g,A,re){var Ce=-1,Ge=Qr,Je=g.length,_t=!0,At=[],zt=At;if(re)_t=!1,Ge=zr;else if(Je>=c){var mi=A?null:_o(g);if(mi)return sl(mi);_t=!1,Ge=gc,zt=new Va}else zt=A?[]:At;e:for(;++Ce<Je;){var xi=g[Ce],Ai=A?A(xi):xi;if(xi=re||xi!==0?xi:0,_t&&Ai===Ai){for(var Yi=zt.length;Yi--;)if(zt[Yi]===Ai)continue e;A&&zt.push(Ai),At.push(xi)}else Ge(zt,Ai,re)||(zt!==At&&zt.push(Ai),At.push(xi))}return At}function r0(g,A){return A=Wl(A,g),g=tg(g,A),g==null||delete g[Sa(pl(A))]}function t_(g,A,re,Ce){return eh(g,A,re(Ft(g,A)),Ce)}function s0(g,A,re,Ce){for(var Ge=g.length,Je=Ce?Ge:-1;(Ce?Je--:++Je<Ge)&&A(g[Je],Je,g););return re?Wa(g,Ce?0:Je,Ce?Je+1:Ge):Wa(g,Ce?Je+1:0,Ce?Ge:Je)}function vd(g,A){var re=g;return re instanceof En&&(re=re.value()),Tn(A,function(Ce,Ge){return Ge.func.apply(Ge.thisArg,$n([Ce],Ge.args))},re)}function o0(g,A,re){var Ce=g.length;if(Ce<2)return Ce?th(g[0]):[];for(var Ge=-1,Je=ti(Ce);++Ge<Ce;)for(var _t=g[Ge],At=-1;++At<Ce;)At!=Ge&&(Je[Ge]=$e(Je[Ge]||_t,g[At],A,re));return th(tt(Je,1),A,re)}function Nm(g,A,re){for(var Ce=-1,Ge=g.length,Je=A.length,_t={};++Ce<Ge;){var At=Ce<Je?A[Ce]:r;re(_t,g[Ce],At)}return _t}function a0(g){return Wr(g)?g:[]}function Fm(g){return typeof g=="function"?g:Xs}function Wl(g,A){return Un(g)?g:Qm(g,A)?[g]:ng(Yr(g))}var i_=jn;function Ec(g,A,re){var Ce=g.length;return re=re===r?Ce:re,!A&&re>=Ce?g:Wa(g,A,re)}var Lp=ud||function(g){return vs.clearTimeout(g)};function Cc(g,A){if(A)return g.slice();var re=g.length,Ce=cs?cs(re):new g.constructor(re);return g.copy(Ce),Ce}function _u(g){var A=new g.constructor(g.byteLength);return new mn(A).set(new mn(g)),A}function n_(g,A){var re=A?_u(g.buffer):g.buffer;return new g.constructor(re,g.byteOffset,g.byteLength)}function r_(g){var A=new g.constructor(g.source,_i.exec(g));return A.lastIndex=g.lastIndex,A}function Dx(g){return Oh?mr(Oh.call(g)):{}}function s_(g,A){var re=A?_u(g.buffer):g.buffer;return new g.constructor(re,g.byteOffset,g.length)}function o_(g,A){if(g!==A){var re=g!==r,Ce=g===null,Ge=g===g,Je=Jo(g),_t=A!==r,At=A===null,zt=A===A,mi=Jo(A);if(!At&&!mi&&!Je&&g>A||Je&&_t&&zt&&!At&&!mi||Ce&&_t&&zt||!re&&zt||!Ge)return 1;if(!Ce&&!Je&&!mi&&g<A||mi&&re&&Ge&&!Ce&&!Je||At&&re&&Ge||!_t&&Ge||!zt)return-1}return 0}function jm(g,A,re){for(var Ce=-1,Ge=g.criteria,Je=A.criteria,_t=Ge.length,At=re.length;++Ce<_t;){var zt=o_(Ge[Ce],Je[Ce]);if(zt){if(Ce>=At)return zt;var mi=re[Ce];return zt*(mi=="desc"?-1:1)}}return g.index-A.index}function yu(g,A,re,Ce){for(var Ge=-1,Je=g.length,_t=re.length,At=-1,zt=A.length,mi=ns(Je-_t,0),xi=ti(zt+mi),Ai=!Ce;++At<zt;)xi[At]=A[At];for(;++Ge<_t;)(Ai||Ge<Je)&&(xi[re[Ge]]=g[Ge]);for(;mi--;)xi[At++]=g[Ge++];return xi}function xd(g,A,re,Ce){for(var Ge=-1,Je=g.length,_t=-1,At=re.length,zt=-1,mi=A.length,xi=ns(Je-At,0),Ai=ti(xi+mi),Yi=!Ce;++Ge<xi;)Ai[Ge]=g[Ge];for(var dn=Ge;++zt<mi;)Ai[dn+zt]=A[zt];for(;++_t<At;)(Yi||Ge<Je)&&(Ai[dn+re[_t]]=g[Ge++]);return Ai}function Bs(g,A){var re=-1,Ce=g.length;for(A||(A=ti(Ce));++re<Ce;)A[re]=g[re];return A}function Qs(g,A,re,Ce){var Ge=!re;re||(re={});for(var Je=-1,_t=A.length;++Je<_t;){var At=A[Je],zt=Ce?Ce(re[At],g[At],At,re,g):r;zt===r&&(zt=g[At]),Ge?B(re,At,zt):_(re,At,zt)}return re}function Nh(g,A){return Qs(g,qm(g),A)}function Fh(g,A){return Qs(g,h0(g),A)}function Mc(g,A){return function(re,Ce){var Ge=Un(re)?Kt:u,Je=A?A():{};return Ge(re,g,Sn(Ce,2),Je)}}function vu(g){return jn(function(A,re){var Ce=-1,Ge=re.length,Je=Ge>1?re[Ge-1]:r,_t=Ge>2?re[2]:r;for(Je=g.length>3&&typeof Je=="function"?(Ge--,Je):r,_t&&qo(re[0],re[1],_t)&&(Je=Ge<3?r:Je,Ge=1),A=mr(A);++Ce<Ge;){var At=re[Ce];At&&g(A,At,Ce,Je)}return A})}function a_(g,A){return function(re,Ce){if(re==null)return re;if(!Ur(re))return g(re,Ce);for(var Ge=re.length,Je=A?Ge:-1,_t=mr(re);(A?Je--:++Je<Ge)&&Ce(_t[Je],Je,_t)!==!1;);return re}}function l_(g){return function(A,re,Ce){for(var Ge=-1,Je=mr(A),_t=Ce(A),At=_t.length;At--;){var zt=_t[g?At:++Ge];if(re(Je[zt],zt,Je)===!1)break}return A}}function Ix(g,A,re){var Ce=A&$,Ge=aa(g);function Je(){var _t=this&&this!==vs&&this instanceof Je?Ge:g;return _t.apply(Ce?re:this,arguments)}return Je}function Um(g){return function(A){A=Yr(A);var re=Ga(A)?po(A):r,Ce=re?re[0]:A.charAt(0),Ge=re?Ec(re,1).join(""):A.slice(1);return Ce[g]()+Ge}}function ih(g){return function(A){return Tn(Od(Ng(A).replace(bh,"")),g,"")}}function aa(g){return function(){var A=arguments;switch(A.length){case 0:return new g;case 1:return new g(A[0]);case 2:return new g(A[0],A[1]);case 3:return new g(A[0],A[1],A[2]);case 4:return new g(A[0],A[1],A[2],A[3]);case 5:return new g(A[0],A[1],A[2],A[3],A[4]);case 6:return new g(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new g(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var re=$l(g.prototype),Ce=g.apply(re,A);return gs(Ce)?Ce:re}}function Lx(g,A,re){var Ce=aa(g);function Ge(){for(var Je=arguments.length,_t=ti(Je),At=Je,zt=rh(Ge);At--;)_t[At]=arguments[At];var mi=Je<3&&_t[0]!==zt&&_t[Je-1]!==zt?[]:Hs(_t,zt);if(Je-=mi.length,Je<re)return Xa(g,A,cn,Ge.placeholder,r,_t,mi,r,r,re-Je);var xi=this&&this!==vs&&this instanceof Ge?Ce:g;return fi(xi,this,_t)}return Ge}function c_(g){return function(A,re,Ce){var Ge=mr(A);if(!Ur(A)){var Je=Sn(re,3);A=ks(A),re=function(At){return Je(Ge[At],At,Ge)}}var _t=g(A,re,Ce);return _t>-1?Ge[Je?A[_t]:_t]:r}}function Cs(g){return Xl(function(A){var re=A.length,Ce=re,Ge=sa.prototype.thru;for(g&&A.reverse();Ce--;){var Je=A[Ce];if(typeof Je!="function")throw new fo(m);if(Ge&&!_t&&Ac(Je)=="wrapper")var _t=new sa([],!0)}for(Ce=_t?Ce:re;++Ce<re;){Je=A[Ce];var At=Ac(Je),zt=At=="wrapper"?ql(Je):r;zt&&wu(zt[0])&&zt[1]==(ie|k|U|J)&&!zt[4].length&&zt[9]==1?_t=_t[Ac(zt[0])].apply(_t,zt[3]):_t=Je.length==1&&wu(Je)?_t[At]():_t.thru(Je)}return function(){var mi=arguments,xi=mi[0];if(_t&&mi.length==1&&Un(xi))return _t.plant(xi).value();for(var Ai=0,Yi=re?A[Ai].apply(this,mi):xi;++Ai<re;)Yi=A[Ai].call(this,Yi);return Yi}})}function cn(g,A,re,Ce,Ge,Je,_t,At,zt,mi){var xi=A&ie,Ai=A&$,Yi=A&M,dn=A&(k|G),An=A&N,Qn=Yi?r:aa(g);function In(){for(var or=arguments.length,gr=ti(or),Ca=or;Ca--;)gr[Ca]=arguments[Ca];if(dn)var Qo=rh(In),Ma=yc(gr,Qo);if(Ce&&(gr=yu(gr,Ce,Ge,dn)),Je&&(gr=xd(gr,Je,_t,dn)),or-=Ma,dn&&or<mi){var zs=Hs(gr,Qo);return Xa(g,A,cn,In.placeholder,re,gr,zs,At,zt,mi-or)}var vo=Ai?re:this,Oc=Yi?vo[g]:g;return or=gr.length,At?gr=p_(gr,At):An&&or>1&&gr.reverse(),xi&&zt<or&&(gr.length=zt),this&&this!==vs&&this instanceof In&&(Oc=Qn||aa(Oc)),Oc.apply(vo,gr)}return In}function nh(g,A){return function(re,Ce){return di(re,g,A(Ce),{})}}function bd(g,A){return function(re,Ce){var Ge;if(re===r&&Ce===r)return A;if(re!==r&&(Ge=re),Ce!==r){if(Ge===r)return Ce;typeof re=="string"||typeof Ce=="string"?(re=wa(re),Ce=wa(Ce)):(re=zm(re),Ce=zm(Ce)),Ge=g(re,Ce)}return Ge}}function Kn(g){return Xl(function(A){return A=Vn(A,ro(Sn())),jn(function(re){var Ce=this;return g(A,function(Ge){return fi(Ge,Ce,re)})})})}function Op(g,A){A=A===r?" ":wa(A);var re=A.length;if(re<2)return re?ba(A,g):A;var Ce=ba(A,bc(g/rr(A)));return Ga(A)?Ec(po(Ce),0,g).join(""):Ce.slice(0,g)}function Gm(g,A,re,Ce){var Ge=A&$,Je=aa(g);function _t(){for(var At=-1,zt=arguments.length,mi=-1,xi=Ce.length,Ai=ti(xi+zt),Yi=this&&this!==vs&&this instanceof _t?Je:g;++mi<xi;)Ai[mi]=Ce[mi];for(;zt--;)Ai[mi++]=arguments[++At];return fi(Yi,Ge?re:this,Ai)}return _t}function Yl(g){return function(A,re,Ce){return Ce&&typeof Ce!="number"&&qo(A,re,Ce)&&(re=Ce=r),A=Ic(A),re===r?(re=A,A=0):re=Ic(re),Ce=Ce===r?A<re?1:-1:Ic(Ce),cl(A,re,Ce,g)}}function Ya(g){return function(A,re){return typeof A=="string"&&typeof re=="string"||(A=Ao(A),re=Ao(re)),g(A,re)}}function Xa(g,A,re,Ce,Ge,Je,_t,At,zt,mi){var xi=A&k,Ai=xi?_t:r,Yi=xi?r:_t,dn=xi?Je:r,An=xi?r:Je;A|=xi?U:C,A&=~(xi?C:U),A&S||(A&=~($|M));var Qn=[g,A,Ge,dn,Ai,An,Yi,At,zt,mi],In=re.apply(r,Qn);return wu(g)&&p0(In,Qn),In.placeholder=Ce,Ad(In,g,A)}function la(g){var A=ps[g];return function(re,Ce){if(re=Ao(re),Ce=Ce==null?0:Nr(Cn(Ce),292),Ce&&vp(re)){var Ge=(Yr(re)+"e").split("e"),Je=A(Ge[0]+"e"+(+Ge[1]+Ce));return Ge=(Yr(Je)+"e").split("e"),+(Ge[0]+"e"+(+Ge[1]-Ce))}return A(re)}}var _o=Gl&&1/sl(new Gl([,-0]))[1]==D?function(g){return new Gl(g)}:Yg;function Vm(g){return function(A){var re=Xo(A);return re==be?vc(A):re==ke?dd(A):qc(A,g(A))}}function yo(g,A,re,Ce,Ge,Je,_t,At){var zt=A&M;if(!zt&&typeof g!="function")throw new fo(m);var mi=Ce?Ce.length:0;if(mi||(A&=~(U|C),Ce=Ge=r),_t=_t===r?_t:ns(Cn(_t),0),At=At===r?At:Cn(At),mi-=Ge?Ge.length:0,A&C){var xi=Ce,Ai=Ge;Ce=Ge=r}var Yi=zt?r:ql(g),dn=[g,A,re,Ce,Ge,xi,Ai,Je,_t,At];if(Yi&&Rp(dn,Yi),g=dn[0],A=dn[1],re=dn[2],Ce=dn[3],Ge=dn[4],At=dn[9]=dn[9]===r?zt?0:g.length:ns(dn[9]-mi,0),!At&&A&(k|G)&&(A&=~(k|G)),!A||A==$)var An=Ix(g,A,re);else A==k||A==G?An=Lx(g,A,At):(A==U||A==($|U))&&!Ge.length?An=Gm(g,A,re,Ce):An=cn.apply(r,dn);var Qn=Yi?Dp:p0;return Ad(Qn(An,dn),g,A)}function $m(g,A,re,Ce){return g===r||Jl(g,Pt[re])&&!Qt.call(Ce,re)?A:g}function wd(g,A,re,Ce,Ge,Je){return gs(g)&&gs(A)&&(Je.set(A,g),wr(g,A,r,wd,Je),Je.delete(A)),g}function Hm(g){return qp(g)?r:g}function Wm(g,A,re,Ce,Ge,Je){var _t=re&I,At=g.length,zt=A.length;if(At!=zt&&!(_t&&zt>At))return!1;var mi=Je.get(g),xi=Je.get(A);if(mi&&xi)return mi==A&&xi==g;var Ai=-1,Yi=!0,dn=re&O?new Va:r;for(Je.set(g,A),Je.set(A,g);++Ai<At;){var An=g[Ai],Qn=A[Ai];if(Ce)var In=_t?Ce(Qn,An,Ai,A,g,Je):Ce(An,Qn,Ai,g,A,Je);if(In!==r){if(In)continue;Yi=!1;break}if(dn){if(!Xn(A,function(or,gr){if(!gc(dn,gr)&&(An===or||Ge(An,or,re,Ce,Je)))return dn.push(gr)})){Yi=!1;break}}else if(!(An===Qn||Ge(An,Qn,re,Ce,Je))){Yi=!1;break}}return Je.delete(g),Je.delete(A),Yi}function Ym(g,A,re,Ce,Ge,Je,_t){switch(re){case Vt:if(g.byteLength!=A.byteLength||g.byteOffset!=A.byteOffset)return!1;g=g.buffer,A=A.buffer;case Ut:return!(g.byteLength!=A.byteLength||!Je(new mn(g),new mn(A)));case Pe:case ae:case Le:return Jl(+g,+A);case ve:return g.name==A.name&&g.message==A.message;case ht:case Be:return g==A+"";case be:var At=vc;case ke:var zt=Ce&I;if(At||(At=sl),g.size!=A.size&&!zt)return!1;var mi=_t.get(g);if(mi)return mi==A;Ce|=O,_t.set(g,A);var xi=Wm(At(g),At(A),Ce,Ge,Je,_t);return _t.delete(g),xi;case Ue:if(Oh)return Oh.call(g)==Oh.call(A)}return!1}function Ox(g,A,re,Ce,Ge,Je){var _t=re&I,At=l0(g),zt=At.length,mi=l0(A),xi=mi.length;if(zt!=xi&&!_t)return!1;for(var Ai=zt;Ai--;){var Yi=At[Ai];if(!(_t?Yi in A:Qt.call(A,Yi)))return!1}var dn=Je.get(g),An=Je.get(A);if(dn&&An)return dn==A&&An==g;var Qn=!0;Je.set(g,A),Je.set(A,g);for(var In=_t;++Ai<zt;){Yi=At[Ai];var or=g[Yi],gr=A[Yi];if(Ce)var Ca=_t?Ce(gr,or,Yi,A,g,Je):Ce(or,gr,Yi,g,A,Je);if(!(Ca===r?or===gr||Ge(or,gr,re,Ce,Je):Ca)){Qn=!1;break}In||(In=Yi=="constructor")}if(Qn&&!In){var Qo=g.constructor,Ma=A.constructor;Qo!=Ma&&"constructor"in g&&"constructor"in A&&!(typeof Qo=="function"&&Qo instanceof Qo&&typeof Ma=="function"&&Ma instanceof Ma)&&(Qn=!1)}return Je.delete(g),Je.delete(A),Qn}function Xl(g){return Md(Bp(g,r,og),g+"")}function l0(g){return Dt(g,ks,qm)}function Xm(g){return Dt(g,ca,h0)}var ql=Tc?function(g){return Tc.get(g)}:Yg;function Ac(g){for(var A=g.name+"",re=Kc[A],Ce=Qt.call(Kc,A)?re.length:0;Ce--;){var Ge=re[Ce],Je=Ge.func;if(Je==null||Je==g)return Ge.name}return A}function rh(g){var A=Qt.call(qe,"placeholder")?qe:g;return A.placeholder}function Sn(){var g=qe.iteratee||Wg;return g=g===Wg?Ar:g,arguments.length?g(arguments[0],arguments[1]):g}function xu(g,A){var re=g.__data__;return Bx(A)?re[typeof A=="string"?"string":"hash"]:re.map}function c0(g){for(var A=ks(g),re=A.length;re--;){var Ce=A[re],Ge=g[Ce];A[re]=[Ce,Ge,dl(Ge)]}return A}function Td(g,A){var re=va(g,A);return sn(re)?re:r}function h_(g){var A=Qt.call(g,jl),re=g[jl];try{g[jl]=r;var Ce=!0}catch{}var Ge=bi.call(g);return Ce&&(A?g[jl]=re:delete g[jl]),Ge}var qm=hu?function(g){return g==null?[]:(g=mr(g),en(hu(g),function(A){return Mr.call(g,A)}))}:U0,h0=hu?function(g){for(var A=[];g;)$n(A,qm(g)),g=fs(g);return A}:U0,Xo=pi;(uu&&Xo(new uu(new ArrayBuffer(1)))!=Vt||ol&&Xo(new ol)!=be||md&&Xo(md.resolve())!=st||Gl&&Xo(new Gl)!=ke||Ih&&Xo(new Ih)!=nt)&&(Xo=function(g){var A=pi(g),re=A==Ne?g.constructor:r,Ce=re?Zl(re):"";if(Ce)switch(Ce){case xp:return Vt;case bp:return be;case Wf:return st;case pu:return ke;case Vl:return nt}return A});function Zm(g,A,re){for(var Ce=-1,Ge=re.length;++Ce<Ge;){var Je=re[Ce],_t=Je.size;switch(Je.type){case"drop":g+=_t;break;case"dropRight":A-=_t;break;case"take":A=Nr(A,g+_t);break;case"takeRight":g=ns(g,A-_t);break}}return{start:g,end:A}}function d_(g){var A=g.match(Ot);return A?A[1].split(Bt):[]}function Km(g,A,re){A=Wl(A,g);for(var Ce=-1,Ge=A.length,Je=!1;++Ce<Ge;){var _t=Sa(A[Ce]);if(!(Je=g!=null&&re(g,_t)))break;g=g[_t]}return Je||++Ce!=Ge?Je:(Ge=g==null?0:g.length,!!Ge&&Er(Ge)&&kc(_t,Ge)&&(Un(g)||Pd(g)))}function Sd(g){var A=g.length,re=new g.constructor(A);return A&&typeof g[0]=="string"&&Qt.call(g,"index")&&(re.index=g.index,re.input=g.input),re}function Jm(g){return typeof g.constructor=="function"&&!Tu(g)?$l(fs(g)):{}}function Rx(g,A,re){var Ce=g.constructor;switch(A){case Ut:return _u(g);case Pe:case ae:return new Ce(+g);case Vt:return n_(g,re);case yi:case ri:case Mi:case $i:case zi:case qi:case Oi:case _n:case wn:return s_(g,re);case be:return new Ce;case Le:case Be:return new Ce(g);case ht:return r_(g);case ke:return new Ce;case Ue:return Dx(g)}}function bu(g,A){var re=A.length;if(!re)return g;var Ce=re-1;return A[Ce]=(re>1?"& ":"")+A[Ce],A=A.join(re>2?", ":" "),g.replace(Et,`{
/* [wrapped with `+A+`] */
`)}function d0(g){return Un(g)||Pd(g)||!!(Co&&g&&g[Co])}function kc(g,A){var re=typeof g;return A=A??X,!!A&&(re=="number"||re!="symbol"&&Nn.test(g))&&g>-1&&g%1==0&&g<A}function qo(g,A,re){if(!gs(re))return!1;var Ce=typeof A;return(Ce=="number"?Ur(re)&&kc(A,re.length):Ce=="string"&&A in re)?Jl(re[A],g):!1}function Qm(g,A){if(Un(g))return!1;var re=typeof g;return re=="number"||re=="symbol"||re=="boolean"||g==null||Jo(g)?!0:Hc.test(g)||!Qa.test(g)||A!=null&&g in mr(A)}function Bx(g){var A=typeof g;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?g!=="__proto__":g===null}function wu(g){var A=Ac(g),re=qe[A];if(typeof re!="function"||!(A in En.prototype))return!1;if(g===re)return!0;var Ce=ql(re);return!!Ce&&g===Ce[0]}function Ta(g){return!!ji&&ji in g}var u_=hi?Dc:qg;function Tu(g){var A=g&&g.constructor,re=typeof A=="function"&&A.prototype||Pt;return g===re}function dl(g){return g===g&&!gs(g)}function u0(g,A){return function(re){return re==null?!1:re[g]===A&&(A!==r||g in mr(re))}}function Ed(g){var A=lo(g,function(Ce){return re.size===V&&re.clear(),Ce}),re=A.cache;return A}function Rp(g,A){var re=g[1],Ce=A[1],Ge=re|Ce,Je=Ge<($|M|ie),_t=Ce==ie&&re==k||Ce==ie&&re==J&&g[7].length<=A[8]||Ce==(ie|J)&&A[7].length<=A[8]&&re==k;if(!(Je||_t))return g;Ce&$&&(g[2]=A[2],Ge|=re&$?0:S);var At=A[3];if(At){var zt=g[3];g[3]=zt?yu(zt,At,A[4]):At,g[4]=zt?Hs(g[3],Q):A[4]}return At=A[5],At&&(zt=g[5],g[5]=zt?xd(zt,At,A[6]):At,g[6]=zt?Hs(g[5],Q):A[6]),At=A[7],At&&(g[7]=At),Ce&ie&&(g[8]=g[8]==null?A[8]:Nr(g[8],A[8])),g[9]==null&&(g[9]=A[9]),g[0]=A[0],g[1]=Ge,g}function Cd(g){var A=[];if(g!=null)for(var re in mr(g))A.push(re);return A}function eg(g){return bi.call(g)}function Bp(g,A,re){return A=ns(A===r?g.length-1:A,0),function(){for(var Ce=arguments,Ge=-1,Je=ns(Ce.length-A,0),_t=ti(Je);++Ge<Je;)_t[Ge]=Ce[A+Ge];Ge=-1;for(var At=ti(A+1);++Ge<A;)At[Ge]=Ce[Ge];return At[A]=re(_t),fi(g,this,At)}}function tg(g,A){return A.length<2?g:Ft(g,Wa(A,0,-1))}function p_(g,A){for(var re=g.length,Ce=Nr(A.length,re),Ge=Bs(g);Ce--;){var Je=A[Ce];g[Ce]=kc(Je,re)?Ge[Je]:r}return g}function ig(g,A){if(!(A==="constructor"&&typeof g[A]=="function")&&A!="__proto__")return g[A]}var p0=Pc(Dp),Su=xa||function(g,A){return vs.setTimeout(g,A)},Md=Pc(Q1);function Ad(g,A,re){var Ce=A+"";return Md(g,bu(Ce,qa(d_(Ce),re)))}function Pc(g){var A=0,re=0;return function(){var Ce=fd(),Ge=L-(Ce-re);if(re=Ce,Ge>0){if(++A>=E)return arguments[0]}else A=0;return g.apply(r,arguments)}}function Eu(g,A){var re=-1,Ce=g.length,Ge=Ce-1;for(A=A===r?Ce:A;++re<A;){var Je=Yo(re,Ge),_t=g[Je];g[Je]=g[re],g[re]=_t}return g.length=A,g}var ng=Ed(function(g){var A=[];return g.charCodeAt(0)===46&&A.push(""),g.replace(at,function(re,Ce,Ge,Je){A.push(Ge?Je.replace(li,"$1"):Ce||re)}),A});function Sa(g){if(typeof g=="string"||Jo(g))return g;var A=g+"";return A=="0"&&1/g==-D?"-0":A}function Zl(g){if(g!=null){try{return Lt.call(g)}catch{}try{return g+""}catch{}}return""}function qa(g,A){return ei(Z,function(re){var Ce="_."+re[0];A&re[1]&&!Qr(g,Ce)&&g.push(Ce)}),g.sort()}function Cu(g){if(g instanceof En)return g.clone();var A=new sa(g.__wrapped__,g.__chain__);return A.__actions__=Bs(g.__actions__),A.__index__=g.__index__,A.__values__=g.__values__,A}function Zo(g,A,re){(re?qo(g,A,re):A===r)?A=1:A=ns(Cn(A),0);var Ce=g==null?0:g.length;if(!Ce||A<1)return[];for(var Ge=0,Je=0,_t=ti(bc(Ce/A));Ge<Ce;)_t[Je++]=Wa(g,Ge,Ge+=A);return _t}function ul(g){for(var A=-1,re=g==null?0:g.length,Ce=0,Ge=[];++A<re;){var Je=g[A];Je&&(Ge[Ce++]=Je)}return Ge}function rg(){var g=arguments.length;if(!g)return[];for(var A=ti(g-1),re=arguments[0],Ce=g;Ce--;)A[Ce-1]=arguments[Ce];return $n(Un(re)?Bs(re):[re],tt(A,1))}var bs=jn(function(g,A){return Wr(g)?$e(g,tt(A,1,Wr,!0)):[]}),f_=jn(function(g,A){var re=pl(A);return Wr(re)&&(re=r),Wr(g)?$e(g,tt(A,1,Wr,!0),Sn(re,2)):[]}),zp=jn(function(g,A){var re=pl(A);return Wr(re)&&(re=r),Wr(g)?$e(g,tt(A,1,Wr,!0),r,re):[]});function Kl(g,A,re){var Ce=g==null?0:g.length;return Ce?(A=re||A===r?1:Cn(A),Wa(g,A<0?0:A,Ce)):[]}function zx(g,A,re){var Ce=g==null?0:g.length;return Ce?(A=re||A===r?1:Cn(A),A=Ce-A,Wa(g,0,A<0?0:A)):[]}function Nx(g,A){return g&&g.length?s0(g,Sn(A,3),!0,!0):[]}function m_(g,A){return g&&g.length?s0(g,Sn(A,3),!0):[]}function g_(g,A,re,Ce){var Ge=g==null?0:g.length;return Ge?(re&&typeof re!="number"&&qo(g,A,re)&&(re=0,Ce=Ge),Ze(g,A,re,Ce)):[]}function jh(g,A,re){var Ce=g==null?0:g.length;if(!Ce)return-1;var Ge=re==null?0:Cn(re);return Ge<0&&(Ge=ns(Ce+Ge,0)),To(g,Sn(A,3),Ge)}function sg(g,A,re){var Ce=g==null?0:g.length;if(!Ce)return-1;var Ge=Ce-1;return re!==r&&(Ge=Cn(re),Ge=re<0?ns(Ce+Ge,0):Nr(Ge,Ce-1)),To(g,Sn(A,3),Ge,!0)}function og(g){var A=g==null?0:g.length;return A?tt(g,1):[]}function __(g){var A=g==null?0:g.length;return A?tt(g,D):[]}function y_(g,A){var re=g==null?0:g.length;return re?(A=A===r?1:Cn(A),tt(g,A)):[]}function Fx(g){for(var A=-1,re=g==null?0:g.length,Ce={};++A<re;){var Ge=g[A];Ce[Ge[0]]=Ge[1]}return Ce}function f0(g){return g&&g.length?g[0]:r}function ag(g,A,re){var Ce=g==null?0:g.length;if(!Ce)return-1;var Ge=re==null?0:Cn(re);return Ge<0&&(Ge=ns(Ce+Ge,0)),Pn(g,A,Ge)}function lg(g){var A=g==null?0:g.length;return A?Wa(g,0,-1):[]}var Ko=jn(function(g){var A=Vn(g,a0);return A.length&&A[0]===g[0]?qt(A):[]}),v_=jn(function(g){var A=pl(g),re=Vn(g,a0);return A===pl(re)?A=r:re.pop(),re.length&&re[0]===g[0]?qt(re,Sn(A,2)):[]}),jx=jn(function(g){var A=pl(g),re=Vn(g,a0);return A=typeof A=="function"?A:r,A&&re.pop(),re.length&&re[0]===g[0]?qt(re,r,A):[]});function x_(g,A){return g==null?"":du.call(g,A)}function pl(g){var A=g==null?0:g.length;return A?g[A-1]:r}function Ux(g,A,re){var Ce=g==null?0:g.length;if(!Ce)return-1;var Ge=Ce;return re!==r&&(Ge=Cn(re),Ge=Ge<0?ns(Ce+Ge,0):Nr(Ge,Ce-1)),A===A?yp(g,A,Ge):To(g,ra,Ge,!0)}function b_(g,A){return g&&g.length?ms(g,Cn(A)):r}var w_=jn(cg);function cg(g,A){return g&&g.length&&A&&A.length?Ha(g,A):g}function hg(g,A,re){return g&&g.length&&A&&A.length?Ha(g,A,Sn(re,2)):g}function sh(g,A,re){return g&&g.length&&A&&A.length?Ha(g,A,r,re):g}var Ea=Xl(function(g,A){var re=g==null?0:g.length,Ce=ne(g,A);return ao(g,Vn(A,function(Ge){return kc(Ge,re)?+Ge:Ge}).sort(o_)),Ce});function Gx(g,A){var re=[];if(!(g&&g.length))return re;var Ce=-1,Ge=[],Je=g.length;for(A=Sn(A,3);++Ce<Je;){var _t=g[Ce];A(_t,Ce,g)&&(re.push(_t),Ge.push(Ce))}return ao(g,Ge),re}function Np(g){return g==null?g:Im.call(g)}function Vx(g,A,re){var Ce=g==null?0:g.length;return Ce?(re&&typeof re!="number"&&qo(g,A,re)?(A=0,re=Ce):(A=A==null?0:Cn(A),re=re===r?Ce:Cn(re)),Wa(g,A,re)):[]}function $x(g,A){return Ip(g,A)}function Hx(g,A,re){return n0(g,A,Sn(re,2))}function Fp(g,A){var re=g==null?0:g.length;if(re){var Ce=Ip(g,A);if(Ce<re&&Jl(g[Ce],A))return Ce}return-1}function m0(g,A){return Ip(g,A,!0)}function T_(g,A,re){return n0(g,A,Sn(re,2),!0)}function kd(g,A){var re=g==null?0:g.length;if(re){var Ce=Ip(g,A,!0)-1;if(Jl(g[Ce],A))return Ce}return-1}function jp(g){return g&&g.length?Bm(g):[]}function Wx(g,A){return g&&g.length?Bm(g,Sn(A,2)):[]}function Yx(g){var A=g==null?0:g.length;return A?Wa(g,1,A):[]}function Xx(g,A,re){return g&&g.length?(A=re||A===r?1:Cn(A),Wa(g,0,A<0?0:A)):[]}function qx(g,A,re){var Ce=g==null?0:g.length;return Ce?(A=re||A===r?1:Cn(A),A=Ce-A,Wa(g,A<0?0:A,Ce)):[]}function Zx(g,A){return g&&g.length?s0(g,Sn(A,3),!1,!0):[]}function Kx(g,A){return g&&g.length?s0(g,Sn(A,3)):[]}var Jx=jn(function(g){return th(tt(g,1,Wr,!0))}),dg=jn(function(g){var A=pl(g);return Wr(A)&&(A=r),th(tt(g,1,Wr,!0),Sn(A,2))}),Qx=jn(function(g){var A=pl(g);return A=typeof A=="function"?A:r,th(tt(g,1,Wr,!0),r,A)});function Mu(g){return g&&g.length?th(g):[]}function e2(g,A){return g&&g.length?th(g,Sn(A,2)):[]}function Ms(g,A){return A=typeof A=="function"?A:r,g&&g.length?th(g,r,A):[]}function Au(g){if(!(g&&g.length))return[];var A=0;return g=en(g,function(re){if(Wr(re))return A=ns(re.length,A),!0}),$o(A,function(re){return Vn(g,Vo(re))})}function ug(g,A){if(!(g&&g.length))return[];var re=Au(g);return A==null?re:Vn(re,function(Ce){return fi(A,r,Ce)})}var g0=jn(function(g,A){return Wr(g)?$e(g,A):[]}),_0=jn(function(g){return o0(en(g,Wr))}),Up=jn(function(g){var A=pl(g);return Wr(A)&&(A=r),o0(en(g,Wr),Sn(A,2))}),S_=jn(function(g){var A=pl(g);return A=typeof A=="function"?A:r,o0(en(g,Wr),r,A)}),E_=jn(Au);function Gp(g,A){return Nm(g||[],A||[],_)}function pg(g,A){return Nm(g||[],A||[],eh)}var fg=jn(function(g){var A=g.length,re=A>1?g[A-1]:r;return re=typeof re=="function"?(g.pop(),re):r,ug(g,re)});function C_(g){var A=qe(g);return A.__chain__=!0,A}function M_(g,A){return A(g),g}function Uh(g,A){return A(g)}var t2=Xl(function(g){var A=g.length,re=A?g[0]:0,Ce=this.__wrapped__,Ge=function(Je){return ne(Je,g)};return A>1||this.__actions__.length||!(Ce instanceof En)||!kc(re)?this.thru(Ge):(Ce=Ce.slice(re,+re+(A?1:0)),Ce.__actions__.push({func:Uh,args:[Ge],thisArg:r}),new sa(Ce,this.__chain__).thru(function(Je){return A&&!Je.length&&Je.push(r),Je}))});function mg(){return C_(this)}function i2(){return new sa(this.value(),this.__chain__)}function gg(){this.__values__===r&&(this.__values__=k0(this.value()));var g=this.__index__>=this.__values__.length,A=g?r:this.__values__[this.__index__++];return{done:g,value:A}}function _g(){return this}function y0(g){for(var A,re=this;re instanceof gd;){var Ce=Cu(re);Ce.__index__=0,Ce.__values__=r,A?Ge.__wrapped__=Ce:A=Ce;var Ge=Ce;re=re.__wrapped__}return Ge.__wrapped__=g,A}function n2(){var g=this.__wrapped__;if(g instanceof En){var A=g;return this.__actions__.length&&(A=new En(this)),A=A.reverse(),A.__actions__.push({func:Uh,args:[Np],thisArg:r}),new sa(A,this.__chain__)}return this.thru(Np)}function r2(){return vd(this.__wrapped__,this.__actions__)}var s2=Mc(function(g,A,re){Qt.call(g,re)?++g[re]:B(g,re,1)});function o2(g,A,re){var Ce=Un(g)?Ln:rt;return re&&qo(g,A,re)&&(A=r),Ce(g,Sn(A,3))}function a2(g,A){var re=Un(g)?en:lt;return re(g,Sn(A,3))}var l2=c_(jh),v0=c_(sg);function c2(g,A){return tt(x0(g,A),1)}function A_(g,A){return tt(x0(g,A),D)}function ku(g,A,re){return re=re===r?1:Cn(re),tt(x0(g,A),re)}function k_(g,A){var re=Un(g)?ei:Qe;return re(g,Sn(A,3))}function P_(g,A){var re=Un(g)?Pi:et;return re(g,Sn(A,3))}var h2=Mc(function(g,A,re){Qt.call(g,re)?g[re].push(A):B(g,re,[A])});function D_(g,A,re,Ce){g=Ur(g)?g:Id(g),re=re&&!Ce?Cn(re):0;var Ge=g.length;return re<0&&(re=ns(Ge+re,0)),A0(g)?re<=Ge&&g.indexOf(A,re)>-1:!!Ge&&Pn(g,A,re)>-1}var I_=jn(function(g,A,re){var Ce=-1,Ge=typeof A=="function",Je=Ur(g)?ti(g.length):[];return Qe(g,function(_t){Je[++Ce]=Ge?fi(A,_t,re):wi(_t,A,re)}),Je}),d2=Mc(function(g,A,re){B(g,re,A)});function x0(g,A){var re=Un(g)?Vn:mo;return re(g,Sn(A,3))}function u2(g,A,re,Ce){return g==null?[]:(Un(A)||(A=A==null?[]:[A]),re=Ce?r:re,Un(re)||(re=re==null?[]:[re]),oo(g,A,re))}var yg=Mc(function(g,A,re){g[re?0:1].push(A)},function(){return[[],[]]});function b0(g,A,re){var Ce=Un(g)?Tn:Ua,Ge=arguments.length<3;return Ce(g,Sn(A,4),re,Ge,Qe)}function w0(g,A,re){var Ce=Un(g)?Js:Ua,Ge=arguments.length<3;return Ce(g,Sn(A,4),re,Ge,et)}function p2(g,A){var re=Un(g)?en:lt;return re(g,Gh(Sn(A,3)))}function f2(g){var A=Un(g)?kp:zh;return A(g)}function Vp(g,A,re){(re?qo(g,A,re):A===r)?A=1:A=Cn(A);var Ce=Un(g)?i0:hl;return Ce(g,A)}function $p(g){var A=Un(g)?Pp:Rm;return A(g)}function L_(g){if(g==null)return 0;if(Ur(g))return A0(g)?rr(g):g.length;var A=Xo(g);return A==be||A==ke?g.size:br(g).length}function Hp(g,A,re){var Ce=Un(g)?Xn:e_;return re&&qo(g,A,re)&&(A=r),Ce(g,Sn(A,3))}var O_=jn(function(g,A){if(g==null)return[];var re=A.length;return re>1&&qo(g,A[0],A[1])?A=[]:re>2&&qo(A[0],A[1],A[2])&&(A=[A[0]]),oo(g,tt(A,1),[])}),T0=Gi||function(){return vs.Date.now()};function R_(g,A){if(typeof A!="function")throw new fo(m);return g=Cn(g),function(){if(--g<1)return A.apply(this,arguments)}}function vg(g,A,re){return A=re?r:A,A=g&&A==null?g.length:A,yo(g,ie,r,r,r,r,A)}function xg(g,A){var re;if(typeof A!="function")throw new fo(m);return g=Cn(g),function(){return--g>0&&(re=A.apply(this,arguments)),g<=1&&(A=r),re}}var S0=jn(function(g,A,re){var Ce=$;if(re.length){var Ge=Hs(re,rh(S0));Ce|=U}return yo(g,Ce,A,re,Ge)}),bg=jn(function(g,A,re){var Ce=$|M;if(re.length){var Ge=Hs(re,rh(bg));Ce|=U}return yo(A,Ce,g,re,Ge)});function wg(g,A,re){A=re?r:A;var Ce=yo(g,k,r,r,r,r,r,A);return Ce.placeholder=wg.placeholder,Ce}function B_(g,A,re){A=re?r:A;var Ce=yo(g,G,r,r,r,r,r,A);return Ce.placeholder=B_.placeholder,Ce}function z_(g,A,re){var Ce,Ge,Je,_t,At,zt,mi=0,xi=!1,Ai=!1,Yi=!0;if(typeof g!="function")throw new fo(m);A=Ao(A)||0,gs(re)&&(xi=!!re.leading,Ai="maxWait"in re,Je=Ai?ns(Ao(re.maxWait)||0,A):Je,Yi="trailing"in re?!!re.trailing:Yi);function dn(zs){var vo=Ce,Oc=Ge;return Ce=Ge=r,mi=zs,_t=g.apply(Oc,vo),_t}function An(zs){return mi=zs,At=Su(or,A),xi?dn(zs):_t}function Qn(zs){var vo=zs-zt,Oc=zs-mi,af=A-vo;return Ai?Nr(af,Je-Oc):af}function In(zs){var vo=zs-zt,Oc=zs-mi;return zt===r||vo>=A||vo<0||Ai&&Oc>=Je}function or(){var zs=T0();if(In(zs))return gr(zs);At=Su(or,Qn(zs))}function gr(zs){return At=r,Yi&&Ce?dn(zs):(Ce=Ge=r,_t)}function Ca(){At!==r&&Lp(At),mi=0,Ce=zt=Ge=At=r}function Qo(){return At===r?_t:gr(T0())}function Ma(){var zs=T0(),vo=In(zs);if(Ce=arguments,Ge=this,zt=zs,vo){if(At===r)return An(zt);if(Ai)return Lp(At),At=Su(or,A),dn(zt)}return At===r&&(At=Su(or,A)),_t}return Ma.cancel=Ca,Ma.flush=Qo,Ma}var N_=jn(function(g,A){return Re(g,1,A)}),E0=jn(function(g,A,re){return Re(g,Ao(A)||0,re)});function F_(g){return yo(g,N)}function lo(g,A){if(typeof g!="function"||A!=null&&typeof A!="function")throw new fo(m);var re=function(){var Ce=arguments,Ge=A?A.apply(this,Ce):Ce[0],Je=re.cache;if(Je.has(Ge))return Je.get(Ge);var _t=g.apply(this,Ce);return re.cache=Je.set(Ge,_t)||Je,_t};return re.cache=new(lo.Cache||ll),re}lo.Cache=ll;function Gh(g){if(typeof g!="function")throw new fo(m);return function(){var A=arguments;switch(A.length){case 0:return!g.call(this);case 1:return!g.call(this,A[0]);case 2:return!g.call(this,A[0],A[1]);case 3:return!g.call(this,A[0],A[1],A[2])}return!g.apply(this,A)}}function Pu(g){return xg(2,g)}var Wp=i_(function(g,A){A=A.length==1&&Un(A[0])?Vn(A[0],ro(Sn())):Vn(tt(A,1),ro(Sn()));var re=A.length;return jn(function(Ce){for(var Ge=-1,Je=Nr(Ce.length,re);++Ge<Je;)Ce[Ge]=A[Ge].call(this,Ce[Ge]);return fi(g,this,Ce)})}),C0=jn(function(g,A){var re=Hs(A,rh(C0));return yo(g,U,r,A,re)}),Tg=jn(function(g,A){var re=Hs(A,rh(Tg));return yo(g,C,r,A,re)}),m2=Xl(function(g,A){return yo(g,J,r,r,r,A)});function g2(g,A){if(typeof g!="function")throw new fo(m);return A=A===r?A:Cn(A),jn(g,A)}function _2(g,A){if(typeof g!="function")throw new fo(m);return A=A==null?0:ns(Cn(A),0),jn(function(re){var Ce=re[A],Ge=Ec(re,0,A);return Ce&&$n(Ge,Ce),fi(g,this,Ge)})}function y2(g,A,re){var Ce=!0,Ge=!0;if(typeof g!="function")throw new fo(m);return gs(re)&&(Ce="leading"in re?!!re.leading:Ce,Ge="trailing"in re?!!re.trailing:Ge),z_(g,A,{leading:Ce,maxWait:A,trailing:Ge})}function v2(g){return vg(g,1)}function x2(g,A){return C0(Fm(A),g)}function M0(){if(!arguments.length)return[];var g=arguments[0];return Un(g)?g:[g]}function b2(g){return pe(g,K)}function j_(g,A){return A=typeof A=="function"?A:r,pe(g,K,A)}function U_(g){return pe(g,z|K)}function G_(g,A){return A=typeof A=="function"?A:r,pe(g,z|K,A)}function w2(g,A){return A==null||Ee(g,A,ks(A))}function Jl(g,A){return g===A||g!==g&&A!==A}var T2=Ya(Nt),S2=Ya(function(g,A){return g>=A}),Pd=Rt(function(){return arguments}())?Rt:function(g){return As(g)&&Qt.call(g,"callee")&&!Mr.call(g,"callee")},Un=ti.isArray,E2=je?ro(je):Yt;function Ur(g){return g!=null&&Er(g.length)&&!Dc(g)}function Wr(g){return As(g)&&Ur(g)}function Sg(g){return g===!0||g===!1||As(g)&&pi(g)==Pe}var Ql=kh||qg,Du=He?ro(He):Hi;function C2(g){return As(g)&&g.nodeType===1&&!qp(g)}function M2(g){if(g==null)return!0;if(Ur(g)&&(Un(g)||typeof g=="string"||typeof g.splice=="function"||Ql(g)||ec(g)||Pd(g)))return!g.length;var A=Xo(g);if(A==be||A==ke)return!g.size;if(Tu(g))return!br(g).length;for(var re in g)if(Qt.call(g,re))return!1;return!0}function Yp(g,A){return nn(g,A)}function A2(g,A,re){re=typeof re=="function"?re:r;var Ce=re?re(g,A):r;return Ce===r?nn(g,A,r,re):!!Ce}function Eg(g){if(!As(g))return!1;var A=pi(g);return A==ve||A==xe||typeof g.message=="string"&&typeof g.name=="string"&&!qp(g)}function Xp(g){return typeof g=="number"&&vp(g)}function Dc(g){if(!gs(g))return!1;var A=pi(g);return A==le||A==me||A==ye||A==it}function Cg(g){return typeof g=="number"&&g==Cn(g)}function Er(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=X}function gs(g){var A=typeof g;return g!=null&&(A=="object"||A=="function")}function As(g){return g!=null&&typeof g=="object"}var Mg=Ct?ro(Ct):pn;function oh(g,A){return g===A||Rn(g,A,c0(A))}function Iu(g,A,re){return re=typeof re=="function"?re:r,Rn(g,A,c0(A),re)}function V_(g){return $_(g)&&g!=+g}function k2(g){if(u_(g))throw new Dn(d);return sn(g)}function P2(g){return g===null}function D2(g){return g==null}function $_(g){return typeof g=="number"||As(g)&&pi(g)==Le}function qp(g){if(!As(g)||pi(g)!=Ne)return!1;var A=fs(g);if(A===null)return!0;var re=Qt.call(A,"constructor")&&A.constructor;return typeof re=="function"&&re instanceof re&&Lt.call(re)==fn}var Ag=vt?ro(vt):Vi;function I2(g){return Cg(g)&&g>=-X&&g<=X}var H_=Gt?ro(Gt):Sr;function A0(g){return typeof g=="string"||!Un(g)&&As(g)&&pi(g)==Be}function Jo(g){return typeof g=="symbol"||As(g)&&pi(g)==Ue}var ec=ii?ro(ii):hr;function W_(g){return g===r}function L2(g){return As(g)&&Xo(g)==nt}function O2(g){return As(g)&&pi(g)==wt}var R2=Ya(Mo),kg=Ya(function(g,A){return g<=A});function k0(g){if(!g)return[];if(Ur(g))return A0(g)?po(g):Bs(g);if(xs&&g[xs])return Mh(g[xs]());var A=Xo(g),re=A==be?vc:A==ke?sl:Id;return re(g)}function Ic(g){if(!g)return g===0?g:0;if(g=Ao(g),g===D||g===-D){var A=g<0?-1:1;return A*te}return g===g?g:0}function Cn(g){var A=Ic(g),re=A%1;return A===A?re?A-re:A:0}function Lu(g){return g?he(Cn(g),0,ce):0}function Ao(g){if(typeof g=="number")return g;if(Jo(g))return q;if(gs(g)){var A=typeof g.valueOf=="function"?g.valueOf():g;g=gs(A)?A+"":A}if(typeof g!="string")return g===0?g:+g;g=mc(g);var re=rn.test(g);return re||hn.test(g)?Eh(g.slice(2),re?2:8):on.test(g)?q:+g}function P0(g){return Qs(g,ca(g))}function D0(g){return g?he(Cn(g),-X,X):g===0?g:0}function Yr(g){return g==null?"":wa(g)}var Y_=vu(function(g,A){if(Tu(A)||Ur(A)){Qs(A,ks(A),g);return}for(var re in A)Qt.call(A,re)&&_(g,re,A[re])}),Pg=vu(function(g,A){Qs(A,ca(A),g)}),I0=vu(function(g,A,re,Ce){Qs(A,ca(A),g,Ce)}),X_=vu(function(g,A,re,Ce){Qs(A,ks(A),g,Ce)}),q_=Xl(ne);function Dg(g,A){var re=$l(g);return A==null?re:x(re,A)}var Z_=jn(function(g,A){g=mr(g);var re=-1,Ce=A.length,Ge=Ce>2?A[2]:r;for(Ge&&qo(A[0],A[1],Ge)&&(Ce=1);++re<Ce;)for(var Je=A[re],_t=ca(Je),At=-1,zt=_t.length;++At<zt;){var mi=_t[At],xi=g[mi];(xi===r||Jl(xi,Pt[mi])&&!Qt.call(g,mi))&&(g[mi]=Je[mi])}return g}),B2=jn(function(g){return g.push(r,wd),fi(Zp,r,g)});function K_(g,A){return Rs(g,Sn(A,3),gt)}function ah(g,A){return Rs(g,Sn(A,3),kt)}function J_(g,A){return g==null?g:pt(g,Sn(A,3),ca)}function Q_(g,A){return g==null?g:Tt(g,Sn(A,3),ca)}function ey(g,A){return g&&gt(g,Sn(A,3))}function ty(g,A){return g&&kt(g,Sn(A,3))}function z2(g){return g==null?[]:Wt(g,ks(g))}function N2(g){return g==null?[]:Wt(g,ca(g))}function L0(g,A,re){var Ce=g==null?r:Ft(g,A);return Ce===r?re:Ce}function iy(g,A){return g!=null&&Km(g,A,si)}function Dd(g,A){return g!=null&&Km(g,A,Xt)}var ny=nh(function(g,A,re){A!=null&&typeof A.toString!="function"&&(A=bi.call(A)),g[A]=re},Hg(Xs)),ry=nh(function(g,A,re){A!=null&&typeof A.toString!="function"&&(A=bi.call(A)),Qt.call(g,A)?g[A].push(re):g[A]=[re]},Sn),Ig=jn(wi);function ks(g){return Ur(g)?gu(g):br(g)}function ca(g){return Ur(g)?gu(g,!0):Wo(g)}function O0(g,A){var re={};return A=Sn(A,3),gt(g,function(Ce,Ge,Je){B(re,A(Ce,Ge,Je),Ce)}),re}function sy(g,A){var re={};return A=Sn(A,3),gt(g,function(Ce,Ge,Je){B(re,Ge,A(Ce,Ge,Je))}),re}var R0=vu(function(g,A,re){wr(g,A,re)}),Zp=vu(function(g,A,re,Ce){wr(g,A,re,Ce)}),F2=Xl(function(g,A){var re={};if(g==null)return re;var Ce=!1;A=Vn(A,function(Je){return Je=Wl(Je,g),Ce||(Ce=Je.length>1),Je}),Qs(g,Xm(g),re),Ce&&(re=pe(re,z|W|K,Hm));for(var Ge=A.length;Ge--;)r0(re,A[Ge]);return re});function j2(g,A){return oy(g,Gh(Sn(A)))}var U2=Xl(function(g,A){return g==null?{}:jr(g,A)});function oy(g,A){if(g==null)return{};var re=Vn(Xm(g),function(Ce){return[Ce]});return A=Sn(A),go(g,re,function(Ce,Ge){return A(Ce,Ge[0])})}function G2(g,A,re){A=Wl(A,g);var Ce=-1,Ge=A.length;for(Ge||(Ge=1,g=r);++Ce<Ge;){var Je=g==null?r:g[Sa(A[Ce])];Je===r&&(Ce=Ge,Je=re),g=Dc(Je)?Je.call(g):Je}return g}function Ou(g,A,re){return g==null?g:eh(g,A,re)}function Lg(g,A,re,Ce){return Ce=typeof Ce=="function"?Ce:r,g==null?g:eh(g,A,re,Ce)}var ay=Vm(ks),Og=Vm(ca);function V2(g,A,re){var Ce=Un(g),Ge=Ce||Ql(g)||ec(g);if(A=Sn(A,4),re==null){var Je=g&&g.constructor;Ge?re=Ce?new Je:[]:gs(g)?re=Dc(Je)?$l(fs(g)):{}:re={}}return(Ge?ei:gt)(g,function(_t,At,zt){return A(re,_t,At,zt)}),re}function Rg(g,A){return g==null?!0:r0(g,A)}function $2(g,A,re){return g==null?g:t_(g,A,Fm(re))}function Vh(g,A,re,Ce){return Ce=typeof Ce=="function"?Ce:r,g==null?g:t_(g,A,Fm(re),Ce)}function Id(g){return g==null?[]:Bl(g,ks(g))}function ly(g){return g==null?[]:Bl(g,ca(g))}function B0(g,A,re){return re===r&&(re=A,A=r),re!==r&&(re=Ao(re),re=re===re?re:0),A!==r&&(A=Ao(A),A=A===A?A:0),he(Ao(g),A,re)}function Bg(g,A,re){return A=Ic(A),re===r?(re=A,A=0):re=Ic(re),g=Ao(g),vi(g,A,re)}function H2(g,A,re){if(re&&typeof re!="boolean"&&qo(g,A,re)&&(A=re=r),re===r&&(typeof A=="boolean"?(re=A,A=r):typeof g=="boolean"&&(re=g,g=r)),g===r&&A===r?(g=0,A=1):(g=Ic(g),A===r?(A=g,g=0):A=Ic(A)),g>A){var Ce=g;g=A,A=Ce}if(re||g%1||A%1){var Ge=Hf();return Nr(g+Ge*(A-g+Xc("1e-"+((Ge+"").length-1))),A)}return Yo(g,A)}var W2=ih(function(g,A,re){return A=A.toLowerCase(),g+(re?zg(A):A)});function zg(g){return F0(Yr(g).toLowerCase())}function Ng(g){return g=Yr(g),g&&g.replace(er,ou).replace(ys,"")}function Kp(g,A,re){g=Yr(g),A=wa(A);var Ce=g.length;re=re===r?Ce:he(Cn(re),0,Ce);var Ge=re;return re-=A.length,re>=0&&g.slice(re,Ge)==A}function lh(g){return g=Yr(g),g&&uc.test(g)?g.replace(Ir,zl):g}function Fg(g){return g=Yr(g),g&&Ve.test(g)?g.replace(Oe,"\\$&"):g}var Ru=ih(function(g,A,re){return g+(re?"-":"")+A.toLowerCase()}),Bu=ih(function(g,A,re){return g+(re?" ":"")+A.toLowerCase()}),fl=Um("toLowerCase");function ml(g,A,re){g=Yr(g),A=Cn(A);var Ce=A?rr(g):0;if(!A||Ce>=A)return g;var Ge=(A-Ce)/2;return Op(pd(Ge),re)+g+Op(bc(Ge),re)}function Y2(g,A,re){g=Yr(g),A=Cn(A);var Ce=A?rr(g):0;return A&&Ce<A?g+Op(A-Ce,re):g}function cy(g,A,re){g=Yr(g),A=Cn(A);var Ce=A?rr(g):0;return A&&Ce<A?Op(A-Ce,re)+g:g}function X2(g,A,re){return re||A==null?A=0:A&&(A=+A),Dh(Yr(g).replace(ot,""),A||0)}function jg(g,A,re){return(re?qo(g,A,re):A===r)?A=1:A=Cn(A),ba(Yr(g),A)}function Lc(){var g=arguments,A=Yr(g[0]);return g.length<3?A:A.replace(g[1],g[2])}var Ld=ih(function(g,A,re){return g+(re?"_":"")+A.toLowerCase()});function hy(g,A,re){return re&&typeof re!="number"&&qo(g,A,re)&&(A=re=r),re=re===r?ce:re>>>0,re?(g=Yr(g),g&&(typeof A=="string"||A!=null&&!Ag(A))&&(A=wa(A),!A&&Ga(g))?Ec(po(g),0,re):g.split(A,re)):[]}var dy=ih(function(g,A,re){return g+(re?" ":"")+F0(A)});function q2(g,A,re){return g=Yr(g),re=re==null?0:he(Cn(re),0,g.length),A=wa(A),g.slice(re,re+A.length)==A}function z0(g,A,re){var Ce=qe.templateSettings;re&&qo(g,A,re)&&(A=r),g=Yr(g),A=I0({},A,Ce,$m);var Ge=I0({},A.imports,Ce.imports,$m),Je=ks(Ge),_t=Bl(Ge,Je),At,zt,mi=0,xi=A.interpolate||Qi,Ai="__p += '",Yi=xc((A.escape||Qi).source+"|"+xi.source+"|"+(xi===io?Ri:Qi).source+"|"+(A.evaluate||Qi).source+"|$","g"),dn="//# sourceURL="+(Qt.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Th+"]")+`
`;g.replace(Yi,function(In,or,gr,Ca,Qo,Ma){return gr||(gr=Ca),Ai+=g.slice(mi,Ma).replace(Tr,hd),or&&(At=!0,Ai+=`' +
__e(`+or+`) +
'`),Qo&&(zt=!0,Ai+=`';
`+Qo+`;
__p += '`),gr&&(Ai+=`' +
((__t = (`+gr+`)) == null ? '' : __t) +
'`),mi=Ma+In.length,In}),Ai+=`';
`;var An=Qt.call(A,"variable")&&A.variable;if(!An)Ai=`with (obj) {
`+Ai+`
}
`;else if(jt.test(An))throw new Dn(n);Ai=(zt?Ai.replace(Yn,""):Ai).replace(Ts,"$1").replace(ur,"$1;"),Ai="function("+(An||"obj")+`) {
`+(An?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(At?", __e = _.escape":"")+(zt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ai+`return __p
}`;var Qn=Vg(function(){return cr(Je,dn+"return "+Ai).apply(r,_t)});if(Qn.source=Ai,Eg(Qn))throw Qn;return Qn}function Ug(g){return Yr(g).toLowerCase()}function zu(g){return Yr(g).toUpperCase()}function Jp(g,A,re){if(g=Yr(g),g&&(re||A===r))return mc(g);if(!g||!(A=wa(A)))return g;var Ce=po(g),Ge=po(A),Je=cd(Ce,Ge),_t=_c(Ce,Ge)+1;return Ec(Ce,Je,_t).join("")}function Qp(g,A,re){if(g=Yr(g),g&&(re||A===r))return g.slice(0,Ws(g)+1);if(!g||!(A=wa(A)))return g;var Ce=po(g),Ge=_c(Ce,po(A))+1;return Ec(Ce,0,Ge).join("")}function N0(g,A,re){if(g=Yr(g),g&&(re||A===r))return g.replace(ot,"");if(!g||!(A=wa(A)))return g;var Ce=po(g),Ge=cd(Ce,po(A));return Ec(Ce,Ge).join("")}function uy(g,A){var re=F,Ce=H;if(gs(A)){var Ge="separator"in A?A.separator:Ge;re="length"in A?Cn(A.length):re,Ce="omission"in A?wa(A.omission):Ce}g=Yr(g);var Je=g.length;if(Ga(g)){var _t=po(g);Je=_t.length}if(re>=Je)return g;var At=re-rr(Ce);if(At<1)return Ce;var zt=_t?Ec(_t,0,At).join(""):g.slice(0,At);if(Ge===r)return zt+Ce;if(_t&&(At+=zt.length-At),Ag(Ge)){if(g.slice(At).search(Ge)){var mi,xi=zt;for(Ge.global||(Ge=xc(Ge.source,Yr(_i.exec(Ge))+"g")),Ge.lastIndex=0;mi=Ge.exec(xi);)var Ai=mi.index;zt=zt.slice(0,Ai===r?At:Ai)}}else if(g.indexOf(wa(Ge),At)!=At){var Yi=zt.lastIndexOf(Ge);Yi>-1&&(zt=zt.slice(0,Yi))}return zt+Ce}function ef(g){return g=Yr(g),g&&za.test(g)?g.replace(Dr,So):g}var Gg=ih(function(g,A,re){return g+(re?" ":"")+A.toUpperCase()}),F0=Um("toUpperCase");function Od(g,A,re){return g=Yr(g),A=re?r:A,A===r?Nl(g)?lu(g):Ol(g):g.match(A)||[]}var Vg=jn(function(g,A){try{return fi(g,r,A)}catch(re){return Eg(re)?re:new Dn(re)}}),$g=Xl(function(g,A){return ei(A,function(re){re=Sa(re),B(g,re,S0(g[re],g))}),g});function py(g){var A=g==null?0:g.length,re=Sn();return g=A?Vn(g,function(Ce){if(typeof Ce[1]!="function")throw new fo(m);return[re(Ce[0]),Ce[1]]}):[],jn(function(Ce){for(var Ge=-1;++Ge<A;){var Je=g[Ge];if(fi(Je[0],this,Ce))return fi(Je[1],this,Ce)}})}function Z2(g){return Me(pe(g,z))}function Hg(g){return function(){return g}}function fy(g,A){return g==null||g!==g?A:g}var Rd=Cs(),K2=Cs(!0);function Xs(g){return g}function Wg(g){return Ar(typeof g=="function"?g:pe(g,z))}function tf(g){return $a(pe(g,z))}function nf(g,A){return Fr(g,pe(A,z))}var rf=jn(function(g,A){return function(re){return wi(re,g,A)}}),sf=jn(function(g,A){return function(re){return wi(g,re,A)}});function Nu(g,A,re){var Ce=ks(A),Ge=Wt(A,Ce);re==null&&!(gs(A)&&(Ge.length||!Ce.length))&&(re=A,A=g,g=this,Ge=Wt(A,ks(A)));var Je=!(gs(re)&&"chain"in re)||!!re.chain,_t=Dc(g);return ei(Ge,function(At){var zt=A[At];g[At]=zt,_t&&(g.prototype[At]=function(){var mi=this.__chain__;if(Je||mi){var xi=g(this.__wrapped__),Ai=xi.__actions__=Bs(this.__actions__);return Ai.push({func:zt,args:arguments,thisArg:g}),xi.__chain__=mi,xi}return zt.apply(g,$n([this.value()],arguments))})}),g}function J2(){return vs._===this&&(vs._=vn),this}function Yg(){}function Fu(g){return g=Cn(g),jn(function(A){return ms(A,g)})}var j0=Kn(Vn),Q2=Kn(Ln),my=Kn(Xn);function Xg(g){return Qm(g)?Vo(Sa(g)):yd(g)}function eb(g){return function(A){return g==null?r:Ft(g,A)}}var gy=Yl(),tb=Yl(!0);function U0(){return[]}function qg(){return!1}function _y(){return{}}function ib(){return""}function nb(){return!0}function G0(g,A){if(g=Cn(g),g<1||g>X)return[];var re=ce,Ce=Nr(g,ce);A=Sn(A),g-=ce;for(var Ge=$o(Ce,A);++re<g;)A(re);return Ge}function V0(g){return Un(g)?Vn(g,Sa):Jo(g)?[g]:Bs(ng(Yr(g)))}function $0(g){var A=++Si;return Yr(g)+A}var rb=bd(function(g,A){return g+A},0),Zg=la("ceil"),Kg=bd(function(g,A){return g/A},1),$h=la("floor");function sb(g){return g&&g.length?Ye(g,Xs,Nt):r}function Jg(g,A){return g&&g.length?Ye(g,Sn(A,2),Nt):r}function yy(g){return uo(g,Xs)}function H0(g,A){return uo(g,Sn(A,2))}function ob(g){return g&&g.length?Ye(g,Xs,Mo):r}function ab(g,A){return g&&g.length?Ye(g,Sn(A,2),Mo):r}var lb=bd(function(g,A){return g*A},1),cb=la("round"),Qg=bd(function(g,A){return g-A},0);function hb(g){return g&&g.length?fr(g,Xs):0}function of(g,A){return g&&g.length?fr(g,Sn(A,2)):0}return qe.after=R_,qe.ary=vg,qe.assign=Y_,qe.assignIn=Pg,qe.assignInWith=I0,qe.assignWith=X_,qe.at=q_,qe.before=xg,qe.bind=S0,qe.bindAll=$g,qe.bindKey=bg,qe.castArray=M0,qe.chain=C_,qe.chunk=Zo,qe.compact=ul,qe.concat=rg,qe.cond=py,qe.conforms=Z2,qe.constant=Hg,qe.countBy=s2,qe.create=Dg,qe.curry=wg,qe.curryRight=B_,qe.debounce=z_,qe.defaults=Z_,qe.defaultsDeep=B2,qe.defer=N_,qe.delay=E0,qe.difference=bs,qe.differenceBy=f_,qe.differenceWith=zp,qe.drop=Kl,qe.dropRight=zx,qe.dropRightWhile=Nx,qe.dropWhile=m_,qe.fill=g_,qe.filter=a2,qe.flatMap=c2,qe.flatMapDeep=A_,qe.flatMapDepth=ku,qe.flatten=og,qe.flattenDeep=__,qe.flattenDepth=y_,qe.flip=F_,qe.flow=Rd,qe.flowRight=K2,qe.fromPairs=Fx,qe.functions=z2,qe.functionsIn=N2,qe.groupBy=h2,qe.initial=lg,qe.intersection=Ko,qe.intersectionBy=v_,qe.intersectionWith=jx,qe.invert=ny,qe.invertBy=ry,qe.invokeMap=I_,qe.iteratee=Wg,qe.keyBy=d2,qe.keys=ks,qe.keysIn=ca,qe.map=x0,qe.mapKeys=O0,qe.mapValues=sy,qe.matches=tf,qe.matchesProperty=nf,qe.memoize=lo,qe.merge=R0,qe.mergeWith=Zp,qe.method=rf,qe.methodOf=sf,qe.mixin=Nu,qe.negate=Gh,qe.nthArg=Fu,qe.omit=F2,qe.omitBy=j2,qe.once=Pu,qe.orderBy=u2,qe.over=j0,qe.overArgs=Wp,qe.overEvery=Q2,qe.overSome=my,qe.partial=C0,qe.partialRight=Tg,qe.partition=yg,qe.pick=U2,qe.pickBy=oy,qe.property=Xg,qe.propertyOf=eb,qe.pull=w_,qe.pullAll=cg,qe.pullAllBy=hg,qe.pullAllWith=sh,qe.pullAt=Ea,qe.range=gy,qe.rangeRight=tb,qe.rearg=m2,qe.reject=p2,qe.remove=Gx,qe.rest=g2,qe.reverse=Np,qe.sampleSize=Vp,qe.set=Ou,qe.setWith=Lg,qe.shuffle=$p,qe.slice=Vx,qe.sortBy=O_,qe.sortedUniq=jp,qe.sortedUniqBy=Wx,qe.split=hy,qe.spread=_2,qe.tail=Yx,qe.take=Xx,qe.takeRight=qx,qe.takeRightWhile=Zx,qe.takeWhile=Kx,qe.tap=M_,qe.throttle=y2,qe.thru=Uh,qe.toArray=k0,qe.toPairs=ay,qe.toPairsIn=Og,qe.toPath=V0,qe.toPlainObject=P0,qe.transform=V2,qe.unary=v2,qe.union=Jx,qe.unionBy=dg,qe.unionWith=Qx,qe.uniq=Mu,qe.uniqBy=e2,qe.uniqWith=Ms,qe.unset=Rg,qe.unzip=Au,qe.unzipWith=ug,qe.update=$2,qe.updateWith=Vh,qe.values=Id,qe.valuesIn=ly,qe.without=g0,qe.words=Od,qe.wrap=x2,qe.xor=_0,qe.xorBy=Up,qe.xorWith=S_,qe.zip=E_,qe.zipObject=Gp,qe.zipObjectDeep=pg,qe.zipWith=fg,qe.entries=ay,qe.entriesIn=Og,qe.extend=Pg,qe.extendWith=I0,Nu(qe,qe),qe.add=rb,qe.attempt=Vg,qe.camelCase=W2,qe.capitalize=zg,qe.ceil=Zg,qe.clamp=B0,qe.clone=b2,qe.cloneDeep=U_,qe.cloneDeepWith=G_,qe.cloneWith=j_,qe.conformsTo=w2,qe.deburr=Ng,qe.defaultTo=fy,qe.divide=Kg,qe.endsWith=Kp,qe.eq=Jl,qe.escape=lh,qe.escapeRegExp=Fg,qe.every=o2,qe.find=l2,qe.findIndex=jh,qe.findKey=K_,qe.findLast=v0,qe.findLastIndex=sg,qe.findLastKey=ah,qe.floor=$h,qe.forEach=k_,qe.forEachRight=P_,qe.forIn=J_,qe.forInRight=Q_,qe.forOwn=ey,qe.forOwnRight=ty,qe.get=L0,qe.gt=T2,qe.gte=S2,qe.has=iy,qe.hasIn=Dd,qe.head=f0,qe.identity=Xs,qe.includes=D_,qe.indexOf=ag,qe.inRange=Bg,qe.invoke=Ig,qe.isArguments=Pd,qe.isArray=Un,qe.isArrayBuffer=E2,qe.isArrayLike=Ur,qe.isArrayLikeObject=Wr,qe.isBoolean=Sg,qe.isBuffer=Ql,qe.isDate=Du,qe.isElement=C2,qe.isEmpty=M2,qe.isEqual=Yp,qe.isEqualWith=A2,qe.isError=Eg,qe.isFinite=Xp,qe.isFunction=Dc,qe.isInteger=Cg,qe.isLength=Er,qe.isMap=Mg,qe.isMatch=oh,qe.isMatchWith=Iu,qe.isNaN=V_,qe.isNative=k2,qe.isNil=D2,qe.isNull=P2,qe.isNumber=$_,qe.isObject=gs,qe.isObjectLike=As,qe.isPlainObject=qp,qe.isRegExp=Ag,qe.isSafeInteger=I2,qe.isSet=H_,qe.isString=A0,qe.isSymbol=Jo,qe.isTypedArray=ec,qe.isUndefined=W_,qe.isWeakMap=L2,qe.isWeakSet=O2,qe.join=x_,qe.kebabCase=Ru,qe.last=pl,qe.lastIndexOf=Ux,qe.lowerCase=Bu,qe.lowerFirst=fl,qe.lt=R2,qe.lte=kg,qe.max=sb,qe.maxBy=Jg,qe.mean=yy,qe.meanBy=H0,qe.min=ob,qe.minBy=ab,qe.stubArray=U0,qe.stubFalse=qg,qe.stubObject=_y,qe.stubString=ib,qe.stubTrue=nb,qe.multiply=lb,qe.nth=b_,qe.noConflict=J2,qe.noop=Yg,qe.now=T0,qe.pad=ml,qe.padEnd=Y2,qe.padStart=cy,qe.parseInt=X2,qe.random=H2,qe.reduce=b0,qe.reduceRight=w0,qe.repeat=jg,qe.replace=Lc,qe.result=G2,qe.round=cb,qe.runInContext=It,qe.sample=f2,qe.size=L_,qe.snakeCase=Ld,qe.some=Hp,qe.sortedIndex=$x,qe.sortedIndexBy=Hx,qe.sortedIndexOf=Fp,qe.sortedLastIndex=m0,qe.sortedLastIndexBy=T_,qe.sortedLastIndexOf=kd,qe.startCase=dy,qe.startsWith=q2,qe.subtract=Qg,qe.sum=hb,qe.sumBy=of,qe.template=z0,qe.times=G0,qe.toFinite=Ic,qe.toInteger=Cn,qe.toLength=Lu,qe.toLower=Ug,qe.toNumber=Ao,qe.toSafeInteger=D0,qe.toString=Yr,qe.toUpper=zu,qe.trim=Jp,qe.trimEnd=Qp,qe.trimStart=N0,qe.truncate=uy,qe.unescape=ef,qe.uniqueId=$0,qe.upperCase=Gg,qe.upperFirst=F0,qe.each=k_,qe.eachRight=P_,qe.first=f0,Nu(qe,function(){var g={};return gt(qe,function(A,re){Qt.call(qe.prototype,re)||(g[re]=A)}),g}(),{chain:!1}),qe.VERSION=l,ei(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){qe[g].placeholder=qe}),ei(["drop","take"],function(g,A){En.prototype[g]=function(re){re=re===r?1:ns(Cn(re),0);var Ce=this.__filtered__&&!A?new En(this):this.clone();return Ce.__filtered__?Ce.__takeCount__=Nr(re,Ce.__takeCount__):Ce.__views__.push({size:Nr(re,ce),type:g+(Ce.__dir__<0?"Right":"")}),Ce},En.prototype[g+"Right"]=function(re){return this.reverse()[g](re).reverse()}}),ei(["filter","map","takeWhile"],function(g,A){var re=A+1,Ce=re==f||re==b;En.prototype[g]=function(Ge){var Je=this.clone();return Je.__iteratees__.push({iteratee:Sn(Ge,3),type:re}),Je.__filtered__=Je.__filtered__||Ce,Je}}),ei(["head","last"],function(g,A){var re="take"+(A?"Right":"");En.prototype[g]=function(){return this[re](1).value()[0]}}),ei(["initial","tail"],function(g,A){var re="drop"+(A?"":"Right");En.prototype[g]=function(){return this.__filtered__?new En(this):this[re](1)}}),En.prototype.compact=function(){return this.filter(Xs)},En.prototype.find=function(g){return this.filter(g).head()},En.prototype.findLast=function(g){return this.reverse().find(g)},En.prototype.invokeMap=jn(function(g,A){return typeof g=="function"?new En(this):this.map(function(re){return wi(re,g,A)})}),En.prototype.reject=function(g){return this.filter(Gh(Sn(g)))},En.prototype.slice=function(g,A){g=Cn(g);var re=this;return re.__filtered__&&(g>0||A<0)?new En(re):(g<0?re=re.takeRight(-g):g&&(re=re.drop(g)),A!==r&&(A=Cn(A),re=A<0?re.dropRight(-A):re.take(A-g)),re)},En.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},En.prototype.toArray=function(){return this.take(ce)},gt(En.prototype,function(g,A){var re=/^(?:filter|find|map|reject)|While$/.test(A),Ce=/^(?:head|last)$/.test(A),Ge=qe[Ce?"take"+(A=="last"?"Right":""):A],Je=Ce||/^find/.test(A);Ge&&(qe.prototype[A]=function(){var _t=this.__wrapped__,At=Ce?[1]:arguments,zt=_t instanceof En,mi=At[0],xi=zt||Un(_t),Ai=function(or){var gr=Ge.apply(qe,$n([or],At));return Ce&&Yi?gr[0]:gr};xi&&re&&typeof mi=="function"&&mi.length!=1&&(zt=xi=!1);var Yi=this.__chain__,dn=!!this.__actions__.length,An=Je&&!Yi,Qn=zt&&!dn;if(!Je&&xi){_t=Qn?_t:new En(this);var In=g.apply(_t,At);return In.__actions__.push({func:Uh,args:[Ai],thisArg:r}),new sa(In,Yi)}return An&&Qn?g.apply(this,At):(In=this.thru(Ai),An?Ce?In.value()[0]:In.value():In)})}),ei(["pop","push","shift","sort","splice","unshift"],function(g){var A=Ke[g],re=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",Ce=/^(?:pop|shift)$/.test(g);qe.prototype[g]=function(){var Ge=arguments;if(Ce&&!this.__chain__){var Je=this.value();return A.apply(Un(Je)?Je:[],Ge)}return this[re](function(_t){return A.apply(Un(_t)?_t:[],Ge)})}}),gt(En.prototype,function(g,A){var re=qe[A];if(re){var Ce=re.name+"";Qt.call(Kc,Ce)||(Kc[Ce]=[]),Kc[Ce].push({name:A,func:re})}}),Kc[cn(r,M).name]=[{name:"wrapper",func:r}],En.prototype.clone=Lm,En.prototype.reverse=Tp,En.prototype.value=Om,qe.prototype.at=t2,qe.prototype.chain=mg,qe.prototype.commit=i2,qe.prototype.next=gg,qe.prototype.plant=y0,qe.prototype.reverse=n2,qe.prototype.toJSON=qe.prototype.valueOf=qe.prototype.value=r2,qe.prototype.first=qe.prototype.head,xs&&(qe.prototype[xs]=_g),qe},Eo=cu();oe?((oe.exports=Eo)._=Eo,j._=Eo):vs._=Eo}).call(Oo)})(jA,ev);const UA=ev;var Qb={},GA={get exports(){return Qb},set exports(e){Qb=e}};/*!
 * jQuery JavaScript Library v3.6.3
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2022-12-20T21:28Z
 */(function(e){(function(t,r){e.exports=t.document?r(t,!0):function(l){if(!l.document)throw new Error("jQuery requires a window with a document");return r(l)}})(typeof window<"u"?window:Oo,function(t,r){var l=[],c=Object.getPrototypeOf,d=l.slice,m=l.flat?function(j){return l.flat.call(j)}:function(j){return l.concat.apply([],j)},n=l.push,T=l.indexOf,V={},Q=V.toString,z=V.hasOwnProperty,W=z.toString,K=W.call(Object),I={},O=function(oe){return typeof oe=="function"&&typeof oe.nodeType!="number"&&typeof oe.item!="function"},$=function(oe){return oe!=null&&oe===oe.window},M=t.document,S={type:!0,src:!0,nonce:!0,noModule:!0};function k(j,oe,ge){ge=ge||M;var Se,ze,je=ge.createElement("script");if(je.text=j,oe)for(Se in S)ze=oe[Se]||oe.getAttribute&&oe.getAttribute(Se),ze&&je.setAttribute(Se,ze);ge.head.appendChild(je).parentNode.removeChild(je)}function G(j){return j==null?j+"":typeof j=="object"||typeof j=="function"?V[Q.call(j)]||"object":typeof j}var U="3.6.3",C=function(j,oe){return new C.fn.init(j,oe)};C.fn=C.prototype={jquery:U,constructor:C,length:0,toArray:function(){return d.call(this)},get:function(j){return j==null?d.call(this):j<0?this[j+this.length]:this[j]},pushStack:function(j){var oe=C.merge(this.constructor(),j);return oe.prevObject=this,oe},each:function(j){return C.each(this,j)},map:function(j){return this.pushStack(C.map(this,function(oe,ge){return j.call(oe,ge,oe)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(j,oe){return(oe+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(j,oe){return oe%2}))},eq:function(j){var oe=this.length,ge=+j+(j<0?oe:0);return this.pushStack(ge>=0&&ge<oe?[this[ge]]:[])},end:function(){return this.prevObject||this.constructor()},push:n,sort:l.sort,splice:l.splice},C.extend=C.fn.extend=function(){var j,oe,ge,Se,ze,je,He=arguments[0]||{},Ct=1,vt=arguments.length,Gt=!1;for(typeof He=="boolean"&&(Gt=He,He=arguments[Ct]||{},Ct++),typeof He!="object"&&!O(He)&&(He={}),Ct===vt&&(He=this,Ct--);Ct<vt;Ct++)if((j=arguments[Ct])!=null)for(oe in j)Se=j[oe],!(oe==="__proto__"||He===Se)&&(Gt&&Se&&(C.isPlainObject(Se)||(ze=Array.isArray(Se)))?(ge=He[oe],ze&&!Array.isArray(ge)?je=[]:!ze&&!C.isPlainObject(ge)?je={}:je=ge,ze=!1,He[oe]=C.extend(Gt,je,Se)):Se!==void 0&&(He[oe]=Se));return He},C.extend({expando:"jQuery"+(U+Math.random()).replace(/\D/g,""),isReady:!0,error:function(j){throw new Error(j)},noop:function(){},isPlainObject:function(j){var oe,ge;return!j||Q.call(j)!=="[object Object]"?!1:(oe=c(j),oe?(ge=z.call(oe,"constructor")&&oe.constructor,typeof ge=="function"&&W.call(ge)===K):!0)},isEmptyObject:function(j){var oe;for(oe in j)return!1;return!0},globalEval:function(j,oe,ge){k(j,{nonce:oe&&oe.nonce},ge)},each:function(j,oe){var ge,Se=0;if(ie(j))for(ge=j.length;Se<ge&&oe.call(j[Se],Se,j[Se])!==!1;Se++);else for(Se in j)if(oe.call(j[Se],Se,j[Se])===!1)break;return j},makeArray:function(j,oe){var ge=oe||[];return j!=null&&(ie(Object(j))?C.merge(ge,typeof j=="string"?[j]:j):n.call(ge,j)),ge},inArray:function(j,oe,ge){return oe==null?-1:T.call(oe,j,ge)},merge:function(j,oe){for(var ge=+oe.length,Se=0,ze=j.length;Se<ge;Se++)j[ze++]=oe[Se];return j.length=ze,j},grep:function(j,oe,ge){for(var Se,ze=[],je=0,He=j.length,Ct=!ge;je<He;je++)Se=!oe(j[je],je),Se!==Ct&&ze.push(j[je]);return ze},map:function(j,oe,ge){var Se,ze,je=0,He=[];if(ie(j))for(Se=j.length;je<Se;je++)ze=oe(j[je],je,ge),ze!=null&&He.push(ze);else for(je in j)ze=oe(j[je],je,ge),ze!=null&&He.push(ze);return m(He)},guid:1,support:I}),typeof Symbol=="function"&&(C.fn[Symbol.iterator]=l[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(j,oe){V["[object "+oe+"]"]=oe.toLowerCase()});function ie(j){var oe=!!j&&"length"in j&&j.length,ge=G(j);return O(j)||$(j)?!1:ge==="array"||oe===0||typeof oe=="number"&&oe>0&&oe-1 in j}var J=function(j){var oe,ge,Se,ze,je,He,Ct,vt,Gt,ii,fi,Kt,ei,Pi,Ln,en,Qr,zr,Vn,$n="sizzle"+1*new Date,Tn=j.document,Js=0,Xn=0,Cr=po(),ya=po(),Ol=po(),Rs=po(),To=function(Ke,xt){return Ke===xt&&(fi=!0),0},Pn={}.hasOwnProperty,$s=[],ra=$s.pop,uo=$s.push,Vo=$s.push,Rl=$s.slice,Ua=function(Ke,xt){for(var Pt=0,hi=Ke.length;Pt<hi;Pt++)if(Ke[Pt]===xt)return Pt;return-1},Ch="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",fr="[\\x20\\t\\r\\n\\f]",$o="(?:\\\\[\\da-fA-F]{1,6}"+fr+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",qc="\\["+fr+"*("+$o+")(?:"+fr+"*([*^$|!~]?=)"+fr+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+$o+"))|)"+fr+"*\\]",mc=":("+$o+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+qc+")*)|.*)\\)|)",ro=new RegExp(fr+"+","g"),Bl=new RegExp("^"+fr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+fr+"+$","g"),gc=new RegExp("^"+fr+"*,"+fr+"*"),cd=new RegExp("^"+fr+"*([>+~]|"+fr+")"+fr+"*"),_c=new RegExp(fr+"|>"),yc=new RegExp(mc),ou=new RegExp("^"+$o+"$"),zl={ID:new RegExp("^#("+$o+")"),CLASS:new RegExp("^\\.("+$o+")"),TAG:new RegExp("^("+$o+"|[*])"),ATTR:new RegExp("^"+qc),PSEUDO:new RegExp("^"+mc),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+fr+"*(even|odd|(([+-]|)(\\d*)n|)"+fr+"*(?:([+-]|)"+fr+"*(\\d+)|))"+fr+"*\\)|)","i"),bool:new RegExp("^(?:"+Ch+")$","i"),needsContext:new RegExp("^"+fr+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+fr+"*((?:-\\d)?\\d*)"+fr+"*\\)|)(?=[^-]|$)","i")},hd=/HTML$/i,va=/^(?:input|select|textarea|button)$/i,Ga=/^h\d$/i,Nl=/^[^{]+\{\s*\[native \w/,Mh=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vc=/[+~]/,Ho=new RegExp("\\\\[\\da-fA-F]{1,6}"+fr+"?|\\\\([^\\r\\n\\f])","g"),Hs=function(Ke,xt){var Pt="0x"+Ke.slice(1)-65536;return xt||(Pt<0?String.fromCharCode(Pt+65536):String.fromCharCode(Pt>>10|55296,Pt&1023|56320))},sl=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,dd=function(Ke,xt){return xt?Ke==="\0"?"�":Ke.slice(0,-1)+"\\"+Ke.charCodeAt(Ke.length-1).toString(16)+" ":"\\"+Ke},Zc=function(){Kt()},yp=Dn(function(Ke){return Ke.disabled===!0&&Ke.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Vo.apply($s=Rl.call(Tn.childNodes),Tn.childNodes),$s[Tn.childNodes.length].nodeType}catch{Vo={apply:$s.length?function(xt,Pt){uo.apply(xt,Rl.call(Pt))}:function(xt,Pt){for(var hi=xt.length,Lt=0;xt[hi++]=Pt[Lt++];);xt.length=hi-1}}}function rr(Ke,xt,Pt,hi){var Lt,Qt,Si,ji,bi,fn,vn,bn=xt&&xt.ownerDocument,On=xt?xt.nodeType:9;if(Pt=Pt||[],typeof Ke!="string"||!Ke||On!==1&&On!==9&&On!==11)return Pt;if(!hi&&(Kt(xt),xt=xt||ei,Ln)){if(On!==11&&(bi=Mh.exec(Ke)))if(Lt=bi[1]){if(On===9)if(Si=xt.getElementById(Lt)){if(Si.id===Lt)return Pt.push(Si),Pt}else return Pt;else if(bn&&(Si=bn.getElementById(Lt))&&Vn(xt,Si)&&Si.id===Lt)return Pt.push(Si),Pt}else{if(bi[2])return Vo.apply(Pt,xt.getElementsByTagName(Ke)),Pt;if((Lt=bi[3])&&ge.getElementsByClassName&&xt.getElementsByClassName)return Vo.apply(Pt,xt.getElementsByClassName(Lt)),Pt}if(ge.qsa&&!Rs[Ke+" "]&&(!en||!en.test(Ke))&&(On!==1||xt.nodeName.toLowerCase()!=="object")){if(vn=Ke,bn=xt,On===1&&(_c.test(Ke)||cd.test(Ke))){for(bn=vc.test(Ke)&&ci(xt.parentNode)||xt,(bn!==xt||!ge.scope)&&((ji=xt.getAttribute("id"))?ji=ji.replace(sl,dd):xt.setAttribute("id",ji=$n)),fn=He(Ke),Qt=fn.length;Qt--;)fn[Qt]=(ji?"#"+ji:":scope")+" "+Zi(fn[Qt]);vn=fn.join(",")}try{if(ge.cssSupportsSelector&&!CSS.supports("selector(:is("+vn+"))"))throw new Error;return Vo.apply(Pt,bn.querySelectorAll(vn)),Pt}catch{Rs(Ke,!0)}finally{ji===$n&&xt.removeAttribute("id")}}}return vt(Ke.replace(Bl,"$1"),xt,Pt,hi)}function po(){var Ke=[];function xt(Pt,hi){return Ke.push(Pt+" ")>Se.cacheLength&&delete xt[Ke.shift()],xt[Pt+" "]=hi}return xt}function Ws(Ke){return Ke[$n]=!0,Ke}function So(Ke){var xt=ei.createElement("fieldset");try{return!!Ke(xt)}catch{return!1}finally{xt.parentNode&&xt.parentNode.removeChild(xt),xt=null}}function Fl(Ke,xt){for(var Pt=Ke.split("|"),hi=Pt.length;hi--;)Se.attrHandle[Pt[hi]]=xt}function au(Ke,xt){var Pt=xt&&Ke,hi=Pt&&Ke.nodeType===1&&xt.nodeType===1&&Ke.sourceIndex-xt.sourceIndex;if(hi)return hi;if(Pt){for(;Pt=Pt.nextSibling;)if(Pt===xt)return-1}return Ke?1:-1}function lu(Ke){return function(xt){var Pt=xt.nodeName.toLowerCase();return Pt==="input"&&xt.type===Ke}}function cu(Ke){return function(xt){var Pt=xt.nodeName.toLowerCase();return(Pt==="input"||Pt==="button")&&xt.type===Ke}}function Eo(Ke){return function(xt){return"form"in xt?xt.parentNode&&xt.disabled===!1?"label"in xt?"label"in xt.parentNode?xt.parentNode.disabled===Ke:xt.disabled===Ke:xt.isDisabled===Ke||xt.isDisabled!==!Ke&&yp(xt)===Ke:xt.disabled===Ke:"label"in xt?xt.disabled===Ke:!1}}function It(Ke){return Ws(function(xt){return xt=+xt,Ws(function(Pt,hi){for(var Lt,Qt=Ke([],Pt.length,xt),Si=Qt.length;Si--;)Pt[Lt=Qt[Si]]&&(Pt[Lt]=!(hi[Lt]=Pt[Lt]))})})}function ci(Ke){return Ke&&typeof Ke.getElementsByTagName<"u"&&Ke}ge=rr.support={},je=rr.isXML=function(Ke){var xt=Ke&&Ke.namespaceURI,Pt=Ke&&(Ke.ownerDocument||Ke).documentElement;return!hd.test(xt||Pt&&Pt.nodeName||"HTML")},Kt=rr.setDocument=function(Ke){var xt,Pt,hi=Ke?Ke.ownerDocument||Ke:Tn;return hi==ei||hi.nodeType!==9||!hi.documentElement||(ei=hi,Pi=ei.documentElement,Ln=!je(ei),Tn!=ei&&(Pt=ei.defaultView)&&Pt.top!==Pt&&(Pt.addEventListener?Pt.addEventListener("unload",Zc,!1):Pt.attachEvent&&Pt.attachEvent("onunload",Zc)),ge.scope=So(function(Lt){return Pi.appendChild(Lt).appendChild(ei.createElement("div")),typeof Lt.querySelectorAll<"u"&&!Lt.querySelectorAll(":scope fieldset div").length}),ge.cssSupportsSelector=So(function(){return CSS.supports("selector(*)")&&ei.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),ge.attributes=So(function(Lt){return Lt.className="i",!Lt.getAttribute("className")}),ge.getElementsByTagName=So(function(Lt){return Lt.appendChild(ei.createComment("")),!Lt.getElementsByTagName("*").length}),ge.getElementsByClassName=Nl.test(ei.getElementsByClassName),ge.getById=So(function(Lt){return Pi.appendChild(Lt).id=$n,!ei.getElementsByName||!ei.getElementsByName($n).length}),ge.getById?(Se.filter.ID=function(Lt){var Qt=Lt.replace(Ho,Hs);return function(Si){return Si.getAttribute("id")===Qt}},Se.find.ID=function(Lt,Qt){if(typeof Qt.getElementById<"u"&&Ln){var Si=Qt.getElementById(Lt);return Si?[Si]:[]}}):(Se.filter.ID=function(Lt){var Qt=Lt.replace(Ho,Hs);return function(Si){var ji=typeof Si.getAttributeNode<"u"&&Si.getAttributeNode("id");return ji&&ji.value===Qt}},Se.find.ID=function(Lt,Qt){if(typeof Qt.getElementById<"u"&&Ln){var Si,ji,bi,fn=Qt.getElementById(Lt);if(fn){if(Si=fn.getAttributeNode("id"),Si&&Si.value===Lt)return[fn];for(bi=Qt.getElementsByName(Lt),ji=0;fn=bi[ji++];)if(Si=fn.getAttributeNode("id"),Si&&Si.value===Lt)return[fn]}return[]}}),Se.find.TAG=ge.getElementsByTagName?function(Lt,Qt){if(typeof Qt.getElementsByTagName<"u")return Qt.getElementsByTagName(Lt);if(ge.qsa)return Qt.querySelectorAll(Lt)}:function(Lt,Qt){var Si,ji=[],bi=0,fn=Qt.getElementsByTagName(Lt);if(Lt==="*"){for(;Si=fn[bi++];)Si.nodeType===1&&ji.push(Si);return ji}return fn},Se.find.CLASS=ge.getElementsByClassName&&function(Lt,Qt){if(typeof Qt.getElementsByClassName<"u"&&Ln)return Qt.getElementsByClassName(Lt)},Qr=[],en=[],(ge.qsa=Nl.test(ei.querySelectorAll))&&(So(function(Lt){var Qt;Pi.appendChild(Lt).innerHTML="<a id='"+$n+"'></a><select id='"+$n+"-\r\\' msallowcapture=''><option selected=''></option></select>",Lt.querySelectorAll("[msallowcapture^='']").length&&en.push("[*^$]="+fr+`*(?:''|"")`),Lt.querySelectorAll("[selected]").length||en.push("\\["+fr+"*(?:value|"+Ch+")"),Lt.querySelectorAll("[id~="+$n+"-]").length||en.push("~="),Qt=ei.createElement("input"),Qt.setAttribute("name",""),Lt.appendChild(Qt),Lt.querySelectorAll("[name='']").length||en.push("\\["+fr+"*name"+fr+"*="+fr+`*(?:''|"")`),Lt.querySelectorAll(":checked").length||en.push(":checked"),Lt.querySelectorAll("a#"+$n+"+*").length||en.push(".#.+[+~]"),Lt.querySelectorAll("\\\f"),en.push("[\\r\\n\\f]")}),So(function(Lt){Lt.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Qt=ei.createElement("input");Qt.setAttribute("type","hidden"),Lt.appendChild(Qt).setAttribute("name","D"),Lt.querySelectorAll("[name=d]").length&&en.push("name"+fr+"*[*^$|!~]?="),Lt.querySelectorAll(":enabled").length!==2&&en.push(":enabled",":disabled"),Pi.appendChild(Lt).disabled=!0,Lt.querySelectorAll(":disabled").length!==2&&en.push(":enabled",":disabled"),Lt.querySelectorAll("*,:x"),en.push(",.*:")})),(ge.matchesSelector=Nl.test(zr=Pi.matches||Pi.webkitMatchesSelector||Pi.mozMatchesSelector||Pi.oMatchesSelector||Pi.msMatchesSelector))&&So(function(Lt){ge.disconnectedMatch=zr.call(Lt,"*"),zr.call(Lt,"[s!='']:x"),Qr.push("!=",mc)}),ge.cssSupportsSelector||en.push(":has"),en=en.length&&new RegExp(en.join("|")),Qr=Qr.length&&new RegExp(Qr.join("|")),xt=Nl.test(Pi.compareDocumentPosition),Vn=xt||Nl.test(Pi.contains)?function(Lt,Qt){var Si=Lt.nodeType===9&&Lt.documentElement||Lt,ji=Qt&&Qt.parentNode;return Lt===ji||!!(ji&&ji.nodeType===1&&(Si.contains?Si.contains(ji):Lt.compareDocumentPosition&&Lt.compareDocumentPosition(ji)&16))}:function(Lt,Qt){if(Qt){for(;Qt=Qt.parentNode;)if(Qt===Lt)return!0}return!1},To=xt?function(Lt,Qt){if(Lt===Qt)return fi=!0,0;var Si=!Lt.compareDocumentPosition-!Qt.compareDocumentPosition;return Si||(Si=(Lt.ownerDocument||Lt)==(Qt.ownerDocument||Qt)?Lt.compareDocumentPosition(Qt):1,Si&1||!ge.sortDetached&&Qt.compareDocumentPosition(Lt)===Si?Lt==ei||Lt.ownerDocument==Tn&&Vn(Tn,Lt)?-1:Qt==ei||Qt.ownerDocument==Tn&&Vn(Tn,Qt)?1:ii?Ua(ii,Lt)-Ua(ii,Qt):0:Si&4?-1:1)}:function(Lt,Qt){if(Lt===Qt)return fi=!0,0;var Si,ji=0,bi=Lt.parentNode,fn=Qt.parentNode,vn=[Lt],bn=[Qt];if(!bi||!fn)return Lt==ei?-1:Qt==ei?1:bi?-1:fn?1:ii?Ua(ii,Lt)-Ua(ii,Qt):0;if(bi===fn)return au(Lt,Qt);for(Si=Lt;Si=Si.parentNode;)vn.unshift(Si);for(Si=Qt;Si=Si.parentNode;)bn.unshift(Si);for(;vn[ji]===bn[ji];)ji++;return ji?au(vn[ji],bn[ji]):vn[ji]==Tn?-1:bn[ji]==Tn?1:0}),ei},rr.matches=function(Ke,xt){return rr(Ke,null,null,xt)},rr.matchesSelector=function(Ke,xt){if(Kt(Ke),ge.matchesSelector&&Ln&&!Rs[xt+" "]&&(!Qr||!Qr.test(xt))&&(!en||!en.test(xt)))try{var Pt=zr.call(Ke,xt);if(Pt||ge.disconnectedMatch||Ke.document&&Ke.document.nodeType!==11)return Pt}catch{Rs(xt,!0)}return rr(xt,ei,null,[Ke]).length>0},rr.contains=function(Ke,xt){return(Ke.ownerDocument||Ke)!=ei&&Kt(Ke),Vn(Ke,xt)},rr.attr=function(Ke,xt){(Ke.ownerDocument||Ke)!=ei&&Kt(Ke);var Pt=Se.attrHandle[xt.toLowerCase()],hi=Pt&&Pn.call(Se.attrHandle,xt.toLowerCase())?Pt(Ke,xt,!Ln):void 0;return hi!==void 0?hi:ge.attributes||!Ln?Ke.getAttribute(xt):(hi=Ke.getAttributeNode(xt))&&hi.specified?hi.value:null},rr.escape=function(Ke){return(Ke+"").replace(sl,dd)},rr.error=function(Ke){throw new Error("Syntax error, unrecognized expression: "+Ke)},rr.uniqueSort=function(Ke){var xt,Pt=[],hi=0,Lt=0;if(fi=!ge.detectDuplicates,ii=!ge.sortStable&&Ke.slice(0),Ke.sort(To),fi){for(;xt=Ke[Lt++];)xt===Ke[Lt]&&(hi=Pt.push(Lt));for(;hi--;)Ke.splice(Pt[hi],1)}return ii=null,Ke},ze=rr.getText=function(Ke){var xt,Pt="",hi=0,Lt=Ke.nodeType;if(Lt){if(Lt===1||Lt===9||Lt===11){if(typeof Ke.textContent=="string")return Ke.textContent;for(Ke=Ke.firstChild;Ke;Ke=Ke.nextSibling)Pt+=ze(Ke)}else if(Lt===3||Lt===4)return Ke.nodeValue}else for(;xt=Ke[hi++];)Pt+=ze(xt);return Pt},Se=rr.selectors={cacheLength:50,createPseudo:Ws,match:zl,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ke){return Ke[1]=Ke[1].replace(Ho,Hs),Ke[3]=(Ke[3]||Ke[4]||Ke[5]||"").replace(Ho,Hs),Ke[2]==="~="&&(Ke[3]=" "+Ke[3]+" "),Ke.slice(0,4)},CHILD:function(Ke){return Ke[1]=Ke[1].toLowerCase(),Ke[1].slice(0,3)==="nth"?(Ke[3]||rr.error(Ke[0]),Ke[4]=+(Ke[4]?Ke[5]+(Ke[6]||1):2*(Ke[3]==="even"||Ke[3]==="odd")),Ke[5]=+(Ke[7]+Ke[8]||Ke[3]==="odd")):Ke[3]&&rr.error(Ke[0]),Ke},PSEUDO:function(Ke){var xt,Pt=!Ke[6]&&Ke[2];return zl.CHILD.test(Ke[0])?null:(Ke[3]?Ke[2]=Ke[4]||Ke[5]||"":Pt&&yc.test(Pt)&&(xt=He(Pt,!0))&&(xt=Pt.indexOf(")",Pt.length-xt)-Pt.length)&&(Ke[0]=Ke[0].slice(0,xt),Ke[2]=Pt.slice(0,xt)),Ke.slice(0,3))}},filter:{TAG:function(Ke){var xt=Ke.replace(Ho,Hs).toLowerCase();return Ke==="*"?function(){return!0}:function(Pt){return Pt.nodeName&&Pt.nodeName.toLowerCase()===xt}},CLASS:function(Ke){var xt=Cr[Ke+" "];return xt||(xt=new RegExp("(^|"+fr+")"+Ke+"("+fr+"|$)"))&&Cr(Ke,function(Pt){return xt.test(typeof Pt.className=="string"&&Pt.className||typeof Pt.getAttribute<"u"&&Pt.getAttribute("class")||"")})},ATTR:function(Ke,xt,Pt){return function(hi){var Lt=rr.attr(hi,Ke);return Lt==null?xt==="!=":xt?(Lt+="",xt==="="?Lt===Pt:xt==="!="?Lt!==Pt:xt==="^="?Pt&&Lt.indexOf(Pt)===0:xt==="*="?Pt&&Lt.indexOf(Pt)>-1:xt==="$="?Pt&&Lt.slice(-Pt.length)===Pt:xt==="~="?(" "+Lt.replace(ro," ")+" ").indexOf(Pt)>-1:xt==="|="?Lt===Pt||Lt.slice(0,Pt.length+1)===Pt+"-":!1):!0}},CHILD:function(Ke,xt,Pt,hi,Lt){var Qt=Ke.slice(0,3)!=="nth",Si=Ke.slice(-4)!=="last",ji=xt==="of-type";return hi===1&&Lt===0?function(bi){return!!bi.parentNode}:function(bi,fn,vn){var bn,On,Jn,mn,cs,fs,Ys=Qt!==Si?"nextSibling":"previousSibling",Mr=bi.parentNode,so=ji&&bi.nodeName.toLowerCase(),Co=!vn&&!ji,xs=!1;if(Mr){if(Qt){for(;Ys;){for(mn=bi;mn=mn[Ys];)if(ji?mn.nodeName.toLowerCase()===so:mn.nodeType===1)return!1;fs=Ys=Ke==="only"&&!fs&&"nextSibling"}return!0}if(fs=[Si?Mr.firstChild:Mr.lastChild],Si&&Co){for(mn=Mr,Jn=mn[$n]||(mn[$n]={}),On=Jn[mn.uniqueID]||(Jn[mn.uniqueID]={}),bn=On[Ke]||[],cs=bn[0]===Js&&bn[1],xs=cs&&bn[2],mn=cs&&Mr.childNodes[cs];mn=++cs&&mn&&mn[Ys]||(xs=cs=0)||fs.pop();)if(mn.nodeType===1&&++xs&&mn===bi){On[Ke]=[Js,cs,xs];break}}else if(Co&&(mn=bi,Jn=mn[$n]||(mn[$n]={}),On=Jn[mn.uniqueID]||(Jn[mn.uniqueID]={}),bn=On[Ke]||[],cs=bn[0]===Js&&bn[1],xs=cs),xs===!1)for(;(mn=++cs&&mn&&mn[Ys]||(xs=cs=0)||fs.pop())&&!((ji?mn.nodeName.toLowerCase()===so:mn.nodeType===1)&&++xs&&(Co&&(Jn=mn[$n]||(mn[$n]={}),On=Jn[mn.uniqueID]||(Jn[mn.uniqueID]={}),On[Ke]=[Js,xs]),mn===bi)););return xs-=Lt,xs===hi||xs%hi===0&&xs/hi>=0}}},PSEUDO:function(Ke,xt){var Pt,hi=Se.pseudos[Ke]||Se.setFilters[Ke.toLowerCase()]||rr.error("unsupported pseudo: "+Ke);return hi[$n]?hi(xt):hi.length>1?(Pt=[Ke,Ke,"",xt],Se.setFilters.hasOwnProperty(Ke.toLowerCase())?Ws(function(Lt,Qt){for(var Si,ji=hi(Lt,xt),bi=ji.length;bi--;)Si=Ua(Lt,ji[bi]),Lt[Si]=!(Qt[Si]=ji[bi])}):function(Lt){return hi(Lt,0,Pt)}):hi}},pseudos:{not:Ws(function(Ke){var xt=[],Pt=[],hi=Ct(Ke.replace(Bl,"$1"));return hi[$n]?Ws(function(Lt,Qt,Si,ji){for(var bi,fn=hi(Lt,null,ji,[]),vn=Lt.length;vn--;)(bi=fn[vn])&&(Lt[vn]=!(Qt[vn]=bi))}):function(Lt,Qt,Si){return xt[0]=Lt,hi(xt,null,Si,Pt),xt[0]=null,!Pt.pop()}}),has:Ws(function(Ke){return function(xt){return rr(Ke,xt).length>0}}),contains:Ws(function(Ke){return Ke=Ke.replace(Ho,Hs),function(xt){return(xt.textContent||ze(xt)).indexOf(Ke)>-1}}),lang:Ws(function(Ke){return ou.test(Ke||"")||rr.error("unsupported lang: "+Ke),Ke=Ke.replace(Ho,Hs).toLowerCase(),function(xt){var Pt;do if(Pt=Ln?xt.lang:xt.getAttribute("xml:lang")||xt.getAttribute("lang"))return Pt=Pt.toLowerCase(),Pt===Ke||Pt.indexOf(Ke+"-")===0;while((xt=xt.parentNode)&&xt.nodeType===1);return!1}}),target:function(Ke){var xt=j.location&&j.location.hash;return xt&&xt.slice(1)===Ke.id},root:function(Ke){return Ke===Pi},focus:function(Ke){return Ke===ei.activeElement&&(!ei.hasFocus||ei.hasFocus())&&!!(Ke.type||Ke.href||~Ke.tabIndex)},enabled:Eo(!1),disabled:Eo(!0),checked:function(Ke){var xt=Ke.nodeName.toLowerCase();return xt==="input"&&!!Ke.checked||xt==="option"&&!!Ke.selected},selected:function(Ke){return Ke.parentNode&&Ke.parentNode.selectedIndex,Ke.selected===!0},empty:function(Ke){for(Ke=Ke.firstChild;Ke;Ke=Ke.nextSibling)if(Ke.nodeType<6)return!1;return!0},parent:function(Ke){return!Se.pseudos.empty(Ke)},header:function(Ke){return Ga.test(Ke.nodeName)},input:function(Ke){return va.test(Ke.nodeName)},button:function(Ke){var xt=Ke.nodeName.toLowerCase();return xt==="input"&&Ke.type==="button"||xt==="button"},text:function(Ke){var xt;return Ke.nodeName.toLowerCase()==="input"&&Ke.type==="text"&&((xt=Ke.getAttribute("type"))==null||xt.toLowerCase()==="text")},first:It(function(){return[0]}),last:It(function(Ke,xt){return[xt-1]}),eq:It(function(Ke,xt,Pt){return[Pt<0?Pt+xt:Pt]}),even:It(function(Ke,xt){for(var Pt=0;Pt<xt;Pt+=2)Ke.push(Pt);return Ke}),odd:It(function(Ke,xt){for(var Pt=1;Pt<xt;Pt+=2)Ke.push(Pt);return Ke}),lt:It(function(Ke,xt,Pt){for(var hi=Pt<0?Pt+xt:Pt>xt?xt:Pt;--hi>=0;)Ke.push(hi);return Ke}),gt:It(function(Ke,xt,Pt){for(var hi=Pt<0?Pt+xt:Pt;++hi<xt;)Ke.push(hi);return Ke})}},Se.pseudos.nth=Se.pseudos.eq;for(oe in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Se.pseudos[oe]=lu(oe);for(oe in{submit:!0,reset:!0})Se.pseudos[oe]=cu(oe);function ti(){}ti.prototype=Se.filters=Se.pseudos,Se.setFilters=new ti,He=rr.tokenize=function(Ke,xt){var Pt,hi,Lt,Qt,Si,ji,bi,fn=ya[Ke+" "];if(fn)return xt?0:fn.slice(0);for(Si=Ke,ji=[],bi=Se.preFilter;Si;){(!Pt||(hi=gc.exec(Si)))&&(hi&&(Si=Si.slice(hi[0].length)||Si),ji.push(Lt=[])),Pt=!1,(hi=cd.exec(Si))&&(Pt=hi.shift(),Lt.push({value:Pt,type:hi[0].replace(Bl," ")}),Si=Si.slice(Pt.length));for(Qt in Se.filter)(hi=zl[Qt].exec(Si))&&(!bi[Qt]||(hi=bi[Qt](hi)))&&(Pt=hi.shift(),Lt.push({value:Pt,type:Qt,matches:hi}),Si=Si.slice(Pt.length));if(!Pt)break}return xt?Si.length:Si?rr.error(Ke):ya(Ke,ji).slice(0)};function Zi(Ke){for(var xt=0,Pt=Ke.length,hi="";xt<Pt;xt++)hi+=Ke[xt].value;return hi}function Dn(Ke,xt,Pt){var hi=xt.dir,Lt=xt.next,Qt=Lt||hi,Si=Pt&&Qt==="parentNode",ji=Xn++;return xt.first?function(bi,fn,vn){for(;bi=bi[hi];)if(bi.nodeType===1||Si)return Ke(bi,fn,vn);return!1}:function(bi,fn,vn){var bn,On,Jn,mn=[Js,ji];if(vn){for(;bi=bi[hi];)if((bi.nodeType===1||Si)&&Ke(bi,fn,vn))return!0}else for(;bi=bi[hi];)if(bi.nodeType===1||Si)if(Jn=bi[$n]||(bi[$n]={}),On=Jn[bi.uniqueID]||(Jn[bi.uniqueID]={}),Lt&&Lt===bi.nodeName.toLowerCase())bi=bi[hi]||bi;else{if((bn=On[Qt])&&bn[0]===Js&&bn[1]===ji)return mn[2]=bn[2];if(On[Qt]=mn,mn[2]=Ke(bi,fn,vn))return!0}return!1}}function cr(Ke){return Ke.length>1?function(xt,Pt,hi){for(var Lt=Ke.length;Lt--;)if(!Ke[Lt](xt,Pt,hi))return!1;return!0}:Ke[0]}function ps(Ke,xt,Pt){for(var hi=0,Lt=xt.length;hi<Lt;hi++)rr(Ke,xt[hi],Pt);return Pt}function mr(Ke,xt,Pt,hi,Lt){for(var Qt,Si=[],ji=0,bi=Ke.length,fn=xt!=null;ji<bi;ji++)(Qt=Ke[ji])&&(!Pt||Pt(Qt,hi,Lt))&&(Si.push(Qt),fn&&xt.push(ji));return Si}function xc(Ke,xt,Pt,hi,Lt,Qt){return hi&&!hi[$n]&&(hi=xc(hi)),Lt&&!Lt[$n]&&(Lt=xc(Lt,Qt)),Ws(function(Si,ji,bi,fn){var vn,bn,On,Jn=[],mn=[],cs=ji.length,fs=Si||ps(xt||"*",bi.nodeType?[bi]:bi,[]),Ys=Ke&&(Si||!xt)?mr(fs,Jn,Ke,bi,fn):fs,Mr=Pt?Lt||(Si?Ke:cs||hi)?[]:ji:Ys;if(Pt&&Pt(Ys,Mr,bi,fn),hi)for(vn=mr(Mr,mn),hi(vn,[],bi,fn),bn=vn.length;bn--;)(On=vn[bn])&&(Mr[mn[bn]]=!(Ys[mn[bn]]=On));if(Si){if(Lt||Ke){if(Lt){for(vn=[],bn=Mr.length;bn--;)(On=Mr[bn])&&vn.push(Ys[bn]=On);Lt(null,Mr=[],vn,fn)}for(bn=Mr.length;bn--;)(On=Mr[bn])&&(vn=Lt?Ua(Si,On):Jn[bn])>-1&&(Si[vn]=!(ji[vn]=On))}}else Mr=mr(Mr===ji?Mr.splice(cs,Mr.length):Mr),Lt?Lt(null,ji,Mr,fn):Vo.apply(ji,Mr)})}function Ah(Ke){for(var xt,Pt,hi,Lt=Ke.length,Qt=Se.relative[Ke[0].type],Si=Qt||Se.relative[" "],ji=Qt?1:0,bi=Dn(function(bn){return bn===xt},Si,!0),fn=Dn(function(bn){return Ua(xt,bn)>-1},Si,!0),vn=[function(bn,On,Jn){var mn=!Qt&&(Jn||On!==Gt)||((xt=On).nodeType?bi(bn,On,Jn):fn(bn,On,Jn));return xt=null,mn}];ji<Lt;ji++)if(Pt=Se.relative[Ke[ji].type])vn=[Dn(cr(vn),Pt)];else{if(Pt=Se.filter[Ke[ji].type].apply(null,Ke[ji].matches),Pt[$n]){for(hi=++ji;hi<Lt&&!Se.relative[Ke[hi].type];hi++);return xc(ji>1&&cr(vn),ji>1&&Zi(Ke.slice(0,ji-1).concat({value:Ke[ji-2].type===" "?"*":""})).replace(Bl,"$1"),Pt,ji<hi&&Ah(Ke.slice(ji,hi)),hi<Lt&&Ah(Ke=Ke.slice(hi)),hi<Lt&&Zi(Ke))}vn.push(Pt)}return cr(vn)}function fo(Ke,xt){var Pt=xt.length>0,hi=Ke.length>0,Lt=function(Qt,Si,ji,bi,fn){var vn,bn,On,Jn=0,mn="0",cs=Qt&&[],fs=[],Ys=Gt,Mr=Qt||hi&&Se.find.TAG("*",fn),so=Js+=Ys==null?1:Math.random()||.1,Co=Mr.length;for(fn&&(Gt=Si==ei||Si||fn);mn!==Co&&(vn=Mr[mn])!=null;mn++){if(hi&&vn){for(bn=0,!Si&&vn.ownerDocument!=ei&&(Kt(vn),ji=!Ln);On=Ke[bn++];)if(On(vn,Si||ei,ji)){bi.push(vn);break}fn&&(Js=so)}Pt&&((vn=!On&&vn)&&Jn--,Qt&&cs.push(vn))}if(Jn+=mn,Pt&&mn!==Jn){for(bn=0;On=xt[bn++];)On(cs,fs,Si,ji);if(Qt){if(Jn>0)for(;mn--;)cs[mn]||fs[mn]||(fs[mn]=ra.call(bi));fs=mr(fs)}Vo.apply(bi,fs),fn&&!Qt&&fs.length>0&&Jn+xt.length>1&&rr.uniqueSort(bi)}return fn&&(Js=so,Gt=Ys),cs};return Pt?Ws(Lt):Lt}return Ct=rr.compile=function(Ke,xt){var Pt,hi=[],Lt=[],Qt=Ol[Ke+" "];if(!Qt){for(xt||(xt=He(Ke)),Pt=xt.length;Pt--;)Qt=Ah(xt[Pt]),Qt[$n]?hi.push(Qt):Lt.push(Qt);Qt=Ol(Ke,fo(Lt,hi)),Qt.selector=Ke}return Qt},vt=rr.select=function(Ke,xt,Pt,hi){var Lt,Qt,Si,ji,bi,fn=typeof Ke=="function"&&Ke,vn=!hi&&He(Ke=fn.selector||Ke);if(Pt=Pt||[],vn.length===1){if(Qt=vn[0]=vn[0].slice(0),Qt.length>2&&(Si=Qt[0]).type==="ID"&&xt.nodeType===9&&Ln&&Se.relative[Qt[1].type]){if(xt=(Se.find.ID(Si.matches[0].replace(Ho,Hs),xt)||[])[0],xt)fn&&(xt=xt.parentNode);else return Pt;Ke=Ke.slice(Qt.shift().value.length)}for(Lt=zl.needsContext.test(Ke)?0:Qt.length;Lt--&&(Si=Qt[Lt],!Se.relative[ji=Si.type]);)if((bi=Se.find[ji])&&(hi=bi(Si.matches[0].replace(Ho,Hs),vc.test(Qt[0].type)&&ci(xt.parentNode)||xt))){if(Qt.splice(Lt,1),Ke=hi.length&&Zi(Qt),!Ke)return Vo.apply(Pt,hi),Pt;break}}return(fn||Ct(Ke,vn))(hi,xt,!Ln,Pt,!xt||vc.test(Ke)&&ci(xt.parentNode)||xt),Pt},ge.sortStable=$n.split("").sort(To).join("")===$n,ge.detectDuplicates=!!fi,Kt(),ge.sortDetached=So(function(Ke){return Ke.compareDocumentPosition(ei.createElement("fieldset"))&1}),So(function(Ke){return Ke.innerHTML="<a href='#'></a>",Ke.firstChild.getAttribute("href")==="#"})||Fl("type|href|height|width",function(Ke,xt,Pt){if(!Pt)return Ke.getAttribute(xt,xt.toLowerCase()==="type"?1:2)}),(!ge.attributes||!So(function(Ke){return Ke.innerHTML="<input/>",Ke.firstChild.setAttribute("value",""),Ke.firstChild.getAttribute("value")===""}))&&Fl("value",function(Ke,xt,Pt){if(!Pt&&Ke.nodeName.toLowerCase()==="input")return Ke.defaultValue}),So(function(Ke){return Ke.getAttribute("disabled")==null})||Fl(Ch,function(Ke,xt,Pt){var hi;if(!Pt)return Ke[xt]===!0?xt.toLowerCase():(hi=Ke.getAttributeNode(xt))&&hi.specified?hi.value:null}),rr}(t);C.find=J,C.expr=J.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=J.uniqueSort,C.text=J.getText,C.isXMLDoc=J.isXML,C.contains=J.contains,C.escapeSelector=J.escape;var N=function(j,oe,ge){for(var Se=[],ze=ge!==void 0;(j=j[oe])&&j.nodeType!==9;)if(j.nodeType===1){if(ze&&C(j).is(ge))break;Se.push(j)}return Se},F=function(j,oe){for(var ge=[];j;j=j.nextSibling)j.nodeType===1&&j!==oe&&ge.push(j);return ge},H=C.expr.match.needsContext;function E(j,oe){return j.nodeName&&j.nodeName.toLowerCase()===oe.toLowerCase()}var L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function f(j,oe,ge){return O(oe)?C.grep(j,function(Se,ze){return!!oe.call(Se,ze,Se)!==ge}):oe.nodeType?C.grep(j,function(Se){return Se===oe!==ge}):typeof oe!="string"?C.grep(j,function(Se){return T.call(oe,Se)>-1!==ge}):C.filter(oe,j,ge)}C.filter=function(j,oe,ge){var Se=oe[0];return ge&&(j=":not("+j+")"),oe.length===1&&Se.nodeType===1?C.find.matchesSelector(Se,j)?[Se]:[]:C.find.matches(j,C.grep(oe,function(ze){return ze.nodeType===1}))},C.fn.extend({find:function(j){var oe,ge,Se=this.length,ze=this;if(typeof j!="string")return this.pushStack(C(j).filter(function(){for(oe=0;oe<Se;oe++)if(C.contains(ze[oe],this))return!0}));for(ge=this.pushStack([]),oe=0;oe<Se;oe++)C.find(j,ze[oe],ge);return Se>1?C.uniqueSort(ge):ge},filter:function(j){return this.pushStack(f(this,j||[],!1))},not:function(j){return this.pushStack(f(this,j||[],!0))},is:function(j){return!!f(this,typeof j=="string"&&H.test(j)?C(j):j||[],!1).length}});var y,b=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,D=C.fn.init=function(j,oe,ge){var Se,ze;if(!j)return this;if(ge=ge||y,typeof j=="string")if(j[0]==="<"&&j[j.length-1]===">"&&j.length>=3?Se=[null,j,null]:Se=b.exec(j),Se&&(Se[1]||!oe))if(Se[1]){if(oe=oe instanceof C?oe[0]:oe,C.merge(this,C.parseHTML(Se[1],oe&&oe.nodeType?oe.ownerDocument||oe:M,!0)),L.test(Se[1])&&C.isPlainObject(oe))for(Se in oe)O(this[Se])?this[Se](oe[Se]):this.attr(Se,oe[Se]);return this}else return ze=M.getElementById(Se[2]),ze&&(this[0]=ze,this.length=1),this;else return!oe||oe.jquery?(oe||ge).find(j):this.constructor(oe).find(j);else{if(j.nodeType)return this[0]=j,this.length=1,this;if(O(j))return ge.ready!==void 0?ge.ready(j):j(C)}return C.makeArray(j,this)};D.prototype=C.fn,y=C(M);var X=/^(?:parents|prev(?:Until|All))/,te={children:!0,contents:!0,next:!0,prev:!0};C.fn.extend({has:function(j){var oe=C(j,this),ge=oe.length;return this.filter(function(){for(var Se=0;Se<ge;Se++)if(C.contains(this,oe[Se]))return!0})},closest:function(j,oe){var ge,Se=0,ze=this.length,je=[],He=typeof j!="string"&&C(j);if(!H.test(j)){for(;Se<ze;Se++)for(ge=this[Se];ge&&ge!==oe;ge=ge.parentNode)if(ge.nodeType<11&&(He?He.index(ge)>-1:ge.nodeType===1&&C.find.matchesSelector(ge,j))){je.push(ge);break}}return this.pushStack(je.length>1?C.uniqueSort(je):je)},index:function(j){return j?typeof j=="string"?T.call(C(j),this[0]):T.call(this,j.jquery?j[0]:j):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(j,oe){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(j,oe))))},addBack:function(j){return this.add(j==null?this.prevObject:this.prevObject.filter(j))}});function q(j,oe){for(;(j=j[oe])&&j.nodeType!==1;);return j}C.each({parent:function(j){var oe=j.parentNode;return oe&&oe.nodeType!==11?oe:null},parents:function(j){return N(j,"parentNode")},parentsUntil:function(j,oe,ge){return N(j,"parentNode",ge)},next:function(j){return q(j,"nextSibling")},prev:function(j){return q(j,"previousSibling")},nextAll:function(j){return N(j,"nextSibling")},prevAll:function(j){return N(j,"previousSibling")},nextUntil:function(j,oe,ge){return N(j,"nextSibling",ge)},prevUntil:function(j,oe,ge){return N(j,"previousSibling",ge)},siblings:function(j){return F((j.parentNode||{}).firstChild,j)},children:function(j){return F(j.firstChild)},contents:function(j){return j.contentDocument!=null&&c(j.contentDocument)?j.contentDocument:(E(j,"template")&&(j=j.content||j),C.merge([],j.childNodes))}},function(j,oe){C.fn[j]=function(ge,Se){var ze=C.map(this,oe,ge);return j.slice(-5)!=="Until"&&(Se=ge),Se&&typeof Se=="string"&&(ze=C.filter(Se,ze)),this.length>1&&(te[j]||C.uniqueSort(ze),X.test(j)&&ze.reverse()),this.pushStack(ze)}});var ce=/[^\x20\t\r\n\f]+/g;function fe(j){var oe={};return C.each(j.match(ce)||[],function(ge,Se){oe[Se]=!0}),oe}C.Callbacks=function(j){j=typeof j=="string"?fe(j):C.extend({},j);var oe,ge,Se,ze,je=[],He=[],Ct=-1,vt=function(){for(ze=ze||j.once,Se=oe=!0;He.length;Ct=-1)for(ge=He.shift();++Ct<je.length;)je[Ct].apply(ge[0],ge[1])===!1&&j.stopOnFalse&&(Ct=je.length,ge=!1);j.memory||(ge=!1),oe=!1,ze&&(ge?je=[]:je="")},Gt={add:function(){return je&&(ge&&!oe&&(Ct=je.length-1,He.push(ge)),function ii(fi){C.each(fi,function(Kt,ei){O(ei)?(!j.unique||!Gt.has(ei))&&je.push(ei):ei&&ei.length&&G(ei)!=="string"&&ii(ei)})}(arguments),ge&&!oe&&vt()),this},remove:function(){return C.each(arguments,function(ii,fi){for(var Kt;(Kt=C.inArray(fi,je,Kt))>-1;)je.splice(Kt,1),Kt<=Ct&&Ct--}),this},has:function(ii){return ii?C.inArray(ii,je)>-1:je.length>0},empty:function(){return je&&(je=[]),this},disable:function(){return ze=He=[],je=ge="",this},disabled:function(){return!je},lock:function(){return ze=He=[],!ge&&!oe&&(je=ge=""),this},locked:function(){return!!ze},fireWith:function(ii,fi){return ze||(fi=fi||[],fi=[ii,fi.slice?fi.slice():fi],He.push(fi),oe||vt()),this},fire:function(){return Gt.fireWith(this,arguments),this},fired:function(){return!!Se}};return Gt};function we(j){return j}function Z(j){throw j}function se(j,oe,ge,Se){var ze;try{j&&O(ze=j.promise)?ze.call(j).done(oe).fail(ge):j&&O(ze=j.then)?ze.call(j,oe,ge):oe.apply(void 0,[j].slice(Se))}catch(je){ge.apply(void 0,[je])}}C.extend({Deferred:function(j){var oe=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],ge="pending",Se={state:function(){return ge},always:function(){return ze.done(arguments).fail(arguments),this},catch:function(je){return Se.then(null,je)},pipe:function(){var je=arguments;return C.Deferred(function(He){C.each(oe,function(Ct,vt){var Gt=O(je[vt[4]])&&je[vt[4]];ze[vt[1]](function(){var ii=Gt&&Gt.apply(this,arguments);ii&&O(ii.promise)?ii.promise().progress(He.notify).done(He.resolve).fail(He.reject):He[vt[0]+"With"](this,Gt?[ii]:arguments)})}),je=null}).promise()},then:function(je,He,Ct){var vt=0;function Gt(ii,fi,Kt,ei){return function(){var Pi=this,Ln=arguments,en=function(){var zr,Vn;if(!(ii<vt)){if(zr=Kt.apply(Pi,Ln),zr===fi.promise())throw new TypeError("Thenable self-resolution");Vn=zr&&(typeof zr=="object"||typeof zr=="function")&&zr.then,O(Vn)?ei?Vn.call(zr,Gt(vt,fi,we,ei),Gt(vt,fi,Z,ei)):(vt++,Vn.call(zr,Gt(vt,fi,we,ei),Gt(vt,fi,Z,ei),Gt(vt,fi,we,fi.notifyWith))):(Kt!==we&&(Pi=void 0,Ln=[zr]),(ei||fi.resolveWith)(Pi,Ln))}},Qr=ei?en:function(){try{en()}catch(zr){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(zr,Qr.stackTrace),ii+1>=vt&&(Kt!==Z&&(Pi=void 0,Ln=[zr]),fi.rejectWith(Pi,Ln))}};ii?Qr():(C.Deferred.getStackHook&&(Qr.stackTrace=C.Deferred.getStackHook()),t.setTimeout(Qr))}}return C.Deferred(function(ii){oe[0][3].add(Gt(0,ii,O(Ct)?Ct:we,ii.notifyWith)),oe[1][3].add(Gt(0,ii,O(je)?je:we)),oe[2][3].add(Gt(0,ii,O(He)?He:Z))}).promise()},promise:function(je){return je!=null?C.extend(je,Se):Se}},ze={};return C.each(oe,function(je,He){var Ct=He[2],vt=He[5];Se[He[1]]=Ct.add,vt&&Ct.add(function(){ge=vt},oe[3-je][2].disable,oe[3-je][3].disable,oe[0][2].lock,oe[0][3].lock),Ct.add(He[3].fire),ze[He[0]]=function(){return ze[He[0]+"With"](this===ze?void 0:this,arguments),this},ze[He[0]+"With"]=Ct.fireWith}),Se.promise(ze),j&&j.call(ze,ze),ze},when:function(j){var oe=arguments.length,ge=oe,Se=Array(ge),ze=d.call(arguments),je=C.Deferred(),He=function(Ct){return function(vt){Se[Ct]=this,ze[Ct]=arguments.length>1?d.call(arguments):vt,--oe||je.resolveWith(Se,ze)}};if(oe<=1&&(se(j,je.done(He(ge)).resolve,je.reject,!oe),je.state()==="pending"||O(ze[ge]&&ze[ge].then)))return je.then();for(;ge--;)se(ze[ge],He(ge),je.reject);return je.promise()}});var ue=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(j,oe){t.console&&t.console.warn&&j&&ue.test(j.name)&&t.console.warn("jQuery.Deferred exception: "+j.message,j.stack,oe)},C.readyException=function(j){t.setTimeout(function(){throw j})};var ye=C.Deferred();C.fn.ready=function(j){return ye.then(j).catch(function(oe){C.readyException(oe)}),this},C.extend({isReady:!1,readyWait:1,ready:function(j){(j===!0?--C.readyWait:C.isReady)||(C.isReady=!0,!(j!==!0&&--C.readyWait>0)&&ye.resolveWith(M,[C]))}}),C.ready.then=ye.then;function Pe(){M.removeEventListener("DOMContentLoaded",Pe),t.removeEventListener("load",Pe),C.ready()}M.readyState==="complete"||M.readyState!=="loading"&&!M.documentElement.doScroll?t.setTimeout(C.ready):(M.addEventListener("DOMContentLoaded",Pe),t.addEventListener("load",Pe));var ae=function(j,oe,ge,Se,ze,je,He){var Ct=0,vt=j.length,Gt=ge==null;if(G(ge)==="object"){ze=!0;for(Ct in ge)ae(j,oe,Ct,ge[Ct],!0,je,He)}else if(Se!==void 0&&(ze=!0,O(Se)||(He=!0),Gt&&(He?(oe.call(j,Se),oe=null):(Gt=oe,oe=function(ii,fi,Kt){return Gt.call(C(ii),Kt)})),oe))for(;Ct<vt;Ct++)oe(j[Ct],ge,He?Se:Se.call(j[Ct],Ct,oe(j[Ct],ge)));return ze?j:Gt?oe.call(j):vt?oe(j[0],ge):je},xe=/^-ms-/,ve=/-([a-z])/g;function le(j,oe){return oe.toUpperCase()}function me(j){return j.replace(xe,"ms-").replace(ve,le)}var be=function(j){return j.nodeType===1||j.nodeType===9||!+j.nodeType};function Le(){this.expando=C.expando+Le.uid++}Le.uid=1,Le.prototype={cache:function(j){var oe=j[this.expando];return oe||(oe={},be(j)&&(j.nodeType?j[this.expando]=oe:Object.defineProperty(j,this.expando,{value:oe,configurable:!0}))),oe},set:function(j,oe,ge){var Se,ze=this.cache(j);if(typeof oe=="string")ze[me(oe)]=ge;else for(Se in oe)ze[me(Se)]=oe[Se];return ze},get:function(j,oe){return oe===void 0?this.cache(j):j[this.expando]&&j[this.expando][me(oe)]},access:function(j,oe,ge){return oe===void 0||oe&&typeof oe=="string"&&ge===void 0?this.get(j,oe):(this.set(j,oe,ge),ge!==void 0?ge:oe)},remove:function(j,oe){var ge,Se=j[this.expando];if(Se!==void 0){if(oe!==void 0)for(Array.isArray(oe)?oe=oe.map(me):(oe=me(oe),oe=oe in Se?[oe]:oe.match(ce)||[]),ge=oe.length;ge--;)delete Se[oe[ge]];(oe===void 0||C.isEmptyObject(Se))&&(j.nodeType?j[this.expando]=void 0:delete j[this.expando])}},hasData:function(j){var oe=j[this.expando];return oe!==void 0&&!C.isEmptyObject(oe)}};var De=new Le,Ne=new Le,st=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,it=/[A-Z]/g;function ht(j){return j==="true"?!0:j==="false"?!1:j==="null"?null:j===+j+""?+j:st.test(j)?JSON.parse(j):j}function ke(j,oe,ge){var Se;if(ge===void 0&&j.nodeType===1)if(Se="data-"+oe.replace(it,"-$&").toLowerCase(),ge=j.getAttribute(Se),typeof ge=="string"){try{ge=ht(ge)}catch{}Ne.set(j,oe,ge)}else ge=void 0;return ge}C.extend({hasData:function(j){return Ne.hasData(j)||De.hasData(j)},data:function(j,oe,ge){return Ne.access(j,oe,ge)},removeData:function(j,oe){Ne.remove(j,oe)},_data:function(j,oe,ge){return De.access(j,oe,ge)},_removeData:function(j,oe){De.remove(j,oe)}}),C.fn.extend({data:function(j,oe){var ge,Se,ze,je=this[0],He=je&&je.attributes;if(j===void 0){if(this.length&&(ze=Ne.get(je),je.nodeType===1&&!De.get(je,"hasDataAttrs"))){for(ge=He.length;ge--;)He[ge]&&(Se=He[ge].name,Se.indexOf("data-")===0&&(Se=me(Se.slice(5)),ke(je,Se,ze[Se])));De.set(je,"hasDataAttrs",!0)}return ze}return typeof j=="object"?this.each(function(){Ne.set(this,j)}):ae(this,function(Ct){var vt;if(je&&Ct===void 0)return vt=Ne.get(je,j),vt!==void 0||(vt=ke(je,j),vt!==void 0)?vt:void 0;this.each(function(){Ne.set(this,j,Ct)})},null,oe,arguments.length>1,null,!0)},removeData:function(j){return this.each(function(){Ne.remove(this,j)})}}),C.extend({queue:function(j,oe,ge){var Se;if(j)return oe=(oe||"fx")+"queue",Se=De.get(j,oe),ge&&(!Se||Array.isArray(ge)?Se=De.access(j,oe,C.makeArray(ge)):Se.push(ge)),Se||[]},dequeue:function(j,oe){oe=oe||"fx";var ge=C.queue(j,oe),Se=ge.length,ze=ge.shift(),je=C._queueHooks(j,oe),He=function(){C.dequeue(j,oe)};ze==="inprogress"&&(ze=ge.shift(),Se--),ze&&(oe==="fx"&&ge.unshift("inprogress"),delete je.stop,ze.call(j,He,je)),!Se&&je&&je.empty.fire()},_queueHooks:function(j,oe){var ge=oe+"queueHooks";return De.get(j,ge)||De.access(j,ge,{empty:C.Callbacks("once memory").add(function(){De.remove(j,[oe+"queue",ge])})})}}),C.fn.extend({queue:function(j,oe){var ge=2;return typeof j!="string"&&(oe=j,j="fx",ge--),arguments.length<ge?C.queue(this[0],j):oe===void 0?this:this.each(function(){var Se=C.queue(this,j,oe);C._queueHooks(this,j),j==="fx"&&Se[0]!=="inprogress"&&C.dequeue(this,j)})},dequeue:function(j){return this.each(function(){C.dequeue(this,j)})},clearQueue:function(j){return this.queue(j||"fx",[])},promise:function(j,oe){var ge,Se=1,ze=C.Deferred(),je=this,He=this.length,Ct=function(){--Se||ze.resolveWith(je,[je])};for(typeof j!="string"&&(oe=j,j=void 0),j=j||"fx";He--;)ge=De.get(je[He],j+"queueHooks"),ge&&ge.empty&&(Se++,ge.empty.add(Ct));return Ct(),ze.promise(oe)}});var Be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ue=new RegExp("^(?:([+-])=|)("+Be+")([a-z%]*)$","i"),We=["Top","Right","Bottom","Left"],nt=M.documentElement,wt=function(j){return C.contains(j.ownerDocument,j)},Ut={composed:!0};nt.getRootNode&&(wt=function(j){return C.contains(j.ownerDocument,j)||j.getRootNode(Ut)===j.ownerDocument});var Vt=function(j,oe){return j=oe||j,j.style.display==="none"||j.style.display===""&&wt(j)&&C.css(j,"display")==="none"};function yi(j,oe,ge,Se){var ze,je,He=20,Ct=Se?function(){return Se.cur()}:function(){return C.css(j,oe,"")},vt=Ct(),Gt=ge&&ge[3]||(C.cssNumber[oe]?"":"px"),ii=j.nodeType&&(C.cssNumber[oe]||Gt!=="px"&&+vt)&&Ue.exec(C.css(j,oe));if(ii&&ii[3]!==Gt){for(vt=vt/2,Gt=Gt||ii[3],ii=+vt||1;He--;)C.style(j,oe,ii+Gt),(1-je)*(1-(je=Ct()/vt||.5))<=0&&(He=0),ii=ii/je;ii=ii*2,C.style(j,oe,ii+Gt),ge=ge||[]}return ge&&(ii=+ii||+vt||0,ze=ge[1]?ii+(ge[1]+1)*ge[2]:+ge[2],Se&&(Se.unit=Gt,Se.start=ii,Se.end=ze)),ze}var ri={};function Mi(j){var oe,ge=j.ownerDocument,Se=j.nodeName,ze=ri[Se];return ze||(oe=ge.body.appendChild(ge.createElement(Se)),ze=C.css(oe,"display"),oe.parentNode.removeChild(oe),ze==="none"&&(ze="block"),ri[Se]=ze,ze)}function $i(j,oe){for(var ge,Se,ze=[],je=0,He=j.length;je<He;je++)Se=j[je],Se.style&&(ge=Se.style.display,oe?(ge==="none"&&(ze[je]=De.get(Se,"display")||null,ze[je]||(Se.style.display="")),Se.style.display===""&&Vt(Se)&&(ze[je]=Mi(Se))):ge!=="none"&&(ze[je]="none",De.set(Se,"display",ge)));for(je=0;je<He;je++)ze[je]!=null&&(j[je].style.display=ze[je]);return j}C.fn.extend({show:function(){return $i(this,!0)},hide:function(){return $i(this)},toggle:function(j){return typeof j=="boolean"?j?this.show():this.hide():this.each(function(){Vt(this)?C(this).show():C(this).hide()})}});var zi=/^(?:checkbox|radio)$/i,qi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Oi=/^$|^module$|\/(?:java|ecma)script/i;(function(){var j=M.createDocumentFragment(),oe=j.appendChild(M.createElement("div")),ge=M.createElement("input");ge.setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),oe.appendChild(ge),I.checkClone=oe.cloneNode(!0).cloneNode(!0).lastChild.checked,oe.innerHTML="<textarea>x</textarea>",I.noCloneChecked=!!oe.cloneNode(!0).lastChild.defaultValue,oe.innerHTML="<option></option>",I.option=!!oe.lastChild})();var _n={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};_n.tbody=_n.tfoot=_n.colgroup=_n.caption=_n.thead,_n.th=_n.td,I.option||(_n.optgroup=_n.option=[1,"<select multiple='multiple'>","</select>"]);function wn(j,oe){var ge;return typeof j.getElementsByTagName<"u"?ge=j.getElementsByTagName(oe||"*"):typeof j.querySelectorAll<"u"?ge=j.querySelectorAll(oe||"*"):ge=[],oe===void 0||oe&&E(j,oe)?C.merge([j],ge):ge}function Yn(j,oe){for(var ge=0,Se=j.length;ge<Se;ge++)De.set(j[ge],"globalEval",!oe||De.get(oe[ge],"globalEval"))}var Ts=/<|&#?\w+;/;function ur(j,oe,ge,Se,ze){for(var je,He,Ct,vt,Gt,ii,fi=oe.createDocumentFragment(),Kt=[],ei=0,Pi=j.length;ei<Pi;ei++)if(je=j[ei],je||je===0)if(G(je)==="object")C.merge(Kt,je.nodeType?[je]:je);else if(!Ts.test(je))Kt.push(oe.createTextNode(je));else{for(He=He||fi.appendChild(oe.createElement("div")),Ct=(qi.exec(je)||["",""])[1].toLowerCase(),vt=_n[Ct]||_n._default,He.innerHTML=vt[1]+C.htmlPrefilter(je)+vt[2],ii=vt[0];ii--;)He=He.lastChild;C.merge(Kt,He.childNodes),He=fi.firstChild,He.textContent=""}for(fi.textContent="",ei=0;je=Kt[ei++];){if(Se&&C.inArray(je,Se)>-1){ze&&ze.push(je);continue}if(Gt=wt(je),He=wn(fi.appendChild(je),"script"),Gt&&Yn(He),ge)for(ii=0;je=He[ii++];)Oi.test(je.type||"")&&ge.push(je)}return fi}var Dr=/^([^.]*)(?:\.(.+)|)/;function Ir(){return!0}function za(){return!1}function uc(j,oe){return j===Ml()==(oe==="focus")}function Ml(){try{return M.activeElement}catch{}}function Ja(j,oe,ge,Se,ze,je){var He,Ct;if(typeof oe=="object"){typeof ge!="string"&&(Se=Se||ge,ge=void 0);for(Ct in oe)Ja(j,Ct,ge,Se,oe[Ct],je);return j}if(Se==null&&ze==null?(ze=ge,Se=ge=void 0):ze==null&&(typeof ge=="string"?(ze=Se,Se=void 0):(ze=Se,Se=ge,ge=void 0)),ze===!1)ze=za;else if(!ze)return j;return je===1&&(He=ze,ze=function(vt){return C().off(vt),He.apply(this,arguments)},ze.guid=He.guid||(He.guid=C.guid++)),j.each(function(){C.event.add(this,oe,ze,Se,ge)})}C.event={global:{},add:function(j,oe,ge,Se,ze){var je,He,Ct,vt,Gt,ii,fi,Kt,ei,Pi,Ln,en=De.get(j);if(be(j))for(ge.handler&&(je=ge,ge=je.handler,ze=je.selector),ze&&C.find.matchesSelector(nt,ze),ge.guid||(ge.guid=C.guid++),(vt=en.events)||(vt=en.events=Object.create(null)),(He=en.handle)||(He=en.handle=function(Qr){return typeof C<"u"&&C.event.triggered!==Qr.type?C.event.dispatch.apply(j,arguments):void 0}),oe=(oe||"").match(ce)||[""],Gt=oe.length;Gt--;)Ct=Dr.exec(oe[Gt])||[],ei=Ln=Ct[1],Pi=(Ct[2]||"").split(".").sort(),ei&&(fi=C.event.special[ei]||{},ei=(ze?fi.delegateType:fi.bindType)||ei,fi=C.event.special[ei]||{},ii=C.extend({type:ei,origType:Ln,data:Se,handler:ge,guid:ge.guid,selector:ze,needsContext:ze&&C.expr.match.needsContext.test(ze),namespace:Pi.join(".")},je),(Kt=vt[ei])||(Kt=vt[ei]=[],Kt.delegateCount=0,(!fi.setup||fi.setup.call(j,Se,Pi,He)===!1)&&j.addEventListener&&j.addEventListener(ei,He)),fi.add&&(fi.add.call(j,ii),ii.handler.guid||(ii.handler.guid=ge.guid)),ze?Kt.splice(Kt.delegateCount++,0,ii):Kt.push(ii),C.event.global[ei]=!0)},remove:function(j,oe,ge,Se,ze){var je,He,Ct,vt,Gt,ii,fi,Kt,ei,Pi,Ln,en=De.hasData(j)&&De.get(j);if(!(!en||!(vt=en.events))){for(oe=(oe||"").match(ce)||[""],Gt=oe.length;Gt--;){if(Ct=Dr.exec(oe[Gt])||[],ei=Ln=Ct[1],Pi=(Ct[2]||"").split(".").sort(),!ei){for(ei in vt)C.event.remove(j,ei+oe[Gt],ge,Se,!0);continue}for(fi=C.event.special[ei]||{},ei=(Se?fi.delegateType:fi.bindType)||ei,Kt=vt[ei]||[],Ct=Ct[2]&&new RegExp("(^|\\.)"+Pi.join("\\.(?:.*\\.|)")+"(\\.|$)"),He=je=Kt.length;je--;)ii=Kt[je],(ze||Ln===ii.origType)&&(!ge||ge.guid===ii.guid)&&(!Ct||Ct.test(ii.namespace))&&(!Se||Se===ii.selector||Se==="**"&&ii.selector)&&(Kt.splice(je,1),ii.selector&&Kt.delegateCount--,fi.remove&&fi.remove.call(j,ii));He&&!Kt.length&&((!fi.teardown||fi.teardown.call(j,Pi,en.handle)===!1)&&C.removeEvent(j,ei,en.handle),delete vt[ei])}C.isEmptyObject(vt)&&De.remove(j,"handle events")}},dispatch:function(j){var oe,ge,Se,ze,je,He,Ct=new Array(arguments.length),vt=C.event.fix(j),Gt=(De.get(this,"events")||Object.create(null))[vt.type]||[],ii=C.event.special[vt.type]||{};for(Ct[0]=vt,oe=1;oe<arguments.length;oe++)Ct[oe]=arguments[oe];if(vt.delegateTarget=this,!(ii.preDispatch&&ii.preDispatch.call(this,vt)===!1)){for(He=C.event.handlers.call(this,vt,Gt),oe=0;(ze=He[oe++])&&!vt.isPropagationStopped();)for(vt.currentTarget=ze.elem,ge=0;(je=ze.handlers[ge++])&&!vt.isImmediatePropagationStopped();)(!vt.rnamespace||je.namespace===!1||vt.rnamespace.test(je.namespace))&&(vt.handleObj=je,vt.data=je.data,Se=((C.event.special[je.origType]||{}).handle||je.handler).apply(ze.elem,Ct),Se!==void 0&&(vt.result=Se)===!1&&(vt.preventDefault(),vt.stopPropagation()));return ii.postDispatch&&ii.postDispatch.call(this,vt),vt.result}},handlers:function(j,oe){var ge,Se,ze,je,He,Ct=[],vt=oe.delegateCount,Gt=j.target;if(vt&&Gt.nodeType&&!(j.type==="click"&&j.button>=1)){for(;Gt!==this;Gt=Gt.parentNode||this)if(Gt.nodeType===1&&!(j.type==="click"&&Gt.disabled===!0)){for(je=[],He={},ge=0;ge<vt;ge++)Se=oe[ge],ze=Se.selector+" ",He[ze]===void 0&&(He[ze]=Se.needsContext?C(ze,this).index(Gt)>-1:C.find(ze,this,null,[Gt]).length),He[ze]&&je.push(Se);je.length&&Ct.push({elem:Gt,handlers:je})}}return Gt=this,vt<oe.length&&Ct.push({elem:Gt,handlers:oe.slice(vt)}),Ct},addProp:function(j,oe){Object.defineProperty(C.Event.prototype,j,{enumerable:!0,configurable:!0,get:O(oe)?function(){if(this.originalEvent)return oe(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[j]},set:function(ge){Object.defineProperty(this,j,{enumerable:!0,configurable:!0,writable:!0,value:ge})}})},fix:function(j){return j[C.expando]?j:new C.Event(j)},special:{load:{noBubble:!0},click:{setup:function(j){var oe=this||j;return zi.test(oe.type)&&oe.click&&E(oe,"input")&&io(oe,"click",Ir),!1},trigger:function(j){var oe=this||j;return zi.test(oe.type)&&oe.click&&E(oe,"input")&&io(oe,"click"),!0},_default:function(j){var oe=j.target;return zi.test(oe.type)&&oe.click&&E(oe,"input")&&De.get(oe,"click")||E(oe,"a")}},beforeunload:{postDispatch:function(j){j.result!==void 0&&j.originalEvent&&(j.originalEvent.returnValue=j.result)}}}};function io(j,oe,ge){if(!ge){De.get(j,oe)===void 0&&C.event.add(j,oe,Ir);return}De.set(j,oe,!1),C.event.add(j,oe,{namespace:!1,handler:function(Se){var ze,je,He=De.get(this,oe);if(Se.isTrigger&1&&this[oe]){if(He.length)(C.event.special[oe]||{}).delegateType&&Se.stopPropagation();else if(He=d.call(arguments),De.set(this,oe,He),ze=ge(this,oe),this[oe](),je=De.get(this,oe),He!==je||ze?De.set(this,oe,!1):je={},He!==je)return Se.stopImmediatePropagation(),Se.preventDefault(),je&&je.value}else He.length&&(De.set(this,oe,{value:C.event.trigger(C.extend(He[0],C.Event.prototype),He.slice(1),this)}),Se.stopImmediatePropagation())}})}C.removeEvent=function(j,oe,ge){j.removeEventListener&&j.removeEventListener(oe,ge)},C.Event=function(j,oe){if(!(this instanceof C.Event))return new C.Event(j,oe);j&&j.type?(this.originalEvent=j,this.type=j.type,this.isDefaultPrevented=j.defaultPrevented||j.defaultPrevented===void 0&&j.returnValue===!1?Ir:za,this.target=j.target&&j.target.nodeType===3?j.target.parentNode:j.target,this.currentTarget=j.currentTarget,this.relatedTarget=j.relatedTarget):this.type=j,oe&&C.extend(this,oe),this.timeStamp=j&&j.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:za,isPropagationStopped:za,isImmediatePropagationStopped:za,isSimulated:!1,preventDefault:function(){var j=this.originalEvent;this.isDefaultPrevented=Ir,j&&!this.isSimulated&&j.preventDefault()},stopPropagation:function(){var j=this.originalEvent;this.isPropagationStopped=Ir,j&&!this.isSimulated&&j.stopPropagation()},stopImmediatePropagation:function(){var j=this.originalEvent;this.isImmediatePropagationStopped=Ir,j&&!this.isSimulated&&j.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(j,oe){C.event.special[j]={setup:function(){return io(this,j,uc),!1},trigger:function(){return io(this,j),!0},_default:function(ge){return De.get(ge.target,j)},delegateType:oe}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(j,oe){C.event.special[j]={delegateType:oe,bindType:oe,handle:function(ge){var Se,ze=this,je=ge.relatedTarget,He=ge.handleObj;return(!je||je!==ze&&!C.contains(ze,je))&&(ge.type=He.origType,Se=He.handler.apply(this,arguments),ge.type=oe),Se}}}),C.fn.extend({on:function(j,oe,ge,Se){return Ja(this,j,oe,ge,Se)},one:function(j,oe,ge,Se){return Ja(this,j,oe,ge,Se,1)},off:function(j,oe,ge){var Se,ze;if(j&&j.preventDefault&&j.handleObj)return Se=j.handleObj,C(j.delegateTarget).off(Se.namespace?Se.origType+"."+Se.namespace:Se.origType,Se.selector,Se.handler),this;if(typeof j=="object"){for(ze in j)this.off(ze,oe,j[ze]);return this}return(oe===!1||typeof oe=="function")&&(ge=oe,oe=void 0),ge===!1&&(ge=za),this.each(function(){C.event.remove(this,j,ge,oe)})}});var Qa=/<script|<style|<link/i,Hc=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Oe(j,oe){return E(j,"table")&&E(oe.nodeType!==11?oe:oe.firstChild,"tr")&&C(j).children("tbody")[0]||j}function Ve(j){return j.type=(j.getAttribute("type")!==null)+"/"+j.type,j}function ot(j){return(j.type||"").slice(0,5)==="true/"?j.type=j.type.slice(5):j.removeAttribute("type"),j}function ut(j,oe){var ge,Se,ze,je,He,Ct,vt;if(oe.nodeType===1){if(De.hasData(j)&&(je=De.get(j),vt=je.events,vt)){De.remove(oe,"handle events");for(ze in vt)for(ge=0,Se=vt[ze].length;ge<Se;ge++)C.event.add(oe,ze,vt[ze][ge])}Ne.hasData(j)&&(He=Ne.access(j),Ct=C.extend({},He),Ne.set(oe,Ct))}}function Et(j,oe){var ge=oe.nodeName.toLowerCase();ge==="input"&&zi.test(j.type)?oe.checked=j.checked:(ge==="input"||ge==="textarea")&&(oe.defaultValue=j.defaultValue)}function Ot(j,oe,ge,Se){oe=m(oe);var ze,je,He,Ct,vt,Gt,ii=0,fi=j.length,Kt=fi-1,ei=oe[0],Pi=O(ei);if(Pi||fi>1&&typeof ei=="string"&&!I.checkClone&&Hc.test(ei))return j.each(function(Ln){var en=j.eq(Ln);Pi&&(oe[0]=ei.call(this,Ln,en.html())),Ot(en,oe,ge,Se)});if(fi&&(ze=ur(oe,j[0].ownerDocument,!1,j,Se),je=ze.firstChild,ze.childNodes.length===1&&(ze=je),je||Se)){for(He=C.map(wn(ze,"script"),Ve),Ct=He.length;ii<fi;ii++)vt=ze,ii!==Kt&&(vt=C.clone(vt,!0,!0),Ct&&C.merge(He,wn(vt,"script"))),ge.call(j[ii],vt,ii);if(Ct)for(Gt=He[He.length-1].ownerDocument,C.map(He,ot),ii=0;ii<Ct;ii++)vt=He[ii],Oi.test(vt.type||"")&&!De.access(vt,"globalEval")&&C.contains(Gt,vt)&&(vt.src&&(vt.type||"").toLowerCase()!=="module"?C._evalUrl&&!vt.noModule&&C._evalUrl(vt.src,{nonce:vt.nonce||vt.getAttribute("nonce")},Gt):k(vt.textContent.replace(at,""),vt,Gt))}return j}function Bt(j,oe,ge){for(var Se,ze=oe?C.filter(oe,j):j,je=0;(Se=ze[je])!=null;je++)!ge&&Se.nodeType===1&&C.cleanData(wn(Se)),Se.parentNode&&(ge&&wt(Se)&&Yn(wn(Se,"script")),Se.parentNode.removeChild(Se));return j}C.extend({htmlPrefilter:function(j){return j},clone:function(j,oe,ge){var Se,ze,je,He,Ct=j.cloneNode(!0),vt=wt(j);if(!I.noCloneChecked&&(j.nodeType===1||j.nodeType===11)&&!C.isXMLDoc(j))for(He=wn(Ct),je=wn(j),Se=0,ze=je.length;Se<ze;Se++)Et(je[Se],He[Se]);if(oe)if(ge)for(je=je||wn(j),He=He||wn(Ct),Se=0,ze=je.length;Se<ze;Se++)ut(je[Se],He[Se]);else ut(j,Ct);return He=wn(Ct,"script"),He.length>0&&Yn(He,!vt&&wn(j,"script")),Ct},cleanData:function(j){for(var oe,ge,Se,ze=C.event.special,je=0;(ge=j[je])!==void 0;je++)if(be(ge)){if(oe=ge[De.expando]){if(oe.events)for(Se in oe.events)ze[Se]?C.event.remove(ge,Se):C.removeEvent(ge,Se,oe.handle);ge[De.expando]=void 0}ge[Ne.expando]&&(ge[Ne.expando]=void 0)}}}),C.fn.extend({detach:function(j){return Bt(this,j,!0)},remove:function(j){return Bt(this,j)},text:function(j){return ae(this,function(oe){return oe===void 0?C.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=oe)})},null,j,arguments.length)},append:function(){return Ot(this,arguments,function(j){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var oe=Oe(this,j);oe.appendChild(j)}})},prepend:function(){return Ot(this,arguments,function(j){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var oe=Oe(this,j);oe.insertBefore(j,oe.firstChild)}})},before:function(){return Ot(this,arguments,function(j){this.parentNode&&this.parentNode.insertBefore(j,this)})},after:function(){return Ot(this,arguments,function(j){this.parentNode&&this.parentNode.insertBefore(j,this.nextSibling)})},empty:function(){for(var j,oe=0;(j=this[oe])!=null;oe++)j.nodeType===1&&(C.cleanData(wn(j,!1)),j.textContent="");return this},clone:function(j,oe){return j=j??!1,oe=oe??j,this.map(function(){return C.clone(this,j,oe)})},html:function(j){return ae(this,function(oe){var ge=this[0]||{},Se=0,ze=this.length;if(oe===void 0&&ge.nodeType===1)return ge.innerHTML;if(typeof oe=="string"&&!Qa.test(oe)&&!_n[(qi.exec(oe)||["",""])[1].toLowerCase()]){oe=C.htmlPrefilter(oe);try{for(;Se<ze;Se++)ge=this[Se]||{},ge.nodeType===1&&(C.cleanData(wn(ge,!1)),ge.innerHTML=oe);ge=0}catch{}}ge&&this.empty().append(oe)},null,j,arguments.length)},replaceWith:function(){var j=[];return Ot(this,arguments,function(oe){var ge=this.parentNode;C.inArray(this,j)<0&&(C.cleanData(wn(this)),ge&&ge.replaceChild(oe,this))},j)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(j,oe){C.fn[j]=function(ge){for(var Se,ze=[],je=C(ge),He=je.length-1,Ct=0;Ct<=He;Ct++)Se=Ct===He?this:this.clone(!0),C(je[Ct])[oe](Se),n.apply(ze,Se.get());return this.pushStack(ze)}});var Mt=new RegExp("^("+Be+")(?!px)[a-z%]+$","i"),jt=/^--/,li=function(j){var oe=j.ownerDocument.defaultView;return(!oe||!oe.opener)&&(oe=t),oe.getComputedStyle(j)},Ri=function(j,oe,ge){var Se,ze,je={};for(ze in oe)je[ze]=j.style[ze],j.style[ze]=oe[ze];Se=ge.call(j);for(ze in oe)j.style[ze]=je[ze];return Se},_i=new RegExp(We.join("|"),"i"),on="[\\x20\\t\\r\\n\\f]",rn=new RegExp("^"+on+"+|((?:^|[^\\\\])(?:\\\\.)*)"+on+"+$","g");(function(){function j(){if(Gt){vt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Gt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(vt).appendChild(Gt);var ii=t.getComputedStyle(Gt);ge=ii.top!=="1%",Ct=oe(ii.marginLeft)===12,Gt.style.right="60%",je=oe(ii.right)===36,Se=oe(ii.width)===36,Gt.style.position="absolute",ze=oe(Gt.offsetWidth/3)===12,nt.removeChild(vt),Gt=null}}function oe(ii){return Math.round(parseFloat(ii))}var ge,Se,ze,je,He,Ct,vt=M.createElement("div"),Gt=M.createElement("div");Gt.style&&(Gt.style.backgroundClip="content-box",Gt.cloneNode(!0).style.backgroundClip="",I.clearCloneStyle=Gt.style.backgroundClip==="content-box",C.extend(I,{boxSizingReliable:function(){return j(),Se},pixelBoxStyles:function(){return j(),je},pixelPosition:function(){return j(),ge},reliableMarginLeft:function(){return j(),Ct},scrollboxSize:function(){return j(),ze},reliableTrDimensions:function(){var ii,fi,Kt,ei;return He==null&&(ii=M.createElement("table"),fi=M.createElement("tr"),Kt=M.createElement("div"),ii.style.cssText="position:absolute;left:-11111px;border-collapse:separate",fi.style.cssText="border:1px solid",fi.style.height="1px",Kt.style.height="9px",Kt.style.display="block",nt.appendChild(ii).appendChild(fi).appendChild(Kt),ei=t.getComputedStyle(fi),He=parseInt(ei.height,10)+parseInt(ei.borderTopWidth,10)+parseInt(ei.borderBottomWidth,10)===fi.offsetHeight,nt.removeChild(ii)),He}}))})();function Xi(j,oe,ge){var Se,ze,je,He,Ct=jt.test(oe),vt=j.style;return ge=ge||li(j),ge&&(He=ge.getPropertyValue(oe)||ge[oe],Ct&&He&&(He=He.replace(rn,"$1")||void 0),He===""&&!wt(j)&&(He=C.style(j,oe)),!I.pixelBoxStyles()&&Mt.test(He)&&_i.test(oe)&&(Se=vt.width,ze=vt.minWidth,je=vt.maxWidth,vt.minWidth=vt.maxWidth=vt.width=He,He=ge.width,vt.width=Se,vt.minWidth=ze,vt.maxWidth=je)),He!==void 0?He+"":He}function hn(j,oe){return{get:function(){if(j()){delete this.get;return}return(this.get=oe).apply(this,arguments)}}}var Nn=["Webkit","Moz","ms"],er=M.createElement("div").style,Qi={};function Tr(j){for(var oe=j[0].toUpperCase()+j.slice(1),ge=Nn.length;ge--;)if(j=Nn[ge]+oe,j in er)return j}function lr(j){var oe=C.cssProps[j]||Qi[j];return oe||(j in er?j:Qi[j]=Tr(j)||j)}var ga=/^(none|table(?!-c[ea]).+)/,el={position:"absolute",visibility:"hidden",display:"block"},wo={letterSpacing:"0",fontWeight:"400"};function ni(j,oe,ge){var Se=Ue.exec(oe);return Se?Math.max(0,Se[2]-(ge||0))+(Se[3]||"px"):oe}function jo(j,oe,ge,Se,ze,je){var He=oe==="width"?1:0,Ct=0,vt=0;if(ge===(Se?"border":"content"))return 0;for(;He<4;He+=2)ge==="margin"&&(vt+=C.css(j,ge+We[He],!0,ze)),Se?(ge==="content"&&(vt-=C.css(j,"padding"+We[He],!0,ze)),ge!=="margin"&&(vt-=C.css(j,"border"+We[He]+"Width",!0,ze))):(vt+=C.css(j,"padding"+We[He],!0,ze),ge!=="padding"?vt+=C.css(j,"border"+We[He]+"Width",!0,ze):Ct+=C.css(j,"border"+We[He]+"Width",!0,ze));return!Se&&je>=0&&(vt+=Math.max(0,Math.ceil(j["offset"+oe[0].toUpperCase()+oe.slice(1)]-je-vt-Ct-.5))||0),vt}function as(j,oe,ge){var Se=li(j),ze=!I.boxSizingReliable()||ge,je=ze&&C.css(j,"boxSizing",!1,Se)==="border-box",He=je,Ct=Xi(j,oe,Se),vt="offset"+oe[0].toUpperCase()+oe.slice(1);if(Mt.test(Ct)){if(!ge)return Ct;Ct="auto"}return(!I.boxSizingReliable()&&je||!I.reliableTrDimensions()&&E(j,"tr")||Ct==="auto"||!parseFloat(Ct)&&C.css(j,"display",!1,Se)==="inline")&&j.getClientRects().length&&(je=C.css(j,"boxSizing",!1,Se)==="border-box",He=vt in j,He&&(Ct=j[vt])),Ct=parseFloat(Ct)||0,Ct+jo(j,oe,ge||(je?"border":"content"),He,Se,Ct)+"px"}C.extend({cssHooks:{opacity:{get:function(j,oe){if(oe){var ge=Xi(j,"opacity");return ge===""?"1":ge}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(j,oe,ge,Se){if(!(!j||j.nodeType===3||j.nodeType===8||!j.style)){var ze,je,He,Ct=me(oe),vt=jt.test(oe),Gt=j.style;if(vt||(oe=lr(Ct)),He=C.cssHooks[oe]||C.cssHooks[Ct],ge!==void 0){if(je=typeof ge,je==="string"&&(ze=Ue.exec(ge))&&ze[1]&&(ge=yi(j,oe,ze),je="number"),ge==null||ge!==ge)return;je==="number"&&!vt&&(ge+=ze&&ze[3]||(C.cssNumber[Ct]?"":"px")),!I.clearCloneStyle&&ge===""&&oe.indexOf("background")===0&&(Gt[oe]="inherit"),(!He||!("set"in He)||(ge=He.set(j,ge,Se))!==void 0)&&(vt?Gt.setProperty(oe,ge):Gt[oe]=ge)}else return He&&"get"in He&&(ze=He.get(j,!1,Se))!==void 0?ze:Gt[oe]}},css:function(j,oe,ge,Se){var ze,je,He,Ct=me(oe),vt=jt.test(oe);return vt||(oe=lr(Ct)),He=C.cssHooks[oe]||C.cssHooks[Ct],He&&"get"in He&&(ze=He.get(j,!0,ge)),ze===void 0&&(ze=Xi(j,oe,Se)),ze==="normal"&&oe in wo&&(ze=wo[oe]),ge===""||ge?(je=parseFloat(ze),ge===!0||isFinite(je)?je||0:ze):ze}}),C.each(["height","width"],function(j,oe){C.cssHooks[oe]={get:function(ge,Se,ze){if(Se)return ga.test(C.css(ge,"display"))&&(!ge.getClientRects().length||!ge.getBoundingClientRect().width)?Ri(ge,el,function(){return as(ge,oe,ze)}):as(ge,oe,ze)},set:function(ge,Se,ze){var je,He=li(ge),Ct=!I.scrollboxSize()&&He.position==="absolute",vt=Ct||ze,Gt=vt&&C.css(ge,"boxSizing",!1,He)==="border-box",ii=ze?jo(ge,oe,ze,Gt,He):0;return Gt&&Ct&&(ii-=Math.ceil(ge["offset"+oe[0].toUpperCase()+oe.slice(1)]-parseFloat(He[oe])-jo(ge,oe,"border",!1,He)-.5)),ii&&(je=Ue.exec(Se))&&(je[3]||"px")!=="px"&&(ge.style[oe]=Se,Se=C.css(ge,oe)),ni(ge,Se,ii)}}}),C.cssHooks.marginLeft=hn(I.reliableMarginLeft,function(j,oe){if(oe)return(parseFloat(Xi(j,"marginLeft"))||j.getBoundingClientRect().left-Ri(j,{marginLeft:0},function(){return j.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(j,oe){C.cssHooks[j+oe]={expand:function(ge){for(var Se=0,ze={},je=typeof ge=="string"?ge.split(" "):[ge];Se<4;Se++)ze[j+We[Se]+oe]=je[Se]||je[Se-2]||je[0];return ze}},j!=="margin"&&(C.cssHooks[j+oe].set=ni)}),C.fn.extend({css:function(j,oe){return ae(this,function(ge,Se,ze){var je,He,Ct={},vt=0;if(Array.isArray(Se)){for(je=li(ge),He=Se.length;vt<He;vt++)Ct[Se[vt]]=C.css(ge,Se[vt],!1,je);return Ct}return ze!==void 0?C.style(ge,Se,ze):C.css(ge,Se)},j,oe,arguments.length>1)}});function ls(j,oe,ge,Se,ze){return new ls.prototype.init(j,oe,ge,Se,ze)}C.Tween=ls,ls.prototype={constructor:ls,init:function(j,oe,ge,Se,ze,je){this.elem=j,this.prop=ge,this.easing=ze||C.easing._default,this.options=oe,this.start=this.now=this.cur(),this.end=Se,this.unit=je||(C.cssNumber[ge]?"":"px")},cur:function(){var j=ls.propHooks[this.prop];return j&&j.get?j.get(this):ls.propHooks._default.get(this)},run:function(j){var oe,ge=ls.propHooks[this.prop];return this.options.duration?this.pos=oe=C.easing[this.easing](j,this.options.duration*j,0,1,this.options.duration):this.pos=oe=j,this.now=(this.end-this.start)*oe+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),ge&&ge.set?ge.set(this):ls.propHooks._default.set(this),this}},ls.prototype.init.prototype=ls.prototype,ls.propHooks={_default:{get:function(j){var oe;return j.elem.nodeType!==1||j.elem[j.prop]!=null&&j.elem.style[j.prop]==null?j.elem[j.prop]:(oe=C.css(j.elem,j.prop,""),!oe||oe==="auto"?0:oe)},set:function(j){C.fx.step[j.prop]?C.fx.step[j.prop](j):j.elem.nodeType===1&&(C.cssHooks[j.prop]||j.elem.style[lr(j.prop)]!=null)?C.style(j.elem,j.prop,j.now+j.unit):j.elem[j.prop]=j.now}}},ls.propHooks.scrollTop=ls.propHooks.scrollLeft={set:function(j){j.elem.nodeType&&j.elem.parentNode&&(j.elem[j.prop]=j.now)}},C.easing={linear:function(j){return j},swing:function(j){return .5-Math.cos(j*Math.PI)/2},_default:"swing"},C.fx=ls.prototype.init,C.fx.step={};var pc,Ks,xh=/^(?:toggle|show|hide)$/,od=/queueHooks$/;function Ls(){Ks&&(M.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Ls):t.setTimeout(Ls,C.fx.interval),C.fx.tick())}function Li(){return t.setTimeout(function(){pc=void 0}),pc=Date.now()}function zn(j,oe){var ge,Se=0,ze={height:j};for(oe=oe?1:0;Se<4;Se+=2-oe)ge=We[Se],ze["margin"+ge]=ze["padding"+ge]=j;return oe&&(ze.opacity=ze.width=j),ze}function Fn(j,oe,ge){for(var Se,ze=(yn.tweeners[oe]||[]).concat(yn.tweeners["*"]),je=0,He=ze.length;je<He;je++)if(Se=ze[je].call(ge,oe,j))return Se}function Uo(j,oe,ge){var Se,ze,je,He,Ct,vt,Gt,ii,fi="width"in oe||"height"in oe,Kt=this,ei={},Pi=j.style,Ln=j.nodeType&&Vt(j),en=De.get(j,"fxshow");ge.queue||(He=C._queueHooks(j,"fx"),He.unqueued==null&&(He.unqueued=0,Ct=He.empty.fire,He.empty.fire=function(){He.unqueued||Ct()}),He.unqueued++,Kt.always(function(){Kt.always(function(){He.unqueued--,C.queue(j,"fx").length||He.empty.fire()})}));for(Se in oe)if(ze=oe[Se],xh.test(ze)){if(delete oe[Se],je=je||ze==="toggle",ze===(Ln?"hide":"show"))if(ze==="show"&&en&&en[Se]!==void 0)Ln=!0;else continue;ei[Se]=en&&en[Se]||C.style(j,Se)}if(vt=!C.isEmptyObject(oe),!(!vt&&C.isEmptyObject(ei))){fi&&j.nodeType===1&&(ge.overflow=[Pi.overflow,Pi.overflowX,Pi.overflowY],Gt=en&&en.display,Gt==null&&(Gt=De.get(j,"display")),ii=C.css(j,"display"),ii==="none"&&(Gt?ii=Gt:($i([j],!0),Gt=j.style.display||Gt,ii=C.css(j,"display"),$i([j]))),(ii==="inline"||ii==="inline-block"&&Gt!=null)&&C.css(j,"float")==="none"&&(vt||(Kt.done(function(){Pi.display=Gt}),Gt==null&&(ii=Pi.display,Gt=ii==="none"?"":ii)),Pi.display="inline-block")),ge.overflow&&(Pi.overflow="hidden",Kt.always(function(){Pi.overflow=ge.overflow[0],Pi.overflowX=ge.overflow[1],Pi.overflowY=ge.overflow[2]})),vt=!1;for(Se in ei)vt||(en?"hidden"in en&&(Ln=en.hidden):en=De.access(j,"fxshow",{display:Gt}),je&&(en.hidden=!Ln),Ln&&$i([j],!0),Kt.done(function(){Ln||$i([j]),De.remove(j,"fxshow");for(Se in ei)C.style(j,Se,ei[Se])})),vt=Fn(Ln?en[Se]:0,Se,Kt),Se in en||(en[Se]=vt.start,Ln&&(vt.end=vt.start,vt.start=0))}}function _a(j,oe){var ge,Se,ze,je,He;for(ge in j)if(Se=me(ge),ze=oe[Se],je=j[ge],Array.isArray(je)&&(ze=je[1],je=j[ge]=je[0]),ge!==Se&&(j[Se]=je,delete j[ge]),He=C.cssHooks[Se],He&&"expand"in He){je=He.expand(je),delete j[Se];for(ge in je)ge in j||(j[ge]=je[ge],oe[ge]=ze)}else oe[Se]=ze}function yn(j,oe,ge){var Se,ze,je=0,He=yn.prefilters.length,Ct=C.Deferred().always(function(){delete vt.elem}),vt=function(){if(ze)return!1;for(var fi=pc||Li(),Kt=Math.max(0,Gt.startTime+Gt.duration-fi),ei=Kt/Gt.duration||0,Pi=1-ei,Ln=0,en=Gt.tweens.length;Ln<en;Ln++)Gt.tweens[Ln].run(Pi);return Ct.notifyWith(j,[Gt,Pi,Kt]),Pi<1&&en?Kt:(en||Ct.notifyWith(j,[Gt,1,0]),Ct.resolveWith(j,[Gt]),!1)},Gt=Ct.promise({elem:j,props:C.extend({},oe),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},ge),originalProperties:oe,originalOptions:ge,startTime:pc||Li(),duration:ge.duration,tweens:[],createTween:function(fi,Kt){var ei=C.Tween(j,Gt.opts,fi,Kt,Gt.opts.specialEasing[fi]||Gt.opts.easing);return Gt.tweens.push(ei),ei},stop:function(fi){var Kt=0,ei=fi?Gt.tweens.length:0;if(ze)return this;for(ze=!0;Kt<ei;Kt++)Gt.tweens[Kt].run(1);return fi?(Ct.notifyWith(j,[Gt,1,0]),Ct.resolveWith(j,[Gt,fi])):Ct.rejectWith(j,[Gt,fi]),this}}),ii=Gt.props;for(_a(ii,Gt.opts.specialEasing);je<He;je++)if(Se=yn.prefilters[je].call(Gt,j,ii,Gt.opts),Se)return O(Se.stop)&&(C._queueHooks(Gt.elem,Gt.opts.queue).stop=Se.stop.bind(Se)),Se;return C.map(ii,Fn,Gt),O(Gt.opts.start)&&Gt.opts.start.call(j,Gt),Gt.progress(Gt.opts.progress).done(Gt.opts.done,Gt.opts.complete).fail(Gt.opts.fail).always(Gt.opts.always),C.fx.timer(C.extend(vt,{elem:j,anim:Gt,queue:Gt.opts.queue})),Gt}C.Animation=C.extend(yn,{tweeners:{"*":[function(j,oe){var ge=this.createTween(j,oe);return yi(ge.elem,j,Ue.exec(oe),ge),ge}]},tweener:function(j,oe){O(j)?(oe=j,j=["*"]):j=j.match(ce);for(var ge,Se=0,ze=j.length;Se<ze;Se++)ge=j[Se],yn.tweeners[ge]=yn.tweeners[ge]||[],yn.tweeners[ge].unshift(oe)},prefilters:[Uo],prefilter:function(j,oe){oe?yn.prefilters.unshift(j):yn.prefilters.push(j)}}),C.speed=function(j,oe,ge){var Se=j&&typeof j=="object"?C.extend({},j):{complete:ge||!ge&&oe||O(j)&&j,duration:j,easing:ge&&oe||oe&&!O(oe)&&oe};return C.fx.off?Se.duration=0:typeof Se.duration!="number"&&(Se.duration in C.fx.speeds?Se.duration=C.fx.speeds[Se.duration]:Se.duration=C.fx.speeds._default),(Se.queue==null||Se.queue===!0)&&(Se.queue="fx"),Se.old=Se.complete,Se.complete=function(){O(Se.old)&&Se.old.call(this),Se.queue&&C.dequeue(this,Se.queue)},Se},C.fn.extend({fadeTo:function(j,oe,ge,Se){return this.filter(Vt).css("opacity",0).show().end().animate({opacity:oe},j,ge,Se)},animate:function(j,oe,ge,Se){var ze=C.isEmptyObject(j),je=C.speed(oe,ge,Se),He=function(){var Ct=yn(this,C.extend({},j),je);(ze||De.get(this,"finish"))&&Ct.stop(!0)};return He.finish=He,ze||je.queue===!1?this.each(He):this.queue(je.queue,He)},stop:function(j,oe,ge){var Se=function(ze){var je=ze.stop;delete ze.stop,je(ge)};return typeof j!="string"&&(ge=oe,oe=j,j=void 0),oe&&this.queue(j||"fx",[]),this.each(function(){var ze=!0,je=j!=null&&j+"queueHooks",He=C.timers,Ct=De.get(this);if(je)Ct[je]&&Ct[je].stop&&Se(Ct[je]);else for(je in Ct)Ct[je]&&Ct[je].stop&&od.test(je)&&Se(Ct[je]);for(je=He.length;je--;)He[je].elem===this&&(j==null||He[je].queue===j)&&(He[je].anim.stop(ge),ze=!1,He.splice(je,1));(ze||!ge)&&C.dequeue(this,j)})},finish:function(j){return j!==!1&&(j=j||"fx"),this.each(function(){var oe,ge=De.get(this),Se=ge[j+"queue"],ze=ge[j+"queueHooks"],je=C.timers,He=Se?Se.length:0;for(ge.finish=!0,C.queue(this,j,[]),ze&&ze.stop&&ze.stop.call(this,!0),oe=je.length;oe--;)je[oe].elem===this&&je[oe].queue===j&&(je[oe].anim.stop(!0),je.splice(oe,1));for(oe=0;oe<He;oe++)Se[oe]&&Se[oe].finish&&Se[oe].finish.call(this);delete ge.finish})}}),C.each(["toggle","show","hide"],function(j,oe){var ge=C.fn[oe];C.fn[oe]=function(Se,ze,je){return Se==null||typeof Se=="boolean"?ge.apply(this,arguments):this.animate(zn(oe,!0),Se,ze,je)}}),C.each({slideDown:zn("show"),slideUp:zn("hide"),slideToggle:zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(j,oe){C.fn[j]=function(ge,Se,ze){return this.animate(oe,ge,Se,ze)}}),C.timers=[],C.fx.tick=function(){var j,oe=0,ge=C.timers;for(pc=Date.now();oe<ge.length;oe++)j=ge[oe],!j()&&ge[oe]===j&&ge.splice(oe--,1);ge.length||C.fx.stop(),pc=void 0},C.fx.timer=function(j){C.timers.push(j),C.fx.start()},C.fx.interval=13,C.fx.start=function(){Ks||(Ks=!0,Ls())},C.fx.stop=function(){Ks=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(j,oe){return j=C.fx&&C.fx.speeds[j]||j,oe=oe||"fx",this.queue(oe,function(ge,Se){var ze=t.setTimeout(ge,j);Se.stop=function(){t.clearTimeout(ze)}})},function(){var j=M.createElement("input"),oe=M.createElement("select"),ge=oe.appendChild(M.createElement("option"));j.type="checkbox",I.checkOn=j.value!=="",I.optSelected=ge.selected,j=M.createElement("input"),j.value="t",j.type="radio",I.radioValue=j.value==="t"}();var fc,ta=C.expr.attrHandle;C.fn.extend({attr:function(j,oe){return ae(this,C.attr,j,oe,arguments.length>1)},removeAttr:function(j){return this.each(function(){C.removeAttr(this,j)})}}),C.extend({attr:function(j,oe,ge){var Se,ze,je=j.nodeType;if(!(je===3||je===8||je===2)){if(typeof j.getAttribute>"u")return C.prop(j,oe,ge);if((je!==1||!C.isXMLDoc(j))&&(ze=C.attrHooks[oe.toLowerCase()]||(C.expr.match.bool.test(oe)?fc:void 0)),ge!==void 0){if(ge===null){C.removeAttr(j,oe);return}return ze&&"set"in ze&&(Se=ze.set(j,ge,oe))!==void 0?Se:(j.setAttribute(oe,ge+""),ge)}return ze&&"get"in ze&&(Se=ze.get(j,oe))!==null?Se:(Se=C.find.attr(j,oe),Se??void 0)}},attrHooks:{type:{set:function(j,oe){if(!I.radioValue&&oe==="radio"&&E(j,"input")){var ge=j.value;return j.setAttribute("type",oe),ge&&(j.value=ge),oe}}}},removeAttr:function(j,oe){var ge,Se=0,ze=oe&&oe.match(ce);if(ze&&j.nodeType===1)for(;ge=ze[Se++];)j.removeAttribute(ge)}}),fc={set:function(j,oe,ge){return oe===!1?C.removeAttr(j,ge):j.setAttribute(ge,ge),ge}},C.each(C.expr.match.bool.source.match(/\w+/g),function(j,oe){var ge=ta[oe]||C.find.attr;ta[oe]=function(Se,ze,je){var He,Ct,vt=ze.toLowerCase();return je||(Ct=ta[vt],ta[vt]=He,He=ge(Se,ze,je)!=null?vt:null,ta[vt]=Ct),He}});var Na=/^(?:input|select|textarea|button)$/i,Ss=/^(?:a|area)$/i;C.fn.extend({prop:function(j,oe){return ae(this,C.prop,j,oe,arguments.length>1)},removeProp:function(j){return this.each(function(){delete this[C.propFix[j]||j]})}}),C.extend({prop:function(j,oe,ge){var Se,ze,je=j.nodeType;if(!(je===3||je===8||je===2))return(je!==1||!C.isXMLDoc(j))&&(oe=C.propFix[oe]||oe,ze=C.propHooks[oe]),ge!==void 0?ze&&"set"in ze&&(Se=ze.set(j,ge,oe))!==void 0?Se:j[oe]=ge:ze&&"get"in ze&&(Se=ze.get(j,oe))!==null?Se:j[oe]},propHooks:{tabIndex:{get:function(j){var oe=C.find.attr(j,"tabindex");return oe?parseInt(oe,10):Na.test(j.nodeName)||Ss.test(j.nodeName)&&j.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),I.optSelected||(C.propHooks.selected={get:function(j){var oe=j.parentNode;return oe&&oe.parentNode&&oe.parentNode.selectedIndex,null},set:function(j){var oe=j.parentNode;oe&&(oe.selectedIndex,oe.parentNode&&oe.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this});function xr(j){var oe=j.match(ce)||[];return oe.join(" ")}function Vs(j){return j.getAttribute&&j.getAttribute("class")||""}function Fa(j){return Array.isArray(j)?j:typeof j=="string"?j.match(ce)||[]:[]}C.fn.extend({addClass:function(j){var oe,ge,Se,ze,je,He;return O(j)?this.each(function(Ct){C(this).addClass(j.call(this,Ct,Vs(this)))}):(oe=Fa(j),oe.length?this.each(function(){if(Se=Vs(this),ge=this.nodeType===1&&" "+xr(Se)+" ",ge){for(je=0;je<oe.length;je++)ze=oe[je],ge.indexOf(" "+ze+" ")<0&&(ge+=ze+" ");He=xr(ge),Se!==He&&this.setAttribute("class",He)}}):this)},removeClass:function(j){var oe,ge,Se,ze,je,He;return O(j)?this.each(function(Ct){C(this).removeClass(j.call(this,Ct,Vs(this)))}):arguments.length?(oe=Fa(j),oe.length?this.each(function(){if(Se=Vs(this),ge=this.nodeType===1&&" "+xr(Se)+" ",ge){for(je=0;je<oe.length;je++)for(ze=oe[je];ge.indexOf(" "+ze+" ")>-1;)ge=ge.replace(" "+ze+" "," ");He=xr(ge),Se!==He&&this.setAttribute("class",He)}}):this):this.attr("class","")},toggleClass:function(j,oe){var ge,Se,ze,je,He=typeof j,Ct=He==="string"||Array.isArray(j);return O(j)?this.each(function(vt){C(this).toggleClass(j.call(this,vt,Vs(this),oe),oe)}):typeof oe=="boolean"&&Ct?oe?this.addClass(j):this.removeClass(j):(ge=Fa(j),this.each(function(){if(Ct)for(je=C(this),ze=0;ze<ge.length;ze++)Se=ge[ze],je.hasClass(Se)?je.removeClass(Se):je.addClass(Se);else(j===void 0||He==="boolean")&&(Se=Vs(this),Se&&De.set(this,"__className__",Se),this.setAttribute&&this.setAttribute("class",Se||j===!1?"":De.get(this,"__className__")||""))}))},hasClass:function(j){var oe,ge,Se=0;for(oe=" "+j+" ";ge=this[Se++];)if(ge.nodeType===1&&(" "+xr(Vs(ge))+" ").indexOf(oe)>-1)return!0;return!1}});var Al=/\r/g;C.fn.extend({val:function(j){var oe,ge,Se,ze=this[0];return arguments.length?(Se=O(j),this.each(function(je){var He;this.nodeType===1&&(Se?He=j.call(this,je,C(this).val()):He=j,He==null?He="":typeof He=="number"?He+="":Array.isArray(He)&&(He=C.map(He,function(Ct){return Ct==null?"":Ct+""})),oe=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()],(!oe||!("set"in oe)||oe.set(this,He,"value")===void 0)&&(this.value=He))})):ze?(oe=C.valHooks[ze.type]||C.valHooks[ze.nodeName.toLowerCase()],oe&&"get"in oe&&(ge=oe.get(ze,"value"))!==void 0?ge:(ge=ze.value,typeof ge=="string"?ge.replace(Al,""):ge??"")):void 0}}),C.extend({valHooks:{option:{get:function(j){var oe=C.find.attr(j,"value");return oe??xr(C.text(j))}},select:{get:function(j){var oe,ge,Se,ze=j.options,je=j.selectedIndex,He=j.type==="select-one",Ct=He?null:[],vt=He?je+1:ze.length;for(je<0?Se=vt:Se=He?je:0;Se<vt;Se++)if(ge=ze[Se],(ge.selected||Se===je)&&!ge.disabled&&(!ge.parentNode.disabled||!E(ge.parentNode,"optgroup"))){if(oe=C(ge).val(),He)return oe;Ct.push(oe)}return Ct},set:function(j,oe){for(var ge,Se,ze=j.options,je=C.makeArray(oe),He=ze.length;He--;)Se=ze[He],(Se.selected=C.inArray(C.valHooks.option.get(Se),je)>-1)&&(ge=!0);return ge||(j.selectedIndex=-1),je}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(j,oe){if(Array.isArray(oe))return j.checked=C.inArray(C(j).val(),oe)>-1}},I.checkOn||(C.valHooks[this].get=function(j){return j.getAttribute("value")===null?"on":j.value})}),I.focusin="onfocusin"in t;var ia=/^(?:focusinfocus|focusoutblur)$/,kl=function(j){j.stopPropagation()};C.extend(C.event,{trigger:function(j,oe,ge,Se){var ze,je,He,Ct,vt,Gt,ii,fi,Kt=[ge||M],ei=z.call(j,"type")?j.type:j,Pi=z.call(j,"namespace")?j.namespace.split("."):[];if(je=fi=He=ge=ge||M,!(ge.nodeType===3||ge.nodeType===8)&&!ia.test(ei+C.event.triggered)&&(ei.indexOf(".")>-1&&(Pi=ei.split("."),ei=Pi.shift(),Pi.sort()),vt=ei.indexOf(":")<0&&"on"+ei,j=j[C.expando]?j:new C.Event(ei,typeof j=="object"&&j),j.isTrigger=Se?2:3,j.namespace=Pi.join("."),j.rnamespace=j.namespace?new RegExp("(^|\\.)"+Pi.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,j.result=void 0,j.target||(j.target=ge),oe=oe==null?[j]:C.makeArray(oe,[j]),ii=C.event.special[ei]||{},!(!Se&&ii.trigger&&ii.trigger.apply(ge,oe)===!1))){if(!Se&&!ii.noBubble&&!$(ge)){for(Ct=ii.delegateType||ei,ia.test(Ct+ei)||(je=je.parentNode);je;je=je.parentNode)Kt.push(je),He=je;He===(ge.ownerDocument||M)&&Kt.push(He.defaultView||He.parentWindow||t)}for(ze=0;(je=Kt[ze++])&&!j.isPropagationStopped();)fi=je,j.type=ze>1?Ct:ii.bindType||ei,Gt=(De.get(je,"events")||Object.create(null))[j.type]&&De.get(je,"handle"),Gt&&Gt.apply(je,oe),Gt=vt&&je[vt],Gt&&Gt.apply&&be(je)&&(j.result=Gt.apply(je,oe),j.result===!1&&j.preventDefault());return j.type=ei,!Se&&!j.isDefaultPrevented()&&(!ii._default||ii._default.apply(Kt.pop(),oe)===!1)&&be(ge)&&vt&&O(ge[ei])&&!$(ge)&&(He=ge[vt],He&&(ge[vt]=null),C.event.triggered=ei,j.isPropagationStopped()&&fi.addEventListener(ei,kl),ge[ei](),j.isPropagationStopped()&&fi.removeEventListener(ei,kl),C.event.triggered=void 0,He&&(ge[vt]=He)),j.result}},simulate:function(j,oe,ge){var Se=C.extend(new C.Event,ge,{type:j,isSimulated:!0});C.event.trigger(Se,null,oe)}}),C.fn.extend({trigger:function(j,oe){return this.each(function(){C.event.trigger(j,oe,this)})},triggerHandler:function(j,oe){var ge=this[0];if(ge)return C.event.trigger(j,oe,ge,!0)}}),I.focusin||C.each({focus:"focusin",blur:"focusout"},function(j,oe){var ge=function(Se){C.event.simulate(oe,Se.target,C.event.fix(Se))};C.event.special[oe]={setup:function(){var Se=this.ownerDocument||this.document||this,ze=De.access(Se,oe);ze||Se.addEventListener(j,ge,!0),De.access(Se,oe,(ze||0)+1)},teardown:function(){var Se=this.ownerDocument||this.document||this,ze=De.access(Se,oe)-1;ze?De.access(Se,oe,ze):(Se.removeEventListener(j,ge,!0),De.remove(Se,oe))}}});var tl=t.location,ja={guid:Date.now()},il=/\?/;C.parseXML=function(j){var oe,ge;if(!j||typeof j!="string")return null;try{oe=new t.DOMParser().parseFromString(j,"text/xml")}catch{}return ge=oe&&oe.getElementsByTagName("parsererror")[0],(!oe||ge)&&C.error("Invalid XML: "+(ge?C.map(ge.childNodes,function(Se){return Se.textContent}).join(`
`):j)),oe};var Wc=/\[\]$/,Yc=/\r?\n/g,no=/^(?:submit|button|image|reset|file)$/i,is=/^(?:input|select|textarea|keygen)/i;function Pl(j,oe,ge,Se){var ze;if(Array.isArray(oe))C.each(oe,function(je,He){ge||Wc.test(j)?Se(j,He):Pl(j+"["+(typeof He=="object"&&He!=null?je:"")+"]",He,ge,Se)});else if(!ge&&G(oe)==="object")for(ze in oe)Pl(j+"["+ze+"]",oe[ze],ge,Se);else Se(j,oe)}C.param=function(j,oe){var ge,Se=[],ze=function(je,He){var Ct=O(He)?He():He;Se[Se.length]=encodeURIComponent(je)+"="+encodeURIComponent(Ct??"")};if(j==null)return"";if(Array.isArray(j)||j.jquery&&!C.isPlainObject(j))C.each(j,function(){ze(this.name,this.value)});else for(ge in j)Pl(ge,j[ge],oe,ze);return Se.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var j=C.prop(this,"elements");return j?C.makeArray(j):this}).filter(function(){var j=this.type;return this.name&&!C(this).is(":disabled")&&is.test(this.nodeName)&&!no.test(j)&&(this.checked||!zi.test(j))}).map(function(j,oe){var ge=C(this).val();return ge==null?null:Array.isArray(ge)?C.map(ge,function(Se){return{name:oe.name,value:Se.replace(Yc,`\r
`)}}):{name:oe.name,value:ge.replace(Yc,`\r
`)}}).get()}});var ad=/%20/g,Os=/#.*$/,Go=/([?&])_=[^&]*/,su=/^(.*?):[ \t]*([^\r\n]*)$/mg,bh=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ys=/^(?:GET|HEAD)$/,Dl=/^\/\//,wh={},Il={},Es="*/".concat("*"),nl=M.createElement("a");nl.href=tl.href;function Th(j){return function(oe,ge){typeof oe!="string"&&(ge=oe,oe="*");var Se,ze=0,je=oe.toLowerCase().match(ce)||[];if(O(ge))for(;Se=je[ze++];)Se[0]==="+"?(Se=Se.slice(1)||"*",(j[Se]=j[Se]||[]).unshift(ge)):(j[Se]=j[Se]||[]).push(ge)}}function nr(j,oe,ge,Se){var ze={},je=j===Il;function He(Ct){var vt;return ze[Ct]=!0,C.each(j[Ct]||[],function(Gt,ii){var fi=ii(oe,ge,Se);if(typeof fi=="string"&&!je&&!ze[fi])return oe.dataTypes.unshift(fi),He(fi),!1;if(je)return!(vt=fi)}),vt}return He(oe.dataTypes[0])||!ze["*"]&&He("*")}function pr(j,oe){var ge,Se,ze=C.ajaxSettings.flatOptions||{};for(ge in oe)oe[ge]!==void 0&&((ze[ge]?j:Se||(Se={}))[ge]=oe[ge]);return Se&&C.extend(!0,j,Se),j}function Sh(j,oe,ge){for(var Se,ze,je,He,Ct=j.contents,vt=j.dataTypes;vt[0]==="*";)vt.shift(),Se===void 0&&(Se=j.mimeType||oe.getResponseHeader("Content-Type"));if(Se){for(ze in Ct)if(Ct[ze]&&Ct[ze].test(Se)){vt.unshift(ze);break}}if(vt[0]in ge)je=vt[0];else{for(ze in ge){if(!vt[0]||j.converters[ze+" "+vt[0]]){je=ze;break}He||(He=ze)}je=je||He}if(je)return je!==vt[0]&&vt.unshift(je),ge[je]}function _p(j,oe,ge,Se){var ze,je,He,Ct,vt,Gt={},ii=j.dataTypes.slice();if(ii[1])for(He in j.converters)Gt[He.toLowerCase()]=j.converters[He];for(je=ii.shift();je;)if(j.responseFields[je]&&(ge[j.responseFields[je]]=oe),!vt&&Se&&j.dataFilter&&(oe=j.dataFilter(oe,j.dataType)),vt=je,je=ii.shift(),je){if(je==="*")je=vt;else if(vt!=="*"&&vt!==je){if(He=Gt[vt+" "+je]||Gt["* "+je],!He){for(ze in Gt)if(Ct=ze.split(" "),Ct[1]===je&&(He=Gt[vt+" "+Ct[0]]||Gt["* "+Ct[0]],He)){He===!0?He=Gt[ze]:Gt[ze]!==!0&&(je=Ct[0],ii.unshift(Ct[1]));break}}if(He!==!0)if(He&&j.throws)oe=He(oe);else try{oe=He(oe)}catch(fi){return{state:"parsererror",error:He?fi:"No conversion from "+vt+" to "+je}}}}return{state:"success",data:oe}}C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:tl.href,type:"GET",isLocal:bh.test(tl.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Es,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(j,oe){return oe?pr(pr(j,C.ajaxSettings),oe):pr(C.ajaxSettings,j)},ajaxPrefilter:Th(wh),ajaxTransport:Th(Il),ajax:function(j,oe){typeof j=="object"&&(oe=j,j=void 0),oe=oe||{};var ge,Se,ze,je,He,Ct,vt,Gt,ii,fi,Kt=C.ajaxSetup({},oe),ei=Kt.context||Kt,Pi=Kt.context&&(ei.nodeType||ei.jquery)?C(ei):C.event,Ln=C.Deferred(),en=C.Callbacks("once memory"),Qr=Kt.statusCode||{},zr={},Vn={},$n="canceled",Tn={readyState:0,getResponseHeader:function(Xn){var Cr;if(vt){if(!je)for(je={};Cr=su.exec(ze);)je[Cr[1].toLowerCase()+" "]=(je[Cr[1].toLowerCase()+" "]||[]).concat(Cr[2]);Cr=je[Xn.toLowerCase()+" "]}return Cr==null?null:Cr.join(", ")},getAllResponseHeaders:function(){return vt?ze:null},setRequestHeader:function(Xn,Cr){return vt==null&&(Xn=Vn[Xn.toLowerCase()]=Vn[Xn.toLowerCase()]||Xn,zr[Xn]=Cr),this},overrideMimeType:function(Xn){return vt==null&&(Kt.mimeType=Xn),this},statusCode:function(Xn){var Cr;if(Xn)if(vt)Tn.always(Xn[Tn.status]);else for(Cr in Xn)Qr[Cr]=[Qr[Cr],Xn[Cr]];return this},abort:function(Xn){var Cr=Xn||$n;return ge&&ge.abort(Cr),Js(0,Cr),this}};if(Ln.promise(Tn),Kt.url=((j||Kt.url||tl.href)+"").replace(Dl,tl.protocol+"//"),Kt.type=oe.method||oe.type||Kt.method||Kt.type,Kt.dataTypes=(Kt.dataType||"*").toLowerCase().match(ce)||[""],Kt.crossDomain==null){Ct=M.createElement("a");try{Ct.href=Kt.url,Ct.href=Ct.href,Kt.crossDomain=nl.protocol+"//"+nl.host!=Ct.protocol+"//"+Ct.host}catch{Kt.crossDomain=!0}}if(Kt.data&&Kt.processData&&typeof Kt.data!="string"&&(Kt.data=C.param(Kt.data,Kt.traditional)),nr(wh,Kt,oe,Tn),vt)return Tn;Gt=C.event&&Kt.global,Gt&&C.active++===0&&C.event.trigger("ajaxStart"),Kt.type=Kt.type.toUpperCase(),Kt.hasContent=!ys.test(Kt.type),Se=Kt.url.replace(Os,""),Kt.hasContent?Kt.data&&Kt.processData&&(Kt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Kt.data=Kt.data.replace(ad,"+")):(fi=Kt.url.slice(Se.length),Kt.data&&(Kt.processData||typeof Kt.data=="string")&&(Se+=(il.test(Se)?"&":"?")+Kt.data,delete Kt.data),Kt.cache===!1&&(Se=Se.replace(Go,"$1"),fi=(il.test(Se)?"&":"?")+"_="+ja.guid+++fi),Kt.url=Se+fi),Kt.ifModified&&(C.lastModified[Se]&&Tn.setRequestHeader("If-Modified-Since",C.lastModified[Se]),C.etag[Se]&&Tn.setRequestHeader("If-None-Match",C.etag[Se])),(Kt.data&&Kt.hasContent&&Kt.contentType!==!1||oe.contentType)&&Tn.setRequestHeader("Content-Type",Kt.contentType),Tn.setRequestHeader("Accept",Kt.dataTypes[0]&&Kt.accepts[Kt.dataTypes[0]]?Kt.accepts[Kt.dataTypes[0]]+(Kt.dataTypes[0]!=="*"?", "+Es+"; q=0.01":""):Kt.accepts["*"]);for(ii in Kt.headers)Tn.setRequestHeader(ii,Kt.headers[ii]);if(Kt.beforeSend&&(Kt.beforeSend.call(ei,Tn,Kt)===!1||vt))return Tn.abort();if($n="abort",en.add(Kt.complete),Tn.done(Kt.success),Tn.fail(Kt.error),ge=nr(Il,Kt,oe,Tn),!ge)Js(-1,"No Transport");else{if(Tn.readyState=1,Gt&&Pi.trigger("ajaxSend",[Tn,Kt]),vt)return Tn;Kt.async&&Kt.timeout>0&&(He=t.setTimeout(function(){Tn.abort("timeout")},Kt.timeout));try{vt=!1,ge.send(zr,Js)}catch(Xn){if(vt)throw Xn;Js(-1,Xn)}}function Js(Xn,Cr,ya,Ol){var Rs,To,Pn,$s,ra,uo=Cr;vt||(vt=!0,He&&t.clearTimeout(He),ge=void 0,ze=Ol||"",Tn.readyState=Xn>0?4:0,Rs=Xn>=200&&Xn<300||Xn===304,ya&&($s=Sh(Kt,Tn,ya)),!Rs&&C.inArray("script",Kt.dataTypes)>-1&&C.inArray("json",Kt.dataTypes)<0&&(Kt.converters["text script"]=function(){}),$s=_p(Kt,$s,Tn,Rs),Rs?(Kt.ifModified&&(ra=Tn.getResponseHeader("Last-Modified"),ra&&(C.lastModified[Se]=ra),ra=Tn.getResponseHeader("etag"),ra&&(C.etag[Se]=ra)),Xn===204||Kt.type==="HEAD"?uo="nocontent":Xn===304?uo="notmodified":(uo=$s.state,To=$s.data,Pn=$s.error,Rs=!Pn)):(Pn=uo,(Xn||!uo)&&(uo="error",Xn<0&&(Xn=0))),Tn.status=Xn,Tn.statusText=(Cr||uo)+"",Rs?Ln.resolveWith(ei,[To,uo,Tn]):Ln.rejectWith(ei,[Tn,uo,Pn]),Tn.statusCode(Qr),Qr=void 0,Gt&&Pi.trigger(Rs?"ajaxSuccess":"ajaxError",[Tn,Kt,Rs?To:Pn]),en.fireWith(ei,[Tn,uo]),Gt&&(Pi.trigger("ajaxComplete",[Tn,Kt]),--C.active||C.event.trigger("ajaxStop")))}return Tn},getJSON:function(j,oe,ge){return C.get(j,oe,ge,"json")},getScript:function(j,oe){return C.get(j,void 0,oe,"script")}}),C.each(["get","post"],function(j,oe){C[oe]=function(ge,Se,ze,je){return O(Se)&&(je=je||ze,ze=Se,Se=void 0),C.ajax(C.extend({url:ge,type:oe,dataType:je,data:Se,success:ze},C.isPlainObject(ge)&&ge))}}),C.ajaxPrefilter(function(j){var oe;for(oe in j.headers)oe.toLowerCase()==="content-type"&&(j.contentType=j.headers[oe]||"")}),C._evalUrl=function(j,oe,ge){return C.ajax({url:j,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(Se){C.globalEval(Se,oe,ge)}})},C.fn.extend({wrapAll:function(j){var oe;return this[0]&&(O(j)&&(j=j.call(this[0])),oe=C(j,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&oe.insertBefore(this[0]),oe.map(function(){for(var ge=this;ge.firstElementChild;)ge=ge.firstElementChild;return ge}).append(this)),this},wrapInner:function(j){return O(j)?this.each(function(oe){C(this).wrapInner(j.call(this,oe))}):this.each(function(){var oe=C(this),ge=oe.contents();ge.length?ge.wrapAll(j):oe.append(j)})},wrap:function(j){var oe=O(j);return this.each(function(ge){C(this).wrapAll(oe?j.call(this,ge):j)})},unwrap:function(j){return this.parent(j).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(j){return!C.expr.pseudos.visible(j)},C.expr.pseudos.visible=function(j){return!!(j.offsetWidth||j.offsetHeight||j.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var ld={0:200,1223:204},na=C.ajaxSettings.xhr();I.cors=!!na&&"withCredentials"in na,I.ajax=na=!!na,C.ajaxTransport(function(j){var oe,ge;if(I.cors||na&&!j.crossDomain)return{send:function(Se,ze){var je,He=j.xhr();if(He.open(j.type,j.url,j.async,j.username,j.password),j.xhrFields)for(je in j.xhrFields)He[je]=j.xhrFields[je];j.mimeType&&He.overrideMimeType&&He.overrideMimeType(j.mimeType),!j.crossDomain&&!Se["X-Requested-With"]&&(Se["X-Requested-With"]="XMLHttpRequest");for(je in Se)He.setRequestHeader(je,Se[je]);oe=function(Ct){return function(){oe&&(oe=ge=He.onload=He.onerror=He.onabort=He.ontimeout=He.onreadystatechange=null,Ct==="abort"?He.abort():Ct==="error"?typeof He.status!="number"?ze(0,"error"):ze(He.status,He.statusText):ze(ld[He.status]||He.status,He.statusText,(He.responseType||"text")!=="text"||typeof He.responseText!="string"?{binary:He.response}:{text:He.responseText},He.getAllResponseHeaders()))}},He.onload=oe(),ge=He.onerror=He.ontimeout=oe("error"),He.onabort!==void 0?He.onabort=ge:He.onreadystatechange=function(){He.readyState===4&&t.setTimeout(function(){oe&&ge()})},oe=oe("abort");try{He.send(j.hasContent&&j.data||null)}catch(Ct){if(oe)throw Ct}},abort:function(){oe&&oe()}}}),C.ajaxPrefilter(function(j){j.crossDomain&&(j.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(j){return C.globalEval(j),j}}}),C.ajaxPrefilter("script",function(j){j.cache===void 0&&(j.cache=!1),j.crossDomain&&(j.type="GET")}),C.ajaxTransport("script",function(j){if(j.crossDomain||j.scriptAttrs){var oe,ge;return{send:function(Se,ze){oe=C("<script>").attr(j.scriptAttrs||{}).prop({charset:j.scriptCharset,src:j.url}).on("load error",ge=function(je){oe.remove(),ge=null,je&&ze(je.type==="error"?404:200,je.type)}),M.head.appendChild(oe[0])},abort:function(){ge&&ge()}}}});var Xc=[],Eh=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var j=Xc.pop()||C.expando+"_"+ja.guid++;return this[j]=!0,j}}),C.ajaxPrefilter("json jsonp",function(j,oe,ge){var Se,ze,je,He=j.jsonp!==!1&&(Eh.test(j.url)?"url":typeof j.data=="string"&&(j.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Eh.test(j.data)&&"data");if(He||j.dataTypes[0]==="jsonp")return Se=j.jsonpCallback=O(j.jsonpCallback)?j.jsonpCallback():j.jsonpCallback,He?j[He]=j[He].replace(Eh,"$1"+Se):j.jsonp!==!1&&(j.url+=(il.test(j.url)?"&":"?")+j.jsonp+"="+Se),j.converters["script json"]=function(){return je||C.error(Se+" was not called"),je[0]},j.dataTypes[0]="json",ze=t[Se],t[Se]=function(){je=arguments},ge.always(function(){ze===void 0?C(t).removeProp(Se):t[Se]=ze,j[Se]&&(j.jsonpCallback=oe.jsonpCallback,Xc.push(Se)),je&&O(ze)&&ze(je[0]),je=ze=void 0}),"script"}),I.createHTMLDocument=function(){var j=M.implementation.createHTMLDocument("").body;return j.innerHTML="<form></form><form></form>",j.childNodes.length===2}(),C.parseHTML=function(j,oe,ge){if(typeof j!="string")return[];typeof oe=="boolean"&&(ge=oe,oe=!1);var Se,ze,je;return oe||(I.createHTMLDocument?(oe=M.implementation.createHTMLDocument(""),Se=oe.createElement("base"),Se.href=M.location.href,oe.head.appendChild(Se)):oe=M),ze=L.exec(j),je=!ge&&[],ze?[oe.createElement(ze[1])]:(ze=ur([j],oe,je),je&&je.length&&C(je).remove(),C.merge([],ze.childNodes))},C.fn.load=function(j,oe,ge){var Se,ze,je,He=this,Ct=j.indexOf(" ");return Ct>-1&&(Se=xr(j.slice(Ct)),j=j.slice(0,Ct)),O(oe)?(ge=oe,oe=void 0):oe&&typeof oe=="object"&&(ze="POST"),He.length>0&&C.ajax({url:j,type:ze||"GET",dataType:"html",data:oe}).done(function(vt){je=arguments,He.html(Se?C("<div>").append(C.parseHTML(vt)).find(Se):vt)}).always(ge&&function(vt,Gt){He.each(function(){ge.apply(this,je||[vt.responseText,Gt,vt])})}),this},C.expr.pseudos.animated=function(j){return C.grep(C.timers,function(oe){return j===oe.elem}).length},C.offset={setOffset:function(j,oe,ge){var Se,ze,je,He,Ct,vt,Gt,ii=C.css(j,"position"),fi=C(j),Kt={};ii==="static"&&(j.style.position="relative"),Ct=fi.offset(),je=C.css(j,"top"),vt=C.css(j,"left"),Gt=(ii==="absolute"||ii==="fixed")&&(je+vt).indexOf("auto")>-1,Gt?(Se=fi.position(),He=Se.top,ze=Se.left):(He=parseFloat(je)||0,ze=parseFloat(vt)||0),O(oe)&&(oe=oe.call(j,ge,C.extend({},Ct))),oe.top!=null&&(Kt.top=oe.top-Ct.top+He),oe.left!=null&&(Kt.left=oe.left-Ct.left+ze),"using"in oe?oe.using.call(j,Kt):fi.css(Kt)}},C.fn.extend({offset:function(j){if(arguments.length)return j===void 0?this:this.each(function(ze){C.offset.setOffset(this,j,ze)});var oe,ge,Se=this[0];if(Se)return Se.getClientRects().length?(oe=Se.getBoundingClientRect(),ge=Se.ownerDocument.defaultView,{top:oe.top+ge.pageYOffset,left:oe.left+ge.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var j,oe,ge,Se=this[0],ze={top:0,left:0};if(C.css(Se,"position")==="fixed")oe=Se.getBoundingClientRect();else{for(oe=this.offset(),ge=Se.ownerDocument,j=Se.offsetParent||ge.documentElement;j&&(j===ge.body||j===ge.documentElement)&&C.css(j,"position")==="static";)j=j.parentNode;j&&j!==Se&&j.nodeType===1&&(ze=C(j).offset(),ze.top+=C.css(j,"borderTopWidth",!0),ze.left+=C.css(j,"borderLeftWidth",!0))}return{top:oe.top-ze.top-C.css(Se,"marginTop",!0),left:oe.left-ze.left-C.css(Se,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var j=this.offsetParent;j&&C.css(j,"position")==="static";)j=j.offsetParent;return j||nt})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(j,oe){var ge=oe==="pageYOffset";C.fn[j]=function(Se){return ae(this,function(ze,je,He){var Ct;if($(ze)?Ct=ze:ze.nodeType===9&&(Ct=ze.defaultView),He===void 0)return Ct?Ct[oe]:ze[je];Ct?Ct.scrollTo(ge?Ct.pageXOffset:He,ge?He:Ct.pageYOffset):ze[je]=He},j,Se,arguments.length)}}),C.each(["top","left"],function(j,oe){C.cssHooks[oe]=hn(I.pixelPosition,function(ge,Se){if(Se)return Se=Xi(ge,oe),Mt.test(Se)?C(ge).position()[oe]+"px":Se})}),C.each({Height:"height",Width:"width"},function(j,oe){C.each({padding:"inner"+j,content:oe,"":"outer"+j},function(ge,Se){C.fn[Se]=function(ze,je){var He=arguments.length&&(ge||typeof ze!="boolean"),Ct=ge||(ze===!0||je===!0?"margin":"border");return ae(this,function(vt,Gt,ii){var fi;return $(vt)?Se.indexOf("outer")===0?vt["inner"+j]:vt.document.documentElement["client"+j]:vt.nodeType===9?(fi=vt.documentElement,Math.max(vt.body["scroll"+j],fi["scroll"+j],vt.body["offset"+j],fi["offset"+j],fi["client"+j])):ii===void 0?C.css(vt,Gt,Ct):C.style(vt,Gt,ii,Ct)},oe,He?ze:void 0,He)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(j,oe){C.fn[oe]=function(ge){return this.on(oe,ge)}}),C.fn.extend({bind:function(j,oe,ge){return this.on(j,null,oe,ge)},unbind:function(j,oe){return this.off(j,null,oe)},delegate:function(j,oe,ge,Se){return this.on(oe,j,ge,Se)},undelegate:function(j,oe,ge){return arguments.length===1?this.off(j,"**"):this.off(oe,j||"**",ge)},hover:function(j,oe){return this.mouseenter(j).mouseleave(oe||j)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(j,oe){C.fn[oe]=function(ge,Se){return arguments.length>0?this.on(oe,null,ge,Se):this.trigger(oe)}});var Ll=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;C.proxy=function(j,oe){var ge,Se,ze;if(typeof oe=="string"&&(ge=j[oe],oe=j,j=ge),!!O(j))return Se=d.call(arguments,2),ze=function(){return j.apply(oe||this,Se.concat(d.call(arguments)))},ze.guid=j.guid=j.guid||C.guid++,ze},C.holdReady=function(j){j?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=E,C.isFunction=O,C.isWindow=$,C.camelCase=me,C.type=G,C.now=Date.now,C.isNumeric=function(j){var oe=C.type(j);return(oe==="number"||oe==="string")&&!isNaN(j-parseFloat(j))},C.trim=function(j){return j==null?"":(j+"").replace(Ll,"$1")};var rl=t.jQuery,vs=t.$;return C.noConflict=function(j){return t.$===C&&(t.$=vs),j&&t.jQuery===C&&(t.jQuery=rl),C},typeof r>"u"&&(t.jQuery=t.$=C),C})})(GA);const VA=Qb;function R5(e,t){return function(){return e.apply(t,arguments)}}const{toString:B5}=Object.prototype,{getPrototypeOf:qw}=Object,Zw=(e=>t=>{const r=B5.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),eu=e=>(e=e.toLowerCase(),t=>Zw(t)===e),Iv=e=>t=>typeof t===e,{isArray:bm}=Array,x1=Iv("undefined");function $A(e){return e!==null&&!x1(e)&&e.constructor!==null&&!x1(e.constructor)&&Pf(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const z5=eu("ArrayBuffer");function HA(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&z5(e.buffer),t}const WA=Iv("string"),Pf=Iv("function"),N5=Iv("number"),Kw=e=>e!==null&&typeof e=="object",YA=e=>e===!0||e===!1,Fy=e=>{if(Zw(e)!=="object")return!1;const t=qw(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},XA=eu("Date"),qA=eu("File"),ZA=eu("Blob"),KA=eu("FileList"),JA=e=>Kw(e)&&Pf(e.pipe),QA=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||B5.call(e)===t||Pf(e.toString)&&e.toString()===t)},e4=eu("URLSearchParams"),t4=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function B1(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let l,c;if(typeof e!="object"&&(e=[e]),bm(e))for(l=0,c=e.length;l<c;l++)t.call(null,e[l],l,e);else{const d=r?Object.getOwnPropertyNames(e):Object.keys(e),m=d.length;let n;for(l=0;l<m;l++)n=d[l],t.call(null,e[n],n,e)}}function F5(e,t){t=t.toLowerCase();const r=Object.keys(e);let l=r.length,c;for(;l-- >0;)if(c=r[l],t===c.toLowerCase())return c;return null}const j5=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),U5=e=>!x1(e)&&e!==j5;function ew(){const{caseless:e}=U5(this)&&this||{},t={},r=(l,c)=>{const d=e&&F5(t,c)||c;Fy(t[d])&&Fy(l)?t[d]=ew(t[d],l):Fy(l)?t[d]=ew({},l):bm(l)?t[d]=l.slice():t[d]=l};for(let l=0,c=arguments.length;l<c;l++)arguments[l]&&B1(arguments[l],r);return t}const i4=(e,t,r,{allOwnKeys:l}={})=>(B1(t,(c,d)=>{r&&Pf(c)?e[d]=R5(c,r):e[d]=c},{allOwnKeys:l}),e),n4=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),r4=(e,t,r,l)=>{e.prototype=Object.create(t.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},s4=(e,t,r,l)=>{let c,d,m;const n={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)m=c[d],(!l||l(m,e,t))&&!n[m]&&(t[m]=e[m],n[m]=!0);e=r!==!1&&qw(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},o4=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const l=e.indexOf(t,r);return l!==-1&&l===r},a4=e=>{if(!e)return null;if(bm(e))return e;let t=e.length;if(!N5(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},l4=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&qw(Uint8Array)),c4=(e,t)=>{const l=(e&&e[Symbol.iterator]).call(e);let c;for(;(c=l.next())&&!c.done;){const d=c.value;t.call(e,d[0],d[1])}},h4=(e,t)=>{let r;const l=[];for(;(r=e.exec(t))!==null;)l.push(r);return l},d4=eu("HTMLFormElement"),u4=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,l,c){return l.toUpperCase()+c}),XT=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),p4=eu("RegExp"),G5=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),l={};B1(r,(c,d)=>{t(c,d,e)!==!1&&(l[d]=c)}),Object.defineProperties(e,l)},f4=e=>{G5(e,(t,r)=>{if(Pf(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const l=e[r];if(Pf(l)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},m4=(e,t)=>{const r={},l=c=>{c.forEach(d=>{r[d]=!0})};return bm(e)?l(e):l(String(e).split(t)),r},g4=()=>{},_4=(e,t)=>(e=+e,Number.isFinite(e)?e:t),y4=e=>{const t=new Array(10),r=(l,c)=>{if(Kw(l)){if(t.indexOf(l)>=0)return;if(!("toJSON"in l)){t[c]=l;const d=bm(l)?[]:{};return B1(l,(m,n)=>{const T=r(m,c+1);!x1(T)&&(d[n]=T)}),t[c]=void 0,d}}return l};return r(e,0)},Ti={isArray:bm,isArrayBuffer:z5,isBuffer:$A,isFormData:QA,isArrayBufferView:HA,isString:WA,isNumber:N5,isBoolean:YA,isObject:Kw,isPlainObject:Fy,isUndefined:x1,isDate:XA,isFile:qA,isBlob:ZA,isRegExp:p4,isFunction:Pf,isStream:JA,isURLSearchParams:e4,isTypedArray:l4,isFileList:KA,forEach:B1,merge:ew,extend:i4,trim:t4,stripBOM:n4,inherits:r4,toFlatObject:s4,kindOf:Zw,kindOfTest:eu,endsWith:o4,toArray:a4,forEachEntry:c4,matchAll:h4,isHTMLForm:d4,hasOwnProperty:XT,hasOwnProp:XT,reduceDescriptors:G5,freezeMethods:f4,toObjectSet:m4,toCamelCase:u4,noop:g4,toFiniteNumber:_4,findKey:F5,global:j5,isContextDefined:U5,toJSONObject:y4};function Hr(e,t,r,l,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),l&&(this.request=l),c&&(this.response=c)}Ti.inherits(Hr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ti.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const V5=Hr.prototype,$5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{$5[e]={value:e}});Object.defineProperties(Hr,$5);Object.defineProperty(V5,"isAxiosError",{value:!0});Hr.from=(e,t,r,l,c,d)=>{const m=Object.create(V5);return Ti.toFlatObject(e,m,function(T){return T!==Error.prototype},n=>n!=="isAxiosError"),Hr.call(m,e.message,t,r,l,c),m.cause=e,m.name=e.name,d&&Object.assign(m,d),m};var v4=typeof self=="object"?self.FormData:window.FormData;const x4=v4;function tw(e){return Ti.isPlainObject(e)||Ti.isArray(e)}function H5(e){return Ti.endsWith(e,"[]")?e.slice(0,-2):e}function qT(e,t,r){return e?e.concat(t).map(function(c,d){return c=H5(c),!r&&d?"["+c+"]":c}).join(r?".":""):t}function b4(e){return Ti.isArray(e)&&!e.some(tw)}const w4=Ti.toFlatObject(Ti,{},null,function(t){return/^is[A-Z]/.test(t)});function T4(e){return e&&Ti.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function Lv(e,t,r){if(!Ti.isObject(e))throw new TypeError("target must be an object");t=t||new(x4||FormData),r=Ti.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,$){return!Ti.isUndefined($[O])});const l=r.metaTokens,c=r.visitor||Q,d=r.dots,m=r.indexes,T=(r.Blob||typeof Blob<"u"&&Blob)&&T4(t);if(!Ti.isFunction(c))throw new TypeError("visitor must be a function");function V(I){if(I===null)return"";if(Ti.isDate(I))return I.toISOString();if(!T&&Ti.isBlob(I))throw new Hr("Blob is not supported. Use a Buffer instead.");return Ti.isArrayBuffer(I)||Ti.isTypedArray(I)?T&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function Q(I,O,$){let M=I;if(I&&!$&&typeof I=="object"){if(Ti.endsWith(O,"{}"))O=l?O:O.slice(0,-2),I=JSON.stringify(I);else if(Ti.isArray(I)&&b4(I)||Ti.isFileList(I)||Ti.endsWith(O,"[]")&&(M=Ti.toArray(I)))return O=H5(O),M.forEach(function(k,G){!(Ti.isUndefined(k)||k===null)&&t.append(m===!0?qT([O],G,d):m===null?O:O+"[]",V(k))}),!1}return tw(I)?!0:(t.append(qT($,O,d),V(I)),!1)}const z=[],W=Object.assign(w4,{defaultVisitor:Q,convertValue:V,isVisitable:tw});function K(I,O){if(!Ti.isUndefined(I)){if(z.indexOf(I)!==-1)throw Error("Circular reference detected in "+O.join("."));z.push(I),Ti.forEach(I,function(M,S){(!(Ti.isUndefined(M)||M===null)&&c.call(t,M,Ti.isString(S)?S.trim():S,O,W))===!0&&K(M,O?O.concat(S):[S])}),z.pop()}}if(!Ti.isObject(e))throw new TypeError("data must be an object");return K(e),t}function ZT(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return t[l]})}function Jw(e,t){this._pairs=[],e&&Lv(e,this,t)}const W5=Jw.prototype;W5.append=function(t,r){this._pairs.push([t,r])};W5.toString=function(t){const r=t?function(l){return t.call(this,l,ZT)}:ZT;return this._pairs.map(function(c){return r(c[0])+"="+r(c[1])},"").join("&")};function S4(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Y5(e,t,r){if(!t)return e;const l=r&&r.encode||S4,c=r&&r.serialize;let d;if(c?d=c(t,r):d=Ti.isURLSearchParams(t)?t.toString():new Jw(t,r).toString(l),d){const m=e.indexOf("#");m!==-1&&(e=e.slice(0,m)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class E4{constructor(){this.handlers=[]}use(t,r,l){return this.handlers.push({fulfilled:t,rejected:r,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ti.forEach(this.handlers,function(l){l!==null&&t(l)})}}const KT=E4,X5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},C4=typeof URLSearchParams<"u"?URLSearchParams:Jw,M4=FormData,A4=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),k4=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Kh={isBrowser:!0,classes:{URLSearchParams:C4,FormData:M4,Blob},isStandardBrowserEnv:A4,isStandardBrowserWebWorkerEnv:k4,protocols:["http","https","file","blob","url","data"]};function P4(e,t){return Lv(e,new Kh.classes.URLSearchParams,Object.assign({visitor:function(r,l,c,d){return Kh.isNode&&Ti.isBuffer(r)?(this.append(l,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},t))}function D4(e){return Ti.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function I4(e){const t={},r=Object.keys(e);let l;const c=r.length;let d;for(l=0;l<c;l++)d=r[l],t[d]=e[d];return t}function q5(e){function t(r,l,c,d){let m=r[d++];const n=Number.isFinite(+m),T=d>=r.length;return m=!m&&Ti.isArray(c)?c.length:m,T?(Ti.hasOwnProp(c,m)?c[m]=[c[m],l]:c[m]=l,!n):((!c[m]||!Ti.isObject(c[m]))&&(c[m]=[]),t(r,l,c[m],d)&&Ti.isArray(c[m])&&(c[m]=I4(c[m])),!n)}if(Ti.isFormData(e)&&Ti.isFunction(e.entries)){const r={};return Ti.forEachEntry(e,(l,c)=>{t(D4(l),c,r,0)}),r}return null}const L4={"Content-Type":void 0};function O4(e,t,r){if(Ti.isString(e))try{return(t||JSON.parse)(e),Ti.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(r||JSON.stringify)(e)}const Ov={transitional:X5,adapter:["xhr","http"],transformRequest:[function(t,r){const l=r.getContentType()||"",c=l.indexOf("application/json")>-1,d=Ti.isObject(t);if(d&&Ti.isHTMLForm(t)&&(t=new FormData(t)),Ti.isFormData(t))return c&&c?JSON.stringify(q5(t)):t;if(Ti.isArrayBuffer(t)||Ti.isBuffer(t)||Ti.isStream(t)||Ti.isFile(t)||Ti.isBlob(t))return t;if(Ti.isArrayBufferView(t))return t.buffer;if(Ti.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let n;if(d){if(l.indexOf("application/x-www-form-urlencoded")>-1)return P4(t,this.formSerializer).toString();if((n=Ti.isFileList(t))||l.indexOf("multipart/form-data")>-1){const T=this.env&&this.env.FormData;return Lv(n?{"files[]":t}:t,T&&new T,this.formSerializer)}}return d||c?(r.setContentType("application/json",!1),O4(t)):t}],transformResponse:[function(t){const r=this.transitional||Ov.transitional,l=r&&r.forcedJSONParsing,c=this.responseType==="json";if(t&&Ti.isString(t)&&(l&&!this.responseType||c)){const m=!(r&&r.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(n){if(m)throw n.name==="SyntaxError"?Hr.from(n,Hr.ERR_BAD_RESPONSE,this,null,this.response):n}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kh.classes.FormData,Blob:Kh.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ti.forEach(["delete","get","head"],function(t){Ov.headers[t]={}});Ti.forEach(["post","put","patch"],function(t){Ov.headers[t]=Ti.merge(L4)});const Qw=Ov,R4=Ti.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),B4=e=>{const t={};let r,l,c;return e&&e.split(`
`).forEach(function(m){c=m.indexOf(":"),r=m.substring(0,c).trim().toLowerCase(),l=m.substring(c+1).trim(),!(!r||t[r]&&R4[r])&&(r==="set-cookie"?t[r]?t[r].push(l):t[r]=[l]:t[r]=t[r]?t[r]+", "+l:l)}),t},JT=Symbol("internals");function r1(e){return e&&String(e).trim().toLowerCase()}function jy(e){return e===!1||e==null?e:Ti.isArray(e)?e.map(jy):String(e)}function z4(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=r.exec(e);)t[l[1]]=l[2];return t}function N4(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function QT(e,t,r,l){if(Ti.isFunction(l))return l.call(this,t,r);if(Ti.isString(t)){if(Ti.isString(l))return t.indexOf(l)!==-1;if(Ti.isRegExp(l))return l.test(t)}}function F4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,l)=>r.toUpperCase()+l)}function j4(e,t){const r=Ti.toCamelCase(" "+t);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+r,{value:function(c,d,m){return this[l].call(this,t,c,d,m)},configurable:!0})})}class Rv{constructor(t){t&&this.set(t)}set(t,r,l){const c=this;function d(n,T,V){const Q=r1(T);if(!Q)throw new Error("header name must be a non-empty string");const z=Ti.findKey(c,Q);(!z||c[z]===void 0||V===!0||V===void 0&&c[z]!==!1)&&(c[z||T]=jy(n))}const m=(n,T)=>Ti.forEach(n,(V,Q)=>d(V,Q,T));return Ti.isPlainObject(t)||t instanceof this.constructor?m(t,r):Ti.isString(t)&&(t=t.trim())&&!N4(t)?m(B4(t),r):t!=null&&d(r,t,l),this}get(t,r){if(t=r1(t),t){const l=Ti.findKey(this,t);if(l){const c=this[l];if(!r)return c;if(r===!0)return z4(c);if(Ti.isFunction(r))return r.call(this,c,l);if(Ti.isRegExp(r))return r.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=r1(t),t){const l=Ti.findKey(this,t);return!!(l&&(!r||QT(this,this[l],l,r)))}return!1}delete(t,r){const l=this;let c=!1;function d(m){if(m=r1(m),m){const n=Ti.findKey(l,m);n&&(!r||QT(l,l[n],n,r))&&(delete l[n],c=!0)}}return Ti.isArray(t)?t.forEach(d):d(t),c}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(t){const r=this,l={};return Ti.forEach(this,(c,d)=>{const m=Ti.findKey(l,d);if(m){r[m]=jy(c),delete r[d];return}const n=t?F4(d):String(d).trim();n!==d&&delete r[d],r[n]=jy(c),l[n]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ti.forEach(this,(l,c)=>{l!=null&&l!==!1&&(r[c]=t&&Ti.isArray(l)?l.join(", "):l)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const l=new this(t);return r.forEach(c=>l.set(c)),l}static accessor(t){const l=(this[JT]=this[JT]={accessors:{}}).accessors,c=this.prototype;function d(m){const n=r1(m);l[n]||(j4(c,m),l[n]=!0)}return Ti.isArray(t)?t.forEach(d):d(t),this}}Rv.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);Ti.freezeMethods(Rv.prototype);Ti.freezeMethods(Rv);const Wd=Rv;function wb(e,t){const r=this||Qw,l=t||r,c=Wd.from(l.headers);let d=l.data;return Ti.forEach(e,function(n){d=n.call(r,d,c.normalize(),t?t.status:void 0)}),c.normalize(),d}function Z5(e){return!!(e&&e.__CANCEL__)}function z1(e,t,r){Hr.call(this,e??"canceled",Hr.ERR_CANCELED,t,r),this.name="CanceledError"}Ti.inherits(z1,Hr,{__CANCEL__:!0});const U4=null;function G4(e,t,r){const l=r.config.validateStatus;!r.status||!l||l(r.status)?e(r):t(new Hr("Request failed with status code "+r.status,[Hr.ERR_BAD_REQUEST,Hr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const V4=Kh.isStandardBrowserEnv?function(){return{write:function(r,l,c,d,m,n){const T=[];T.push(r+"="+encodeURIComponent(l)),Ti.isNumber(c)&&T.push("expires="+new Date(c).toGMTString()),Ti.isString(d)&&T.push("path="+d),Ti.isString(m)&&T.push("domain="+m),n===!0&&T.push("secure"),document.cookie=T.join("; ")},read:function(r){const l=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function $4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function H4(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function K5(e,t){return e&&!$4(t)?H4(e,t):t}const W4=Kh.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let l;function c(d){let m=d;return t&&(r.setAttribute("href",m),m=r.href),r.setAttribute("href",m),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return l=c(window.location.href),function(m){const n=Ti.isString(m)?c(m):m;return n.protocol===l.protocol&&n.host===l.host}}():function(){return function(){return!0}}();function Y4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function X4(e,t){e=e||10;const r=new Array(e),l=new Array(e);let c=0,d=0,m;return t=t!==void 0?t:1e3,function(T){const V=Date.now(),Q=l[d];m||(m=V),r[c]=T,l[c]=V;let z=d,W=0;for(;z!==c;)W+=r[z++],z=z%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),V-m<t)return;const K=Q&&V-Q;return K?Math.round(W*1e3/K):void 0}}function eS(e,t){let r=0;const l=X4(50,250);return c=>{const d=c.loaded,m=c.lengthComputable?c.total:void 0,n=d-r,T=l(n),V=d<=m;r=d;const Q={loaded:d,total:m,progress:m?d/m:void 0,bytes:n,rate:T||void 0,estimated:T&&m&&V?(m-d)/T:void 0,event:c};Q[t?"download":"upload"]=!0,e(Q)}}const q4=typeof XMLHttpRequest<"u",Z4=q4&&function(e){return new Promise(function(r,l){let c=e.data;const d=Wd.from(e.headers).normalize(),m=e.responseType;let n;function T(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}Ti.isFormData(c)&&(Kh.isStandardBrowserEnv||Kh.isStandardBrowserWebWorkerEnv)&&d.setContentType(!1);let V=new XMLHttpRequest;if(e.auth){const K=e.auth.username||"",I=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.set("Authorization","Basic "+btoa(K+":"+I))}const Q=K5(e.baseURL,e.url);V.open(e.method.toUpperCase(),Y5(Q,e.params,e.paramsSerializer),!0),V.timeout=e.timeout;function z(){if(!V)return;const K=Wd.from("getAllResponseHeaders"in V&&V.getAllResponseHeaders()),O={data:!m||m==="text"||m==="json"?V.responseText:V.response,status:V.status,statusText:V.statusText,headers:K,config:e,request:V};G4(function(M){r(M),T()},function(M){l(M),T()},O),V=null}if("onloadend"in V?V.onloadend=z:V.onreadystatechange=function(){!V||V.readyState!==4||V.status===0&&!(V.responseURL&&V.responseURL.indexOf("file:")===0)||setTimeout(z)},V.onabort=function(){V&&(l(new Hr("Request aborted",Hr.ECONNABORTED,e,V)),V=null)},V.onerror=function(){l(new Hr("Network Error",Hr.ERR_NETWORK,e,V)),V=null},V.ontimeout=function(){let I=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const O=e.transitional||X5;e.timeoutErrorMessage&&(I=e.timeoutErrorMessage),l(new Hr(I,O.clarifyTimeoutError?Hr.ETIMEDOUT:Hr.ECONNABORTED,e,V)),V=null},Kh.isStandardBrowserEnv){const K=(e.withCredentials||W4(Q))&&e.xsrfCookieName&&V4.read(e.xsrfCookieName);K&&d.set(e.xsrfHeaderName,K)}c===void 0&&d.setContentType(null),"setRequestHeader"in V&&Ti.forEach(d.toJSON(),function(I,O){V.setRequestHeader(O,I)}),Ti.isUndefined(e.withCredentials)||(V.withCredentials=!!e.withCredentials),m&&m!=="json"&&(V.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&V.addEventListener("progress",eS(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&V.upload&&V.upload.addEventListener("progress",eS(e.onUploadProgress)),(e.cancelToken||e.signal)&&(n=K=>{V&&(l(!K||K.type?new z1(null,e,V):K),V.abort(),V=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n)));const W=Y4(Q);if(W&&Kh.protocols.indexOf(W)===-1){l(new Hr("Unsupported protocol "+W+":",Hr.ERR_BAD_REQUEST,e));return}V.send(c||null)})},Uy={http:U4,xhr:Z4};Ti.forEach(Uy,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const K4={getAdapter:e=>{e=Ti.isArray(e)?e:[e];const{length:t}=e;let r,l;for(let c=0;c<t&&(r=e[c],!(l=Ti.isString(r)?Uy[r.toLowerCase()]:r));c++);if(!l)throw l===!1?new Hr(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Ti.hasOwnProp(Uy,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!Ti.isFunction(l))throw new TypeError("adapter is not a function");return l},adapters:Uy};function Tb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new z1(null,e)}function tS(e){return Tb(e),e.headers=Wd.from(e.headers),e.data=wb.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),K4.getAdapter(e.adapter||Qw.adapter)(e).then(function(l){return Tb(e),l.data=wb.call(e,e.transformResponse,l),l.headers=Wd.from(l.headers),l},function(l){return Z5(l)||(Tb(e),l&&l.response&&(l.response.data=wb.call(e,e.transformResponse,l.response),l.response.headers=Wd.from(l.response.headers))),Promise.reject(l)})}const iS=e=>e instanceof Wd?e.toJSON():e;function cm(e,t){t=t||{};const r={};function l(V,Q,z){return Ti.isPlainObject(V)&&Ti.isPlainObject(Q)?Ti.merge.call({caseless:z},V,Q):Ti.isPlainObject(Q)?Ti.merge({},Q):Ti.isArray(Q)?Q.slice():Q}function c(V,Q,z){if(Ti.isUndefined(Q)){if(!Ti.isUndefined(V))return l(void 0,V,z)}else return l(V,Q,z)}function d(V,Q){if(!Ti.isUndefined(Q))return l(void 0,Q)}function m(V,Q){if(Ti.isUndefined(Q)){if(!Ti.isUndefined(V))return l(void 0,V)}else return l(void 0,Q)}function n(V,Q,z){if(z in t)return l(V,Q);if(z in e)return l(void 0,V)}const T={url:d,method:d,data:d,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:n,headers:(V,Q)=>c(iS(V),iS(Q),!0)};return Ti.forEach(Object.keys(e).concat(Object.keys(t)),function(Q){const z=T[Q]||c,W=z(e[Q],t[Q],Q);Ti.isUndefined(W)&&z!==n||(r[Q]=W)}),r}const J5="1.2.2",e3={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{e3[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});const nS={};e3.transitional=function(t,r,l){function c(d,m){return"[Axios v"+J5+"] Transitional option '"+d+"'"+m+(l?". "+l:"")}return(d,m,n)=>{if(t===!1)throw new Hr(c(m," has been removed"+(r?" in "+r:"")),Hr.ERR_DEPRECATED);return r&&!nS[m]&&(nS[m]=!0,console.warn(c(m," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(d,m,n):!0}};function J4(e,t,r){if(typeof e!="object")throw new Hr("options must be an object",Hr.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let c=l.length;for(;c-- >0;){const d=l[c],m=t[d];if(m){const n=e[d],T=n===void 0||m(n,d,e);if(T!==!0)throw new Hr("option "+d+" must be "+T,Hr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Hr("Unknown option "+d,Hr.ERR_BAD_OPTION)}}const iw={assertOptions:J4,validators:e3},Uu=iw.validators;class tv{constructor(t){this.defaults=t,this.interceptors={request:new KT,response:new KT}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=cm(this.defaults,r);const{transitional:l,paramsSerializer:c,headers:d}=r;l!==void 0&&iw.assertOptions(l,{silentJSONParsing:Uu.transitional(Uu.boolean),forcedJSONParsing:Uu.transitional(Uu.boolean),clarifyTimeoutError:Uu.transitional(Uu.boolean)},!1),c!==void 0&&iw.assertOptions(c,{encode:Uu.function,serialize:Uu.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let m;m=d&&Ti.merge(d.common,d[r.method]),m&&Ti.forEach(["delete","get","head","post","put","patch","common"],I=>{delete d[I]}),r.headers=Wd.concat(m,d);const n=[];let T=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(r)===!1||(T=T&&O.synchronous,n.unshift(O.fulfilled,O.rejected))});const V=[];this.interceptors.response.forEach(function(O){V.push(O.fulfilled,O.rejected)});let Q,z=0,W;if(!T){const I=[tS.bind(this),void 0];for(I.unshift.apply(I,n),I.push.apply(I,V),W=I.length,Q=Promise.resolve(r);z<W;)Q=Q.then(I[z++],I[z++]);return Q}W=n.length;let K=r;for(z=0;z<W;){const I=n[z++],O=n[z++];try{K=I(K)}catch($){O.call(this,$);break}}try{Q=tS.call(this,K)}catch(I){return Promise.reject(I)}for(z=0,W=V.length;z<W;)Q=Q.then(V[z++],V[z++]);return Q}getUri(t){t=cm(this.defaults,t);const r=K5(t.baseURL,t.url);return Y5(r,t.params,t.paramsSerializer)}}Ti.forEach(["delete","get","head","options"],function(t){tv.prototype[t]=function(r,l){return this.request(cm(l||{},{method:t,url:r,data:(l||{}).data}))}});Ti.forEach(["post","put","patch"],function(t){function r(l){return function(d,m,n){return this.request(cm(n||{},{method:t,headers:l?{"Content-Type":"multipart/form-data"}:{},url:d,data:m}))}}tv.prototype[t]=r(),tv.prototype[t+"Form"]=r(!0)});const Gy=tv;class t3{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const l=this;this.promise.then(c=>{if(!l._listeners)return;let d=l._listeners.length;for(;d-- >0;)l._listeners[d](c);l._listeners=null}),this.promise.then=c=>{let d;const m=new Promise(n=>{l.subscribe(n),d=n}).then(c);return m.cancel=function(){l.unsubscribe(d)},m},t(function(d,m,n){l.reason||(l.reason=new z1(d,m,n),r(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new t3(function(c){t=c}),cancel:t}}}const Q4=t3;function e6(e){return function(r){return e.apply(null,r)}}function t6(e){return Ti.isObject(e)&&e.isAxiosError===!0}const nw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nw).forEach(([e,t])=>{nw[t]=e});const i6=nw;function Q5(e){const t=new Gy(e),r=R5(Gy.prototype.request,t);return Ti.extend(r,Gy.prototype,t,{allOwnKeys:!0}),Ti.extend(r,t,null,{allOwnKeys:!0}),r.create=function(c){return Q5(cm(e,c))},r}const Fo=Q5(Qw);Fo.Axios=Gy;Fo.CanceledError=z1;Fo.CancelToken=Q4;Fo.isCancel=Z5;Fo.VERSION=J5;Fo.toFormData=Lv;Fo.AxiosError=Hr;Fo.Cancel=Fo.CanceledError;Fo.all=function(t){return Promise.all(t)};Fo.spread=e6;Fo.isAxiosError=t6;Fo.mergeConfig=cm;Fo.AxiosHeaders=Wd;Fo.formToJSON=e=>q5(Ti.isHTMLForm(e)?new FormData(e):e);Fo.HttpStatusCode=i6;Fo.default=Fo;const n6=Fo;window._=UA;window.$=VA;window.axios=n6;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function El(e,t){const r=Object.create(null),l=e.split(",");for(let c=0;c<l.length;c++)r[l[c]]=!0;return t?c=>!!r[c.toLowerCase()]:c=>!!r[c]}const r6="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s6=El(r6);function Rf(e){if(an(e)){const t={};for(let r=0;r<e.length;r++){const l=e[r],c=ir(l)?eE(l):Rf(l);if(c)for(const d in c)t[d]=c[d]}return t}else{if(ir(e))return e;if(hs(e))return e}}const o6=/;(?![^(]*\))/g,a6=/:([^]+)/,l6=/\/\*.*?\*\//gs;function eE(e){const t={};return e.replace(l6,"").split(o6).forEach(r=>{if(r){const l=r.split(a6);l.length>1&&(t[l[0].trim()]=l[1].trim())}}),t}function Us(e){let t="";if(ir(e))t=e;else if(an(e))for(let r=0;r<e.length;r++){const l=Us(e[r]);l&&(t+=l+" ")}else if(hs(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function iv(e){if(!e)return null;let{class:t,style:r}=e;return t&&!ir(t)&&(e.class=Us(t)),r&&(e.style=Rf(r)),e}const c6="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",h6="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",d6="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",u6=El(c6),p6=El(h6),f6=El(d6),m6="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",g6=El(m6);function tE(e){return!!e||e===""}function _6(e,t){if(e.length!==t.length)return!1;let r=!0;for(let l=0;r&&l<e.length;l++)r=np(e[l],t[l]);return r}function np(e,t){if(e===t)return!0;let r=rS(e),l=rS(t);if(r||l)return r&&l?e.getTime()===t.getTime():!1;if(r=rp(e),l=rp(t),r||l)return e===t;if(r=an(e),l=an(t),r||l)return r&&l?_6(e,t):!1;if(r=hs(e),l=hs(t),r||l){if(!r||!l)return!1;const c=Object.keys(e).length,d=Object.keys(t).length;if(c!==d)return!1;for(const m in e){const n=e.hasOwnProperty(m),T=t.hasOwnProperty(m);if(n&&!T||!n&&T||!np(e[m],t[m]))return!1}}return String(e)===String(t)}function Bv(e,t){return e.findIndex(r=>np(r,t))}const Bn=e=>ir(e)?e:e==null?"":an(e)||hs(e)&&(e.toString===nE||!Wn(e.toString))?JSON.stringify(e,iE,2):String(e),iE=(e,t)=>t&&t.__v_isRef?iE(e,t.value):em(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[l,c])=>(r[`${l} =>`]=c,r),{})}:zf(t)?{[`Set(${t.size})`]:[...t.values()]}:hs(t)&&!an(t)&&!rE(t)?String(t):t,os={},Q0=[],Ka=()=>{},Vy=()=>!1,y6=/^on[^a-z]/,Bf=e=>y6.test(e),i3=e=>e.startsWith("onUpdate:"),Jr=Object.assign,n3=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},v6=Object.prototype.hasOwnProperty,$r=(e,t)=>v6.call(e,t),an=Array.isArray,em=e=>N1(e)==="[object Map]",zf=e=>N1(e)==="[object Set]",rS=e=>N1(e)==="[object Date]",Wn=e=>typeof e=="function",ir=e=>typeof e=="string",rp=e=>typeof e=="symbol",hs=e=>e!==null&&typeof e=="object",r3=e=>hs(e)&&Wn(e.then)&&Wn(e.catch),nE=Object.prototype.toString,N1=e=>nE.call(e),x6=e=>N1(e).slice(8,-1),rE=e=>N1(e)==="[object Object]",s3=e=>ir(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tf=El(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),b6=El("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),zv=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},w6=/-(\w)/g,ea=zv(e=>e.replace(w6,(t,r)=>r?r.toUpperCase():"")),T6=/\B([A-Z])/g,oc=zv(e=>e.replace(T6,"-$1").toLowerCase()),fp=zv(e=>e.charAt(0).toUpperCase()+e.slice(1)),Sf=zv(e=>e?`on${fp(e)}`:""),hm=(e,t)=>!Object.is(e,t),tm=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},nv=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},qd=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let sS;const S6=()=>sS||(sS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let tc;class Nv{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=tc,!t&&tc&&(this.index=(tc.scopes||(tc.scopes=[])).push(this)-1)}run(t){if(this.active){const r=tc;try{return tc=this,t()}finally{tc=r}}}on(){tc=this}off(){tc=this.parent}stop(t){if(this.active){let r,l;for(r=0,l=this.effects.length;r<l;r++)this.effects[r].stop();for(r=0,l=this.cleanups.length;r<l;r++)this.cleanups[r]();if(this.scopes)for(r=0,l=this.scopes.length;r<l;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0,this.active=!1}}}function sE(e){return new Nv(e)}function oE(e,t=tc){t&&t.active&&t.effects.push(e)}function aE(){return tc}function lE(e){tc&&tc.cleanups.push(e)}const o3=e=>{const t=new Set(e);return t.w=0,t.n=0,t},cE=e=>(e.w&sp)>0,hE=e=>(e.n&sp)>0,E6=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=sp},C6=e=>{const{deps:t}=e;if(t.length){let r=0;for(let l=0;l<t.length;l++){const c=t[l];cE(c)&&!hE(c)?c.delete(e):t[r++]=c,c.w&=~sp,c.n&=~sp}t.length=r}},rw=new WeakMap;let h1=0,sp=1;const sw=30;let dh;const Ef=Symbol(""),ow=Symbol("");class wm{constructor(t,r=null,l){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,oE(this,l)}run(){if(!this.active)return this.fn();let t=dh,r=Ju;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=dh,dh=this,Ju=!0,sp=1<<++h1,h1<=sw?E6(this):oS(this),this.fn()}finally{h1<=sw&&C6(this),sp=1<<--h1,dh=this.parent,Ju=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){dh===this?this.deferStop=!0:this.active&&(oS(this),this.onStop&&this.onStop(),this.active=!1)}}function oS(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}function dE(e,t){e.effect&&(e=e.effect.fn);const r=new wm(e);t&&(Jr(r,t),t.scope&&oE(r,t.scope)),(!t||!t.lazy)&&r.run();const l=r.run.bind(r);return l.effect=r,l}function uE(e){e.effect.stop()}let Ju=!0;const pE=[];function Tm(){pE.push(Ju),Ju=!1}function Sm(){const e=pE.pop();Ju=e===void 0?!0:e}function lc(e,t,r){if(Ju&&dh){let l=rw.get(e);l||rw.set(e,l=new Map);let c=l.get(r);c||l.set(r,c=o3()),fE(c)}}function fE(e,t){let r=!1;h1<=sw?hE(e)||(e.n|=sp,r=!cE(e)):r=!e.has(dh),r&&(e.add(dh),dh.deps.push(e))}function Zd(e,t,r,l,c,d){const m=rw.get(e);if(!m)return;let n=[];if(t==="clear")n=[...m.values()];else if(r==="length"&&an(e)){const T=qd(l);m.forEach((V,Q)=>{(Q==="length"||Q>=T)&&n.push(V)})}else switch(r!==void 0&&n.push(m.get(r)),t){case"add":an(e)?s3(r)&&n.push(m.get("length")):(n.push(m.get(Ef)),em(e)&&n.push(m.get(ow)));break;case"delete":an(e)||(n.push(m.get(Ef)),em(e)&&n.push(m.get(ow)));break;case"set":em(e)&&n.push(m.get(Ef));break}if(n.length===1)n[0]&&aw(n[0]);else{const T=[];for(const V of n)V&&T.push(...V);aw(o3(T))}}function aw(e,t){const r=an(e)?e:[...e];for(const l of r)l.computed&&aS(l);for(const l of r)l.computed||aS(l)}function aS(e,t){(e!==dh||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const M6=El("__proto__,__v_isRef,__isVue"),mE=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(rp)),A6=Fv(),k6=Fv(!1,!0),P6=Fv(!0),D6=Fv(!0,!0),lS=I6();function I6(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const l=Rr(this);for(let d=0,m=this.length;d<m;d++)lc(l,"get",d+"");const c=l[t](...r);return c===-1||c===!1?l[t](...r.map(Rr)):c}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Tm();const l=Rr(this)[t].apply(this,r);return Sm(),l}}),e}function Fv(e=!1,t=!1){return function(l,c,d){if(c==="__v_isReactive")return!e;if(c==="__v_isReadonly")return e;if(c==="__v_isShallow")return t;if(c==="__v_raw"&&d===(e?t?wE:bE:t?xE:vE).get(l))return l;const m=an(l);if(!e&&m&&$r(lS,c))return Reflect.get(lS,c,d);const n=Reflect.get(l,c,d);return(rp(c)?mE.has(c):M6(c))||(e||lc(l,"get",c),t)?n:Bo(n)?m&&s3(c)?n:n.value:hs(n)?e?Gv(n):F1(n):n}}const L6=gE(),O6=gE(!0);function gE(e=!1){return function(r,l,c,d){let m=r[l];if(op(m)&&Bo(m)&&!Bo(c))return!1;if(!e&&(!dm(c)&&!op(c)&&(m=Rr(m),c=Rr(c)),!an(r)&&Bo(m)&&!Bo(c)))return m.value=c,!0;const n=an(r)&&s3(l)?Number(l)<r.length:$r(r,l),T=Reflect.set(r,l,c,d);return r===Rr(d)&&(n?hm(c,m)&&Zd(r,"set",l,c):Zd(r,"add",l,c)),T}}function R6(e,t){const r=$r(e,t);e[t];const l=Reflect.deleteProperty(e,t);return l&&r&&Zd(e,"delete",t,void 0),l}function B6(e,t){const r=Reflect.has(e,t);return(!rp(t)||!mE.has(t))&&lc(e,"has",t),r}function z6(e){return lc(e,"iterate",an(e)?"length":Ef),Reflect.ownKeys(e)}const _E={get:A6,set:L6,deleteProperty:R6,has:B6,ownKeys:z6},yE={get:P6,set(e,t){return!0},deleteProperty(e,t){return!0}},N6=Jr({},_E,{get:k6,set:O6}),F6=Jr({},yE,{get:D6}),a3=e=>e,jv=e=>Reflect.getPrototypeOf(e);function xy(e,t,r=!1,l=!1){e=e.__v_raw;const c=Rr(e),d=Rr(t);r||(t!==d&&lc(c,"get",t),lc(c,"get",d));const{has:m}=jv(c),n=l?a3:r?c3:b1;if(m.call(c,t))return n(e.get(t));if(m.call(c,d))return n(e.get(d));e!==c&&e.get(t)}function by(e,t=!1){const r=this.__v_raw,l=Rr(r),c=Rr(e);return t||(e!==c&&lc(l,"has",e),lc(l,"has",c)),e===c?r.has(e):r.has(e)||r.has(c)}function wy(e,t=!1){return e=e.__v_raw,!t&&lc(Rr(e),"iterate",Ef),Reflect.get(e,"size",e)}function cS(e){e=Rr(e);const t=Rr(this);return jv(t).has.call(t,e)||(t.add(e),Zd(t,"add",e,e)),this}function hS(e,t){t=Rr(t);const r=Rr(this),{has:l,get:c}=jv(r);let d=l.call(r,e);d||(e=Rr(e),d=l.call(r,e));const m=c.call(r,e);return r.set(e,t),d?hm(t,m)&&Zd(r,"set",e,t):Zd(r,"add",e,t),this}function dS(e){const t=Rr(this),{has:r,get:l}=jv(t);let c=r.call(t,e);c||(e=Rr(e),c=r.call(t,e)),l&&l.call(t,e);const d=t.delete(e);return c&&Zd(t,"delete",e,void 0),d}function uS(){const e=Rr(this),t=e.size!==0,r=e.clear();return t&&Zd(e,"clear",void 0,void 0),r}function Ty(e,t){return function(l,c){const d=this,m=d.__v_raw,n=Rr(m),T=t?a3:e?c3:b1;return!e&&lc(n,"iterate",Ef),m.forEach((V,Q)=>l.call(c,T(V),T(Q),d))}}function Sy(e,t,r){return function(...l){const c=this.__v_raw,d=Rr(c),m=em(d),n=e==="entries"||e===Symbol.iterator&&m,T=e==="keys"&&m,V=c[e](...l),Q=r?a3:t?c3:b1;return!t&&lc(d,"iterate",T?ow:Ef),{next(){const{value:z,done:W}=V.next();return W?{value:z,done:W}:{value:n?[Q(z[0]),Q(z[1])]:Q(z),done:W}},[Symbol.iterator](){return this}}}}function Gu(e){return function(...t){return e==="delete"?!1:this}}function j6(){const e={get(d){return xy(this,d)},get size(){return wy(this)},has:by,add:cS,set:hS,delete:dS,clear:uS,forEach:Ty(!1,!1)},t={get(d){return xy(this,d,!1,!0)},get size(){return wy(this)},has:by,add:cS,set:hS,delete:dS,clear:uS,forEach:Ty(!1,!0)},r={get(d){return xy(this,d,!0)},get size(){return wy(this,!0)},has(d){return by.call(this,d,!0)},add:Gu("add"),set:Gu("set"),delete:Gu("delete"),clear:Gu("clear"),forEach:Ty(!0,!1)},l={get(d){return xy(this,d,!0,!0)},get size(){return wy(this,!0)},has(d){return by.call(this,d,!0)},add:Gu("add"),set:Gu("set"),delete:Gu("delete"),clear:Gu("clear"),forEach:Ty(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{e[d]=Sy(d,!1,!1),r[d]=Sy(d,!0,!1),t[d]=Sy(d,!1,!0),l[d]=Sy(d,!0,!0)}),[e,r,t,l]}const[U6,G6,V6,$6]=j6();function Uv(e,t){const r=t?e?$6:V6:e?G6:U6;return(l,c,d)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?l:Reflect.get($r(r,c)&&c in l?r:l,c,d)}const H6={get:Uv(!1,!1)},W6={get:Uv(!1,!0)},Y6={get:Uv(!0,!1)},X6={get:Uv(!0,!0)},vE=new WeakMap,xE=new WeakMap,bE=new WeakMap,wE=new WeakMap;function q6(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Z6(e){return e.__v_skip||!Object.isExtensible(e)?0:q6(x6(e))}function F1(e){return op(e)?e:Vv(e,!1,_E,H6,vE)}function l3(e){return Vv(e,!1,N6,W6,xE)}function Gv(e){return Vv(e,!0,yE,Y6,bE)}function TE(e){return Vv(e,!0,F6,X6,wE)}function Vv(e,t,r,l,c){if(!hs(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const d=c.get(e);if(d)return d;const m=Z6(e);if(m===0)return e;const n=new Proxy(e,m===2?l:r);return c.set(e,n),n}function Qu(e){return op(e)?Qu(e.__v_raw):!!(e&&e.__v_isReactive)}function op(e){return!!(e&&e.__v_isReadonly)}function dm(e){return!!(e&&e.__v_isShallow)}function $v(e){return Qu(e)||op(e)}function Rr(e){const t=e&&e.__v_raw;return t?Rr(t):e}function Hv(e){return nv(e,"__v_skip",!0),e}const b1=e=>hs(e)?F1(e):e,c3=e=>hs(e)?Gv(e):e;function h3(e){Ju&&dh&&(e=Rr(e),fE(e.dep||(e.dep=o3())))}function Wv(e,t){e=Rr(e),e.dep&&aw(e.dep)}function Bo(e){return!!(e&&e.__v_isRef===!0)}function Zs(e){return EE(e,!1)}function SE(e){return EE(e,!0)}function EE(e,t){return Bo(e)?e:new K6(e,t)}class K6{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Rr(t),this._value=r?t:b1(t)}get value(){return h3(this),this._value}set value(t){const r=this.__v_isShallow||dm(t)||op(t);t=r?t:Rr(t),hm(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:b1(t),Wv(this))}}function CE(e){Wv(e)}function xo(e){return Bo(e)?e.value:e}const J6={get:(e,t,r)=>xo(Reflect.get(e,t,r)),set:(e,t,r,l)=>{const c=e[t];return Bo(c)&&!Bo(r)?(c.value=r,!0):Reflect.set(e,t,r,l)}};function Yv(e){return Qu(e)?e:new Proxy(e,J6)}class Q6{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:l}=t(()=>h3(this),()=>Wv(this));this._get=r,this._set=l}get value(){return this._get()}set value(t){this._set(t)}}function ME(e){return new Q6(e)}function AE(e){const t=an(e)?new Array(e.length):{};for(const r in e)t[r]=d3(e,r);return t}class ek{constructor(t,r,l){this._object=t,this._key=r,this._defaultValue=l,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function d3(e,t,r){const l=e[t];return Bo(l)?l:new ek(e,t,r)}var kE;class tk{constructor(t,r,l,c){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this[kE]=!1,this._dirty=!0,this.effect=new wm(t,()=>{this._dirty||(this._dirty=!0,Wv(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!c,this.__v_isReadonly=l}get value(){const t=Rr(this);return h3(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}kE="__v_isReadonly";function ik(e,t,r=!1){let l,c;const d=Wn(e);return d?(l=e,c=Ka):(l=e.get,c=e.set),new tk(l,c,d||!c,r)}function PE(e,...t){}function Qh(e,t,r,l){let c;try{c=l?e(...l):e()}catch(d){mp(d,t,r)}return c}function Tl(e,t,r,l){if(Wn(e)){const d=Qh(e,t,r,l);return d&&r3(d)&&d.catch(m=>{mp(m,t,r)}),d}const c=[];for(let d=0;d<e.length;d++)c.push(Tl(e[d],t,r,l));return c}function mp(e,t,r,l=!0){const c=t?t.vnode:null;if(t){let d=t.parent;const m=t.proxy,n=r;for(;d;){const V=d.ec;if(V){for(let Q=0;Q<V.length;Q++)if(V[Q](e,m,n)===!1)return}d=d.parent}const T=t.appContext.config.errorHandler;if(T){Qh(T,null,10,[e,m,n]);return}}nk(e,r,c,l)}function nk(e,t,r,l=!0){console.error(e)}let w1=!1,lw=!1;const ka=[];let Xh=0;const im=[];let jd=null,_f=0;const DE=Promise.resolve();let u3=null;function Em(e){const t=u3||DE;return e?t.then(this?e.bind(this):e):t}function rk(e){let t=Xh+1,r=ka.length;for(;t<r;){const l=t+r>>>1;T1(ka[l])<e?t=l+1:r=l}return t}function Xv(e){(!ka.length||!ka.includes(e,w1&&e.allowRecurse?Xh+1:Xh))&&(e.id==null?ka.push(e):ka.splice(rk(e.id),0,e),IE())}function IE(){!w1&&!lw&&(lw=!0,u3=DE.then(LE))}function sk(e){const t=ka.indexOf(e);t>Xh&&ka.splice(t,1)}function qv(e){an(e)?im.push(...e):(!jd||!jd.includes(e,e.allowRecurse?_f+1:_f))&&im.push(e),IE()}function pS(e,t=w1?Xh+1:0){for(;t<ka.length;t++){const r=ka[t];r&&r.pre&&(ka.splice(t,1),t--,r())}}function rv(e){if(im.length){const t=[...new Set(im)];if(im.length=0,jd){jd.push(...t);return}for(jd=t,jd.sort((r,l)=>T1(r)-T1(l)),_f=0;_f<jd.length;_f++)jd[_f]();jd=null,_f=0}}const T1=e=>e.id==null?1/0:e.id,ok=(e,t)=>{const r=T1(e)-T1(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function LE(e){lw=!1,w1=!0,ka.sort(ok);const t=Ka;try{for(Xh=0;Xh<ka.length;Xh++){const r=ka[Xh];r&&r.active!==!1&&Qh(r,null,14)}}finally{Xh=0,ka.length=0,rv(),w1=!1,u3=null,(ka.length||im.length)&&LE()}}let yf,Ey=[];function p3(e,t){var r,l;yf=e,yf?(yf.enabled=!0,Ey.forEach(({event:c,args:d})=>yf.emit(c,...d)),Ey=[]):typeof window<"u"&&window.HTMLElement&&!(!((l=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||l===void 0)&&l.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(d=>{p3(d,t)}),setTimeout(()=>{yf||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Ey=[])},3e3)):Ey=[]}function ak(e,t,...r){if(e.isUnmounted)return;const l=e.vnode.props||os;let c=r;const d=t.startsWith("update:"),m=d&&t.slice(7);if(m&&m in l){const Q=`${m==="modelValue"?"model":m}Modifiers`,{number:z,trim:W}=l[Q]||os;W&&(c=r.map(K=>ir(K)?K.trim():K)),z&&(c=r.map(qd))}let n,T=l[n=Sf(t)]||l[n=Sf(ea(t))];!T&&d&&(T=l[n=Sf(oc(t))]),T&&Tl(T,e,6,c);const V=l[n+"Once"];if(V){if(!e.emitted)e.emitted={};else if(e.emitted[n])return;e.emitted[n]=!0,Tl(V,e,6,c)}}function OE(e,t,r=!1){const l=t.emitsCache,c=l.get(e);if(c!==void 0)return c;const d=e.emits;let m={},n=!1;if(!Wn(e)){const T=V=>{const Q=OE(V,t,!0);Q&&(n=!0,Jr(m,Q))};!r&&t.mixins.length&&t.mixins.forEach(T),e.extends&&T(e.extends),e.mixins&&e.mixins.forEach(T)}return!d&&!n?(hs(e)&&l.set(e,null),null):(an(d)?d.forEach(T=>m[T]=null):Jr(m,d),hs(e)&&l.set(e,m),m)}function Zv(e,t){return!e||!Bf(t)?!1:(t=t.slice(2).replace(/Once$/,""),$r(e,t[0].toLowerCase()+t.slice(1))||$r(e,oc(t))||$r(e,t))}let ua=null,Kv=null;function S1(e){const t=ua;return ua=e,Kv=e&&e.type.__scopeId||null,t}function Nf(e){Kv=e}function Ff(){Kv=null}const RE=e=>js;function js(e,t=ua,r){if(!t||e._n)return e;const l=(...c)=>{l._d&&av(-1);const d=S1(t);let m;try{m=e(...c)}finally{S1(d),l._d&&av(1)}return m};return l._n=!0,l._c=!0,l._d=!0,l}function $y(e){const{type:t,vnode:r,proxy:l,withProxy:c,props:d,propsOptions:[m],slots:n,attrs:T,emit:V,render:Q,renderCache:z,data:W,setupState:K,ctx:I,inheritAttrs:O}=e;let $,M;const S=S1(e);try{if(r.shapeFlag&4){const G=c||l;$=rc(Q.call(G,G,z,d,K,W,I)),M=T}else{const G=t;$=rc(G.length>1?G(d,{attrs:T,slots:n,emit:V}):G(d,null)),M=t.props?T:ck(T)}}catch(G){f1.length=0,mp(G,e,1),$=Ji(fa)}let k=$;if(M&&O!==!1){const G=Object.keys(M),{shapeFlag:U}=k;G.length&&U&7&&(m&&G.some(i3)&&(M=hk(M,m)),k=mh(k,M))}return r.dirs&&(k=mh(k),k.dirs=k.dirs?k.dirs.concat(r.dirs):r.dirs),r.transition&&(k.transition=r.transition),$=k,S1(S),$}function lk(e){let t;for(let r=0;r<e.length;r++){const l=e[r];if(Kd(l)){if(l.type!==fa||l.children==="v-if"){if(t)return;t=l}}else return}return t}const ck=e=>{let t;for(const r in e)(r==="class"||r==="style"||Bf(r))&&((t||(t={}))[r]=e[r]);return t},hk=(e,t)=>{const r={};for(const l in e)(!i3(l)||!(l.slice(9)in t))&&(r[l]=e[l]);return r};function dk(e,t,r){const{props:l,children:c,component:d}=e,{props:m,children:n,patchFlag:T}=t,V=d.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&T>=0){if(T&1024)return!0;if(T&16)return l?fS(l,m,V):!!m;if(T&8){const Q=t.dynamicProps;for(let z=0;z<Q.length;z++){const W=Q[z];if(m[W]!==l[W]&&!Zv(V,W))return!0}}}else return(c||n)&&(!n||!n.$stable)?!0:l===m?!1:l?m?fS(l,m,V):!0:!!m;return!1}function fS(e,t,r){const l=Object.keys(t);if(l.length!==Object.keys(e).length)return!0;for(let c=0;c<l.length;c++){const d=l[c];if(t[d]!==e[d]&&!Zv(r,d))return!0}return!1}function f3({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const BE=e=>e.__isSuspense,uk={name:"Suspense",__isSuspense:!0,process(e,t,r,l,c,d,m,n,T,V){e==null?pk(t,r,l,c,d,m,n,T,V):fk(e,t,r,l,c,m,n,T,V)},hydrate:mk,create:m3,normalize:gk},zE=uk;function E1(e,t){const r=e.props&&e.props[t];Wn(r)&&r()}function pk(e,t,r,l,c,d,m,n,T){const{p:V,o:{createElement:Q}}=T,z=Q("div"),W=e.suspense=m3(e,c,l,t,z,r,d,m,n,T);V(null,W.pendingBranch=e.ssContent,z,null,l,W,d,m),W.deps>0?(E1(e,"onPending"),E1(e,"onFallback"),V(null,e.ssFallback,t,r,l,null,d,m),nm(W,e.ssFallback)):W.resolve()}function fk(e,t,r,l,c,d,m,n,{p:T,um:V,o:{createElement:Q}}){const z=t.suspense=e.suspense;z.vnode=t,t.el=e.el;const W=t.ssContent,K=t.ssFallback,{activeBranch:I,pendingBranch:O,isInFallback:$,isHydrating:M}=z;if(O)z.pendingBranch=W,qh(W,O)?(T(O,W,z.hiddenContainer,null,c,z,d,m,n),z.deps<=0?z.resolve():$&&(T(I,K,r,l,c,null,d,m,n),nm(z,K))):(z.pendingId++,M?(z.isHydrating=!1,z.activeBranch=O):V(O,c,z),z.deps=0,z.effects.length=0,z.hiddenContainer=Q("div"),$?(T(null,W,z.hiddenContainer,null,c,z,d,m,n),z.deps<=0?z.resolve():(T(I,K,r,l,c,null,d,m,n),nm(z,K))):I&&qh(W,I)?(T(I,W,r,l,c,z,d,m,n),z.resolve(!0)):(T(null,W,z.hiddenContainer,null,c,z,d,m,n),z.deps<=0&&z.resolve()));else if(I&&qh(W,I))T(I,W,r,l,c,z,d,m,n),nm(z,W);else if(E1(t,"onPending"),z.pendingBranch=W,z.pendingId++,T(null,W,z.hiddenContainer,null,c,z,d,m,n),z.deps<=0)z.resolve();else{const{timeout:S,pendingId:k}=z;S>0?setTimeout(()=>{z.pendingId===k&&z.fallback(K)},S):S===0&&z.fallback(K)}}function m3(e,t,r,l,c,d,m,n,T,V,Q=!1){const{p:z,m:W,um:K,n:I,o:{parentNode:O,remove:$}}=V,M=qd(e.props&&e.props.timeout),S={vnode:e,parent:t,parentComponent:r,isSVG:m,container:l,hiddenContainer:c,anchor:d,deps:0,pendingId:0,timeout:typeof M=="number"?M:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:Q,isUnmounted:!1,effects:[],resolve(k=!1){const{vnode:G,activeBranch:U,pendingBranch:C,pendingId:ie,effects:J,parentComponent:N,container:F}=S;if(S.isHydrating)S.isHydrating=!1;else if(!k){const L=U&&C.transition&&C.transition.mode==="out-in";L&&(U.transition.afterLeave=()=>{ie===S.pendingId&&W(C,F,f,0)});let{anchor:f}=S;U&&(f=I(U),K(U,N,S,!0)),L||W(C,F,f,0)}nm(S,C),S.pendingBranch=null,S.isInFallback=!1;let H=S.parent,E=!1;for(;H;){if(H.pendingBranch){H.effects.push(...J),E=!0;break}H=H.parent}E||qv(J),S.effects=[],E1(G,"onResolve")},fallback(k){if(!S.pendingBranch)return;const{vnode:G,activeBranch:U,parentComponent:C,container:ie,isSVG:J}=S;E1(G,"onFallback");const N=I(U),F=()=>{S.isInFallback&&(z(null,k,ie,N,C,null,J,n,T),nm(S,k))},H=k.transition&&k.transition.mode==="out-in";H&&(U.transition.afterLeave=F),S.isInFallback=!0,K(U,C,null,!0),H||F()},move(k,G,U){S.activeBranch&&W(S.activeBranch,k,G,U),S.container=k},next(){return S.activeBranch&&I(S.activeBranch)},registerDep(k,G){const U=!!S.pendingBranch;U&&S.deps++;const C=k.vnode.el;k.asyncDep.catch(ie=>{mp(ie,k,0)}).then(ie=>{if(k.isUnmounted||S.isUnmounted||S.pendingId!==k.suspenseId)return;k.asyncResolved=!0;const{vnode:J}=k;mw(k,ie,!1),C&&(J.el=C);const N=!C&&k.subTree.el;G(k,J,O(C||k.subTree.el),C?null:I(k.subTree),S,m,T),N&&$(N),f3(k,J.el),U&&--S.deps===0&&S.resolve()})},unmount(k,G){S.isUnmounted=!0,S.activeBranch&&K(S.activeBranch,r,k,G),S.pendingBranch&&K(S.pendingBranch,r,k,G)}};return S}function mk(e,t,r,l,c,d,m,n,T){const V=t.suspense=m3(t,l,r,e.parentNode,document.createElement("div"),null,c,d,m,n,!0),Q=T(e,V.pendingBranch=t.ssContent,r,V,d,m);return V.deps===0&&V.resolve(),Q}function gk(e){const{shapeFlag:t,children:r}=e,l=t&32;e.ssContent=mS(l?r.default:r),e.ssFallback=l?mS(r.fallback):Ji(fa)}function mS(e){let t;if(Wn(e)){const r=If&&e._c;r&&(e._d=!1,ki()),e=e(),r&&(e._d=!0,t=bl,aC())}return an(e)&&(e=lk(e)),e=rc(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function NE(e,t){t&&t.pendingBranch?an(e)?t.effects.push(...e):t.effects.push(e):qv(e)}function nm(e,t){e.activeBranch=t;const{vnode:r,parentComponent:l}=e,c=r.el=t.el;l&&l.subTree===r&&(l.vnode.el=c,f3(l,c))}function Cm(e,t){if(Ro){let r=Ro.provides;const l=Ro.parent&&Ro.parent.provides;l===r&&(r=Ro.provides=Object.create(l)),r[e]=t}}function Cf(e,t,r=!1){const l=Ro||ua;if(l){const c=l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides;if(c&&e in c)return c[e];if(arguments.length>1)return r&&Wn(t)?t.call(l.proxy):t}}function FE(e,t){return j1(e,null,t)}function g3(e,t){return j1(e,null,{flush:"post"})}function jE(e,t){return j1(e,null,{flush:"sync"})}const Cy={};function Uc(e,t,r){return j1(e,t,r)}function j1(e,t,{immediate:r,deep:l,flush:c,onTrack:d,onTrigger:m}=os){const n=Ro;let T,V=!1,Q=!1;if(Bo(e)?(T=()=>e.value,V=dm(e)):Qu(e)?(T=()=>e,l=!0):an(e)?(Q=!0,V=e.some(k=>Qu(k)||dm(k)),T=()=>e.map(k=>{if(Bo(k))return k.value;if(Qu(k))return xf(k);if(Wn(k))return Qh(k,n,2)})):Wn(e)?t?T=()=>Qh(e,n,2):T=()=>{if(!(n&&n.isUnmounted))return z&&z(),Tl(e,n,3,[W])}:T=Ka,t&&l){const k=T;T=()=>xf(k())}let z,W=k=>{z=M.onStop=()=>{Qh(k,n,4)}},K;if(um)if(W=Ka,t?r&&Tl(t,n,3,[T(),Q?[]:void 0,W]):T(),c==="sync"){const k=R3();K=k.__watcherHandles||(k.__watcherHandles=[])}else return Ka;let I=Q?new Array(e.length).fill(Cy):Cy;const O=()=>{if(M.active)if(t){const k=M.run();(l||V||(Q?k.some((G,U)=>hm(G,I[U])):hm(k,I)))&&(z&&z(),Tl(t,n,3,[k,I===Cy?void 0:Q&&I[0]===Cy?[]:I,W]),I=k)}else M.run()};O.allowRecurse=!!t;let $;c==="sync"?$=O:c==="post"?$=()=>da(O,n&&n.suspense):(O.pre=!0,n&&(O.id=n.uid),$=()=>Xv(O));const M=new wm(T,$);t?r?O():I=M.run():c==="post"?da(M.run.bind(M),n&&n.suspense):M.run();const S=()=>{M.stop(),n&&n.scope&&n3(n.scope.effects,M)};return K&&K.push(S),S}function _k(e,t,r){const l=this.proxy,c=ir(e)?e.includes(".")?UE(l,e):()=>l[e]:e.bind(l,l);let d;Wn(t)?d=t:(d=t.handler,r=t);const m=Ro;cp(this);const n=j1(c,d.bind(l),r);return m?cp(m):tp(),n}function UE(e,t){const r=t.split(".");return()=>{let l=e;for(let c=0;c<r.length&&l;c++)l=l[r[c]];return l}}function xf(e,t){if(!hs(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Bo(e))xf(e.value,t);else if(an(e))for(let r=0;r<e.length;r++)xf(e[r],t);else if(zf(e)||em(e))e.forEach(r=>{xf(r,t)});else if(rE(e))for(const r in e)xf(e[r],t);return e}function Jv(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return td(()=>{e.isMounted=!0}),Uf(()=>{e.isUnmounting=!0}),e}const Rc=[Function,Array],yk={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Rc,onEnter:Rc,onAfterEnter:Rc,onEnterCancelled:Rc,onBeforeLeave:Rc,onLeave:Rc,onAfterLeave:Rc,onLeaveCancelled:Rc,onBeforeAppear:Rc,onAppear:Rc,onAfterAppear:Rc,onAppearCancelled:Rc},setup(e,{slots:t}){const r=iu(),l=Jv();let c;return()=>{const d=t.default&&U1(t.default(),!0);if(!d||!d.length)return;let m=d[0];if(d.length>1){for(const O of d)if(O.type!==fa){m=O;break}}const n=Rr(e),{mode:T}=n;if(l.isLeaving)return Sb(m);const V=gS(m);if(!V)return Sb(m);const Q=Df(V,n,l,r);ap(V,Q);const z=r.subTree,W=z&&gS(z);let K=!1;const{getTransitionKey:I}=V.type;if(I){const O=I();c===void 0?c=O:O!==c&&(c=O,K=!0)}if(W&&W.type!==fa&&(!qh(V,W)||K)){const O=Df(W,n,l,r);if(ap(W,O),T==="out-in")return l.isLeaving=!0,O.afterLeave=()=>{l.isLeaving=!1,r.update.active!==!1&&r.update()},Sb(m);T==="in-out"&&V.type!==fa&&(O.delayLeave=($,M,S)=>{const k=GE(l,W);k[String(W.key)]=W,$._leaveCb=()=>{M(),$._leaveCb=void 0,delete Q.delayedLeave},Q.delayedLeave=S})}return m}}},Qv=yk;function GE(e,t){const{leavingVNodes:r}=e;let l=r.get(t.type);return l||(l=Object.create(null),r.set(t.type,l)),l}function Df(e,t,r,l){const{appear:c,mode:d,persisted:m=!1,onBeforeEnter:n,onEnter:T,onAfterEnter:V,onEnterCancelled:Q,onBeforeLeave:z,onLeave:W,onAfterLeave:K,onLeaveCancelled:I,onBeforeAppear:O,onAppear:$,onAfterAppear:M,onAppearCancelled:S}=t,k=String(e.key),G=GE(r,e),U=(J,N)=>{J&&Tl(J,l,9,N)},C=(J,N)=>{const F=N[1];U(J,N),an(J)?J.every(H=>H.length<=1)&&F():J.length<=1&&F()},ie={mode:d,persisted:m,beforeEnter(J){let N=n;if(!r.isMounted)if(c)N=O||n;else return;J._leaveCb&&J._leaveCb(!0);const F=G[k];F&&qh(e,F)&&F.el._leaveCb&&F.el._leaveCb(),U(N,[J])},enter(J){let N=T,F=V,H=Q;if(!r.isMounted)if(c)N=$||T,F=M||V,H=S||Q;else return;let E=!1;const L=J._enterCb=f=>{E||(E=!0,f?U(H,[J]):U(F,[J]),ie.delayedLeave&&ie.delayedLeave(),J._enterCb=void 0)};N?C(N,[J,L]):L()},leave(J,N){const F=String(e.key);if(J._enterCb&&J._enterCb(!0),r.isUnmounting)return N();U(z,[J]);let H=!1;const E=J._leaveCb=L=>{H||(H=!0,N(),L?U(I,[J]):U(K,[J]),J._leaveCb=void 0,G[F]===e&&delete G[F])};G[F]=e,W?C(W,[J,E]):E()},clone(J){return Df(J,t,r,l)}};return ie}function Sb(e){if(G1(e))return e=mh(e),e.children=null,e}function gS(e){return G1(e)?e.children?e.children[0]:void 0:e}function ap(e,t){e.shapeFlag&6&&e.component?ap(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function U1(e,t=!1,r){let l=[],c=0;for(let d=0;d<e.length;d++){let m=e[d];const n=r==null?m.key:String(r)+String(m.key!=null?m.key:d);m.type===Pr?(m.patchFlag&128&&c++,l=l.concat(U1(m.children,t,n))):(t||m.type!==fa)&&l.push(n!=null?mh(m,{key:n}):m)}if(c>1)for(let d=0;d<l.length;d++)l[d].patchFlag=-2;return l}function ex(e){return Wn(e)?{setup:e,name:e.name}:e}const Mf=e=>!!e.type.__asyncLoader;function VE(e){Wn(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:l,delay:c=200,timeout:d,suspensible:m=!0,onError:n}=e;let T=null,V,Q=0;const z=()=>(Q++,T=null,W()),W=()=>{let K;return T||(K=T=t().catch(I=>{if(I=I instanceof Error?I:new Error(String(I)),n)return new Promise((O,$)=>{n(I,()=>O(z()),()=>$(I),Q+1)});throw I}).then(I=>K!==T&&T?T:(I&&(I.__esModule||I[Symbol.toStringTag]==="Module")&&(I=I.default),V=I,I)))};return ex({name:"AsyncComponentWrapper",__asyncLoader:W,get __asyncResolved(){return V},setup(){const K=Ro;if(V)return()=>Eb(V,K);const I=S=>{T=null,mp(S,K,13,!l)};if(m&&K.suspense||um)return W().then(S=>()=>Eb(S,K)).catch(S=>(I(S),()=>l?Ji(l,{error:S}):null));const O=Zs(!1),$=Zs(),M=Zs(!!c);return c&&setTimeout(()=>{M.value=!1},c),d!=null&&setTimeout(()=>{if(!O.value&&!$.value){const S=new Error(`Async component timed out after ${d}ms.`);I(S),$.value=S}},d),W().then(()=>{O.value=!0,K.parent&&G1(K.parent.vnode)&&Xv(K.parent.update)}).catch(S=>{I(S),$.value=S}),()=>{if(O.value&&V)return Eb(V,K);if($.value&&l)return Ji(l,{error:$.value});if(r&&!M.value)return Ji(r)}}})}function Eb(e,t){const{ref:r,props:l,children:c,ce:d}=t.vnode,m=Ji(e,l,c);return m.ref=r,m.ce=d,delete t.vnode.ce,m}const G1=e=>e.type.__isKeepAlive,vk={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const r=iu(),l=r.ctx;if(!l.renderer)return()=>{const S=t.default&&t.default();return S&&S.length===1?S[0]:S};const c=new Map,d=new Set;let m=null;const n=r.suspense,{renderer:{p:T,m:V,um:Q,o:{createElement:z}}}=l,W=z("div");l.activate=(S,k,G,U,C)=>{const ie=S.component;V(S,k,G,0,n),T(ie.vnode,S,k,G,ie,n,U,S.slotScopeIds,C),da(()=>{ie.isDeactivated=!1,ie.a&&tm(ie.a);const J=S.props&&S.props.onVnodeMounted;J&&vl(J,ie.parent,S)},n)},l.deactivate=S=>{const k=S.component;V(S,W,null,1,n),da(()=>{k.da&&tm(k.da);const G=S.props&&S.props.onVnodeUnmounted;G&&vl(G,k.parent,S),k.isDeactivated=!0},n)};function K(S){Cb(S),Q(S,r,n,!0)}function I(S){c.forEach((k,G)=>{const U=_w(k.type);U&&(!S||!S(U))&&O(G)})}function O(S){const k=c.get(S);!m||k.type!==m.type?K(k):m&&Cb(m),c.delete(S),d.delete(S)}Uc(()=>[e.include,e.exclude],([S,k])=>{S&&I(G=>d1(S,G)),k&&I(G=>!d1(k,G))},{flush:"post",deep:!0});let $=null;const M=()=>{$!=null&&c.set($,Mb(r.subTree))};return td(M),jf(M),Uf(()=>{c.forEach(S=>{const{subTree:k,suspense:G}=r,U=Mb(k);if(S.type===U.type){Cb(U);const C=U.component.da;C&&da(C,G);return}K(S)})}),()=>{if($=null,!t.default)return null;const S=t.default(),k=S[0];if(S.length>1)return m=null,S;if(!Kd(k)||!(k.shapeFlag&4)&&!(k.shapeFlag&128))return m=null,k;let G=Mb(k);const U=G.type,C=_w(Mf(G)?G.type.__asyncResolved||{}:U),{include:ie,exclude:J,max:N}=e;if(ie&&(!C||!d1(ie,C))||J&&C&&d1(J,C))return m=G,k;const F=G.key==null?U:G.key,H=c.get(F);return G.el&&(G=mh(G),k.shapeFlag&128&&(k.ssContent=G)),$=F,H?(G.el=H.el,G.component=H.component,G.transition&&ap(G,G.transition),G.shapeFlag|=512,d.delete(F),d.add(F)):(d.add(F),N&&d.size>parseInt(N,10)&&O(d.values().next().value)),G.shapeFlag|=256,m=G,BE(k.type)?k:G}}},$E=vk;function d1(e,t){return an(e)?e.some(r=>d1(r,t)):ir(e)?e.split(",").includes(t):e.test?e.test(t):!1}function _3(e,t){HE(e,"a",t)}function y3(e,t){HE(e,"da",t)}function HE(e,t,r=Ro){const l=e.__wdc||(e.__wdc=()=>{let c=r;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(tx(t,l,r),r){let c=r.parent;for(;c&&c.parent;)G1(c.parent.vnode)&&xk(l,t,r,c),c=c.parent}}function xk(e,t,r,l){const c=tx(t,e,l,!0);Gf(()=>{n3(l[t],c)},r)}function Cb(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Mb(e){return e.shapeFlag&128?e.ssContent:e}function tx(e,t,r=Ro,l=!1){if(r){const c=r[e]||(r[e]=[]),d=t.__weh||(t.__weh=(...m)=>{if(r.isUnmounted)return;Tm(),cp(r);const n=Tl(t,r,e,m);return tp(),Sm(),n});return l?c.unshift(d):c.push(d),d}}const tu=e=>(t,r=Ro)=>(!um||e==="sp")&&tx(e,(...l)=>t(...l),r),v3=tu("bm"),td=tu("m"),ix=tu("bu"),jf=tu("u"),Uf=tu("bum"),Gf=tu("um"),x3=tu("sp"),b3=tu("rtg"),w3=tu("rtc");function T3(e,t=Ro){tx("ec",e,t)}function Pa(e,t){const r=ua;if(r===null)return e;const l=ox(r)||r.proxy,c=e.dirs||(e.dirs=[]);for(let d=0;d<t.length;d++){let[m,n,T,V=os]=t[d];m&&(Wn(m)&&(m={mounted:m,updated:m}),m.deep&&xf(n),c.push({dir:m,instance:l,value:n,oldValue:void 0,arg:T,modifiers:V}))}return e}function Yh(e,t,r,l){const c=e.dirs,d=t&&t.dirs;for(let m=0;m<c.length;m++){const n=c[m];d&&(n.oldValue=d[m].value);let T=n.dir[l];T&&(Tm(),Tl(T,r,8,[e.el,n,e,t]),Sm())}}const S3="components",bk="directives";function ar(e,t){return E3(S3,e,!0,t)||e}const WE=Symbol();function YE(e){return ir(e)?E3(S3,e,!1)||e:e||WE}function nx(e){return E3(bk,e)}function E3(e,t,r=!0,l=!1){const c=ua||Ro;if(c){const d=c.type;if(e===S3){const n=_w(d,!1);if(n&&(n===t||n===ea(t)||n===fp(ea(t))))return d}const m=_S(c[e]||d[e],t)||_S(c.appContext[e],t);return!m&&l?d:m}}function _S(e,t){return e&&(e[t]||e[ea(t)]||e[fp(ea(t))])}function pa(e,t,r,l){let c;const d=r&&r[l];if(an(e)||ir(e)){c=new Array(e.length);for(let m=0,n=e.length;m<n;m++)c[m]=t(e[m],m,void 0,d&&d[m])}else if(typeof e=="number"){c=new Array(e);for(let m=0;m<e;m++)c[m]=t(m+1,m,void 0,d&&d[m])}else if(hs(e))if(e[Symbol.iterator])c=Array.from(e,(m,n)=>t(m,n,void 0,d&&d[n]));else{const m=Object.keys(e);c=new Array(m.length);for(let n=0,T=m.length;n<T;n++){const V=m[n];c[n]=t(e[V],V,n,d&&d[n])}}else c=[];return r&&(r[l]=c),c}function XE(e,t){for(let r=0;r<t.length;r++){const l=t[r];if(an(l))for(let c=0;c<l.length;c++)e[l[c].name]=l[c].fn;else l&&(e[l.name]=l.key?(...c)=>{const d=l.fn(...c);return d&&(d.key=l.key),d}:l.fn)}return e}function hh(e,t,r={},l,c){if(ua.isCE||ua.parent&&Mf(ua.parent)&&ua.parent.isCE)return t!=="default"&&(r.name=t),Ji("slot",r,l&&l());let d=e[t];d&&d._c&&(d._d=!1),ki();const m=d&&qE(d(r)),n=fh(Pr,{key:r.key||m&&m.key||`_${t}`},m||(l?l():[]),m&&e._===1?64:-2);return!c&&n.scopeId&&(n.slotScopeIds=[n.scopeId+"-s"]),d&&d._c&&(d._d=!0),n}function qE(e){return e.some(t=>Kd(t)?!(t.type===fa||t.type===Pr&&!qE(t.children)):!0)?e:null}function ZE(e,t){const r={};for(const l in e)r[t&&/[A-Z]/.test(l)?`on:${l}`:Sf(l)]=e[l];return r}const cw=e=>e?uC(e)?ox(e)||e.proxy:cw(e.parent):null,u1=Jr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>cw(e.parent),$root:e=>cw(e.root),$emit:e=>e.emit,$options:e=>C3(e),$forceUpdate:e=>e.f||(e.f=()=>Xv(e.update)),$nextTick:e=>e.n||(e.n=Em.bind(e.proxy)),$watch:e=>_k.bind(e)}),Ab=(e,t)=>e!==os&&!e.__isScriptSetup&&$r(e,t),hw={get({_:e},t){const{ctx:r,setupState:l,data:c,props:d,accessCache:m,type:n,appContext:T}=e;let V;if(t[0]!=="$"){const K=m[t];if(K!==void 0)switch(K){case 1:return l[t];case 2:return c[t];case 4:return r[t];case 3:return d[t]}else{if(Ab(l,t))return m[t]=1,l[t];if(c!==os&&$r(c,t))return m[t]=2,c[t];if((V=e.propsOptions[0])&&$r(V,t))return m[t]=3,d[t];if(r!==os&&$r(r,t))return m[t]=4,r[t];dw&&(m[t]=0)}}const Q=u1[t];let z,W;if(Q)return t==="$attrs"&&lc(e,"get",t),Q(e);if((z=n.__cssModules)&&(z=z[t]))return z;if(r!==os&&$r(r,t))return m[t]=4,r[t];if(W=T.config.globalProperties,$r(W,t))return W[t]},set({_:e},t,r){const{data:l,setupState:c,ctx:d}=e;return Ab(c,t)?(c[t]=r,!0):l!==os&&$r(l,t)?(l[t]=r,!0):$r(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(d[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:l,appContext:c,propsOptions:d}},m){let n;return!!r[m]||e!==os&&$r(e,m)||Ab(t,m)||(n=d[0])&&$r(n,m)||$r(l,m)||$r(u1,m)||$r(c.config.globalProperties,m)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:$r(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}},wk=Jr({},hw,{get(e,t){if(t!==Symbol.unscopables)return hw.get(e,t,e)},has(e,t){return t[0]!=="_"&&!s6(t)}});let dw=!0;function Tk(e){const t=C3(e),r=e.proxy,l=e.ctx;dw=!1,t.beforeCreate&&yS(t.beforeCreate,e,"bc");const{data:c,computed:d,methods:m,watch:n,provide:T,inject:V,created:Q,beforeMount:z,mounted:W,beforeUpdate:K,updated:I,activated:O,deactivated:$,beforeDestroy:M,beforeUnmount:S,destroyed:k,unmounted:G,render:U,renderTracked:C,renderTriggered:ie,errorCaptured:J,serverPrefetch:N,expose:F,inheritAttrs:H,components:E,directives:L,filters:f}=t;if(V&&Sk(V,l,null,e.appContext.config.unwrapInjectedRef),m)for(const D in m){const X=m[D];Wn(X)&&(l[D]=X.bind(r))}if(c){const D=c.call(r,r);hs(D)&&(e.data=F1(D))}if(dw=!0,d)for(const D in d){const X=d[D],te=Wn(X)?X.bind(r,r):Wn(X.get)?X.get.bind(r,r):Ka,q=!Wn(X)&&Wn(X.set)?X.set.bind(r):Ka,ce=Mm({get:te,set:q});Object.defineProperty(l,D,{enumerable:!0,configurable:!0,get:()=>ce.value,set:fe=>ce.value=fe})}if(n)for(const D in n)KE(n[D],l,r,D);if(T){const D=Wn(T)?T.call(r):T;Reflect.ownKeys(D).forEach(X=>{Cm(X,D[X])})}Q&&yS(Q,e,"c");function b(D,X){an(X)?X.forEach(te=>D(te.bind(r))):X&&D(X.bind(r))}if(b(v3,z),b(td,W),b(ix,K),b(jf,I),b(_3,O),b(y3,$),b(T3,J),b(w3,C),b(b3,ie),b(Uf,S),b(Gf,G),b(x3,N),an(F))if(F.length){const D=e.exposed||(e.exposed={});F.forEach(X=>{Object.defineProperty(D,X,{get:()=>r[X],set:te=>r[X]=te})})}else e.exposed||(e.exposed={});U&&e.render===Ka&&(e.render=U),H!=null&&(e.inheritAttrs=H),E&&(e.components=E),L&&(e.directives=L)}function Sk(e,t,r=Ka,l=!1){an(e)&&(e=uw(e));for(const c in e){const d=e[c];let m;hs(d)?"default"in d?m=Cf(d.from||c,d.default,!0):m=Cf(d.from||c):m=Cf(d),Bo(m)&&l?Object.defineProperty(t,c,{enumerable:!0,configurable:!0,get:()=>m.value,set:n=>m.value=n}):t[c]=m}}function yS(e,t,r){Tl(an(e)?e.map(l=>l.bind(t.proxy)):e.bind(t.proxy),t,r)}function KE(e,t,r,l){const c=l.includes(".")?UE(r,l):()=>r[l];if(ir(e)){const d=t[e];Wn(d)&&Uc(c,d)}else if(Wn(e))Uc(c,e.bind(r));else if(hs(e))if(an(e))e.forEach(d=>KE(d,t,r,l));else{const d=Wn(e.handler)?e.handler.bind(r):t[e.handler];Wn(d)&&Uc(c,d,e)}}function C3(e){const t=e.type,{mixins:r,extends:l}=t,{mixins:c,optionsCache:d,config:{optionMergeStrategies:m}}=e.appContext,n=d.get(t);let T;return n?T=n:!c.length&&!r&&!l?T=t:(T={},c.length&&c.forEach(V=>sv(T,V,m,!0)),sv(T,t,m)),hs(t)&&d.set(t,T),T}function sv(e,t,r,l=!1){const{mixins:c,extends:d}=t;d&&sv(e,d,r,!0),c&&c.forEach(m=>sv(e,m,r,!0));for(const m in t)if(!(l&&m==="expose")){const n=Ek[m]||r&&r[m];e[m]=n?n(e[m],t[m]):t[m]}return e}const Ek={data:vS,props:mf,emits:mf,methods:mf,computed:mf,beforeCreate:Za,created:Za,beforeMount:Za,mounted:Za,beforeUpdate:Za,updated:Za,beforeDestroy:Za,beforeUnmount:Za,destroyed:Za,unmounted:Za,activated:Za,deactivated:Za,errorCaptured:Za,serverPrefetch:Za,components:mf,directives:mf,watch:Mk,provide:vS,inject:Ck};function vS(e,t){return t?e?function(){return Jr(Wn(e)?e.call(this,this):e,Wn(t)?t.call(this,this):t)}:t:e}function Ck(e,t){return mf(uw(e),uw(t))}function uw(e){if(an(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Za(e,t){return e?[...new Set([].concat(e,t))]:t}function mf(e,t){return e?Jr(Jr(Object.create(null),e),t):t}function Mk(e,t){if(!e)return t;if(!t)return e;const r=Jr(Object.create(null),e);for(const l in t)r[l]=Za(e[l],t[l]);return r}function Ak(e,t,r,l=!1){const c={},d={};nv(d,rx,1),e.propsDefaults=Object.create(null),JE(e,t,c,d);for(const m in e.propsOptions[0])m in c||(c[m]=void 0);r?e.props=l?c:l3(c):e.type.props?e.props=c:e.props=d,e.attrs=d}function kk(e,t,r,l){const{props:c,attrs:d,vnode:{patchFlag:m}}=e,n=Rr(c),[T]=e.propsOptions;let V=!1;if((l||m>0)&&!(m&16)){if(m&8){const Q=e.vnode.dynamicProps;for(let z=0;z<Q.length;z++){let W=Q[z];if(Zv(e.emitsOptions,W))continue;const K=t[W];if(T)if($r(d,W))K!==d[W]&&(d[W]=K,V=!0);else{const I=ea(W);c[I]=pw(T,n,I,K,e,!1)}else K!==d[W]&&(d[W]=K,V=!0)}}}else{JE(e,t,c,d)&&(V=!0);let Q;for(const z in n)(!t||!$r(t,z)&&((Q=oc(z))===z||!$r(t,Q)))&&(T?r&&(r[z]!==void 0||r[Q]!==void 0)&&(c[z]=pw(T,n,z,void 0,e,!0)):delete c[z]);if(d!==n)for(const z in d)(!t||!$r(t,z))&&(delete d[z],V=!0)}V&&Zd(e,"set","$attrs")}function JE(e,t,r,l){const[c,d]=e.propsOptions;let m=!1,n;if(t)for(let T in t){if(Tf(T))continue;const V=t[T];let Q;c&&$r(c,Q=ea(T))?!d||!d.includes(Q)?r[Q]=V:(n||(n={}))[Q]=V:Zv(e.emitsOptions,T)||(!(T in l)||V!==l[T])&&(l[T]=V,m=!0)}if(d){const T=Rr(r),V=n||os;for(let Q=0;Q<d.length;Q++){const z=d[Q];r[z]=pw(c,T,z,V[z],e,!$r(V,z))}}return m}function pw(e,t,r,l,c,d){const m=e[r];if(m!=null){const n=$r(m,"default");if(n&&l===void 0){const T=m.default;if(m.type!==Function&&Wn(T)){const{propsDefaults:V}=c;r in V?l=V[r]:(cp(c),l=V[r]=T.call(null,t),tp())}else l=T}m[0]&&(d&&!n?l=!1:m[1]&&(l===""||l===oc(r))&&(l=!0))}return l}function QE(e,t,r=!1){const l=t.propsCache,c=l.get(e);if(c)return c;const d=e.props,m={},n=[];let T=!1;if(!Wn(e)){const Q=z=>{T=!0;const[W,K]=QE(z,t,!0);Jr(m,W),K&&n.push(...K)};!r&&t.mixins.length&&t.mixins.forEach(Q),e.extends&&Q(e.extends),e.mixins&&e.mixins.forEach(Q)}if(!d&&!T)return hs(e)&&l.set(e,Q0),Q0;if(an(d))for(let Q=0;Q<d.length;Q++){const z=ea(d[Q]);xS(z)&&(m[z]=os)}else if(d)for(const Q in d){const z=ea(Q);if(xS(z)){const W=d[Q],K=m[z]=an(W)||Wn(W)?{type:W}:Object.assign({},W);if(K){const I=TS(Boolean,K.type),O=TS(String,K.type);K[0]=I>-1,K[1]=O<0||I<O,(I>-1||$r(K,"default"))&&n.push(z)}}}const V=[m,n];return hs(e)&&l.set(e,V),V}function xS(e){return e[0]!=="$"}function bS(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function wS(e,t){return bS(e)===bS(t)}function TS(e,t){return an(t)?t.findIndex(r=>wS(r,e)):Wn(t)&&wS(t,e)?0:-1}const eC=e=>e[0]==="_"||e==="$stable",M3=e=>an(e)?e.map(rc):[rc(e)],Pk=(e,t,r)=>{if(t._n)return t;const l=js((...c)=>M3(t(...c)),r);return l._c=!1,l},tC=(e,t,r)=>{const l=e._ctx;for(const c in e){if(eC(c))continue;const d=e[c];if(Wn(d))t[c]=Pk(c,d,l);else if(d!=null){const m=M3(d);t[c]=()=>m}}},iC=(e,t)=>{const r=M3(t);e.slots.default=()=>r},Dk=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Rr(t),nv(t,"_",r)):tC(t,e.slots={})}else e.slots={},t&&iC(e,t);nv(e.slots,rx,1)},Ik=(e,t,r)=>{const{vnode:l,slots:c}=e;let d=!0,m=os;if(l.shapeFlag&32){const n=t._;n?r&&n===1?d=!1:(Jr(c,t),!r&&n===1&&delete c._):(d=!t.$stable,tC(t,c)),m=t}else t&&(iC(e,t),m={default:1});if(d)for(const n in c)!eC(n)&&!(n in m)&&delete c[n]};function nC(){return{app:null,config:{isNativeTag:Vy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Lk=0;function Ok(e,t){return function(l,c=null){Wn(l)||(l=Object.assign({},l)),c!=null&&!hs(c)&&(c=null);const d=nC(),m=new Set;let n=!1;const T=d.app={_uid:Lk++,_component:l,_props:c,_container:null,_context:d,_instance:null,version:z3,get config(){return d.config},set config(V){},use(V,...Q){return m.has(V)||(V&&Wn(V.install)?(m.add(V),V.install(T,...Q)):Wn(V)&&(m.add(V),V(T,...Q))),T},mixin(V){return d.mixins.includes(V)||d.mixins.push(V),T},component(V,Q){return Q?(d.components[V]=Q,T):d.components[V]},directive(V,Q){return Q?(d.directives[V]=Q,T):d.directives[V]},mount(V,Q,z){if(!n){const W=Ji(l,c);return W.appContext=d,Q&&t?t(W,V):e(W,V,z),n=!0,T._container=V,V.__vue_app__=T,ox(W.component)||W.component.proxy}},unmount(){n&&(e(null,T._container),delete T._container.__vue_app__)},provide(V,Q){return d.provides[V]=Q,T}};return T}}function ov(e,t,r,l,c=!1){if(an(e)){e.forEach((W,K)=>ov(W,t&&(an(t)?t[K]:t),r,l,c));return}if(Mf(l)&&!c)return;const d=l.shapeFlag&4?ox(l.component)||l.component.proxy:l.el,m=c?null:d,{i:n,r:T}=e,V=t&&t.r,Q=n.refs===os?n.refs={}:n.refs,z=n.setupState;if(V!=null&&V!==T&&(ir(V)?(Q[V]=null,$r(z,V)&&(z[V]=null)):Bo(V)&&(V.value=null)),Wn(T))Qh(T,n,12,[m,Q]);else{const W=ir(T),K=Bo(T);if(W||K){const I=()=>{if(e.f){const O=W?$r(z,T)?z[T]:Q[T]:T.value;c?an(O)&&n3(O,d):an(O)?O.includes(d)||O.push(d):W?(Q[T]=[d],$r(z,T)&&(z[T]=Q[T])):(T.value=[d],e.k&&(Q[e.k]=T.value))}else W?(Q[T]=m,$r(z,T)&&(z[T]=m)):K&&(T.value=m,e.k&&(Q[e.k]=m))};m?(I.id=-1,da(I,r)):I()}}}let Vu=!1;const My=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",Ay=e=>e.nodeType===8;function Rk(e){const{mt:t,p:r,o:{patchProp:l,createText:c,nextSibling:d,parentNode:m,remove:n,insert:T,createComment:V}}=e,Q=(M,S)=>{if(!S.hasChildNodes()){r(null,M,S),rv(),S._vnode=M;return}Vu=!1,z(S.firstChild,M,null,null,null),rv(),S._vnode=M,Vu&&console.error("Hydration completed but contains mismatches.")},z=(M,S,k,G,U,C=!1)=>{const ie=Ay(M)&&M.data==="[",J=()=>O(M,S,k,G,U,ie),{type:N,ref:F,shapeFlag:H,patchFlag:E}=S;let L=M.nodeType;S.el=M,E===-2&&(C=!1,S.dynamicChildren=null);let f=null;switch(N){case lp:L!==3?S.children===""?(T(S.el=c(""),m(M),M),f=M):f=J():(M.data!==S.children&&(Vu=!0,M.data=S.children),f=d(M));break;case fa:L!==8||ie?f=J():f=d(M);break;case ep:if(ie&&(M=d(M),L=M.nodeType),L===1||L===3){f=M;const y=!S.children.length;for(let b=0;b<S.staticCount;b++)y&&(S.children+=f.nodeType===1?f.outerHTML:f.data),b===S.staticCount-1&&(S.anchor=f),f=d(f);return ie?d(f):f}else J();break;case Pr:ie?f=I(M,S,k,G,U,C):f=J();break;default:if(H&1)L!==1||S.type.toLowerCase()!==M.tagName.toLowerCase()?f=J():f=W(M,S,k,G,U,C);else if(H&6){S.slotScopeIds=U;const y=m(M);if(t(S,y,null,k,G,My(y),C),f=ie?$(M):d(M),f&&Ay(f)&&f.data==="teleport end"&&(f=d(f)),Mf(S)){let b;ie?(b=Ji(Pr),b.anchor=f?f.previousSibling:y.lastChild):b=M.nodeType===3?gh(""):Ji("div"),b.el=M,S.component.subTree=b}}else H&64?L!==8?f=J():f=S.type.hydrate(M,S,k,G,U,C,e,K):H&128&&(f=S.type.hydrate(M,S,k,G,My(m(M)),U,C,e,z))}return F!=null&&ov(F,null,G,S),f},W=(M,S,k,G,U,C)=>{C=C||!!S.dynamicChildren;const{type:ie,props:J,patchFlag:N,shapeFlag:F,dirs:H}=S,E=ie==="input"&&H||ie==="option";if(E||N!==-1){if(H&&Yh(S,null,k,"created"),J)if(E||!C||N&48)for(const f in J)(E&&f.endsWith("value")||Bf(f)&&!Tf(f))&&l(M,f,null,J[f],!1,void 0,k);else J.onClick&&l(M,"onClick",null,J.onClick,!1,void 0,k);let L;if((L=J&&J.onVnodeBeforeMount)&&vl(L,k,S),H&&Yh(S,null,k,"beforeMount"),((L=J&&J.onVnodeMounted)||H)&&NE(()=>{L&&vl(L,k,S),H&&Yh(S,null,k,"mounted")},G),F&16&&!(J&&(J.innerHTML||J.textContent))){let f=K(M.firstChild,S,M,k,G,U,C);for(;f;){Vu=!0;const y=f;f=f.nextSibling,n(y)}}else F&8&&M.textContent!==S.children&&(Vu=!0,M.textContent=S.children)}return M.nextSibling},K=(M,S,k,G,U,C,ie)=>{ie=ie||!!S.dynamicChildren;const J=S.children,N=J.length;for(let F=0;F<N;F++){const H=ie?J[F]:J[F]=rc(J[F]);if(M)M=z(M,H,G,U,C,ie);else{if(H.type===lp&&!H.children)continue;Vu=!0,r(null,H,k,null,G,U,My(k),C)}}return M},I=(M,S,k,G,U,C)=>{const{slotScopeIds:ie}=S;ie&&(U=U?U.concat(ie):ie);const J=m(M),N=K(d(M),S,J,k,G,U,C);return N&&Ay(N)&&N.data==="]"?d(S.anchor=N):(Vu=!0,T(S.anchor=V("]"),J,N),N)},O=(M,S,k,G,U,C)=>{if(Vu=!0,S.el=null,C){const N=$(M);for(;;){const F=d(M);if(F&&F!==N)n(F);else break}}const ie=d(M),J=m(M);return n(M),r(null,S,J,ie,k,G,My(J),U),ie},$=M=>{let S=0;for(;M;)if(M=d(M),M&&Ay(M)&&(M.data==="["&&S++,M.data==="]")){if(S===0)return d(M);S--}return M};return[Q,z]}const da=NE;function A3(e){return rC(e)}function k3(e){return rC(e,Rk)}function rC(e,t){const r=S6();r.__VUE__=!0;const{insert:l,remove:c,patchProp:d,createElement:m,createText:n,createComment:T,setText:V,setElementText:Q,parentNode:z,nextSibling:W,setScopeId:K=Ka,insertStaticContent:I}=e,O=(le,me,be,Le=null,De=null,Ne=null,st=!1,it=null,ht=!!me.dynamicChildren)=>{if(le===me)return;le&&!qh(le,me)&&(Le=ye(le),fe(le,De,Ne,!0),le=null),me.patchFlag===-2&&(ht=!1,me.dynamicChildren=null);const{type:ke,ref:Be,shapeFlag:Ue}=me;switch(ke){case lp:$(le,me,be,Le);break;case fa:M(le,me,be,Le);break;case ep:le==null&&S(me,be,Le,st);break;case Pr:E(le,me,be,Le,De,Ne,st,it,ht);break;default:Ue&1?U(le,me,be,Le,De,Ne,st,it,ht):Ue&6?L(le,me,be,Le,De,Ne,st,it,ht):(Ue&64||Ue&128)&&ke.process(le,me,be,Le,De,Ne,st,it,ht,ae)}Be!=null&&De&&ov(Be,le&&le.ref,Ne,me||le,!me)},$=(le,me,be,Le)=>{if(le==null)l(me.el=n(me.children),be,Le);else{const De=me.el=le.el;me.children!==le.children&&V(De,me.children)}},M=(le,me,be,Le)=>{le==null?l(me.el=T(me.children||""),be,Le):me.el=le.el},S=(le,me,be,Le)=>{[le.el,le.anchor]=I(le.children,me,be,Le,le.el,le.anchor)},k=({el:le,anchor:me},be,Le)=>{let De;for(;le&&le!==me;)De=W(le),l(le,be,Le),le=De;l(me,be,Le)},G=({el:le,anchor:me})=>{let be;for(;le&&le!==me;)be=W(le),c(le),le=be;c(me)},U=(le,me,be,Le,De,Ne,st,it,ht)=>{st=st||me.type==="svg",le==null?C(me,be,Le,De,Ne,st,it,ht):N(le,me,De,Ne,st,it,ht)},C=(le,me,be,Le,De,Ne,st,it)=>{let ht,ke;const{type:Be,props:Ue,shapeFlag:We,transition:nt,dirs:wt}=le;if(ht=le.el=m(le.type,Ne,Ue&&Ue.is,Ue),We&8?Q(ht,le.children):We&16&&J(le.children,ht,null,Le,De,Ne&&Be!=="foreignObject",st,it),wt&&Yh(le,null,Le,"created"),Ue){for(const Vt in Ue)Vt!=="value"&&!Tf(Vt)&&d(ht,Vt,null,Ue[Vt],Ne,le.children,Le,De,ue);"value"in Ue&&d(ht,"value",null,Ue.value),(ke=Ue.onVnodeBeforeMount)&&vl(ke,Le,le)}ie(ht,le,le.scopeId,st,Le),wt&&Yh(le,null,Le,"beforeMount");const Ut=(!De||De&&!De.pendingBranch)&&nt&&!nt.persisted;Ut&&nt.beforeEnter(ht),l(ht,me,be),((ke=Ue&&Ue.onVnodeMounted)||Ut||wt)&&da(()=>{ke&&vl(ke,Le,le),Ut&&nt.enter(ht),wt&&Yh(le,null,Le,"mounted")},De)},ie=(le,me,be,Le,De)=>{if(be&&K(le,be),Le)for(let Ne=0;Ne<Le.length;Ne++)K(le,Le[Ne]);if(De){let Ne=De.subTree;if(me===Ne){const st=De.vnode;ie(le,st,st.scopeId,st.slotScopeIds,De.parent)}}},J=(le,me,be,Le,De,Ne,st,it,ht=0)=>{for(let ke=ht;ke<le.length;ke++){const Be=le[ke]=it?Yu(le[ke]):rc(le[ke]);O(null,Be,me,be,Le,De,Ne,st,it)}},N=(le,me,be,Le,De,Ne,st)=>{const it=me.el=le.el;let{patchFlag:ht,dynamicChildren:ke,dirs:Be}=me;ht|=le.patchFlag&16;const Ue=le.props||os,We=me.props||os;let nt;be&&df(be,!1),(nt=We.onVnodeBeforeUpdate)&&vl(nt,be,me,le),Be&&Yh(me,le,be,"beforeUpdate"),be&&df(be,!0);const wt=De&&me.type!=="foreignObject";if(ke?F(le.dynamicChildren,ke,it,be,Le,wt,Ne):st||X(le,me,it,null,be,Le,wt,Ne,!1),ht>0){if(ht&16)H(it,me,Ue,We,be,Le,De);else if(ht&2&&Ue.class!==We.class&&d(it,"class",null,We.class,De),ht&4&&d(it,"style",Ue.style,We.style,De),ht&8){const Ut=me.dynamicProps;for(let Vt=0;Vt<Ut.length;Vt++){const yi=Ut[Vt],ri=Ue[yi],Mi=We[yi];(Mi!==ri||yi==="value")&&d(it,yi,ri,Mi,De,le.children,be,Le,ue)}}ht&1&&le.children!==me.children&&Q(it,me.children)}else!st&&ke==null&&H(it,me,Ue,We,be,Le,De);((nt=We.onVnodeUpdated)||Be)&&da(()=>{nt&&vl(nt,be,me,le),Be&&Yh(me,le,be,"updated")},Le)},F=(le,me,be,Le,De,Ne,st)=>{for(let it=0;it<me.length;it++){const ht=le[it],ke=me[it],Be=ht.el&&(ht.type===Pr||!qh(ht,ke)||ht.shapeFlag&70)?z(ht.el):be;O(ht,ke,Be,null,Le,De,Ne,st,!0)}},H=(le,me,be,Le,De,Ne,st)=>{if(be!==Le){if(be!==os)for(const it in be)!Tf(it)&&!(it in Le)&&d(le,it,be[it],null,st,me.children,De,Ne,ue);for(const it in Le){if(Tf(it))continue;const ht=Le[it],ke=be[it];ht!==ke&&it!=="value"&&d(le,it,ke,ht,st,me.children,De,Ne,ue)}"value"in Le&&d(le,"value",be.value,Le.value)}},E=(le,me,be,Le,De,Ne,st,it,ht)=>{const ke=me.el=le?le.el:n(""),Be=me.anchor=le?le.anchor:n("");let{patchFlag:Ue,dynamicChildren:We,slotScopeIds:nt}=me;nt&&(it=it?it.concat(nt):nt),le==null?(l(ke,be,Le),l(Be,be,Le),J(me.children,be,Be,De,Ne,st,it,ht)):Ue>0&&Ue&64&&We&&le.dynamicChildren?(F(le.dynamicChildren,We,be,De,Ne,st,it),(me.key!=null||De&&me===De.subTree)&&P3(le,me,!0)):X(le,me,be,Be,De,Ne,st,it,ht)},L=(le,me,be,Le,De,Ne,st,it,ht)=>{me.slotScopeIds=it,le==null?me.shapeFlag&512?De.ctx.activate(me,be,Le,st,ht):f(me,be,Le,De,Ne,st,ht):y(le,me,ht)},f=(le,me,be,Le,De,Ne,st)=>{const it=le.component=dC(le,Le,De);if(G1(le)&&(it.ctx.renderer=ae),pC(it),it.asyncDep){if(De&&De.registerDep(it,b),!le.el){const ht=it.subTree=Ji(fa);M(null,ht,me,be)}return}b(it,le,me,be,De,Ne,st)},y=(le,me,be)=>{const Le=me.component=le.component;if(dk(le,me,be))if(Le.asyncDep&&!Le.asyncResolved){D(Le,me,be);return}else Le.next=me,sk(Le.update),Le.update();else me.el=le.el,Le.vnode=me},b=(le,me,be,Le,De,Ne,st)=>{const it=()=>{if(le.isMounted){let{next:Be,bu:Ue,u:We,parent:nt,vnode:wt}=le,Ut=Be,Vt;df(le,!1),Be?(Be.el=wt.el,D(le,Be,st)):Be=wt,Ue&&tm(Ue),(Vt=Be.props&&Be.props.onVnodeBeforeUpdate)&&vl(Vt,nt,Be,wt),df(le,!0);const yi=$y(le),ri=le.subTree;le.subTree=yi,O(ri,yi,z(ri.el),ye(ri),le,De,Ne),Be.el=yi.el,Ut===null&&f3(le,yi.el),We&&da(We,De),(Vt=Be.props&&Be.props.onVnodeUpdated)&&da(()=>vl(Vt,nt,Be,wt),De)}else{let Be;const{el:Ue,props:We}=me,{bm:nt,m:wt,parent:Ut}=le,Vt=Mf(me);if(df(le,!1),nt&&tm(nt),!Vt&&(Be=We&&We.onVnodeBeforeMount)&&vl(Be,Ut,me),df(le,!0),Ue&&ve){const yi=()=>{le.subTree=$y(le),ve(Ue,le.subTree,le,De,null)};Vt?me.type.__asyncLoader().then(()=>!le.isUnmounted&&yi()):yi()}else{const yi=le.subTree=$y(le);O(null,yi,be,Le,le,De,Ne),me.el=yi.el}if(wt&&da(wt,De),!Vt&&(Be=We&&We.onVnodeMounted)){const yi=me;da(()=>vl(Be,Ut,yi),De)}(me.shapeFlag&256||Ut&&Mf(Ut.vnode)&&Ut.vnode.shapeFlag&256)&&le.a&&da(le.a,De),le.isMounted=!0,me=be=Le=null}},ht=le.effect=new wm(it,()=>Xv(ke),le.scope),ke=le.update=()=>ht.run();ke.id=le.uid,df(le,!0),ke()},D=(le,me,be)=>{me.component=le;const Le=le.vnode.props;le.vnode=me,le.next=null,kk(le,me.props,Le,be),Ik(le,me.children,be),Tm(),pS(),Sm()},X=(le,me,be,Le,De,Ne,st,it,ht=!1)=>{const ke=le&&le.children,Be=le?le.shapeFlag:0,Ue=me.children,{patchFlag:We,shapeFlag:nt}=me;if(We>0){if(We&128){q(ke,Ue,be,Le,De,Ne,st,it,ht);return}else if(We&256){te(ke,Ue,be,Le,De,Ne,st,it,ht);return}}nt&8?(Be&16&&ue(ke,De,Ne),Ue!==ke&&Q(be,Ue)):Be&16?nt&16?q(ke,Ue,be,Le,De,Ne,st,it,ht):ue(ke,De,Ne,!0):(Be&8&&Q(be,""),nt&16&&J(Ue,be,Le,De,Ne,st,it,ht))},te=(le,me,be,Le,De,Ne,st,it,ht)=>{le=le||Q0,me=me||Q0;const ke=le.length,Be=me.length,Ue=Math.min(ke,Be);let We;for(We=0;We<Ue;We++){const nt=me[We]=ht?Yu(me[We]):rc(me[We]);O(le[We],nt,be,null,De,Ne,st,it,ht)}ke>Be?ue(le,De,Ne,!0,!1,Ue):J(me,be,Le,De,Ne,st,it,ht,Ue)},q=(le,me,be,Le,De,Ne,st,it,ht)=>{let ke=0;const Be=me.length;let Ue=le.length-1,We=Be-1;for(;ke<=Ue&&ke<=We;){const nt=le[ke],wt=me[ke]=ht?Yu(me[ke]):rc(me[ke]);if(qh(nt,wt))O(nt,wt,be,null,De,Ne,st,it,ht);else break;ke++}for(;ke<=Ue&&ke<=We;){const nt=le[Ue],wt=me[We]=ht?Yu(me[We]):rc(me[We]);if(qh(nt,wt))O(nt,wt,be,null,De,Ne,st,it,ht);else break;Ue--,We--}if(ke>Ue){if(ke<=We){const nt=We+1,wt=nt<Be?me[nt].el:Le;for(;ke<=We;)O(null,me[ke]=ht?Yu(me[ke]):rc(me[ke]),be,wt,De,Ne,st,it,ht),ke++}}else if(ke>We)for(;ke<=Ue;)fe(le[ke],De,Ne,!0),ke++;else{const nt=ke,wt=ke,Ut=new Map;for(ke=wt;ke<=We;ke++){const Oi=me[ke]=ht?Yu(me[ke]):rc(me[ke]);Oi.key!=null&&Ut.set(Oi.key,ke)}let Vt,yi=0;const ri=We-wt+1;let Mi=!1,$i=0;const zi=new Array(ri);for(ke=0;ke<ri;ke++)zi[ke]=0;for(ke=nt;ke<=Ue;ke++){const Oi=le[ke];if(yi>=ri){fe(Oi,De,Ne,!0);continue}let _n;if(Oi.key!=null)_n=Ut.get(Oi.key);else for(Vt=wt;Vt<=We;Vt++)if(zi[Vt-wt]===0&&qh(Oi,me[Vt])){_n=Vt;break}_n===void 0?fe(Oi,De,Ne,!0):(zi[_n-wt]=ke+1,_n>=$i?$i=_n:Mi=!0,O(Oi,me[_n],be,null,De,Ne,st,it,ht),yi++)}const qi=Mi?Bk(zi):Q0;for(Vt=qi.length-1,ke=ri-1;ke>=0;ke--){const Oi=wt+ke,_n=me[Oi],wn=Oi+1<Be?me[Oi+1].el:Le;zi[ke]===0?O(null,_n,be,wn,De,Ne,st,it,ht):Mi&&(Vt<0||ke!==qi[Vt]?ce(_n,be,wn,2):Vt--)}}},ce=(le,me,be,Le,De=null)=>{const{el:Ne,type:st,transition:it,children:ht,shapeFlag:ke}=le;if(ke&6){ce(le.component.subTree,me,be,Le);return}if(ke&128){le.suspense.move(me,be,Le);return}if(ke&64){st.move(le,me,be,ae);return}if(st===Pr){l(Ne,me,be);for(let Ue=0;Ue<ht.length;Ue++)ce(ht[Ue],me,be,Le);l(le.anchor,me,be);return}if(st===ep){k(le,me,be);return}if(Le!==2&&ke&1&&it)if(Le===0)it.beforeEnter(Ne),l(Ne,me,be),da(()=>it.enter(Ne),De);else{const{leave:Ue,delayLeave:We,afterLeave:nt}=it,wt=()=>l(Ne,me,be),Ut=()=>{Ue(Ne,()=>{wt(),nt&&nt()})};We?We(Ne,wt,Ut):Ut()}else l(Ne,me,be)},fe=(le,me,be,Le=!1,De=!1)=>{const{type:Ne,props:st,ref:it,children:ht,dynamicChildren:ke,shapeFlag:Be,patchFlag:Ue,dirs:We}=le;if(it!=null&&ov(it,null,be,le,!0),Be&256){me.ctx.deactivate(le);return}const nt=Be&1&&We,wt=!Mf(le);let Ut;if(wt&&(Ut=st&&st.onVnodeBeforeUnmount)&&vl(Ut,me,le),Be&6)se(le.component,be,Le);else{if(Be&128){le.suspense.unmount(be,Le);return}nt&&Yh(le,null,me,"beforeUnmount"),Be&64?le.type.remove(le,me,be,De,ae,Le):ke&&(Ne!==Pr||Ue>0&&Ue&64)?ue(ke,me,be,!1,!0):(Ne===Pr&&Ue&384||!De&&Be&16)&&ue(ht,me,be),Le&&we(le)}(wt&&(Ut=st&&st.onVnodeUnmounted)||nt)&&da(()=>{Ut&&vl(Ut,me,le),nt&&Yh(le,null,me,"unmounted")},be)},we=le=>{const{type:me,el:be,anchor:Le,transition:De}=le;if(me===Pr){Z(be,Le);return}if(me===ep){G(le);return}const Ne=()=>{c(be),De&&!De.persisted&&De.afterLeave&&De.afterLeave()};if(le.shapeFlag&1&&De&&!De.persisted){const{leave:st,delayLeave:it}=De,ht=()=>st(be,Ne);it?it(le.el,Ne,ht):ht()}else Ne()},Z=(le,me)=>{let be;for(;le!==me;)be=W(le),c(le),le=be;c(me)},se=(le,me,be)=>{const{bum:Le,scope:De,update:Ne,subTree:st,um:it}=le;Le&&tm(Le),De.stop(),Ne&&(Ne.active=!1,fe(st,le,me,be)),it&&da(it,me),da(()=>{le.isUnmounted=!0},me),me&&me.pendingBranch&&!me.isUnmounted&&le.asyncDep&&!le.asyncResolved&&le.suspenseId===me.pendingId&&(me.deps--,me.deps===0&&me.resolve())},ue=(le,me,be,Le=!1,De=!1,Ne=0)=>{for(let st=Ne;st<le.length;st++)fe(le[st],me,be,Le,De)},ye=le=>le.shapeFlag&6?ye(le.component.subTree):le.shapeFlag&128?le.suspense.next():W(le.anchor||le.el),Pe=(le,me,be)=>{le==null?me._vnode&&fe(me._vnode,null,null,!0):O(me._vnode||null,le,me,null,null,null,be),pS(),rv(),me._vnode=le},ae={p:O,um:fe,m:ce,r:we,mt:f,mc:J,pc:X,pbc:F,n:ye,o:e};let xe,ve;return t&&([xe,ve]=t(ae)),{render:Pe,hydrate:xe,createApp:Ok(Pe,xe)}}function df({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function P3(e,t,r=!1){const l=e.children,c=t.children;if(an(l)&&an(c))for(let d=0;d<l.length;d++){const m=l[d];let n=c[d];n.shapeFlag&1&&!n.dynamicChildren&&((n.patchFlag<=0||n.patchFlag===32)&&(n=c[d]=Yu(c[d]),n.el=m.el),r||P3(m,n)),n.type===lp&&(n.el=m.el)}}function Bk(e){const t=e.slice(),r=[0];let l,c,d,m,n;const T=e.length;for(l=0;l<T;l++){const V=e[l];if(V!==0){if(c=r[r.length-1],e[c]<V){t[l]=c,r.push(l);continue}for(d=0,m=r.length-1;d<m;)n=d+m>>1,e[r[n]]<V?d=n+1:m=n;V<e[r[d]]&&(d>0&&(t[l]=r[d-1]),r[d]=l)}}for(d=r.length,m=r[d-1];d-- >0;)r[d]=m,m=t[m];return r}const zk=e=>e.__isTeleport,p1=e=>e&&(e.disabled||e.disabled===""),SS=e=>typeof SVGElement<"u"&&e instanceof SVGElement,fw=(e,t)=>{const r=e&&e.to;return ir(r)?t?t(r):null:r},Nk={__isTeleport:!0,process(e,t,r,l,c,d,m,n,T,V){const{mc:Q,pc:z,pbc:W,o:{insert:K,querySelector:I,createText:O,createComment:$}}=V,M=p1(t.props);let{shapeFlag:S,children:k,dynamicChildren:G}=t;if(e==null){const U=t.el=O(""),C=t.anchor=O("");K(U,r,l),K(C,r,l);const ie=t.target=fw(t.props,I),J=t.targetAnchor=O("");ie&&(K(J,ie),m=m||SS(ie));const N=(F,H)=>{S&16&&Q(k,F,H,c,d,m,n,T)};M?N(r,C):ie&&N(ie,J)}else{t.el=e.el;const U=t.anchor=e.anchor,C=t.target=e.target,ie=t.targetAnchor=e.targetAnchor,J=p1(e.props),N=J?r:C,F=J?U:ie;if(m=m||SS(C),G?(W(e.dynamicChildren,G,N,c,d,m,n),P3(e,t,!0)):T||z(e,t,N,F,c,d,m,n,!1),M)J||ky(t,r,U,V,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const H=t.target=fw(t.props,I);H&&ky(t,H,null,V,0)}else J&&ky(t,C,ie,V,1)}oC(t)},remove(e,t,r,l,{um:c,o:{remove:d}},m){const{shapeFlag:n,children:T,anchor:V,targetAnchor:Q,target:z,props:W}=e;if(z&&d(Q),(m||!p1(W))&&(d(V),n&16))for(let K=0;K<T.length;K++){const I=T[K];c(I,t,r,!0,!!I.dynamicChildren)}},move:ky,hydrate:Fk};function ky(e,t,r,{o:{insert:l},m:c},d=2){d===0&&l(e.targetAnchor,t,r);const{el:m,anchor:n,shapeFlag:T,children:V,props:Q}=e,z=d===2;if(z&&l(m,t,r),(!z||p1(Q))&&T&16)for(let W=0;W<V.length;W++)c(V[W],t,r,2);z&&l(n,t,r)}function Fk(e,t,r,l,c,d,{o:{nextSibling:m,parentNode:n,querySelector:T}},V){const Q=t.target=fw(t.props,T);if(Q){const z=Q._lpa||Q.firstChild;if(t.shapeFlag&16)if(p1(t.props))t.anchor=V(m(e),t,n(e),r,l,c,d),t.targetAnchor=z;else{t.anchor=m(e);let W=z;for(;W;)if(W=m(W),W&&W.nodeType===8&&W.data==="teleport anchor"){t.targetAnchor=W,Q._lpa=t.targetAnchor&&m(t.targetAnchor);break}V(z,t,Q,r,l,c,d)}oC(t)}return t.anchor&&m(t.anchor)}const sC=Nk;function oC(e){const t=e.ctx;if(t&&t.ut){let r=e.children[0].el;for(;r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}const Pr=Symbol(void 0),lp=Symbol(void 0),fa=Symbol(void 0),ep=Symbol(void 0),f1=[];let bl=null;function ki(e=!1){f1.push(bl=e?null:[])}function aC(){f1.pop(),bl=f1[f1.length-1]||null}let If=1;function av(e){If+=e}function lC(e){return e.dynamicChildren=If>0?bl||Q0:null,aC(),If>0&&bl&&bl.push(e),e}function Fi(e,t,r,l,c,d){return lC(mt(e,t,r,l,c,d,!0))}function fh(e,t,r,l,c){return lC(Ji(e,t,r,l,c,!0))}function Kd(e){return e?e.__v_isVNode===!0:!1}function qh(e,t){return e.type===t.type&&e.key===t.key}function cC(e){}const rx="__vInternal",hC=({key:e})=>e??null,Hy=({ref:e,ref_key:t,ref_for:r})=>e!=null?ir(e)||Bo(e)||Wn(e)?{i:ua,r:e,k:t,f:!!r}:e:null;function mt(e,t=null,r=null,l=0,c=null,d=e===Pr?0:1,m=!1,n=!1){const T={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&hC(t),ref:t&&Hy(t),scopeId:Kv,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:l,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:ua};return n?(D3(T,r),d&128&&e.normalize(T)):r&&(T.shapeFlag|=ir(r)?8:16),If>0&&!m&&bl&&(T.patchFlag>0||d&6)&&T.patchFlag!==32&&bl.push(T),T}const Ji=jk;function jk(e,t=null,r=null,l=0,c=null,d=!1){if((!e||e===WE)&&(e=fa),Kd(e)){const n=mh(e,t,!0);return r&&D3(n,r),If>0&&!d&&bl&&(n.shapeFlag&6?bl[bl.indexOf(e)]=n:bl.push(n)),n.patchFlag|=-2,n}if(Hk(e)&&(e=e.__vccOpts),t){t=C1(t);let{class:n,style:T}=t;n&&!ir(n)&&(t.class=Us(n)),hs(T)&&($v(T)&&!an(T)&&(T=Jr({},T)),t.style=Rf(T))}const m=ir(e)?1:BE(e)?128:zk(e)?64:hs(e)?4:Wn(e)?2:0;return mt(e,t,r,l,c,m,d,!0)}function C1(e){return e?$v(e)||rx in e?Jr({},e):e:null}function mh(e,t,r=!1){const{props:l,ref:c,patchFlag:d,children:m}=e,n=t?sx(l||{},t):l;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:n,key:n&&hC(n),ref:t&&t.ref?r&&c?an(c)?c.concat(Hy(t)):[c,Hy(t)]:Hy(t):c,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:m,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pr?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&mh(e.ssContent),ssFallback:e.ssFallback&&mh(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function gh(e=" ",t=0){return Ji(lp,null,e,t)}function id(e,t){const r=Ji(ep,null,e);return r.staticCount=t,r}function yr(e="",t=!1){return t?(ki(),fh(fa,null,e)):Ji(fa,null,e)}function rc(e){return e==null||typeof e=="boolean"?Ji(fa):an(e)?Ji(Pr,null,e.slice()):typeof e=="object"?Yu(e):Ji(lp,null,String(e))}function Yu(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:mh(e)}function D3(e,t){let r=0;const{shapeFlag:l}=e;if(t==null)t=null;else if(an(t))r=16;else if(typeof t=="object")if(l&65){const c=t.default;c&&(c._c&&(c._d=!1),D3(e,c()),c._c&&(c._d=!0));return}else{r=32;const c=t._;!c&&!(rx in t)?t._ctx=ua:c===3&&ua&&(ua.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Wn(t)?(t={default:t,_ctx:ua},r=32):(t=String(t),l&64?(r=16,t=[gh(t)]):r=8);e.children=t,e.shapeFlag|=r}function sx(...e){const t={};for(let r=0;r<e.length;r++){const l=e[r];for(const c in l)if(c==="class")t.class!==l.class&&(t.class=Us([t.class,l.class]));else if(c==="style")t.style=Rf([t.style,l.style]);else if(Bf(c)){const d=t[c],m=l[c];m&&d!==m&&!(an(d)&&d.includes(m))&&(t[c]=d?[].concat(d,m):m)}else c!==""&&(t[c]=l[c])}return t}function vl(e,t,r,l=null){Tl(e,t,7,[r,l])}const Uk=nC();let Gk=0;function dC(e,t,r){const l=e.type,c=(t?t.appContext:e.appContext)||Uk,d={uid:Gk++,vnode:e,type:l,parent:t,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,scope:new Nv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(c.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:QE(l,c),emitsOptions:OE(l,c),emit:null,emitted:null,propsDefaults:os,inheritAttrs:l.inheritAttrs,ctx:os,data:os,props:os,attrs:os,slots:os,refs:os,setupState:os,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=t?t.root:d,d.emit=ak.bind(null,d),e.ce&&e.ce(d),d}let Ro=null;const iu=()=>Ro||ua,cp=e=>{Ro=e,e.scope.on()},tp=()=>{Ro&&Ro.scope.off(),Ro=null};function uC(e){return e.vnode.shapeFlag&4}let um=!1;function pC(e,t=!1){um=t;const{props:r,children:l}=e.vnode,c=uC(e);Ak(e,r,c,t),Dk(e,l);const d=c?Vk(e,t):void 0;return um=!1,d}function Vk(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Hv(new Proxy(e.ctx,hw));const{setup:l}=r;if(l){const c=e.setupContext=l.length>1?gC(e):null;cp(e),Tm();const d=Qh(l,e,0,[e.props,c]);if(Sm(),tp(),r3(d)){if(d.then(tp,tp),t)return d.then(m=>{mw(e,m,t)}).catch(m=>{mp(m,e,0)});e.asyncDep=d}else mw(e,d,t)}else mC(e,t)}function mw(e,t,r){Wn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:hs(t)&&(e.setupState=Yv(t)),mC(e,r)}let lv,gw;function I3(e){lv=e,gw=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,wk))}}const fC=()=>!lv;function mC(e,t,r){const l=e.type;if(!e.render){if(!t&&lv&&!l.render){const c=l.template||C3(e).template;if(c){const{isCustomElement:d,compilerOptions:m}=e.appContext.config,{delimiters:n,compilerOptions:T}=l,V=Jr(Jr({isCustomElement:d,delimiters:n},m),T);l.render=lv(c,V)}}e.render=l.render||Ka,gw&&gw(e)}cp(e),Tm(),Tk(e),Sm(),tp()}function $k(e){return new Proxy(e.attrs,{get(t,r){return lc(e,"get","$attrs"),t[r]}})}function gC(e){const t=l=>{e.exposed=l||{}};let r;return{get attrs(){return r||(r=$k(e))},slots:e.slots,emit:e.emit,expose:t}}function ox(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Yv(Hv(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in u1)return u1[r](e)},has(t,r){return r in t||r in u1}}))}function _w(e,t=!0){return Wn(e)?e.displayName||e.name:e.name||t&&e.__name}function Hk(e){return Wn(e)&&"__vccOpts"in e}const Mm=(e,t)=>ik(e,t,um);function _C(){return null}function yC(){return null}function vC(e){}function xC(e,t){return null}function bC(){return wC().slots}function L3(){return wC().attrs}function wC(){const e=iu();return e.setupContext||(e.setupContext=gC(e))}function TC(e,t){const r=an(e)?e.reduce((l,c)=>(l[c]={},l),{}):e;for(const l in t){const c=r[l];c?an(c)||Wn(c)?r[l]={type:c,default:t[l]}:c.default=t[l]:c===null&&(r[l]={default:t[l]})}return r}function SC(e,t){const r={};for(const l in e)t.includes(l)||Object.defineProperty(r,l,{enumerable:!0,get:()=>e[l]});return r}function EC(e){const t=iu();let r=e();return tp(),r3(r)&&(r=r.catch(l=>{throw cp(t),l})),[r,()=>cp(t)]}function xl(e,t,r){const l=arguments.length;return l===2?hs(t)&&!an(t)?Kd(t)?Ji(e,null,[t]):Ji(e,t):Ji(e,null,t):(l>3?r=Array.prototype.slice.call(arguments,2):l===3&&Kd(r)&&(r=[r]),Ji(e,t,r))}const O3=Symbol(""),R3=()=>Cf(O3);function CC(){}function MC(e,t,r,l){const c=r[l];if(c&&B3(c,e))return c;const d=t();return d.memo=e.slice(),r[l]=d}function B3(e,t){const r=e.memo;if(r.length!=t.length)return!1;for(let l=0;l<r.length;l++)if(hm(r[l],t[l]))return!1;return If>0&&bl&&bl.push(e),!0}const z3="3.2.45",Wk={createComponentInstance:dC,setupComponent:pC,renderComponentRoot:$y,setCurrentRenderingInstance:S1,isVNode:Kd,normalizeVNode:rc},AC=Wk,kC=null,PC=null,Yk="http://www.w3.org/2000/svg",vf=typeof document<"u"?document:null,ES=vf&&vf.createElement("template"),Xk={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,l)=>{const c=t?vf.createElementNS(Yk,e):vf.createElement(e,r?{is:r}:void 0);return e==="select"&&l&&l.multiple!=null&&c.setAttribute("multiple",l.multiple),c},createText:e=>vf.createTextNode(e),createComment:e=>vf.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vf.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,l,c,d){const m=r?r.previousSibling:t.lastChild;if(c&&(c===d||c.nextSibling))for(;t.insertBefore(c.cloneNode(!0),r),!(c===d||!(c=c.nextSibling)););else{ES.innerHTML=l?`<svg>${e}</svg>`:e;const n=ES.content;if(l){const T=n.firstChild;for(;T.firstChild;)n.appendChild(T.firstChild);n.removeChild(T)}t.insertBefore(n,r)}return[m?m.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function qk(e,t,r){const l=e._vtc;l&&(t=(t?[t,...l]:[...l]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function Zk(e,t,r){const l=e.style,c=ir(r);if(r&&!c){for(const d in r)yw(l,d,r[d]);if(t&&!ir(t))for(const d in t)r[d]==null&&yw(l,d,"")}else{const d=l.display;c?t!==r&&(l.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(l.display=d)}}const CS=/\s*!important$/;function yw(e,t,r){if(an(r))r.forEach(l=>yw(e,t,l));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const l=Kk(e,t);CS.test(r)?e.setProperty(oc(l),r.replace(CS,""),"important"):e[l]=r}}const MS=["Webkit","Moz","ms"],kb={};function Kk(e,t){const r=kb[t];if(r)return r;let l=ea(t);if(l!=="filter"&&l in e)return kb[t]=l;l=fp(l);for(let c=0;c<MS.length;c++){const d=MS[c]+l;if(d in e)return kb[t]=d}return t}const AS="http://www.w3.org/1999/xlink";function Jk(e,t,r,l,c){if(l&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(AS,t.slice(6,t.length)):e.setAttributeNS(AS,t,r);else{const d=g6(t);r==null||d&&!tE(r)?e.removeAttribute(t):e.setAttribute(t,d?"":r)}}function Qk(e,t,r,l,c,d,m){if(t==="innerHTML"||t==="textContent"){l&&m(l,c,d),e[t]=r??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const T=r??"";(e.value!==T||e.tagName==="OPTION")&&(e.value=T),r==null&&e.removeAttribute(t);return}let n=!1;if(r===""||r==null){const T=typeof e[t];T==="boolean"?r=tE(r):r==null&&T==="string"?(r="",n=!0):T==="number"&&(r=0,n=!0)}try{e[t]=r}catch{}n&&e.removeAttribute(t)}function Gd(e,t,r,l){e.addEventListener(t,r,l)}function eP(e,t,r,l){e.removeEventListener(t,r,l)}function tP(e,t,r,l,c=null){const d=e._vei||(e._vei={}),m=d[t];if(l&&m)m.value=l;else{const[n,T]=iP(t);if(l){const V=d[t]=sP(l,c);Gd(e,n,V,T)}else m&&(eP(e,n,m,T),d[t]=void 0)}}const kS=/(?:Once|Passive|Capture)$/;function iP(e){let t;if(kS.test(e)){t={};let l;for(;l=e.match(kS);)e=e.slice(0,e.length-l[0].length),t[l[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):oc(e.slice(2)),t]}let Pb=0;const nP=Promise.resolve(),rP=()=>Pb||(nP.then(()=>Pb=0),Pb=Date.now());function sP(e,t){const r=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=r.attached)return;Tl(oP(l,r.value),t,5,[l])};return r.value=e,r.attached=rP(),r}function oP(e,t){if(an(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(l=>c=>!c._stopped&&l&&l(c))}else return t}const PS=/^on[a-z]/,aP=(e,t,r,l,c=!1,d,m,n,T)=>{t==="class"?qk(e,l,c):t==="style"?Zk(e,r,l):Bf(t)?i3(t)||tP(e,t,r,l,m):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):lP(e,t,l,c))?Qk(e,t,l,d,m,n,T):(t==="true-value"?e._trueValue=l:t==="false-value"&&(e._falseValue=l),Jk(e,t,l,c))};function lP(e,t,r,l){return l?!!(t==="innerHTML"||t==="textContent"||t in e&&PS.test(t)&&Wn(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||PS.test(t)&&ir(r)?!1:t in e}function N3(e,t){const r=ex(e);class l extends V1{constructor(d){super(r,d,t)}}return l.def=r,l}const DC=e=>N3(e,U3),cP=typeof HTMLElement<"u"?HTMLElement:class{};class V1 extends cP{constructor(t,r={},l){super(),this._def=t,this._props=r,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&l?l(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Em(()=>{this._connected||(cv(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let l=0;l<this.attributes.length;l++)this._setAttr(this.attributes[l].name);new MutationObserver(l=>{for(const c of l)this._setAttr(c.attributeName)}).observe(this,{attributes:!0});const t=(l,c=!1)=>{const{props:d,styles:m}=l;let n;if(d&&!an(d))for(const T in d){const V=d[T];(V===Number||V&&V.type===Number)&&(T in this._props&&(this._props[T]=qd(this._props[T])),(n||(n=Object.create(null)))[ea(T)]=!0)}this._numberProps=n,c&&this._resolveProps(l),this._applyStyles(m),this._update()},r=this._def.__asyncLoader;r?r().then(l=>t(l,!0)):t(this._def)}_resolveProps(t){const{props:r}=t,l=an(r)?r:Object.keys(r||{});for(const c of Object.keys(this))c[0]!=="_"&&l.includes(c)&&this._setProp(c,this[c],!0,!1);for(const c of l.map(ea))Object.defineProperty(this,c,{get(){return this._getProp(c)},set(d){this._setProp(c,d)}})}_setAttr(t){let r=this.getAttribute(t);const l=ea(t);this._numberProps&&this._numberProps[l]&&(r=qd(r)),this._setProp(l,r,!1)}_getProp(t){return this._props[t]}_setProp(t,r,l=!0,c=!0){r!==this._props[t]&&(this._props[t]=r,c&&this._instance&&this._update(),l&&(r===!0?this.setAttribute(oc(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(oc(t),r+""):r||this.removeAttribute(oc(t))))}_update(){cv(this._createVNode(),this.shadowRoot)}_createVNode(){const t=Ji(this._def,Jr({},this._props));return this._instance||(t.ce=r=>{this._instance=r,r.isCE=!0;const l=(d,m)=>{this.dispatchEvent(new CustomEvent(d,{detail:m}))};r.emit=(d,...m)=>{l(d,m),oc(d)!==d&&l(oc(d),m)};let c=this;for(;c=c&&(c.parentNode||c.host);)if(c instanceof V1){r.parent=c._instance,r.provides=c._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(r=>{const l=document.createElement("style");l.textContent=r,this.shadowRoot.appendChild(l)})}}function IC(e="$style"){{const t=iu();if(!t)return os;const r=t.type.__cssModules;if(!r)return os;const l=r[e];return l||os}}function LC(e){const t=iu();if(!t)return;const r=t.ut=(c=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(d=>xw(d,c))},l=()=>{const c=e(t.proxy);vw(t.subTree,c),r(c)};g3(l),td(()=>{const c=new MutationObserver(l);c.observe(t.subTree.el.parentNode,{childList:!0}),Gf(()=>c.disconnect())})}function vw(e,t){if(e.shapeFlag&128){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{vw(r.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)xw(e.el,t);else if(e.type===Pr)e.children.forEach(r=>vw(r,t));else if(e.type===ep){let{el:r,anchor:l}=e;for(;r&&(xw(r,t),r!==l);)r=r.nextSibling}}function xw(e,t){if(e.nodeType===1){const r=e.style;for(const l in t)r.setProperty(`--${l}`,t[l])}}const $u="transition",s1="animation",$1=(e,{slots:t})=>xl(Qv,RC(e),t);$1.displayName="Transition";const OC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},hP=$1.props=Jr({},Qv.props,OC),uf=(e,t=[])=>{an(e)?e.forEach(r=>r(...t)):e&&e(...t)},DS=e=>e?an(e)?e.some(t=>t.length>1):e.length>1:!1;function RC(e){const t={};for(const E in e)E in OC||(t[E]=e[E]);if(e.css===!1)return t;const{name:r="v",type:l,duration:c,enterFromClass:d=`${r}-enter-from`,enterActiveClass:m=`${r}-enter-active`,enterToClass:n=`${r}-enter-to`,appearFromClass:T=d,appearActiveClass:V=m,appearToClass:Q=n,leaveFromClass:z=`${r}-leave-from`,leaveActiveClass:W=`${r}-leave-active`,leaveToClass:K=`${r}-leave-to`}=e,I=dP(c),O=I&&I[0],$=I&&I[1],{onBeforeEnter:M,onEnter:S,onEnterCancelled:k,onLeave:G,onLeaveCancelled:U,onBeforeAppear:C=M,onAppear:ie=S,onAppearCancelled:J=k}=t,N=(E,L,f)=>{Wu(E,L?Q:n),Wu(E,L?V:m),f&&f()},F=(E,L)=>{E._isLeaving=!1,Wu(E,z),Wu(E,K),Wu(E,W),L&&L()},H=E=>(L,f)=>{const y=E?ie:S,b=()=>N(L,E,f);uf(y,[L,b]),IS(()=>{Wu(L,E?T:d),Fd(L,E?Q:n),DS(y)||LS(L,l,O,b)})};return Jr(t,{onBeforeEnter(E){uf(M,[E]),Fd(E,d),Fd(E,m)},onBeforeAppear(E){uf(C,[E]),Fd(E,T),Fd(E,V)},onEnter:H(!1),onAppear:H(!0),onLeave(E,L){E._isLeaving=!0;const f=()=>F(E,L);Fd(E,z),zC(),Fd(E,W),IS(()=>{E._isLeaving&&(Wu(E,z),Fd(E,K),DS(G)||LS(E,l,$,f))}),uf(G,[E,f])},onEnterCancelled(E){N(E,!1),uf(k,[E])},onAppearCancelled(E){N(E,!0),uf(J,[E])},onLeaveCancelled(E){F(E),uf(U,[E])}})}function dP(e){if(e==null)return null;if(hs(e))return[Db(e.enter),Db(e.leave)];{const t=Db(e);return[t,t]}}function Db(e){return qd(e)}function Fd(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function Wu(e,t){t.split(/\s+/).forEach(l=>l&&e.classList.remove(l));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function IS(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let uP=0;function LS(e,t,r,l){const c=e._endId=++uP,d=()=>{c===e._endId&&l()};if(r)return setTimeout(d,r);const{type:m,timeout:n,propCount:T}=BC(e,t);if(!m)return l();const V=m+"end";let Q=0;const z=()=>{e.removeEventListener(V,W),d()},W=K=>{K.target===e&&++Q>=T&&z()};setTimeout(()=>{Q<T&&z()},n+1),e.addEventListener(V,W)}function BC(e,t){const r=window.getComputedStyle(e),l=I=>(r[I]||"").split(", "),c=l(`${$u}Delay`),d=l(`${$u}Duration`),m=OS(c,d),n=l(`${s1}Delay`),T=l(`${s1}Duration`),V=OS(n,T);let Q=null,z=0,W=0;t===$u?m>0&&(Q=$u,z=m,W=d.length):t===s1?V>0&&(Q=s1,z=V,W=T.length):(z=Math.max(m,V),Q=z>0?m>V?$u:s1:null,W=Q?Q===$u?d.length:T.length:0);const K=Q===$u&&/\b(transform|all)(,|$)/.test(l(`${$u}Property`).toString());return{type:Q,timeout:z,propCount:W,hasTransform:K}}function OS(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,l)=>RS(r)+RS(e[l])))}function RS(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function zC(){return document.body.offsetHeight}const NC=new WeakMap,FC=new WeakMap,pP={name:"TransitionGroup",props:Jr({},hP,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=iu(),l=Jv();let c,d;return jf(()=>{if(!c.length)return;const m=e.moveClass||`${e.name||"v"}-move`;if(!_P(c[0].el,r.vnode.el,m))return;c.forEach(fP),c.forEach(mP);const n=c.filter(gP);zC(),n.forEach(T=>{const V=T.el,Q=V.style;Fd(V,m),Q.transform=Q.webkitTransform=Q.transitionDuration="";const z=V._moveCb=W=>{W&&W.target!==V||(!W||/transform$/.test(W.propertyName))&&(V.removeEventListener("transitionend",z),V._moveCb=null,Wu(V,m))};V.addEventListener("transitionend",z)})}),()=>{const m=Rr(e),n=RC(m);let T=m.tag||Pr;c=d,d=t.default?U1(t.default()):[];for(let V=0;V<d.length;V++){const Q=d[V];Q.key!=null&&ap(Q,Df(Q,n,l,r))}if(c)for(let V=0;V<c.length;V++){const Q=c[V];ap(Q,Df(Q,n,l,r)),NC.set(Q,Q.el.getBoundingClientRect())}return Ji(T,null,d)}}},jC=pP;function fP(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function mP(e){FC.set(e,e.el.getBoundingClientRect())}function gP(e){const t=NC.get(e),r=FC.get(e),l=t.left-r.left,c=t.top-r.top;if(l||c){const d=e.el.style;return d.transform=d.webkitTransform=`translate(${l}px,${c}px)`,d.transitionDuration="0s",e}}function _P(e,t,r){const l=e.cloneNode();e._vtc&&e._vtc.forEach(m=>{m.split(/\s+/).forEach(n=>n&&l.classList.remove(n))}),r.split(/\s+/).forEach(m=>m&&l.classList.add(m)),l.style.display="none";const c=t.nodeType===1?t:t.parentNode;c.appendChild(l);const{hasTransform:d}=BC(l);return c.removeChild(l),d}const hp=e=>{const t=e.props["onUpdate:modelValue"]||!1;return an(t)?r=>tm(t,r):t};function yP(e){e.target.composing=!0}function BS(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Jd={created(e,{modifiers:{lazy:t,trim:r,number:l}},c){e._assign=hp(c);const d=l||c.props&&c.props.type==="number";Gd(e,t?"change":"input",m=>{if(m.target.composing)return;let n=e.value;r&&(n=n.trim()),d&&(n=qd(n)),e._assign(n)}),r&&Gd(e,"change",()=>{e.value=e.value.trim()}),t||(Gd(e,"compositionstart",yP),Gd(e,"compositionend",BS),Gd(e,"change",BS))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:l,number:c}},d){if(e._assign=hp(d),e.composing||document.activeElement===e&&e.type!=="range"&&(r||l&&e.value.trim()===t||(c||e.type==="number")&&qd(e.value)===t))return;const m=t??"";e.value!==m&&(e.value=m)}},pm={deep:!0,created(e,t,r){e._assign=hp(r),Gd(e,"change",()=>{const l=e._modelValue,c=fm(e),d=e.checked,m=e._assign;if(an(l)){const n=Bv(l,c),T=n!==-1;if(d&&!T)m(l.concat(c));else if(!d&&T){const V=[...l];V.splice(n,1),m(V)}}else if(zf(l)){const n=new Set(l);d?n.add(c):n.delete(c),m(n)}else m(UC(e,d))})},mounted:zS,beforeUpdate(e,t,r){e._assign=hp(r),zS(e,t,r)}};function zS(e,{value:t,oldValue:r},l){e._modelValue=t,an(t)?e.checked=Bv(t,l.props.value)>-1:zf(t)?e.checked=t.has(l.props.value):t!==r&&(e.checked=np(t,UC(e,!0)))}const ax={created(e,{value:t},r){e.checked=np(t,r.props.value),e._assign=hp(r),Gd(e,"change",()=>{e._assign(fm(e))})},beforeUpdate(e,{value:t,oldValue:r},l){e._assign=hp(l),t!==r&&(e.checked=np(t,l.props.value))}},Vd={deep:!0,created(e,{value:t,modifiers:{number:r}},l){const c=zf(t);Gd(e,"change",()=>{const d=Array.prototype.filter.call(e.options,m=>m.selected).map(m=>r?qd(fm(m)):fm(m));e._assign(e.multiple?c?new Set(d):d:d[0])}),e._assign=hp(l)},mounted(e,{value:t}){NS(e,t)},beforeUpdate(e,t,r){e._assign=hp(r)},updated(e,{value:t}){NS(e,t)}};function NS(e,t){const r=e.multiple;if(!(r&&!an(t)&&!zf(t))){for(let l=0,c=e.options.length;l<c;l++){const d=e.options[l],m=fm(d);if(r)an(t)?d.selected=Bv(t,m)>-1:d.selected=t.has(m);else if(np(fm(d),t)){e.selectedIndex!==l&&(e.selectedIndex=l);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function fm(e){return"_value"in e?e._value:e.value}function UC(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const F3={created(e,t,r){Py(e,t,r,null,"created")},mounted(e,t,r){Py(e,t,r,null,"mounted")},beforeUpdate(e,t,r,l){Py(e,t,r,l,"beforeUpdate")},updated(e,t,r,l){Py(e,t,r,l,"updated")}};function GC(e,t){switch(e){case"SELECT":return Vd;case"TEXTAREA":return Jd;default:switch(t){case"checkbox":return pm;case"radio":return ax;default:return Jd}}}function Py(e,t,r,l,c){const m=GC(e.tagName,r.props&&r.props.type)[c];m&&m(e,t,r,l)}function vP(){Jd.getSSRProps=({value:e})=>({value:e}),ax.getSSRProps=({value:e},t)=>{if(t.props&&np(t.props.value,e))return{checked:!0}},pm.getSSRProps=({value:e},t)=>{if(an(e)){if(t.props&&Bv(e,t.props.value)>-1)return{checked:!0}}else if(zf(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},F3.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const r=GC(t.type.toUpperCase(),t.props&&t.props.type);if(r.getSSRProps)return r.getSSRProps(e,t)}}const xP=["ctrl","shift","alt","meta"],bP={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>xP.some(r=>e[`${r}Key`]&&!t.includes(r))},VC=(e,t)=>(r,...l)=>{for(let c=0;c<t.length;c++){const d=bP[t[c]];if(d&&d(r,t))return}return e(r,...l)},wP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},$C=(e,t)=>r=>{if(!("key"in r))return;const l=oc(r.key);if(t.some(c=>c===l||wP[c]===l))return e(r)},j3={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):o1(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:l}){!t!=!r&&(l?t?(l.beforeEnter(e),o1(e,!0),l.enter(e)):l.leave(e,()=>{o1(e,!1)}):o1(e,t))},beforeUnmount(e,{value:t}){o1(e,t)}};function o1(e,t){e.style.display=t?e._vod:"none"}function TP(){j3.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const HC=Jr({patchProp:aP},Xk);let m1,FS=!1;function WC(){return m1||(m1=A3(HC))}function YC(){return m1=FS?m1:k3(HC),FS=!0,m1}const cv=(...e)=>{WC().render(...e)},U3=(...e)=>{YC().hydrate(...e)},G3=(...e)=>{const t=WC().createApp(...e),{mount:r}=t;return t.mount=l=>{const c=qC(l);if(!c)return;const d=t._component;!Wn(d)&&!d.render&&!d.template&&(d.template=c.innerHTML),c.innerHTML="";const m=r(c,!1,c instanceof SVGElement);return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),m},t},XC=(...e)=>{const t=YC().createApp(...e),{mount:r}=t;return t.mount=l=>{const c=qC(l);if(c)return r(c,!0,c instanceof SVGElement)},t};function qC(e){return ir(e)?document.querySelector(e):e}let jS=!1;const ZC=()=>{jS||(jS=!0,vP(),TP())},SP=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Qv,Comment:fa,EffectScope:Nv,Fragment:Pr,KeepAlive:$E,ReactiveEffect:wm,Static:ep,Suspense:zE,Teleport:sC,Text:lp,Transition:$1,TransitionGroup:jC,VueElement:V1,callWithAsyncErrorHandling:Tl,callWithErrorHandling:Qh,camelize:ea,capitalize:fp,cloneVNode:mh,compatUtils:PC,computed:Mm,createApp:G3,createBlock:fh,createCommentVNode:yr,createElementBlock:Fi,createElementVNode:mt,createHydrationRenderer:k3,createPropsRestProxy:SC,createRenderer:A3,createSSRApp:XC,createSlots:XE,createStaticVNode:id,createTextVNode:gh,createVNode:Ji,customRef:ME,defineAsyncComponent:VE,defineComponent:ex,defineCustomElement:N3,defineEmits:yC,defineExpose:vC,defineProps:_C,defineSSRCustomElement:DC,get devtools(){return yf},effect:dE,effectScope:sE,getCurrentInstance:iu,getCurrentScope:aE,getTransitionRawChildren:U1,guardReactiveProps:C1,h:xl,handleError:mp,hydrate:U3,initCustomFormatter:CC,initDirectivesForSSR:ZC,inject:Cf,isMemoSame:B3,isProxy:$v,isReactive:Qu,isReadonly:op,isRef:Bo,isRuntimeOnly:fC,isShallow:dm,isVNode:Kd,markRaw:Hv,mergeDefaults:TC,mergeProps:sx,nextTick:Em,normalizeClass:Us,normalizeProps:iv,normalizeStyle:Rf,onActivated:_3,onBeforeMount:v3,onBeforeUnmount:Uf,onBeforeUpdate:ix,onDeactivated:y3,onErrorCaptured:T3,onMounted:td,onRenderTracked:w3,onRenderTriggered:b3,onScopeDispose:lE,onServerPrefetch:x3,onUnmounted:Gf,onUpdated:jf,openBlock:ki,popScopeId:Ff,provide:Cm,proxyRefs:Yv,pushScopeId:Nf,queuePostFlushCb:qv,reactive:F1,readonly:Gv,ref:Zs,registerRuntimeCompiler:I3,render:cv,renderList:pa,renderSlot:hh,resolveComponent:ar,resolveDirective:nx,resolveDynamicComponent:YE,resolveFilter:kC,resolveTransitionHooks:Df,setBlockTracking:av,setDevtoolsHook:p3,setTransitionHooks:ap,shallowReactive:l3,shallowReadonly:TE,shallowRef:SE,ssrContextKey:O3,ssrUtils:AC,stop:uE,toDisplayString:Bn,toHandlerKey:Sf,toHandlers:ZE,toRaw:Rr,toRef:d3,toRefs:AE,transformVNodeArgs:cC,triggerRef:CE,unref:xo,useAttrs:L3,useCssModule:IC,useCssVars:LC,useSSRContext:R3,useSlots:bC,useTransitionState:Jv,vModelCheckbox:pm,vModelDynamic:F3,vModelRadio:ax,vModelSelect:Vd,vModelText:Jd,vShow:j3,version:z3,warn:PE,watch:Uc,watchEffect:FE,watchPostEffect:g3,watchSyncEffect:jE,withAsyncContext:EC,withCtx:js,withDefaults:xC,withDirectives:Pa,withKeys:$C,withMemo:MC,withModifiers:VC,withScopeId:RE},Symbol.toStringTag,{value:"Module"}));function V3(e){throw e}function KC(e){}function Gs(e,t,r,l){const c=e,d=new SyntaxError(String(c));return d.code=e,d.loc=t,d}const M1=Symbol(""),g1=Symbol(""),$3=Symbol(""),hv=Symbol(""),JC=Symbol(""),Lf=Symbol(""),QC=Symbol(""),eM=Symbol(""),H3=Symbol(""),W3=Symbol(""),H1=Symbol(""),Y3=Symbol(""),tM=Symbol(""),X3=Symbol(""),dv=Symbol(""),q3=Symbol(""),Z3=Symbol(""),K3=Symbol(""),J3=Symbol(""),iM=Symbol(""),nM=Symbol(""),lx=Symbol(""),uv=Symbol(""),Q3=Symbol(""),eT=Symbol(""),A1=Symbol(""),W1=Symbol(""),tT=Symbol(""),bw=Symbol(""),EP=Symbol(""),ww=Symbol(""),pv=Symbol(""),CP=Symbol(""),MP=Symbol(""),iT=Symbol(""),AP=Symbol(""),kP=Symbol(""),nT=Symbol(""),rM=Symbol(""),mm={[M1]:"Fragment",[g1]:"Teleport",[$3]:"Suspense",[hv]:"KeepAlive",[JC]:"BaseTransition",[Lf]:"openBlock",[QC]:"createBlock",[eM]:"createElementBlock",[H3]:"createVNode",[W3]:"createElementVNode",[H1]:"createCommentVNode",[Y3]:"createTextVNode",[tM]:"createStaticVNode",[X3]:"resolveComponent",[dv]:"resolveDynamicComponent",[q3]:"resolveDirective",[Z3]:"resolveFilter",[K3]:"withDirectives",[J3]:"renderList",[iM]:"renderSlot",[nM]:"createSlots",[lx]:"toDisplayString",[uv]:"mergeProps",[Q3]:"normalizeClass",[eT]:"normalizeStyle",[A1]:"normalizeProps",[W1]:"guardReactiveProps",[tT]:"toHandlers",[bw]:"camelize",[EP]:"capitalize",[ww]:"toHandlerKey",[pv]:"setBlockTracking",[CP]:"pushScopeId",[MP]:"popScopeId",[iT]:"withCtx",[AP]:"unref",[kP]:"isRef",[nT]:"withMemo",[rM]:"isMemoSame"};function PP(e){Object.getOwnPropertySymbols(e).forEach(t=>{mm[t]=e[t]})}const cc={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function DP(e,t=cc){return{type:0,children:e,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}function k1(e,t,r,l,c,d,m,n=!1,T=!1,V=!1,Q=cc){return e&&(n?(e.helper(Lf),e.helper(ym(e.inSSR,V))):e.helper(_m(e.inSSR,V)),m&&e.helper(K3)),{type:13,tag:t,props:r,children:l,patchFlag:c,dynamicProps:d,directives:m,isBlock:n,disableTracking:T,isComponent:V,loc:Q}}function Y1(e,t=cc){return{type:17,loc:t,elements:e}}function Fc(e,t=cc){return{type:15,loc:t,properties:e}}function to(e,t){return{type:16,loc:cc,key:ir(e)?dr(e,!0):e,value:t}}function dr(e,t=!1,r=cc,l=0){return{type:4,loc:r,content:e,isStatic:t,constType:t?3:l}}function ph(e,t=cc){return{type:8,loc:t,children:e}}function bo(e,t=[],r=cc){return{type:14,loc:r,callee:e,arguments:t}}function gm(e,t=void 0,r=!1,l=!1,c=cc){return{type:18,params:e,returns:t,newline:r,isSlot:l,loc:c}}function Tw(e,t,r,l=!0){return{type:19,test:e,consequent:t,alternate:r,newline:l,loc:cc}}function IP(e,t,r=!1){return{type:20,index:e,value:t,isVNode:r,loc:cc}}function LP(e){return{type:21,body:e,loc:cc}}const wl=e=>e.type===4&&e.isStatic,K0=(e,t)=>e===t||e===oc(t);function sM(e){if(K0(e,"Teleport"))return g1;if(K0(e,"Suspense"))return $3;if(K0(e,"KeepAlive"))return hv;if(K0(e,"BaseTransition"))return JC}const OP=/^\d|[^\$\w]/,rT=e=>!OP.test(e),RP=/[A-Za-z_$\xA0-\uFFFF]/,BP=/[\.\?\w$\xA0-\uFFFF]/,zP=/\s+[.[]\s*|\s*[.[]\s+/g,NP=e=>{e=e.trim().replace(zP,m=>m.trim());let t=0,r=[],l=0,c=0,d=null;for(let m=0;m<e.length;m++){const n=e.charAt(m);switch(t){case 0:if(n==="[")r.push(t),t=1,l++;else if(n==="(")r.push(t),t=2,c++;else if(!(m===0?RP:BP).test(n))return!1;break;case 1:n==="'"||n==='"'||n==="`"?(r.push(t),t=3,d=n):n==="["?l++:n==="]"&&(--l||(t=r.pop()));break;case 2:if(n==="'"||n==='"'||n==="`")r.push(t),t=3,d=n;else if(n==="(")c++;else if(n===")"){if(m===e.length-1)return!1;--c||(t=r.pop())}break;case 3:n===d&&(t=r.pop(),d=null);break}}return!l&&!c},oM=NP;function aM(e,t,r){const c={source:e.source.slice(t,t+r),start:fv(e.start,e.source,t),end:e.end};return r!=null&&(c.end=fv(e.start,e.source,t+r)),c}function fv(e,t,r=t.length){return mv(Jr({},e),t,r)}function mv(e,t,r=t.length){let l=0,c=-1;for(let d=0;d<r;d++)t.charCodeAt(d)===10&&(l++,c=d);return e.offset+=r,e.line+=l,e.column=c===-1?e.column+r:r-c,e}function zc(e,t,r=!1){for(let l=0;l<e.props.length;l++){const c=e.props[l];if(c.type===7&&(r||c.exp)&&(ir(t)?c.name===t:t.test(c.name)))return c}}function cx(e,t,r=!1,l=!1){for(let c=0;c<e.props.length;c++){const d=e.props[c];if(d.type===6){if(r)continue;if(d.name===t&&(d.value||l))return d}else if(d.name==="bind"&&(d.exp||l)&&bf(d.arg,t))return d}}function bf(e,t){return!!(e&&wl(e)&&e.content===t)}function FP(e){return e.props.some(t=>t.type===7&&t.name==="bind"&&(!t.arg||t.arg.type!==4||!t.arg.isStatic))}function Ib(e){return e.type===5||e.type===2}function jP(e){return e.type===7&&e.name==="slot"}function gv(e){return e.type===1&&e.tagType===3}function _v(e){return e.type===1&&e.tagType===2}function _m(e,t){return e||t?H3:W3}function ym(e,t){return e||t?QC:eM}const UP=new Set([A1,W1]);function lM(e,t=[]){if(e&&!ir(e)&&e.type===14){const r=e.callee;if(!ir(r)&&UP.has(r))return lM(e.arguments[0],t.concat(e))}return[e,t]}function yv(e,t,r){let l,c=e.type===13?e.props:e.arguments[2],d=[],m;if(c&&!ir(c)&&c.type===14){const n=lM(c);c=n[0],d=n[1],m=d[d.length-1]}if(c==null||ir(c))l=Fc([t]);else if(c.type===14){const n=c.arguments[0];!ir(n)&&n.type===15?US(t,n)||n.properties.unshift(t):c.callee===tT?l=bo(r.helper(uv),[Fc([t]),c]):c.arguments.unshift(Fc([t])),!l&&(l=c)}else c.type===15?(US(t,c)||c.properties.unshift(t),l=c):(l=bo(r.helper(uv),[Fc([t]),c]),m&&m.callee===W1&&(m=d[d.length-2]));e.type===13?m?m.arguments[0]=l:e.props=l:m?m.arguments[0]=l:e.arguments[2]=l}function US(e,t){let r=!1;if(e.key.type===4){const l=e.key.content;r=t.properties.some(c=>c.key.type===4&&c.key.content===l)}return r}function P1(e,t){return`_${t}_${e.replace(/[^\w]/g,(r,l)=>r==="-"?"_":e.charCodeAt(l).toString())}`}function GP(e){return e.type===14&&e.callee===nT?e.arguments[1].returns:e}function sT(e,{helper:t,removeHelper:r,inSSR:l}){e.isBlock||(e.isBlock=!0,r(_m(l,e.isComponent)),t(Lf),t(ym(l,e.isComponent)))}function GS(e,t){const r=t.options?t.options.compatConfig:t.compatConfig,l=r&&r[e];return e==="MODE"?l||3:l}function Af(e,t){const r=GS("MODE",t),l=GS(e,t);return r===3?l===!0:l!==!1}function D1(e,t,r,...l){return Af(e,t)}const VP=/&(gt|lt|amp|apos|quot);/g,$P={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},VS={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:Vy,isPreTag:Vy,isCustomElement:Vy,decodeEntities:e=>e.replace(VP,(t,r)=>$P[r]),onError:V3,onWarn:KC,comments:!1};function HP(e,t={}){const r=WP(e,t),l=ac(r);return DP(oT(r,0,[]),Gc(r,l))}function WP(e,t){const r=Jr({},VS);let l;for(l in t)r[l]=t[l]===void 0?VS[l]:t[l];return{options:r,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:r.onWarn}}function oT(e,t,r){const l=hx(r),c=l?l.ns:0,d=[];for(;!tD(e,t,r);){const n=e.source;let T;if(t===0||t===1){if(!e.inVPre&&Da(n,e.options.delimiters[0]))T=QP(e,t);else if(t===0&&n[0]==="<")if(n.length===1)ss(e,5,1);else if(n[1]==="!")Da(n,"<!--")?T=XP(e):Da(n,"<!DOCTYPE")?T=a1(e):Da(n,"<![CDATA[")?c!==0?T=YP(e,r):(ss(e,1),T=a1(e)):(ss(e,11),T=a1(e));else if(n[1]==="/")if(n.length===2)ss(e,5,2);else if(n[2]===">"){ss(e,14,2),No(e,3);continue}else if(/[a-z]/i.test(n[2])){ss(e,23),Sw(e,1,l);continue}else ss(e,12,2),T=a1(e);else/[a-z]/i.test(n[1])?(T=qP(e,r),Af("COMPILER_NATIVE_TEMPLATE",e)&&T&&T.tag==="template"&&!T.props.some(V=>V.type===7&&cM(V.name))&&(T=T.children)):n[1]==="?"?(ss(e,21,1),T=a1(e)):ss(e,12,1)}if(T||(T=eD(e,t)),an(T))for(let V=0;V<T.length;V++)$S(d,T[V]);else $S(d,T)}let m=!1;if(t!==2&&t!==1){const n=e.options.whitespace!=="preserve";for(let T=0;T<d.length;T++){const V=d[T];if(V.type===2)if(e.inPre)V.content=V.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(V.content))n&&(V.content=V.content.replace(/[\t\r\n\f ]+/g," "));else{const Q=d[T-1],z=d[T+1];!Q||!z||n&&(Q.type===3&&z.type===3||Q.type===3&&z.type===1||Q.type===1&&z.type===3||Q.type===1&&z.type===1&&/[\r\n]/.test(V.content))?(m=!0,d[T]=null):V.content=" "}else V.type===3&&!e.options.comments&&(m=!0,d[T]=null)}if(e.inPre&&l&&e.options.isPreTag(l.tag)){const T=d[0];T&&T.type===2&&(T.content=T.content.replace(/^\r?\n/,""))}}return m?d.filter(Boolean):d}function $S(e,t){if(t.type===2){const r=hx(e);if(r&&r.type===2&&r.loc.end.offset===t.loc.start.offset){r.content+=t.content,r.loc.end=t.loc.end,r.loc.source+=t.loc.source;return}}e.push(t)}function YP(e,t){No(e,9);const r=oT(e,3,t);return e.source.length===0?ss(e,6):No(e,3),r}function XP(e){const t=ac(e);let r;const l=/--(\!)?>/.exec(e.source);if(!l)r=e.source.slice(4),No(e,e.source.length),ss(e,7);else{l.index<=3&&ss(e,0),l[1]&&ss(e,10),r=e.source.slice(4,l.index);const c=e.source.slice(0,l.index);let d=1,m=0;for(;(m=c.indexOf("<!--",d))!==-1;)No(e,m-d+1),m+4<c.length&&ss(e,16),d=m+1;No(e,l.index+l[0].length-d+1)}return{type:3,content:r,loc:Gc(e,t)}}function a1(e){const t=ac(e),r=e.source[1]==="?"?1:2;let l;const c=e.source.indexOf(">");return c===-1?(l=e.source.slice(r),No(e,e.source.length)):(l=e.source.slice(r,c),No(e,c+1)),{type:3,content:l,loc:Gc(e,t)}}function qP(e,t){const r=e.inPre,l=e.inVPre,c=hx(t),d=Sw(e,0,c),m=e.inPre&&!r,n=e.inVPre&&!l;if(d.isSelfClosing||e.options.isVoidTag(d.tag))return m&&(e.inPre=!1),n&&(e.inVPre=!1),d;t.push(d);const T=e.options.getTextMode(d,c),V=oT(e,T,t);t.pop();{const Q=d.props.find(z=>z.type===6&&z.name==="inline-template");if(Q&&D1("COMPILER_INLINE_TEMPLATE",e,Q.loc)){const z=Gc(e,d.loc.end);Q.value={type:2,content:z.source,loc:z}}}if(d.children=V,Ew(e.source,d.tag))Sw(e,1,c);else if(ss(e,24,0,d.loc.start),e.source.length===0&&d.tag.toLowerCase()==="script"){const Q=V[0];Q&&Da(Q.loc.source,"<!--")&&ss(e,8)}return d.loc=Gc(e,d.loc.start),m&&(e.inPre=!1),n&&(e.inVPre=!1),d}const cM=El("if,else,else-if,for,slot");function Sw(e,t,r){const l=ac(e),c=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),d=c[1],m=e.options.getNamespace(d,r);No(e,c[0].length),I1(e);const n=ac(e),T=e.source;e.options.isPreTag(d)&&(e.inPre=!0);let V=HS(e,t);t===0&&!e.inVPre&&V.some(W=>W.type===7&&W.name==="pre")&&(e.inVPre=!0,Jr(e,n),e.source=T,V=HS(e,t).filter(W=>W.name!=="v-pre"));let Q=!1;if(e.source.length===0?ss(e,9):(Q=Da(e.source,"/>"),t===1&&Q&&ss(e,4),No(e,Q?2:1)),t===1)return;let z=0;return e.inVPre||(d==="slot"?z=2:d==="template"?V.some(W=>W.type===7&&cM(W.name))&&(z=3):ZP(d,V,e)&&(z=1)),{type:1,ns:m,tag:d,tagType:z,props:V,isSelfClosing:Q,children:[],loc:Gc(e,l),codegenNode:void 0}}function ZP(e,t,r){const l=r.options;if(l.isCustomElement(e))return!1;if(e==="component"||/^[A-Z]/.test(e)||sM(e)||l.isBuiltInComponent&&l.isBuiltInComponent(e)||l.isNativeTag&&!l.isNativeTag(e))return!0;for(let c=0;c<t.length;c++){const d=t[c];if(d.type===6){if(d.name==="is"&&d.value){if(d.value.content.startsWith("vue:"))return!0;if(D1("COMPILER_IS_ON_ELEMENT",r,d.loc))return!0}}else{if(d.name==="is")return!0;if(d.name==="bind"&&bf(d.arg,"is")&&D1("COMPILER_IS_ON_ELEMENT",r,d.loc))return!0}}}function HS(e,t){const r=[],l=new Set;for(;e.source.length>0&&!Da(e.source,">")&&!Da(e.source,"/>");){if(Da(e.source,"/")){ss(e,22),No(e,1),I1(e);continue}t===1&&ss(e,3);const c=KP(e,l);c.type===6&&c.value&&c.name==="class"&&(c.value.content=c.value.content.replace(/\s+/g," ").trim()),t===0&&r.push(c),/^[^\t\r\n\f />]/.test(e.source)&&ss(e,15),I1(e)}return r}function KP(e,t){const r=ac(e),c=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];t.has(c)&&ss(e,2),t.add(c),c[0]==="="&&ss(e,19);{const n=/["'<]/g;let T;for(;T=n.exec(c);)ss(e,17,T.index)}No(e,c.length);let d;/^[\t\r\n\f ]*=/.test(e.source)&&(I1(e),No(e,1),I1(e),d=JP(e),d||ss(e,13));const m=Gc(e,r);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(c)){const n=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(c);let T=Da(c,"."),V=n[1]||(T||Da(c,":")?"bind":Da(c,"@")?"on":"slot"),Q;if(n[2]){const W=V==="slot",K=c.lastIndexOf(n[2]),I=Gc(e,WS(e,r,K),WS(e,r,K+n[2].length+(W&&n[3]||"").length));let O=n[2],$=!0;O.startsWith("[")?($=!1,O.endsWith("]")?O=O.slice(1,O.length-1):(ss(e,27),O=O.slice(1))):W&&(O+=n[3]||""),Q={type:4,content:O,isStatic:$,constType:$?3:0,loc:I}}if(d&&d.isQuoted){const W=d.loc;W.start.offset++,W.start.column++,W.end=fv(W.start,d.content),W.source=W.source.slice(1,-1)}const z=n[3]?n[3].slice(1).split("."):[];return T&&z.push("prop"),V==="bind"&&Q&&z.includes("sync")&&D1("COMPILER_V_BIND_SYNC",e,m,Q.loc.source)&&(V="model",z.splice(z.indexOf("sync"),1)),{type:7,name:V,exp:d&&{type:4,content:d.content,isStatic:!1,constType:0,loc:d.loc},arg:Q,modifiers:z,loc:m}}return!e.inVPre&&Da(c,"v-")&&ss(e,26),{type:6,name:c,value:d&&{type:2,content:d.content,loc:d.loc},loc:m}}function JP(e){const t=ac(e);let r;const l=e.source[0],c=l==='"'||l==="'";if(c){No(e,1);const d=e.source.indexOf(l);d===-1?r=_1(e,e.source.length,4):(r=_1(e,d,4),No(e,1))}else{const d=/^[^\t\r\n\f >]+/.exec(e.source);if(!d)return;const m=/["'<=`]/g;let n;for(;n=m.exec(d[0]);)ss(e,18,n.index);r=_1(e,d[0].length,4)}return{content:r,isQuoted:c,loc:Gc(e,t)}}function QP(e,t){const[r,l]=e.options.delimiters,c=e.source.indexOf(l,r.length);if(c===-1){ss(e,25);return}const d=ac(e);No(e,r.length);const m=ac(e),n=ac(e),T=c-r.length,V=e.source.slice(0,T),Q=_1(e,T,t),z=Q.trim(),W=Q.indexOf(z);W>0&&mv(m,V,W);const K=T-(Q.length-z.length-W);return mv(n,V,K),No(e,l.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:z,loc:Gc(e,m,n)},loc:Gc(e,d)}}function eD(e,t){const r=t===3?["]]>"]:["<",e.options.delimiters[0]];let l=e.source.length;for(let m=0;m<r.length;m++){const n=e.source.indexOf(r[m],1);n!==-1&&l>n&&(l=n)}const c=ac(e);return{type:2,content:_1(e,l,t),loc:Gc(e,c)}}function _1(e,t,r){const l=e.source.slice(0,t);return No(e,t),r===2||r===3||!l.includes("&")?l:e.options.decodeEntities(l,r===4)}function ac(e){const{column:t,line:r,offset:l}=e;return{column:t,line:r,offset:l}}function Gc(e,t,r){return r=r||ac(e),{start:t,end:r,source:e.originalSource.slice(t.offset,r.offset)}}function hx(e){return e[e.length-1]}function Da(e,t){return e.startsWith(t)}function No(e,t){const{source:r}=e;mv(e,r,t),e.source=r.slice(t)}function I1(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&No(e,t[0].length)}function WS(e,t,r){return fv(t,e.originalSource.slice(t.offset,r),r)}function ss(e,t,r,l=ac(e)){r&&(l.offset+=r,l.column+=r),e.options.onError(Gs(t,{start:l,end:l,source:""}))}function tD(e,t,r){const l=e.source;switch(t){case 0:if(Da(l,"</")){for(let c=r.length-1;c>=0;--c)if(Ew(l,r[c].tag))return!0}break;case 1:case 2:{const c=hx(r);if(c&&Ew(l,c.tag))return!0;break}case 3:if(Da(l,"]]>"))return!0;break}return!l}function Ew(e,t){return Da(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function iD(e,t){Wy(e,t,hM(e,e.children[0]))}function hM(e,t){const{children:r}=e;return r.length===1&&t.type===1&&!_v(t)}function Wy(e,t,r=!1){const{children:l}=e,c=l.length;let d=0;for(let m=0;m<l.length;m++){const n=l[m];if(n.type===1&&n.tagType===0){const T=r?0:jc(n,t);if(T>0){if(T>=2){n.codegenNode.patchFlag=-1+"",n.codegenNode=t.hoist(n.codegenNode),d++;continue}}else{const V=n.codegenNode;if(V.type===13){const Q=fM(V);if((!Q||Q===512||Q===1)&&uM(n,t)>=2){const z=pM(n);z&&(V.props=t.hoist(z))}V.dynamicProps&&(V.dynamicProps=t.hoist(V.dynamicProps))}}}if(n.type===1){const T=n.tagType===1;T&&t.scopes.vSlot++,Wy(n,t),T&&t.scopes.vSlot--}else if(n.type===11)Wy(n,t,n.children.length===1);else if(n.type===9)for(let T=0;T<n.branches.length;T++)Wy(n.branches[T],t,n.branches[T].children.length===1)}d&&t.transformHoist&&t.transformHoist(l,t,e),d&&d===c&&e.type===1&&e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&an(e.codegenNode.children)&&(e.codegenNode.children=t.hoist(Y1(e.codegenNode.children)))}function jc(e,t){const{constantCache:r}=t;switch(e.type){case 1:if(e.tagType!==0)return 0;const l=r.get(e);if(l!==void 0)return l;const c=e.codegenNode;if(c.type!==13||c.isBlock&&e.tag!=="svg"&&e.tag!=="foreignObject")return 0;if(fM(c))return r.set(e,0),0;{let n=3;const T=uM(e,t);if(T===0)return r.set(e,0),0;T<n&&(n=T);for(let V=0;V<e.children.length;V++){const Q=jc(e.children[V],t);if(Q===0)return r.set(e,0),0;Q<n&&(n=Q)}if(n>1)for(let V=0;V<e.props.length;V++){const Q=e.props[V];if(Q.type===7&&Q.name==="bind"&&Q.exp){const z=jc(Q.exp,t);if(z===0)return r.set(e,0),0;z<n&&(n=z)}}if(c.isBlock){for(let V=0;V<e.props.length;V++)if(e.props[V].type===7)return r.set(e,0),0;t.removeHelper(Lf),t.removeHelper(ym(t.inSSR,c.isComponent)),c.isBlock=!1,t.helper(_m(t.inSSR,c.isComponent))}return r.set(e,n),n}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return jc(e.content,t);case 4:return e.constType;case 8:let m=3;for(let n=0;n<e.children.length;n++){const T=e.children[n];if(ir(T)||rp(T))continue;const V=jc(T,t);if(V===0)return 0;V<m&&(m=V)}return m;default:return 0}}const nD=new Set([Q3,eT,A1,W1]);function dM(e,t){if(e.type===14&&!ir(e.callee)&&nD.has(e.callee)){const r=e.arguments[0];if(r.type===4)return jc(r,t);if(r.type===14)return dM(r,t)}return 0}function uM(e,t){let r=3;const l=pM(e);if(l&&l.type===15){const{properties:c}=l;for(let d=0;d<c.length;d++){const{key:m,value:n}=c[d],T=jc(m,t);if(T===0)return T;T<r&&(r=T);let V;if(n.type===4?V=jc(n,t):n.type===14?V=dM(n,t):V=0,V===0)return V;V<r&&(r=V)}}return r}function pM(e){const t=e.codegenNode;if(t.type===13)return t.props}function fM(e){const t=e.patchFlag;return t?parseInt(t,10):void 0}function rD(e,{filename:t="",prefixIdentifiers:r=!1,hoistStatic:l=!1,cacheHandlers:c=!1,nodeTransforms:d=[],directiveTransforms:m={},transformHoist:n=null,isBuiltInComponent:T=Ka,isCustomElement:V=Ka,expressionPlugins:Q=[],scopeId:z=null,slotted:W=!0,ssr:K=!1,inSSR:I=!1,ssrCssVars:O="",bindingMetadata:$=os,inline:M=!1,isTS:S=!1,onError:k=V3,onWarn:G=KC,compatConfig:U}){const C=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),ie={selfName:C&&fp(ea(C[1])),prefixIdentifiers:r,hoistStatic:l,cacheHandlers:c,nodeTransforms:d,directiveTransforms:m,transformHoist:n,isBuiltInComponent:T,isCustomElement:V,expressionPlugins:Q,scopeId:z,slotted:W,ssr:K,inSSR:I,ssrCssVars:O,bindingMetadata:$,inline:M,isTS:S,onError:k,onWarn:G,compatConfig:U,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(J){const N=ie.helpers.get(J)||0;return ie.helpers.set(J,N+1),J},removeHelper(J){const N=ie.helpers.get(J);if(N){const F=N-1;F?ie.helpers.set(J,F):ie.helpers.delete(J)}},helperString(J){return`_${mm[ie.helper(J)]}`},replaceNode(J){ie.parent.children[ie.childIndex]=ie.currentNode=J},removeNode(J){const N=ie.parent.children,F=J?N.indexOf(J):ie.currentNode?ie.childIndex:-1;!J||J===ie.currentNode?(ie.currentNode=null,ie.onNodeRemoved()):ie.childIndex>F&&(ie.childIndex--,ie.onNodeRemoved()),ie.parent.children.splice(F,1)},onNodeRemoved:()=>{},addIdentifiers(J){},removeIdentifiers(J){},hoist(J){ir(J)&&(J=dr(J)),ie.hoists.push(J);const N=dr(`_hoisted_${ie.hoists.length}`,!1,J.loc,2);return N.hoisted=J,N},cache(J,N=!1){return IP(ie.cached++,J,N)}};return ie.filters=new Set,ie}function sD(e,t){const r=rD(e,t);dx(e,r),t.hoistStatic&&iD(e,r),t.ssr||oD(e,r),e.helpers=[...r.helpers.keys()],e.components=[...r.components],e.directives=[...r.directives],e.imports=r.imports,e.hoists=r.hoists,e.temps=r.temps,e.cached=r.cached,e.filters=[...r.filters]}function oD(e,t){const{helper:r}=t,{children:l}=e;if(l.length===1){const c=l[0];if(hM(e,c)&&c.codegenNode){const d=c.codegenNode;d.type===13&&sT(d,t),e.codegenNode=d}else e.codegenNode=c}else if(l.length>1){let c=64;e.codegenNode=k1(t,r(M1),void 0,e.children,c+"",void 0,void 0,!0,void 0,!1)}}function aD(e,t){let r=0;const l=()=>{r--};for(;r<e.children.length;r++){const c=e.children[r];ir(c)||(t.parent=e,t.childIndex=r,t.onNodeRemoved=l,dx(c,t))}}function dx(e,t){t.currentNode=e;const{nodeTransforms:r}=t,l=[];for(let d=0;d<r.length;d++){const m=r[d](e,t);if(m&&(an(m)?l.push(...m):l.push(m)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(H1);break;case 5:t.ssr||t.helper(lx);break;case 9:for(let d=0;d<e.branches.length;d++)dx(e.branches[d],t);break;case 10:case 11:case 1:case 0:aD(e,t);break}t.currentNode=e;let c=l.length;for(;c--;)l[c]()}function mM(e,t){const r=ir(e)?l=>l===e:l=>e.test(l);return(l,c)=>{if(l.type===1){const{props:d}=l;if(l.tagType===3&&d.some(jP))return;const m=[];for(let n=0;n<d.length;n++){const T=d[n];if(T.type===7&&r(T.name)){d.splice(n,1),n--;const V=t(l,T,c);V&&m.push(V)}}return m}}}const ux="/*#__PURE__*/",gM=e=>`${mm[e]}: _${mm[e]}`;function lD(e,{mode:t="function",prefixIdentifiers:r=t==="module",sourceMap:l=!1,filename:c="template.vue.html",scopeId:d=null,optimizeImports:m=!1,runtimeGlobalName:n="Vue",runtimeModuleName:T="vue",ssrRuntimeModuleName:V="vue/server-renderer",ssr:Q=!1,isTS:z=!1,inSSR:W=!1}){const K={mode:t,prefixIdentifiers:r,sourceMap:l,filename:c,scopeId:d,optimizeImports:m,runtimeGlobalName:n,runtimeModuleName:T,ssrRuntimeModuleName:V,ssr:Q,isTS:z,inSSR:W,source:e.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(O){return`_${mm[O]}`},push(O,$){K.code+=O},indent(){I(++K.indentLevel)},deindent(O=!1){O?--K.indentLevel:I(--K.indentLevel)},newline(){I(K.indentLevel)}};function I(O){K.push(`
`+"  ".repeat(O))}return K}function cD(e,t={}){const r=lD(e,t);t.onContextCreated&&t.onContextCreated(r);const{mode:l,push:c,prefixIdentifiers:d,indent:m,deindent:n,newline:T,scopeId:V,ssr:Q}=r,z=e.helpers.length>0,W=!d&&l!=="module";hD(e,r);const I=Q?"ssrRender":"render",$=(Q?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(c(`function ${I}(${$}) {`),m(),W&&(c("with (_ctx) {"),m(),z&&(c(`const { ${e.helpers.map(gM).join(", ")} } = _Vue`),c(`
`),T())),e.components.length&&(Lb(e.components,"component",r),(e.directives.length||e.temps>0)&&T()),e.directives.length&&(Lb(e.directives,"directive",r),e.temps>0&&T()),e.filters&&e.filters.length&&(T(),Lb(e.filters,"filter",r),T()),e.temps>0){c("let ");for(let M=0;M<e.temps;M++)c(`${M>0?", ":""}_temp${M}`)}return(e.components.length||e.directives.length||e.temps)&&(c(`
`),T()),Q||c("return "),e.codegenNode?Ia(e.codegenNode,r):c("null"),W&&(n(),c("}")),n(),c("}"),{ast:e,code:r.code,preamble:"",map:r.map?r.map.toJSON():void 0}}function hD(e,t){const{ssr:r,prefixIdentifiers:l,push:c,newline:d,runtimeModuleName:m,runtimeGlobalName:n,ssrRuntimeModuleName:T}=t,V=n;if(e.helpers.length>0&&(c(`const _Vue = ${V}
`),e.hoists.length)){const Q=[H3,W3,H1,Y3,tM].filter(z=>e.helpers.includes(z)).map(gM).join(", ");c(`const { ${Q} } = _Vue
`)}dD(e.hoists,t),d(),c("return ")}function Lb(e,t,{helper:r,push:l,newline:c,isTS:d}){const m=r(t==="filter"?Z3:t==="component"?X3:q3);for(let n=0;n<e.length;n++){let T=e[n];const V=T.endsWith("__self");V&&(T=T.slice(0,-6)),l(`const ${P1(T,t)} = ${m}(${JSON.stringify(T)}${V?", true":""})${d?"!":""}`),n<e.length-1&&c()}}function dD(e,t){if(!e.length)return;t.pure=!0;const{push:r,newline:l,helper:c,scopeId:d,mode:m}=t;l();for(let n=0;n<e.length;n++){const T=e[n];T&&(r(`const _hoisted_${n+1} = `),Ia(T,t),l())}t.pure=!1}function aT(e,t){const r=e.length>3||!1;t.push("["),r&&t.indent(),X1(e,t,r),r&&t.deindent(),t.push("]")}function X1(e,t,r=!1,l=!0){const{push:c,newline:d}=t;for(let m=0;m<e.length;m++){const n=e[m];ir(n)?c(n):an(n)?aT(n,t):Ia(n,t),m<e.length-1&&(r?(l&&c(","),d()):l&&c(", "))}}function Ia(e,t){if(ir(e)){t.push(e);return}if(rp(e)){t.push(t.helper(e));return}switch(e.type){case 1:case 9:case 11:Ia(e.codegenNode,t);break;case 2:uD(e,t);break;case 4:_M(e,t);break;case 5:pD(e,t);break;case 12:Ia(e.codegenNode,t);break;case 8:yM(e,t);break;case 3:mD(e,t);break;case 13:gD(e,t);break;case 14:yD(e,t);break;case 15:vD(e,t);break;case 17:xD(e,t);break;case 18:bD(e,t);break;case 19:wD(e,t);break;case 20:TD(e,t);break;case 21:X1(e.body,t,!0,!1);break}}function uD(e,t){t.push(JSON.stringify(e.content),e)}function _M(e,t){const{content:r,isStatic:l}=e;t.push(l?JSON.stringify(r):r,e)}function pD(e,t){const{push:r,helper:l,pure:c}=t;c&&r(ux),r(`${l(lx)}(`),Ia(e.content,t),r(")")}function yM(e,t){for(let r=0;r<e.children.length;r++){const l=e.children[r];ir(l)?t.push(l):Ia(l,t)}}function fD(e,t){const{push:r}=t;if(e.type===8)r("["),yM(e,t),r("]");else if(e.isStatic){const l=rT(e.content)?e.content:JSON.stringify(e.content);r(l,e)}else r(`[${e.content}]`,e)}function mD(e,t){const{push:r,helper:l,pure:c}=t;c&&r(ux),r(`${l(H1)}(${JSON.stringify(e.content)})`,e)}function gD(e,t){const{push:r,helper:l,pure:c}=t,{tag:d,props:m,children:n,patchFlag:T,dynamicProps:V,directives:Q,isBlock:z,disableTracking:W,isComponent:K}=e;Q&&r(l(K3)+"("),z&&r(`(${l(Lf)}(${W?"true":""}), `),c&&r(ux);const I=z?ym(t.inSSR,K):_m(t.inSSR,K);r(l(I)+"(",e),X1(_D([d,m,n,T,V]),t),r(")"),z&&r(")"),Q&&(r(", "),Ia(Q,t),r(")"))}function _D(e){let t=e.length;for(;t--&&e[t]==null;);return e.slice(0,t+1).map(r=>r||"null")}function yD(e,t){const{push:r,helper:l,pure:c}=t,d=ir(e.callee)?e.callee:l(e.callee);c&&r(ux),r(d+"(",e),X1(e.arguments,t),r(")")}function vD(e,t){const{push:r,indent:l,deindent:c,newline:d}=t,{properties:m}=e;if(!m.length){r("{}",e);return}const n=m.length>1||!1;r(n?"{":"{ "),n&&l();for(let T=0;T<m.length;T++){const{key:V,value:Q}=m[T];fD(V,t),r(": "),Ia(Q,t),T<m.length-1&&(r(","),d())}n&&c(),r(n?"}":" }")}function xD(e,t){aT(e.elements,t)}function bD(e,t){const{push:r,indent:l,deindent:c}=t,{params:d,returns:m,body:n,newline:T,isSlot:V}=e;V&&r(`_${mm[iT]}(`),r("(",e),an(d)?X1(d,t):d&&Ia(d,t),r(") => "),(T||n)&&(r("{"),l()),m?(T&&r("return "),an(m)?aT(m,t):Ia(m,t)):n&&Ia(n,t),(T||n)&&(c(),r("}")),V&&(e.isNonScopedSlot&&r(", undefined, true"),r(")"))}function wD(e,t){const{test:r,consequent:l,alternate:c,newline:d}=e,{push:m,indent:n,deindent:T,newline:V}=t;if(r.type===4){const z=!rT(r.content);z&&m("("),_M(r,t),z&&m(")")}else m("("),Ia(r,t),m(")");d&&n(),t.indentLevel++,d||m(" "),m("? "),Ia(l,t),t.indentLevel--,d&&V(),d||m(" "),m(": ");const Q=c.type===19;Q||t.indentLevel++,Ia(c,t),Q||t.indentLevel--,d&&T(!0)}function TD(e,t){const{push:r,helper:l,indent:c,deindent:d,newline:m}=t;r(`_cache[${e.index}] || (`),e.isVNode&&(c(),r(`${l(pv)}(-1),`),m()),r(`_cache[${e.index}] = `),Ia(e.value,t),e.isVNode&&(r(","),m(),r(`${l(pv)}(1),`),m(),r(`_cache[${e.index}]`),d()),r(")")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b");const SD=mM(/^(if|else|else-if)$/,(e,t,r)=>ED(e,t,r,(l,c,d)=>{const m=r.parent.children;let n=m.indexOf(l),T=0;for(;n-->=0;){const V=m[n];V&&V.type===9&&(T+=V.branches.length)}return()=>{if(d)l.codegenNode=XS(c,T,r);else{const V=CD(l.codegenNode);V.alternate=XS(c,T+l.branches.length-1,r)}}}));function ED(e,t,r,l){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const c=t.exp?t.exp.loc:e.loc;r.onError(Gs(28,t.loc)),t.exp=dr("true",!1,c)}if(t.name==="if"){const c=YS(e,t),d={type:9,loc:e.loc,branches:[c]};if(r.replaceNode(d),l)return l(d,c,!0)}else{const c=r.parent.children;let d=c.indexOf(e);for(;d-->=-1;){const m=c[d];if(m&&m.type===3){r.removeNode(m);continue}if(m&&m.type===2&&!m.content.trim().length){r.removeNode(m);continue}if(m&&m.type===9){t.name==="else-if"&&m.branches[m.branches.length-1].condition===void 0&&r.onError(Gs(30,e.loc)),r.removeNode();const n=YS(e,t);m.branches.push(n);const T=l&&l(m,n,!1);dx(n,r),T&&T(),r.currentNode=null}else r.onError(Gs(30,e.loc));break}}}function YS(e,t){const r=e.tagType===3;return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:r&&!zc(e,"for")?e.children:[e],userKey:cx(e,"key"),isTemplateIf:r}}function XS(e,t,r){return e.condition?Tw(e.condition,qS(e,t,r),bo(r.helper(H1),['""',"true"])):qS(e,t,r)}function qS(e,t,r){const{helper:l}=r,c=to("key",dr(`${t}`,!1,cc,2)),{children:d}=e,m=d[0];if(d.length!==1||m.type!==1)if(d.length===1&&m.type===11){const T=m.codegenNode;return yv(T,c,r),T}else{let T=64;return k1(r,l(M1),Fc([c]),d,T+"",void 0,void 0,!0,!1,!1,e.loc)}else{const T=m.codegenNode,V=GP(T);return V.type===13&&sT(V,r),yv(V,c,r),T}}function CD(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const MD=mM("for",(e,t,r)=>{const{helper:l,removeHelper:c}=r;return AD(e,t,r,d=>{const m=bo(l(J3),[d.source]),n=gv(e),T=zc(e,"memo"),V=cx(e,"key"),Q=V&&(V.type===6?dr(V.value.content,!0):V.exp),z=V?to("key",Q):null,W=d.source.type===4&&d.source.constType>0,K=W?64:V?128:256;return d.codegenNode=k1(r,l(M1),void 0,m,K+"",void 0,void 0,!0,!W,!1,e.loc),()=>{let I;const{children:O}=d,$=O.length!==1||O[0].type!==1,M=_v(e)?e:n&&e.children.length===1&&_v(e.children[0])?e.children[0]:null;if(M?(I=M.codegenNode,n&&z&&yv(I,z,r)):$?I=k1(r,l(M1),z?Fc([z]):void 0,e.children,64+"",void 0,void 0,!0,void 0,!1):(I=O[0].codegenNode,n&&z&&yv(I,z,r),I.isBlock!==!W&&(I.isBlock?(c(Lf),c(ym(r.inSSR,I.isComponent))):c(_m(r.inSSR,I.isComponent))),I.isBlock=!W,I.isBlock?(l(Lf),l(ym(r.inSSR,I.isComponent))):l(_m(r.inSSR,I.isComponent))),T){const S=gm(Cw(d.parseResult,[dr("_cached")]));S.body=LP([ph(["const _memo = (",T.exp,")"]),ph(["if (_cached",...Q?[" && _cached.key === ",Q]:[],` && ${r.helperString(rM)}(_cached, _memo)) return _cached`]),ph(["const _item = ",I]),dr("_item.memo = _memo"),dr("return _item")]),m.arguments.push(S,dr("_cache"),dr(String(r.cached++)))}else m.arguments.push(gm(Cw(d.parseResult),I,!0))}})});function AD(e,t,r,l){if(!t.exp){r.onError(Gs(31,t.loc));return}const c=vM(t.exp);if(!c){r.onError(Gs(32,t.loc));return}const{addIdentifiers:d,removeIdentifiers:m,scopes:n}=r,{source:T,value:V,key:Q,index:z}=c,W={type:11,loc:t.loc,source:T,valueAlias:V,keyAlias:Q,objectIndexAlias:z,parseResult:c,children:gv(e)?e.children:[e]};r.replaceNode(W),n.vFor++;const K=l&&l(W);return()=>{n.vFor--,K&&K()}}const kD=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,ZS=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,PD=/^\(|\)$/g;function vM(e,t){const r=e.loc,l=e.content,c=l.match(kD);if(!c)return;const[,d,m]=c,n={source:Dy(r,m.trim(),l.indexOf(m,d.length)),value:void 0,key:void 0,index:void 0};let T=d.trim().replace(PD,"").trim();const V=d.indexOf(T),Q=T.match(ZS);if(Q){T=T.replace(ZS,"").trim();const z=Q[1].trim();let W;if(z&&(W=l.indexOf(z,V+T.length),n.key=Dy(r,z,W)),Q[2]){const K=Q[2].trim();K&&(n.index=Dy(r,K,l.indexOf(K,n.key?W+z.length:V+T.length)))}}return T&&(n.value=Dy(r,T,V)),n}function Dy(e,t,r){return dr(t,!1,aM(e,r,t.length))}function Cw({value:e,key:t,index:r},l=[]){return DD([e,t,r,...l])}function DD(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((r,l)=>r||dr("_".repeat(l+1),!1))}const KS=dr("undefined",!1),ID=(e,t)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const r=zc(e,"slot");if(r)return r.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},LD=(e,t,r)=>gm(e,t,!1,!0,t.length?t[0].loc:r);function OD(e,t,r=LD){t.helper(iT);const{children:l,loc:c}=e,d=[],m=[];let n=t.scopes.vSlot>0||t.scopes.vFor>0;const T=zc(e,"slot",!0);if(T){const{arg:$,exp:M}=T;$&&!wl($)&&(n=!0),d.push(to($||dr("default",!0),r(M,l,c)))}let V=!1,Q=!1;const z=[],W=new Set;let K=0;for(let $=0;$<l.length;$++){const M=l[$];let S;if(!gv(M)||!(S=zc(M,"slot",!0))){M.type!==3&&z.push(M);continue}if(T){t.onError(Gs(37,S.loc));break}V=!0;const{children:k,loc:G}=M,{arg:U=dr("default",!0),exp:C,loc:ie}=S;let J;wl(U)?J=U?U.content:"default":n=!0;const N=r(C,k,G);let F,H,E;if(F=zc(M,"if"))n=!0,m.push(Tw(F.exp,Iy(U,N,K++),KS));else if(H=zc(M,/^else(-if)?$/,!0)){let L=$,f;for(;L--&&(f=l[L],f.type===3););if(f&&gv(f)&&zc(f,"if")){l.splice($,1),$--;let y=m[m.length-1];for(;y.alternate.type===19;)y=y.alternate;y.alternate=H.exp?Tw(H.exp,Iy(U,N,K++),KS):Iy(U,N,K++)}else t.onError(Gs(30,H.loc))}else if(E=zc(M,"for")){n=!0;const L=E.parseResult||vM(E.exp);L?m.push(bo(t.helper(J3),[L.source,gm(Cw(L),Iy(U,N),!0)])):t.onError(Gs(32,E.loc))}else{if(J){if(W.has(J)){t.onError(Gs(38,ie));continue}W.add(J),J==="default"&&(Q=!0)}d.push(to(U,N))}}if(!T){const $=(M,S)=>{const k=r(M,S,c);return t.compatConfig&&(k.isNonScopedSlot=!0),to("default",k)};V?z.length&&z.some(M=>xM(M))&&(Q?t.onError(Gs(39,z[0].loc)):d.push($(void 0,z))):d.push($(void 0,l))}const I=n?2:Yy(e.children)?3:1;let O=Fc(d.concat(to("_",dr(I+"",!1))),c);return m.length&&(O=bo(t.helper(nM),[O,Y1(m)])),{slots:O,hasDynamicSlots:n}}function Iy(e,t,r){const l=[to("name",e),to("fn",t)];return r!=null&&l.push(to("key",dr(String(r),!0))),Fc(l)}function Yy(e){for(let t=0;t<e.length;t++){const r=e[t];switch(r.type){case 1:if(r.tagType===2||Yy(r.children))return!0;break;case 9:if(Yy(r.branches))return!0;break;case 10:case 11:if(Yy(r.children))return!0;break}}return!1}function xM(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():xM(e.content)}const bM=new WeakMap,RD=(e,t)=>function(){if(e=t.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:l,props:c}=e,d=e.tagType===1;let m=d?BD(e,t):`"${l}"`;const n=hs(m)&&m.callee===dv;let T,V,Q,z=0,W,K,I,O=n||m===g1||m===$3||!d&&(l==="svg"||l==="foreignObject");if(c.length>0){const $=wM(e,t,void 0,d,n);T=$.props,z=$.patchFlag,K=$.dynamicPropNames;const M=$.directives;I=M&&M.length?Y1(M.map(S=>ND(S,t))):void 0,$.shouldUseBlock&&(O=!0)}if(e.children.length>0)if(m===hv&&(O=!0,z|=1024),d&&m!==g1&&m!==hv){const{slots:M,hasDynamicSlots:S}=OD(e,t);V=M,S&&(z|=1024)}else if(e.children.length===1&&m!==g1){const M=e.children[0],S=M.type,k=S===5||S===8;k&&jc(M,t)===0&&(z|=1),k||S===2?V=M:V=e.children}else V=e.children;z!==0&&(Q=String(z),K&&K.length&&(W=FD(K))),e.codegenNode=k1(t,m,T,V,Q,W,I,!!O,!1,d,e.loc)};function BD(e,t,r=!1){let{tag:l}=e;const c=Mw(l),d=cx(e,"is");if(d)if(c||Af("COMPILER_IS_ON_ELEMENT",t)){const T=d.type===6?d.value&&dr(d.value.content,!0):d.exp;if(T)return bo(t.helper(dv),[T])}else d.type===6&&d.value.content.startsWith("vue:")&&(l=d.value.content.slice(4));const m=!c&&zc(e,"is");if(m&&m.exp)return bo(t.helper(dv),[m.exp]);const n=sM(l)||t.isBuiltInComponent(l);return n?(r||t.helper(n),n):(t.helper(X3),t.components.add(l),P1(l,"component"))}function wM(e,t,r=e.props,l,c,d=!1){const{tag:m,loc:n,children:T}=e;let V=[];const Q=[],z=[],W=T.length>0;let K=!1,I=0,O=!1,$=!1,M=!1,S=!1,k=!1,G=!1;const U=[],C=N=>{V.length&&(Q.push(Fc(JS(V),n)),V=[]),N&&Q.push(N)},ie=({key:N,value:F})=>{if(wl(N)){const H=N.content,E=Bf(H);if(E&&(!l||c)&&H.toLowerCase()!=="onclick"&&H!=="onUpdate:modelValue"&&!Tf(H)&&(S=!0),E&&Tf(H)&&(G=!0),F.type===20||(F.type===4||F.type===8)&&jc(F,t)>0)return;H==="ref"?O=!0:H==="class"?$=!0:H==="style"?M=!0:H!=="key"&&!U.includes(H)&&U.push(H),l&&(H==="class"||H==="style")&&!U.includes(H)&&U.push(H)}else k=!0};for(let N=0;N<r.length;N++){const F=r[N];if(F.type===6){const{loc:H,name:E,value:L}=F;let f=!0;if(E==="ref"&&(O=!0,t.scopes.vFor>0&&V.push(to(dr("ref_for",!0),dr("true")))),E==="is"&&(Mw(m)||L&&L.content.startsWith("vue:")||Af("COMPILER_IS_ON_ELEMENT",t)))continue;V.push(to(dr(E,!0,aM(H,0,E.length)),dr(L?L.content:"",f,L?L.loc:H)))}else{const{name:H,arg:E,exp:L,loc:f}=F,y=H==="bind",b=H==="on";if(H==="slot"){l||t.onError(Gs(40,f));continue}if(H==="once"||H==="memo"||H==="is"||y&&bf(E,"is")&&(Mw(m)||Af("COMPILER_IS_ON_ELEMENT",t))||b&&d)continue;if((y&&bf(E,"key")||b&&W&&bf(E,"vue:before-update"))&&(K=!0),y&&bf(E,"ref")&&t.scopes.vFor>0&&V.push(to(dr("ref_for",!0),dr("true"))),!E&&(y||b)){if(k=!0,L)if(y){if(C(),Af("COMPILER_V_BIND_OBJECT_ORDER",t)){Q.unshift(L);continue}Q.push(L)}else C({type:14,loc:f,callee:t.helper(tT),arguments:l?[L]:[L,"true"]});else t.onError(Gs(y?34:35,f));continue}const D=t.directiveTransforms[H];if(D){const{props:X,needRuntime:te}=D(F,e,t);!d&&X.forEach(ie),b&&E&&!wl(E)?C(Fc(X,n)):V.push(...X),te&&(z.push(F),rp(te)&&bM.set(F,te))}else b6(H)||(z.push(F),W&&(K=!0))}}let J;if(Q.length?(C(),Q.length>1?J=bo(t.helper(uv),Q,n):J=Q[0]):V.length&&(J=Fc(JS(V),n)),k?I|=16:($&&!l&&(I|=2),M&&!l&&(I|=4),U.length&&(I|=8),S&&(I|=32)),!K&&(I===0||I===32)&&(O||G||z.length>0)&&(I|=512),!t.inSSR&&J)switch(J.type){case 15:let N=-1,F=-1,H=!1;for(let f=0;f<J.properties.length;f++){const y=J.properties[f].key;wl(y)?y.content==="class"?N=f:y.content==="style"&&(F=f):y.isHandlerKey||(H=!0)}const E=J.properties[N],L=J.properties[F];H?J=bo(t.helper(A1),[J]):(E&&!wl(E.value)&&(E.value=bo(t.helper(Q3),[E.value])),L&&(M||L.value.type===4&&L.value.content.trim()[0]==="["||L.value.type===17)&&(L.value=bo(t.helper(eT),[L.value])));break;case 14:break;default:J=bo(t.helper(A1),[bo(t.helper(W1),[J])]);break}return{props:J,directives:z,patchFlag:I,dynamicPropNames:U,shouldUseBlock:K}}function JS(e){const t=new Map,r=[];for(let l=0;l<e.length;l++){const c=e[l];if(c.key.type===8||!c.key.isStatic){r.push(c);continue}const d=c.key.content,m=t.get(d);m?(d==="style"||d==="class"||Bf(d))&&zD(m,c):(t.set(d,c),r.push(c))}return r}function zD(e,t){e.value.type===17?e.value.elements.push(t.value):e.value=Y1([e.value,t.value],e.loc)}function ND(e,t){const r=[],l=bM.get(e);l?r.push(t.helperString(l)):(t.helper(q3),t.directives.add(e.name),r.push(P1(e.name,"directive")));const{loc:c}=e;if(e.exp&&r.push(e.exp),e.arg&&(e.exp||r.push("void 0"),r.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||r.push("void 0"),r.push("void 0"));const d=dr("true",!1,c);r.push(Fc(e.modifiers.map(m=>to(m,d)),c))}return Y1(r,e.loc)}function FD(e){let t="[";for(let r=0,l=e.length;r<l;r++)t+=JSON.stringify(e[r]),r<l-1&&(t+=", ");return t+"]"}function Mw(e){return e==="component"||e==="Component"}const jD=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},UD=/-(\w)/g,QS=jD(e=>e.replace(UD,(t,r)=>r?r.toUpperCase():"")),GD=(e,t)=>{if(_v(e)){const{children:r,loc:l}=e,{slotName:c,slotProps:d}=VD(e,t),m=[t.prefixIdentifiers?"_ctx.$slots":"$slots",c,"{}","undefined","true"];let n=2;d&&(m[2]=d,n=3),r.length&&(m[3]=gm([],r,!1,!1,l),n=4),t.scopeId&&!t.slotted&&(n=5),m.splice(n),e.codegenNode=bo(t.helper(iM),m,l)}};function VD(e,t){let r='"default"',l;const c=[];for(let d=0;d<e.props.length;d++){const m=e.props[d];m.type===6?m.value&&(m.name==="name"?r=JSON.stringify(m.value.content):(m.name=QS(m.name),c.push(m))):m.name==="bind"&&bf(m.arg,"name")?m.exp&&(r=m.exp):(m.name==="bind"&&m.arg&&wl(m.arg)&&(m.arg.content=QS(m.arg.content)),c.push(m))}if(c.length>0){const{props:d,directives:m}=wM(e,t,c,!1,!1);l=d,m.length&&t.onError(Gs(36,m[0].loc))}return{slotName:r,slotProps:l}}const $D=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,TM=(e,t,r,l)=>{const{loc:c,modifiers:d,arg:m}=e;!e.exp&&!d.length&&r.onError(Gs(35,c));let n;if(m.type===4)if(m.isStatic){let z=m.content;z.startsWith("vue:")&&(z=`vnode-${z.slice(4)}`);const W=t.tagType!==0||z.startsWith("vnode")||!/[A-Z]/.test(z)?Sf(ea(z)):`on:${z}`;n=dr(W,!0,m.loc)}else n=ph([`${r.helperString(ww)}(`,m,")"]);else n=m,n.children.unshift(`${r.helperString(ww)}(`),n.children.push(")");let T=e.exp;T&&!T.content.trim()&&(T=void 0);let V=r.cacheHandlers&&!T&&!r.inVOnce;if(T){const z=oM(T.content),W=!(z||$D.test(T.content)),K=T.content.includes(";");(W||V&&z)&&(T=ph([`${W?"$event":"(...args)"} => ${K?"{":"("}`,T,K?"}":")"]))}let Q={props:[to(n,T||dr("() => {}",!1,c))]};return l&&(Q=l(Q)),V&&(Q.props[0].value=r.cache(Q.props[0].value)),Q.props.forEach(z=>z.key.isHandlerKey=!0),Q},HD=(e,t,r)=>{const{exp:l,modifiers:c,loc:d}=e,m=e.arg;return m.type!==4?(m.children.unshift("("),m.children.push(') || ""')):m.isStatic||(m.content=`${m.content} || ""`),c.includes("camel")&&(m.type===4?m.isStatic?m.content=ea(m.content):m.content=`${r.helperString(bw)}(${m.content})`:(m.children.unshift(`${r.helperString(bw)}(`),m.children.push(")"))),r.inSSR||(c.includes("prop")&&e5(m,"."),c.includes("attr")&&e5(m,"^")),!l||l.type===4&&!l.content.trim()?(r.onError(Gs(34,d)),{props:[to(m,dr("",!0,d))]}):{props:[to(m,l)]}},e5=(e,t)=>{e.type===4?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},WD=(e,t)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const r=e.children;let l,c=!1;for(let d=0;d<r.length;d++){const m=r[d];if(Ib(m)){c=!0;for(let n=d+1;n<r.length;n++){const T=r[n];if(Ib(T))l||(l=r[d]=ph([m],m.loc)),l.children.push(" + ",T),r.splice(n,1),n--;else{l=void 0;break}}}}if(!(!c||r.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(d=>d.type===7&&!t.directiveTransforms[d.name])&&e.tag!=="template")))for(let d=0;d<r.length;d++){const m=r[d];if(Ib(m)||m.type===8){const n=[];(m.type!==2||m.content!==" ")&&n.push(m),!t.ssr&&jc(m,t)===0&&n.push(1+""),r[d]={type:12,content:m,loc:m.loc,codegenNode:bo(t.helper(Y3),n)}}}}},t5=new WeakSet,YD=(e,t)=>{if(e.type===1&&zc(e,"once",!0))return t5.has(e)||t.inVOnce?void 0:(t5.add(e),t.inVOnce=!0,t.helper(pv),()=>{t.inVOnce=!1;const r=t.currentNode;r.codegenNode&&(r.codegenNode=t.cache(r.codegenNode,!0))})},SM=(e,t,r)=>{const{exp:l,arg:c}=e;if(!l)return r.onError(Gs(41,e.loc)),Ly();const d=l.loc.source,m=l.type===4?l.content:d,n=r.bindingMetadata[d];if(n==="props"||n==="props-aliased")return r.onError(Gs(44,l.loc)),Ly();const T=!1;if(!m.trim()||!oM(m)&&!T)return r.onError(Gs(42,l.loc)),Ly();const V=c||dr("modelValue",!0),Q=c?wl(c)?`onUpdate:${c.content}`:ph(['"onUpdate:" + ',c]):"onUpdate:modelValue";let z;const W=r.isTS?"($event: any)":"$event";z=ph([`${W} => ((`,l,") = $event)"]);const K=[to(V,e.exp),to(Q,z)];if(e.modifiers.length&&t.tagType===1){const I=e.modifiers.map($=>(rT($)?$:JSON.stringify($))+": true").join(", "),O=c?wl(c)?`${c.content}Modifiers`:ph([c,' + "Modifiers"']):"modelModifiers";K.push(to(O,dr(`{ ${I} }`,!1,e.loc,2)))}return Ly(K)};function Ly(e=[]){return{props:e}}const XD=/[\w).+\-_$\]]/,qD=(e,t)=>{Af("COMPILER_FILTER",t)&&(e.type===5&&vv(e.content,t),e.type===1&&e.props.forEach(r=>{r.type===7&&r.name!=="for"&&r.exp&&vv(r.exp,t)}))};function vv(e,t){if(e.type===4)i5(e,t);else for(let r=0;r<e.children.length;r++){const l=e.children[r];typeof l=="object"&&(l.type===4?i5(l,t):l.type===8?vv(e,t):l.type===5&&vv(l.content,t))}}function i5(e,t){const r=e.content;let l=!1,c=!1,d=!1,m=!1,n=0,T=0,V=0,Q=0,z,W,K,I,O=[];for(K=0;K<r.length;K++)if(W=z,z=r.charCodeAt(K),l)z===39&&W!==92&&(l=!1);else if(c)z===34&&W!==92&&(c=!1);else if(d)z===96&&W!==92&&(d=!1);else if(m)z===47&&W!==92&&(m=!1);else if(z===124&&r.charCodeAt(K+1)!==124&&r.charCodeAt(K-1)!==124&&!n&&!T&&!V)I===void 0?(Q=K+1,I=r.slice(0,K).trim()):$();else{switch(z){case 34:c=!0;break;case 39:l=!0;break;case 96:d=!0;break;case 40:V++;break;case 41:V--;break;case 91:T++;break;case 93:T--;break;case 123:n++;break;case 125:n--;break}if(z===47){let M=K-1,S;for(;M>=0&&(S=r.charAt(M),S===" ");M--);(!S||!XD.test(S))&&(m=!0)}}I===void 0?I=r.slice(0,K).trim():Q!==0&&$();function $(){O.push(r.slice(Q,K).trim()),Q=K+1}if(O.length){for(K=0;K<O.length;K++)I=ZD(I,O[K],t);e.content=I}}function ZD(e,t,r){r.helper(Z3);const l=t.indexOf("(");if(l<0)return r.filters.add(t),`${P1(t,"filter")}(${e})`;{const c=t.slice(0,l),d=t.slice(l+1);return r.filters.add(c),`${P1(c,"filter")}(${e}${d!==")"?","+d:d}`}}const n5=new WeakSet,KD=(e,t)=>{if(e.type===1){const r=zc(e,"memo");return!r||n5.has(e)?void 0:(n5.add(e),()=>{const l=e.codegenNode||t.currentNode.codegenNode;l&&l.type===13&&(e.tagType!==1&&sT(l,t),e.codegenNode=bo(t.helper(nT),[r.exp,gm(void 0,l),"_cache",String(t.cached++)]))})}};function JD(e){return[[YD,SD,KD,MD,qD,GD,RD,ID,WD],{on:TM,bind:HD,model:SM}]}function QD(e,t={}){const r=t.onError||V3,l=t.mode==="module";t.prefixIdentifiers===!0?r(Gs(47)):l&&r(Gs(48));const c=!1;t.cacheHandlers&&r(Gs(49)),t.scopeId&&!l&&r(Gs(50));const d=ir(e)?HP(e,t):e,[m,n]=JD();return sD(d,Jr({},t,{prefixIdentifiers:c,nodeTransforms:[...m,...t.nodeTransforms||[]],directiveTransforms:Jr({},n,t.directiveTransforms||{})})),cD(d,Jr({},t,{prefixIdentifiers:c}))}const eI=()=>({props:[]}),EM=Symbol(""),CM=Symbol(""),MM=Symbol(""),AM=Symbol(""),Aw=Symbol(""),kM=Symbol(""),PM=Symbol(""),DM=Symbol(""),IM=Symbol(""),LM=Symbol("");PP({[EM]:"vModelRadio",[CM]:"vModelCheckbox",[MM]:"vModelText",[AM]:"vModelSelect",[Aw]:"vModelDynamic",[kM]:"withModifiers",[PM]:"withKeys",[DM]:"vShow",[IM]:"Transition",[LM]:"TransitionGroup"});let X0;function tI(e,t=!1){return X0||(X0=document.createElement("div")),t?(X0.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,X0.children[0].getAttribute("foo")):(X0.innerHTML=e,X0.textContent)}const iI=El("style,iframe,script,noscript",!0),nI={isVoidTag:f6,isNativeTag:e=>u6(e)||p6(e),isPreTag:e=>e==="pre",decodeEntities:tI,isBuiltInComponent:e=>{if(K0(e,"Transition"))return IM;if(K0(e,"TransitionGroup"))return LM},getNamespace(e,t){let r=t?t.ns:0;if(t&&r===2)if(t.tag==="annotation-xml"){if(e==="svg")return 1;t.props.some(l=>l.type===6&&l.name==="encoding"&&l.value!=null&&(l.value.content==="text/html"||l.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&e!=="mglyph"&&e!=="malignmark"&&(r=0);else t&&r===1&&(t.tag==="foreignObject"||t.tag==="desc"||t.tag==="title")&&(r=0);if(r===0){if(e==="svg")return 1;if(e==="math")return 2}return r},getTextMode({tag:e,ns:t}){if(t===0){if(e==="textarea"||e==="title")return 1;if(iI(e))return 2}return 0}},rI=e=>{e.type===1&&e.props.forEach((t,r)=>{t.type===6&&t.name==="style"&&t.value&&(e.props[r]={type:7,name:"bind",arg:dr("style",!0,t.loc),exp:sI(t.value.content,t.loc),modifiers:[],loc:t.loc})})},sI=(e,t)=>{const r=eE(e);return dr(JSON.stringify(r),!1,t,3)};function Yd(e,t){return Gs(e,t)}const oI=(e,t,r)=>{const{exp:l,loc:c}=e;return l||r.onError(Yd(51,c)),t.children.length&&(r.onError(Yd(52,c)),t.children.length=0),{props:[to(dr("innerHTML",!0,c),l||dr("",!0))]}},aI=(e,t,r)=>{const{exp:l,loc:c}=e;return l||r.onError(Yd(53,c)),t.children.length&&(r.onError(Yd(54,c)),t.children.length=0),{props:[to(dr("textContent",!0),l?jc(l,r)>0?l:bo(r.helperString(lx),[l],c):dr("",!0))]}},lI=(e,t,r)=>{const l=SM(e,t,r);if(!l.props.length||t.tagType===1)return l;e.arg&&r.onError(Yd(56,e.arg.loc));const{tag:c}=t,d=r.isCustomElement(c);if(c==="input"||c==="textarea"||c==="select"||d){let m=MM,n=!1;if(c==="input"||d){const T=cx(t,"type");if(T){if(T.type===7)m=Aw;else if(T.value)switch(T.value.content){case"radio":m=EM;break;case"checkbox":m=CM;break;case"file":n=!0,r.onError(Yd(57,e.loc));break}}else FP(t)&&(m=Aw)}else c==="select"&&(m=AM);n||(l.needRuntime=r.helper(m))}else r.onError(Yd(55,e.loc));return l.props=l.props.filter(m=>!(m.key.type===4&&m.key.content==="modelValue")),l},cI=El("passive,once,capture"),hI=El("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),dI=El("left,right"),OM=El("onkeyup,onkeydown,onkeypress",!0),uI=(e,t,r,l)=>{const c=[],d=[],m=[];for(let n=0;n<t.length;n++){const T=t[n];T==="native"&&D1("COMPILER_V_ON_NATIVE",r)||cI(T)?m.push(T):dI(T)?wl(e)?OM(e.content)?c.push(T):d.push(T):(c.push(T),d.push(T)):hI(T)?d.push(T):c.push(T)}return{keyModifiers:c,nonKeyModifiers:d,eventOptionModifiers:m}},r5=(e,t)=>wl(e)&&e.content.toLowerCase()==="onclick"?dr(t,!0):e.type!==4?ph(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,pI=(e,t,r)=>TM(e,t,r,l=>{const{modifiers:c}=e;if(!c.length)return l;let{key:d,value:m}=l.props[0];const{keyModifiers:n,nonKeyModifiers:T,eventOptionModifiers:V}=uI(d,c,r,e.loc);if(T.includes("right")&&(d=r5(d,"onContextmenu")),T.includes("middle")&&(d=r5(d,"onMouseup")),T.length&&(m=bo(r.helper(kM),[m,JSON.stringify(T)])),n.length&&(!wl(d)||OM(d.content))&&(m=bo(r.helper(PM),[m,JSON.stringify(n)])),V.length){const Q=V.map(fp).join("");d=wl(d)?dr(`${d.content}${Q}`,!0):ph(["(",d,`) + "${Q}"`])}return{props:[to(d,m)]}}),fI=(e,t,r)=>{const{exp:l,loc:c}=e;return l||r.onError(Yd(59,c)),{props:[],needRuntime:r.helper(DM)}},mI=(e,t)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&(t.onError(Yd(61,e.loc)),t.removeNode())},gI=[rI],_I={cloak:eI,html:oI,text:aI,model:lI,on:pI,show:fI};function yI(e,t={}){return QD(e,Jr({},nI,t,{nodeTransforms:[mI,...gI,...t.nodeTransforms||[]],directiveTransforms:Jr({},_I,t.directiveTransforms||{}),transformHoist:null}))}const s5=Object.create(null);function RM(e,t){if(!ir(e))if(e.nodeType)e=e.innerHTML;else return Ka;const r=e,l=s5[r];if(l)return l;if(e[0]==="#"){const n=document.querySelector(e);e=n?n.innerHTML:""}const c=Jr({hoistStatic:!0,onError:void 0,onWarn:Ka},t);!c.isCustomElement&&typeof customElements<"u"&&(c.isCustomElement=n=>!!customElements.get(n));const{code:d}=yI(e,c),m=new Function("Vue",d)(SP);return m._rc=!0,s5[r]=m}I3(RM);const vI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Qv,Comment:fa,EffectScope:Nv,Fragment:Pr,KeepAlive:$E,ReactiveEffect:wm,Static:ep,Suspense:zE,Teleport:sC,Text:lp,Transition:$1,TransitionGroup:jC,VueElement:V1,callWithAsyncErrorHandling:Tl,callWithErrorHandling:Qh,camelize:ea,capitalize:fp,cloneVNode:mh,compatUtils:PC,compile:RM,computed:Mm,createApp:G3,createBlock:fh,createCommentVNode:yr,createElementBlock:Fi,createElementVNode:mt,createHydrationRenderer:k3,createPropsRestProxy:SC,createRenderer:A3,createSSRApp:XC,createSlots:XE,createStaticVNode:id,createTextVNode:gh,createVNode:Ji,customRef:ME,defineAsyncComponent:VE,defineComponent:ex,defineCustomElement:N3,defineEmits:yC,defineExpose:vC,defineProps:_C,defineSSRCustomElement:DC,get devtools(){return yf},effect:dE,effectScope:sE,getCurrentInstance:iu,getCurrentScope:aE,getTransitionRawChildren:U1,guardReactiveProps:C1,h:xl,handleError:mp,hydrate:U3,initCustomFormatter:CC,initDirectivesForSSR:ZC,inject:Cf,isMemoSame:B3,isProxy:$v,isReactive:Qu,isReadonly:op,isRef:Bo,isRuntimeOnly:fC,isShallow:dm,isVNode:Kd,markRaw:Hv,mergeDefaults:TC,mergeProps:sx,nextTick:Em,normalizeClass:Us,normalizeProps:iv,normalizeStyle:Rf,onActivated:_3,onBeforeMount:v3,onBeforeUnmount:Uf,onBeforeUpdate:ix,onDeactivated:y3,onErrorCaptured:T3,onMounted:td,onRenderTracked:w3,onRenderTriggered:b3,onScopeDispose:lE,onServerPrefetch:x3,onUnmounted:Gf,onUpdated:jf,openBlock:ki,popScopeId:Ff,provide:Cm,proxyRefs:Yv,pushScopeId:Nf,queuePostFlushCb:qv,reactive:F1,readonly:Gv,ref:Zs,registerRuntimeCompiler:I3,render:cv,renderList:pa,renderSlot:hh,resolveComponent:ar,resolveDirective:nx,resolveDynamicComponent:YE,resolveFilter:kC,resolveTransitionHooks:Df,setBlockTracking:av,setDevtoolsHook:p3,setTransitionHooks:ap,shallowReactive:l3,shallowReadonly:TE,shallowRef:SE,ssrContextKey:O3,ssrUtils:AC,stop:uE,toDisplayString:Bn,toHandlerKey:Sf,toHandlers:ZE,toRaw:Rr,toRef:d3,toRefs:AE,transformVNodeArgs:cC,triggerRef:CE,unref:xo,useAttrs:L3,useCssModule:IC,useCssVars:LC,useSSRContext:R3,useSlots:bC,useTransitionState:Jv,vModelCheckbox:pm,vModelDynamic:F3,vModelRadio:ax,vModelSelect:Vd,vModelText:Jd,vShow:j3,version:z3,warn:PE,watch:Uc,watchEffect:FE,watchPostEffect:g3,watchSyncEffect:jE,withAsyncContext:EC,withCtx:js,withDefaults:xC,withDirectives:Pa,withKeys:$C,withMemo:MC,withModifiers:VC,withScopeId:RE},Symbol.toStringTag,{value:"Module"}));//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var BM;function tn(){return BM.apply(null,arguments)}function xI(e){BM=e}function _h(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function kf(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Xr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function lT(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Xr(e,t))return!1;return!0}function yl(e){return e===void 0}function Qd(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function q1(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function zM(e,t){var r=[],l,c=e.length;for(l=0;l<c;++l)r.push(t(e[l],l));return r}function Xu(e,t){for(var r in t)Xr(t,r)&&(e[r]=t[r]);return Xr(t,"toString")&&(e.toString=t.toString),Xr(t,"valueOf")&&(e.valueOf=t.valueOf),e}function nd(e,t,r,l){return a8(e,t,r,l,!0).utc()}function bI(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function tr(e){return e._pf==null&&(e._pf=bI()),e._pf}var kw;Array.prototype.some?kw=Array.prototype.some:kw=function(e){var t=Object(this),r=t.length>>>0,l;for(l=0;l<r;l++)if(l in t&&e.call(this,t[l],l,t))return!0;return!1};function cT(e){if(e._isValid==null){var t=tr(e),r=kw.call(t.parsedDateParts,function(c){return c!=null}),l=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(l=l&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=l;else return l}return e._isValid}function px(e){var t=nd(NaN);return e!=null?Xu(tr(t),e):tr(t).userInvalidated=!0,t}var o5=tn.momentProperties=[],Ob=!1;function hT(e,t){var r,l,c,d=o5.length;if(yl(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),yl(t._i)||(e._i=t._i),yl(t._f)||(e._f=t._f),yl(t._l)||(e._l=t._l),yl(t._strict)||(e._strict=t._strict),yl(t._tzm)||(e._tzm=t._tzm),yl(t._isUTC)||(e._isUTC=t._isUTC),yl(t._offset)||(e._offset=t._offset),yl(t._pf)||(e._pf=tr(t)),yl(t._locale)||(e._locale=t._locale),d>0)for(r=0;r<d;r++)l=o5[r],c=t[l],yl(c)||(e[l]=c);return e}function Z1(e){hT(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Ob===!1&&(Ob=!0,tn.updateOffset(this),Ob=!1)}function yh(e){return e instanceof Z1||e!=null&&e._isAMomentObject!=null}function NM(e){tn.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Vc(e,t){var r=!0;return Xu(function(){if(tn.deprecationHandler!=null&&tn.deprecationHandler(null,e),r){var l=[],c,d,m,n=arguments.length;for(d=0;d<n;d++){if(c="",typeof arguments[d]=="object"){c+=`
[`+d+"] ";for(m in arguments[0])Xr(arguments[0],m)&&(c+=m+": "+arguments[0][m]+", ");c=c.slice(0,-2)}else c=arguments[d];l.push(c)}NM(e+`
Arguments: `+Array.prototype.slice.call(l).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var a5={};function FM(e,t){tn.deprecationHandler!=null&&tn.deprecationHandler(e,t),a5[e]||(NM(t),a5[e]=!0)}tn.suppressDeprecationWarnings=!1;tn.deprecationHandler=null;function rd(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function wI(e){var t,r;for(r in e)Xr(e,r)&&(t=e[r],rd(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Pw(e,t){var r=Xu({},e),l;for(l in t)Xr(t,l)&&(kf(e[l])&&kf(t[l])?(r[l]={},Xu(r[l],e[l]),Xu(r[l],t[l])):t[l]!=null?r[l]=t[l]:delete r[l]);for(l in e)Xr(e,l)&&!Xr(t,l)&&kf(e[l])&&(r[l]=Xu({},r[l]));return r}function dT(e){e!=null&&this.set(e)}var Dw;Object.keys?Dw=Object.keys:Dw=function(e){var t,r=[];for(t in e)Xr(e,t)&&r.push(t);return r};var TI={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function SI(e,t,r){var l=this._calendar[e]||this._calendar.sameElse;return rd(l)?l.call(t,r):l}function ed(e,t,r){var l=""+Math.abs(e),c=t-l.length,d=e>=0;return(d?r?"+":"":"-")+Math.pow(10,Math.max(0,c)).toString().substr(1)+l}var uT=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oy=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rb={},rm={};function Mn(e,t,r,l){var c=l;typeof l=="string"&&(c=function(){return this[l]()}),e&&(rm[e]=c),t&&(rm[t[0]]=function(){return ed(c.apply(this,arguments),t[1],t[2])}),r&&(rm[r]=function(){return this.localeData().ordinal(c.apply(this,arguments),e)})}function EI(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function CI(e){var t=e.match(uT),r,l;for(r=0,l=t.length;r<l;r++)rm[t[r]]?t[r]=rm[t[r]]:t[r]=EI(t[r]);return function(c){var d="",m;for(m=0;m<l;m++)d+=rd(t[m])?t[m].call(c,e):t[m];return d}}function Xy(e,t){return e.isValid()?(t=jM(t,e.localeData()),Rb[t]=Rb[t]||CI(t),Rb[t](e)):e.localeData().invalidDate()}function jM(e,t){var r=5;function l(c){return t.longDateFormat(c)||c}for(Oy.lastIndex=0;r>=0&&Oy.test(e);)e=e.replace(Oy,l),Oy.lastIndex=0,r-=1;return e}var MI={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function AI(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(uT).map(function(l){return l==="MMMM"||l==="MM"||l==="DD"||l==="dddd"?l.slice(1):l}).join(""),this._longDateFormat[e])}var kI="Invalid date";function PI(){return this._invalidDate}var DI="%d",II=/\d{1,2}/;function LI(e){return this._ordinal.replace("%d",e)}var OI={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function RI(e,t,r,l){var c=this._relativeTime[r];return rd(c)?c(e,t,r,l):c.replace(/%d/i,e)}function BI(e,t){var r=this._relativeTime[e>0?"future":"past"];return rd(r)?r(t):r.replace(/%s/i,t)}var y1={};function Oa(e,t){var r=e.toLowerCase();y1[r]=y1[r+"s"]=y1[t]=e}function $c(e){return typeof e=="string"?y1[e]||y1[e.toLowerCase()]:void 0}function pT(e){var t={},r,l;for(l in e)Xr(e,l)&&(r=$c(l),r&&(t[r]=e[l]));return t}var UM={};function Ra(e,t){UM[e]=t}function zI(e){var t=[],r;for(r in e)Xr(e,r)&&t.push({unit:r,priority:UM[r]});return t.sort(function(l,c){return l.priority-c.priority}),t}function fx(e){return e%4===0&&e%100!==0||e%400===0}function Nc(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function vr(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=Nc(t)),r}function Am(e,t){return function(r){return r!=null?(GM(this,e,r),tn.updateOffset(this,t),this):xv(this,e)}}function xv(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function GM(e,t,r){e.isValid()&&!isNaN(r)&&(t==="FullYear"&&fx(e.year())&&e.month()===1&&e.date()===29?(r=vr(r),e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),xx(r,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function NI(e){return e=$c(e),rd(this[e])?this[e]():this}function FI(e,t){if(typeof e=="object"){e=pT(e);var r=zI(e),l,c=r.length;for(l=0;l<c;l++)this[r[l].unit](e[r[l].unit])}else if(e=$c(e),rd(this[e]))return this[e](t);return this}var VM=/\d/,hc=/\d\d/,$M=/\d{3}/,fT=/\d{4}/,mx=/[+-]?\d{6}/,Is=/\d\d?/,HM=/\d\d\d\d?/,WM=/\d\d\d\d\d\d?/,gx=/\d{1,3}/,mT=/\d{1,4}/,_x=/[+-]?\d{1,6}/,km=/\d+/,yx=/[+-]?\d+/,jI=/Z|[+-]\d\d:?\d\d/gi,vx=/Z|[+-]\d\d(?::?\d\d)?/gi,UI=/[+-]?\d+(\.\d{1,3})?/,K1=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,bv;bv={};function ln(e,t,r){bv[e]=rd(t)?t:function(l,c){return l&&r?r:t}}function GI(e,t){return Xr(bv,e)?bv[e](t._strict,t._locale):new RegExp(VI(e))}function VI(e){return sc(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,l,c,d){return r||l||c||d}))}function sc(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Iw={};function us(e,t){var r,l=t,c;for(typeof e=="string"&&(e=[e]),Qd(t)&&(l=function(d,m){m[t]=vr(d)}),c=e.length,r=0;r<c;r++)Iw[e[r]]=l}function J1(e,t){us(e,function(r,l,c,d){c._w=c._w||{},t(r,c._w,c,d)})}function $I(e,t,r){t!=null&&Xr(Iw,e)&&Iw[e](t,r._a,r,e)}var La=0,$d=1,Zh=2,zo=3,uh=4,Hd=5,wf=6,HI=7,WI=8;function YI(e,t){return(e%t+t)%t}var ho;Array.prototype.indexOf?ho=Array.prototype.indexOf:ho=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function xx(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=YI(t,12);return e+=(t-r)/12,r===1?fx(e)?29:28:31-r%7%2}Mn("M",["MM",2],"Mo",function(){return this.month()+1});Mn("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Mn("MMMM",0,0,function(e){return this.localeData().months(this,e)});Oa("month","M");Ra("month",8);ln("M",Is);ln("MM",Is,hc);ln("MMM",function(e,t){return t.monthsShortRegex(e)});ln("MMMM",function(e,t){return t.monthsRegex(e)});us(["M","MM"],function(e,t){t[$d]=vr(e)-1});us(["MMM","MMMM"],function(e,t,r,l){var c=r._locale.monthsParse(e,l,r._strict);c!=null?t[$d]=c:tr(r).invalidMonth=e});var XI="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),YM="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),XM=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,qI=K1,ZI=K1;function KI(e,t){return e?_h(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||XM).test(t)?"format":"standalone"][e.month()]:_h(this._months)?this._months:this._months.standalone}function JI(e,t){return e?_h(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[XM.test(t)?"format":"standalone"][e.month()]:_h(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function QI(e,t,r){var l,c,d,m=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],l=0;l<12;++l)d=nd([2e3,l]),this._shortMonthsParse[l]=this.monthsShort(d,"").toLocaleLowerCase(),this._longMonthsParse[l]=this.months(d,"").toLocaleLowerCase();return r?t==="MMM"?(c=ho.call(this._shortMonthsParse,m),c!==-1?c:null):(c=ho.call(this._longMonthsParse,m),c!==-1?c:null):t==="MMM"?(c=ho.call(this._shortMonthsParse,m),c!==-1?c:(c=ho.call(this._longMonthsParse,m),c!==-1?c:null)):(c=ho.call(this._longMonthsParse,m),c!==-1?c:(c=ho.call(this._shortMonthsParse,m),c!==-1?c:null))}function eL(e,t,r){var l,c,d;if(this._monthsParseExact)return QI.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),l=0;l<12;l++){if(c=nd([2e3,l]),r&&!this._longMonthsParse[l]&&(this._longMonthsParse[l]=new RegExp("^"+this.months(c,"").replace(".","")+"$","i"),this._shortMonthsParse[l]=new RegExp("^"+this.monthsShort(c,"").replace(".","")+"$","i")),!r&&!this._monthsParse[l]&&(d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[l]=new RegExp(d.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[l].test(e))return l;if(r&&t==="MMM"&&this._shortMonthsParse[l].test(e))return l;if(!r&&this._monthsParse[l].test(e))return l}}function qM(e,t){var r;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=vr(t);else if(t=e.localeData().monthsParse(t),!Qd(t))return e}return r=Math.min(e.date(),xx(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function ZM(e){return e!=null?(qM(this,e),tn.updateOffset(this,!0),this):xv(this,"Month")}function tL(){return xx(this.year(),this.month())}function iL(e){return this._monthsParseExact?(Xr(this,"_monthsRegex")||KM.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Xr(this,"_monthsShortRegex")||(this._monthsShortRegex=qI),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function nL(e){return this._monthsParseExact?(Xr(this,"_monthsRegex")||KM.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Xr(this,"_monthsRegex")||(this._monthsRegex=ZI),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function KM(){function e(m,n){return n.length-m.length}var t=[],r=[],l=[],c,d;for(c=0;c<12;c++)d=nd([2e3,c]),t.push(this.monthsShort(d,"")),r.push(this.months(d,"")),l.push(this.months(d,"")),l.push(this.monthsShort(d,""));for(t.sort(e),r.sort(e),l.sort(e),c=0;c<12;c++)t[c]=sc(t[c]),r[c]=sc(r[c]);for(c=0;c<24;c++)l[c]=sc(l[c]);this._monthsRegex=new RegExp("^("+l.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}Mn("Y",0,0,function(){var e=this.year();return e<=9999?ed(e,4):"+"+e});Mn(0,["YY",2],0,function(){return this.year()%100});Mn(0,["YYYY",4],0,"year");Mn(0,["YYYYY",5],0,"year");Mn(0,["YYYYYY",6,!0],0,"year");Oa("year","y");Ra("year",1);ln("Y",yx);ln("YY",Is,hc);ln("YYYY",mT,fT);ln("YYYYY",_x,mx);ln("YYYYYY",_x,mx);us(["YYYYY","YYYYYY"],La);us("YYYY",function(e,t){t[La]=e.length===2?tn.parseTwoDigitYear(e):vr(e)});us("YY",function(e,t){t[La]=tn.parseTwoDigitYear(e)});us("Y",function(e,t){t[La]=parseInt(e,10)});function v1(e){return fx(e)?366:365}tn.parseTwoDigitYear=function(e){return vr(e)+(vr(e)>68?1900:2e3)};var JM=Am("FullYear",!0);function rL(){return fx(this.year())}function sL(e,t,r,l,c,d,m){var n;return e<100&&e>=0?(n=new Date(e+400,t,r,l,c,d,m),isFinite(n.getFullYear())&&n.setFullYear(e)):n=new Date(e,t,r,l,c,d,m),n}function L1(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function wv(e,t,r){var l=7+t-r,c=(7+L1(e,0,l).getUTCDay()-t)%7;return-c+l-1}function QM(e,t,r,l,c){var d=(7+r-l)%7,m=wv(e,l,c),n=1+7*(t-1)+d+m,T,V;return n<=0?(T=e-1,V=v1(T)+n):n>v1(e)?(T=e+1,V=n-v1(e)):(T=e,V=n),{year:T,dayOfYear:V}}function O1(e,t,r){var l=wv(e.year(),t,r),c=Math.floor((e.dayOfYear()-l-1)/7)+1,d,m;return c<1?(m=e.year()-1,d=c+Xd(m,t,r)):c>Xd(e.year(),t,r)?(d=c-Xd(e.year(),t,r),m=e.year()+1):(m=e.year(),d=c),{week:d,year:m}}function Xd(e,t,r){var l=wv(e,t,r),c=wv(e+1,t,r);return(v1(e)-l+c)/7}Mn("w",["ww",2],"wo","week");Mn("W",["WW",2],"Wo","isoWeek");Oa("week","w");Oa("isoWeek","W");Ra("week",5);Ra("isoWeek",5);ln("w",Is);ln("ww",Is,hc);ln("W",Is);ln("WW",Is,hc);J1(["w","ww","W","WW"],function(e,t,r,l){t[l.substr(0,1)]=vr(e)});function oL(e){return O1(e,this._week.dow,this._week.doy).week}var aL={dow:0,doy:6};function lL(){return this._week.dow}function cL(){return this._week.doy}function hL(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function dL(e){var t=O1(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Mn("d",0,"do","day");Mn("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Mn("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Mn("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Mn("e",0,0,"weekday");Mn("E",0,0,"isoWeekday");Oa("day","d");Oa("weekday","e");Oa("isoWeekday","E");Ra("day",11);Ra("weekday",11);Ra("isoWeekday",11);ln("d",Is);ln("e",Is);ln("E",Is);ln("dd",function(e,t){return t.weekdaysMinRegex(e)});ln("ddd",function(e,t){return t.weekdaysShortRegex(e)});ln("dddd",function(e,t){return t.weekdaysRegex(e)});J1(["dd","ddd","dddd"],function(e,t,r,l){var c=r._locale.weekdaysParse(e,l,r._strict);c!=null?t.d=c:tr(r).invalidWeekday=e});J1(["d","e","E"],function(e,t,r,l){t[l]=vr(e)});function uL(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function pL(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function gT(e,t){return e.slice(t,7).concat(e.slice(0,t))}var fL="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),e8="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),mL="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),gL=K1,_L=K1,yL=K1;function vL(e,t){var r=_h(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?gT(r,this._week.dow):e?r[e.day()]:r}function xL(e){return e===!0?gT(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function bL(e){return e===!0?gT(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function wL(e,t,r){var l,c,d,m=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],l=0;l<7;++l)d=nd([2e3,1]).day(l),this._minWeekdaysParse[l]=this.weekdaysMin(d,"").toLocaleLowerCase(),this._shortWeekdaysParse[l]=this.weekdaysShort(d,"").toLocaleLowerCase(),this._weekdaysParse[l]=this.weekdays(d,"").toLocaleLowerCase();return r?t==="dddd"?(c=ho.call(this._weekdaysParse,m),c!==-1?c:null):t==="ddd"?(c=ho.call(this._shortWeekdaysParse,m),c!==-1?c:null):(c=ho.call(this._minWeekdaysParse,m),c!==-1?c:null):t==="dddd"?(c=ho.call(this._weekdaysParse,m),c!==-1||(c=ho.call(this._shortWeekdaysParse,m),c!==-1)?c:(c=ho.call(this._minWeekdaysParse,m),c!==-1?c:null)):t==="ddd"?(c=ho.call(this._shortWeekdaysParse,m),c!==-1||(c=ho.call(this._weekdaysParse,m),c!==-1)?c:(c=ho.call(this._minWeekdaysParse,m),c!==-1?c:null)):(c=ho.call(this._minWeekdaysParse,m),c!==-1||(c=ho.call(this._weekdaysParse,m),c!==-1)?c:(c=ho.call(this._shortWeekdaysParse,m),c!==-1?c:null))}function TL(e,t,r){var l,c,d;if(this._weekdaysParseExact)return wL.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),l=0;l<7;l++){if(c=nd([2e3,1]).day(l),r&&!this._fullWeekdaysParse[l]&&(this._fullWeekdaysParse[l]=new RegExp("^"+this.weekdays(c,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[l]=new RegExp("^"+this.weekdaysShort(c,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[l]=new RegExp("^"+this.weekdaysMin(c,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[l]||(d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[l]=new RegExp(d.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[l].test(e))return l;if(r&&t==="ddd"&&this._shortWeekdaysParse[l].test(e))return l;if(r&&t==="dd"&&this._minWeekdaysParse[l].test(e))return l;if(!r&&this._weekdaysParse[l].test(e))return l}}function SL(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=uL(e,this.localeData()),this.add(e-t,"d")):t}function EL(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function CL(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=pL(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function ML(e){return this._weekdaysParseExact?(Xr(this,"_weekdaysRegex")||_T.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Xr(this,"_weekdaysRegex")||(this._weekdaysRegex=gL),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function AL(e){return this._weekdaysParseExact?(Xr(this,"_weekdaysRegex")||_T.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Xr(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=_L),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function kL(e){return this._weekdaysParseExact?(Xr(this,"_weekdaysRegex")||_T.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Xr(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=yL),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function _T(){function e(Q,z){return z.length-Q.length}var t=[],r=[],l=[],c=[],d,m,n,T,V;for(d=0;d<7;d++)m=nd([2e3,1]).day(d),n=sc(this.weekdaysMin(m,"")),T=sc(this.weekdaysShort(m,"")),V=sc(this.weekdays(m,"")),t.push(n),r.push(T),l.push(V),c.push(n),c.push(T),c.push(V);t.sort(e),r.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function yT(){return this.hours()%12||12}function PL(){return this.hours()||24}Mn("H",["HH",2],0,"hour");Mn("h",["hh",2],0,yT);Mn("k",["kk",2],0,PL);Mn("hmm",0,0,function(){return""+yT.apply(this)+ed(this.minutes(),2)});Mn("hmmss",0,0,function(){return""+yT.apply(this)+ed(this.minutes(),2)+ed(this.seconds(),2)});Mn("Hmm",0,0,function(){return""+this.hours()+ed(this.minutes(),2)});Mn("Hmmss",0,0,function(){return""+this.hours()+ed(this.minutes(),2)+ed(this.seconds(),2)});function t8(e,t){Mn(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}t8("a",!0);t8("A",!1);Oa("hour","h");Ra("hour",13);function i8(e,t){return t._meridiemParse}ln("a",i8);ln("A",i8);ln("H",Is);ln("h",Is);ln("k",Is);ln("HH",Is,hc);ln("hh",Is,hc);ln("kk",Is,hc);ln("hmm",HM);ln("hmmss",WM);ln("Hmm",HM);ln("Hmmss",WM);us(["H","HH"],zo);us(["k","kk"],function(e,t,r){var l=vr(e);t[zo]=l===24?0:l});us(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});us(["h","hh"],function(e,t,r){t[zo]=vr(e),tr(r).bigHour=!0});us("hmm",function(e,t,r){var l=e.length-2;t[zo]=vr(e.substr(0,l)),t[uh]=vr(e.substr(l)),tr(r).bigHour=!0});us("hmmss",function(e,t,r){var l=e.length-4,c=e.length-2;t[zo]=vr(e.substr(0,l)),t[uh]=vr(e.substr(l,2)),t[Hd]=vr(e.substr(c)),tr(r).bigHour=!0});us("Hmm",function(e,t,r){var l=e.length-2;t[zo]=vr(e.substr(0,l)),t[uh]=vr(e.substr(l))});us("Hmmss",function(e,t,r){var l=e.length-4,c=e.length-2;t[zo]=vr(e.substr(0,l)),t[uh]=vr(e.substr(l,2)),t[Hd]=vr(e.substr(c))});function DL(e){return(e+"").toLowerCase().charAt(0)==="p"}var IL=/[ap]\.?m?\.?/i,LL=Am("Hours",!0);function OL(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var n8={calendar:TI,longDateFormat:MI,invalidDate:kI,ordinal:DI,dayOfMonthOrdinalParse:II,relativeTime:OI,months:XI,monthsShort:YM,week:aL,weekdays:fL,weekdaysMin:mL,weekdaysShort:e8,meridiemParse:IL},Fs={},l1={},R1;function RL(e,t){var r,l=Math.min(e.length,t.length);for(r=0;r<l;r+=1)if(e[r]!==t[r])return r;return l}function l5(e){return e&&e.toLowerCase().replace("_","-")}function BL(e){for(var t=0,r,l,c,d;t<e.length;){for(d=l5(e[t]).split("-"),r=d.length,l=l5(e[t+1]),l=l?l.split("-"):null;r>0;){if(c=bx(d.slice(0,r).join("-")),c)return c;if(l&&l.length>=r&&RL(d,l)>=r-1)break;r--}t++}return R1}function zL(e){return e.match("^[^/\\\\]*$")!=null}function bx(e){var t=null,r;if(Fs[e]===void 0&&typeof Qy<"u"&&Qy&&Qy.exports&&zL(e))try{t=R1._abbr,r=require,r("./locale/"+e),ip(t)}catch{Fs[e]=null}return Fs[e]}function ip(e,t){var r;return e&&(yl(t)?r=nu(e):r=vT(e,t),r?R1=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),R1._abbr}function vT(e,t){if(t!==null){var r,l=n8;if(t.abbr=e,Fs[e]!=null)FM("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),l=Fs[e]._config;else if(t.parentLocale!=null)if(Fs[t.parentLocale]!=null)l=Fs[t.parentLocale]._config;else if(r=bx(t.parentLocale),r!=null)l=r._config;else return l1[t.parentLocale]||(l1[t.parentLocale]=[]),l1[t.parentLocale].push({name:e,config:t}),null;return Fs[e]=new dT(Pw(l,t)),l1[e]&&l1[e].forEach(function(c){vT(c.name,c.config)}),ip(e),Fs[e]}else return delete Fs[e],null}function NL(e,t){if(t!=null){var r,l,c=n8;Fs[e]!=null&&Fs[e].parentLocale!=null?Fs[e].set(Pw(Fs[e]._config,t)):(l=bx(e),l!=null&&(c=l._config),t=Pw(c,t),l==null&&(t.abbr=e),r=new dT(t),r.parentLocale=Fs[e],Fs[e]=r),ip(e)}else Fs[e]!=null&&(Fs[e].parentLocale!=null?(Fs[e]=Fs[e].parentLocale,e===ip()&&ip(e)):Fs[e]!=null&&delete Fs[e]);return Fs[e]}function nu(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return R1;if(!_h(e)){if(t=bx(e),t)return t;e=[e]}return BL(e)}function FL(){return Dw(Fs)}function xT(e){var t,r=e._a;return r&&tr(e).overflow===-2&&(t=r[$d]<0||r[$d]>11?$d:r[Zh]<1||r[Zh]>xx(r[La],r[$d])?Zh:r[zo]<0||r[zo]>24||r[zo]===24&&(r[uh]!==0||r[Hd]!==0||r[wf]!==0)?zo:r[uh]<0||r[uh]>59?uh:r[Hd]<0||r[Hd]>59?Hd:r[wf]<0||r[wf]>999?wf:-1,tr(e)._overflowDayOfYear&&(t<La||t>Zh)&&(t=Zh),tr(e)._overflowWeeks&&t===-1&&(t=HI),tr(e)._overflowWeekday&&t===-1&&(t=WI),tr(e).overflow=t),e}var jL=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,UL=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,GL=/Z|[+-]\d\d(?::?\d\d)?/,Ry=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Bb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],VL=/^\/?Date\((-?\d+)/i,$L=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,HL={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function r8(e){var t,r,l=e._i,c=jL.exec(l)||UL.exec(l),d,m,n,T,V=Ry.length,Q=Bb.length;if(c){for(tr(e).iso=!0,t=0,r=V;t<r;t++)if(Ry[t][1].exec(c[1])){m=Ry[t][0],d=Ry[t][2]!==!1;break}if(m==null){e._isValid=!1;return}if(c[3]){for(t=0,r=Q;t<r;t++)if(Bb[t][1].exec(c[3])){n=(c[2]||" ")+Bb[t][0];break}if(n==null){e._isValid=!1;return}}if(!d&&n!=null){e._isValid=!1;return}if(c[4])if(GL.exec(c[4]))T="Z";else{e._isValid=!1;return}e._f=m+(n||"")+(T||""),wT(e)}else e._isValid=!1}function WL(e,t,r,l,c,d){var m=[YL(e),YM.indexOf(t),parseInt(r,10),parseInt(l,10),parseInt(c,10)];return d&&m.push(parseInt(d,10)),m}function YL(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function XL(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function qL(e,t,r){if(e){var l=e8.indexOf(e),c=new Date(t[0],t[1],t[2]).getDay();if(l!==c)return tr(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function ZL(e,t,r){if(e)return HL[e];if(t)return 0;var l=parseInt(r,10),c=l%100,d=(l-c)/100;return d*60+c}function s8(e){var t=$L.exec(XL(e._i)),r;if(t){if(r=WL(t[4],t[3],t[2],t[5],t[6],t[7]),!qL(t[1],r,e))return;e._a=r,e._tzm=ZL(t[8],t[9],t[10]),e._d=L1.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),tr(e).rfc2822=!0}else e._isValid=!1}function KL(e){var t=VL.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(r8(e),e._isValid===!1)delete e._isValid;else return;if(s8(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:tn.createFromInputFallback(e)}tn.createFromInputFallback=Vc("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Z0(e,t,r){return e??t??r}function JL(e){var t=new Date(tn.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function bT(e){var t,r,l=[],c,d,m;if(!e._d){for(c=JL(e),e._w&&e._a[Zh]==null&&e._a[$d]==null&&QL(e),e._dayOfYear!=null&&(m=Z0(e._a[La],c[La]),(e._dayOfYear>v1(m)||e._dayOfYear===0)&&(tr(e)._overflowDayOfYear=!0),r=L1(m,0,e._dayOfYear),e._a[$d]=r.getUTCMonth(),e._a[Zh]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=l[t]=c[t];for(;t<7;t++)e._a[t]=l[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[zo]===24&&e._a[uh]===0&&e._a[Hd]===0&&e._a[wf]===0&&(e._nextDay=!0,e._a[zo]=0),e._d=(e._useUTC?L1:sL).apply(null,l),d=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[zo]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==d&&(tr(e).weekdayMismatch=!0)}}function QL(e){var t,r,l,c,d,m,n,T,V;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(d=1,m=4,r=Z0(t.GG,e._a[La],O1(Ds(),1,4).year),l=Z0(t.W,1),c=Z0(t.E,1),(c<1||c>7)&&(T=!0)):(d=e._locale._week.dow,m=e._locale._week.doy,V=O1(Ds(),d,m),r=Z0(t.gg,e._a[La],V.year),l=Z0(t.w,V.week),t.d!=null?(c=t.d,(c<0||c>6)&&(T=!0)):t.e!=null?(c=t.e+d,(t.e<0||t.e>6)&&(T=!0)):c=d),l<1||l>Xd(r,d,m)?tr(e)._overflowWeeks=!0:T!=null?tr(e)._overflowWeekday=!0:(n=QM(r,l,c,d,m),e._a[La]=n.year,e._dayOfYear=n.dayOfYear)}tn.ISO_8601=function(){};tn.RFC_2822=function(){};function wT(e){if(e._f===tn.ISO_8601){r8(e);return}if(e._f===tn.RFC_2822){s8(e);return}e._a=[],tr(e).empty=!0;var t=""+e._i,r,l,c,d,m,n=t.length,T=0,V,Q;for(c=jM(e._f,e._locale).match(uT)||[],Q=c.length,r=0;r<Q;r++)d=c[r],l=(t.match(GI(d,e))||[])[0],l&&(m=t.substr(0,t.indexOf(l)),m.length>0&&tr(e).unusedInput.push(m),t=t.slice(t.indexOf(l)+l.length),T+=l.length),rm[d]?(l?tr(e).empty=!1:tr(e).unusedTokens.push(d),$I(d,l,e)):e._strict&&!l&&tr(e).unusedTokens.push(d);tr(e).charsLeftOver=n-T,t.length>0&&tr(e).unusedInput.push(t),e._a[zo]<=12&&tr(e).bigHour===!0&&e._a[zo]>0&&(tr(e).bigHour=void 0),tr(e).parsedDateParts=e._a.slice(0),tr(e).meridiem=e._meridiem,e._a[zo]=e9(e._locale,e._a[zo],e._meridiem),V=tr(e).era,V!==null&&(e._a[La]=e._locale.erasConvertYear(V,e._a[La])),bT(e),xT(e)}function e9(e,t,r){var l;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(l=e.isPM(r),l&&t<12&&(t+=12),!l&&t===12&&(t=0)),t)}function t9(e){var t,r,l,c,d,m,n=!1,T=e._f.length;if(T===0){tr(e).invalidFormat=!0,e._d=new Date(NaN);return}for(c=0;c<T;c++)d=0,m=!1,t=hT({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[c],wT(t),cT(t)&&(m=!0),d+=tr(t).charsLeftOver,d+=tr(t).unusedTokens.length*10,tr(t).score=d,n?d<l&&(l=d,r=t):(l==null||d<l||m)&&(l=d,r=t,m&&(n=!0));Xu(e,r||t)}function i9(e){if(!e._d){var t=pT(e._i),r=t.day===void 0?t.date:t.day;e._a=zM([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(l){return l&&parseInt(l,10)}),bT(e)}}function n9(e){var t=new Z1(xT(o8(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function o8(e){var t=e._i,r=e._f;return e._locale=e._locale||nu(e._l),t===null||r===void 0&&t===""?px({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),yh(t)?new Z1(xT(t)):(q1(t)?e._d=t:_h(r)?t9(e):r?wT(e):r9(e),cT(e)||(e._d=null),e))}function r9(e){var t=e._i;yl(t)?e._d=new Date(tn.now()):q1(t)?e._d=new Date(t.valueOf()):typeof t=="string"?KL(e):_h(t)?(e._a=zM(t.slice(0),function(r){return parseInt(r,10)}),bT(e)):kf(t)?i9(e):Qd(t)?e._d=new Date(t):tn.createFromInputFallback(e)}function a8(e,t,r,l,c){var d={};return(t===!0||t===!1)&&(l=t,t=void 0),(r===!0||r===!1)&&(l=r,r=void 0),(kf(e)&&lT(e)||_h(e)&&e.length===0)&&(e=void 0),d._isAMomentObject=!0,d._useUTC=d._isUTC=c,d._l=r,d._i=e,d._f=t,d._strict=l,n9(d)}function Ds(e,t,r,l){return a8(e,t,r,l,!1)}var s9=Vc("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ds.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:px()}),o9=Vc("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ds.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:px()});function l8(e,t){var r,l;if(t.length===1&&_h(t[0])&&(t=t[0]),!t.length)return Ds();for(r=t[0],l=1;l<t.length;++l)(!t[l].isValid()||t[l][e](r))&&(r=t[l]);return r}function a9(){var e=[].slice.call(arguments,0);return l8("isBefore",e)}function l9(){var e=[].slice.call(arguments,0);return l8("isAfter",e)}var c9=function(){return Date.now?Date.now():+new Date},c1=["year","quarter","month","week","day","hour","minute","second","millisecond"];function h9(e){var t,r=!1,l,c=c1.length;for(t in e)if(Xr(e,t)&&!(ho.call(c1,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(l=0;l<c;++l)if(e[c1[l]]){if(r)return!1;parseFloat(e[c1[l]])!==vr(e[c1[l]])&&(r=!0)}return!0}function d9(){return this._isValid}function u9(){return vh(NaN)}function wx(e){var t=pT(e),r=t.year||0,l=t.quarter||0,c=t.month||0,d=t.week||t.isoWeek||0,m=t.day||0,n=t.hour||0,T=t.minute||0,V=t.second||0,Q=t.millisecond||0;this._isValid=h9(t),this._milliseconds=+Q+V*1e3+T*6e4+n*1e3*60*60,this._days=+m+d*7,this._months=+c+l*3+r*12,this._data={},this._locale=nu(),this._bubble()}function qy(e){return e instanceof wx}function Lw(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function p9(e,t,r){var l=Math.min(e.length,t.length),c=Math.abs(e.length-t.length),d=0,m;for(m=0;m<l;m++)(r&&e[m]!==t[m]||!r&&vr(e[m])!==vr(t[m]))&&d++;return d+c}function c8(e,t){Mn(e,0,0,function(){var r=this.utcOffset(),l="+";return r<0&&(r=-r,l="-"),l+ed(~~(r/60),2)+t+ed(~~r%60,2)})}c8("Z",":");c8("ZZ","");ln("Z",vx);ln("ZZ",vx);us(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=TT(vx,e)});var f9=/([\+\-]|\d\d)/gi;function TT(e,t){var r=(t||"").match(e),l,c,d;return r===null?null:(l=r[r.length-1]||[],c=(l+"").match(f9)||["-",0,0],d=+(c[1]*60)+vr(c[2]),d===0?0:c[0]==="+"?d:-d)}function ST(e,t){var r,l;return t._isUTC?(r=t.clone(),l=(yh(e)||q1(e)?e.valueOf():Ds(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+l),tn.updateOffset(r,!1),r):Ds(e).local()}function Ow(e){return-Math.round(e._d.getTimezoneOffset())}tn.updateOffset=function(){};function m9(e,t,r){var l=this._offset||0,c;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=TT(vx,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(c=Ow(this)),this._offset=e,this._isUTC=!0,c!=null&&this.add(c,"m"),l!==e&&(!t||this._changeInProgress?u8(this,vh(e-l,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,tn.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?l:Ow(this)}function g9(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function _9(e){return this.utcOffset(0,e)}function y9(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ow(this),"m")),this}function v9(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=TT(jI,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function x9(e){return this.isValid()?(e=e?Ds(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function b9(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function w9(){if(!yl(this._isDSTShifted))return this._isDSTShifted;var e={},t;return hT(e,this),e=o8(e),e._a?(t=e._isUTC?nd(e._a):Ds(e._a),this._isDSTShifted=this.isValid()&&p9(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function T9(){return this.isValid()?!this._isUTC:!1}function S9(){return this.isValid()?this._isUTC:!1}function h8(){return this.isValid()?this._isUTC&&this._offset===0:!1}var E9=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,C9=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function vh(e,t){var r=e,l=null,c,d,m;return qy(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:Qd(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(l=E9.exec(e))?(c=l[1]==="-"?-1:1,r={y:0,d:vr(l[Zh])*c,h:vr(l[zo])*c,m:vr(l[uh])*c,s:vr(l[Hd])*c,ms:vr(Lw(l[wf]*1e3))*c}):(l=C9.exec(e))?(c=l[1]==="-"?-1:1,r={y:pf(l[2],c),M:pf(l[3],c),w:pf(l[4],c),d:pf(l[5],c),h:pf(l[6],c),m:pf(l[7],c),s:pf(l[8],c)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(m=M9(Ds(r.from),Ds(r.to)),r={},r.ms=m.milliseconds,r.M=m.months),d=new wx(r),qy(e)&&Xr(e,"_locale")&&(d._locale=e._locale),qy(e)&&Xr(e,"_isValid")&&(d._isValid=e._isValid),d}vh.fn=wx.prototype;vh.invalid=u9;function pf(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function c5(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function M9(e,t){var r;return e.isValid()&&t.isValid()?(t=ST(t,e),e.isBefore(t)?r=c5(e,t):(r=c5(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function d8(e,t){return function(r,l){var c,d;return l!==null&&!isNaN(+l)&&(FM(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),d=r,r=l,l=d),c=vh(r,l),u8(this,c,e),this}}function u8(e,t,r,l){var c=t._milliseconds,d=Lw(t._days),m=Lw(t._months);e.isValid()&&(l=l??!0,m&&qM(e,xv(e,"Month")+m*r),d&&GM(e,"Date",xv(e,"Date")+d*r),c&&e._d.setTime(e._d.valueOf()+c*r),l&&tn.updateOffset(e,d||m))}var A9=d8(1,"add"),k9=d8(-1,"subtract");function p8(e){return typeof e=="string"||e instanceof String}function P9(e){return yh(e)||q1(e)||p8(e)||Qd(e)||I9(e)||D9(e)||e===null||e===void 0}function D9(e){var t=kf(e)&&!lT(e),r=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c,d,m=l.length;for(c=0;c<m;c+=1)d=l[c],r=r||Xr(e,d);return t&&r}function I9(e){var t=_h(e),r=!1;return t&&(r=e.filter(function(l){return!Qd(l)&&p8(e)}).length===0),t&&r}function L9(e){var t=kf(e)&&!lT(e),r=!1,l=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],c,d;for(c=0;c<l.length;c+=1)d=l[c],r=r||Xr(e,d);return t&&r}function O9(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function R9(e,t){arguments.length===1&&(arguments[0]?P9(arguments[0])?(e=arguments[0],t=void 0):L9(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||Ds(),l=ST(r,this).startOf("day"),c=tn.calendarFormat(this,l)||"sameElse",d=t&&(rd(t[c])?t[c].call(this,r):t[c]);return this.format(d||this.localeData().calendar(c,this,Ds(r)))}function B9(){return new Z1(this)}function z9(e,t){var r=yh(e)?e:Ds(e);return this.isValid()&&r.isValid()?(t=$c(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function N9(e,t){var r=yh(e)?e:Ds(e);return this.isValid()&&r.isValid()?(t=$c(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function F9(e,t,r,l){var c=yh(e)?e:Ds(e),d=yh(t)?t:Ds(t);return this.isValid()&&c.isValid()&&d.isValid()?(l=l||"()",(l[0]==="("?this.isAfter(c,r):!this.isBefore(c,r))&&(l[1]===")"?this.isBefore(d,r):!this.isAfter(d,r))):!1}function j9(e,t){var r=yh(e)?e:Ds(e),l;return this.isValid()&&r.isValid()?(t=$c(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(l=r.valueOf(),this.clone().startOf(t).valueOf()<=l&&l<=this.clone().endOf(t).valueOf())):!1}function U9(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function G9(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function V9(e,t,r){var l,c,d;if(!this.isValid())return NaN;if(l=ST(e,this),!l.isValid())return NaN;switch(c=(l.utcOffset()-this.utcOffset())*6e4,t=$c(t),t){case"year":d=Zy(this,l)/12;break;case"month":d=Zy(this,l);break;case"quarter":d=Zy(this,l)/3;break;case"second":d=(this-l)/1e3;break;case"minute":d=(this-l)/6e4;break;case"hour":d=(this-l)/36e5;break;case"day":d=(this-l-c)/864e5;break;case"week":d=(this-l-c)/6048e5;break;default:d=this-l}return r?d:Nc(d)}function Zy(e,t){if(e.date()<t.date())return-Zy(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),l=e.clone().add(r,"months"),c,d;return t-l<0?(c=e.clone().add(r-1,"months"),d=(t-l)/(l-c)):(c=e.clone().add(r+1,"months"),d=(t-l)/(c-l)),-(r+d)||0}tn.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";tn.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function $9(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function H9(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?Xy(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):rd(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Xy(r,"Z")):Xy(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function W9(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,l,c,d;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',l=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",c="-MM-DD[T]HH:mm:ss.SSS",d=t+'[")]',this.format(r+l+c+d)}function Y9(e){e||(e=this.isUtc()?tn.defaultFormatUtc:tn.defaultFormat);var t=Xy(this,e);return this.localeData().postformat(t)}function X9(e,t){return this.isValid()&&(yh(e)&&e.isValid()||Ds(e).isValid())?vh({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function q9(e){return this.from(Ds(),e)}function Z9(e,t){return this.isValid()&&(yh(e)&&e.isValid()||Ds(e).isValid())?vh({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function K9(e){return this.to(Ds(),e)}function f8(e){var t;return e===void 0?this._locale._abbr:(t=nu(e),t!=null&&(this._locale=t),this)}var m8=Vc("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function g8(){return this._locale}var Tv=1e3,sm=60*Tv,Sv=60*sm,_8=(365*400+97)*24*Sv;function om(e,t){return(e%t+t)%t}function y8(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-_8:new Date(e,t,r).valueOf()}function v8(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-_8:Date.UTC(e,t,r)}function J9(e){var t,r;if(e=$c(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?v8:y8,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=om(t+(this._isUTC?0:this.utcOffset()*sm),Sv);break;case"minute":t=this._d.valueOf(),t-=om(t,sm);break;case"second":t=this._d.valueOf(),t-=om(t,Tv);break}return this._d.setTime(t),tn.updateOffset(this,!0),this}function Q9(e){var t,r;if(e=$c(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?v8:y8,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Sv-om(t+(this._isUTC?0:this.utcOffset()*sm),Sv)-1;break;case"minute":t=this._d.valueOf(),t+=sm-om(t,sm)-1;break;case"second":t=this._d.valueOf(),t+=Tv-om(t,Tv)-1;break}return this._d.setTime(t),tn.updateOffset(this,!0),this}function eO(){return this._d.valueOf()-(this._offset||0)*6e4}function tO(){return Math.floor(this.valueOf()/1e3)}function iO(){return new Date(this.valueOf())}function nO(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function rO(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function sO(){return this.isValid()?this.toISOString():null}function oO(){return cT(this)}function aO(){return Xu({},tr(this))}function lO(){return tr(this).overflow}function cO(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Mn("N",0,0,"eraAbbr");Mn("NN",0,0,"eraAbbr");Mn("NNN",0,0,"eraAbbr");Mn("NNNN",0,0,"eraName");Mn("NNNNN",0,0,"eraNarrow");Mn("y",["y",1],"yo","eraYear");Mn("y",["yy",2],0,"eraYear");Mn("y",["yyy",3],0,"eraYear");Mn("y",["yyyy",4],0,"eraYear");ln("N",ET);ln("NN",ET);ln("NNN",ET);ln("NNNN",xO);ln("NNNNN",bO);us(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,l){var c=r._locale.erasParse(e,l,r._strict);c?tr(r).era=c:tr(r).invalidEra=e});ln("y",km);ln("yy",km);ln("yyy",km);ln("yyyy",km);ln("yo",wO);us(["y","yy","yyy","yyyy"],La);us(["yo"],function(e,t,r,l){var c;r._locale._eraYearOrdinalRegex&&(c=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[La]=r._locale.eraYearOrdinalParse(e,c):t[La]=parseInt(e,10)});function hO(e,t){var r,l,c,d=this._eras||nu("en")._eras;for(r=0,l=d.length;r<l;++r){switch(typeof d[r].since){case"string":c=tn(d[r].since).startOf("day"),d[r].since=c.valueOf();break}switch(typeof d[r].until){case"undefined":d[r].until=1/0;break;case"string":c=tn(d[r].until).startOf("day").valueOf(),d[r].until=c.valueOf();break}}return d}function dO(e,t,r){var l,c,d=this.eras(),m,n,T;for(e=e.toUpperCase(),l=0,c=d.length;l<c;++l)if(m=d[l].name.toUpperCase(),n=d[l].abbr.toUpperCase(),T=d[l].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(n===e)return d[l];break;case"NNNN":if(m===e)return d[l];break;case"NNNNN":if(T===e)return d[l];break}else if([m,n,T].indexOf(e)>=0)return d[l]}function uO(e,t){var r=e.since<=e.until?1:-1;return t===void 0?tn(e.since).year():tn(e.since).year()+(t-e.offset)*r}function pO(){var e,t,r,l=this.localeData().eras();for(e=0,t=l.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),l[e].since<=r&&r<=l[e].until||l[e].until<=r&&r<=l[e].since)return l[e].name;return""}function fO(){var e,t,r,l=this.localeData().eras();for(e=0,t=l.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),l[e].since<=r&&r<=l[e].until||l[e].until<=r&&r<=l[e].since)return l[e].narrow;return""}function mO(){var e,t,r,l=this.localeData().eras();for(e=0,t=l.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),l[e].since<=r&&r<=l[e].until||l[e].until<=r&&r<=l[e].since)return l[e].abbr;return""}function gO(){var e,t,r,l,c=this.localeData().eras();for(e=0,t=c.length;e<t;++e)if(r=c[e].since<=c[e].until?1:-1,l=this.clone().startOf("day").valueOf(),c[e].since<=l&&l<=c[e].until||c[e].until<=l&&l<=c[e].since)return(this.year()-tn(c[e].since).year())*r+c[e].offset;return this.year()}function _O(e){return Xr(this,"_erasNameRegex")||CT.call(this),e?this._erasNameRegex:this._erasRegex}function yO(e){return Xr(this,"_erasAbbrRegex")||CT.call(this),e?this._erasAbbrRegex:this._erasRegex}function vO(e){return Xr(this,"_erasNarrowRegex")||CT.call(this),e?this._erasNarrowRegex:this._erasRegex}function ET(e,t){return t.erasAbbrRegex(e)}function xO(e,t){return t.erasNameRegex(e)}function bO(e,t){return t.erasNarrowRegex(e)}function wO(e,t){return t._eraYearOrdinalRegex||km}function CT(){var e=[],t=[],r=[],l=[],c,d,m=this.eras();for(c=0,d=m.length;c<d;++c)t.push(sc(m[c].name)),e.push(sc(m[c].abbr)),r.push(sc(m[c].narrow)),l.push(sc(m[c].name)),l.push(sc(m[c].abbr)),l.push(sc(m[c].narrow));this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}Mn(0,["gg",2],0,function(){return this.weekYear()%100});Mn(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Tx(e,t){Mn(0,[e,e.length],0,t)}Tx("gggg","weekYear");Tx("ggggg","weekYear");Tx("GGGG","isoWeekYear");Tx("GGGGG","isoWeekYear");Oa("weekYear","gg");Oa("isoWeekYear","GG");Ra("weekYear",1);Ra("isoWeekYear",1);ln("G",yx);ln("g",yx);ln("GG",Is,hc);ln("gg",Is,hc);ln("GGGG",mT,fT);ln("gggg",mT,fT);ln("GGGGG",_x,mx);ln("ggggg",_x,mx);J1(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,l){t[l.substr(0,2)]=vr(e)});J1(["gg","GG"],function(e,t,r,l){t[l]=tn.parseTwoDigitYear(e)});function TO(e){return x8.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function SO(e){return x8.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function EO(){return Xd(this.year(),1,4)}function CO(){return Xd(this.isoWeekYear(),1,4)}function MO(){var e=this.localeData()._week;return Xd(this.year(),e.dow,e.doy)}function AO(){var e=this.localeData()._week;return Xd(this.weekYear(),e.dow,e.doy)}function x8(e,t,r,l,c){var d;return e==null?O1(this,l,c).year:(d=Xd(e,l,c),t>d&&(t=d),kO.call(this,e,t,r,l,c))}function kO(e,t,r,l,c){var d=QM(e,t,r,l,c),m=L1(d.year,0,d.dayOfYear);return this.year(m.getUTCFullYear()),this.month(m.getUTCMonth()),this.date(m.getUTCDate()),this}Mn("Q",0,"Qo","quarter");Oa("quarter","Q");Ra("quarter",7);ln("Q",VM);us("Q",function(e,t){t[$d]=(vr(e)-1)*3});function PO(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Mn("D",["DD",2],"Do","date");Oa("date","D");Ra("date",9);ln("D",Is);ln("DD",Is,hc);ln("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});us(["D","DD"],Zh);us("Do",function(e,t){t[Zh]=vr(e.match(Is)[0])});var b8=Am("Date",!0);Mn("DDD",["DDDD",3],"DDDo","dayOfYear");Oa("dayOfYear","DDD");Ra("dayOfYear",4);ln("DDD",gx);ln("DDDD",$M);us(["DDD","DDDD"],function(e,t,r){r._dayOfYear=vr(e)});function DO(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Mn("m",["mm",2],0,"minute");Oa("minute","m");Ra("minute",14);ln("m",Is);ln("mm",Is,hc);us(["m","mm"],uh);var IO=Am("Minutes",!1);Mn("s",["ss",2],0,"second");Oa("second","s");Ra("second",15);ln("s",Is);ln("ss",Is,hc);us(["s","ss"],Hd);var LO=Am("Seconds",!1);Mn("S",0,0,function(){return~~(this.millisecond()/100)});Mn(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Mn(0,["SSS",3],0,"millisecond");Mn(0,["SSSS",4],0,function(){return this.millisecond()*10});Mn(0,["SSSSS",5],0,function(){return this.millisecond()*100});Mn(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Mn(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Mn(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Mn(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Oa("millisecond","ms");Ra("millisecond",16);ln("S",gx,VM);ln("SS",gx,hc);ln("SSS",gx,$M);var qu,w8;for(qu="SSSS";qu.length<=9;qu+="S")ln(qu,km);function OO(e,t){t[wf]=vr(("0."+e)*1e3)}for(qu="S";qu.length<=9;qu+="S")us(qu,OO);w8=Am("Milliseconds",!1);Mn("z",0,0,"zoneAbbr");Mn("zz",0,0,"zoneName");function RO(){return this._isUTC?"UTC":""}function BO(){return this._isUTC?"Coordinated Universal Time":""}var Ni=Z1.prototype;Ni.add=A9;Ni.calendar=R9;Ni.clone=B9;Ni.diff=V9;Ni.endOf=Q9;Ni.format=Y9;Ni.from=X9;Ni.fromNow=q9;Ni.to=Z9;Ni.toNow=K9;Ni.get=NI;Ni.invalidAt=lO;Ni.isAfter=z9;Ni.isBefore=N9;Ni.isBetween=F9;Ni.isSame=j9;Ni.isSameOrAfter=U9;Ni.isSameOrBefore=G9;Ni.isValid=oO;Ni.lang=m8;Ni.locale=f8;Ni.localeData=g8;Ni.max=o9;Ni.min=s9;Ni.parsingFlags=aO;Ni.set=FI;Ni.startOf=J9;Ni.subtract=k9;Ni.toArray=nO;Ni.toObject=rO;Ni.toDate=iO;Ni.toISOString=H9;Ni.inspect=W9;typeof Symbol<"u"&&Symbol.for!=null&&(Ni[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Ni.toJSON=sO;Ni.toString=$9;Ni.unix=tO;Ni.valueOf=eO;Ni.creationData=cO;Ni.eraName=pO;Ni.eraNarrow=fO;Ni.eraAbbr=mO;Ni.eraYear=gO;Ni.year=JM;Ni.isLeapYear=rL;Ni.weekYear=TO;Ni.isoWeekYear=SO;Ni.quarter=Ni.quarters=PO;Ni.month=ZM;Ni.daysInMonth=tL;Ni.week=Ni.weeks=hL;Ni.isoWeek=Ni.isoWeeks=dL;Ni.weeksInYear=MO;Ni.weeksInWeekYear=AO;Ni.isoWeeksInYear=EO;Ni.isoWeeksInISOWeekYear=CO;Ni.date=b8;Ni.day=Ni.days=SL;Ni.weekday=EL;Ni.isoWeekday=CL;Ni.dayOfYear=DO;Ni.hour=Ni.hours=LL;Ni.minute=Ni.minutes=IO;Ni.second=Ni.seconds=LO;Ni.millisecond=Ni.milliseconds=w8;Ni.utcOffset=m9;Ni.utc=_9;Ni.local=y9;Ni.parseZone=v9;Ni.hasAlignedHourOffset=x9;Ni.isDST=b9;Ni.isLocal=T9;Ni.isUtcOffset=S9;Ni.isUtc=h8;Ni.isUTC=h8;Ni.zoneAbbr=RO;Ni.zoneName=BO;Ni.dates=Vc("dates accessor is deprecated. Use date instead.",b8);Ni.months=Vc("months accessor is deprecated. Use month instead",ZM);Ni.years=Vc("years accessor is deprecated. Use year instead",JM);Ni.zone=Vc("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",g9);Ni.isDSTShifted=Vc("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",w9);function zO(e){return Ds(e*1e3)}function NO(){return Ds.apply(null,arguments).parseZone()}function T8(e){return e}var qr=dT.prototype;qr.calendar=SI;qr.longDateFormat=AI;qr.invalidDate=PI;qr.ordinal=LI;qr.preparse=T8;qr.postformat=T8;qr.relativeTime=RI;qr.pastFuture=BI;qr.set=wI;qr.eras=hO;qr.erasParse=dO;qr.erasConvertYear=uO;qr.erasAbbrRegex=yO;qr.erasNameRegex=_O;qr.erasNarrowRegex=vO;qr.months=KI;qr.monthsShort=JI;qr.monthsParse=eL;qr.monthsRegex=nL;qr.monthsShortRegex=iL;qr.week=oL;qr.firstDayOfYear=cL;qr.firstDayOfWeek=lL;qr.weekdays=vL;qr.weekdaysMin=bL;qr.weekdaysShort=xL;qr.weekdaysParse=TL;qr.weekdaysRegex=ML;qr.weekdaysShortRegex=AL;qr.weekdaysMinRegex=kL;qr.isPM=DL;qr.meridiem=OL;function Ev(e,t,r,l){var c=nu(),d=nd().set(l,t);return c[r](d,e)}function S8(e,t,r){if(Qd(e)&&(t=e,e=void 0),e=e||"",t!=null)return Ev(e,t,r,"month");var l,c=[];for(l=0;l<12;l++)c[l]=Ev(e,l,r,"month");return c}function MT(e,t,r,l){typeof e=="boolean"?(Qd(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,Qd(t)&&(r=t,t=void 0),t=t||"");var c=nu(),d=e?c._week.dow:0,m,n=[];if(r!=null)return Ev(t,(r+d)%7,l,"day");for(m=0;m<7;m++)n[m]=Ev(t,(m+d)%7,l,"day");return n}function FO(e,t){return S8(e,t,"months")}function jO(e,t){return S8(e,t,"monthsShort")}function UO(e,t,r){return MT(e,t,r,"weekdays")}function GO(e,t,r){return MT(e,t,r,"weekdaysShort")}function VO(e,t,r){return MT(e,t,r,"weekdaysMin")}ip("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=vr(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});tn.lang=Vc("moment.lang is deprecated. Use moment.locale instead.",ip);tn.langData=Vc("moment.langData is deprecated. Use moment.localeData instead.",nu);var zd=Math.abs;function $O(){var e=this._data;return this._milliseconds=zd(this._milliseconds),this._days=zd(this._days),this._months=zd(this._months),e.milliseconds=zd(e.milliseconds),e.seconds=zd(e.seconds),e.minutes=zd(e.minutes),e.hours=zd(e.hours),e.months=zd(e.months),e.years=zd(e.years),this}function E8(e,t,r,l){var c=vh(t,r);return e._milliseconds+=l*c._milliseconds,e._days+=l*c._days,e._months+=l*c._months,e._bubble()}function HO(e,t){return E8(this,e,t,1)}function WO(e,t){return E8(this,e,t,-1)}function h5(e){return e<0?Math.floor(e):Math.ceil(e)}function YO(){var e=this._milliseconds,t=this._days,r=this._months,l=this._data,c,d,m,n,T;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=h5(Rw(r)+t)*864e5,t=0,r=0),l.milliseconds=e%1e3,c=Nc(e/1e3),l.seconds=c%60,d=Nc(c/60),l.minutes=d%60,m=Nc(d/60),l.hours=m%24,t+=Nc(m/24),T=Nc(C8(t)),r+=T,t-=h5(Rw(T)),n=Nc(r/12),r%=12,l.days=t,l.months=r,l.years=n,this}function C8(e){return e*4800/146097}function Rw(e){return e*146097/4800}function XO(e){if(!this.isValid())return NaN;var t,r,l=this._milliseconds;if(e=$c(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+l/864e5,r=this._months+C8(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(Rw(this._months)),e){case"week":return t/7+l/6048e5;case"day":return t+l/864e5;case"hour":return t*24+l/36e5;case"minute":return t*1440+l/6e4;case"second":return t*86400+l/1e3;case"millisecond":return Math.floor(t*864e5)+l;default:throw new Error("Unknown unit "+e)}}function qO(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+vr(this._months/12)*31536e6:NaN}function ru(e){return function(){return this.as(e)}}var ZO=ru("ms"),KO=ru("s"),JO=ru("m"),QO=ru("h"),e7=ru("d"),t7=ru("w"),i7=ru("M"),n7=ru("Q"),r7=ru("y");function s7(){return vh(this)}function o7(e){return e=$c(e),this.isValid()?this[e+"s"]():NaN}function Vf(e){return function(){return this.isValid()?this._data[e]:NaN}}var a7=Vf("milliseconds"),l7=Vf("seconds"),c7=Vf("minutes"),h7=Vf("hours"),d7=Vf("days"),u7=Vf("months"),p7=Vf("years");function f7(){return Nc(this.days()/7)}var Ud=Math.round,J0={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function m7(e,t,r,l,c){return c.relativeTime(t||1,!!r,e,l)}function g7(e,t,r,l){var c=vh(e).abs(),d=Ud(c.as("s")),m=Ud(c.as("m")),n=Ud(c.as("h")),T=Ud(c.as("d")),V=Ud(c.as("M")),Q=Ud(c.as("w")),z=Ud(c.as("y")),W=d<=r.ss&&["s",d]||d<r.s&&["ss",d]||m<=1&&["m"]||m<r.m&&["mm",m]||n<=1&&["h"]||n<r.h&&["hh",n]||T<=1&&["d"]||T<r.d&&["dd",T];return r.w!=null&&(W=W||Q<=1&&["w"]||Q<r.w&&["ww",Q]),W=W||V<=1&&["M"]||V<r.M&&["MM",V]||z<=1&&["y"]||["yy",z],W[2]=t,W[3]=+e>0,W[4]=l,m7.apply(null,W)}function _7(e){return e===void 0?Ud:typeof e=="function"?(Ud=e,!0):!1}function y7(e,t){return J0[e]===void 0?!1:t===void 0?J0[e]:(J0[e]=t,e==="s"&&(J0.ss=t-1),!0)}function v7(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,l=J0,c,d;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(l=Object.assign({},J0,t),t.s!=null&&t.ss==null&&(l.ss=t.s-1)),c=this.localeData(),d=g7(this,!r,l,c),r&&(d=c.pastFuture(+this,d)),c.postformat(d)}var zb=Math.abs;function q0(e){return(e>0)-(e<0)||+e}function Sx(){if(!this.isValid())return this.localeData().invalidDate();var e=zb(this._milliseconds)/1e3,t=zb(this._days),r=zb(this._months),l,c,d,m,n=this.asSeconds(),T,V,Q,z;return n?(l=Nc(e/60),c=Nc(l/60),e%=60,l%=60,d=Nc(r/12),r%=12,m=e?e.toFixed(3).replace(/\.?0+$/,""):"",T=n<0?"-":"",V=q0(this._months)!==q0(n)?"-":"",Q=q0(this._days)!==q0(n)?"-":"",z=q0(this._milliseconds)!==q0(n)?"-":"",T+"P"+(d?V+d+"Y":"")+(r?V+r+"M":"")+(t?Q+t+"D":"")+(c||l||e?"T":"")+(c?z+c+"H":"")+(l?z+l+"M":"")+(e?z+m+"S":"")):"P0D"}var Br=wx.prototype;Br.isValid=d9;Br.abs=$O;Br.add=HO;Br.subtract=WO;Br.as=XO;Br.asMilliseconds=ZO;Br.asSeconds=KO;Br.asMinutes=JO;Br.asHours=QO;Br.asDays=e7;Br.asWeeks=t7;Br.asMonths=i7;Br.asQuarters=n7;Br.asYears=r7;Br.valueOf=qO;Br._bubble=YO;Br.clone=s7;Br.get=o7;Br.milliseconds=a7;Br.seconds=l7;Br.minutes=c7;Br.hours=h7;Br.days=d7;Br.weeks=f7;Br.months=u7;Br.years=p7;Br.humanize=v7;Br.toISOString=Sx;Br.toString=Sx;Br.toJSON=Sx;Br.locale=f8;Br.localeData=g8;Br.toIsoString=Vc("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Sx);Br.lang=m8;Mn("X",0,0,"unix");Mn("x",0,0,"valueOf");ln("x",yx);ln("X",UI);us("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});us("x",function(e,t,r){r._d=new Date(vr(e))});//! moment.js
tn.version="2.29.4";xI(Ds);tn.fn=Ni;tn.min=a9;tn.max=l9;tn.now=c9;tn.utc=nd;tn.unix=zO;tn.months=FO;tn.isDate=q1;tn.locale=ip;tn.invalid=px;tn.duration=vh;tn.isMoment=yh;tn.weekdays=UO;tn.parseZone=NO;tn.localeData=nu;tn.isDuration=qy;tn.monthsShort=jO;tn.weekdaysMin=VO;tn.defineLocale=vT;tn.updateLocale=NL;tn.locales=FL;tn.weekdaysShort=GO;tn.normalizeUnits=$c;tn.relativeTimeRounding=_7;tn.relativeTimeThreshold=y7;tn.calendarFormat=O9;tn.prototype=Ni;tn.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var Bw={},x7={get exports(){return Bw},set exports(e){Bw=e}};(function(e,t){(function(r,l){e.exports=l()})(Oo,function(){var r,l,c;function d(n,T){if(!r)r=T;else if(!l)l=T;else{var V="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+l+")(sharedChunk); self.onerror = null;",Q={};r(Q),c=T(Q),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([V],{type:"text/javascript"})))}}d(["exports"],function(n){var T=typeof self<"u"?self:{},V="2.12.0";let Q;const z={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Q==null){const s=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Q={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):s}catch{Q=s}}return Q},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},W={supported:!1,testSupport:function(s){!O&&I&&($?M(s):K=s)}};let K,I,O=!1,$=!1;function M(s){const i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,I),s.isContextLost())return;W.supported=!0}catch{}s.deleteTexture(i),O=!0}T.document&&(I=T.document.createElement("img"),I.onload=function(){K&&M(K),K=null,$=!0},I.onerror=function(){O=!0,K=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const S="01";var k=G;function G(s,i,o,h){this.cx=3*s,this.bx=3*(o-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=o,this.p2y=h}G.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var o=s,h=0;h<8;h++){var p=this.sampleCurveX(o)-s;if(Math.abs(p)<i)return o;var v=this.sampleCurveDerivativeX(o);if(Math.abs(v)<1e-6)break;o-=p/v}var w=0,R=1;for(o=s,h=0;h<20&&(p=this.sampleCurveX(o),!(Math.abs(p-s)<i));h++)s>p?w=o:R=o,o=.5*(R-w)+w;return o},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var U=C;function C(s,i){this.x=s,this.y=i}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,o=s.y-this.y;return i*i+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),o=Math.sin(s),h=o*this.x+i*this.y;return this.x=i*this.x-o*this.y,this.y=h,this},_rotateAround:function(s,i){var o=Math.cos(s),h=Math.sin(s),p=i.y+h*(this.x-i.x)+o*(this.y-i.y);return this.x=i.x+o*(this.x-i.x)-h*(this.y-i.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(s){return s instanceof C?s:Array.isArray(s)?new C(s[0],s[1]):s};const ie=Math.PI/180,J=180/Math.PI;function N(s){return s*ie}function F(s){return s*J}const H=[[0,0],[1,0],[1,1],[0,1]];function E(s){if(s<=0)return 0;if(s>=1)return 1;const i=s*s,o=i*s;return 4*(s<.5?o:3*(s-i)+o-.75)}function L(s,i,o,h){const p=new k(s,i,o,h);return function(v){return p.solve(v)}}const f=L(.25,.1,.25,1);function y(s,i,o){return Math.min(o,Math.max(i,s))}function b(s,i,o){return(o=y((o-s)/(i-s),0,1))*o*(3-2*o)}function D(s,i,o){const h=o-i,p=((s-i)%h+h)%h+i;return p===i?o:p}function X(s,i,o){if(!s.length)return o(null,[]);let h=s.length;const p=new Array(s.length);let v=null;s.forEach((w,R)=>{i(w,(Y,ee)=>{Y&&(v=Y),p[R]=ee,--h==0&&o(v,p)})})}function te(s){const i=[];for(const o in s)i.push(s[o]);return i}function q(s,...i){for(const o of i)for(const h in o)s[h]=o[h];return s}let ce=1;function fe(){return ce++}function we(){return function s(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function Z(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function se(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function ue(s,i){s.forEach(o=>{i[o]&&(i[o]=i[o].bind(i))})}function ye(s,i){return s.indexOf(i,s.length-i.length)!==-1}function Pe(s,i,o){const h={};for(const p in s)h[p]=i.call(o||this,s[p],p,s);return h}function ae(s,i,o){const h={};for(const p in s)i.call(o||this,s[p],p,s)&&(h[p]=s[p]);return h}function xe(s){return Array.isArray(s)?s.map(xe):typeof s=="object"&&s?Pe(s,xe):s}const ve={};function le(s){ve[s]||(typeof console<"u"&&console.warn(s),ve[s]=!0)}function me(s,i,o){return(o.y-s.y)*(i.x-s.x)>(i.y-s.y)*(o.x-s.x)}function be(s){let i=0;for(let o,h,p=0,v=s.length,w=v-1;p<v;w=p++)o=s[p],h=s[w],i+=(h.x-o.x)*(o.y+h.y);return i}function Le(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function De(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,h,p,v)=>{const w=p||v;return i[h]=!w||w.toLowerCase(),""}),i["max-age"]){const o=parseInt(i["max-age"],10);isNaN(o)?delete i["max-age"]:i["max-age"]=o}return i}let Ne=null;function st(s){if(Ne==null){const i=s.navigator?s.navigator.userAgent:null;Ne=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Ne}function it(s){try{const i=T[s];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function ht(s,i){return[s[4*i],s[4*i+1],s[4*i+2],s[4*i+3]]}const ke="mapbox-tiles";let Be,Ue,We=500,nt=50;function wt(){try{return T.caches}catch{}}function Ut(){wt()&&!Be&&(Be=T.caches.open(ke))}function Vt(s){const i=s.indexOf("?");if(i<0)return s;const o=function(p){const v=p.indexOf("?");return v>0?p.slice(v+1).split("&"):[]}(s),h=o.filter(p=>{const v=p.split("=");return v[0]==="language"||v[0]==="worldview"});return h.length?`${s.slice(0,i)}?${h.join("&")}`:s.slice(0,i)}let yi=1/0;const ri={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ri);class Mi extends Error{constructor(i,o,h){o===401&&Ir(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=o,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const $i=Le()?()=>self.worker&&self.worker.referrer:()=>(T.location.protocol==="blob:"?T.parent:T).location.href,zi=function(s,i){if(!(/^file:/.test(o=s.url)||/^file:/.test($i())&&!/^\w+:/.test(o))){if(T.fetch&&T.Request&&T.AbortController&&T.Request.prototype.hasOwnProperty("signal"))return function(h,p){const v=new T.AbortController,w=new T.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:$i(),signal:v.signal});let R=!1,Y=!1;const ee=(de=w.url).indexOf("sku=")>0&&Ir(de);var de;h.type==="json"&&w.headers.set("Accept","application/json");const _e=(Ae,Ie,Fe)=>{if(Y)return;if(Ae&&Ae.message!=="SecurityError"&&le(Ae),Ie&&Fe)return Te(Ie);const Xe=Date.now();T.fetch(w).then(dt=>{if(dt.ok){const yt=ee?dt.clone():null;return Te(dt,yt,Xe)}return p(new Mi(dt.statusText,dt.status,h.url))}).catch(dt=>{dt.code!==20&&p(new Error(dt.message))})},Te=(Ae,Ie,Fe)=>{(h.type==="arrayBuffer"?Ae.arrayBuffer():h.type==="json"?Ae.json():Ae.text()).then(Xe=>{Y||(Ie&&Fe&&function(dt,yt,ct){if(Ut(),!Be)return;const ft={status:yt.status,statusText:yt.statusText,headers:new T.Headers};yt.headers.forEach((Ht,$t)=>ft.headers.set($t,Ht));const St=De(yt.headers.get("Cache-Control")||"");if(St["no-store"])return;St["max-age"]&&ft.headers.set("Expires",new Date(ct+1e3*St["max-age"]).toUTCString());const bt=ft.headers.get("Expires");bt&&(new Date(bt).getTime()-ct<42e4||function(Ht,$t){if(Ue===void 0)try{new Response(new ReadableStream),Ue=!0}catch{Ue=!1}Ue?$t(Ht.body):Ht.blob().then($t)}(yt,Ht=>{const $t=new T.Response(Ht,ft);Ut(),Be&&Be.then(oi=>oi.put(Vt(dt.url),$t)).catch(oi=>le(oi.message))}))}(w,Ie,Fe),R=!0,p(null,Xe,Ae.headers.get("Cache-Control"),Ae.headers.get("Expires")))}).catch(Xe=>{Y||p(new Error(Xe.message))})};return ee?function(Ae,Ie){if(Ut(),!Be)return Ie(null);const Fe=Vt(Ae.url);Be.then(Xe=>{Xe.match(Fe).then(dt=>{const yt=function(ct){if(!ct)return!1;const ft=new Date(ct.headers.get("Expires")||0),St=De(ct.headers.get("Cache-Control")||"");return ft>Date.now()&&!St["no-cache"]}(dt);Xe.delete(Fe),yt&&Xe.put(Fe,dt.clone()),Ie(null,dt,yt)}).catch(Ie)}).catch(Ie)}(w,_e):_e(null,null),{cancel:()=>{Y=!0,R||v.abort()}}}(s,i);if(Le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i,void 0,!0)}var o;return function(h,p){const v=new T.XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const w in h.headers)v.setRequestHeader(w,h.headers[w]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let w=v.response;if(h.type==="json")try{w=JSON.parse(v.response)}catch(R){return p(R)}p(null,w,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else p(new Mi(v.statusText,v.status,h.url))},v.send(h.body),{cancel:()=>v.abort()}}(s,i)},qi=function(s,i){return zi(q(s,{type:"arrayBuffer"}),i)};function Oi(s){const i=T.document.createElement("a");return i.href=s,i.protocol===T.document.location.protocol&&i.host===T.document.location.host}const _n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let wn,Yn;wn=[],Yn=0;const Ts=function(s,i){if(W.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),Yn>=z.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:s,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return wn.push(v),v}Yn++;let o=!1;const h=()=>{if(!o)for(o=!0,Yn--;wn.length&&Yn<z.MAX_PARALLEL_IMAGE_REQUESTS;){const v=wn.shift(),{requestParameters:w,callback:R,cancelled:Y}=v;Y||(v.cancel=Ts(w,R).cancel)}},p=qi(s,(v,w,R,Y)=>{h(),v?i(v):w&&(T.createImageBitmap?function(ee,de){const _e=new T.Blob([new Uint8Array(ee)],{type:"image/png"});T.createImageBitmap(_e).then(Te=>{de(null,Te)}).catch(Te=>{de(new Error(`Could not load image because of ${Te.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(w,(ee,de)=>i(ee,de,R,Y)):function(ee,de){const _e=new T.Image,Te=T.URL;_e.onload=()=>{de(null,_e),Te.revokeObjectURL(_e.src),_e.onload=null,T.requestAnimationFrame(()=>{_e.src=_n})},_e.onerror=()=>de(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ae=new T.Blob([new Uint8Array(ee)],{type:"image/png"});_e.src=ee.byteLength?Te.createObjectURL(Ae):_n}(w,(ee,de)=>i(ee,de,R,Y)))});return{cancel:()=>{p.cancel(),h()}}},ur="NO_ACCESS_TOKEN";function Dr(s){return s.indexOf("mapbox:")===0}function Ir(s){return z.API_URL_REGEX.test(s)}function za(s){return z.API_CDN_URL_REGEX.test(s)}function uc(s){return z.API_STYLE_REGEX.test(s)&&!Ml(s)}function Ml(s){return z.API_SPRITE_REGEX.test(s)}const Ja=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function io(s){const i=s.match(Ja);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Qa(s){const i=s.params.length?`?${s.params.join("&")}`:"";return`${s.protocol}://${s.authority}${s.path}${i}`}function Hc(s){if(!s)return null;const i=s.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(T.atob(i[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class at{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const o=Hc(z.ACCESS_TOKEN);let h="";return h=o&&o.u?T.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(p,v)=>String.fromCharCode(Number("0x"+v)))):z.ACCESS_TOKEN||"",i?`mapbox.eventData.${i}:${h}`:`mapbox.eventData:${h}`}fetchEventData(){const i=it("localStorage"),o=this.getStorageKey(),h=this.getStorageKey("uuid");if(i)try{const p=T.localStorage.getItem(o);p&&(this.eventData=JSON.parse(p));const v=T.localStorage.getItem(h);v&&(this.anonId=v)}catch{le("Unable to read from LocalStorage")}}saveEventData(){const i=it("localStorage"),o=this.getStorageKey(),h=this.getStorageKey("uuid");if(i)try{T.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&T.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{le("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,o,h,p){if(!z.EVENTS_URL)return;const v=io(z.EVENTS_URL);v.params.push(`access_token=${p||z.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(i).toISOString()},R=o?q(w,o):w,Y={url:Qa(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};this.pendingRequest=function(ee,de){return zi(q(ee,{method:"POST"}),de)}(Y,ee=>{this.pendingRequest=null,h(ee),this.saveEventData(),this.processRequests(p)})}queueRequest(i,o){this.queue.push(i),this.processRequests(o)}}const Oe=new class extends at{constructor(s){super("appUserTurnstile"),this._customAccessToken=s}postTurnstileEvent(s,i){z.EVENTS_URL&&z.ACCESS_TOKEN&&Array.isArray(s)&&s.some(o=>Dr(o)||Ir(o))&&this.queueRequest(Date.now(),i)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=Hc(z.ACCESS_TOKEN),o=i?i.u:z.ACCESS_TOKEN;let h=o!==this.eventData.tokenU;se(this.anonId)||(this.anonId=we(),h=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const v=new Date(this.eventData.lastSuccess),w=new Date(p),R=(p-this.eventData.lastSuccess)/864e5;h=h||R>=1||R<-1||v.getDate()!==w.getDate()}else h=!0;h?this.postEvent(p,{sdkIdentifier:"mapbox-gl-js",sdkVersion:V,skuId:S,"enabled.telemetry":!1,userId:this.anonId},v=>{v||(this.eventData.lastSuccess=p,this.eventData.tokenU=o)},s):this.processRequests()}},Ve=Oe.postTurnstileEvent.bind(Oe),ot=new class extends at{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(s,i,o,h){this.skuToken=i,this.errorCb=h,z.EVENTS_URL&&(o||z.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},o):this.errorCb(new Error(ur)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:o}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),se(this.anonId)||(this.anonId=we()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:V,skuId:S,skuToken:this.skuToken,userId:this.anonId},h=>{h?this.errorCb(h):i&&(this.success[i]=!0)},s))}},ut=ot.postMapLoadEvent.bind(ot),Et=new class extends at{constructor(){super("gljs.performance")}postPerformanceEvent(s,i){z.EVENTS_URL&&(s||z.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},s)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:o}=this.queue.shift(),h=function(p){const v=T.performance.getEntriesByType("resource"),w=T.performance.getEntriesByType("mark"),R=function(Te){const Ae={};if(Te){for(const Ie in Te)if(Ie!=="other")for(const Fe of Te[Ie]){const Xe=`${Ie}ResolveRangeMin`,dt=`${Ie}ResolveRangeMax`,yt=`${Ie}RequestCount`,ct=`${Ie}RequestCachedCount`;Ae[Xe]=Math.min(Ae[Xe]||1/0,Fe.startTime),Ae[dt]=Math.max(Ae[dt]||-1/0,Fe.responseEnd);const ft=St=>{Ae[St]===void 0&&(Ae[St]=0),++Ae[St]};Fe.transferSize!==void 0&&Fe.transferSize===0&&ft(ct),ft(yt)}}return Ae}(function(Te,Ae){const Ie={};if(Te)for(const Fe of Te){const Xe=Ae(Fe);Ie[Xe]===void 0&&(Ie[Xe]=[]),Ie[Xe].push(Fe)}return Ie}(v,_i)),Y=T.devicePixelRatio,ee=T.navigator.connection||T.navigator.mozConnection||T.navigator.webkitConnection,de={counters:[],metadata:[],attributes:[]},_e=(Te,Ae,Ie)=>{Ie!=null&&Te.push({name:Ae,value:Ie.toString()})};for(const Te in R)_e(de.counters,Te,R[Te]);if(p.interactionRange[0]!==1/0&&p.interactionRange[1]!==-1/0&&(_e(de.counters,"interactionRangeMin",p.interactionRange[0]),_e(de.counters,"interactionRangeMax",p.interactionRange[1])),w)for(const Te of Object.keys(li)){const Ae=li[Te],Ie=w.find(Fe=>Fe.name===Ae);Ie&&_e(de.counters,Ae,Ie.startTime)}return _e(de.counters,"visibilityHidden",p.visibilityHidden),_e(de.attributes,"style",function(Te){if(Te)for(const Ae of Te){const Ie=Ae.name.split("?")[0];if(uc(Ie)){const Fe=Ie.split("/").slice(-2);if(Fe.length===2)return`mapbox://styles/${Fe[0]}/${Fe[1]}`}}}(v)),_e(de.attributes,"terrainEnabled",p.terrainEnabled?"true":"false"),_e(de.attributes,"fogEnabled",p.fogEnabled?"true":"false"),_e(de.attributes,"projection",p.projection),_e(de.attributes,"zoom",p.zoom),_e(de.metadata,"devicePixelRatio",Y),_e(de.metadata,"connectionEffectiveType",ee?ee.effectiveType:void 0),_e(de.metadata,"navigatorUserAgent",T.navigator.userAgent),_e(de.metadata,"screenWidth",T.screen.width),_e(de.metadata,"screenHeight",T.screen.height),_e(de.metadata,"windowWidth",T.innerWidth),_e(de.metadata,"windowHeight",T.innerHeight),_e(de.metadata,"mapWidth",p.width/Y),_e(de.metadata,"mapHeight",p.height/Y),_e(de.metadata,"webglRenderer",p.renderer),_e(de.metadata,"webglVendor",p.vendor),_e(de.metadata,"sdkVersion",V),_e(de.metadata,"sdkIdentifier","mapbox-gl-js"),de}(o);for(const p of h.metadata);for(const p of h.counters);for(const p of h.attributes);this.postEvent(i,h,()=>{},s)}},Ot=Et.postPerformanceEvent.bind(Et),Bt=new class extends at{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(s,i,o,h){if(!z.API_URL||!z.SESSION_PATH)return;const p=io(z.API_URL+z.SESSION_PATH);p.params.push(`sku=${i||""}`),p.params.push(`access_token=${h||z.ACCESS_TOKEN||""}`);const v={url:Qa(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(w,R){return zi(q(w,{method:"GET"}),R)}(v,w=>{this.pendingRequest=null,o(w),this.saveEventData(),this.processRequests(h)})}getSessionAPI(s,i,o,h){this.skuToken=i,this.errorCb=h,z.SESSION_PATH&&z.API_URL&&(o||z.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},o):this.errorCb(new Error(ur)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:o}=this.queue.shift();i&&this.success[i]||this.getSession(o,this.skuToken,h=>{h?this.errorCb(h):i&&(this.success[i]=!0)},s)}},Mt=Bt.getSessionAPI.bind(Bt),jt=new Set,li={create:"create",load:"load",fullLoad:"fullLoad"},Ri={mark(s){T.performance.mark(s)},measure(s,i,o){T.performance.measure(s,i,o)}};function _i(s){const i=s.name.split("?")[0];return za(i)&&i.includes("mapbox-gl.js")?"javascript":za(i)&&i.includes("mapbox-gl.css")?"css":function(o){return z.API_FONTS_REGEX.test(o)}(i)?"fontRange":Ml(i)?"sprite":uc(i)?"style":function(o){return z.API_TILEJSON_REGEX.test(o)}(i)?"tilejson":"other"}const on=T.performance;function rn(s){const i=s?s.url.toString():void 0;return on.getEntriesByName(i)}let Xi,hn,Nn,er;const Qi={now:()=>Nn!==void 0?Nn:T.performance.now(),setNow(s){Nn=s},restoreNow(){Nn=void 0},frame(s){const i=T.requestAnimationFrame(s);return{cancel:()=>T.cancelAnimationFrame(i)}},getImageData(s,i=0){const{width:o,height:h}=s;er||(er=T.document.createElement("canvas"));const p=er.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(o>er.width||h>er.height)&&(er.width=o,er.height=h),p.clearRect(-i,-i,o+2*i,h+2*i),p.drawImage(s,0,0,o,h),p.getImageData(-i,-i,o+2*i,h+2*i)},resolveURL:s=>(Xi||(Xi=T.document.createElement("a")),Xi.href=s,Xi.href),get devicePixelRatio(){return T.devicePixelRatio},get prefersReducedMotion(){return!!T.matchMedia&&(hn==null&&(hn=T.matchMedia("(prefers-reduced-motion: reduce)")),hn.matches)}};function Tr(s,i,o){o[s]&&o[s].indexOf(i)!==-1||(o[s]=o[s]||[],o[s].push(i))}function lr(s,i,o){if(o&&o[s]){const h=o[s].indexOf(i);h!==-1&&o[s].splice(h,1)}}class ga{constructor(i,o={}){q(this,o),this.type=i}}class el extends ga{constructor(i,o={}){super("error",q({error:i},o))}}class wo{on(i,o){return this._listeners=this._listeners||{},Tr(i,o,this._listeners),this}off(i,o){return lr(i,o,this._listeners),lr(i,o,this._oneTimeListeners),this}once(i,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Tr(i,o,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,o){typeof i=="string"&&(i=new ga(i,o||{}));const h=i.type;if(this.listens(h)){i.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const R of p)R.call(this,i);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const R of v)lr(h,R,this._oneTimeListeners),R.call(this,i);const w=this._eventedParent;w&&(q(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(i))}else i instanceof el&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,o){return this._eventedParent=i,this._eventedParentData=o,this}}var ni=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function jo(s,...i){for(const o of i)for(const h in o)s[h]=o[h];return s}function as(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function ls(s){if(Array.isArray(s))return s.map(ls);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const o in s)i[o]=ls(s[o]);return i}return as(s)}class pc extends Error{constructor(i,o){super(o),this.message=o,this.key=i}}var Ks=pc;class xh{constructor(i,o=[]){this.parent=i,this.bindings={};for(const[h,p]of o)this.bindings[h]=p}concat(i){return new xh(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var od=xh;const Ls={kind:"null"},Li={kind:"number"},zn={kind:"string"},Fn={kind:"boolean"},Uo={kind:"color"},_a={kind:"object"},yn={kind:"value"},fc={kind:"collator"},ta={kind:"formatted"},Na={kind:"resolvedImage"};function Ss(s,i){return{kind:"array",itemType:s,N:i}}function xr(s){if(s.kind==="array"){const i=xr(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const Vs=[Ls,Li,zn,Fn,Uo,ta,_a,Ss(yn),Na];function Fa(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Fa(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const o of Vs)if(!Fa(o,i))return null}}return`Expected ${xr(s)} but found ${xr(i)} instead.`}function Al(s,i){return i.some(o=>o.kind===s.kind)}function ia(s,i){return i.some(o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s)}var kl,tl={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ja(s){return(s=Math.round(s))<0?0:s>255?255:s}function il(s){return ja(s[s.length-1]==="%"?parseFloat(s)/100*255:parseInt(s))}function Wc(s){return(i=s[s.length-1]==="%"?parseFloat(s)/100:parseFloat(s))<0?0:i>1?1:i;var i}function Yc(s,i,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?s+(i-s)*o*6:2*o<1?i:3*o<2?s+(i-s)*(2/3-o)*6:s}try{kl={}.parseCSSColor=function(s){var i,o=s.replace(/ /g,"").toLowerCase();if(o in tl)return tl[o].slice();if(o[0]==="#")return o.length===4?(i=parseInt(o.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:o.length===7&&(i=parseInt(o.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var h=o.indexOf("("),p=o.indexOf(")");if(h!==-1&&p+1===o.length){var v=o.substr(0,h),w=o.substr(h+1,p-(h+1)).split(","),R=1;switch(v){case"rgba":if(w.length!==4)return null;R=Wc(w.pop());case"rgb":return w.length!==3?null:[il(w[0]),il(w[1]),il(w[2]),R];case"hsla":if(w.length!==4)return null;R=Wc(w.pop());case"hsl":if(w.length!==3)return null;var Y=(parseFloat(w[0])%360+360)%360/360,ee=Wc(w[1]),de=Wc(w[2]),_e=de<=.5?de*(ee+1):de+ee-de*ee,Te=2*de-_e;return[ja(255*Yc(Te,_e,Y+1/3)),ja(255*Yc(Te,_e,Y)),ja(255*Yc(Te,_e,Y-1/3)),R];default:return null}}return null}}catch{}class no{constructor(i,o,h,p=1){this.r=i,this.g=o,this.b=h,this.a=p}static parse(i){if(!i)return;if(i instanceof no)return i;if(typeof i!="string")return;const o=kl(i);return o?new no(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[i,o,h,p]=this.toArray();return`rgba(${Math.round(i)},${Math.round(o)},${Math.round(h)},${p})`}toArray(){const{r:i,g:o,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*i/p,255*o/p,255*h/p,p]}toArray01(){const{r:i,g:o,b:h,a:p}=this;return p===0?[0,0,0,0]:[i/p,o/p,h/p,p]}toArray01PremultipliedAlpha(){const{r:i,g:o,b:h,a:p}=this;return[i,o,h,p]}}no.black=new no(0,0,0,1),no.white=new no(1,1,1,1),no.transparent=new no(0,0,0,0),no.red=new no(1,0,0,1),no.blue=new no(0,0,1,1);var is=no;class Pl{constructor(i,o,h){this.sensitivity=i?o?"variant":"case":o?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,o){return this.collator.compare(i,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ad{constructor(i,o,h,p,v){this.text=i.normalize?i.normalize():i,this.image=o,this.scale=h,this.fontStack=p,this.textColor=v}}class Os{constructor(i){this.sections=i}static fromString(i){return new Os([new ad(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Os?i:Os.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const o of this.sections){if(o.image){i.push(["image",o.image.name]);continue}i.push(o.text);const h={};o.fontStack&&(h["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(h["font-scale"]=o.scale),o.textColor&&(h["text-color"]=["rgba"].concat(o.textColor.toArray())),i.push(h)}return i}}class Go{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Go({name:i,available:!1}):null}serialize(){return["image",this.name]}}function su(s,i,o,h){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof o=="number"&&o>=0&&o<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[s,i,o,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[s,i,o,h]:[s,i,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function bh(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof is||s instanceof Pl||s instanceof Os||s instanceof Go)return!0;if(Array.isArray(s)){for(const i of s)if(!bh(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!bh(s[i]))return!1;return!0}return!1}function ys(s){if(s===null)return Ls;if(typeof s=="string")return zn;if(typeof s=="boolean")return Fn;if(typeof s=="number")return Li;if(s instanceof is)return Uo;if(s instanceof Pl)return fc;if(s instanceof Os)return ta;if(s instanceof Go)return Na;if(Array.isArray(s)){const i=s.length;let o;for(const h of s){const p=ys(h);if(o){if(o===p)continue;o=yn;break}o=p}return Ss(o||yn,i)}return _a}function Dl(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof is||s instanceof Os||s instanceof Go?s.toString():JSON.stringify(s)}class wh{constructor(i,o){this.type=i,this.value=o}static parse(i,o){if(i.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!bh(i[1]))return o.error("invalid value");const h=i[1];let p=ys(h);const v=o.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new wh(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof is?["rgba"].concat(this.value.toArray()):this.value instanceof Os?this.value.serialize():this.value}}var Il=wh,Es=class{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}};const nl={string:zn,number:Li,boolean:Fn,object:_a};class Th{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let h,p=1;const v=i[0];if(v==="array"){let R,Y;if(i.length>2){const ee=i[1];if(typeof ee!="string"||!(ee in nl)||ee==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);R=nl[ee],p++}else R=yn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return o.error('The length argument to "array" must be a positive integer literal',2);Y=i[2],p++}h=Ss(R,Y)}else h=nl[v];const w=[];for(;p<i.length;p++){const R=o.parse(i[p],p,yn);if(!R)return null;w.push(R)}return new Th(h,w)}evaluate(i){for(let o=0;o<this.args.length;o++){const h=this.args[o].evaluate(i);if(!Fa(this.type,ys(h)))return h;if(o===this.args.length-1)throw new Es(`Expected value to be of type ${xr(this.type)}, but found ${xr(ys(h))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,o=[i.kind];if(i.kind==="array"){const h=i.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){o.push(h.kind);const p=i.N;(typeof p=="number"||this.args.length>1)&&o.push(p)}}return o.concat(this.args.map(h=>h.serialize()))}}var nr=Th;class pr{constructor(i){this.type=ta,this.sections=i}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return o.error("First argument must be an image or text section.");const p=[];let v=!1;for(let w=1;w<=i.length-1;++w){const R=i[w];if(v&&typeof R=="object"&&!Array.isArray(R)){v=!1;let Y=null;if(R["font-scale"]&&(Y=o.parse(R["font-scale"],1,Li),!Y))return null;let ee=null;if(R["text-font"]&&(ee=o.parse(R["text-font"],1,Ss(zn)),!ee))return null;let de=null;if(R["text-color"]&&(de=o.parse(R["text-color"],1,Uo),!de))return null;const _e=p[p.length-1];_e.scale=Y,_e.font=ee,_e.textColor=de}else{const Y=o.parse(i[w],1,yn);if(!Y)return null;const ee=Y.type.kind;if(ee!=="string"&&ee!=="value"&&ee!=="null"&&ee!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:Y,scale:null,font:null,textColor:null})}}return new pr(p)}evaluate(i){return new Os(this.sections.map(o=>{const h=o.content.evaluate(i);return ys(h)===Na?new ad("",h,null,null,null):new ad(Dl(h),null,o.scale?o.scale.evaluate(i):null,o.font?o.font.evaluate(i).join(","):null,o.textColor?o.textColor.evaluate(i):null)}))}eachChild(i){for(const o of this.sections)i(o.content),o.scale&&i(o.scale),o.font&&i(o.font),o.textColor&&i(o.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const o of this.sections){i.push(o.content.serialize());const h={};o.scale&&(h["font-scale"]=o.scale.serialize()),o.font&&(h["text-font"]=o.font.serialize()),o.textColor&&(h["text-color"]=o.textColor.serialize()),i.push(h)}return i}}class Sh{constructor(i){this.type=Na,this.input=i}static parse(i,o){if(i.length!==2)return o.error("Expected two arguments.");const h=o.parse(i[1],1,zn);return h?new Sh(h):o.error("No image name provided.")}evaluate(i){const o=this.input.evaluate(i),h=Go.fromString(o);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(o)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const _p={"to-boolean":Fn,"to-color":Uo,"to-number":Li,"to-string":zn};class ld{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");const h=i[0];if((h==="to-boolean"||h==="to-string")&&i.length!==2)return o.error("Expected one argument.");const p=_p[h],v=[];for(let w=1;w<i.length;w++){const R=o.parse(i[w],w,yn);if(!R)return null;v.push(R)}return new ld(p,v)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let o,h;for(const p of this.args){if(o=p.evaluate(i),h=null,o instanceof is)return o;if(typeof o=="string"){const v=i.parseColor(o);if(v)return v}else if(Array.isArray(o)&&(h=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:su(o[0],o[1],o[2],o[3]),!h))return new is(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Es(h||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const h of this.args){if(o=h.evaluate(i),o===null)return 0;const p=Number(o);if(!isNaN(p))return p}throw new Es(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?Os.fromString(Dl(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Go.fromString(Dl(this.args[0].evaluate(i))):Dl(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new pr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Sh(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(o=>{i.push(o.serialize())}),i}}var na=ld;const Xc=["Unknown","Point","LineString","Polygon"];var Eh=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:o,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(o*i-s[0])+this.featureDistanceData.bearing[1]*(h*i-s[1])}return 0}parseColor(s){let i=this._parseColorCache[s];return i||(i=this._parseColorCache[s]=is.parse(s)),i}};class Ll{constructor(i,o,h,p){this.name=i,this.type=o,this._evaluate=h,this.args=p}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,o){const h=i[0],p=Ll.definitions[h];if(!p)return o.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,w=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,R=w.filter(([ee])=>!Array.isArray(ee)||ee.length===i.length-1);let Y=null;for(const[ee,de]of R){Y=new Cr(o.registry,o.path,null,o.scope);const _e=[];let Te=!1;for(let Ae=1;Ae<i.length;Ae++){const Ie=i[Ae],Fe=Array.isArray(ee)?ee[Ae-1]:ee.type,Xe=Y.parse(Ie,1+_e.length,Fe);if(!Xe){Te=!0;break}_e.push(Xe)}if(!Te)if(Array.isArray(ee)&&ee.length!==_e.length)Y.error(`Expected ${ee.length} arguments, but found ${_e.length} instead.`);else{for(let Ae=0;Ae<_e.length;Ae++){const Ie=Array.isArray(ee)?ee[Ae]:ee.type,Fe=_e[Ae];Y.concat(Ae+1).checkSubtype(Ie,Fe.type)}if(Y.errors.length===0)return new Ll(h,v,de,_e)}}if(R.length===1)o.errors.push(...Y.errors);else{const ee=(R.length?R:w).map(([_e])=>{return Te=_e,Array.isArray(Te)?`(${Te.map(xr).join(", ")})`:`(${xr(Te.type)}...)`;var Te}).join(" | "),de=[];for(let _e=1;_e<i.length;_e++){const Te=o.parse(i[_e],1+de.length);if(!Te)return null;de.push(xr(Te.type))}o.error(`Expected arguments of type ${ee}, but found (${de.join(", ")}) instead.`)}return null}static register(i,o){Ll.definitions=o;for(const h in o)i[h]=Ll}}var rl=Ll;class vs{constructor(i,o,h){this.type=fc,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=o}static parse(i,o){if(i.length!==2)return o.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return o.error("Collator options argument must be an object.");const p=o.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Fn);if(!p)return null;const v=o.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Fn);if(!v)return null;let w=null;return h.locale&&(w=o.parse(h.locale,1,zn),!w)?null:new vs(p,v,w)}evaluate(i){return new Pl(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const j=8192;function oe(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function ge(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function Se(s,i){const o=(180+s[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,p=Math.pow(2,i.z);return[Math.round(o*p*j),Math.round(h*p*j)]}function ze(s,i,o){const h=s[0]-i[0],p=s[1]-i[1],v=s[0]-o[0],w=s[1]-o[1];return h*w-v*p==0&&h*v<=0&&p*w<=0}function je(s,i){let o=!1;for(let w=0,R=i.length;w<R;w++){const Y=i[w];for(let ee=0,de=Y.length;ee<de-1;ee++){if(ze(s,Y[ee],Y[ee+1]))return!1;(p=Y[ee])[1]>(h=s)[1]!=(v=Y[ee+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(o=!o)}}var h,p,v;return o}function He(s,i){for(let o=0;o<i.length;o++)if(je(s,i[o]))return!0;return!1}function Ct(s,i,o,h){const p=h[0]-o[0],v=h[1]-o[1],w=(s[0]-o[0])*v-p*(s[1]-o[1]),R=(i[0]-o[0])*v-p*(i[1]-o[1]);return w>0&&R<0||w<0&&R>0}function vt(s,i,o){for(const ee of o)for(let de=0;de<ee.length-1;++de)if((R=[(w=ee[de+1])[0]-(v=ee[de])[0],w[1]-v[1]])[0]*(Y=[(p=i)[0]-(h=s)[0],p[1]-h[1]])[1]-R[1]*Y[0]!=0&&Ct(h,p,v,w)&&Ct(v,w,h,p))return!0;var h,p,v,w,R,Y;return!1}function Gt(s,i){for(let o=0;o<s.length;++o)if(!je(s[o],i))return!1;for(let o=0;o<s.length-1;++o)if(vt(s[o],s[o+1],i))return!1;return!0}function ii(s,i){for(let o=0;o<i.length;o++)if(Gt(s,i[o]))return!0;return!1}function fi(s,i,o){const h=[];for(let p=0;p<s.length;p++){const v=[];for(let w=0;w<s[p].length;w++){const R=Se(s[p][w],o);oe(i,R),v.push(R)}h.push(v)}return h}function Kt(s,i,o){const h=[];for(let p=0;p<s.length;p++){const v=fi(s[p],i,o);h.push(v)}return h}function ei(s,i,o,h){if(s[0]<o[0]||s[0]>o[2]){const p=.5*h;let v=s[0]-o[0]>p?-h:o[0]-s[0]>p?h:0;v===0&&(v=s[0]-o[2]>p?-h:o[2]-s[0]>p?h:0),s[0]+=v}oe(i,s)}function Pi(s,i,o,h){const p=Math.pow(2,h.z)*j,v=[h.x*j,h.y*j],w=[];if(!s)return w;for(const R of s)for(const Y of R){const ee=[Y.x+v[0],Y.y+v[1]];ei(ee,i,o,p),w.push(ee)}return w}function Ln(s,i,o,h){const p=Math.pow(2,h.z)*j,v=[h.x*j,h.y*j],w=[];if(!s)return w;for(const Y of s){const ee=[];for(const de of Y){const _e=[de.x+v[0],de.y+v[1]];oe(i,_e),ee.push(_e)}w.push(ee)}if(i[2]-i[0]<=p/2){(R=i)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const Y of w)for(const ee of Y)ei(ee,i,o,p)}var R;return w}class en{constructor(i,o){this.type=Fn,this.geojson=i,this.geometries=o}static parse(i,o){if(i.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(bh(i[1])){const h=i[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new en(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new en(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new en(h,h)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(o,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(!w)return!1;if(h.type==="Polygon"){const R=fi(h.coordinates,v,w),Y=Pi(o.geometry(),p,v,w);if(!ge(p,v))return!1;for(const ee of Y)if(!je(ee,R))return!1}if(h.type==="MultiPolygon"){const R=Kt(h.coordinates,v,w),Y=Pi(o.geometry(),p,v,w);if(!ge(p,v))return!1;for(const ee of Y)if(!He(ee,R))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(o,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(!w)return!1;if(h.type==="Polygon"){const R=fi(h.coordinates,v,w),Y=Ln(o.geometry(),p,v,w);if(!ge(p,v))return!1;for(const ee of Y)if(!Gt(ee,R))return!1}if(h.type==="MultiPolygon"){const R=Kt(h.coordinates,v,w),Y=Ln(o.geometry(),p,v,w);if(!ge(p,v))return!1;for(const ee of Y)if(!ii(ee,R))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Qr=en;function zr(s){if(s instanceof rl&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Qr)return!1;let i=!0;return s.eachChild(o=>{i&&!zr(o)&&(i=!1)}),i}function Vn(s){if(s instanceof rl&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(o=>{i&&!Vn(o)&&(i=!1)}),i}function $n(s,i){if(s instanceof rl&&i.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild(h=>{o&&!$n(h,i)&&(o=!1)}),o}class Tn{constructor(i,o){this.type=o.type,this.name=i,this.boundExpression=o}static parse(i,o){if(i.length!==2||typeof i[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const h=i[1];return o.scope.has(h)?new Tn(h,o.scope.get(h)):o.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Js=Tn;class Xn{constructor(i,o=[],h,p=new od,v=[]){this.registry=i,this.path=o,this.key=o.map(w=>`[${w}]`).join(""),this.scope=p,this.errors=v,this.expectedType=h}parse(i,o,h,p,v={}){return o?this.concat(o,h,p)._parse(i,v):this._parse(i,v)}_parse(i,o){function h(p,v,w){return w==="assert"?new nr(v,[p]):w==="coerce"?new na(v,[p]):p}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=i[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let w=v.parse(i,this);if(!w)return null;if(this.expectedType){const R=this.expectedType,Y=w.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||Y.kind!=="value")if(R.kind!=="color"&&R.kind!=="formatted"&&R.kind!=="resolvedImage"||Y.kind!=="value"&&Y.kind!=="string"){if(this.checkSubtype(R,Y))return null}else w=h(w,R,o.typeAnnotation||"coerce");else w=h(w,R,o.typeAnnotation||"assert")}if(!(w instanceof Il)&&w.type.kind!=="resolvedImage"&&ya(w)){const R=new Eh;try{w=new Il(w.type,w.evaluate(R))}catch(Y){return this.error(Y.message),null}}return w}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,o,h){const p=typeof i=="number"?this.path.concat(i):this.path,v=h?this.scope.concat(h):this.scope;return new Xn(this.registry,p,o||null,v,this.errors)}error(i,...o){const h=`${this.key}${o.map(p=>`[${p}]`).join("")}`;this.errors.push(new Ks(h,i))}checkSubtype(i,o){const h=Fa(i,o);return h&&this.error(h),h}}var Cr=Xn;function ya(s){if(s instanceof Js)return ya(s.boundExpression);if(s instanceof rl&&s.name==="error"||s instanceof vs||s instanceof Qr)return!1;const i=s instanceof na||s instanceof nr;let o=!0;return s.eachChild(h=>{o=i?o&&ya(h):o&&h instanceof Il}),!!o&&zr(s)&&$n(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ol(s,i){const o=s.length-1;let h,p,v=0,w=o,R=0;for(;v<=w;)if(R=Math.floor((v+w)/2),h=s[R],p=s[R+1],h<=i){if(R===o||i<p)return R;v=R+1}else{if(!(h>i))throw new Es("Input is not a number.");w=R-1}return 0}class Rs{constructor(i,o,h){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(i,o){if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");const h=o.parse(i[1],1,Li);if(!h)return null;const p=[];let v=null;o.expectedType&&o.expectedType.kind!=="value"&&(v=o.expectedType);for(let w=1;w<i.length;w+=2){const R=w===1?-1/0:i[w],Y=i[w+1],ee=w,de=w+1;if(typeof R!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(p.length&&p[p.length-1][0]>=R)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ee);const _e=o.parse(Y,de,v);if(!_e)return null;v=v||_e.type,p.push([R,_e])}return new Rs(v,h,p)}evaluate(i){const o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(i);const p=this.input.evaluate(i);if(p<=o[0])return h[0].evaluate(i);const v=o.length;return p>=o[v-1]?h[v-1].evaluate(i):h[Ol(o,p)].evaluate(i)}eachChild(i){i(this.input);for(const o of this.outputs)i(o)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&i.push(this.labels[o]),i.push(this.outputs[o].serialize());return i}}var To=Rs;function Pn(s,i,o){return s*(1-o)+i*o}var $s=Object.freeze({__proto__:null,number:Pn,color:function(s,i,o){return new is(Pn(s.r,i.r,o),Pn(s.g,i.g,o),Pn(s.b,i.b,o),Pn(s.a,i.a,o))},array:function(s,i,o){return s.map((h,p)=>Pn(h,i[p],o))}});const ra=.95047,uo=1.08883,Vo=4/29,Rl=6/29,Ua=3*Rl*Rl,Ch=Math.PI/180,fr=180/Math.PI;function $o(s){return s>.008856451679035631?Math.pow(s,1/3):s/Ua+Vo}function qc(s){return s>Rl?s*s*s:Ua*(s-Vo)}function mc(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function ro(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Bl(s){const i=ro(s.r),o=ro(s.g),h=ro(s.b),p=$o((.4124564*i+.3575761*o+.1804375*h)/ra),v=$o((.2126729*i+.7151522*o+.072175*h)/1);return{l:116*v-16,a:500*(p-v),b:200*(v-$o((.0193339*i+.119192*o+.9503041*h)/uo)),alpha:s.a}}function gc(s){let i=(s.l+16)/116,o=isNaN(s.a)?i:i+s.a/500,h=isNaN(s.b)?i:i-s.b/200;return i=1*qc(i),o=ra*qc(o),h=uo*qc(h),new is(mc(3.2404542*o-1.5371385*i-.4985314*h),mc(-.969266*o+1.8760108*i+.041556*h),mc(.0556434*o-.2040259*i+1.0572252*h),s.alpha)}function cd(s,i,o){const h=i-s;return s+o*(h>180||h<-180?h-360*Math.round(h/360):h)}const _c={forward:Bl,reverse:gc,interpolate:function(s,i,o){return{l:Pn(s.l,i.l,o),a:Pn(s.a,i.a,o),b:Pn(s.b,i.b,o),alpha:Pn(s.alpha,i.alpha,o)}}},yc={forward:function(s){const{l:i,a:o,b:h}=Bl(s),p=Math.atan2(h,o)*fr;return{h:p<0?p+360:p,c:Math.sqrt(o*o+h*h),l:i,alpha:s.a}},reverse:function(s){const i=s.h*Ch,o=s.c;return gc({l:s.l,a:Math.cos(i)*o,b:Math.sin(i)*o,alpha:s.alpha})},interpolate:function(s,i,o){return{h:cd(s.h,i.h,o),c:Pn(s.c,i.c,o),l:Pn(s.l,i.l,o),alpha:Pn(s.alpha,i.alpha,o)}}};var ou=Object.freeze({__proto__:null,lab:_c,hcl:yc});class zl{constructor(i,o,h,p,v){this.type=i,this.operator=o,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[w,R]of v)this.labels.push(w),this.outputs.push(R)}static interpolationFactor(i,o,h,p){let v=0;if(i.name==="exponential")v=hd(o,i.base,h,p);else if(i.name==="linear")v=hd(o,1,h,p);else if(i.name==="cubic-bezier"){const w=i.controlPoints;v=new k(w[0],w[1],w[2],w[3]).solve(hd(o,1,h,p))}return v}static parse(i,o){let[h,p,v,...w]=i;if(!Array.isArray(p)||p.length===0)return o.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const ee=p[1];if(typeof ee!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:ee}}else{if(p[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const ee=p.slice(1);if(ee.length!==4||ee.some(de=>typeof de!="number"||de<0||de>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:ee}}}if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(v=o.parse(v,2,Li),!v)return null;const R=[];let Y=null;h==="interpolate-hcl"||h==="interpolate-lab"?Y=Uo:o.expectedType&&o.expectedType.kind!=="value"&&(Y=o.expectedType);for(let ee=0;ee<w.length;ee+=2){const de=w[ee],_e=w[ee+1],Te=ee+3,Ae=ee+4;if(typeof de!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Te);if(R.length&&R[R.length-1][0]>=de)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Te);const Ie=o.parse(_e,Ae,Y);if(!Ie)return null;Y=Y||Ie.type,R.push([de,Ie])}return Y.kind==="number"||Y.kind==="color"||Y.kind==="array"&&Y.itemType.kind==="number"&&typeof Y.N=="number"?new zl(Y,h,p,v,R):o.error(`Type ${xr(Y)} is not interpolatable.`)}evaluate(i){const o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(i);const p=this.input.evaluate(i);if(p<=o[0])return h[0].evaluate(i);const v=o.length;if(p>=o[v-1])return h[v-1].evaluate(i);const w=Ol(o,p),R=zl.interpolationFactor(this.interpolation,p,o[w],o[w+1]),Y=h[w].evaluate(i),ee=h[w+1].evaluate(i);return this.operator==="interpolate"?$s[this.type.kind.toLowerCase()](Y,ee,R):this.operator==="interpolate-hcl"?yc.reverse(yc.interpolate(yc.forward(Y),yc.forward(ee),R)):_c.reverse(_c.interpolate(_c.forward(Y),_c.forward(ee),R))}eachChild(i){i(this.input);for(const o of this.outputs)i(o)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,i,this.input.serialize()];for(let h=0;h<this.labels.length;h++)o.push(this.labels[h],this.outputs[h].serialize());return o}}function hd(s,i,o,h){const p=h-o,v=s-o;return p===0?0:i===1?v/p:(Math.pow(i,v)-1)/(Math.pow(i,p)-1)}var va=zl;class Ga{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expectected at least one argument.");let h=null;const p=o.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const R of i.slice(1)){const Y=o.parse(R,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!Y)return null;h=h||Y.type,v.push(Y)}const w=p&&v.some(R=>Fa(p,R.type));return new Ga(w?yn:h,v)}evaluate(i){let o,h=null,p=0;for(const v of this.args){if(p++,h=v.evaluate(i),h&&h instanceof Go&&!h.available&&(o||(o=h),h=null,p===this.args.length))return o;if(h!==null)break}return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(o=>{i.push(o.serialize())}),i}}var Nl=Ga;class Mh{constructor(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const o of this.bindings)i(o[1]);i(this.result)}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let v=1;v<i.length-1;v+=2){const w=i[v];if(typeof w!="string")return o.error(`Expected string, but found ${typeof w} instead.`,v);if(/[^a-zA-Z0-9_]/.test(w))return o.error("Variable names must contain only alphanumeric characters or '_'.",v);const R=o.parse(i[v+1],v+1);if(!R)return null;h.push([w,R])}const p=o.parse(i[i.length-1],i.length-1,o.expectedType,h);return p?new Mh(h,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[o,h]of this.bindings)i.push(o,h.serialize());return i.push(this.result.serialize()),i}}var vc=Mh;class Ho{constructor(i,o,h){this.type=i,this.index=o,this.input=h}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=o.parse(i[1],1,Li),p=o.parse(i[2],2,Ss(o.expectedType||yn));return h&&p?new Ho(p.type.itemType,h,p):null}evaluate(i){const o=this.index.evaluate(i),h=this.input.evaluate(i);if(o<0)throw new Es(`Array index out of bounds: ${o} < 0.`);if(o>=h.length)throw new Es(`Array index out of bounds: ${o} > ${h.length-1}.`);if(o!==Math.floor(o))throw new Es(`Array index must be an integer, but found ${o} instead.`);return h[o]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Hs=Ho;class sl{constructor(i,o){this.type=Fn,this.needle=i,this.haystack=o}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=o.parse(i[1],1,yn),p=o.parse(i[2],2,yn);return h&&p?Al(h.type,[Fn,zn,Li,Ls,yn])?new sl(h,p):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${xr(h.type)} instead`):null}evaluate(i){const o=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(h==null)return!1;if(!ia(o,["boolean","string","number","null"]))throw new Es(`Expected first argument to be of type boolean, string, number or null, but found ${xr(ys(o))} instead.`);if(!ia(h,["string","array"]))throw new Es(`Expected second argument to be of type array or string, but found ${xr(ys(h))} instead.`);return h.indexOf(o)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var dd=sl;class Zc{constructor(i,o,h){this.type=Li,this.needle=i,this.haystack=o,this.fromIndex=h}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=o.parse(i[1],1,yn),p=o.parse(i[2],2,yn);if(!h||!p)return null;if(!Al(h.type,[Fn,zn,Li,Ls,yn]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${xr(h.type)} instead`);if(i.length===4){const v=o.parse(i[3],3,Li);return v?new Zc(h,p,v):null}return new Zc(h,p)}evaluate(i){const o=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!ia(o,["boolean","string","number","null"]))throw new Es(`Expected first argument to be of type boolean, string, number or null, but found ${xr(ys(o))} instead.`);if(!ia(h,["string","array"]))throw new Es(`Expected second argument to be of type array or string, but found ${xr(ys(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(i);return h.indexOf(o,p)}return h.indexOf(o)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var yp=Zc;class rr{constructor(i,o,h,p,v,w){this.inputType=i,this.type=o,this.input=h,this.cases=p,this.outputs=v,this.otherwise=w}static parse(i,o){if(i.length<5)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return o.error("Expected an even number of arguments.");let h,p;o.expectedType&&o.expectedType.kind!=="value"&&(p=o.expectedType);const v={},w=[];for(let ee=2;ee<i.length-1;ee+=2){let de=i[ee];const _e=i[ee+1];Array.isArray(de)||(de=[de]);const Te=o.concat(ee);if(de.length===0)return Te.error("Expected at least one branch label.");for(const Ie of de){if(typeof Ie!="number"&&typeof Ie!="string")return Te.error("Branch labels must be numbers or strings.");if(typeof Ie=="number"&&Math.abs(Ie)>Number.MAX_SAFE_INTEGER)return Te.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ie=="number"&&Math.floor(Ie)!==Ie)return Te.error("Numeric branch labels must be integer values.");if(h){if(Te.checkSubtype(h,ys(Ie)))return null}else h=ys(Ie);if(v[String(Ie)]!==void 0)return Te.error("Branch labels must be unique.");v[String(Ie)]=w.length}const Ae=o.parse(_e,ee,p);if(!Ae)return null;p=p||Ae.type,w.push(Ae)}const R=o.parse(i[1],1,yn);if(!R)return null;const Y=o.parse(i[i.length-1],i.length-1,p);return Y?R.type.kind!=="value"&&o.concat(1).checkSubtype(h,R.type)?null:new rr(h,p,R,v,w,Y):null}evaluate(i){const o=this.input.evaluate(i);return(ys(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),h=[],p={};for(const w of o){const R=p[this.cases[w]];R===void 0?(p[this.cases[w]]=h.length,h.push([this.cases[w],[w]])):h[R][1].push(w)}const v=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,R]of h)i.push(R.length===1?v(R[0]):R.map(v)),i.push(this.outputs[w].serialize());return i.push(this.otherwise.serialize()),i}}var po=rr;class Ws{constructor(i,o,h){this.type=i,this.branches=o,this.otherwise=h}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return o.error("Expected an odd number of arguments.");let h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);const p=[];for(let w=1;w<i.length-1;w+=2){const R=o.parse(i[w],w,Fn);if(!R)return null;const Y=o.parse(i[w+1],w+1,h);if(!Y)return null;p.push([R,Y]),h=h||Y.type}const v=o.parse(i[i.length-1],i.length-1,h);return v?new Ws(h,p,v):null}evaluate(i){for(const[o,h]of this.branches)if(o.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[o,h]of this.branches)i(o),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(o=>{i.push(o.serialize())}),i}}var So=Ws;class Fl{constructor(i,o,h,p){this.type=i,this.input=o,this.beginIndex=h,this.endIndex=p}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=o.parse(i[1],1,yn),p=o.parse(i[2],2,Li);if(!h||!p)return null;if(!Al(h.type,[Ss(yn),zn,yn]))return o.error(`Expected first argument to be of type array or string, but found ${xr(h.type)} instead`);if(i.length===4){const v=o.parse(i[3],3,Li);return v?new Fl(h.type,h,p,v):null}return new Fl(h.type,h,p)}evaluate(i){const o=this.input.evaluate(i),h=this.beginIndex.evaluate(i);if(!ia(o,["string","array"]))throw new Es(`Expected first argument to be of type array or string, but found ${xr(ys(o))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(i);return o.slice(h,p)}return o.slice(h)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var au=Fl;function lu(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function cu(s,i,o,h){return h.compare(i,o)===0}function Eo(s,i,o){const h=s!=="=="&&s!=="!=";return class M8{constructor(v,w,R){this.type=Fn,this.lhs=v,this.rhs=w,this.collator=R,this.hasUntypedArgument=v.type.kind==="value"||w.type.kind==="value"}static parse(v,w){if(v.length!==3&&v.length!==4)return w.error("Expected two or three arguments.");const R=v[0];let Y=w.parse(v[1],1,yn);if(!Y)return null;if(!lu(R,Y.type))return w.concat(1).error(`"${R}" comparisons are not supported for type '${xr(Y.type)}'.`);let ee=w.parse(v[2],2,yn);if(!ee)return null;if(!lu(R,ee.type))return w.concat(2).error(`"${R}" comparisons are not supported for type '${xr(ee.type)}'.`);if(Y.type.kind!==ee.type.kind&&Y.type.kind!=="value"&&ee.type.kind!=="value")return w.error(`Cannot compare types '${xr(Y.type)}' and '${xr(ee.type)}'.`);h&&(Y.type.kind==="value"&&ee.type.kind!=="value"?Y=new nr(ee.type,[Y]):Y.type.kind!=="value"&&ee.type.kind==="value"&&(ee=new nr(Y.type,[ee])));let de=null;if(v.length===4){if(Y.type.kind!=="string"&&ee.type.kind!=="string"&&Y.type.kind!=="value"&&ee.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(de=w.parse(v[3],3,fc),!de)return null}return new M8(Y,ee,de)}evaluate(v){const w=this.lhs.evaluate(v),R=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const Y=ys(w),ee=ys(R);if(Y.kind!==ee.kind||Y.kind!=="string"&&Y.kind!=="number")throw new Es(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${Y.kind}, ${ee.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const Y=ys(w),ee=ys(R);if(Y.kind!=="string"||ee.kind!=="string")return i(v,w,R)}return this.collator?o(v,w,R,this.collator.evaluate(v)):i(v,w,R)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[s];return this.eachChild(w=>{v.push(w.serialize())}),v}}}const It=Eo("==",function(s,i,o){return i===o},cu),ci=Eo("!=",function(s,i,o){return i!==o},function(s,i,o,h){return!cu(0,i,o,h)}),ti=Eo("<",function(s,i,o){return i<o},function(s,i,o,h){return h.compare(i,o)<0}),Zi=Eo(">",function(s,i,o){return i>o},function(s,i,o,h){return h.compare(i,o)>0}),Dn=Eo("<=",function(s,i,o){return i<=o},function(s,i,o,h){return h.compare(i,o)<=0}),cr=Eo(">=",function(s,i,o){return i>=o},function(s,i,o,h){return h.compare(i,o)>=0});class ps{constructor(i,o,h,p,v,w){this.type=zn,this.number=i,this.locale=o,this.currency=h,this.unit=p,this.minFractionDigits=v,this.maxFractionDigits=w}static parse(i,o){if(i.length!==3)return o.error("Expected two arguments.");const h=o.parse(i[1],1,Li);if(!h)return null;const p=i[2];if(typeof p!="object"||Array.isArray(p))return o.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=o.parse(p.locale,1,zn),!v))return null;let w=null;if(p.currency&&(w=o.parse(p.currency,1,zn),!w))return null;let R=null;if(p.unit&&(R=o.parse(p.unit,1,zn),!R))return null;let Y=null;if(p["min-fraction-digits"]&&(Y=o.parse(p["min-fraction-digits"],1,Li),!Y))return null;let ee=null;return p["max-fraction-digits"]&&(ee=o.parse(p["max-fraction-digits"],1,Li),!ee)?null:new ps(h,v,w,R,Y,ee)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class mr{constructor(i){this.type=Li,this.input=i}static parse(i,o){if(i.length!==2)return o.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=o.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${xr(h.type)} instead.`):new mr(h):null}evaluate(i){const o=this.input.evaluate(i);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Es(`Expected value to be of type string or array, but found ${xr(ys(o))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(o=>{i.push(o.serialize())}),i}}const xc={"==":It,"!=":ci,">":Zi,"<":ti,">=":cr,"<=":Dn,array:nr,at:Hs,boolean:nr,case:So,coalesce:Nl,collator:vs,format:pr,image:Sh,in:dd,"index-of":yp,interpolate:va,"interpolate-hcl":va,"interpolate-lab":va,length:mr,let:vc,literal:Il,match:po,number:nr,"number-format":ps,object:nr,slice:au,step:To,string:nr,"to-boolean":na,"to-color":na,"to-number":na,"to-string":na,var:Js,within:Qr};function Ah(s,[i,o,h,p]){i=i.evaluate(s),o=o.evaluate(s),h=h.evaluate(s);const v=p?p.evaluate(s):1,w=su(i,o,h,v);if(w)throw new Es(w);return new is(i/255*v,o/255*v,h/255*v,v)}function fo(s,i){return s in i}function Ke(s,i){const o=i[s];return o===void 0?null:o}function xt(s){return{type:s}}rl.register(xc,{error:[{kind:"error"},[zn],(s,[i])=>{throw new Es(i.evaluate(s))}],typeof:[zn,[yn],(s,[i])=>xr(ys(i.evaluate(s)))],"to-rgba":[Ss(Li,4),[Uo],(s,[i])=>i.evaluate(s).toArray()],rgb:[Uo,[Li,Li,Li],Ah],rgba:[Uo,[Li,Li,Li,Li],Ah],has:{type:Fn,overloads:[[[zn],(s,[i])=>fo(i.evaluate(s),s.properties())],[[zn,_a],(s,[i,o])=>fo(i.evaluate(s),o.evaluate(s))]]},get:{type:yn,overloads:[[[zn],(s,[i])=>Ke(i.evaluate(s),s.properties())],[[zn,_a],(s,[i,o])=>Ke(i.evaluate(s),o.evaluate(s))]]},"feature-state":[yn,[zn],(s,[i])=>Ke(i.evaluate(s),s.featureState||{})],properties:[_a,[],s=>s.properties()],"geometry-type":[zn,[],s=>s.geometryType()],id:[yn,[],s=>s.id()],zoom:[Li,[],s=>s.globals.zoom],pitch:[Li,[],s=>s.globals.pitch||0],"distance-from-center":[Li,[],s=>s.distanceFromCenter()],"heatmap-density":[Li,[],s=>s.globals.heatmapDensity||0],"line-progress":[Li,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[Li,[],s=>s.globals.skyRadialProgress||0],accumulated:[yn,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Li,xt(Li),(s,i)=>{let o=0;for(const h of i)o+=h.evaluate(s);return o}],"*":[Li,xt(Li),(s,i)=>{let o=1;for(const h of i)o*=h.evaluate(s);return o}],"-":{type:Li,overloads:[[[Li,Li],(s,[i,o])=>i.evaluate(s)-o.evaluate(s)],[[Li],(s,[i])=>-i.evaluate(s)]]},"/":[Li,[Li,Li],(s,[i,o])=>i.evaluate(s)/o.evaluate(s)],"%":[Li,[Li,Li],(s,[i,o])=>i.evaluate(s)%o.evaluate(s)],ln2:[Li,[],()=>Math.LN2],pi:[Li,[],()=>Math.PI],e:[Li,[],()=>Math.E],"^":[Li,[Li,Li],(s,[i,o])=>Math.pow(i.evaluate(s),o.evaluate(s))],sqrt:[Li,[Li],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[Li,[Li],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[Li,[Li],(s,[i])=>Math.log(i.evaluate(s))],log2:[Li,[Li],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[Li,[Li],(s,[i])=>Math.sin(i.evaluate(s))],cos:[Li,[Li],(s,[i])=>Math.cos(i.evaluate(s))],tan:[Li,[Li],(s,[i])=>Math.tan(i.evaluate(s))],asin:[Li,[Li],(s,[i])=>Math.asin(i.evaluate(s))],acos:[Li,[Li],(s,[i])=>Math.acos(i.evaluate(s))],atan:[Li,[Li],(s,[i])=>Math.atan(i.evaluate(s))],min:[Li,xt(Li),(s,i)=>Math.min(...i.map(o=>o.evaluate(s)))],max:[Li,xt(Li),(s,i)=>Math.max(...i.map(o=>o.evaluate(s)))],abs:[Li,[Li],(s,[i])=>Math.abs(i.evaluate(s))],round:[Li,[Li],(s,[i])=>{const o=i.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[Li,[Li],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[Li,[Li],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[Fn,[zn,yn],(s,[i,o])=>s.properties()[i.value]===o.value],"filter-id-==":[Fn,[yn],(s,[i])=>s.id()===i.value],"filter-type-==":[Fn,[zn],(s,[i])=>s.geometryType()===i.value],"filter-<":[Fn,[zn,yn],(s,[i,o])=>{const h=s.properties()[i.value],p=o.value;return typeof h==typeof p&&h<p}],"filter-id-<":[Fn,[yn],(s,[i])=>{const o=s.id(),h=i.value;return typeof o==typeof h&&o<h}],"filter->":[Fn,[zn,yn],(s,[i,o])=>{const h=s.properties()[i.value],p=o.value;return typeof h==typeof p&&h>p}],"filter-id->":[Fn,[yn],(s,[i])=>{const o=s.id(),h=i.value;return typeof o==typeof h&&o>h}],"filter-<=":[Fn,[zn,yn],(s,[i,o])=>{const h=s.properties()[i.value],p=o.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[Fn,[yn],(s,[i])=>{const o=s.id(),h=i.value;return typeof o==typeof h&&o<=h}],"filter->=":[Fn,[zn,yn],(s,[i,o])=>{const h=s.properties()[i.value],p=o.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[Fn,[yn],(s,[i])=>{const o=s.id(),h=i.value;return typeof o==typeof h&&o>=h}],"filter-has":[Fn,[yn],(s,[i])=>i.value in s.properties()],"filter-has-id":[Fn,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Fn,[Ss(zn)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[Fn,[Ss(yn)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[Fn,[zn,Ss(yn)],(s,[i,o])=>o.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[Fn,[zn,Ss(yn)],(s,[i,o])=>function(h,p,v,w){for(;v<=w;){const R=v+w>>1;if(p[R]===h)return!0;p[R]>h?w=R-1:v=R+1}return!1}(s.properties()[i.value],o.value,0,o.value.length-1)],all:{type:Fn,overloads:[[[Fn,Fn],(s,[i,o])=>i.evaluate(s)&&o.evaluate(s)],[xt(Fn),(s,i)=>{for(const o of i)if(!o.evaluate(s))return!1;return!0}]]},any:{type:Fn,overloads:[[[Fn,Fn],(s,[i,o])=>i.evaluate(s)||o.evaluate(s)],[xt(Fn),(s,i)=>{for(const o of i)if(o.evaluate(s))return!0;return!1}]]},"!":[Fn,[Fn],(s,[i])=>!i.evaluate(s)],"is-supported-script":[Fn,[zn],(s,[i])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(i.evaluate(s))}],upcase:[zn,[zn],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[zn,[zn],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[zn,xt(yn),(s,i)=>i.map(o=>Dl(o.evaluate(s))).join("")],"resolved-locale":[zn,[fc],(s,[i])=>i.evaluate(s).resolvedLocale()]});var Pt=xc;function hi(s){return{result:"success",value:s}}function Lt(s){return{result:"error",value:s}}function Qt(s){return s["property-type"]==="data-driven"}function Si(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function ji(s){return!!s.expression&&s.expression.interpolated}function bi(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function fn(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function vn(s){return s}function bn(s,i){const o=i.type==="color",h=s.stops&&typeof s.stops[0][0]=="object",p=h||!(h||s.property!==void 0),v=s.type||(ji(i)?"exponential":"interval");if(o&&((s=jo({},s)).stops&&(s.stops=s.stops.map(ee=>[ee[0],is.parse(ee[1])])),s.default=is.parse(s.default?s.default:i.default)),s.colorSpace&&s.colorSpace!=="rgb"&&!ou[s.colorSpace])throw new Error(`Unknown color space: ${s.colorSpace}`);let w,R,Y;if(v==="exponential")w=cs;else if(v==="interval")w=mn;else if(v==="categorical"){w=Jn,R=Object.create(null);for(const ee of s.stops)R[ee[0]]=ee[1];Y=typeof s.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=fs}if(h){const ee={},de=[];for(let Ae=0;Ae<s.stops.length;Ae++){const Ie=s.stops[Ae],Fe=Ie[0].zoom;ee[Fe]===void 0&&(ee[Fe]={zoom:Fe,type:s.type,property:s.property,default:s.default,stops:[]},de.push(Fe)),ee[Fe].stops.push([Ie[0].value,Ie[1]])}const _e=[];for(const Ae of de)_e.push([ee[Ae].zoom,bn(ee[Ae],i)]);const Te={name:"linear"};return{kind:"composite",interpolationType:Te,interpolationFactor:va.interpolationFactor.bind(void 0,Te),zoomStops:_e.map(Ae=>Ae[0]),evaluate:({zoom:Ae},Ie)=>cs({stops:_e,base:s.base},i,Ae).evaluate(Ae,Ie)}}if(p){const ee=v==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:ee,interpolationFactor:va.interpolationFactor.bind(void 0,ee),zoomStops:s.stops.map(de=>de[0]),evaluate:({zoom:de})=>w(s,i,de,R,Y)}}return{kind:"source",evaluate(ee,de){const _e=de&&de.properties?de.properties[s.property]:void 0;return _e===void 0?On(s.default,i.default):w(s,i,_e,R,Y)}}}function On(s,i,o){return s!==void 0?s:i!==void 0?i:o!==void 0?o:void 0}function Jn(s,i,o,h,p){return On(typeof o===p?h[o]:void 0,s.default,i.default)}function mn(s,i,o){if(bi(o)!=="number")return On(s.default,i.default);const h=s.stops.length;if(h===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[h-1][0])return s.stops[h-1][1];const p=Ol(s.stops.map(v=>v[0]),o);return s.stops[p][1]}function cs(s,i,o){const h=s.base!==void 0?s.base:1;if(bi(o)!=="number")return On(s.default,i.default);const p=s.stops.length;if(p===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[p-1][0])return s.stops[p-1][1];const v=Ol(s.stops.map(de=>de[0]),o),w=function(de,_e,Te,Ae){const Ie=Ae-Te,Fe=de-Te;return Ie===0?0:_e===1?Fe/Ie:(Math.pow(_e,Fe)-1)/(Math.pow(_e,Ie)-1)}(o,h,s.stops[v][0],s.stops[v+1][0]),R=s.stops[v][1],Y=s.stops[v+1][1];let ee=$s[i.type]||vn;if(s.colorSpace&&s.colorSpace!=="rgb"){const de=ou[s.colorSpace];ee=(_e,Te)=>de.reverse(de.interpolate(de.forward(_e),de.forward(Te),w))}return typeof R.evaluate=="function"?{evaluate(...de){const _e=R.evaluate.apply(void 0,de),Te=Y.evaluate.apply(void 0,de);if(_e!==void 0&&Te!==void 0)return ee(_e,Te,w)}}:ee(R,Y,w)}function fs(s,i,o){return i.type==="color"?o=is.parse(o):i.type==="formatted"?o=Os.fromString(o.toString()):i.type==="resolvedImage"?o=Go.fromString(o.toString()):bi(o)===i.type||i.type==="enum"&&i.values[o]||(o=void 0),On(o,s.default,i.default)}class Ys{constructor(i,o){this.expression=i,this._warningHistory={},this._evaluator=new Eh,this._defaultValue=o?function(h){return h.type==="color"&&(fn(h.default)||Array.isArray(h.default))?new is(0,0,0,0):h.type==="color"?is.parse(h.default)||null:h.default===void 0?null:h.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(i,o,h,p,v,w,R,Y){return this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=h,this._evaluator.canonical=p||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=Y||null,this.expression.evaluate(this._evaluator)}evaluate(i,o,h,p,v,w,R,Y){this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=Y||null;try{const ee=this.expression.evaluate(this._evaluator);if(ee==null||typeof ee=="number"&&ee!=ee)return this._defaultValue;if(this._enumValues&&!(ee in this._enumValues))throw new Es(`Expected value to be one of ${Object.keys(this._enumValues).map(de=>JSON.stringify(de)).join(", ")}, but found ${JSON.stringify(ee)} instead.`);return ee}catch(ee){return this._warningHistory[ee.message]||(this._warningHistory[ee.message]=!0,typeof console<"u"&&console.warn(ee.message)),this._defaultValue}}}function Mr(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Pt}function so(s,i){const o=new Cr(Pt,[],i?function(p){const v={color:Uo,string:zn,number:Li,enum:zn,boolean:Fn,formatted:ta,resolvedImage:Na};return p.type==="array"?Ss(v[p.value]||yn,p.length):v[p.type]}(i):void 0),h=o.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?hi(new Ys(h,i)):Lt(o.errors)}class Co{constructor(i,o){this.kind=i,this._styleExpression=o,this.isStateDependent=i!=="constant"&&!Vn(o.expression)}evaluateWithoutErrorHandling(i,o,h,p,v,w){return this._styleExpression.evaluateWithoutErrorHandling(i,o,h,p,v,w)}evaluate(i,o,h,p,v,w){return this._styleExpression.evaluate(i,o,h,p,v,w)}}class xs{constructor(i,o,h,p){this.kind=i,this.zoomStops=h,this._styleExpression=o,this.isStateDependent=i!=="camera"&&!Vn(o.expression),this.interpolationType=p}evaluateWithoutErrorHandling(i,o,h,p,v,w){return this._styleExpression.evaluateWithoutErrorHandling(i,o,h,p,v,w)}evaluate(i,o,h,p,v,w){return this._styleExpression.evaluate(i,o,h,p,v,w)}interpolationFactor(i,o,h){return this.interpolationType?va.interpolationFactor(this.interpolationType,i,o,h):0}}function jl(s,i){if((s=so(s,i)).result==="error")return s;const o=s.value.expression,h=zr(o);if(!h&&!Qt(i))return Lt([new Ks("","data expressions not supported")]);const p=$n(o,["zoom","pitch","distance-from-center"]);if(!p&&!Si(i))return Lt([new Ks("","zoom expressions not supported")]);const v=ud(o);return v||p?v instanceof Ks?Lt([v]):v instanceof va&&!ji(i)?Lt([new Ks("",'"interpolate" expressions cannot be used with this property')]):hi(v?new xs(h?"camera":"composite",s.value,v.labels,v instanceof va?v.interpolation:void 0):new Co(h?"constant":"source",s.value)):Lt([new Ks("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ul{constructor(i,o){this._parameters=i,this._specification=o,jo(this,bn(this._parameters,this._specification))}static deserialize(i){return new Ul(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function ud(s){let i=null;if(s instanceof vc)i=ud(s.result);else if(s instanceof Nl){for(const o of s.args)if(i=ud(o),i)break}else(s instanceof To||s instanceof va)&&s.input instanceof rl&&s.input.name==="zoom"&&(i=s);return i instanceof Ks||s.eachChild(o=>{const h=ud(o);h instanceof Ks?i=h:!i&&h?i=new Ks("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&h&&i!==h&&(i=new Ks("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Gi{constructor(i,o,h,p){this.message=(i?`${i}: `:"")+h,p&&(this.identifier=p),o!=null&&o.__line__&&(this.line=o.__line__)}}function xa(s){const i=s.key,o=s.value,h=s.valueSpec||{},p=s.objectElementValidators||{},v=s.style,w=s.styleSpec;let R=[];const Y=bi(o);if(Y!=="object")return[new Gi(i,o,`object expected, ${Y} found`)];for(const ee in o){const de=ee.split(".")[0],_e=h[de]||h["*"];let Te;p[de]?Te=p[de]:h[de]?Te=En:p["*"]?Te=p["*"]:h["*"]&&(Te=En),Te?R=R.concat(Te({key:(i&&`${i}.`)+ee,value:o[ee],valueSpec:_e,style:v,styleSpec:w,object:o,objectKey:ee},o)):R.push(new Gi(i,o[ee],`unknown property "${ee}"`))}for(const ee in h)p[ee]||h[ee].required&&h[ee].default===void 0&&o[ee]===void 0&&R.push(new Gi(i,o,`missing required property "${ee}"`));return R}function bc(s){const i=s.value,o=s.valueSpec,h=s.style,p=s.styleSpec,v=s.key,w=s.arrayElementValidator||En;if(bi(i)!=="array")return[new Gi(v,i,`array expected, ${bi(i)} found`)];if(o.length&&i.length!==o.length)return[new Gi(v,i,`array length ${o.length} expected, length ${i.length} found`)];if(o["min-length"]&&i.length<o["min-length"])return[new Gi(v,i,`array length at least ${o["min-length"]} expected, length ${i.length} found`)];let R={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};p.$version<7&&(R.function=o.function),bi(o.value)==="object"&&(R=o.value);let Y=[];for(let ee=0;ee<i.length;ee++)Y=Y.concat(w({array:i,arrayIndex:ee,value:i[ee],valueSpec:R,style:h,styleSpec:p,key:`${v}[${ee}]`}));return Y}function pd(s){const i=s.key,o=s.value,h=s.valueSpec;let p=bi(o);if(p==="number"&&o!=o&&(p="NaN"),p!=="number")return[new Gi(i,o,`number expected, ${p} found`)];if("minimum"in h){let v=h.minimum;if(bi(h.minimum)==="array"&&(v=h.minimum[s.arrayIndex]),o<v)return[new Gi(i,o,`${o} is less than the minimum value ${v}`)]}if("maximum"in h){let v=h.maximum;if(bi(h.maximum)==="array"&&(v=h.maximum[s.arrayIndex]),o>v)return[new Gi(i,o,`${o} is greater than the maximum value ${v}`)]}return[]}function hu(s){const i=s.valueSpec,o=as(s.value.type);let h,p,v,w={};const R=o!=="categorical"&&s.value.property===void 0,Y=!R,ee=bi(s.value.stops)==="array"&&bi(s.value.stops[0])==="array"&&bi(s.value.stops[0][0])==="object",de=xa({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Ae){if(o==="identity")return[new Gi(Ae.key,Ae.value,'identity function may not have a "stops" property')];let Ie=[];const Fe=Ae.value;return Ie=Ie.concat(bc({key:Ae.key,value:Fe,valueSpec:Ae.valueSpec,style:Ae.style,styleSpec:Ae.styleSpec,arrayElementValidator:_e})),bi(Fe)==="array"&&Fe.length===0&&Ie.push(new Gi(Ae.key,Fe,"array must have at least one stop")),Ie},default:function(Ae){return En({key:Ae.key,value:Ae.value,valueSpec:i,style:Ae.style,styleSpec:Ae.styleSpec})}}});return o==="identity"&&R&&de.push(new Gi(s.key,s.value,'missing required property "property"')),o==="identity"||s.value.stops||de.push(new Gi(s.key,s.value,'missing required property "stops"')),o==="exponential"&&s.valueSpec.expression&&!ji(s.valueSpec)&&de.push(new Gi(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(Y&&!Qt(s.valueSpec)?de.push(new Gi(s.key,s.value,"property functions not supported")):R&&!Si(s.valueSpec)&&de.push(new Gi(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!ee||s.value.property!==void 0||de.push(new Gi(s.key,s.value,'"property" property is required')),de;function _e(Ae){let Ie=[];const Fe=Ae.value,Xe=Ae.key;if(bi(Fe)!=="array")return[new Gi(Xe,Fe,`array expected, ${bi(Fe)} found`)];if(Fe.length!==2)return[new Gi(Xe,Fe,`array length 2 expected, length ${Fe.length} found`)];if(ee){if(bi(Fe[0])!=="object")return[new Gi(Xe,Fe,`object expected, ${bi(Fe[0])} found`)];if(Fe[0].zoom===void 0)return[new Gi(Xe,Fe,"object stop key must have zoom")];if(Fe[0].value===void 0)return[new Gi(Xe,Fe,"object stop key must have value")];const dt=as(Fe[0].zoom);if(typeof dt!="number")return[new Gi(Xe,Fe[0].zoom,"stop zoom values must be numbers")];if(v&&v>dt)return[new Gi(Xe,Fe[0].zoom,"stop zoom values must appear in ascending order")];dt!==v&&(v=dt,p=void 0,w={}),Ie=Ie.concat(xa({key:`${Xe}[0]`,value:Fe[0],valueSpec:{zoom:{}},style:Ae.style,styleSpec:Ae.styleSpec,objectElementValidators:{zoom:pd,value:Te}}))}else Ie=Ie.concat(Te({key:`${Xe}[0]`,value:Fe[0],valueSpec:{},style:Ae.style,styleSpec:Ae.styleSpec},Fe));return Mr(ls(Fe[1]))?Ie.concat([new Gi(`${Xe}[1]`,Fe[1],"expressions are not allowed in function stops.")]):Ie.concat(En({key:`${Xe}[1]`,value:Fe[1],valueSpec:i,style:Ae.style,styleSpec:Ae.styleSpec}))}function Te(Ae,Ie){const Fe=bi(Ae.value),Xe=as(Ae.value),dt=Ae.value!==null?Ae.value:Ie;if(h){if(Fe!==h)return[new Gi(Ae.key,dt,`${Fe} stop domain type must match previous stop domain type ${h}`)]}else h=Fe;if(Fe!=="number"&&Fe!=="string"&&Fe!=="boolean"&&typeof Xe!="number"&&typeof Xe!="string"&&typeof Xe!="boolean")return[new Gi(Ae.key,dt,"stop domain value must be a number, string, or boolean")];if(Fe!=="number"&&o!=="categorical"){let yt=`number expected, ${Fe} found`;return Qt(i)&&o===void 0&&(yt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Gi(Ae.key,dt,yt)]}return o!=="categorical"||Fe!=="number"||typeof Xe=="number"&&isFinite(Xe)&&Math.floor(Xe)===Xe?o!=="categorical"&&Fe==="number"&&typeof Xe=="number"&&typeof p=="number"&&p!==void 0&&Xe<p?[new Gi(Ae.key,dt,"stop domain values must appear in ascending order")]:(p=Xe,o==="categorical"&&Xe in w?[new Gi(Ae.key,dt,"stop domain values must be unique")]:(w[Xe]=!0,[])):[new Gi(Ae.key,dt,`integer expected, found ${String(Xe)}`)]}}function kh(s){const i=(s.expressionContext==="property"?jl:so)(ls(s.value),s.valueSpec);if(i.result==="error")return i.value.map(h=>new Gi(`${s.key}${h.key}`,s.value,h.message));const o=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new Gi(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Vn(o))return[new Gi(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter")return vp(o,s);if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!$n(o,["zoom","feature-state"]))return[new Gi(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!zr(o))return[new Gi(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vp(s,i){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const p of i.valueSpec.expression.parameters)o.delete(p);if(o.size===0)return[];const h=[];return s instanceof rl&&o.has(s.name)?[new Gi(i.key,i.value,`["${s.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(s.eachChild(p=>{h.push(...vp(p,i))}),h)}function du(s){const i=s.key,o=s.value,h=s.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(as(o))===-1&&p.push(new Gi(i,o,`expected one of [${h.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(h.values).indexOf(as(o))===-1&&p.push(new Gi(i,o,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(o)} found`)),p}function Ph(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!Ph(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function ns(s,i="fill"){if(s==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ph(s)||(s=ol(s));const o=s;let h=!0;try{h=function(ee){if(!Dh(ee))return ee;let de=ls(ee);return fd(de),de=Nr(de),de}(o)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(o,null,2)}
        `)}const p=ni[`filter_${i}`],v=so(h,p);let w=null;if(v.result==="error")throw new Error(v.value.map(ee=>`${ee.key}: ${ee.message}`).join(", "));w=(ee,de,_e)=>v.value.evaluate(ee,de,{},_e);let R=null,Y=null;if(h!==o){const ee=so(o,p);if(ee.result==="error")throw new Error(ee.value.map(de=>`${de.key}: ${de.message}`).join(", "));R=(de,_e,Te,Ae,Ie)=>ee.value.evaluate(de,_e,{},Te,void 0,void 0,Ae,Ie),Y=!zr(ee.value.expression)}return{filter:w,dynamicFilter:R||void 0,needGeometry:uu(h),needFeature:!!Y}}function Nr(s){if(!Array.isArray(s))return s;const i=function(o){if(Hf.has(o[0])){for(let h=1;h<o.length;h++)if(Dh(o[h]))return!0}return o}(s);return i===!0?i:i.map(o=>Nr(o))}function fd(s){let i=!1;const o=[];if(s[0]==="case"){for(let h=1;h<s.length-1;h+=2)i=i||Dh(s[h]),o.push(s[h+1]);o.push(s[s.length-1])}else if(s[0]==="match"){i=i||Dh(s[1]);for(let h=2;h<s.length-1;h+=2)o.push(s[h+1]);o.push(s[s.length-1])}else if(s[0]==="step"){i=i||Dh(s[1]);for(let h=1;h<s.length-1;h+=2)o.push(s[h+1])}i&&(s.length=0,s.push("any",...o));for(let h=1;h<s.length;h++)fd(s[h])}function Dh(s){if(!Array.isArray(s))return!1;if((i=s[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let o=1;o<s.length;o++)if(Dh(s[o]))return!0;return!1}const Hf=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Im(s,i){return s<i?-1:s>i?1:0}function uu(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let i=1;i<s.length;i++)if(uu(s[i]))return!0;return!1}function ol(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?md(s[1],s[2],"=="):i==="!="?wc(md(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?md(s[1],s[2],i):i==="any"?(o=s.slice(1),["any"].concat(o.map(ol))):i==="all"?["all"].concat(s.slice(1).map(ol)):i==="none"?["all"].concat(s.slice(1).map(ol).map(wc)):i==="in"?Gl(s[1],s.slice(2)):i==="!in"?wc(Gl(s[1],s.slice(2))):i==="has"?Ih(s[1]):i==="!has"?wc(Ih(s[1])):i!=="within"||s;var o}function md(s,i,o){switch(s){case"$type":return[`filter-type-${o}`,i];case"$id":return[`filter-id-${o}`,i];default:return[`filter-${o}`,s,i]}}function Gl(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(o=>typeof o!=typeof i[0])?["filter-in-large",s,["literal",i.sort(Im)]]:["filter-in-small",s,["literal",i]]}}function Ih(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function wc(s){return["!",s]}function Tc(s){return Ph(ls(s.value))?kh(jo({},s,{expressionContext:"filter",valueSpec:s.styleSpec[`filter_${s.layerType||"fill"}`]})):Kc(s)}function Kc(s){const i=s.value,o=s.key;if(bi(i)!=="array")return[new Gi(o,i,`array expected, ${bi(i)} found`)];const h=s.styleSpec;let p,v=[];if(i.length<1)return[new Gi(o,i,"filter array must have at least 1 element")];switch(v=v.concat(du({key:`${o}[0]`,value:i[0],valueSpec:h.filter_operator,style:s.style,styleSpec:s.styleSpec})),as(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&as(i[1])==="$type"&&v.push(new Gi(o,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&v.push(new Gi(o,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(p=bi(i[1]),p!=="string"&&v.push(new Gi(`${o}[1]`,i[1],`string expected, ${p} found`)));for(let w=2;w<i.length;w++)p=bi(i[w]),as(i[1])==="$type"?v=v.concat(du({key:`${o}[${w}]`,value:i[w],valueSpec:h.geometry_type,style:s.style,styleSpec:s.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new Gi(`${o}[${w}]`,i[w],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let w=1;w<i.length;w++)v=v.concat(Kc({key:`${o}[${w}]`,value:i[w],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":p=bi(i[1]),i.length!==2?v.push(new Gi(o,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new Gi(`${o}[1]`,i[1],`string expected, ${p} found`));break;case"within":p=bi(i[1]),i.length!==2?v.push(new Gi(o,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new Gi(`${o}[1]`,i[1],`object expected, ${p} found`))}return v}function xp(s,i){const o=s.key,h=s.style,p=s.styleSpec,v=s.value,w=s.objectKey,R=p[`${i}_${s.layerType}`];if(!R)return[];const Y=w.match(/^(.*)-transition$/);if(i==="paint"&&Y&&R[Y[1]]&&R[Y[1]].transition)return En({key:o,value:v,valueSpec:p.transition,style:h,styleSpec:p});const ee=s.valueSpec||R[w];if(!ee)return[new Gi(o,v,`unknown property "${w}"`)];let de;if(bi(v)==="string"&&Qt(ee)&&!ee.tokens&&(de=/^{([^}]+)}$/.exec(v)))return[new Gi(o,v,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(de[1])} }\`.`)];const _e=[];return s.layerType==="symbol"&&(w==="text-field"&&h&&!h.glyphs&&_e.push(new Gi(o,v,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&fn(ls(v))&&as(v.type)==="identity"&&_e.push(new Gi(o,v,'"text-font" does not support identity functions'))),_e.concat(En({key:s.key,value:v,valueSpec:ee,style:h,styleSpec:p,expressionContext:"property",propertyType:i,propertyKey:w}))}function bp(s){return xp(s,"paint")}function Wf(s){return xp(s,"layout")}function pu(s){let i=[];const o=s.value,h=s.key,p=s.style,v=s.styleSpec;o.type||o.ref||i.push(new Gi(h,o,'either "type" or "ref" is required'));let w=as(o.type);const R=as(o.ref);if(o.id){const Y=as(o.id);for(let ee=0;ee<s.arrayIndex;ee++){const de=p.layers[ee];as(de.id)===Y&&i.push(new Gi(h,o.id,`duplicate layer id "${o.id}", previously used at line ${de.id.__line__}`))}}if("ref"in o){let Y;["type","source","source-layer","filter","layout"].forEach(ee=>{ee in o&&i.push(new Gi(h,o[ee],`"${ee}" is prohibited for ref layers`))}),p.layers.forEach(ee=>{as(ee.id)===R&&(Y=ee)}),Y?Y.ref?i.push(new Gi(h,o.ref,"ref cannot reference another ref layer")):w=as(Y.type):typeof R=="string"&&i.push(new Gi(h,o.ref,`ref layer "${R}" not found`))}else if(w!=="background"&&w!=="sky")if(o.source){const Y=p.sources&&p.sources[o.source],ee=Y&&as(Y.type);Y?ee==="vector"&&w==="raster"?i.push(new Gi(h,o.source,`layer "${o.id}" requires a raster source`)):ee==="raster"&&w!=="raster"?i.push(new Gi(h,o.source,`layer "${o.id}" requires a vector source`)):ee!=="vector"||o["source-layer"]?ee==="raster-dem"&&w!=="hillshade"?i.push(new Gi(h,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||ee==="geojson"&&Y.lineMetrics||i.push(new Gi(h,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Gi(h,o,`layer "${o.id}" must specify a "source-layer"`)):i.push(new Gi(h,o.source,`source "${o.source}" not found`))}else i.push(new Gi(h,o,'missing required property "source"'));return i=i.concat(xa({key:h,value:o,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":()=>[],type:()=>En({key:`${h}.type`,value:o.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,object:o,objectKey:"type"}),filter:Y=>Tc(jo({layerType:w},Y)),layout:Y=>xa({layer:o,key:Y.key,value:Y.value,valueSpec:{},style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":ee=>Wf(jo({layerType:w},ee))}}),paint:Y=>xa({layer:o,key:Y.key,value:Y.value,valueSpec:{},style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":ee=>bp(jo({layerType:w},ee))}})}})),i}function Vl(s){const i=s.value,o=s.key,h=bi(i);return h!=="string"?[new Gi(o,i,`string expected, ${h} found`)]:[]}const Lh={promoteId:function({key:s,value:i}){if(bi(i)==="string")return Vl({key:s,value:i});{const o=[];for(const h in i)o.push(...Vl({key:`${s}.${h}`,value:i[h]}));return o}}};function Oh(s){const i=s.value,o=s.key,h=s.styleSpec,p=s.style;if(!i.type)return[new Gi(o,i,'"type" is required')];const v=as(i.type);let w;switch(v){case"vector":case"raster":case"raster-dem":return w=xa({key:o,value:i,valueSpec:h[`source_${v.replace("-","_")}`],style:s.style,styleSpec:h,objectElementValidators:Lh}),w;case"geojson":if(w=xa({key:o,value:i,valueSpec:h.source_geojson,style:p,styleSpec:h,objectElementValidators:Lh}),i.cluster)for(const R in i.clusterProperties){const[Y,ee]=i.clusterProperties[R],de=typeof Y=="string"?[Y,["accumulated"],["get",R]]:Y;w.push(...kh({key:`${o}.${R}.map`,value:ee,expressionContext:"cluster-map"})),w.push(...kh({key:`${o}.${R}.reduce`,value:de,expressionContext:"cluster-reduce"}))}return w;case"video":return xa({key:o,value:i,valueSpec:h.source_video,style:p,styleSpec:h});case"image":return xa({key:o,value:i,valueSpec:h.source_image,style:p,styleSpec:h});case"canvas":return[new Gi(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return du({key:`${o}.type`,value:i.type,valueSpec:{values:wp(h)},style:p,styleSpec:h})}}function wp(s){return s.source.reduce((i,o)=>{const h=s[o];return h.type.type==="enum"&&(i=i.concat(Object.keys(h.type.values))),i},[])}function qe(s){const i=s.value,o=s.styleSpec,h=o.light,p=s.style;let v=[];const w=bi(i);if(i===void 0)return v;if(w!=="object")return v=v.concat([new Gi("light",i,`object expected, ${w} found`)]),v;for(const R in i){const Y=R.match(/^(.*)-transition$/);v=v.concat(Y&&h[Y[1]]&&h[Y[1]].transition?En({key:R,value:i[R],valueSpec:o.transition,style:p,styleSpec:o}):h[R]?En({key:R,value:i[R],valueSpec:h[R],style:p,styleSpec:o}):[new Gi(R,i[R],`unknown property "${R}"`)])}return v}function $l(s){const i=s.value,o=s.key,h=s.style,p=s.styleSpec,v=p.terrain;let w=[];const R=bi(i);if(i===void 0)return w;if(R!=="object")return w=w.concat([new Gi("terrain",i,`object expected, ${R} found`)]),w;for(const Y in i){const ee=Y.match(/^(.*)-transition$/);w=w.concat(ee&&v[ee[1]]&&v[ee[1]].transition?En({key:Y,value:i[Y],valueSpec:p.transition,style:h,styleSpec:p}):v[Y]?En({key:Y,value:i[Y],valueSpec:v[Y],style:h,styleSpec:p}):[new Gi(Y,i[Y],`unknown property "${Y}"`)])}if(i.source){const Y=h.sources&&h.sources[i.source],ee=Y&&as(Y.type);Y?ee!=="raster-dem"&&w.push(new Gi(o,i.source,`terrain cannot be used with a source of type ${String(ee)}, it only be used with a "raster-dem" source type`)):w.push(new Gi(o,i.source,`source "${i.source}" not found`))}else w.push(new Gi(o,i,'terrain is missing required property "source"'));return w}function gd(s){const i=s.value,o=s.style,h=s.styleSpec,p=h.fog;let v=[];const w=bi(i);if(i===void 0)return v;if(w!=="object")return v=v.concat([new Gi("fog",i,`object expected, ${w} found`)]),v;for(const R in i){const Y=R.match(/^(.*)-transition$/);v=v.concat(Y&&p[Y[1]]&&p[Y[1]].transition?En({key:R,value:i[R],valueSpec:h.transition,style:o,styleSpec:h}):p[R]?En({key:R,value:i[R],valueSpec:p[R],style:o,styleSpec:h}):[new Gi(R,i[R],`unknown property "${R}"`)])}return v}const sa={"*":()=>[],array:bc,boolean:function(s){const i=s.value,o=s.key,h=bi(i);return h!=="boolean"?[new Gi(o,i,`boolean expected, ${h} found`)]:[]},number:pd,color:function(s){const i=s.key,o=s.value,h=bi(o);return h!=="string"?[new Gi(i,o,`color expected, ${h} found`)]:kl(o)===null?[new Gi(i,o,`color expected, "${o}" found`)]:[]},enum:du,filter:Tc,function:hu,layer:pu,object:xa,source:Oh,light:qe,terrain:$l,fog:gd,string:Vl,formatted:function(s){return Vl(s).length===0?[]:kh(s)},resolvedImage:function(s){return Vl(s).length===0?[]:kh(s)},projection:function(s){const i=s.value,o=s.styleSpec,h=o.projection,p=s.style;let v=[];const w=bi(i);if(w==="object")for(const R in i)v=v.concat(En({key:R,value:i[R],valueSpec:h[R],style:p,styleSpec:o}));else w!=="string"&&(v=v.concat([new Gi("projection",i,`object or string expected, ${w} found`)]));return v}};function En(s){const i=s.value,o=s.valueSpec,h=s.styleSpec;return o.expression&&fn(as(i))?hu(s):o.expression&&Mr(ls(i))?kh(s):o.type&&sa[o.type]?sa[o.type](s):xa(jo({},s,{valueSpec:o.type?h[o.type]:o}))}function Lm(s){const i=s.value,o=s.key,h=Vl(s);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new Gi(o,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new Gi(o,i,'"glyphs" url must include a "{range}" token'))),h}function Tp(s,i=ni){return Hl(En({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,objectElementValidators:{glyphs:Lm,"*":()=>[]}}))}const Om=s=>Hl(bp(s)),Jc=s=>Hl(Wf(s));function Hl(s){return s.slice().sort((i,o)=>i.line&&o.line?i.line-o.line:0)}function Yf(s,i){let o=!1;if(i&&i.length)for(const h of i)s.fire(new el(new Error(h.message))),o=!0;return o}var Rh=al;function al(s,i,o){var h=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var p=new Int32Array(this.arrayBuffer);s=p[0],this.d=(i=p[1])+2*(o=p[2]);for(var v=0;v<this.d*this.d;v++){var w=p[3+v],R=p[3+v+1];h.push(w===R?null:p.subarray(w,R))}var Y=p[3+h.length+1];this.keys=p.subarray(p[3+h.length],Y),this.bboxes=p.subarray(Y),this.insert=this._insertReadonly}else{this.d=i+2*o;for(var ee=0;ee<this.d*this.d;ee++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=s,this.padding=o,this.scale=i/s,this.uid=0;var de=o/i*s;this.min=-de,this.max=s+de}al.prototype.insert=function(s,i,o,h,p){this._forEachCell(i,o,h,p,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(p)},al.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},al.prototype._insertCell=function(s,i,o,h,p,v){this.cells[p].push(v)},al.prototype.query=function(s,i,o,h,p){var v=this.min,w=this.max;if(s<=v&&i<=v&&w<=o&&w<=h&&!p)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(s,i,o,h,this._queryCell,R,{},p),R},al.prototype._queryCell=function(s,i,o,h,p,v,w,R){var Y=this.cells[p];if(Y!==null)for(var ee=this.keys,de=this.bboxes,_e=0;_e<Y.length;_e++){var Te=Y[_e];if(w[Te]===void 0){var Ae=4*Te;(R?R(de[Ae+0],de[Ae+1],de[Ae+2],de[Ae+3]):s<=de[Ae+2]&&i<=de[Ae+3]&&o>=de[Ae+0]&&h>=de[Ae+1])?(w[Te]=!0,v.push(ee[Te])):w[Te]=!1}}},al.prototype._forEachCell=function(s,i,o,h,p,v,w,R){for(var Y=this._convertToCellCoord(s),ee=this._convertToCellCoord(i),de=this._convertToCellCoord(o),_e=this._convertToCellCoord(h),Te=Y;Te<=de;Te++)for(var Ae=ee;Ae<=_e;Ae++){var Ie=this.d*Ae+Te;if((!R||R(this._convertFromCellCoord(Te),this._convertFromCellCoord(Ae),this._convertFromCellCoord(Te+1),this._convertFromCellCoord(Ae+1)))&&p.call(this,s,i,o,h,Ie,v,w,R))return}},al.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},al.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},al.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,i=3+this.cells.length+1+1,o=0,h=0;h<this.cells.length;h++)o+=this.cells[h].length;var p=new Int32Array(i+o+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var v=i,w=0;w<s.length;w++){var R=s[w];p[3+w]=v,p.set(R,v),v+=R.length}return p[3+s.length]=v,p.set(this.keys,v),p[3+s.length+1]=v+=this.keys.length,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer};const fu={};function Bi(s,i,o={}){Object.defineProperty(s,"_classRegistryKey",{value:i,writeable:!1}),fu[i]={klass:s,omit:o.omit||[]}}Bi(Object,"Object"),Rh.serialize=function(s,i){const o=s.toArrayBuffer();return i&&i.push(o),{buffer:o}},Rh.deserialize=function(s){return new Rh(s.buffer)},Object.defineProperty(Rh,"name",{value:"Grid"}),Bi(Rh,"Grid"),Bi(is,"Color"),Bi(Error,"Error"),Bi(Mi,"AJAXError"),Bi(Go,"ResolvedImage"),Bi(Ul,"StylePropertyFunction"),Bi(Ys,"StyleExpression",{omit:["_evaluator"]}),Bi(xs,"ZoomDependentExpression"),Bi(Co,"ZoomConstantExpression"),Bi(rl,"CompoundExpression",{omit:["_evaluate"]});for(const s in Pt)fu[Pt[s]._classRegistryKey]||Bi(Pt[s],`Expression${s}`);function Xf(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function qf(s){return T.ImageBitmap&&s instanceof T.ImageBitmap}function Sc(s,i){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(Xf(s)||qf(s))return i&&i.push(s),s;if(ArrayBuffer.isView(s)){const o=s;return i&&i.push(o.buffer),o}if(s instanceof T.ImageData)return i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const o=[];for(const h of s)o.push(Sc(h,i));return o}if(typeof s=="object"){const o=s.constructor,h=o._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const p=o.serialize?o.serialize(s,i):{};if(!o.serialize){for(const v in s)s.hasOwnProperty(v)&&(fu[h].omit.indexOf(v)>=0||(p[v]=Sc(s[v],i)));s instanceof Error&&(p.message=s.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof s)}function _d(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||Xf(s)||qf(s)||ArrayBuffer.isView(s)||s instanceof T.ImageData)return s;if(Array.isArray(s))return s.map(_d);if(typeof s=="object"){const i=s.$name||"Object",{klass:o}=fu[i];if(!o)throw new Error(`can't deserialize unregistered class ${i}`);if(o.deserialize)return o.deserialize(s);const h=Object.create(o.prototype);for(const p of Object.keys(s))p!=="$name"&&(h[p]=_d(s[p]));return h}throw new Error("can't deserialize object of type "+typeof s)}const Sp=s=>s>=1536&&s<=1791,ll=s=>s>=1872&&s<=1919,Ep=s=>s>=2208&&s<=2303,Cp=s=>s>=11904&&s<=12031,Mp=s=>s>=12032&&s<=12255,Ap=s=>s>=12272&&s<=12287,Bh=s=>s>=12288&&s<=12351,Va=s=>s>=12352&&s<=12447,mu=s=>s>=12448&&s<=12543,Zf=s=>s>=12544&&s<=12591,oa=s=>s>=12704&&s<=12735,Kf=s=>s>=12736&&s<=12783,Jf=s=>s>=12784&&s<=12799,Qf=s=>s>=12800&&s<=13055,e0=s=>s>=13056&&s<=13311,t0=s=>s>=13312&&s<=19903,gu=s=>s>=19968&&s<=40959,kp=s=>s>=40960&&s<=42127,i0=s=>s>=42128&&s<=42191,Pp=s=>s>=44032&&s<=55215,Qc=s=>s>=63744&&s<=64255,_=s=>s>=64336&&s<=65023,a=s=>s>=65040&&s<=65055,u=s=>s>=65072&&s<=65103,x=s=>s>=65104&&s<=65135,P=s=>s>=65136&&s<=65279,B=s=>s>=65280&&s<=65519;function ne(s){for(const i of s)if(Me(i.charCodeAt(0)))return!0;return!1}function he(s){for(const i of s)if(!pe(i.charCodeAt(0)))return!1;return!0}function pe(s){return!(Sp(s)||ll(s)||Ep(s)||_(s)||P(s))}function Me(s){return!(s!==746&&s!==747&&(s<4352||!(oa(s)||Zf(s)||u(s)&&!(s>=65097&&s<=65103)||Qc(s)||e0(s)||Cp(s)||Kf(s)||!(!Bh(s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||t0(s)||gu(s)||Qf(s)||(i=>i>=12592&&i<=12687)(s)||(i=>i>=43360&&i<=43391)(s)||(i=>i>=55216&&i<=55295)(s)||(i=>i>=4352&&i<=4607)(s)||Pp(s)||Va(s)||Ap(s)||(i=>i>=12688&&i<=12703)(s)||Mp(s)||Jf(s)||mu(s)&&s!==12540||!(!B(s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!x(s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||(i=>i>=5120&&i<=5759)(s)||(i=>i>=6320&&i<=6399)(s)||a(s)||(i=>i>=19904&&i<=19967)(s)||kp(s)||i0(s))))}function Ee(s){return!(Me(s)||function(i){return!!((o=>o>=128&&o<=255)(i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||(o=>o>=8192&&o<=8303)(i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||(o=>o>=8448&&o<=8527)(i)||(o=>o>=8528&&o<=8591)(i)||(o=>o>=8960&&o<=9215)(i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||(o=>o>=9216&&o<=9279)(i)&&i!==9251||(o=>o>=9280&&o<=9311)(i)||(o=>o>=9312&&o<=9471)(i)||(o=>o>=9632&&o<=9727)(i)||(o=>o>=9728&&o<=9983)(i)&&!(i>=9754&&i<=9759)||(o=>o>=11008&&o<=11263)(i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Bh(i)||mu(i)||(o=>o>=57344&&o<=63743)(i)||u(i)||x(i)||B(i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}function Re(s){return s>=1424&&s<=2303||_(s)||P(s)}function $e(s,i){return!(!i&&Re(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||(o=>o>=6016&&o<=6143)(s))}function Qe(s){for(const i of s)if(Re(i.charCodeAt(0)))return!0;return!1}const et="deferred",rt="loading",Ye="loaded";let Ze=null,lt="unavailable",tt=null;const pt=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(lt="error"),Ze&&Ze(s)};function Tt(){gt.fire(new ga("pluginStateChange",{pluginStatus:lt,pluginURL:tt}))}const gt=new wo,kt=function(){return lt},Wt=function(){if(lt!==et||!tt)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");lt=rt,Tt(),tt&&qi({url:tt},s=>{s?pt(s):(lt=Ye,Tt())})},Ft={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>lt===Ye||Ft.applyArabicShaping!=null,isLoading:()=>lt===rt,setState(s){lt=s.pluginStatus,tt=s.pluginURL},isParsed:()=>Ft.applyArabicShaping!=null&&Ft.processBidirectionalText!=null&&Ft.processStyledBidirectionalText!=null,getPluginURL:()=>tt};class Dt{constructor(i,o){this.zoom=i,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(i){return function(o,h){for(const p of o)if(!$e(p.charCodeAt(0),h))return!1;return!0}(i,Ft.isLoaded())}}class pi{constructor(i,o){this.property=i,this.value=o,this.expression=function(h,p){if(fn(h))return new Ul(h,p);if(Mr(h)){const v=jl(h,p);if(v.result==="error")throw new Error(v.value.map(w=>`${w.key}: ${w.message}`).join(", "));return v.value}{let v=h;return typeof h=="string"&&p.type==="color"&&(v=is.parse(h)),{kind:"constant",evaluate:()=>v}}}(o===void 0?i.specification.default:o,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,o,h){return this.property.possiblyEvaluate(this,i,o,h)}}class Nt{constructor(i){this.property=i,this.value=new pi(i,void 0)}transitioned(i,o){return new Xt(this.property,this.value,o,q({},i.transition,this.transition),i.now)}untransitioned(){return new Xt(this.property,this.value,null,{},0)}}class si{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return xe(this._values[i].value.value)}setValue(i,o){this._values.hasOwnProperty(i)||(this._values[i]=new Nt(this._values[i].property)),this._values[i].value=new pi(this._values[i].property,o===null?void 0:xe(o))}getTransition(i){return xe(this._values[i].transition)}setTransition(i,o){this._values.hasOwnProperty(i)||(this._values[i]=new Nt(this._values[i].property)),this._values[i].transition=xe(o)||void 0}serialize(){const i={};for(const o of Object.keys(this._values)){const h=this.getValue(o);h!==void 0&&(i[o]=h);const p=this.getTransition(o);p!==void 0&&(i[`${o}-transition`]=p)}return i}transitioned(i,o){const h=new vi(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(i,o._values[p]);return h}untransitioned(){const i=new vi(this._properties);for(const o of Object.keys(this._values))i._values[o]=this._values[o].untransitioned();return i}}class Xt{constructor(i,o,h,p,v){const w=p.delay||0,R=p.duration||0;v=v||0,this.property=i,this.value=o,this.begin=v+w,this.end=this.begin+R,i.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(i,o,h){const p=i.now||0,v=this.value.possiblyEvaluate(i,o,h),w=this.prior;if(w){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return w.possiblyEvaluate(i,o,h);{const R=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(i,o,h),v,E(R))}}return v}}class vi{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,o,h){const p=new wi(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(i,o,h);return p}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class qt{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return xe(this._values[i].value)}setValue(i,o){this._values[i]=new pi(this._values[i].property,o===null?void 0:xe(o))}serialize(){const i={};for(const o of Object.keys(this._values)){const h=this.getValue(o);h!==void 0&&(i[o]=h)}return i}possiblyEvaluate(i,o,h){const p=new wi(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(i,o,h);return p}}class di{constructor(i,o,h){this.property=i,this.value=o,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,o,h,p){return this.property.evaluate(this.value,this.parameters,i,o,h,p)}}class wi{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Rt{constructor(i){this.specification=i}possiblyEvaluate(i,o){return i.expression.evaluate(o)}interpolate(i,o,h){const p=$s[this.specification.type];return p?p(i,o,h):i}}class Yt{constructor(i,o){this.specification=i,this.overrides=o}possiblyEvaluate(i,o,h,p){return new di(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(o,null,{},h,p)}:i.expression,o)}interpolate(i,o,h){if(i.value.kind!=="constant"||o.value.kind!=="constant")return i;if(i.value.value===void 0||o.value.value===void 0)return new di(this,{kind:"constant",value:void 0},i.parameters);const p=$s[this.specification.type];return p?new di(this,{kind:"constant",value:p(i.value.value,o.value.value,h)},i.parameters):i}evaluate(i,o,h,p,v,w){return i.kind==="constant"?i.value:i.evaluate(o,h,p,v,w)}}class Hi{constructor(i){this.specification=i}possiblyEvaluate(i,o,h,p){return!!i.expression.evaluate(o,null,{},h,p)}interpolate(){return!1}}class nn{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const o=new Dt(0,{});for(const h in i){const p=i[h];p.specification.overridable&&this.overridableProperties.push(h);const v=this.defaultPropertyValues[h]=new pi(p,void 0),w=this.defaultTransitionablePropertyValues[h]=new Nt(p);this.defaultTransitioningPropertyValues[h]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=v.possiblyEvaluate(o)}}}function Wi(s,i){return 256*(s=y(Math.floor(s),0,255))+y(Math.floor(i),0,255)}Bi(Yt,"DataDrivenProperty"),Bi(Rt,"DataConstantProperty"),Bi(Hi,"ColorRampProperty");const pn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Rn{constructor(i,o){this._structArray=i,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class sn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,o){return i._trim(),o&&(i.isTransferred=!0,o.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const o=Object.create(this.prototype);return o.arrayBuffer=i.arrayBuffer,o.length=i.length,o.capacity=i.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Vi(s,i=1){let o=0,h=0;return{members:s.map(p=>{const v=pn[p.type].BYTES_PER_ELEMENT,w=o=Sr(o,Math.max(i,v)),R=p.components||1;return h=Math.max(h,v),o+=v*R,{name:p.name,type:p.type,components:R,offset:w}}),size:Sr(o,Math.max(h,i)),alignment:i}}function Sr(s,i){return Math.ceil(s/i)*i}class hr extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o){const h=this.length;return this.resize(h+1),this.emplace(h,i,o)}emplace(i,o,h){const p=2*i;return this.int16[p+0]=o,this.int16[p+1]=h,i}}hr.prototype.bytesPerElement=4,Bi(hr,"StructArrayLayout2i4");class Ar extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,o,h)}emplace(i,o,h,p){const v=3*i;return this.int16[v+0]=o,this.int16[v+1]=h,this.int16[v+2]=p,i}}Ar.prototype.bytesPerElement=6,Bi(Ar,"StructArrayLayout3i6");class br extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,o,h,p)}emplace(i,o,h,p,v){const w=4*i;return this.int16[w+0]=o,this.int16[w+1]=h,this.int16[w+2]=p,this.int16[w+3]=v,i}}br.prototype.bytesPerElement=8,Bi(br,"StructArrayLayout4i8");class Wo extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v,w,R){const Y=this.length;return this.resize(Y+1),this.emplace(Y,i,o,h,p,v,w,R)}emplace(i,o,h,p,v,w,R,Y){const ee=6*i,de=12*i,_e=3*i;return this.int16[ee+0]=o,this.int16[ee+1]=h,this.uint8[de+4]=p,this.uint8[de+5]=v,this.uint8[de+6]=w,this.uint8[de+7]=R,this.float32[_e+2]=Y,i}}Wo.prototype.bytesPerElement=12,Bi(Wo,"StructArrayLayout2i4ub1f12");class Mo extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,o,h,p)}emplace(i,o,h,p,v){const w=4*i;return this.float32[w+0]=o,this.float32[w+1]=h,this.float32[w+2]=p,this.float32[w+3]=v,i}}Mo.prototype.bytesPerElement=16,Bi(Mo,"StructArrayLayout4f16");class mo extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v){const w=this.length;return this.resize(w+1),this.emplace(w,i,o,h,p,v)}emplace(i,o,h,p,v,w){const R=6*i,Y=3*i;return this.uint16[R+0]=o,this.uint16[R+1]=h,this.uint16[R+2]=p,this.uint16[R+3]=v,this.float32[Y+2]=w,i}}mo.prototype.bytesPerElement=12,Bi(mo,"StructArrayLayout4ui1f12");class $a extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,o,h,p)}emplace(i,o,h,p,v){const w=4*i;return this.uint16[w+0]=o,this.uint16[w+1]=h,this.uint16[w+2]=p,this.uint16[w+3]=v,i}}$a.prototype.bytesPerElement=8,Bi($a,"StructArrayLayout4ui8");class Fr extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v,w){const R=this.length;return this.resize(R+1),this.emplace(R,i,o,h,p,v,w)}emplace(i,o,h,p,v,w,R){const Y=6*i;return this.int16[Y+0]=o,this.int16[Y+1]=h,this.int16[Y+2]=p,this.int16[Y+3]=v,this.int16[Y+4]=w,this.int16[Y+5]=R,i}}Fr.prototype.bytesPerElement=12,Bi(Fr,"StructArrayLayout6i12");class wr extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v,w,R,Y,ee,de,_e,Te){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,i,o,h,p,v,w,R,Y,ee,de,_e,Te)}emplace(i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae){const Ie=12*i;return this.int16[Ie+0]=o,this.int16[Ie+1]=h,this.int16[Ie+2]=p,this.int16[Ie+3]=v,this.uint16[Ie+4]=w,this.uint16[Ie+5]=R,this.uint16[Ie+6]=Y,this.uint16[Ie+7]=ee,this.int16[Ie+8]=de,this.int16[Ie+9]=_e,this.int16[Ie+10]=Te,this.int16[Ie+11]=Ae,i}}wr.prototype.bytesPerElement=24,Bi(wr,"StructArrayLayout4i4ui4i24");class sr extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v,w){const R=this.length;return this.resize(R+1),this.emplace(R,i,o,h,p,v,w)}emplace(i,o,h,p,v,w,R){const Y=10*i,ee=5*i;return this.int16[Y+0]=o,this.int16[Y+1]=h,this.int16[Y+2]=p,this.float32[ee+2]=v,this.float32[ee+3]=w,this.float32[ee+4]=R,i}}sr.prototype.bytesPerElement=20,Bi(sr,"StructArrayLayout3i3f20");class ms extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.uint32[1*i+0]=o,i}}ms.prototype.bytesPerElement=4,Bi(ms,"StructArrayLayout1ul4");class oo extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae)}emplace(i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie){const Fe=20*i,Xe=10*i;return this.int16[Fe+0]=o,this.int16[Fe+1]=h,this.int16[Fe+2]=p,this.int16[Fe+3]=v,this.int16[Fe+4]=w,this.float32[Xe+3]=R,this.float32[Xe+4]=Y,this.float32[Xe+5]=ee,this.float32[Xe+6]=de,this.int16[Fe+14]=_e,this.uint32[Xe+8]=Te,this.uint16[Fe+18]=Ae,this.uint16[Fe+19]=Ie,i}}oo.prototype.bytesPerElement=40,Bi(oo,"StructArrayLayout5i4f1i1ul2ui40");class jr extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v,w,R){const Y=this.length;return this.resize(Y+1),this.emplace(Y,i,o,h,p,v,w,R)}emplace(i,o,h,p,v,w,R,Y){const ee=8*i;return this.int16[ee+0]=o,this.int16[ee+1]=h,this.int16[ee+2]=p,this.int16[ee+4]=v,this.int16[ee+5]=w,this.int16[ee+6]=R,this.int16[ee+7]=Y,i}}jr.prototype.bytesPerElement=16,Bi(jr,"StructArrayLayout3i2i2i16");class go extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v){const w=this.length;return this.resize(w+1),this.emplace(w,i,o,h,p,v)}emplace(i,o,h,p,v,w){const R=4*i,Y=8*i;return this.float32[R+0]=o,this.float32[R+1]=h,this.float32[R+2]=p,this.int16[Y+6]=v,this.int16[Y+7]=w,i}}go.prototype.bytesPerElement=16,Bi(go,"StructArrayLayout2f1f2i16");class yd extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,o,h,p)}emplace(i,o,h,p,v){const w=12*i,R=3*i;return this.uint8[w+0]=o,this.uint8[w+1]=h,this.float32[R+1]=p,this.float32[R+2]=v,i}}yd.prototype.bytesPerElement=12,Bi(yd,"StructArrayLayout2ub2f12");class Ha extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,o,h)}emplace(i,o,h,p){const v=3*i;return this.float32[v+0]=o,this.float32[v+1]=h,this.float32[v+2]=p,i}}Ha.prototype.bytesPerElement=12,Bi(Ha,"StructArrayLayout3f12");class ao extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,o,h)}emplace(i,o,h,p){const v=3*i;return this.uint16[v+0]=o,this.uint16[v+1]=h,this.uint16[v+2]=p,i}}ao.prototype.bytesPerElement=6,Bi(ao,"StructArrayLayout3ui6");class Yo extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie,Fe,Xe,dt,yt,ct,ft,St){const bt=this.length;return this.resize(bt+1),this.emplace(bt,i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie,Fe,Xe,dt,yt,ct,ft,St)}emplace(i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie,Fe,Xe,dt,yt,ct,ft,St,bt){const Ht=30*i,$t=15*i,oi=60*i;return this.int16[Ht+0]=o,this.int16[Ht+1]=h,this.int16[Ht+2]=p,this.float32[$t+2]=v,this.float32[$t+3]=w,this.uint16[Ht+8]=R,this.uint16[Ht+9]=Y,this.uint32[$t+5]=ee,this.uint32[$t+6]=de,this.uint32[$t+7]=_e,this.uint16[Ht+16]=Te,this.uint16[Ht+17]=Ae,this.uint16[Ht+18]=Ie,this.float32[$t+10]=Fe,this.float32[$t+11]=Xe,this.uint8[oi+48]=dt,this.uint8[oi+49]=yt,this.uint8[oi+50]=ct,this.uint32[$t+13]=ft,this.int16[Ht+28]=St,this.uint8[oi+58]=bt,i}}Yo.prototype.bytesPerElement=60,Bi(Yo,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class cl extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie,Fe,Xe,dt,yt,ct,ft,St,bt,Ht,$t,oi,Ei,Zt,ai,ui,gi){const Ci=this.length;return this.resize(Ci+1),this.emplace(Ci,i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie,Fe,Xe,dt,yt,ct,ft,St,bt,Ht,$t,oi,Ei,Zt,ai,ui,gi)}emplace(i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie,Fe,Xe,dt,yt,ct,ft,St,bt,Ht,$t,oi,Ei,Zt,ai,ui,gi,Ci){const Jt=38*i,Di=19*i;return this.int16[Jt+0]=o,this.int16[Jt+1]=h,this.int16[Jt+2]=p,this.float32[Di+2]=v,this.float32[Di+3]=w,this.int16[Jt+8]=R,this.int16[Jt+9]=Y,this.int16[Jt+10]=ee,this.int16[Jt+11]=de,this.int16[Jt+12]=_e,this.int16[Jt+13]=Te,this.uint16[Jt+14]=Ae,this.uint16[Jt+15]=Ie,this.uint16[Jt+16]=Fe,this.uint16[Jt+17]=Xe,this.uint16[Jt+18]=dt,this.uint16[Jt+19]=yt,this.uint16[Jt+20]=ct,this.uint16[Jt+21]=ft,this.uint16[Jt+22]=St,this.uint16[Jt+23]=bt,this.uint16[Jt+24]=Ht,this.uint16[Jt+25]=$t,this.uint16[Jt+26]=oi,this.uint16[Jt+27]=Ei,this.uint16[Jt+28]=Zt,this.uint32[Di+15]=ai,this.float32[Di+16]=ui,this.float32[Di+17]=gi,this.float32[Di+18]=Ci,i}}cl.prototype.bytesPerElement=76,Bi(cl,"StructArrayLayout3i2f6i15ui1ul3f76");class ba extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.float32[1*i+0]=o,i}}ba.prototype.bytesPerElement=4,Bi(ba,"StructArrayLayout1f4");class jn extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,p,v){const w=this.length;return this.resize(w+1),this.emplace(w,i,o,h,p,v)}emplace(i,o,h,p,v,w){const R=5*i;return this.float32[R+0]=o,this.float32[R+1]=h,this.float32[R+2]=p,this.float32[R+3]=v,this.float32[R+4]=w,i}}jn.prototype.bytesPerElement=20,Bi(jn,"StructArrayLayout5f20");class zh extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,o,h,p)}emplace(i,o,h,p,v){const w=6*i;return this.uint32[3*i+0]=o,this.uint16[w+2]=h,this.uint16[w+3]=p,this.uint16[w+4]=v,i}}zh.prototype.bytesPerElement=12,Bi(zh,"StructArrayLayout1ul3ui12");class hl extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o){const h=this.length;return this.resize(h+1),this.emplace(h,i,o)}emplace(i,o,h){const p=2*i;return this.uint16[p+0]=o,this.uint16[p+1]=h,i}}hl.prototype.bytesPerElement=4,Bi(hl,"StructArrayLayout2ui4");class eh extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.uint16[1*i+0]=o,i}}eh.prototype.bytesPerElement=2,Bi(eh,"StructArrayLayout1ui2");class Dp extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o){const h=this.length;return this.resize(h+1),this.emplace(h,i,o)}emplace(i,o,h){const p=2*i;return this.float32[p+0]=o,this.float32[p+1]=h,i}}Dp.prototype.bytesPerElement=8,Bi(Dp,"StructArrayLayout2f8");class Q1 extends Rn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Q1.prototype.size=40;class Rm extends oo{get(i){return new Q1(this,i)}}Bi(Rm,"CollisionBoxArray");class Wa extends Rn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}Wa.prototype.size=60;class e_ extends Yo{get(i){return new Wa(this,i)}}Bi(e_,"PlacedSymbolArray");class Ip extends Rn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ip.prototype.size=76;class n0 extends cl{get(i){return new Ip(this,i)}}Bi(n0,"SymbolInstanceArray");class Bm extends ba{getoffsetX(i){return this.float32[1*i+0]}}Bi(Bm,"GlyphOffsetArray");class zm extends hr{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}Bi(zm,"SymbolLineVertexArray");class wa extends Rn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}wa.prototype.size=12;class th extends zh{get(i){return new wa(this,i)}}Bi(th,"FeatureIndexArray");class r0 extends hl{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}Bi(r0,"FillExtrusionCentroidArray");const t_=Vi([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),s0=Vi([{name:"a_dash",components:4,type:"Uint16"}]);var vd={exports:{}},o0={exports:{}};o0.exports=function(s,i){var o,h,p,v,w,R,Y,ee;for(h=s.length-(o=3&s.length),p=i,w=3432918353,R=461845907,ee=0;ee<h;)Y=255&s.charCodeAt(ee)|(255&s.charCodeAt(++ee))<<8|(255&s.charCodeAt(++ee))<<16|(255&s.charCodeAt(++ee))<<24,++ee,p=27492+(65535&(v=5*(65535&(p=(p^=Y=(65535&(Y=(Y=(65535&Y)*w+(((Y>>>16)*w&65535)<<16)&4294967295)<<15|Y>>>17))*R+(((Y>>>16)*R&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(Y=0,o){case 3:Y^=(255&s.charCodeAt(ee+2))<<16;case 2:Y^=(255&s.charCodeAt(ee+1))<<8;case 1:p^=Y=(65535&(Y=(Y=(65535&(Y^=255&s.charCodeAt(ee)))*w+(((Y>>>16)*w&65535)<<16)&4294967295)<<15|Y>>>17))*R+(((Y>>>16)*R&65535)<<16)&4294967295}return p^=s.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Nm={exports:{}};Nm.exports=function(s,i){for(var o,h=s.length,p=i^h,v=0;h>=4;)o=1540483477*(65535&(o=255&s.charCodeAt(v)|(255&s.charCodeAt(++v))<<8|(255&s.charCodeAt(++v))<<16|(255&s.charCodeAt(++v))<<24))+((1540483477*(o>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&s.charCodeAt(v+2))<<16;case 2:p^=(255&s.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&s.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var a0=o0.exports,Fm=Nm.exports;vd.exports=a0,vd.exports.murmur3=a0,vd.exports.murmur2=Fm;class Wl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,o,h,p){this.ids.push(i_(i)),this.positions.push(o,h,p)}getPositions(i){const o=i_(i);let h=0,p=this.ids.length-1;for(;h<p;){const w=h+p>>1;this.ids[w]>=o?p=w:h=w+1}const v=[];for(;this.ids[h]===o;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(i,o){const h=new Float64Array(i.ids),p=new Uint32Array(i.positions);return Ec(h,p,0,h.length-1),o&&o.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(i){const o=new Wl;return o.ids=i.ids,o.positions=i.positions,o.indexed=!0,o}}function i_(s){const i=+s;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:vd.exports(String(s))}function Ec(s,i,o,h){for(;o<h;){const p=s[o+h>>1];let v=o-1,w=h+1;for(;;){do v++;while(s[v]<p);do w--;while(s[w]>p);if(v>=w)break;Lp(s,v,w),Lp(i,3*v,3*w),Lp(i,3*v+1,3*w+1),Lp(i,3*v+2,3*w+2)}w-o<h-w?(Ec(s,i,o,w),o=w+1):(Ec(s,i,w+1,h),h=w)}}function Lp(s,i,o){const h=s[i];s[i]=s[o],s[o]=h}Bi(Wl,"FeaturePositionMap");class Cc{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,o){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,o),this.initialized=!0),!!this.location}}class _u extends Cc{constructor(i){super(i),this.current=0}set(i,o,h){this.fetchUniformLocation(i,o)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class n_ extends Cc{constructor(i){super(i),this.current=[0,0,0,0]}set(i,o,h){this.fetchUniformLocation(i,o)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class r_ extends Cc{constructor(i){super(i),this.current=is.transparent}set(i,o,h){this.fetchUniformLocation(i,o)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const Dx=new Float32Array(16),s_=new Float32Array(9),o_=new Float32Array(4);function jm(s){return[Wi(255*s.r,255*s.g),Wi(255*s.b,255*s.a)]}class yu{constructor(i,o,h){this.value=i,this.uniformNames=o.map(p=>`u_${p}`),this.type=h}setUniform(i,o,h,p,v){o.set(i,v,p.constantOr(this.value))}getBinding(i,o){return this.type==="color"?new r_(i):new _u(i)}}class xd{constructor(i,o){this.uniformNames=o.map(h=>`u_${h}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,o,h,p,v){const w=v==="u_pattern"||v==="u_dash"?this.pattern:v==="u_pixel_ratio"?this.pixelRatio:null;w&&o.set(i,v,w)}getBinding(i,o){return o==="u_pattern"||o==="u_dash"?new n_(i):new _u(i)}}class Bs{constructor(i,o,h,p){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=o.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(i,o,h,p,v,w){const R=this.paintVertexArray.length,Y=this.expression.evaluate(new Dt(0),o,{},v,p,w);this.paintVertexArray.resize(i),this._setPaintValue(R,i,Y)}updatePaintArray(i,o,h,p,v){const w=this.expression.evaluate({zoom:0},h,p,void 0,v);this._setPaintValue(i,o,w)}_setPaintValue(i,o,h){if(this.type==="color"){const p=jm(h);for(let v=i;v<o;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=i;p<o;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qs{constructor(i,o,h,p,v,w){this.expression=i,this.uniformNames=o.map(R=>`u_${R}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=o.map(R=>({name:`a_${R}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(i,o,h,p,v,w){const R=this.expression.evaluate(new Dt(this.zoom),o,{},v,p,w),Y=this.expression.evaluate(new Dt(this.zoom+1),o,{},v,p,w),ee=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(ee,i,R,Y)}updatePaintArray(i,o,h,p,v){const w=this.expression.evaluate({zoom:this.zoom},h,p,void 0,v),R=this.expression.evaluate({zoom:this.zoom+1},h,p,void 0,v);this._setPaintValue(i,o,w,R)}_setPaintValue(i,o,h,p){if(this.type==="color"){const v=jm(h),w=jm(p);for(let R=i;R<o;R++)this.paintVertexArray.emplace(R,v[0],v[1],w[0],w[1])}else{for(let v=i;v<o;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,o,h,p,v){const w=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,R=y(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);o.set(i,v,R)}getBinding(i,o){return new _u(i)}}class Nh{constructor(i,o,h,p,v){this.expression=i,this.layerId=v,this.paintVertexAttributes=(h==="array"?s0:t_).members;for(let w=0;w<o.length;++w);this.paintVertexArray=new p}populatePaintArray(i,o,h){const p=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(p,i,o.patterns&&o.patterns[this.layerId],h)}updatePaintArray(i,o,h,p,v,w){this._setPaintValues(i,o,h.patterns&&h.patterns[this.layerId],w)}_setPaintValues(i,o,h,p){if(!p||!h)return;const v=p[h];if(!v)return;const{tl:w,br:R,pixelRatio:Y}=v;for(let ee=i;ee<o;ee++)this.paintVertexArray.emplace(ee,w[0],w[1],R[0],R[1],Y)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fh{constructor(i,o,h=()=>!0){this.binders={},this._buffers=[];const p=[];for(const v in i.paint._values){if(!h(v))continue;const w=i.paint.get(v);if(!(w instanceof di&&Qt(w.property.specification)))continue;const R=a_(v,i.type),Y=w.value,ee=w.property.specification.type,de=w.property.useIntegerZoom,_e=v==="line-dasharray"||v.endsWith("pattern"),Te=v==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(Y.kind!=="constant"||Te)if(Y.kind==="source"||Te||_e){const Ae=Um(v,ee,"source");this.binders[v]=_e?new Nh(Y,R,ee,Ae,i.id):new Bs(Y,R,ee,Ae),p.push(`/a_${v}`)}else{const Ae=Um(v,ee,"composite");this.binders[v]=new Qs(Y,R,ee,de,o,Ae),p.push(`/z_${v}`)}else this.binders[v]=_e?new xd(Y.value,R):new yu(Y.value,R,ee),p.push(`/u_${v}`)}this.cacheKey=p.sort().join("")}getMaxValue(i){const o=this.binders[i];return o instanceof Bs||o instanceof Qs?o.maxValue:0}populatePaintArrays(i,o,h,p,v,w){for(const R in this.binders){const Y=this.binders[R];(Y instanceof Bs||Y instanceof Qs||Y instanceof Nh)&&Y.populatePaintArray(i,o,h,p,v,w)}}setConstantPatternPositions(i){for(const o in this.binders){const h=this.binders[o];h instanceof xd&&h.setConstantPatternPositions(i)}}updatePaintArrays(i,o,h,p,v,w){let R=!1;for(const Y in i){const ee=o.getPositions(Y);for(const de of ee){const _e=h.feature(de.index);for(const Te in this.binders){const Ae=this.binders[Te];if((Ae instanceof Bs||Ae instanceof Qs||Ae instanceof Nh)&&Ae.expression.isStateDependent===!0){const Ie=p.paint.get(Te);Ae.expression=Ie.value,Ae.updatePaintArray(de.start,de.end,_e,i[Y],v,w),R=!0}}}}return R}defines(){const i=[];for(const o in this.binders){const h=this.binders[o];(h instanceof yu||h instanceof xd)&&i.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return i}getBinderAttributes(){const i=[];for(const o in this.binders){const h=this.binders[o];if(h instanceof Bs||h instanceof Qs||h instanceof Nh)for(let p=0;p<h.paintVertexAttributes.length;p++)i.push(h.paintVertexAttributes[p].name)}return i}getBinderUniforms(){const i=[];for(const o in this.binders){const h=this.binders[o];if(h instanceof yu||h instanceof xd||h instanceof Qs)for(const p of h.uniformNames)i.push(p)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const o=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof yu||p instanceof xd||p instanceof Qs)for(const v of p.uniformNames)o.push({name:v,property:h,binding:p.getBinding(i,v)})}return o}setUniforms(i,o,h,p,v){for(const{name:w,property:R,binding:Y}of h)this.binders[R].setUniform(i,Y,v,p.get(R),w)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const o=this.binders[i];(o instanceof Bs||o instanceof Qs||o instanceof Nh)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(i){for(const o in this.binders){const h=this.binders[o];(h instanceof Bs||h instanceof Qs||h instanceof Nh)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const o=this.binders[i];(o instanceof Bs||o instanceof Qs||o instanceof Nh)&&o.destroy()}}}class Mc{constructor(i,o,h=()=>!0){this.programConfigurations={};for(const p of i)this.programConfigurations[p.id]=new Fh(p,o,h);this.needsUpload=!1,this._featureMap=new Wl,this._bufferOffset=0}populatePaintArrays(i,o,h,p,v,w,R){for(const Y in this.programConfigurations)this.programConfigurations[Y].populatePaintArrays(i,o,p,v,w,R);o.id!==void 0&&this._featureMap.add(o.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,o,h,p,v){for(const w of h)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(i,this._featureMap,o,w,p,v)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const vu={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function a_(s,i){return vu[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}const l_={"line-pattern":{source:mo,composite:mo},"fill-pattern":{source:mo,composite:mo},"fill-extrusion-pattern":{source:mo,composite:mo},"line-dasharray":{source:$a,composite:$a}},Ix={color:{source:Dp,composite:Mo},number:{source:ba,composite:Dp}};function Um(s,i,o){const h=l_[s];return h&&h[o]||Ix[i][o]}Bi(yu,"ConstantBinder"),Bi(xd,"PatternConstantBinder"),Bi(Bs,"SourceExpressionBinder"),Bi(Nh,"PatternCompositeBinder"),Bi(Qs,"CompositeExpressionBinder"),Bi(Fh,"ProgramConfiguration",{omit:["_buffers"]}),Bi(Mc,"ProgramConfigurationSet");const ih="-transition";class aa extends wo{constructor(i,o){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),o.layout&&(this._unevaluatedLayout=new qt(o.layout)),o.paint)){this._transitionablePaint=new si(o.paint);for(const h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(const h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new wi(o.paint)}}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,o,h={}){o!=null&&this._validate(Jc,`layers.${this.id}.layout.${i}`,i,o,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,o):this.visibility=o)}getPaintProperty(i){return ye(i,ih)?this._transitionablePaint.getTransition(i.slice(0,-ih.length)):this._transitionablePaint.getValue(i)}setPaintProperty(i,o,h={}){if(o!=null&&this._validate(Om,`layers.${this.id}.paint.${i}`,i,o,h))return!1;if(ye(i,ih))return this._transitionablePaint.setTransition(i.slice(0,-ih.length),o||void 0),!1;{const p=this._transitionablePaint._values[i],v=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(i,o),this._handleSpecialPaintPropertyUpdate(i);const R=this._transitionablePaint._values[i].value,Y=R.isDataDriven(),ee=ye(i,"pattern")||i==="line-dasharray";return Y||v||ee||this._handleOverridablePaintPropertyUpdate(i,w,R)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,o,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,o){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,o)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),ae(i,(o,h)=>!(o===void 0||h==="layout"&&!Object.keys(o).length||h==="paint"&&!Object.keys(o).length))}_validate(i,o,h,p,v={}){return(!v||v.validate!==!1)&&Yf(this,i.call(Tp,{key:o,layerType:this.type,objectKey:h,value:p,styleSpec:ni,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const o=this.paint.get(i);if(o instanceof di&&Qt(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ns(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Lx=Vi([{name:"a_pos",components:2,type:"Int16"}],4),c_=Vi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Cs{constructor(i=[]){this.segments=i}prepareSegment(i,o,h,p){let v=this.segments[this.segments.length-1];return i>Cs.MAX_VERTEX_ARRAY_LENGTH&&le(`Max vertices per segment is ${Cs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!v||v.vertexLength+i>Cs.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:o.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const i of this.segments)for(const o in i.vaos)i.vaos[o].destroy()}static simpleSegment(i,o,h,p){return new Cs([{vertexOffset:i,primitiveOffset:o,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}Cs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bi(Cs,"SegmentVector");var cn=8192;class nh{constructor(i,o){i&&(o?this.setSouthWest(i).setNorthEast(o):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Kn?new Kn(i.lng,i.lat):Kn.convert(i),this}setSouthWest(i){return this._sw=i instanceof Kn?new Kn(i.lng,i.lat):Kn.convert(i),this}extend(i){const o=this._sw,h=this._ne;let p,v;if(i instanceof Kn)p=i,v=i;else{if(!(i instanceof nh))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(nh.convert(i)):this.extend(Kn.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&i.hasOwnProperty("lon")?this.extend(Kn.convert(i)):this;if(p=i._sw,v=i._ne,!p||!v)return this}return o||h?(o.lng=Math.min(p.lng,o.lng),o.lat=Math.min(p.lat,o.lat),h.lng=Math.max(v.lng,h.lng),h.lat=Math.max(v.lat,h.lat)):(this._sw=new Kn(p.lng,p.lat),this._ne=new Kn(v.lng,v.lat)),this}getCenter(){return new Kn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Kn(this.getWest(),this.getNorth())}getSouthEast(){return new Kn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:o,lat:h}=Kn.convert(i);let p=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(i){return!i||i instanceof nh?i:new nh(i)}}const bd=63710088e-1;class Kn{constructor(i,o){if(isNaN(i)||isNaN(o))throw new Error(`Invalid LngLat object: (${i}, ${o})`);if(this.lng=+i,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Kn(D(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const o=Math.PI/180,h=this.lat*o,p=i.lat*o,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((i.lng-this.lng)*o);return bd*Math.acos(Math.min(v,1))}toBounds(i=0){const o=360*i/40075017,h=o/Math.cos(Math.PI/180*this.lat);return new nh(new Kn(this.lng-h,this.lat-o),new Kn(this.lng+h,this.lat+o))}static convert(i){if(i instanceof Kn)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Kn(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Kn(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Op=2*Math.PI*bd;function Gm(s){return Op*Math.cos(s*Math.PI/180)}function Yl(s){return(180+s)/360}function Ya(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Xa(s,i){return s/Gm(i)}function la(s){return 360*s-180}function _o(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function Vm(s,i){return s*Gm(_o(i))}const yo=85.051129;function $m(s){return 1/Math.cos(s*Math.PI/180)}class wd{constructor(i,o,h=0){this.x=+i,this.y=+o,this.z=+h}static fromLngLat(i,o=0){const h=Kn.convert(i);return new wd(Yl(h.lng),Ya(h.lat),Xa(o,h.lat))}toLngLat(){return new Kn(la(this.x),_o(this.y))}toAltitude(){return Vm(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Op*$m(_o(this.y))}}function Hm(s,i,o,h,p,v,w,R,Y){const ee=(i+h)/2,de=(o+p)/2,_e=new U(ee,de);R(_e),function(Te,Ae,Ie,Fe,Xe,dt){const yt=Ie-Xe,ct=Fe-dt;return Math.abs((Fe-Ae)*yt-(Ie-Te)*ct)/Math.hypot(yt,ct)}(_e.x,_e.y,v.x,v.y,w.x,w.y)>=Y?(Hm(s,i,o,ee,de,v,_e,R,Y),Hm(s,ee,de,h,p,_e,w,R,Y)):s.push(w)}function Wm(s,i,o){let h=s[0],p=h.x,v=h.y;i(h);const w=[h];for(let R=1;R<s.length;R++){const Y=s[R],{x:ee,y:de}=Y;i(Y),Hm(w,p,v,ee,de,h,Y,i,o),p=ee,v=de,h=Y}return w}function Ym(s,i,o,h){if(h(i,o)){const p=i.add(o)._mult(.5);Ym(s,i,p,h),Ym(s,p,o,h)}else s.push(o)}function Ox(s,i){let o=s[0];const h=[o];for(let p=1;p<s.length;p++){const v=s[p];Ym(h,o,v,i),o=v}return h}const Xl=Math.pow(2,14)-1,l0=-Xl-1;function Xm(s,i){const o=Math.round(s.x*i),h=Math.round(s.y*i);return s.x=y(o,l0,Xl),s.y=y(h,l0,Xl),(o<s.x||o>s.x+1||h<s.y||h>s.y+1)&&le("Geometry exceeds allowed extent, reduce your vector tile buffer size"),s}function ql(s,i,o){const h=s.loadGeometry(),p=s.extent,v=cn/p;if(i&&o&&o.projection.isReprojectedInTileSpace){const w=1<<i.z,{scale:R,x:Y,y:ee,projection:de}=o,_e=Te=>{const Ae=la((i.x+Te.x/p)/w),Ie=_o((i.y+Te.y/p)/w),Fe=de.project(Ae,Ie);Te.x=(Fe.x*R-Y)*p,Te.y=(Fe.y*R-ee)*p};for(let Te=0;Te<h.length;Te++)if(s.type!==1)h[Te]=Wm(h[Te],_e,1);else{const Ae=[];for(const Ie of h[Te])Ie.x<0||Ie.x>=p||Ie.y<0||Ie.y>=p||(_e(Ie),Ae.push(Ie));h[Te]=Ae}}for(const w of h)for(const R of w)Xm(R,v);return h}function Ac(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?ql(s):[]}}function rh(s,i,o,h,p){s.emplaceBack(2*i+(h+1)/2,2*o+(p+1)/2)}function Sn(s,i,o){s.emplaceBack(i.x,i.y,i.z,o[0]*16384,o[1]*16384,o[2]*16384)}class xu{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new hr,this.indexArray=new ao,this.segments=new Cs,this.programConfigurations=new Mc(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h,p){const v=this.layers[0],w=[];let R=null;v.type==="circle"&&(R=v.layout.get("circle-sort-key"));for(const{feature:ee,id:de,index:_e,sourceLayerIndex:Te}of i){const Ae=this.layers[0]._featureFilter.needGeometry,Ie=Ac(ee,Ae);if(!this.layers[0]._featureFilter.filter(new Dt(this.zoom),Ie,h))continue;const Fe=R?R.evaluate(Ie,{},h):void 0,Xe={id:de,properties:ee.properties,type:ee.type,sourceLayerIndex:Te,index:_e,geometry:Ae?Ie.geometry:ql(ee,h,p),patterns:{},sortKey:Fe};w.push(Xe)}R&&w.sort((ee,de)=>ee.sortKey-de.sortKey);let Y=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new Fr,Y=p.projection);for(const ee of w){const{geometry:de,index:_e,sourceLayerIndex:Te}=ee,Ae=i[_e].feature;this.addFeature(ee,de,_e,o.availableImages,h,Y),o.featureIndex.insert(Ae,de,_e,Te,this.index)}}update(i,o,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Lx.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,c_.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,o,h,p,v,w){for(const R of o)for(const Y of R){const ee=Y.x,de=Y.y;if(ee<0||ee>=cn||de<0||de>=cn)continue;if(w){const Ae=w.projectTilePoint(ee,de,v),Ie=w.upVector(v,ee,de),Fe=this.globeExtVertexArray;Sn(Fe,Ae,Ie),Sn(Fe,Ae,Ie),Sn(Fe,Ae,Ie),Sn(Fe,Ae,Ie)}const _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),Te=_e.vertexLength;rh(this.layoutVertexArray,ee,de,-1,-1),rh(this.layoutVertexArray,ee,de,1,-1),rh(this.layoutVertexArray,ee,de,1,1),rh(this.layoutVertexArray,ee,de,-1,1),this.indexArray.emplaceBack(Te,Te+1,Te+2),this.indexArray.emplaceBack(Te,Te+2,Te+3),_e.vertexLength+=4,_e.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},p,v)}}function c0(s,i){for(let o=0;o<s.length;o++)if(Sd(i,s[o]))return!0;for(let o=0;o<i.length;o++)if(Sd(s,i[o]))return!0;return!!h0(s,i)}function Td(s,i,o){return!!Sd(s,i)||!!Zm(i,s,o)}function h_(s,i){if(s.length===1)return Km(i,s[0]);for(let o=0;o<i.length;o++){const h=i[o];for(let p=0;p<h.length;p++)if(Sd(s,h[p]))return!0}for(let o=0;o<s.length;o++)if(Km(i,s[o]))return!0;for(let o=0;o<i.length;o++)if(h0(s,i[o]))return!0;return!1}function qm(s,i,o){if(s.length>1){if(h0(s,i))return!0;for(let h=0;h<i.length;h++)if(Zm(i[h],s,o))return!0}for(let h=0;h<s.length;h++)if(Zm(s[h],i,o))return!0;return!1}function h0(s,i){if(s.length===0||i.length===0)return!1;for(let o=0;o<s.length-1;o++){const h=s[o],p=s[o+1];for(let v=0;v<i.length-1;v++)if(Xo(h,p,i[v],i[v+1]))return!0}return!1}function Xo(s,i,o,h){return me(s,o,h)!==me(i,o,h)&&me(s,i,o)!==me(s,i,h)}function Zm(s,i,o){const h=o*o;if(i.length===1)return s.distSqr(i[0])<h;for(let p=1;p<i.length;p++)if(d_(s,i[p-1],i[p])<h)return!0;return!1}function d_(s,i,o){const h=i.distSqr(o);if(h===0)return s.distSqr(i);const p=((s.x-i.x)*(o.x-i.x)+(s.y-i.y)*(o.y-i.y))/h;return s.distSqr(p<0?i:p>1?o:o.sub(i)._mult(p)._add(i))}function Km(s,i){let o,h,p,v=!1;for(let w=0;w<s.length;w++){o=s[w];for(let R=0,Y=o.length-1;R<o.length;Y=R++)h=o[R],p=o[Y],h.y>i.y!=p.y>i.y&&i.x<(p.x-h.x)*(i.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Sd(s,i){let o=!1;for(let h=0,p=s.length-1;h<s.length;p=h++){const v=s[h],w=s[p];v.y>i.y!=w.y>i.y&&i.x<(w.x-v.x)*(i.y-v.y)/(w.y-v.y)+v.x&&(o=!o)}return o}function Jm(s,i,o,h,p){for(const w of s)if(i<=w.x&&o<=w.y&&h>=w.x&&p>=w.y)return!0;const v=[new U(i,o),new U(i,p),new U(h,p),new U(h,o)];if(s.length>2){for(const w of v)if(Sd(s,w))return!0}for(let w=0;w<s.length-1;w++)if(Rx(s[w],s[w+1],v))return!0;return!1}function Rx(s,i,o){const h=o[0],p=o[2];if(s.x<h.x&&i.x<h.x||s.x>p.x&&i.x>p.x||s.y<h.y&&i.y<h.y||s.y>p.y&&i.y>p.y)return!1;const v=me(s,i,o[0]);return v!==me(s,i,o[1])||v!==me(s,i,o[2])||v!==me(s,i,o[3])}function bu(s,i,o){const h=i.paint.get(s).value;return h.kind==="constant"?h.value:o.programConfigurations.get(i.id).getMaxValue(s)}function d0(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function kc(s,i,o,h,p){if(!i[0]&&!i[1])return s;const v=U.convert(i)._mult(p);o==="viewport"&&v._rotate(-h);const w=[];for(let R=0;R<s.length;R++)w.push(s[R].sub(v));return w}function qo(s,i,o,h){const p=U.convert(s)._mult(h);return i==="viewport"&&p._rotate(-o),p}Bi(xu,"CircleBucket",{omit:["layers"]});const Qm=new nn({"circle-sort-key":new Yt(ni.layout_circle["circle-sort-key"])});var Bx={paint:new nn({"circle-radius":new Yt(ni.paint_circle["circle-radius"]),"circle-color":new Yt(ni.paint_circle["circle-color"]),"circle-blur":new Yt(ni.paint_circle["circle-blur"]),"circle-opacity":new Yt(ni.paint_circle["circle-opacity"]),"circle-translate":new Rt(ni.paint_circle["circle-translate"]),"circle-translate-anchor":new Rt(ni.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Rt(ni.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Rt(ni.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yt(ni.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yt(ni.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yt(ni.paint_circle["circle-stroke-opacity"])}),layout:Qm},wu=1e-6,Ta=typeof Float32Array<"u"?Float32Array:Array;function u_(){var s=new Ta(9);return Ta!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Tu(s,i,o){var h=i[0],p=i[1],v=i[2],w=i[3],R=i[4],Y=i[5],ee=i[6],de=i[7],_e=i[8],Te=o[0],Ae=o[1],Ie=o[2],Fe=o[3],Xe=o[4],dt=o[5],yt=o[6],ct=o[7],ft=o[8];return s[0]=Te*h+Ae*w+Ie*ee,s[1]=Te*p+Ae*R+Ie*de,s[2]=Te*v+Ae*Y+Ie*_e,s[3]=Fe*h+Xe*w+dt*ee,s[4]=Fe*p+Xe*R+dt*de,s[5]=Fe*v+Xe*Y+dt*_e,s[6]=yt*h+ct*w+ft*ee,s[7]=yt*p+ct*R+ft*de,s[8]=yt*v+ct*Y+ft*_e,s}function dl(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function u0(s,i){var o=i[0],h=i[1],p=i[2],v=i[3],w=i[4],R=i[5],Y=i[6],ee=i[7],de=i[8],_e=i[9],Te=i[10],Ae=i[11],Ie=i[12],Fe=i[13],Xe=i[14],dt=i[15],yt=o*R-h*w,ct=o*Y-p*w,ft=o*ee-v*w,St=h*Y-p*R,bt=h*ee-v*R,Ht=p*ee-v*Y,$t=de*Fe-_e*Ie,oi=de*Xe-Te*Ie,Ei=de*dt-Ae*Ie,Zt=_e*Xe-Te*Fe,ai=_e*dt-Ae*Fe,ui=Te*dt-Ae*Xe,gi=yt*ui-ct*ai+ft*Zt+St*Ei-bt*oi+Ht*$t;return gi?(s[0]=(R*ui-Y*ai+ee*Zt)*(gi=1/gi),s[1]=(p*ai-h*ui-v*Zt)*gi,s[2]=(Fe*Ht-Xe*bt+dt*St)*gi,s[3]=(Te*bt-_e*Ht-Ae*St)*gi,s[4]=(Y*Ei-w*ui-ee*oi)*gi,s[5]=(o*ui-p*Ei+v*oi)*gi,s[6]=(Xe*ft-Ie*Ht-dt*ct)*gi,s[7]=(de*Ht-Te*ft+Ae*ct)*gi,s[8]=(w*ai-R*Ei+ee*$t)*gi,s[9]=(h*Ei-o*ai-v*$t)*gi,s[10]=(Ie*bt-Fe*ft+dt*yt)*gi,s[11]=(_e*ft-de*bt-Ae*yt)*gi,s[12]=(R*oi-w*Zt-Y*$t)*gi,s[13]=(o*Zt-h*oi+p*$t)*gi,s[14]=(Fe*ct-Ie*St-Xe*yt)*gi,s[15]=(de*St-_e*ct+Te*yt)*gi,s):null}function Ed(s,i,o){var h=i[0],p=i[1],v=i[2],w=i[3],R=i[4],Y=i[5],ee=i[6],de=i[7],_e=i[8],Te=i[9],Ae=i[10],Ie=i[11],Fe=i[12],Xe=i[13],dt=i[14],yt=i[15],ct=o[0],ft=o[1],St=o[2],bt=o[3];return s[0]=ct*h+ft*R+St*_e+bt*Fe,s[1]=ct*p+ft*Y+St*Te+bt*Xe,s[2]=ct*v+ft*ee+St*Ae+bt*dt,s[3]=ct*w+ft*de+St*Ie+bt*yt,s[4]=(ct=o[4])*h+(ft=o[5])*R+(St=o[6])*_e+(bt=o[7])*Fe,s[5]=ct*p+ft*Y+St*Te+bt*Xe,s[6]=ct*v+ft*ee+St*Ae+bt*dt,s[7]=ct*w+ft*de+St*Ie+bt*yt,s[8]=(ct=o[8])*h+(ft=o[9])*R+(St=o[10])*_e+(bt=o[11])*Fe,s[9]=ct*p+ft*Y+St*Te+bt*Xe,s[10]=ct*v+ft*ee+St*Ae+bt*dt,s[11]=ct*w+ft*de+St*Ie+bt*yt,s[12]=(ct=o[12])*h+(ft=o[13])*R+(St=o[14])*_e+(bt=o[15])*Fe,s[13]=ct*p+ft*Y+St*Te+bt*Xe,s[14]=ct*v+ft*ee+St*Ae+bt*dt,s[15]=ct*w+ft*de+St*Ie+bt*yt,s}function Rp(s,i,o){var h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie,Fe=o[0],Xe=o[1],dt=o[2];return i===s?(s[12]=i[0]*Fe+i[4]*Xe+i[8]*dt+i[12],s[13]=i[1]*Fe+i[5]*Xe+i[9]*dt+i[13],s[14]=i[2]*Fe+i[6]*Xe+i[10]*dt+i[14],s[15]=i[3]*Fe+i[7]*Xe+i[11]*dt+i[15]):(p=i[1],v=i[2],w=i[3],R=i[4],Y=i[5],ee=i[6],de=i[7],_e=i[8],Te=i[9],Ae=i[10],Ie=i[11],s[0]=h=i[0],s[1]=p,s[2]=v,s[3]=w,s[4]=R,s[5]=Y,s[6]=ee,s[7]=de,s[8]=_e,s[9]=Te,s[10]=Ae,s[11]=Ie,s[12]=h*Fe+R*Xe+_e*dt+i[12],s[13]=p*Fe+Y*Xe+Te*dt+i[13],s[14]=v*Fe+ee*Xe+Ae*dt+i[14],s[15]=w*Fe+de*Xe+Ie*dt+i[15]),s}function Cd(s,i,o){var h=o[0],p=o[1],v=o[2];return s[0]=i[0]*h,s[1]=i[1]*h,s[2]=i[2]*h,s[3]=i[3]*h,s[4]=i[4]*p,s[5]=i[5]*p,s[6]=i[6]*p,s[7]=i[7]*p,s[8]=i[8]*v,s[9]=i[9]*v,s[10]=i[10]*v,s[11]=i[11]*v,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s}function eg(s,i,o){var h=Math.sin(o),p=Math.cos(o),v=i[4],w=i[5],R=i[6],Y=i[7],ee=i[8],de=i[9],_e=i[10],Te=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=v*p+ee*h,s[5]=w*p+de*h,s[6]=R*p+_e*h,s[7]=Y*p+Te*h,s[8]=ee*p-v*h,s[9]=de*p-w*h,s[10]=_e*p-R*h,s[11]=Te*p-Y*h,s}function Bp(s,i,o){var h=Math.sin(o),p=Math.cos(o),v=i[0],w=i[1],R=i[2],Y=i[3],ee=i[8],de=i[9],_e=i[10],Te=i[11];return i!==s&&(s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=v*p-ee*h,s[1]=w*p-de*h,s[2]=R*p-_e*h,s[3]=Y*p-Te*h,s[8]=v*h+ee*p,s[9]=w*h+de*p,s[10]=R*h+_e*p,s[11]=Y*h+Te*p,s}function tg(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function p_(s,i,o){var h,p,v,w=o[0],R=o[1],Y=o[2],ee=Math.hypot(w,R,Y);return ee<wu?null:(w*=ee=1/ee,R*=ee,Y*=ee,h=Math.sin(i),p=Math.cos(i),s[0]=w*w*(v=1-p)+p,s[1]=R*w*v+Y*h,s[2]=Y*w*v-R*h,s[3]=0,s[4]=w*R*v-Y*h,s[5]=R*R*v+p,s[6]=Y*R*v+w*h,s[7]=0,s[8]=w*Y*v+R*h,s[9]=R*Y*v-w*h,s[10]=Y*Y*v+p,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var ig=Ed;function p0(){var s=new Ta(3);return Ta!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function Su(s){var i=new Ta(3);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i}function Md(s){return Math.hypot(s[0],s[1],s[2])}function Ad(s,i,o){var h=new Ta(3);return h[0]=s,h[1]=i,h[2]=o,h}function Pc(s,i,o){return s[0]=i[0]+o[0],s[1]=i[1]+o[1],s[2]=i[2]+o[2],s}function Eu(s,i,o){return s[0]=i[0]-o[0],s[1]=i[1]-o[1],s[2]=i[2]-o[2],s}function ng(s,i,o){return s[0]=i[0]*o[0],s[1]=i[1]*o[1],s[2]=i[2]*o[2],s}function Sa(s,i,o){return s[0]=Math.min(i[0],o[0]),s[1]=Math.min(i[1],o[1]),s[2]=Math.min(i[2],o[2]),s}function Zl(s,i,o){return s[0]=Math.max(i[0],o[0]),s[1]=Math.max(i[1],o[1]),s[2]=Math.max(i[2],o[2]),s}function qa(s,i,o){return s[0]=i[0]*o,s[1]=i[1]*o,s[2]=i[2]*o,s}function Cu(s,i,o,h){return s[0]=i[0]+o[0]*h,s[1]=i[1]+o[1]*h,s[2]=i[2]+o[2]*h,s}function Zo(s,i){var o=i[0],h=i[1],p=i[2],v=o*o+h*h+p*p;return v>0&&(v=1/Math.sqrt(v)),s[0]=i[0]*v,s[1]=i[1]*v,s[2]=i[2]*v,s}function ul(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]}function rg(s,i,o){var h=i[0],p=i[1],v=i[2],w=o[0],R=o[1],Y=o[2];return s[0]=p*Y-v*R,s[1]=v*w-h*Y,s[2]=h*R-p*w,s}function bs(s,i,o){var h=i[0],p=i[1],v=i[2],w=o[3]*h+o[7]*p+o[11]*v+o[15];return s[0]=(o[0]*h+o[4]*p+o[8]*v+o[12])/(w=w||1),s[1]=(o[1]*h+o[5]*p+o[9]*v+o[13])/w,s[2]=(o[2]*h+o[6]*p+o[10]*v+o[14])/w,s}function f_(s,i,o){var h=o[0],p=o[1],v=o[2],w=i[0],R=i[1],Y=i[2],ee=p*Y-v*R,de=v*w-h*Y,_e=h*R-p*w,Te=p*_e-v*de,Ae=v*ee-h*_e,Ie=h*de-p*ee,Fe=2*o[3];return de*=Fe,_e*=Fe,Ae*=2,Ie*=2,s[0]=w+(ee*=Fe)+(Te*=2),s[1]=R+de+Ae,s[2]=Y+_e+Ie,s}var zp,Kl=Eu,zx=ng,Nx=Md;function m_(s,i,o){return s[0]=i[0]*o,s[1]=i[1]*o,s[2]=i[2]*o,s[3]=i[3]*o,s}function g_(s,i){var o=i[0],h=i[1],p=i[2],v=i[3],w=o*o+h*h+p*p+v*v;return w>0&&(w=1/Math.sqrt(w)),s[0]=o*w,s[1]=h*w,s[2]=p*w,s[3]=v*w,s}function jh(s,i,o){var h=i[0],p=i[1],v=i[2],w=i[3];return s[0]=o[0]*h+o[4]*p+o[8]*v+o[12]*w,s[1]=o[1]*h+o[5]*p+o[9]*v+o[13]*w,s[2]=o[2]*h+o[6]*p+o[10]*v+o[14]*w,s[3]=o[3]*h+o[7]*p+o[11]*v+o[15]*w,s}function sg(){var s=new Ta(4);return Ta!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function og(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=1,s}function __(s,i,o){o*=.5;var h=i[0],p=i[1],v=i[2],w=i[3],R=Math.sin(o),Y=Math.cos(o);return s[0]=h*Y+w*R,s[1]=p*Y+v*R,s[2]=v*Y-p*R,s[3]=w*Y-h*R,s}function y_(s,i,o){o*=.5;var h=i[0],p=i[1],v=i[2],w=i[3],R=Math.sin(o),Y=Math.cos(o);return s[0]=h*Y-v*R,s[1]=p*Y+w*R,s[2]=v*Y+h*R,s[3]=w*Y-p*R,s}p0(),zp=new Ta(4),Ta!=Float32Array&&(zp[0]=0,zp[1]=0,zp[2]=0,zp[3]=0);var Fx=g_;p0(),Ad(1,0,0),Ad(0,1,0),sg(),sg(),u_();class f0{constructor(i,o){this.pos=i,this.dir=o}intersectsPlane(i,o,h){const p=ul(o,this.dir);if(Math.abs(p)<1e-6)return!1;const v=((i[0]-this.pos[0])*o[0]+(i[1]-this.pos[1])*o[1]+(i[2]-this.pos[2])*o[2])/p;return h[0]=this.pos[0]+this.dir[0]*v,h[1]=this.pos[1]+this.dir[1]*v,h[2]=this.pos[2]+this.dir[2]*v,!0}closestPointOnSphere(i,o,h){if(function(Ae,Ie){var Fe=Ae[0],Xe=Ae[1],dt=Ae[2],yt=Ie[0],ct=Ie[1],ft=Ie[2];return Math.abs(Fe-yt)<=wu*Math.max(1,Math.abs(Fe),Math.abs(yt))&&Math.abs(Xe-ct)<=wu*Math.max(1,Math.abs(Xe),Math.abs(ct))&&Math.abs(dt-ft)<=wu*Math.max(1,Math.abs(dt),Math.abs(ft))}(this.pos,i)||o===0)return h[0]=h[1]=h[2]=0,!1;const[p,v,w]=this.dir,R=this.pos[0]-i[0],Y=this.pos[1]-i[1],ee=this.pos[2]-i[2],de=p*p+v*v+w*w,_e=2*(R*p+Y*v+ee*w),Te=_e*_e-4*de*(R*R+Y*Y+ee*ee-o*o);if(Te<0){const Ae=Math.max(-_e/2,0),Ie=R+p*Ae,Fe=Y+v*Ae,Xe=ee+w*Ae,dt=Math.hypot(Ie,Fe,Xe);return h[0]=Ie*o/dt,h[1]=Fe*o/dt,h[2]=Xe*o/dt,!1}{const Ae=(-_e-Math.sqrt(Te))/(2*de);if(Ae<0){const Ie=Math.hypot(R,Y,ee);return h[0]=R*o/Ie,h[1]=Y*o/Ie,h[2]=ee*o/Ie,!1}return h[0]=R+p*Ae,h[1]=Y+v*Ae,h[2]=ee+w*Ae,!0}}}class ag{constructor(i,o,h,p,v){this.TL=i,this.TR=o,this.BR=h,this.BL=p,this.horizon=v}static fromInvProjectionMatrix(i,o,h){const p=[-1,1,1],v=[1,1,1],w=[1,-1,1],R=[-1,-1,1],Y=bs(p,p,i),ee=bs(v,v,i),de=bs(w,w,i),_e=bs(R,R,i);return new ag(Y,ee,de,_e,o/h)}}class lg{constructor(i,o){this.points=i,this.planes=o}static fromInvProjectionMatrix(i,o,h,p){const v=Math.pow(2,h),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Y=>{const ee=jh([],Y,i),de=1/ee[3]/o*v;return function(_e,Te,Ae){return _e[0]=Te[0]*Ae[0],_e[1]=Te[1]*Ae[1],_e[2]=Te[2]*Ae[2],_e[3]=Te[3]*Ae[3],_e}(ee,ee,[de,de,p?1/ee[3]:de,de])}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Y=>{const ee=Zo([],rg([],Kl([],w[Y[0]],w[Y[1]]),Kl([],w[Y[2]],w[Y[1]]))),de=-ul(ee,w[Y[1]]);return ee.concat(de)});return new lg(w,R)}}class Ko{static fromPoints(i){const o=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const p of i)Sa(o,o,p),Zl(h,h,p);return new Ko(o,h)}static applyTransform(i,o){const h=i.getCorners();for(let p=0;p<h.length;++p)bs(h[p],h[p],o);return Ko.fromPoints(h)}constructor(i,o){this.min=i,this.max=o,this.center=qa([],Pc([],this.min,this.max),.5)}quadrant(i){const o=[i%2==0,i<2],h=Su(this.min),p=Su(this.max);for(let v=0;v<o.length;v++)h[v]=o[v]?this.min[v]:this.center[v],p[v]=o[v]?this.center[v]:this.max[v];return p[2]=this.max[2],new Ko(h,p)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,o=this.max;return[[i[0],i[1],i[2]],[o[0],i[1],i[2]],[o[0],o[1],i[2]],[i[0],o[1],i[2]],[i[0],i[1],o[2]],[o[0],i[1],o[2]],[o[0],o[1],o[2]],[i[0],o[1],o[2]]]}intersects(i){const o=this.getCorners();let h=!0;for(let p=0;p<i.planes.length;p++){const v=i.planes[p];let w=0;for(let R=0;R<o.length;R++)w+=ul(v,o[R])+v[3]>=0;if(w===0)return 0;w!==o.length&&(h=!1)}if(h)return 2;for(let p=0;p<3;p++){let v=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let R=0;R<i.points.length;R++){const Y=i.points[R][p]-this.min[p];v=Math.min(v,Y),w=Math.max(w,Y)}if(w<0||v>this.max[p]-this.min[p])return 0}return 1}}function v_(s,i,o,h,p,v,w,R,Y){if(v&&s.queryGeometry.isAboveHorizon)return!1;v&&(Y*=s.pixelToTileUnitsFactor);const ee=s.tileID.canonical,de=o.projection.upVectorScale(ee,o.center.lat,o.worldSize).metersToTile;for(const _e of i)for(const Te of _e){const Ae=Te.add(R),Ie=p&&o.elevation?o.elevation.exaggeration()*p.getElevationAt(Ae.x,Ae.y,!0):0,Fe=o.projection.projectTilePoint(Ae.x,Ae.y,ee);if(Ie>0){const ct=o.projection.upVector(ee,Ae.x,Ae.y);Fe.x+=ct[0]*de*Ie,Fe.y+=ct[1]*de*Ie,Fe.z+=ct[2]*de*Ie}const Xe=v?Ae:jx(Fe.x,Fe.y,Fe.z,h),dt=v?s.tilespaceRays.map(ct=>Ux(ct,Ie)):s.queryGeometry.screenGeometry,yt=jh([],[Fe.x,Fe.y,Fe.z,1],h);if(!w&&v?Y*=yt[3]/o.cameraToCenterDistance:w&&!v&&(Y*=o.cameraToCenterDistance/yt[3]),v){const ct=_o((Te.y/cn+ee.y)/(1<<ee.z));Y/=o.projection.pixelsPerMeter(ct,1)/Xa(1,ct)}if(Td(dt,Xe,Y))return!0}return!1}function jx(s,i,o,h){const p=jh([],[s,i,o,1],h);return new U(p[0]/p[3],p[1]/p[3])}const x_=Ad(0,0,0),pl=Ad(0,0,1);function Ux(s,i){const o=p0();return x_[2]=i,s.intersectsPlane(x_,pl,o),new U(o[0],o[1])}class b_ extends xu{}function w_(s,{width:i,height:o},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==i*o*h)throw new RangeError("mismatched image size")}else p=new Uint8Array(i*o*h);return s.width=i,s.height=o,s.data=p,s}function cg(s,i,o){const{width:h,height:p}=i;h===s.width&&p===s.height||(hg(s,i,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,h),height:Math.min(s.height,p)},o),s.width=h,s.height=p,s.data=i.data)}function hg(s,i,o,h,p,v){if(p.width===0||p.height===0)return i;if(p.width>s.width||p.height>s.height||o.x>s.width-p.width||o.y>s.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>i.width||p.height>i.height||h.x>i.width-p.width||h.y>i.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const w=s.data,R=i.data;for(let Y=0;Y<p.height;Y++){const ee=((o.y+Y)*s.width+o.x)*v,de=((h.y+Y)*i.width+h.x)*v;for(let _e=0;_e<p.width*v;_e++)R[de+_e]=w[ee+_e]}return i}Bi(b_,"HeatmapBucket",{omit:["layers"]});class sh{constructor(i,o){w_(this,i,1,o)}resize(i){cg(this,new sh(i),1)}clone(){return new sh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,o,h,p,v){hg(i,o,h,p,v,1)}}class Ea{constructor(i,o){w_(this,i,4,o)}resize(i){cg(this,new Ea(i),4)}replace(i,o){o?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Ea({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,o,h,p,v){hg(i,o,h,p,v,4)}}Bi(sh,"AlphaImage"),Bi(Ea,"RGBAImage");var Gx={paint:new nn({"heatmap-radius":new Yt(ni.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yt(ni.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Rt(ni.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Hi(ni.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Rt(ni.paint_heatmap["heatmap-opacity"])})};function Np(s){const i={},o=s.resolution||256,h=s.clips?s.clips.length:1,p=s.image||new Ea({width:o,height:h}),v=(w,R,Y)=>{i[s.evaluationKey]=Y;const ee=s.expression.evaluate(i);p.data[w+R+0]=Math.floor(255*ee.r/ee.a),p.data[w+R+1]=Math.floor(255*ee.g/ee.a),p.data[w+R+2]=Math.floor(255*ee.b/ee.a),p.data[w+R+3]=Math.floor(255*ee.a)};if(s.clips)for(let w=0,R=0;w<h;++w,R+=4*o)for(let Y=0,ee=0;Y<o;Y++,ee+=4){const de=Y/(o-1),{start:_e,end:Te}=s.clips[w];v(R,ee,_e*(1-de)+Te*de)}else for(let w=0,R=0;w<o;w++,R+=4)v(0,R,w/(o-1));return p}var Vx={paint:new nn({"hillshade-illumination-direction":new Rt(ni.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Rt(ni.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Rt(ni.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Rt(ni.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Rt(ni.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Rt(ni.paint_hillshade["hillshade-accent-color"])})};const $x=Vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Hx}=$x;var Fp={exports:{}};function m0(s,i,o){o=o||2;var h,p,v,w,R,Y,ee,de=i&&i.length,_e=de?i[0]*o:s.length,Te=T_(s,0,_e,o,!0),Ae=[];if(!Te||Te.next===Te.prev)return Ae;if(de&&(Te=function(Fe,Xe,dt,yt){var ct,ft,St,bt=[];for(ct=0,ft=Xe.length;ct<ft;ct++)(St=T_(Fe,Xe[ct]*yt,ct<ft-1?Xe[ct+1]*yt:Fe.length,yt,!1))===St.next&&(St.steiner=!0),bt.push(Qx(St));for(bt.sort(Zx),ct=0;ct<bt.length;ct++)dt=Kx(bt[ct],dt);return dt}(s,i,Te,o)),s.length>80*o){h=v=s[0],p=w=s[1];for(var Ie=o;Ie<_e;Ie+=o)(R=s[Ie])<h&&(h=R),(Y=s[Ie+1])<p&&(p=Y),R>v&&(v=R),Y>w&&(w=Y);ee=(ee=Math.max(v-h,w-p))!==0?32767/ee:0}return jp(Te,Ae,o,h,p,ee,0),Ae}function T_(s,i,o,h,p){var v,w;if(p===fg(s,i,o,h)>0)for(v=i;v<o;v+=h)w=E_(v,s[v],s[v+1],w);else for(v=o-h;v>=i;v-=h)w=E_(v,s[v],s[v+1],w);return w&&Au(w,w.next)&&(Gp(w),w=w.next),w}function kd(s,i){if(!s)return s;i||(i=s);var o,h=s;do if(o=!1,h.steiner||!Au(h,h.next)&&Ms(h.prev,h,h.next)!==0)h=h.next;else{if(Gp(h),(h=i=h.prev)===h.next)break;o=!0}while(o||h!==i);return i}function jp(s,i,o,h,p,v,w){if(s){!w&&v&&function(de,_e,Te,Ae){var Ie=de;do Ie.z===0&&(Ie.z=dg(Ie.x,Ie.y,_e,Te,Ae)),Ie.prevZ=Ie.prev,Ie.nextZ=Ie.next,Ie=Ie.next;while(Ie!==de);Ie.prevZ.nextZ=null,Ie.prevZ=null,function(Fe){var Xe,dt,yt,ct,ft,St,bt,Ht,$t=1;do{for(dt=Fe,Fe=null,ft=null,St=0;dt;){for(St++,yt=dt,bt=0,Xe=0;Xe<$t&&(bt++,yt=yt.nextZ);Xe++);for(Ht=$t;bt>0||Ht>0&&yt;)bt!==0&&(Ht===0||!yt||dt.z<=yt.z)?(ct=dt,dt=dt.nextZ,bt--):(ct=yt,yt=yt.nextZ,Ht--),ft?ft.nextZ=ct:Fe=ct,ct.prevZ=ft,ft=ct;dt=yt}ft.nextZ=null,$t*=2}while(St>1)}(Ie)}(s,h,p,v);for(var R,Y,ee=s;s.prev!==s.next;)if(R=s.prev,Y=s.next,v?Yx(s,h,p,v):Wx(s))i.push(R.i/o|0),i.push(s.i/o|0),i.push(Y.i/o|0),Gp(s),s=Y.next,ee=Y.next;else if((s=Y)===ee){w?w===1?jp(s=Xx(kd(s),i,o),i,o,h,p,v,2):w===2&&qx(s,i,o,h,p,v):jp(kd(s),i,o,h,p,v,1);break}}}function Wx(s){var i=s.prev,o=s,h=s.next;if(Ms(i,o,h)>=0)return!1;for(var p=i.x,v=o.x,w=h.x,R=i.y,Y=o.y,ee=h.y,de=p<v?p<w?p:w:v<w?v:w,_e=R<Y?R<ee?R:ee:Y<ee?Y:ee,Te=p>v?p>w?p:w:v>w?v:w,Ae=R>Y?R>ee?R:ee:Y>ee?Y:ee,Ie=h.next;Ie!==i;){if(Ie.x>=de&&Ie.x<=Te&&Ie.y>=_e&&Ie.y<=Ae&&Mu(p,R,v,Y,w,ee,Ie.x,Ie.y)&&Ms(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.next}return!0}function Yx(s,i,o,h){var p=s.prev,v=s,w=s.next;if(Ms(p,v,w)>=0)return!1;for(var R=p.x,Y=v.x,ee=w.x,de=p.y,_e=v.y,Te=w.y,Ae=R<Y?R<ee?R:ee:Y<ee?Y:ee,Ie=de<_e?de<Te?de:Te:_e<Te?_e:Te,Fe=R>Y?R>ee?R:ee:Y>ee?Y:ee,Xe=de>_e?de>Te?de:Te:_e>Te?_e:Te,dt=dg(Ae,Ie,i,o,h),yt=dg(Fe,Xe,i,o,h),ct=s.prevZ,ft=s.nextZ;ct&&ct.z>=dt&&ft&&ft.z<=yt;){if(ct.x>=Ae&&ct.x<=Fe&&ct.y>=Ie&&ct.y<=Xe&&ct!==p&&ct!==w&&Mu(R,de,Y,_e,ee,Te,ct.x,ct.y)&&Ms(ct.prev,ct,ct.next)>=0||(ct=ct.prevZ,ft.x>=Ae&&ft.x<=Fe&&ft.y>=Ie&&ft.y<=Xe&&ft!==p&&ft!==w&&Mu(R,de,Y,_e,ee,Te,ft.x,ft.y)&&Ms(ft.prev,ft,ft.next)>=0))return!1;ft=ft.nextZ}for(;ct&&ct.z>=dt;){if(ct.x>=Ae&&ct.x<=Fe&&ct.y>=Ie&&ct.y<=Xe&&ct!==p&&ct!==w&&Mu(R,de,Y,_e,ee,Te,ct.x,ct.y)&&Ms(ct.prev,ct,ct.next)>=0)return!1;ct=ct.prevZ}for(;ft&&ft.z<=yt;){if(ft.x>=Ae&&ft.x<=Fe&&ft.y>=Ie&&ft.y<=Xe&&ft!==p&&ft!==w&&Mu(R,de,Y,_e,ee,Te,ft.x,ft.y)&&Ms(ft.prev,ft,ft.next)>=0)return!1;ft=ft.nextZ}return!0}function Xx(s,i,o){var h=s;do{var p=h.prev,v=h.next.next;!Au(p,v)&&ug(p,h,h.next,v)&&Up(p,v)&&Up(v,p)&&(i.push(p.i/o|0),i.push(h.i/o|0),i.push(v.i/o|0),Gp(h),Gp(h.next),h=s=v),h=h.next}while(h!==s);return kd(h)}function qx(s,i,o,h,p,v){var w=s;do{for(var R=w.next.next;R!==w.prev;){if(w.i!==R.i&&e2(w,R)){var Y=S_(w,R);return w=kd(w,w.next),Y=kd(Y,Y.next),jp(w,i,o,h,p,v,0),void jp(Y,i,o,h,p,v,0)}R=R.next}w=w.next}while(w!==s)}function Zx(s,i){return s.x-i.x}function Kx(s,i){var o=function(p,v){var w,R=v,Y=p.x,ee=p.y,de=-1/0;do{if(ee<=R.y&&ee>=R.next.y&&R.next.y!==R.y){var _e=R.x+(ee-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(_e<=Y&&_e>de&&(de=_e,w=R.x<R.next.x?R:R.next,_e===Y))return w}R=R.next}while(R!==v);if(!w)return null;var Te,Ae=w,Ie=w.x,Fe=w.y,Xe=1/0;R=w;do Y>=R.x&&R.x>=Ie&&Y!==R.x&&Mu(ee<Fe?Y:de,ee,Ie,Fe,ee<Fe?de:Y,ee,R.x,R.y)&&(Te=Math.abs(ee-R.y)/(Y-R.x),Up(R,p)&&(Te<Xe||Te===Xe&&(R.x>w.x||R.x===w.x&&Jx(w,R)))&&(w=R,Xe=Te)),R=R.next;while(R!==Ae);return w}(s,i);if(!o)return i;var h=S_(o,s);return kd(h,h.next),kd(o,o.next)}function Jx(s,i){return Ms(s.prev,s,i.prev)<0&&Ms(i.next,s,s.next)<0}function dg(s,i,o,h,p){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*p|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Qx(s){var i=s,o=s;do(i.x<o.x||i.x===o.x&&i.y<o.y)&&(o=i),i=i.next;while(i!==s);return o}function Mu(s,i,o,h,p,v,w,R){return(p-w)*(i-R)>=(s-w)*(v-R)&&(s-w)*(h-R)>=(o-w)*(i-R)&&(o-w)*(v-R)>=(p-w)*(h-R)}function e2(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(o,h){var p=o;do{if(p.i!==o.i&&p.next.i!==o.i&&p.i!==h.i&&p.next.i!==h.i&&ug(p,p.next,o,h))return!0;p=p.next}while(p!==o);return!1}(s,i)&&(Up(s,i)&&Up(i,s)&&function(o,h){var p=o,v=!1,w=(o.x+h.x)/2,R=(o.y+h.y)/2;do p.y>R!=p.next.y>R&&p.next.y!==p.y&&w<(p.next.x-p.x)*(R-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==o);return v}(s,i)&&(Ms(s.prev,s,i.prev)||Ms(s,i.prev,i))||Au(s,i)&&Ms(s.prev,s,s.next)>0&&Ms(i.prev,i,i.next)>0)}function Ms(s,i,o){return(i.y-s.y)*(o.x-i.x)-(i.x-s.x)*(o.y-i.y)}function Au(s,i){return s.x===i.x&&s.y===i.y}function ug(s,i,o,h){var p=_0(Ms(s,i,o)),v=_0(Ms(s,i,h)),w=_0(Ms(o,h,s)),R=_0(Ms(o,h,i));return p!==v&&w!==R||!(p!==0||!g0(s,o,i))||!(v!==0||!g0(s,h,i))||!(w!==0||!g0(o,s,h))||!(R!==0||!g0(o,i,h))}function g0(s,i,o){return i.x<=Math.max(s.x,o.x)&&i.x>=Math.min(s.x,o.x)&&i.y<=Math.max(s.y,o.y)&&i.y>=Math.min(s.y,o.y)}function _0(s){return s>0?1:s<0?-1:0}function Up(s,i){return Ms(s.prev,s,s.next)<0?Ms(s,i,s.next)>=0&&Ms(s,s.prev,i)>=0:Ms(s,i,s.prev)<0||Ms(s,s.next,i)<0}function S_(s,i){var o=new pg(s.i,s.x,s.y),h=new pg(i.i,i.x,i.y),p=s.next,v=i.prev;return s.next=i,i.prev=s,o.next=p,p.prev=o,h.next=o,o.prev=h,v.next=h,h.prev=v,h}function E_(s,i,o,h){var p=new pg(s,i,o);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Gp(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function pg(s,i,o){this.i=s,this.x=i,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fg(s,i,o,h){for(var p=0,v=i,w=o-h;v<o;v+=h)p+=(s[w]-s[v])*(s[v+1]+s[w+1]),w=v;return p}function C_(s,i,o,h,p){M_(s,i,o||0,h||s.length-1,p||t2)}function M_(s,i,o,h,p){for(;h>o;){if(h-o>600){var v=h-o+1,w=i-o+1,R=Math.log(v),Y=.5*Math.exp(2*R/3),ee=.5*Math.sqrt(R*Y*(v-Y)/v)*(w-v/2<0?-1:1);M_(s,i,Math.max(o,Math.floor(i-w*Y/v+ee)),Math.min(h,Math.floor(i+(v-w)*Y/v+ee)),p)}var de=s[i],_e=o,Te=h;for(Uh(s,o,i),p(s[h],de)>0&&Uh(s,o,h);_e<Te;){for(Uh(s,_e,Te),_e++,Te--;p(s[_e],de)<0;)_e++;for(;p(s[Te],de)>0;)Te--}p(s[o],de)===0?Uh(s,o,Te):Uh(s,++Te,h),Te<=i&&(o=Te+1),i<=Te&&(h=Te-1)}}function Uh(s,i,o){var h=s[i];s[i]=s[o],s[o]=h}function t2(s,i){return s<i?-1:s>i?1:0}function mg(s,i){const o=s.length;if(o<=1)return[s];const h=[];let p,v;for(let w=0;w<o;w++){const R=be(s[w]);R!==0&&(s[w].area=Math.abs(R),v===void 0&&(v=R<0),v===R<0?(p&&h.push(p),p=[s[w]]):p.push(s[w]))}if(p&&h.push(p),i>1)for(let w=0;w<h.length;w++)h[w].length<=i||(C_(h[w],i,1,h[w].length-1,i2),h[w]=h[w].slice(0,i));return h}function i2(s,i){return i.area-s.area}function gg(s,i,o){const h=o.patternDependencies;let p=!1;for(const v of i){const w=v.paint.get(`${s}-pattern`);w.isConstant()||(p=!0);const R=w.constantOr(null);R&&(p=!0,h[R]=!0)}return p}function _g(s,i,o,h,p){const v=p.patternDependencies;for(const w of i){const R=w.paint.get(`${s}-pattern`).value;if(R.kind!=="constant"){let Y=R.evaluate({zoom:h},o,{},p.availableImages);Y=Y&&Y.name?Y.name:Y,v[Y]=!0,o.patterns[w.id]=Y}}return o}Fp.exports=m0,Fp.exports.default=m0,m0.deviation=function(s,i,o,h){var p=i&&i.length,v=Math.abs(fg(s,0,p?i[0]*o:s.length,o));if(p)for(var w=0,R=i.length;w<R;w++)v-=Math.abs(fg(s,i[w]*o,w<R-1?i[w+1]*o:s.length,o));var Y=0;for(w=0;w<h.length;w+=3){var ee=h[w]*o,de=h[w+1]*o,_e=h[w+2]*o;Y+=Math.abs((s[ee]-s[_e])*(s[de+1]-s[ee+1])-(s[ee]-s[de])*(s[_e+1]-s[ee+1]))}return v===0&&Y===0?0:Math.abs((Y-v)/v)},m0.flatten=function(s){for(var i=s[0][0].length,o={vertices:[],holes:[],dimensions:i},h=0,p=0;p<s.length;p++){for(var v=0;v<s[p].length;v++)for(var w=0;w<i;w++)o.vertices.push(s[p][v][w]);p>0&&o.holes.push(h+=s[p-1].length)}return o};class y0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hr,this.indexArray=new ao,this.indexArray2=new hl,this.programConfigurations=new Mc(i.layers,i.zoom),this.segments=new Cs,this.segments2=new Cs,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=i.projection}populate(i,o,h,p){this.hasPattern=gg("fill",this.layers,o);const v=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:R,id:Y,index:ee,sourceLayerIndex:de}of i){const _e=this.layers[0]._featureFilter.needGeometry,Te=Ac(R,_e);if(!this.layers[0]._featureFilter.filter(new Dt(this.zoom),Te,h))continue;const Ae=v?v.evaluate(Te,{},h,o.availableImages):void 0,Ie={id:Y,properties:R.properties,type:R.type,sourceLayerIndex:de,index:ee,geometry:_e?Te.geometry:ql(R,h,p),patterns:{},sortKey:Ae};w.push(Ie)}v&&w.sort((R,Y)=>R.sortKey-Y.sortKey);for(const R of w){const{geometry:Y,index:ee,sourceLayerIndex:de}=R;if(this.hasPattern){const _e=_g("fill",this.layers,R,this.zoom,o);this.patternFeatures.push(_e)}else this.addFeature(R,Y,ee,h,{},o.availableImages);o.featureIndex.insert(i[ee].feature,Y,ee,de,this.index)}}update(i,o,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,h,p)}addFeatures(i,o,h,p,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,o,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Hx),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,o,h,p,v,w=[]){for(const R of mg(o,500)){let Y=0;for(const Ie of R)Y+=Ie.length;const ee=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray),de=ee.vertexLength,_e=[],Te=[];for(const Ie of R){if(Ie.length===0)continue;Ie!==R[0]&&Te.push(_e.length/2);const Fe=this.segments2.prepareSegment(Ie.length,this.layoutVertexArray,this.indexArray2),Xe=Fe.vertexLength;this.layoutVertexArray.emplaceBack(Ie[0].x,Ie[0].y),this.indexArray2.emplaceBack(Xe+Ie.length-1,Xe),_e.push(Ie[0].x),_e.push(Ie[0].y);for(let dt=1;dt<Ie.length;dt++)this.layoutVertexArray.emplaceBack(Ie[dt].x,Ie[dt].y),this.indexArray2.emplaceBack(Xe+dt-1,Xe+dt),_e.push(Ie[dt].x),_e.push(Ie[dt].y);Fe.vertexLength+=Ie.length,Fe.primitiveLength+=Ie.length}const Ae=Fp.exports(_e,Te);for(let Ie=0;Ie<Ae.length;Ie+=3)this.indexArray.emplaceBack(de+Ae[Ie],de+Ae[Ie+1],de+Ae[Ie+2]);ee.vertexLength+=Y,ee.primitiveLength+=Ae.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,v,w,p)}}Bi(y0,"FillBucket",{omit:["layers","patternFeatures"]});const n2=new nn({"fill-sort-key":new Yt(ni.layout_fill["fill-sort-key"])});var r2={paint:new nn({"fill-antialias":new Rt(ni.paint_fill["fill-antialias"]),"fill-opacity":new Yt(ni.paint_fill["fill-opacity"]),"fill-color":new Yt(ni.paint_fill["fill-color"]),"fill-outline-color":new Yt(ni.paint_fill["fill-outline-color"]),"fill-translate":new Rt(ni.paint_fill["fill-translate"]),"fill-translate-anchor":new Rt(ni.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yt(ni.paint_fill["fill-pattern"])}),layout:n2};const s2=Vi([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),o2=Vi([{name:"a_centroid_pos",components:2,type:"Uint16"}]),a2=Vi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:l2}=s2;var v0={},c2=U,A_=ku;function ku(s,i,o,h,p){this.properties={},this.extent=o,this.type=0,this._pbf=s,this._geometry=-1,this._keys=h,this._values=p,s.readFields(k_,this,i)}function k_(s,i,o){s==1?i.id=o.readVarint():s==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var w=p._keys[h.readVarint()],R=p._values[h.readVarint()];p.properties[w]=R}}(o,i):s==3?i.type=o.readVarint():s==4&&(i._geometry=o.pos)}function P_(s){for(var i,o,h=0,p=0,v=s.length,w=v-1;p<v;w=p++)h+=((o=s[w]).x-(i=s[p]).x)*(i.y+o.y);return h}ku.types=["Unknown","Point","LineString","Polygon"],ku.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,o=s.readVarint()+s.pos,h=1,p=0,v=0,w=0,R=[];s.pos<o;){if(p<=0){var Y=s.readVarint();h=7&Y,p=Y>>3}if(p--,h===1||h===2)v+=s.readSVarint(),w+=s.readSVarint(),h===1&&(i&&R.push(i),i=[]),i.push(new c2(v,w));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&R.push(i),R},ku.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,o=1,h=0,p=0,v=0,w=1/0,R=-1/0,Y=1/0,ee=-1/0;s.pos<i;){if(h<=0){var de=s.readVarint();o=7&de,h=de>>3}if(h--,o===1||o===2)(p+=s.readSVarint())<w&&(w=p),p>R&&(R=p),(v+=s.readSVarint())<Y&&(Y=v),v>ee&&(ee=v);else if(o!==7)throw new Error("unknown command "+o)}return[w,Y,R,ee]},ku.prototype.toGeoJSON=function(s,i,o){var h,p,v=this.extent*Math.pow(2,o),w=this.extent*s,R=this.extent*i,Y=this.loadGeometry(),ee=ku.types[this.type];function de(Ae){for(var Ie=0;Ie<Ae.length;Ie++){var Fe=Ae[Ie];Ae[Ie]=[360*(Fe.x+w)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Fe.y+R)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var _e=[];for(h=0;h<Y.length;h++)_e[h]=Y[h][0];de(Y=_e);break;case 2:for(h=0;h<Y.length;h++)de(Y[h]);break;case 3:for(Y=function(Ae){var Ie=Ae.length;if(Ie<=1)return[Ae];for(var Fe,Xe,dt=[],yt=0;yt<Ie;yt++){var ct=P_(Ae[yt]);ct!==0&&(Xe===void 0&&(Xe=ct<0),Xe===ct<0?(Fe&&dt.push(Fe),Fe=[Ae[yt]]):Fe.push(Ae[yt]))}return Fe&&dt.push(Fe),dt}(Y),h=0;h<Y.length;h++)for(p=0;p<Y[h].length;p++)de(Y[h][p])}Y.length===1?Y=Y[0]:ee="Multi"+ee;var Te={type:"Feature",geometry:{type:ee,coordinates:Y},properties:this.properties};return"id"in this&&(Te.id=this.id),Te};var h2=A_,D_=I_;function I_(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(d2,this,i),this.length=this._features.length}function d2(s,i,o){s===15?i.version=o.readVarint():s===1?i.name=o.readString():s===5?i.extent=o.readVarint():s===2?i._features.push(o.pos):s===3?i._keys.push(o.readString()):s===4&&i._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var w=h.readVarint()>>3;p=w===1?h.readString():w===2?h.readFloat():w===3?h.readDouble():w===4?h.readVarint64():w===5?h.readVarint():w===6?h.readSVarint():w===7?h.readBoolean():null}return p}(o))}I_.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new h2(this._pbf,i,this.extent,this._keys,this._values)};var x0=D_;function u2(s,i,o){if(s===3){var h=new x0(o,o.readVarint()+o.pos);h.length&&(i[h.name]=h)}}var yg=v0.VectorTile=function(s,i){this.layers=s.readFields(u2,{},i)},b0=v0.VectorTileFeature=A_;function w0(s,i,o,h){const p=[],v=h===0?(w,R,Y,ee,de,_e)=>{w.push(new U(_e,Y+(_e-R)/(ee-R)*(de-Y)))}:(w,R,Y,ee,de,_e)=>{w.push(new U(R+(_e-Y)/(de-Y)*(ee-R),_e))};for(const w of s){const R=[];for(const Y of w){if(Y.length<=2)continue;const ee=[];for(let Te=0;Te<Y.length-1;Te++){const Ae=Y[Te].x,Ie=Y[Te].y,Fe=Y[Te+1].x,Xe=Y[Te+1].y,dt=h===0?Ae:Ie,yt=h===0?Fe:Xe;dt<i?yt>i&&v(ee,Ae,Ie,Fe,Xe,i):dt>o?yt<o&&v(ee,Ae,Ie,Fe,Xe,o):ee.push(Y[Te]),yt<i&&dt>=i&&v(ee,Ae,Ie,Fe,Xe,i),yt>o&&dt<=o&&v(ee,Ae,Ie,Fe,Xe,o)}let de=Y[Y.length-1];const _e=h===0?de.x:de.y;_e>=i&&_e<=o&&ee.push(de),ee.length&&(de=ee[ee.length-1],ee[0].x===de.x&&ee[0].y===de.y||ee.push(ee[0]),R.push(ee))}R.length&&p.push(R)}return p}v0.VectorTileLayer=D_;const p2=b0.types,f2=Math.pow(2,13);function Vp(s,i,o,h,p,v,w,R){s.emplaceBack((i<<1)+w,(o<<1)+v,(Math.floor(h*f2)<<1)+p,Math.round(R))}function $p(s,i,o){s.emplaceBack(i.x,i.y,i.z,o[0]*16384,o[1]*16384,o[2]*16384)}class L_{constructor(){this.acc=new U(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new U(i.x,i.y),this.max=new U(i.x,i.y))}append(i,o){this.currentPolyCount.edges++,this.acc._add(i);const h=this.min,p=this.max;i.x<h.x?h.x=i.x:i.x>p.x&&(p.x=i.x),i.y<h.y?h.y=i.y:i.y>p.y&&(p.y=i.y),((i.x===0||i.x===cn)&&i.x===o.x)!=((i.y===0||i.y===cn)&&i.y===o.y)&&this.processBorderOverlap(i,o),o.x<0!=i.x<0&&this.addBorderIntersection(0,Pn(o.y,i.y,(0-o.x)/(i.x-o.x))),o.x>cn!=i.x>cn&&this.addBorderIntersection(1,Pn(o.y,i.y,(cn-o.x)/(i.x-o.x))),o.y<0!=i.y<0&&this.addBorderIntersection(2,Pn(o.x,i.x,(0-o.y)/(i.y-o.y))),o.y>cn!=i.y>cn&&this.addBorderIntersection(3,Pn(o.x,i.x,(cn-o.y)/(i.y-o.y)))}addBorderIntersection(i,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[i];o<h[0]&&(h[0]=o),o>h[1]&&(h[1]=o)}processBorderOverlap(i,o){if(i.x===o.x){if(i.y===o.y)return;const h=i.x===0?0:1;this.addBorderIntersection(h,o.y),this.addBorderIntersection(h,i.y)}else{const h=i.y===0?2:3;this.addBorderIntersection(h,o.x),this.addBorderIntersection(h,i.x)}}centroid(){const i=this.polyCount.reduce((o,h)=>o+h.edges,0);return i!==0?this.acc.div(i)._round():new U(0,0)}span(){return new U(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,o)=>i+ +(o[0]!==Number.MAX_VALUE),0)}}class Hp{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new br,this.centroidVertexArray=new r0,this.indexArray=new ao,this.programConfigurations=new Mc(i.layers,i.zoom),this.segments=new Cs,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=i.enableTerrain}populate(i,o,h,p){this.features=[],this.hasPattern=gg("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(v){const w=Math.exp(Math.PI*(1-v.y/(1<<v.z)*2));return 80150034*w/(w*w+1)/cn/(1<<v.z)}(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:v,id:w,index:R,sourceLayerIndex:Y}of i){const ee=this.layers[0]._featureFilter.needGeometry,de=Ac(v,ee);if(!this.layers[0]._featureFilter.filter(new Dt(this.zoom),de,h))continue;const _e={id:w,sourceLayerIndex:Y,index:R,geometry:ee?de.geometry:ql(v,h,p),properties:v.properties,type:v.type,patterns:{}},Te=this.layoutVertexArray.length;this.hasPattern?this.features.push(_g("fill-extrusion",this.layers,_e,this.zoom,o)):this.addFeature(_e,_e.geometry,R,h,{},o.availableImages,p),o.featureIndex.insert(v,_e.geometry,R,Y,this.index,Te)}this.sortBorders()}addFeatures(i,o,h,p,v){for(const w of this.features){const{geometry:R}=w;this.addFeature(w,R,w.index,o,h,p,v)}this.sortBorders()}update(i,o,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,l2),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,a2.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,o2.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,o,h,p,v,w,R){const Y=[new U(0,0),new U(cn,cn)],ee=R.projection,de=ee.name==="globe",_e=this.enableTerrain&&!de?new L_:null,Te=p2[i.type]==="Polygon";de&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Fr);const Ae=mg(o,500);for(let dt=Ae.length-1;dt>=0;dt--){const yt=Ae[dt];(yt.length===0||(Ie=yt[0]).every(ct=>ct.x<=0)||Ie.every(ct=>ct.x>=cn)||Ie.every(ct=>ct.y<=0)||Ie.every(ct=>ct.y>=cn))&&Ae.splice(dt,1)}var Ie;let Fe;if(de)Fe=wg(Ae,Y,p);else{Fe=[];for(const dt of Ae)Fe.push({polygon:dt,bounds:Y})}const Xe=Te?this.edgeRadius:0;for(const{polygon:dt,bounds:yt}of Fe){let ct=0,ft=0;for(const bt of dt)Te&&!bt[0].equals(bt[bt.length-1])&&bt.push(bt[0]),ft+=Te?bt.length-1:bt.length;const St=this.segments.prepareSegment((Te?5:4)*ft,this.layoutVertexArray,this.indexArray);if(Te){const bt=[],Ht=[];ct=St.vertexLength;for(const oi of dt){let Ei,Zt;oi.length&&oi!==dt[0]&&Ht.push(bt.length/2),Ei=oi[1].sub(oi[0])._perp()._unit();for(let ai=1;ai<oi.length;ai++){const ui=oi[ai],gi=oi[ai===oi.length-1?1:ai+1];let{x:Ci,y:Jt}=ui;if(Xe){Zt=gi.sub(ui)._perp()._unit();const Di=Ei.add(Zt)._unit(),un=Xe*Math.min(4,1/(Ei.x*Di.x+Ei.y*Di.y));Ci+=un*Di.x,Jt+=un*Di.y,Ei=Zt}Vp(this.layoutVertexArray,Ci,Jt,0,0,1,1,0),St.vertexLength++,bt.push(ui.x,ui.y),de&&$p(this.layoutVertexExtArray,ee.projectTilePoint(Ci,Jt,p),ee.upVector(p,Ci,Jt))}}const $t=Fp.exports(bt,Ht);for(let oi=0;oi<$t.length;oi+=3)this.indexArray.emplaceBack(ct+$t[oi],ct+$t[oi+2],ct+$t[oi+1]),St.primitiveLength++}for(const bt of dt){_e&&bt.length&&_e.startRing(bt[0]);let Ht,$t,oi,Ei=bt.length>4&&xg(bt[bt.length-2],bt[0],bt[1]),Zt=Xe?T0(bt[bt.length-2],bt[0],bt[1],Xe):0;$t=bt[1].sub(bt[0])._perp()._unit();let ai=!0;for(let ui=1,gi=0;ui<bt.length;ui++){let Ci=bt[ui-1],Jt=bt[ui];const Di=bt[ui===bt.length-1?1:ui+1];if(_e&&Te&&_e.currentPolyCount.top++,vg(Jt,Ci,yt)){Xe&&($t=Di.sub(Jt)._perp()._unit(),ai=!ai);continue}_e&&_e.append(Jt,Ci);const un=Jt.sub(Ci)._perp(),Ui=un.x/(Math.abs(un.x)+Math.abs(un.y)),Ki=un.y>0?1:0,Ii=Ci.dist(Jt);if(gi+Ii>32768&&(gi=0),Xe){oi=Di.sub(Jt)._perp()._unit();let Gn=R_(Ci,Jt,Di,O_($t,oi),Xe);isNaN(Gn)&&(Gn=0);const xn=Jt.sub(Ci)._unit();Ci=Ci.add(xn.mult(Zt))._round(),Jt=Jt.add(xn.mult(-Gn))._round(),Zt=Gn,$t=oi}const gn=St.vertexLength,qn=bt.length>4&&xg(Ci,Jt,Di);let Hn=S0(gi,Ei,ai);if(Vp(this.layoutVertexArray,Ci.x,Ci.y,Ui,Ki,0,0,Hn),Vp(this.layoutVertexArray,Ci.x,Ci.y,Ui,Ki,0,1,Hn),gi+=Ii,Hn=S0(gi,qn,!ai),Ei=qn,Vp(this.layoutVertexArray,Jt.x,Jt.y,Ui,Ki,0,0,Hn),Vp(this.layoutVertexArray,Jt.x,Jt.y,Ui,Ki,0,1,Hn),St.vertexLength+=4,this.indexArray.emplaceBack(gn+0,gn+1,gn+2),this.indexArray.emplaceBack(gn+1,gn+3,gn+2),St.primitiveLength+=2,Xe){const Gn=ct+(ui===1?bt.length-2:ui-2),xn=ui===1?ct:Gn+1;if(this.indexArray.emplaceBack(gn+1,Gn,gn+3),this.indexArray.emplaceBack(Gn,xn,gn+3),St.primitiveLength+=2,Ht===void 0&&(Ht=gn),!vg(Di,bt[ui],yt)){const Lr=ui===bt.length-1?Ht:St.vertexLength;this.indexArray.emplaceBack(gn+2,gn+3,Lr),this.indexArray.emplaceBack(gn+3,Lr+1,Lr),this.indexArray.emplaceBack(gn+3,xn,Lr+1),St.primitiveLength+=3}ai=!ai}if(de){const Gn=this.layoutVertexExtArray,xn=ee.projectTilePoint(Ci.x,Ci.y,p),Lr=ee.projectTilePoint(Jt.x,Jt.y,p),kn=ee.upVector(p,Ci.x,Ci.y),Zn=ee.upVector(p,Jt.x,Jt.y);$p(Gn,xn,kn),$p(Gn,xn,kn),$p(Gn,Lr,Zn),$p(Gn,Lr,Zn)}}Te&&(ct+=bt.length-1)}}if(_e&&_e.polyCount.length>0){if(_e.borders){_e.vertexArrayOffset=this.centroidVertexArray.length;const dt=_e.borders,yt=this.featuresOnBorder.push(_e)-1;for(let ct=0;ct<4;ct++)dt[ct][0]!==Number.MAX_VALUE&&this.borders[ct].push(yt)}this.encodeCentroid(_e.borders?void 0:_e.centroid(),_e)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,v,w,p)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((o,h)=>this.featuresOnBorder[o].borders[i][0]-this.featuresOnBorder[h].borders[i][0])}encodeCentroid(i,o,h=!0){let p,v;if(i)if(i.y!==0){const R=o.span()._mult(this.tileToMeter);p=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(R.x/10)),v=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(R.y/10))}else p=Math.ceil(7*(i.x+450)),v=0;else p=0,v=+h;let w=h?this.centroidVertexArray.length:o.vertexArrayOffset;for(const R of o.polyCount){h&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*R.edges+R.top);for(let Y=0;Y<R.top;Y++)this.centroidVertexArray.emplace(w++,p,v);for(let Y=0;Y<2*R.edges;Y++)this.centroidVertexArray.emplace(w++,0,v),this.centroidVertexArray.emplace(w++,p,v)}}}function O_(s,i){const o=s.add(i)._unit();return s.x*o.x+s.y*o.y}function T0(s,i,o,h){const p=i.sub(s)._perp()._unit(),v=o.sub(i)._perp()._unit();return R_(s,i,o,O_(p,v),h)}function R_(s,i,o,h,p){const v=Math.sqrt(1-h*h);return Math.min(s.dist(i)/3,i.dist(o)/3,p*v/h)}function vg(s,i,o){return s.x<o[0].x&&i.x<o[0].x||s.x>o[1].x&&i.x>o[1].x||s.y<o[0].y&&i.y<o[0].y||s.y>o[1].y&&i.y>o[1].y}function xg(s,i,o){if(s.x<0||s.x>=cn||i.x<0||i.x>=cn||o.x<0||o.x>=cn)return!1;const h=o.sub(i),p=h.perp(),v=s.sub(i);return(h.x*v.x+h.y*v.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(v.x*v.x+v.y*v.y))>-.866&&p.x*v.x+p.y*v.y<0}function S0(s,i,o){const h=i?2|s:-3&s;return o?1|h:-2&h}function bg(){const s=Math.PI/32,i=Math.tan(s),o=bd;return o*Math.sqrt(1+2*i*i)-o}function wg(s,i,o){const h=1<<o.z,p=la(o.x/h),v=la((o.x+1)/h),w=_o(o.y/h),R=_o((o.y+1)/h);return function(Y,ee,de,_e,Te=0,Ae){const Ie=[];if(!Y.length||!de||!_e)return Ie;const Fe=(bt,Ht)=>{for(const $t of bt)Ie.push({polygon:$t,bounds:Ht})},Xe=Math.ceil(Math.log2(de)),dt=Math.ceil(Math.log2(_e)),yt=Xe-dt,ct=[];for(let bt=0;bt<Math.abs(yt);bt++)ct.push(yt>0?0:1);for(let bt=0;bt<Math.min(Xe,dt);bt++)ct.push(0),ct.push(1);let ft=Y;if(ft=w0(ft,ee[0].y-Te,ee[1].y+Te,1),ft=w0(ft,ee[0].x-Te,ee[1].x+Te,0),!ft.length)return Ie;const St=[];for(ct.length?St.push({polygons:ft,bounds:ee,depth:0}):Fe(ft,ee);St.length;){const bt=St.pop(),Ht=bt.depth,$t=ct[Ht],oi=bt.bounds[0],Ei=bt.bounds[1],Zt=$t===0?oi.x:oi.y,ai=$t===0?Ei.x:Ei.y,ui=Ae?Ae($t,Zt,ai):.5*(Zt+ai),gi=w0(bt.polygons,Zt-Te,ui+Te,$t),Ci=w0(bt.polygons,ui-Te,ai+Te,$t);if(gi.length){const Jt=[oi,new U($t===0?ui:Ei.x,$t===1?ui:Ei.y)];ct.length>Ht+1?St.push({polygons:gi,bounds:Jt,depth:Ht+1}):Fe(gi,Jt)}if(Ci.length){const Jt=[new U($t===0?ui:oi.x,$t===1?ui:oi.y),Ei];ct.length>Ht+1?St.push({polygons:Ci,bounds:Jt,depth:Ht+1}):Fe(Ci,Jt)}}return Ie}(s,i,Math.ceil((v-p)/11.25),Math.ceil((w-R)/11.25),1,(Y,ee,de)=>{if(Y===0)return .5*(ee+de);{const _e=_o((o.y+ee/cn)/h);return(Ya(.5*(_o((o.y+de/cn)/h)+_e))*h-o.y)*cn}})}Bi(Hp,"FillExtrusionBucket",{omit:["layers","features"]}),Bi(L_,"PartMetadata");const B_=new nn({"fill-extrusion-edge-radius":new Rt(ni["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var z_={paint:new nn({"fill-extrusion-opacity":new Rt(ni["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yt(ni["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Rt(ni["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Rt(ni["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yt(ni["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yt(ni["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yt(ni["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Rt(ni["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Rt(ni["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Rt(ni["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:B_};function N_(s,i,o){var h=2*Math.PI*6378137/256/Math.pow(2,o);return[s*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class E0{constructor(i,o,h){this.z=i,this.x=o,this.y=h,this.key=Gh(0,i,i,o,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,o){const h=function(v,w,R){var Y=N_(256*v,256*(w=Math.pow(2,R)-w-1),R),ee=N_(256*(v+1),256*(w+1),R);return Y[0]+","+Y[1]+","+ee[0]+","+ee[1]}(this.x,this.y,this.z),p=function(v,w,R){let Y,ee="";for(let de=v;de>0;de--)Y=1<<de-1,ee+=(w&Y?1:0)+(R&Y?2:0);return ee}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class F_{constructor(i,o){this.wrap=i,this.canonical=o,this.key=Gh(i,o.z,o.z,o.x,o.y)}}class lo{constructor(i,o,h,p,v){this.overscaledZ=i,this.wrap=o,this.canonical=new E0(h,+p,+v),this.key=o===0&&i===h?this.canonical.key:Gh(o,i,h,p,v)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const o=this.canonical.z-i;return i>this.canonical.z?new lo(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lo(i,this.wrap,i,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(i,o=!0){if(this.overscaledZ===i&&o)return this.key;if(i>this.canonical.z)return Gh(this.wrap*+o,i,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-i;return Gh(this.wrap*+o,i,i,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const o=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>o&&i.canonical.y===this.canonical.y>>o}children(i){if(this.overscaledZ>=i)return[new lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new lo(o,this.wrap,o,h,p),new lo(o,this.wrap,o,h+1,p),new lo(o,this.wrap,o,h,p+1),new lo(o,this.wrap,o,h+1,p+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new lo(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new F_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Gh(s,i,o,h,p){const v=1<<Math.min(o,22);let w=v*(p%v)+h%v;return s&&o<22&&(w+=v*v*((s<0?-2*s-1:2*s)%(1<<2*(22-o)))),16*(32*w+o)+(i-o)}Bi(E0,"CanonicalTileID"),Bi(lo,"OverscaledTileID",{omit:["projMatrix"]});class Pu extends U{constructor(i,o,h){super(i,o),this.z=h}}function Wp(s,i){return s.x*i.x+s.y*i.y}function C0(s,i){if(s.length===1){let o=0;const h=i[o++];let p;for(;!p||h.equals(p);)if(p=i[o++],!p)return 1/0;for(;o<i.length;o++){const v=i[o],w=s[0],R=p.sub(h),Y=v.sub(h),ee=w.sub(h),de=Wp(R,R),_e=Wp(R,Y),Te=Wp(Y,Y),Ae=Wp(ee,R),Ie=Wp(ee,Y),Fe=de*Te-_e*_e,Xe=(Te*Ae-_e*Ie)/Fe,dt=(de*Ie-_e*Ae)/Fe,yt=h.z*(1-Xe-dt)+p.z*Xe+v.z*dt;if(isFinite(yt))return yt}return 1/0}{let o=1/0;for(const h of i)o=Math.min(o,h.z);return o}}function Tg(s,i,o,h,p,v,w,R){const Y=w*p.getElevationAt(s,i,!0,!0),ee=v[0]!==0,de=ee?v[1]===0?w*(v[0]/7-450):w*function(_e,Te,Ae){const Ie=Math.floor(Te[0]/8),Fe=Math.floor(Te[1]/8),Xe=10*(Te[0]-8*Ie),dt=10*(Te[1]-8*Fe),yt=_e.getElevationAt(Ie,Fe,!0,!0),ct=_e.getMeterToDEM(Ae),ft=Math.floor(.5*(Xe*ct-1)),St=Math.floor(.5*(dt*ct-1)),bt=_e.tileCoordToPixel(Ie,Fe),Ht=2*ft+1,$t=2*St+1,oi=function(Ci,Jt,Di,un,Ui){return[Ci.getElevationAtPixel(Jt,Di,!0),Ci.getElevationAtPixel(Jt+Ui,Di,!0),Ci.getElevationAtPixel(Jt,Di+Ui,!0),Ci.getElevationAtPixel(Jt+un,Di+Ui,!0)]}(_e,bt.x-ft,bt.y-St,Ht,$t),Ei=Math.abs(oi[0]-oi[1]),Zt=Math.abs(oi[2]-oi[3]),ai=Math.abs(oi[0]-oi[2])+Math.abs(oi[1]-oi[3]),ui=Math.min(.25,.5*ct*(Ei+Zt)/Ht),gi=Math.min(.25,.5*ct*ai/$t);return yt+Math.max(ui*Xe,gi*dt)}(p,v,R):Y;return{base:Y+(o===0)?-1:o,top:ee?Math.max(de+h,Y+o+2):Y+h}}const m2=Vi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:g2}=m2,_2=Vi([{name:"a_packed",components:4,type:"Float32"}]),{members:y2}=_2,v2=b0.types,x2=Math.cos(Math.PI/180*37.5);class M0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Wo,this.layoutVertexArray2=new Mo,this.indexArray=new ao,this.programConfigurations=new Mc(i.layers,i.zoom),this.segments=new Cs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h,p){this.hasPattern=gg("line",this.layers,o);const v=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:de,id:_e,index:Te,sourceLayerIndex:Ae}of i){const Ie=this.layers[0]._featureFilter.needGeometry,Fe=Ac(de,Ie);if(!this.layers[0]._featureFilter.filter(new Dt(this.zoom),Fe,h))continue;const Xe=v?v.evaluate(Fe,{},h):void 0,dt={id:_e,properties:de.properties,type:de.type,sourceLayerIndex:Ae,index:Te,geometry:Ie?Fe.geometry:ql(de,h,p),patterns:{},sortKey:Xe};w.push(dt)}v&&w.sort((de,_e)=>de.sortKey-_e.sortKey);const{lineAtlas:R,featureIndex:Y}=o,ee=this.addConstantDashes(R);for(const de of w){const{geometry:_e,index:Te,sourceLayerIndex:Ae}=de;if(ee&&this.addFeatureDashes(de,R),this.hasPattern){const Ie=_g("line",this.layers,de,this.zoom,o);this.patternFeatures.push(Ie)}else this.addFeature(de,_e,Te,h,R.positions,o.availableImages);Y.insert(i[Te].feature,_e,Te,Ae,this.index)}}addConstantDashes(i){let o=!1;for(const h of this.layers){const p=h.paint.get("line-dasharray").value,v=h.layout.get("line-cap").value;if(p.kind!=="constant"||v.kind!=="constant")o=!0;else{const w=v.value,R=p.value;if(!R)continue;i.addDash(R,w)}}return o}addFeatureDashes(i,o){const h=this.zoom;for(const p of this.layers){const v=p.paint.get("line-dasharray").value,w=p.layout.get("line-cap").value;if(v.kind==="constant"&&w.kind==="constant")continue;let R,Y;if(v.kind==="constant"){if(R=v.value,!R)continue}else R=v.evaluate({zoom:h},i);Y=w.kind==="constant"?w.value:w.evaluate({zoom:h},i),o.addDash(R,Y),i.patterns[p.id]=o.getKey(R,Y)}}update(i,o,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,h,p)}addFeatures(i,o,h,p,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,o,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,y2)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,g2),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,o,h,p,v,w){const R=this.layers[0].layout,Y=R.get("line-join").evaluate(i,{}),ee=R.get("line-cap").evaluate(i,{}),de=R.get("line-miter-limit"),_e=R.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const Te of o)this.addLine(Te,i,Y,ee,de,_e);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,v,w,p)}addLine(i,o,h,p,v,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let dt=0;dt<i.length-1;dt++)this.totalDistance+=i[dt].dist(i[dt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=v2[o.type]==="Polygon";let Y=i.length;for(;Y>=2&&i[Y-1].equals(i[Y-2]);)Y--;let ee=0;for(;ee<Y-1&&i[ee].equals(i[ee+1]);)ee++;if(Y<(R?3:2))return;h==="bevel"&&(v=1.05);const de=this.overscaling<=16?122880/(512*this.overscaling):0,_e=this.segments.prepareSegment(10*Y,this.layoutVertexArray,this.indexArray);let Te,Ae,Ie,Fe,Xe;this.e1=this.e2=-1,R&&(Te=i[Y-2],Xe=i[ee].sub(Te)._unit()._perp());for(let dt=ee;dt<Y;dt++){if(Ie=dt===Y-1?R?i[ee+1]:void 0:i[dt+1],Ie&&i[dt].equals(Ie))continue;Xe&&(Fe=Xe),Te&&(Ae=Te),Te=i[dt],Xe=Ie?Ie.sub(Te)._unit()._perp():Fe,Fe=Fe||Xe;let yt=Fe.add(Xe);yt.x===0&&yt.y===0||yt._unit();const ct=Fe.x*Xe.x+Fe.y*Xe.y,ft=yt.x*Xe.x+yt.y*Xe.y,St=ft!==0?1/ft:1/0,bt=2*Math.sqrt(2-2*ft),Ht=ft<x2&&Ae&&Ie,$t=Fe.x*Xe.y-Fe.y*Xe.x>0;if(Ht&&dt>ee){const Zt=Te.dist(Ae);if(Zt>2*de){const ai=Te.sub(Te.sub(Ae)._mult(de/Zt)._round());this.updateDistance(Ae,ai),this.addCurrentVertex(ai,Fe,0,0,_e),Ae=ai}}const oi=Ae&&Ie;let Ei=oi?h:R?"butt":p;if(oi&&Ei==="round"&&(St<w?Ei="miter":St<=2&&(Ei="fakeround")),Ei==="miter"&&St>v&&(Ei="bevel"),Ei==="bevel"&&(St>2&&(Ei="flipbevel"),St<v&&(Ei="miter")),Ae&&this.updateDistance(Ae,Te),Ei==="miter")yt._mult(St),this.addCurrentVertex(Te,yt,0,0,_e);else if(Ei==="flipbevel"){if(St>100)yt=Xe.mult(-1);else{const Zt=St*Fe.add(Xe).mag()/Fe.sub(Xe).mag();yt._perp()._mult(Zt*($t?-1:1))}this.addCurrentVertex(Te,yt,0,0,_e),this.addCurrentVertex(Te,yt.mult(-1),0,0,_e)}else if(Ei==="bevel"||Ei==="fakeround"){const Zt=-Math.sqrt(St*St-1),ai=$t?Zt:0,ui=$t?0:Zt;if(Ae&&this.addCurrentVertex(Te,Fe,ai,ui,_e),Ei==="fakeround"){const gi=Math.round(180*bt/Math.PI/20);for(let Ci=1;Ci<gi;Ci++){let Jt=Ci/gi;if(Jt!==.5){const un=Jt-.5;Jt+=Jt*un*(Jt-1)*((1.0904+ct*(ct*(3.55645-1.43519*ct)-3.2452))*un*un+(.848013+ct*(.215638*ct-1.06021)))}const Di=Xe.sub(Fe)._mult(Jt)._add(Fe)._unit()._mult($t?-1:1);this.addHalfVertex(Te,Di.x,Di.y,!1,$t,0,_e)}}Ie&&this.addCurrentVertex(Te,Xe,-ai,-ui,_e)}else if(Ei==="butt")this.addCurrentVertex(Te,yt,0,0,_e);else if(Ei==="square"){const Zt=Ae?1:-1;Ae||this.addCurrentVertex(Te,yt,Zt,Zt,_e),this.addCurrentVertex(Te,yt,0,0,_e),Ae&&this.addCurrentVertex(Te,yt,Zt,Zt,_e)}else Ei==="round"&&(Ae&&(this.addCurrentVertex(Te,Fe,0,0,_e),this.addCurrentVertex(Te,Fe,1,1,_e,!0)),Ie&&(this.addCurrentVertex(Te,Xe,-1,-1,_e,!0),this.addCurrentVertex(Te,Xe,0,0,_e)));if(Ht&&dt<Y-1){const Zt=Te.dist(Ie);if(Zt>2*de){const ai=Te.add(Ie.sub(Te)._mult(de/Zt)._round());this.updateDistance(Te,ai),this.addCurrentVertex(ai,Xe,0,0,_e),Te=ai}}}}addCurrentVertex(i,o,h,p,v,w=!1){const R=o.y*p-o.x,Y=-o.y-o.x*p;this.addHalfVertex(i,o.x+o.y*h,o.y-o.x*h,w,!1,h,v),this.addHalfVertex(i,R,Y,w,!0,-p,v)}addHalfVertex({x:i,y:o},h,p,v,w,R,Y){this.layoutVertexArray.emplaceBack((i<<1)+(v?1:0),(o<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(R===0?0:R<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const ee=Y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ee),Y.primitiveLength++),w?this.e2=ee:this.e1=ee}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,o){this.distance+=i.dist(o),this.updateScaledDistance()}}Bi(M0,"LineBucket",{omit:["layers","patternFeatures"]});const b2=new nn({"line-cap":new Yt(ni.layout_line["line-cap"]),"line-join":new Yt(ni.layout_line["line-join"]),"line-miter-limit":new Rt(ni.layout_line["line-miter-limit"]),"line-round-limit":new Rt(ni.layout_line["line-round-limit"]),"line-sort-key":new Yt(ni.layout_line["line-sort-key"])});var j_={paint:new nn({"line-opacity":new Yt(ni.paint_line["line-opacity"]),"line-color":new Yt(ni.paint_line["line-color"]),"line-translate":new Rt(ni.paint_line["line-translate"]),"line-translate-anchor":new Rt(ni.paint_line["line-translate-anchor"]),"line-width":new Yt(ni.paint_line["line-width"]),"line-gap-width":new Yt(ni.paint_line["line-gap-width"]),"line-offset":new Yt(ni.paint_line["line-offset"]),"line-blur":new Yt(ni.paint_line["line-blur"]),"line-dasharray":new Yt(ni.paint_line["line-dasharray"]),"line-pattern":new Yt(ni.paint_line["line-pattern"]),"line-gradient":new Hi(ni.paint_line["line-gradient"]),"line-trim-offset":new Rt(ni.paint_line["line-trim-offset"])}),layout:b2};const U_=new class extends Yt{possiblyEvaluate(s,i){return i=new Dt(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(s,i)}evaluate(s,i,o,h){return i=q({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(s,i,o,h)}}(j_.paint.properties["line-width"].specification);function G_(s,i){return i>0?i+2*s:s}U_.useIntegerZoom=!0;const w2=Vi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Jl=Vi([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),T2=Vi([{name:"a_projected_pos",components:4,type:"Float32"}],4);Vi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const S2=Vi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Pd=Vi([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Vi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Un=Vi([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),E2=Vi([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Vi([{name:"triangle",components:3,type:"Uint16"}]),Vi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Vi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Vi([{type:"Float32",name:"offsetX"}]),Vi([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ur=24;const Wr=128;function Sg(s,i){const{expression:o}=i;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Dt(s+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=o;let v=0;for(;v<h.length&&h[v]<=s;)v++;v=Math.max(0,v-1);let w=v;for(;w<h.length&&h[w]<s+1;)w++;w=Math.min(h.length-1,w);const R=h[v],Y=h[w];return o.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:Y,interpolationType:p}:{kind:"camera",minZoom:R,maxZoom:Y,minSize:o.evaluate(new Dt(R)),maxSize:o.evaluate(new Dt(Y)),interpolationType:p}}}function Ql(s,{uSize:i,uSizeT:o},{lowerSize:h,upperSize:p}){return s.kind==="source"?h/Wr:s.kind==="composite"?Pn(h/Wr,p/Wr,o):i}function Du(s,i){let o=0,h=0;if(s.kind==="constant")h=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:w}=s,R=p?y(va.interpolationFactor(p,i,v,w),0,1):0;s.kind==="camera"?h=Pn(s.minSize,s.maxSize,R):o=R}return{uSizeT:o,uSize:h}}var C2=Object.freeze({__proto__:null,getSizeData:Sg,evaluateSizeForFeature:Ql,evaluateSizeForZoom:Du,SIZE_PACK_FACTOR:Wr});function M2(s,i,o){return s.sections.forEach(h=>{h.text=function(p,v,w){const R=v.layout.get("text-transform").evaluate(w,{});return R==="uppercase"?p=p.toLocaleUpperCase():R==="lowercase"&&(p=p.toLocaleLowerCase()),Ft.applyArabicShaping&&(p=Ft.applyArabicShaping(p)),p}(h.text,i,o)}),s}const Yp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function A2(s){return s==="︶"||s==="﹈"||s==="︸"||s==="﹄"||s==="﹂"||s==="︾"||s==="︼"||s==="︺"||s==="︘"||s==="﹀"||s==="︐"||s==="︓"||s==="︔"||s==="｀"||s==="￣"||s==="︑"||s==="︒"}function Eg(s){return s==="︵"||s==="﹇"||s==="︷"||s==="﹃"||s==="﹁"||s==="︽"||s==="︻"||s==="︹"||s==="︗"||s==="︿"}var Xp=Er,Dc=function(s,i,o,h,p){var v,w,R=8*p-h-1,Y=(1<<R)-1,ee=Y>>1,de=-7,_e=o?p-1:0,Te=o?-1:1,Ae=s[i+_e];for(_e+=Te,v=Ae&(1<<-de)-1,Ae>>=-de,de+=R;de>0;v=256*v+s[i+_e],_e+=Te,de-=8);for(w=v&(1<<-de)-1,v>>=-de,de+=h;de>0;w=256*w+s[i+_e],_e+=Te,de-=8);if(v===0)v=1-ee;else{if(v===Y)return w?NaN:1/0*(Ae?-1:1);w+=Math.pow(2,h),v-=ee}return(Ae?-1:1)*w*Math.pow(2,v-h)},Cg=function(s,i,o,h,p,v){var w,R,Y,ee=8*v-p-1,de=(1<<ee)-1,_e=de>>1,Te=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ae=h?0:v-1,Ie=h?1:-1,Fe=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(R=isNaN(i)?1:0,w=de):(w=Math.floor(Math.log(i)/Math.LN2),i*(Y=Math.pow(2,-w))<1&&(w--,Y*=2),(i+=w+_e>=1?Te/Y:Te*Math.pow(2,1-_e))*Y>=2&&(w++,Y/=2),w+_e>=de?(R=0,w=de):w+_e>=1?(R=(i*Y-1)*Math.pow(2,p),w+=_e):(R=i*Math.pow(2,_e-1)*Math.pow(2,p),w=0));p>=8;s[o+Ae]=255&R,Ae+=Ie,R/=256,p-=8);for(w=w<<p|R,ee+=p;ee>0;s[o+Ae]=255&w,Ae+=Ie,w/=256,ee-=8);s[o+Ae-Ie]|=128*Fe};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Er(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Er.Varint=0,Er.Fixed64=1,Er.Bytes=2,Er.Fixed32=5;var gs=4294967296,As=1/gs,Mg=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function oh(s){return s.type===Er.Bytes?s.readVarint()+s.pos:s.pos+1}function Iu(s,i,o){return o?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function V_(s,i,o){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));o.realloc(h);for(var p=o.pos-1;p>=s;p--)o.buf[p+h]=o.buf[p]}function k2(s,i){for(var o=0;o<s.length;o++)i.writeVarint(s[o])}function P2(s,i){for(var o=0;o<s.length;o++)i.writeSVarint(s[o])}function D2(s,i){for(var o=0;o<s.length;o++)i.writeFloat(s[o])}function $_(s,i){for(var o=0;o<s.length;o++)i.writeDouble(s[o])}function qp(s,i){for(var o=0;o<s.length;o++)i.writeBoolean(s[o])}function Ag(s,i){for(var o=0;o<s.length;o++)i.writeFixed32(s[o])}function I2(s,i){for(var o=0;o<s.length;o++)i.writeSFixed32(s[o])}function H_(s,i){for(var o=0;o<s.length;o++)i.writeFixed64(s[o])}function A0(s,i){for(var o=0;o<s.length;o++)i.writeSFixed64(s[o])}function Jo(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function ec(s,i,o){s[o]=i,s[o+1]=i>>>8,s[o+2]=i>>>16,s[o+3]=i>>>24}function W_(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}function L2(s,i,o){i.glyphs=[],s===1&&o.readMessage(O2,i)}function O2(s,i,o){if(s===3){const{id:h,bitmap:p,width:v,height:w,left:R,top:Y,advance:ee}=o.readMessage(R2,{});i.glyphs.push({id:h,bitmap:new sh({width:v+6,height:w+6},p),metrics:{width:v,height:w,left:R,top:Y,advance:ee}})}else s===4?i.ascender=o.readSVarint():s===5&&(i.descender=o.readSVarint())}function R2(s,i,o){s===1?i.id=o.readVarint():s===2?i.bitmap=o.readBytes():s===3?i.width=o.readVarint():s===4?i.height=o.readVarint():s===5?i.left=o.readSVarint():s===6?i.top=o.readSVarint():s===7&&(i.advance=o.readVarint())}function kg(s){let i=0,o=0;for(const w of s)i+=w.w*w.h,o=Math.max(o,w.w);s.sort((w,R)=>R.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),o),h:1/0}];let p=0,v=0;for(const w of s)for(let R=h.length-1;R>=0;R--){const Y=h[R];if(!(w.w>Y.w||w.h>Y.h)){if(w.x=Y.x,w.y=Y.y,v=Math.max(v,w.y+w.h),p=Math.max(p,w.x+w.w),w.w===Y.w&&w.h===Y.h){const ee=h.pop();R<h.length&&(h[R]=ee)}else w.h===Y.h?(Y.x+=w.w,Y.w-=w.w):w.w===Y.w?(Y.y+=w.h,Y.h-=w.h):(h.push({x:Y.x+w.w,y:Y.y,w:Y.w-w.w,h:w.h}),Y.y+=w.h,Y.h-=w.h);break}}return{w:p,h:v,fill:i/(p*v)||0}}Er.prototype={destroy:function(){this.buf=null},readFields:function(s,i,o){for(o=o||this.length;this.pos<o;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,s(p,i,this),this.pos===v&&this.skip(h)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=Jo(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=W_(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Jo(this.buf,this.pos)+Jo(this.buf,this.pos+4)*gs;return this.pos+=8,s},readSFixed64:function(){var s=Jo(this.buf,this.pos)+W_(this.buf,this.pos+4)*gs;return this.pos+=8,s},readFloat:function(){var s=Dc(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Dc(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,o,h=this.buf;return i=127&(o=h[this.pos++]),o<128?i:(i|=(127&(o=h[this.pos++]))<<7,o<128?i:(i|=(127&(o=h[this.pos++]))<<14,o<128?i:(i|=(127&(o=h[this.pos++]))<<21,o<128?i:function(p,v,w){var R,Y,ee=w.buf;if(R=(112&(Y=ee[w.pos++]))>>4,Y<128||(R|=(127&(Y=ee[w.pos++]))<<3,Y<128)||(R|=(127&(Y=ee[w.pos++]))<<10,Y<128)||(R|=(127&(Y=ee[w.pos++]))<<17,Y<128)||(R|=(127&(Y=ee[w.pos++]))<<24,Y<128)||(R|=(1&(Y=ee[w.pos++]))<<31,Y<128))return Iu(p,R,v);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(o=h[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&Mg?function(o,h,p){return Mg.decode(o.subarray(h,p))}(this.buf,i,s):function(o,h,p){for(var v="",w=h;w<p;){var R,Y,ee,de=o[w],_e=null,Te=de>239?4:de>223?3:de>191?2:1;if(w+Te>p)break;Te===1?de<128&&(_e=de):Te===2?(192&(R=o[w+1]))==128&&(_e=(31&de)<<6|63&R)<=127&&(_e=null):Te===3?(Y=o[w+2],(192&(R=o[w+1]))==128&&(192&Y)==128&&((_e=(15&de)<<12|(63&R)<<6|63&Y)<=2047||_e>=55296&&_e<=57343)&&(_e=null)):Te===4&&(Y=o[w+2],ee=o[w+3],(192&(R=o[w+1]))==128&&(192&Y)==128&&(192&ee)==128&&((_e=(15&de)<<18|(63&R)<<12|(63&Y)<<6|63&ee)<=65535||_e>=1114112)&&(_e=null)),_e===null?(_e=65533,Te=1):_e>65535&&(_e-=65536,v+=String.fromCharCode(_e>>>10&1023|55296),_e=56320|1023&_e),v+=String.fromCharCode(_e),w+=Te}return v}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==Er.Bytes)return s.push(this.readVarint(i));var o=oh(this);for(s=s||[];this.pos<o;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==Er.Bytes)return s.push(this.readSVarint());var i=oh(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Er.Bytes)return s.push(this.readBoolean());var i=oh(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Er.Bytes)return s.push(this.readFloat());var i=oh(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Er.Bytes)return s.push(this.readDouble());var i=oh(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Er.Bytes)return s.push(this.readFixed32());var i=oh(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Er.Bytes)return s.push(this.readSFixed32());var i=oh(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Er.Bytes)return s.push(this.readFixed64());var i=oh(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Er.Bytes)return s.push(this.readSFixed64());var i=oh(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===Er.Varint)for(;this.buf[this.pos++]>127;);else if(i===Er.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Er.Fixed32)this.pos+=4;else{if(i!==Er.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var o=new Uint8Array(i);o.set(this.buf),this.buf=o,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),ec(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),ec(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),ec(this.buf,-1&s,this.pos),ec(this.buf,Math.floor(s*As),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),ec(this.buf,-1&s,this.pos),ec(this.buf,Math.floor(s*As),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,o){var h,p;if(i>=0?(h=i%4294967296|0,p=i/4294967296|0):(p=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,p=p+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(v,w,R){R.buf[R.pos++]=127&v|128,v>>>=7,R.buf[R.pos++]=127&v|128,v>>>=7,R.buf[R.pos++]=127&v|128,v>>>=7,R.buf[R.pos++]=127&v|128,R.buf[R.pos]=127&(v>>>=7)}(h,0,o),function(v,w){var R=(7&v)<<4;w.buf[w.pos++]|=R|((v>>>=3)?128:0),v&&(w.buf[w.pos++]=127&v|((v>>>=7)?128:0),v&&(w.buf[w.pos++]=127&v|((v>>>=7)?128:0),v&&(w.buf[w.pos++]=127&v|((v>>>=7)?128:0),v&&(w.buf[w.pos++]=127&v|((v>>>=7)?128:0),v&&(w.buf[w.pos++]=127&v)))))}(p,o)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(Boolean(s))},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(h,p,v){for(var w,R,Y=0;Y<p.length;Y++){if((w=p.charCodeAt(Y))>55295&&w<57344){if(!R){w>56319||Y+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):R=w;continue}if(w<56320){h[v++]=239,h[v++]=191,h[v++]=189,R=w;continue}w=R-55296<<10|w-56320|65536,R=null}else R&&(h[v++]=239,h[v++]=191,h[v++]=189,R=null);w<128?h[v++]=w:(w<2048?h[v++]=w>>6|192:(w<65536?h[v++]=w>>12|224:(h[v++]=w>>18|240,h[v++]=w>>12&63|128),h[v++]=w>>6&63|128),h[v++]=63&w|128)}return v}(this.buf,s,this.pos);var o=this.pos-i;o>=128&&V_(i,o,this),this.pos=i-1,this.writeVarint(o),this.pos+=o},writeFloat:function(s){this.realloc(4),Cg(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),Cg(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var o=0;o<i;o++)this.buf[this.pos++]=s[o]},writeRawMessage:function(s,i){this.pos++;var o=this.pos;s(i,this);var h=this.pos-o;h>=128&&V_(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h},writeMessage:function(s,i,o){this.writeTag(s,Er.Bytes),this.writeRawMessage(i,o)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,k2,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,P2,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,qp,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,D2,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,$_,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,Ag,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,I2,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,H_,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,A0,i)},writeBytesField:function(s,i){this.writeTag(s,Er.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,Er.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,Er.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,Er.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,Er.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,Er.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,Er.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,Er.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,Er.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,Er.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,Boolean(i))}};class k0{constructor(i,{pixelRatio:o,version:h,stretchX:p,stretchY:v,content:w}){this.paddedRect=i,this.pixelRatio=o,this.stretchX=p,this.stretchY=v,this.content=w,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Ic{constructor(i,o){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(i,h,v),this.addImages(o,p,v);const{w,h:R}=kg(v),Y=new Ea({width:w||1,height:R||1});for(const ee in i){const de=i[ee],_e=h[ee].paddedRect;Ea.copy(de.data,Y,{x:0,y:0},{x:_e.x+1,y:_e.y+1},de.data)}for(const ee in o){const de=o[ee],_e=p[ee].paddedRect,Te=_e.x+1,Ae=_e.y+1,Ie=de.data.width,Fe=de.data.height;Ea.copy(de.data,Y,{x:0,y:0},{x:Te,y:Ae},de.data),Ea.copy(de.data,Y,{x:0,y:Fe-1},{x:Te,y:Ae-1},{width:Ie,height:1}),Ea.copy(de.data,Y,{x:0,y:0},{x:Te,y:Ae+Fe},{width:Ie,height:1}),Ea.copy(de.data,Y,{x:Ie-1,y:0},{x:Te-1,y:Ae},{width:1,height:Fe}),Ea.copy(de.data,Y,{x:0,y:0},{x:Te+Ie,y:Ae},{width:1,height:Fe})}this.image=Y,this.iconPositions=h,this.patternPositions=p}addImages(i,o,h){for(const p in i){const v=i[p],w={x:0,y:0,w:v.data.width+2,h:v.data.height+2};h.push(w),o[p]=new k0(w,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(i,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>i.hasImage(h)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),o),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),o)}patchUpdatedImage(i,o,h){if(!i||!o||i.version===o.version)return;i.version=o.version;const[p,v]=i.tl;h.update(o.data,void 0,{x:p,y:v})}}Bi(k0,"ImagePosition"),Bi(Ic,"ImageAtlas");const Cn={horizontal:1,vertical:2,horizontalOnly:3};class Lu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,o){const h=new Lu;return h.scale=i||1,h.fontStack=o,h}static forImage(i){const o=new Lu;return o.imageName=i,o}}class Ao{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,o){const h=new Ao;for(let p=0;p<i.sections.length;p++){const v=i.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,o)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(o,h){let p="";for(let v=0;v<o.length;v++){const w=o.charCodeAt(v+1)||null,R=o.charCodeAt(v-1)||null;p+=!h&&(w&&Ee(w)&&!Yp[o[v+1]]||R&&Ee(R)&&!Yp[o[v-1]])||!Yp[o[v]]?o[v]:Yp[o[v]]}return p}(this.text,i)}trim(){let i=0;for(let h=0;h<this.text.length&&D0[this.text.charCodeAt(h)];h++)i++;let o=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&D0[this.text.charCodeAt(h)];h--)o--;this.text=this.text.substring(i,o),this.sectionIndex=this.sectionIndex.slice(i,o)}substring(i,o){const h=new Ao;return h.text=this.text.substring(i,o),h.sectionIndex=this.sectionIndex.slice(i,o),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,o)=>Math.max(i,this.sections[o].scale),0)}addTextSection(i,o){this.text+=i.text,this.sections.push(Lu.forText(i.scale,i.fontStack||o));const h=this.sections.length-1;for(let p=0;p<i.text.length;++p)this.sectionIndex.push(h)}addImageSection(i){const o=i.image?i.image.name:"";if(o.length===0)return void le("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Lu.forImage(o)),this.sectionIndex.push(this.sections.length-1)):le("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function P0(s,i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie){const Fe=Ao.fromFeature(s,p);_e===Cn.vertical&&Fe.verticalizePunctuation(Te);let Xe=[];const dt=function(bt,Ht,$t,oi,Ei,Zt){if(!bt)return[];const ai=[],ui=function(Di,un,Ui,Ki,Ii,gn){let qn=0;for(let Hn=0;Hn<Di.length();Hn++){const Gn=Di.getSection(Hn);qn+=Y_(Di.getCharCode(Hn),Gn,Ki,Ii,un,gn)}return qn/Math.max(1,Math.ceil(qn/Ui))}(bt,Ht,$t,oi,Ei,Zt),gi=bt.text.indexOf("​")>=0;let Ci=0;for(let Di=0;Di<bt.length();Di++){const un=bt.getSection(Di),Ui=bt.getCharCode(Di);if(D0[Ui]||(Ci+=Y_(Ui,un,oi,Ei,Ht,Zt)),Di<bt.length()-1){const Ki=!((Jt=Ui)<11904||!(oa(Jt)||Zf(Jt)||u(Jt)||Qc(Jt)||e0(Jt)||Cp(Jt)||Kf(Jt)||Bh(Jt)||t0(Jt)||gu(Jt)||Qf(Jt)||B(Jt)||Va(Jt)||Ap(Jt)||Mp(Jt)||Jf(Jt)||mu(Jt)||a(Jt)||i0(Jt)||kp(Jt)));(Yr[Ui]||Ki||un.imageName)&&ai.push(X_(Di+1,Ci,ui,ai,I0(Ui,bt.getCharCode(Di+1),Ki&&gi),!1))}}var Jt;return q_(X_(bt.length(),Ci,ui,ai,0,!0))}(Fe,ee,v,i,h,Ae),{processBidirectionalText:yt,processStyledBidirectionalText:ct}=Ft;if(yt&&Fe.sections.length===1){const bt=yt(Fe.toString(),dt);for(const Ht of bt){const $t=new Ao;$t.text=Ht,$t.sections=Fe.sections;for(let oi=0;oi<Ht.length;oi++)$t.sectionIndex.push(0);Xe.push($t)}}else if(ct){const bt=ct(Fe.text,Fe.sectionIndex,dt);for(const Ht of bt){const $t=new Ao;$t.text=Ht[0],$t.sectionIndex=Ht[1],$t.sections=Fe.sections,Xe.push($t)}}else Xe=function(bt,Ht){const $t=[],oi=bt.text;let Ei=0;for(const Zt of Ht)$t.push(bt.substring(Ei,Zt)),Ei=Zt;return Ei<oi.length&&$t.push(bt.substring(Ei,oi.length)),$t}(Fe,dt);const ft=[],St={positionedLines:ft,text:Fe.toString(),top:de[1],bottom:de[1],left:de[0],right:de[0],writingMode:_e,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(bt,Ht,$t,oi,Ei,Zt,ai,ui,gi,Ci,Jt,Di){let un=0,Ui=0,Ki=0;const Ii=ui==="right"?1:ui==="left"?0:.5;let gn=!1;for(const kn of Ei){const Zn=kn.getSections();for(const Gr of Zn){if(Gr.imageName)continue;const es=Ht[Gr.fontStack];if(es&&(gn=es.ascender!==void 0&&es.descender!==void 0,!gn))break}if(!gn)break}let qn=0;for(const kn of Ei){kn.trim();const Zn=kn.getMaxScale(),Gr=(Zn-1)*Ur,es={positionedGlyphs:[],lineOffset:0};bt.positionedLines[qn]=es;const Kr=es.positionedGlyphs;let ts=0;if(!kn.length()){Ui+=Zt,++qn;continue}let rs=0,Ps=0;for(let Or=0;Or<kn.length();Or++){const eo=kn.getSection(Or),qs=kn.getSectionIndex(Or),_r=kn.getCharCode(Or);let _s=eo.scale,co=null,Vr=null,Ns=null,ha=Ur,Po=0;const Do=!(gi===Cn.horizontal||!Jt&&!Me(_r)||Jt&&(D0[_r]||(Hn=_r,Sp(Hn)||ll(Hn)||Ep(Hn)||_(Hn)||P(Hn))));if(eo.imageName){const Aa=oi[eo.imageName];if(!Aa)continue;Ns=eo.imageName,bt.iconsInText=bt.iconsInText||!0,Vr=Aa.paddedRect;const Io=Aa.displaySize;_s=_s*Ur/Di,co={width:Io[0],height:Io[1],left:1,top:-3,advance:Do?Io[1]:Io[0],localGlyph:!1},Po=gn?-co.height*_s:Zn*Ur-17-Io[1]*_s,ha=co.advance;const Bd=(Do?Io[0]:Io[1])*_s-Ur*Zn;Bd>0&&Bd>ts&&(ts=Bd)}else{const Aa=$t[eo.fontStack];if(!Aa)continue;Aa[_r]&&(Vr=Aa[_r]);const Io=Ht[eo.fontStack];if(!Io)continue;const Bd=Io.glyphs[_r];if(!Bd)continue;if(co=Bd.metrics,ha=_r!==8203?Ur:0,gn){const Y0=Io.ascender!==void 0?Math.abs(Io.ascender):0,t1=Io.descender!==void 0?Math.abs(Io.descender):0,i1=(Y0+t1)*_s;rs<i1&&(rs=i1,Ps=(Y0-t1)/2*_s),Po=-Y0*_s}else Po=(Zn-_s)*Ur-17}Do?(bt.verticalizable=!0,Kr.push({glyph:_r,imageName:Ns,x:un,y:Ui+Po,vertical:Do,scale:_s,localGlyph:co.localGlyph,fontStack:eo.fontStack,sectionIndex:qs,metrics:co,rect:Vr}),un+=ha*_s+Ci):(Kr.push({glyph:_r,imageName:Ns,x:un,y:Ui+Po,vertical:Do,scale:_s,localGlyph:co.localGlyph,fontStack:eo.fontStack,sectionIndex:qs,metrics:co,rect:Vr}),un+=co.advance*_s+Ci)}Kr.length!==0&&(Ki=Math.max(un-Ci,Ki),gn?Z_(Kr,Ii,ts,Ps,Zt*Zn/2):Z_(Kr,Ii,ts,0,Zt/2)),un=0;const ko=Zt*Zn+ts;es.lineOffset=Math.max(ts,Gr),Ui+=ko,++qn}var Hn;const Gn=Ui,{horizontalAlign:xn,verticalAlign:Lr}=Dg(ai);(function(kn,Zn,Gr,es,Kr,ts){const rs=(Zn-Gr)*Kr,Ps=-ts*es;for(const ko of kn)for(const Or of ko.positionedGlyphs)Or.x+=rs,Or.y+=Ps})(bt.positionedLines,Ii,xn,Lr,Ki,Gn),bt.top+=-Lr*Gn,bt.bottom=bt.top+Gn,bt.left+=-xn*Ki,bt.right=bt.left+Ki,bt.hasBaseline=gn}(St,i,o,h,Xe,w,R,Y,_e,ee,Te,Ie),!function(bt){for(const Ht of bt)if(Ht.positionedGlyphs.length!==0)return!1;return!0}(ft)&&St}const D0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Yr={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Y_(s,i,o,h,p,v){if(i.imageName){const w=h[i.imageName];return w?w.displaySize[0]*i.scale*Ur/v+p:0}{const w=o[i.fontStack],R=w&&w.glyphs[s];return R?R.metrics.advance*i.scale+p:0}}function Pg(s,i,o,h){const p=Math.pow(s-i,2);return h?s<i?p/2:2*p:p+Math.abs(o)*o}function I0(s,i,o){let h=0;return s===10&&(h-=1e4),o&&(h+=150),s!==40&&s!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function X_(s,i,o,h,p,v){let w=null,R=Pg(i,o,p,v);for(const Y of h){const ee=Pg(i-Y.x,o,p,v)+Y.badness;ee<=R&&(w=Y,R=ee)}return{index:s,x:i,priorBreak:w,badness:R}}function q_(s){return s?q_(s.priorBreak).concat(s.index):[]}function Dg(s){let i=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:i,verticalAlign:o}}function Z_(s,i,o,h,p){if(!(i||o||h||p))return;const v=s.length-1,w=s[v],R=(w.x+w.metrics.advance*w.scale)*i;for(let Y=0;Y<=v;Y++)s[Y].x-=R,s[Y].y+=o+h+p}function B2(s,i,o){const{horizontalAlign:h,verticalAlign:p}=Dg(o),v=i[0]-s.displaySize[0]*h,w=i[1]-s.displaySize[1]*p;return{image:s,top:w,bottom:w+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function K_(s,i,o,h,p,v){const w=s.image;let R;if(w.content){const Xe=w.content,dt=w.pixelRatio||1;R=[Xe[0]/dt,Xe[1]/dt,w.displaySize[0]-Xe[2]/dt,w.displaySize[1]-Xe[3]/dt]}const Y=i.left*v,ee=i.right*v;let de,_e,Te,Ae;o==="width"||o==="both"?(Ae=p[0]+Y-h[3],_e=p[0]+ee+h[1]):(Ae=p[0]+(Y+ee-w.displaySize[0])/2,_e=Ae+w.displaySize[0]);const Ie=i.top*v,Fe=i.bottom*v;return o==="height"||o==="both"?(de=p[1]+Ie-h[0],Te=p[1]+Fe+h[2]):(de=p[1]+(Ie+Fe-w.displaySize[1])/2,Te=de+w.displaySize[1]),{image:w,top:de,right:_e,bottom:Te,left:Ae,collisionPadding:R}}class ah extends U{constructor(i,o,h,p,v){super(i,o),this.angle=p,this.z=h,v!==void 0&&(this.segment=v)}clone(){return new ah(this.x,this.y,this.z,this.angle,this.segment)}}function J_(s,i,o,h,p){if(i.segment===void 0)return!0;let v=i,w=i.segment+1,R=0;for(;R>-o/2;){if(w--,w<0)return!1;R-=s[w].dist(v),v=s[w]}R+=s[w].dist(s[w+1]),w++;const Y=[];let ee=0;for(;R<o/2;){const de=s[w],_e=s[w+1];if(!_e)return!1;let Te=s[w-1].angleTo(de)-de.angleTo(_e);for(Te=Math.abs((Te+3*Math.PI)%(2*Math.PI)-Math.PI),Y.push({distance:R,angleDelta:Te}),ee+=Te;R-Y[0].distance>h;)ee-=Y.shift().angleDelta;if(ee>p)return!1;w++,R+=de.dist(_e)}return!0}function Q_(s){let i=0;for(let o=0;o<s.length-1;o++)i+=s[o].dist(s[o+1]);return i}function ey(s,i,o){return s?.6*i*o:0}function ty(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function z2(s,i,o,h,p,v){const w=ey(o,p,v),R=ty(o,h)*v;let Y=0;const ee=Q_(s)/2;for(let de=0;de<s.length-1;de++){const _e=s[de],Te=s[de+1],Ae=_e.dist(Te);if(Y+Ae>ee){const Ie=(ee-Y)/Ae,Fe=Pn(_e.x,Te.x,Ie),Xe=Pn(_e.y,Te.y,Ie),dt=new ah(Fe,Xe,0,Te.angleTo(_e),de);return!w||J_(s,dt,R,w,i)?dt:void 0}Y+=Ae}}function N2(s,i,o,h,p,v,w,R,Y){const ee=ey(h,v,w),de=ty(h,p),_e=de*w,Te=s[0].x===0||s[0].x===Y||s[0].y===0||s[0].y===Y;return i-_e<i/4&&(i=_e+i/4),L0(s,Te?i/2*R%i:(de/2+2*v)*w*R%i,i,ee,o,_e,Te,!1,Y)}function L0(s,i,o,h,p,v,w,R,Y){const ee=v/2,de=Q_(s);let _e=0,Te=i-o,Ae=[];for(let Ie=0;Ie<s.length-1;Ie++){const Fe=s[Ie],Xe=s[Ie+1],dt=Fe.dist(Xe),yt=Xe.angleTo(Fe);for(;Te+o<_e+dt;){Te+=o;const ct=(Te-_e)/dt,ft=Pn(Fe.x,Xe.x,ct),St=Pn(Fe.y,Xe.y,ct);if(ft>=0&&ft<Y&&St>=0&&St<Y&&Te-ee>=0&&Te+ee<=de){const bt=new ah(ft,St,0,yt,Ie);bt._round(),h&&!J_(s,bt,v,h,p)||Ae.push(bt)}}_e+=dt}return R||Ae.length||w||(Ae=L0(s,_e/2,o,h,p,v,w,!0,Y)),Ae}function iy(s,i,o,h,p){const v=[];for(let w=0;w<s.length;w++){const R=s[w];let Y;for(let ee=0;ee<R.length-1;ee++){let de=R[ee],_e=R[ee+1];de.x<i&&_e.x<i||(de.x<i?de=new U(i,de.y+(i-de.x)/(_e.x-de.x)*(_e.y-de.y))._round():_e.x<i&&(_e=new U(i,de.y+(i-de.x)/(_e.x-de.x)*(_e.y-de.y))._round()),de.y<o&&_e.y<o||(de.y<o?de=new U(de.x+(o-de.y)/(_e.y-de.y)*(_e.x-de.x),o)._round():_e.y<o&&(_e=new U(de.x+(o-de.y)/(_e.y-de.y)*(_e.x-de.x),o)._round()),de.x>=h&&_e.x>=h||(de.x>=h?de=new U(h,de.y+(h-de.x)/(_e.x-de.x)*(_e.y-de.y))._round():_e.x>=h&&(_e=new U(h,de.y+(h-de.x)/(_e.x-de.x)*(_e.y-de.y))._round()),de.y>=p&&_e.y>=p||(de.y>=p?de=new U(de.x+(p-de.y)/(_e.y-de.y)*(_e.x-de.x),p)._round():_e.y>=p&&(_e=new U(de.x+(p-de.y)/(_e.y-de.y)*(_e.x-de.x),p)._round()),Y&&de.equals(Y[Y.length-1])||(Y=[de],v.push(Y)),Y.push(_e)))))}}return v}Bi(ah,"Anchor");const Dd=1e20;function ny(s,i,o,h,p,v,w,R,Y){for(let ee=i;ee<i+h;ee++)ry(s,o*v+ee,v,p,w,R,Y);for(let ee=o;ee<o+p;ee++)ry(s,ee*v+i,1,h,w,R,Y)}function ry(s,i,o,h,p,v,w){v[0]=0,w[0]=-Dd,w[1]=Dd,p[0]=s[i];for(let R=1,Y=0,ee=0;R<h;R++){p[R]=s[i+R*o];const de=R*R;do{const _e=v[Y];ee=(p[R]-p[_e]+de-_e*_e)/(R-_e)/2}while(ee<=w[Y]&&--Y>-1);Y++,v[Y]=R,w[Y]=ee,w[Y+1]=Dd}for(let R=0,Y=0;R<h;R++){for(;w[Y+1]<R;)Y++;const ee=v[Y],de=R-ee;s[i+R*o]=p[ee]+de*de}}const Ig={none:0,ideographs:1,all:2};class ks{constructor(i,o,h){this.requestManager=i,this.localGlyphMode=o,this.localFontFamily=h,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,o){const h=[];for(const p in i)for(const v of i[p])h.push({stack:p,id:v});X(h,({stack:p,id:v},w)=>{let R=this.entries[p];R||(R=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let Y=R.glyphs[v];if(Y!==void 0)return void w(null,{stack:p,id:v,glyph:Y});if(Y=this._tinySDF(R,p,v),Y)return R.glyphs[v]=Y,void w(null,{stack:p,id:v,glyph:Y});const ee=Math.floor(v/256);if(256*ee>65535)return void w(new Error("glyphs > 65535 not supported"));if(R.ranges[ee])return void w(null,{stack:p,id:v,glyph:Y});let de=R.requests[ee];de||(de=R.requests[ee]=[],ks.loadGlyphRange(p,ee,this.url,this.requestManager,(_e,Te)=>{if(Te){R.ascender=Te.ascender,R.descender=Te.descender;for(const Ae in Te.glyphs)this._doesCharSupportLocalGlyph(+Ae)||(R.glyphs[+Ae]=Te.glyphs[+Ae]);R.ranges[ee]=!0}for(const Ae of de)Ae(_e,Te);delete R.requests[ee]})),de.push((_e,Te)=>{_e?w(_e):Te&&w(null,{stack:p,id:v,glyph:Te.glyphs[v]||null})})},(p,v)=>{if(p)o(p);else if(v){const w={};for(const{stack:R,id:Y,glyph:ee}of v)w[R]===void 0&&(w[R]={}),w[R].glyphs===void 0&&(w[R].glyphs={}),w[R].glyphs[Y]=ee&&{id:ee.id,bitmap:ee.bitmap.clone(),metrics:ee.metrics},w[R].ascender=this.entries[R].ascender,w[R].descender=this.entries[R].descender;o(null,w)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==Ig.none&&(this.localGlyphMode===Ig.all?!!this.localFontFamily:!!this.localFontFamily&&(gu(i)||Pp(i)||Va(i)||mu(i)||Bh(i)))}_tinySDF(i,o,h){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(h))return;let v=i.tinySDF;if(!v){let Fe="400";/bold/i.test(o)?Fe="900":/medium/i.test(o)?Fe="500":/light/i.test(o)&&(Fe="200"),v=i.tinySDF=new ks.TinySDF({fontFamily:p,fontWeight:Fe,fontSize:48,buffer:6,radius:16}),v.fontWeight=Fe}if(this.localGlyphs[v.fontWeight][h])return this.localGlyphs[v.fontWeight][h];const w=String.fromCharCode(h),{data:R,width:Y,height:ee,glyphWidth:de,glyphHeight:_e,glyphLeft:Te,glyphTop:Ae,glyphAdvance:Ie}=v.draw(w);return this.localGlyphs[v.fontWeight][h]={id:h,bitmap:new sh({width:Y,height:ee},R),metrics:{width:de/2,height:_e/2,left:Te/2,top:Ae/2-27,advance:Ie/2,localGlyph:!0}}}}function ca(s,i,o,h){const p=[],v=s.image,w=v.pixelRatio,R=v.paddedRect.w-2,Y=v.paddedRect.h-2,ee=s.right-s.left,de=s.bottom-s.top,_e=v.stretchX||[[0,R]],Te=v.stretchY||[[0,Y]],Ae=(Zt,ai)=>Zt+ai[1]-ai[0],Ie=_e.reduce(Ae,0),Fe=Te.reduce(Ae,0),Xe=R-Ie,dt=Y-Fe;let yt=0,ct=Ie,ft=0,St=Fe,bt=0,Ht=Xe,$t=0,oi=dt;if(v.content&&h){const Zt=v.content;yt=O0(_e,0,Zt[0]),ft=O0(Te,0,Zt[1]),ct=O0(_e,Zt[0],Zt[2]),St=O0(Te,Zt[1],Zt[3]),bt=Zt[0]-yt,$t=Zt[1]-ft,Ht=Zt[2]-Zt[0]-ct,oi=Zt[3]-Zt[1]-St}const Ei=(Zt,ai,ui,gi)=>{const Ci=R0(Zt.stretch-yt,ct,ee,s.left),Jt=Zp(Zt.fixed-bt,Ht,Zt.stretch,Ie),Di=R0(ai.stretch-ft,St,de,s.top),un=Zp(ai.fixed-$t,oi,ai.stretch,Fe),Ui=R0(ui.stretch-yt,ct,ee,s.left),Ki=Zp(ui.fixed-bt,Ht,ui.stretch,Ie),Ii=R0(gi.stretch-ft,St,de,s.top),gn=Zp(gi.fixed-$t,oi,gi.stretch,Fe),qn=new U(Ci,Di),Hn=new U(Ui,Di),Gn=new U(Ui,Ii),xn=new U(Ci,Ii),Lr=new U(Jt/w,un/w),kn=new U(Ki/w,gn/w),Zn=i*Math.PI/180;if(Zn){const Kr=Math.sin(Zn),ts=Math.cos(Zn),rs=[ts,-Kr,Kr,ts];qn._matMult(rs),Hn._matMult(rs),xn._matMult(rs),Gn._matMult(rs)}const Gr=Zt.stretch+Zt.fixed,es=ai.stretch+ai.fixed;return{tl:qn,tr:Hn,bl:xn,br:Gn,tex:{x:v.paddedRect.x+1+Gr,y:v.paddedRect.y+1+es,w:ui.stretch+ui.fixed-Gr,h:gi.stretch+gi.fixed-es},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Lr,pixelOffsetBR:kn,minFontScaleX:Ht/w/ee,minFontScaleY:oi/w/de,isSDF:o}};if(h&&(v.stretchX||v.stretchY)){const Zt=sy(_e,Xe,Ie),ai=sy(Te,dt,Fe);for(let ui=0;ui<Zt.length-1;ui++){const gi=Zt[ui],Ci=Zt[ui+1];for(let Jt=0;Jt<ai.length-1;Jt++)p.push(Ei(gi,ai[Jt],Ci,ai[Jt+1]))}}else p.push(Ei({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:Y+1}));return p}function O0(s,i,o){let h=0;for(const p of s)h+=Math.max(i,Math.min(o,p[1]))-Math.max(i,Math.min(o,p[0]));return h}function sy(s,i,o){const h=[{fixed:-1,stretch:0}];for(const[p,v]of s){const w=h[h.length-1];h.push({fixed:p-w.stretch,stretch:w.stretch}),h.push({fixed:p-w.stretch,stretch:w.stretch+(v-p)})}return h.push({fixed:i+1,stretch:o}),h}function R0(s,i,o,h){return s/i*o+h}function Zp(s,i,o,h){return s-i*o/h}function F2(s,i,o,h){const p=i+s.positionedLines[h].lineOffset;return h===0?o+p/2:o+(p+(i+s.positionedLines[h-1].lineOffset))/2}ks.loadGlyphRange=function(s,i,o,h,p){const v=256*i,w=v+255,R=h.transformRequest(h.normalizeGlyphsURL(o).replace("{fontstack}",s).replace("{range}",`${v}-${w}`),ri.Glyphs);qi(R,(Y,ee)=>{if(Y)p(Y);else if(ee){const de={},_e=function(Te){return new Xp(Te).readFields(L2,{})}(ee);for(const Te of _e.glyphs)de[Te.id]=Te;p(null,{glyphs:de,ascender:_e.ascender,descender:_e.descender})}})},ks.TinySDF=class{constructor({fontSize:s=24,buffer:i=3,radius:o=8,cutoff:h=.25,fontFamily:p="sans-serif",fontWeight:v="normal",fontStyle:w="normal"}={}){this.buffer=i,this.cutoff=h,this.radius=o;const R=this.size=s+4*i,Y=this._createCanvas(R),ee=this.ctx=Y.getContext("2d",{willReadFrequently:!0});ee.font=`${w} ${v} ${s}px ${p}`,ee.textBaseline="alphabetic",ee.textAlign="left",ee.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(s){const i=document.createElement("canvas");return i.width=i.height=s,i}draw(s){const{width:i,actualBoundingBoxAscent:o,actualBoundingBoxDescent:h,actualBoundingBoxLeft:p,actualBoundingBoxRight:v}=this.ctx.measureText(s),w=Math.ceil(o),R=Math.min(this.size-this.buffer,Math.ceil(v-p)),Y=Math.min(this.size-this.buffer,w+Math.ceil(h)),ee=R+2*this.buffer,de=Y+2*this.buffer,_e=Math.max(ee*de,0),Te=new Uint8ClampedArray(_e),Ae={data:Te,width:ee,height:de,glyphWidth:R,glyphHeight:Y,glyphTop:w,glyphLeft:0,glyphAdvance:i};if(R===0||Y===0)return Ae;const{ctx:Ie,buffer:Fe,gridInner:Xe,gridOuter:dt}=this;Ie.clearRect(Fe,Fe,R,Y),Ie.fillText(s,Fe,Fe+w);const yt=Ie.getImageData(Fe,Fe,R,Y);dt.fill(Dd,0,_e),Xe.fill(0,0,_e);for(let ct=0;ct<Y;ct++)for(let ft=0;ft<R;ft++){const St=yt.data[4*(ct*R+ft)+3]/255;if(St===0)continue;const bt=(ct+Fe)*ee+ft+Fe;if(St===1)dt[bt]=0,Xe[bt]=Dd;else{const Ht=.5-St;dt[bt]=Ht>0?Ht*Ht:0,Xe[bt]=Ht<0?Ht*Ht:0}}ny(dt,0,0,ee,de,ee,this.f,this.v,this.z),ny(Xe,Fe,Fe,R,Y,ee,this.f,this.v,this.z);for(let ct=0;ct<_e;ct++){const ft=Math.sqrt(dt[ct])-Math.sqrt(Xe[ct]);Te[ct]=Math.round(255-255*(ft/this.radius+this.cutoff))}return Ae}};class j2{constructor(i=[],o=U2){if(this.data=i,this.length=this.data.length,this.compare=o,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:o,compare:h}=this,p=o[i];for(;i>0;){const v=i-1>>1,w=o[v];if(h(p,w)>=0)break;o[i]=w,i=v}o[i]=p}_down(i){const{data:o,compare:h}=this,p=this.length>>1,v=o[i];for(;i<p;){let w=1+(i<<1),R=o[w];const Y=w+1;if(Y<this.length&&h(o[Y],R)<0&&(w=Y,R=o[Y]),h(R,v)>=0)break;o[i]=R,i=w}o[i]=v}}function U2(s,i){return s<i?-1:s>i?1:0}function oy(s,i=1,o=!1){let h=1/0,p=1/0,v=-1/0,w=-1/0;const R=s[0];for(let Ae=0;Ae<R.length;Ae++){const Ie=R[Ae];(!Ae||Ie.x<h)&&(h=Ie.x),(!Ae||Ie.y<p)&&(p=Ie.y),(!Ae||Ie.x>v)&&(v=Ie.x),(!Ae||Ie.y>w)&&(w=Ie.y)}const Y=Math.min(v-h,w-p);let ee=Y/2;const de=new j2([],G2);if(Y===0)return new U(h,p);for(let Ae=h;Ae<v;Ae+=Y)for(let Ie=p;Ie<w;Ie+=Y)de.push(new Ou(Ae+ee,Ie+ee,ee,s));let _e=function(Ae){let Ie=0,Fe=0,Xe=0;const dt=Ae[0];for(let yt=0,ct=dt.length,ft=ct-1;yt<ct;ft=yt++){const St=dt[yt],bt=dt[ft],Ht=St.x*bt.y-bt.x*St.y;Fe+=(St.x+bt.x)*Ht,Xe+=(St.y+bt.y)*Ht,Ie+=3*Ht}return new Ou(Fe/Ie,Xe/Ie,0,Ae)}(s),Te=de.length;for(;de.length;){const Ae=de.pop();(Ae.d>_e.d||!_e.d)&&(_e=Ae,o&&console.log("found best %d after %d probes",Math.round(1e4*Ae.d)/1e4,Te)),Ae.max-_e.d<=i||(ee=Ae.h/2,de.push(new Ou(Ae.p.x-ee,Ae.p.y-ee,ee,s)),de.push(new Ou(Ae.p.x+ee,Ae.p.y-ee,ee,s)),de.push(new Ou(Ae.p.x-ee,Ae.p.y+ee,ee,s)),de.push(new Ou(Ae.p.x+ee,Ae.p.y+ee,ee,s)),Te+=4)}return o&&(console.log(`num probes: ${Te}`),console.log(`best distance: ${_e.d}`)),_e.p}function G2(s,i){return i.max-s.max}function Ou(s,i,o,h){this.p=new U(s,i),this.h=o,this.d=function(p,v){let w=!1,R=1/0;for(let Y=0;Y<v.length;Y++){const ee=v[Y];for(let de=0,_e=ee.length,Te=_e-1;de<_e;Te=de++){const Ae=ee[de],Ie=ee[Te];Ae.y>p.y!=Ie.y>p.y&&p.x<(Ie.x-Ae.x)*(p.y-Ae.y)/(Ie.y-Ae.y)+Ae.x&&(w=!w),R=Math.min(R,d_(p,Ae,Ie))}}return(w?1:-1)*Math.sqrt(R)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const Lg=Number.POSITIVE_INFINITY,ay=Math.sqrt(2);function Og(s,[i,o]){let h=0,p=0;if(o===Lg){i<0&&(i=0);const v=i/ay;switch(s){case"top-right":case"top-left":p=v-7;break;case"bottom-right":case"bottom-left":p=7-v;break;case"bottom":p=7-i;break;case"top":p=i-7}switch(s){case"top-right":case"bottom-right":h=-v;break;case"top-left":case"bottom-left":h=v;break;case"left":h=i;break;case"right":h=-i}}else{switch(i=Math.abs(i),o=Math.abs(o),s){case"top-right":case"top-left":case"top":p=o-7;break;case"bottom-right":case"bottom-left":case"bottom":p=7-o}switch(s){case"top-right":case"bottom-right":case"right":h=-i;break;case"top-left":case"bottom-left":case"left":h=i}}return[h,p]}function V2(s,i,o,h,p,v,w,R,Y,ee){s.createArrays(),s.tilePixelRatio=cn/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;const de=s.layers[0].layout,_e=s.layers[0]._unevaluatedLayout._values,Te={};if(s.textSizeData.kind==="composite"){const{minZoom:Fe,maxZoom:Xe}=s.textSizeData;Te.compositeTextSizes=[_e["text-size"].possiblyEvaluate(new Dt(Fe),R),_e["text-size"].possiblyEvaluate(new Dt(Xe),R)]}if(s.iconSizeData.kind==="composite"){const{minZoom:Fe,maxZoom:Xe}=s.iconSizeData;Te.compositeIconSizes=[_e["icon-size"].possiblyEvaluate(new Dt(Fe),R),_e["icon-size"].possiblyEvaluate(new Dt(Xe),R)]}Te.layoutTextSize=_e["text-size"].possiblyEvaluate(new Dt(Y+1),R),Te.layoutIconSize=_e["icon-size"].possiblyEvaluate(new Dt(Y+1),R),Te.textMaxSize=_e["text-size"].possiblyEvaluate(new Dt(18),R);const Ae=de.get("text-rotation-alignment")==="map"&&de.get("symbol-placement")!=="point",Ie=de.get("text-size");for(const Fe of s.features){const Xe=de.get("text-font").evaluate(Fe,{},R).join(","),dt=Ie.evaluate(Fe,{},R),yt=Te.layoutTextSize.evaluate(Fe,{},R),ct=(Te.layoutIconSize.evaluate(Fe,{},R),{horizontal:{},vertical:void 0}),ft=Fe.text;let St,bt=[0,0];if(ft){const oi=ft.toString(),Ei=de.get("text-letter-spacing").evaluate(Fe,{},R)*Ur,Zt=de.get("text-line-height").evaluate(Fe,{},R)*Ur,ai=he(oi)?Ei:0,ui=de.get("text-anchor").evaluate(Fe,{},R),gi=de.get("text-variable-anchor");if(!gi){const Ui=de.get("text-radial-offset").evaluate(Fe,{},R);bt=Ui?Og(ui,[Ui*Ur,Lg]):de.get("text-offset").evaluate(Fe,{},R).map(Ki=>Ki*Ur)}let Ci=Ae?"center":de.get("text-justify").evaluate(Fe,{},R);const Jt=de.get("symbol-placement")==="point",Di=Jt?de.get("text-max-width").evaluate(Fe,{},R)*Ur:1/0,un=Ui=>{s.allowVerticalPlacement&&ne(oi)&&(ct.vertical=P0(ft,i,o,p,Xe,Di,Zt,ui,Ui,ai,bt,Cn.vertical,!0,yt,dt))};if(!Ae&&gi){const Ui=Ci==="auto"?gi.map(Ii=>Rg(Ii)):[Ci];let Ki=!1;for(let Ii=0;Ii<Ui.length;Ii++){const gn=Ui[Ii];if(!ct.horizontal[gn])if(Ki)ct.horizontal[gn]=ct.horizontal[0];else{const qn=P0(ft,i,o,p,Xe,Di,Zt,"center",gn,ai,bt,Cn.horizontal,!1,yt,dt);qn&&(ct.horizontal[gn]=qn,Ki=qn.positionedLines.length===1)}}un("left")}else{if(Ci==="auto"&&(Ci=Rg(ui)),Jt||de.get("text-writing-mode").indexOf("horizontal")>=0||!ne(oi)){const Ui=P0(ft,i,o,p,Xe,Di,Zt,ui,Ci,ai,bt,Cn.horizontal,!1,yt,dt);Ui&&(ct.horizontal[Ci]=Ui)}un(Jt?"left":Ci)}}let Ht=!1;if(Fe.icon&&Fe.icon.name){const oi=h[Fe.icon.name];oi&&(St=B2(p[Fe.icon.name],de.get("icon-offset").evaluate(Fe,{},R),de.get("icon-anchor").evaluate(Fe,{},R)),Ht=oi.sdf,s.sdfIcons===void 0?s.sdfIcons=oi.sdf:s.sdfIcons!==oi.sdf&&le("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(oi.pixelRatio!==s.pixelRatio||de.get("icon-rotate").constantOr(1)!==0)&&(s.iconsNeedLinear=!0))}const $t=ly(ct.horizontal)||ct.vertical;s.iconsInText||(s.iconsInText=!!$t&&$t.iconsInText),($t||St)&&$2(s,Fe,ct,St,h,Te,yt,0,bt,Ht,w,R,ee)}v&&s.generateCollisionDebugBuffers(Y,s.collisionBoxArray)}function Rg(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function $2(s,i,o,h,p,v,w,R,Y,ee,de,_e,Te){let Ae=v.textMaxSize.evaluate(i,{},_e);Ae===void 0&&(Ae=w);const Ie=s.layers[0].layout,Fe=Ie.get("icon-offset").evaluate(i,{},_e),Xe=ly(o.horizontal)||o.vertical,dt=Te.name==="globe",yt=w/24,ct=s.tilePixelRatio*Ae/24,ft=(ai=s.overscaling,s.zoom>18&&ai>2&&(ai>>=1),Math.max(cn/(512*ai),1)*Ie.get("symbol-spacing")),St=Ie.get("text-padding")*s.tilePixelRatio,bt=Ie.get("icon-padding")*s.tilePixelRatio,Ht=N(Ie.get("text-max-angle")),$t=Ie.get("text-rotation-alignment")==="map"&&Ie.get("symbol-placement")!=="point",oi=Ie.get("icon-rotation-alignment")==="map"&&Ie.get("symbol-placement")!=="point",Ei=Ie.get("symbol-placement"),Zt=ft/2;var ai;const ui=Ie.get("icon-text-fit");let gi;h&&ui!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(gi=K_(h,o.vertical,ui,Ie.get("icon-text-fit-padding"),Fe,yt)),Xe&&(h=K_(h,Xe,ui,Ie.get("icon-text-fit-padding"),Fe,yt)));const Ci=(Jt,Di,un)=>{if(Di.x<0||Di.x>=cn||Di.y<0||Di.y>=cn)return;let Ui=null;if(dt){const{x:Ki,y:Ii,z:gn}=Te.projectTilePoint(Di.x,Di.y,un);Ui={anchor:new ah(Ki,Ii,gn,0,void 0),up:Te.upVector(un,Di.x,Di.y)}}(function(Ki,Ii,gn,qn,Hn,Gn,xn,Lr,kn,Zn,Gr,es,Kr,ts,rs,Ps,ko,Or,eo,qs,_r,_s,co,Vr,Ns){const ha=Ki.addToLineVertexArray(Ii,qn);let Po,Do,Aa,Io,Bd,Y0,t1,i1=0,VT=0,$T=0,HT=0,gb=-1,_b=-1;const Wh={};let WT=vd.exports("");const cf=gn?gn.anchor:Ii;let yb=0,vb=0;if(kn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[yb,vb]=kn.layout.get("text-offset").evaluate(_r,{},Ns).map(gl=>gl*Ur):(yb=kn.layout.get("text-radial-offset").evaluate(_r,{},Ns)*Ur,vb=Lg),Ki.allowVerticalPlacement&&Hn.vertical){const gl=Hn.vertical;if(rs)Y0=Bg(gl),Lr&&(t1=Bg(Lr));else{const _l=kn.layout.get("text-rotate").evaluate(_r,{},Ns)+90;Aa=B0(Zn,cf,Ii,Gr,es,Kr,gl,ts,_l,Ps),Lr&&(Io=B0(Zn,cf,Ii,Gr,es,Kr,Lr,Or,_l))}}if(Gn){const gl=kn.layout.get("icon-rotate").evaluate(_r,{},Ns),_l=kn.layout.get("icon-text-fit")!=="none",n1=ca(Gn,gl,co,_l),bb=Lr?ca(Lr,gl,co,_l):void 0;Do=B0(Zn,cf,Ii,Gr,es,Kr,Gn,Or,gl),i1=4*n1.length;const YT=Ki.iconSizeData;let hf=null;YT.kind==="source"?(hf=[Wr*kn.layout.get("icon-size").evaluate(_r,{},Ns)],hf[0]>Vh&&le(`${Ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):YT.kind==="composite"&&(hf=[Wr*_s.compositeIconSizes[0].evaluate(_r,{},Ns),Wr*_s.compositeIconSizes[1].evaluate(_r,{},Ns)],(hf[0]>Vh||hf[1]>Vh)&&le(`${Ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ki.addSymbols(Ki.icon,n1,hf,qs,eo,_r,!1,gn,Ii,ha.lineStartIndex,ha.lineLength,-1,Vr,Ns),gb=Ki.icon.placedSymbolArray.length-1,bb&&(VT=4*bb.length,Ki.addSymbols(Ki.icon,bb,hf,qs,eo,_r,Cn.vertical,gn,Ii,ha.lineStartIndex,ha.lineLength,-1,Vr,Ns),_b=Ki.icon.placedSymbolArray.length-1)}for(const gl in Hn.horizontal){const _l=Hn.horizontal[gl];Po||(WT=vd.exports(_l.text),rs?Bd=Bg(_l):Po=B0(Zn,cf,Ii,Gr,es,Kr,_l,ts,kn.layout.get("text-rotate").evaluate(_r,{},Ns),Ps));const n1=_l.positionedLines.length===1;if($T+=Id(Ki,gn,Ii,_l,xn,kn,rs,_r,Ps,ha,Hn.vertical?Cn.horizontal:Cn.horizontalOnly,n1?Object.keys(Hn.horizontal):[gl],Wh,gb,_s,Vr,Ns),n1)break}Hn.vertical&&(HT+=Id(Ki,gn,Ii,Hn.vertical,xn,kn,rs,_r,Ps,ha,Cn.vertical,["vertical"],Wh,_b,_s,Vr,Ns));let ju=-1;const xb=(gl,_l)=>gl?Math.max(gl,_l):_l;ju=xb(Bd,ju),ju=xb(Y0,ju),ju=xb(t1,ju);const zA=ju>-1?1:0;Ki.glyphOffsetArray.length>=$h.MAX_GLYPHS&&le("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_r.sortKey!==void 0&&Ki.addToSortKeyRanges(Ki.symbolInstances.length,_r.sortKey),Ki.symbolInstances.emplaceBack(cf.x,cf.y,cf.z,Ii.x,Ii.y,Wh.right>=0?Wh.right:-1,Wh.center>=0?Wh.center:-1,Wh.left>=0?Wh.left:-1,Wh.vertical>=0?Wh.vertical:-1,gb,_b,WT,Po!==void 0?Po:Ki.collisionBoxArray.length,Po!==void 0?Po+1:Ki.collisionBoxArray.length,Aa!==void 0?Aa:Ki.collisionBoxArray.length,Aa!==void 0?Aa+1:Ki.collisionBoxArray.length,Do!==void 0?Do:Ki.collisionBoxArray.length,Do!==void 0?Do+1:Ki.collisionBoxArray.length,Io||Ki.collisionBoxArray.length,Io?Io+1:Ki.collisionBoxArray.length,Gr,$T,HT,i1,VT,zA,0,yb,vb,ju)})(s,Di,Ui,Jt,o,h,p,gi,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,St,$t,Y,0,bt,oi,Fe,i,v,ee,de,_e)};if(Ei==="line")for(const Jt of iy(i.geometry,0,0,cn,cn)){const Di=N2(Jt,ft,Ht,o.vertical||Xe,h,24,ct,s.overscaling,cn);for(const un of Di){const Ui=Xe;Ui&&H2(s,Ui.text,Zt,un)||Ci(Jt,un,_e)}}else if(Ei==="line-center"){for(const Jt of i.geometry)if(Jt.length>1){const Di=z2(Jt,Ht,o.vertical||Xe,h,24,ct);Di&&Ci(Jt,Di,_e)}}else if(i.type==="Polygon")for(const Jt of mg(i.geometry,0)){const Di=oy(Jt,16);Ci(Jt[0],new ah(Di.x,Di.y,0,0,void 0),_e)}else if(i.type==="LineString")for(const Jt of i.geometry)Ci(Jt,new ah(Jt[0].x,Jt[0].y,0,0,void 0),_e);else if(i.type==="Point")for(const Jt of i.geometry)for(const Di of Jt)Ci([Di],new ah(Di.x,Di.y,0,0,void 0),_e)}const Vh=32640;function Id(s,i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie,Fe,Xe){const dt=function(ft,St,bt,Ht,$t,oi,Ei,Zt){const ai=[];if(St.positionedLines.length===0)return ai;const ui=Ht.layout.get("text-rotate").evaluate(oi,{})*Math.PI/180,gi=function(Ui){const Ki=Ui[0],Ii=Ui[1],gn=Ki*Ii;return gn>0?[Ki,-Ii]:gn<0?[-Ki,Ii]:Ki===0?[Ii,Ki]:[Ii,-Ki]}(bt);let Ci=Math.abs(St.top-St.bottom);for(const Ui of St.positionedLines)Ci-=Ui.lineOffset;const Jt=St.positionedLines.length,Di=Ci/Jt;let un=St.top-bt[1];for(let Ui=0;Ui<Jt;++Ui){const Ki=St.positionedLines[Ui];un=F2(St,Di,un,Ui);for(const Ii of Ki.positionedGlyphs){if(!Ii.rect)continue;const gn=Ii.rect||{};let qn=4,Hn=!0,Gn=1,xn=0;if(Ii.imageName){const Vr=Ei[Ii.imageName];if(!Vr)continue;if(Vr.sdf){le("SDF images are not supported in formatted text and will be ignored.");continue}Hn=!1,Gn=Vr.pixelRatio,qn=1/Gn}const Lr=($t||Zt)&&Ii.vertical,kn=Ii.metrics.advance*Ii.scale/2,Zn=Ii.metrics,Gr=Ii.rect;if(Gr===null)continue;Zt&&St.verticalizable&&(xn=Ii.imageName?kn-Ii.metrics.width*Ii.scale/2:0);const es=$t?[Ii.x+kn,Ii.y]:[0,0];let Kr=[0,0],ts=[0,0],rs=!1;$t||(Lr?(ts=[Ii.x+kn+gi[0],Ii.y+gi[1]-xn],rs=!0):Kr=[Ii.x+kn+bt[0],Ii.y+bt[1]-xn]);const Ps=Gr.w*Ii.scale/(Gn*(Ii.localGlyph?2:1)),ko=Gr.h*Ii.scale/(Gn*(Ii.localGlyph?2:1));let Or,eo,qs,_r;if(Lr){const Vr=Ii.y-un,Ns=new U(-kn,kn-Vr),ha=-Math.PI/2,Po=new U(...ts);Or=new U(-kn+Kr[0],Kr[1]),Or._rotateAround(ha,Ns)._add(Po),Or.x+=-Vr+kn,Or.y-=(Zn.left-qn)*Ii.scale;const Do=Ii.imageName?Zn.advance*Ii.scale:Ur*Ii.scale,Aa=String.fromCharCode(Ii.glyph);A2(Aa)?Or.x+=(1-qn)*Ii.scale:Eg(Aa)?Or.x+=Do-Zn.height*Ii.scale+(-qn-1)*Ii.scale:Or.x+=Ii.imageName||Zn.width+2*qn===Gr.w&&Zn.height+2*qn===Gr.h?(Do-ko)/2:(Do-(Zn.height+2*qn)*Ii.scale)/2,eo=new U(Or.x,Or.y-Ps),qs=new U(Or.x+ko,Or.y),_r=new U(Or.x+ko,Or.y-Ps)}else{const Vr=(Zn.left-qn)*Ii.scale-kn+Kr[0],Ns=(-Zn.top-qn)*Ii.scale+Kr[1],ha=Vr+Ps,Po=Ns+ko;Or=new U(Vr,Ns),eo=new U(ha,Ns),qs=new U(Vr,Po),_r=new U(ha,Po)}if(ui){let Vr;Vr=$t?new U(0,0):rs?new U(gi[0],gi[1]):new U(bt[0],bt[1]),Or._rotateAround(ui,Vr),eo._rotateAround(ui,Vr),qs._rotateAround(ui,Vr),_r._rotateAround(ui,Vr)}const _s=new U(0,0),co=new U(0,0);ai.push({tl:Or,tr:eo,bl:qs,br:_r,tex:gn,writingMode:St.writingMode,glyphOffset:es,sectionIndex:Ii.sectionIndex,isSDF:Hn,pixelOffsetTL:_s,pixelOffsetBR:co,minFontScaleX:0,minFontScaleY:0})}}return ai}(0,h,Y,v,w,R,p,s.allowVerticalPlacement),yt=s.textSizeData;let ct=null;yt.kind==="source"?(ct=[Wr*v.layout.get("text-size").evaluate(R,{},Xe)],ct[0]>Vh&&le(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):yt.kind==="composite"&&(ct=[Wr*Ie.compositeTextSizes[0].evaluate(R,{},Xe),Wr*Ie.compositeTextSizes[1].evaluate(R,{},Xe)],(ct[0]>Vh||ct[1]>Vh)&&le(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,dt,ct,Y,w,R,de,i,o,ee.lineStartIndex,ee.lineLength,Ae,Fe,Xe);for(const ft of _e)Te[ft]=s.text.placedSymbolArray.length-1;return 4*dt.length}function ly(s){for(const i in s)return s[i];return null}function B0(s,i,o,h,p,v,w,R,Y,ee){let de=w.top,_e=w.bottom,Te=w.left,Ae=w.right;const Ie=w.collisionPadding;if(Ie&&(Te-=Ie[0],de-=Ie[1],Ae+=Ie[2],_e+=Ie[3]),Y){const Fe=new U(Te,de),Xe=new U(Ae,de),dt=new U(Te,_e),yt=new U(Ae,_e),ct=N(Y);let ft=new U(0,0);ee&&(ft=new U(ee[0],ee[1])),Fe._rotateAround(ct,ft),Xe._rotateAround(ct,ft),dt._rotateAround(ct,ft),yt._rotateAround(ct,ft),Te=Math.min(Fe.x,Xe.x,dt.x,yt.x),Ae=Math.max(Fe.x,Xe.x,dt.x,yt.x),de=Math.min(Fe.y,Xe.y,dt.y,yt.y),_e=Math.max(Fe.y,Xe.y,dt.y,yt.y)}return s.emplaceBack(i.x,i.y,i.z,o.x,o.y,Te,de,Ae,_e,R,h,p,v),s.length-1}function Bg(s){s.collisionPadding&&(s.top-=s.collisionPadding[1],s.bottom+=s.collisionPadding[3]);const i=s.bottom-s.top;return i>0?Math.max(10,i):null}function H2(s,i,o,h){const p=s.compareText;if(i in p){const v=p[i];for(let w=v.length-1;w>=0;w--)if(h.dist(v[w])<o)return!0}else p[i]=[];return p[i].push(h),!1}const W2=Vi([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:zg}=W2,Ng=Vi([{name:"a_pos_3",components:3,type:"Int16"}]);var Kp=Vi([{name:"a_pos",type:"Int16",components:2}]);const lh=cn/Math.PI/2,Fg=2*Xa(1,0)*lh*Math.PI,Ru=64,Bu=[Ru,32,16],fl=-lh,ml=lh,Y2=[new Ko([fl,fl,fl],[ml,ml,ml]),new Ko([fl,fl,fl],[0,0,ml]),new Ko([0,fl,fl],[ml,0,ml]),new Ko([fl,0,fl],[0,ml,ml]),new Ko([0,0,fl],[ml,ml,ml])];function cy(s,i,o,h=!0){const p=qa([],s._camera.position,s.worldSize),v=[i,o,1,1];jh(v,v,s.pixelMatrixInverse),m_(v,v,1/v[3]);const w=Zo([],Kl([],v,p)),R=s.globeMatrix,Y=[R[12],R[13],R[14]],ee=Kl([],Y,p),de=Md(ee),_e=Zo([],ee),Te=s.worldSize/(2*Math.PI),Ae=ul(_e,w),Ie=Math.asin(Te/de);if(Ie<Math.acos(Ae)){if(!h)return null;const Ei=[],Zt=[];qa(Ei,w,de/Ae),Zo(Zt,Kl(Zt,Ei,ee)),Zo(w,Pc(w,ee,qa(w,Zt,Math.tan(Ie)*de)))}const Fe=[];new f0(p,w).closestPointOnSphere(Y,Te,Fe);const Xe=Zo([],ht(R,0)),dt=Zo([],ht(R,1)),yt=Zo([],ht(R,2)),ct=ul(Xe,Fe),ft=ul(dt,Fe),St=ul(yt,Fe),bt=F(Math.asin(-ft/Te));let Ht=F(Math.atan2(ct,St));Ht=s.center.lng+function(Ei,Zt){const ai=(Zt-Ei+180)%360-180;return ai<-180?ai+360:ai}(s.center.lng,Ht);const $t=Yl(Ht),oi=y(Ya(bt),0,1);return new wd($t,oi)}class X2{constructor(i,o,h){this.a=Kl([],i,h),this.b=Kl([],o,h),this.center=h;const p=Zo([],this.a),v=Zo([],this.b);this.angle=Math.acos(ul(p,v))}}function jg(s,i){if(s.angle===0)return null;let o;return o=s.a[i]===0?1/s.angle*.5*Math.PI:1/s.angle*Math.atan(s.b[i]/s.a[i]/Math.sin(s.angle)-1/Math.tan(s.angle)),o<0||o>1?null:function(h,p,v,w){const R=Math.sin(v);return h*(Math.sin((1-w)*v)/R)+p*(Math.sin(w*v)/R)}(s.a[i],s.b[i],s.angle,y(o,0,1))+s.center[i]}function Lc(s){if(s.z<=1)return Y2[s.z+2*s.y+s.x];const i=Ug(z0(s));return Ko.fromPoints(i)}function Ld(s,i,o){return qa(s,s,1-o),Cu(s,s,i,o)}function hy(s,i){const o=Od(i.zoom);if(o===0)return Lc(s);const h=z0(s),p=Ug(h),v=Yl(h.getWest())*i.worldSize,w=Yl(h.getEast())*i.worldSize,R=Ya(h.getNorth())*i.worldSize,Y=Ya(h.getSouth())*i.worldSize,ee=[v,R,0],de=[w,R,0],_e=[v,Y,0],Te=[w,Y,0],Ae=u0([],i.globeMatrix);return bs(ee,ee,Ae),bs(de,de,Ae),bs(_e,_e,Ae),bs(Te,Te,Ae),p[0]=Ld(p[0],_e,o),p[1]=Ld(p[1],Te,o),p[2]=Ld(p[2],de,o),p[3]=Ld(p[3],ee,o),Ko.fromPoints(p)}function dy(s,i,o){for(const h of s)bs(h,h,i),qa(h,h,o)}function q2(s,i,o){const h=i/s.worldSize,p=s.globeMatrix;if(o.z<=1){const $t=Lc(o).getCorners();return dy($t,p,h),Ko.fromPoints($t)}const v=z0(o),w=Ug(v);dy(w,p,h);const R=Number.MAX_VALUE,Y=[-R,-R,-R],ee=[R,R,R];if(v.contains(s.center)){for(const Ei of w)Sa(ee,ee,Ei),Zl(Y,Y,Ei);Y[2]=0;const $t=s.point,oi=[$t.x*h,$t.y*h,0];return Sa(ee,ee,oi),Zl(Y,Y,oi),new Ko(ee,Y)}const de=[p[12]*h,p[13]*h,p[14]*h],_e=v.getCenter(),Te=y(s.center.lat,-85.051129,yo),Ae=y(_e.lat,-85.051129,yo),Ie=Yl(s.center.lng),Fe=Ya(Te);let Xe=Ie-Yl(_e.lng);const dt=Fe-Ya(Ae);Xe>.5?Xe-=1:Xe<-.5&&(Xe+=1);let yt=0;Math.abs(Xe)>Math.abs(dt)?yt=Xe>=0?1:3:(yt=dt>=0?0:2,Cu(de,de,[p[4]*h,p[5]*h,p[6]*h],-Math.sin(N(dt>=0?v.getSouth():v.getNorth()))*lh));const ct=w[yt],ft=w[(yt+1)%4],St=new X2(ct,ft,de),bt=[jg(St,0)||ct[0],jg(St,1)||ct[1],jg(St,2)||ct[2]],Ht=Od(s.zoom);if(Ht>0){const $t=function({x:Ei,y:Zt,z:ai},ui,gi,Ci,Jt){const Di=1/(1<<ai);let un=Ei*Di,Ui=un+Di,Ki=Zt*Di,Ii=Ki+Di,gn=0;const qn=(un+Ui)/2-Ci;return qn>.5?gn=-1:qn<-.5&&(gn=1),un=((un+gn)*ui-(Ci*=ui))*gi+Ci,Ui=((Ui+gn)*ui-Ci)*gi+Ci,Ki=(Ki*ui-(Jt*=ui))*gi+Jt,Ii=(Ii*ui-Jt)*gi+Jt,[[un,Ii,0],[Ui,Ii,0],[Ui,Ki,0],[un,Ki,0]]}(o,i,s._pixelsPerMercatorPixel,Ie,Fe);for(let Ei=0;Ei<w.length;Ei++)Ld(w[Ei],$t[Ei],Ht);const oi=Pc([],$t[yt],$t[(yt+1)%4]);qa(oi,oi,.5),Ld(bt,oi,Ht)}for(const $t of w)Sa(ee,ee,$t),Zl(Y,Y,$t);return ee[2]=Math.min(ct[2],ft[2]),Sa(ee,ee,bt),Zl(Y,Y,bt),new Ko(ee,Y)}function z0({x:s,y:i,z:o}){const h=1/(1<<o),p=new Kn(la(s*h),_o((i+1)*h)),v=new Kn(la((s+1)*h),_o(i*h));return new nh(p,v)}function Ug(s){const i=N(s.getNorth()),o=N(s.getSouth()),h=Math.cos(i),p=Math.cos(o),v=Math.sin(i),w=Math.sin(o),R=s.getWest(),Y=s.getEast();return[zu(p,w,R),zu(p,w,Y),zu(h,v,Y),zu(h,v,R)]}function zu(s,i,o,h=lh){return o=N(o),[s*Math.sin(o)*h,-i*h,s*Math.cos(o)*h]}function Jp(s,i,o){return zu(Math.cos(N(s)),Math.sin(N(s)),i,o)}function Qp(s,i,o,h){const p=1<<o.z,v=(s/cn+o.x)/p;return Jp(_o((i/cn+o.y)/p),la(v),h)}function N0({min:s,max:i}){return 16383/Math.max(i[0]-s[0],i[1]-s[1],i[2]-s[2])}const uy=new Float64Array(16);function ef(s){const i=N0(s),o=tg(uy,[i,i,i]);return Rp(o,o,((h=[])[0]=-(p=s.min)[0],h[1]=-p[1],h[2]=-p[2],h));var h,p}function Gg(s){const i=(h=s.min,(o=uy)[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=h[0],o[13]=h[1],o[14]=h[2],o[15]=1,o);var o,h;const p=1/N0(s);return Cd(i,i,[p,p,p])}function F0(s,i,o,h,p){const v=function(Y){const ee=cn/(2*Math.PI);return Y/(2*Math.PI)/ee}(o),w=[s,i,-o/(2*Math.PI)],R=dl(new Float64Array(16));return Rp(R,R,w),Cd(R,R,[v,v,v]),eg(R,R,N(-p)),Bp(R,R,N(-h)),R}function Od(s){return b(5,6,s)}function Vg(s,i){const o=Jp(i.lat,i.lng),h=function(Ie){const Fe=Jp(Ie._center.lat,Ie._center.lng);let Xe=rg([],Ad(0,1,0),Fe);const dt=p_([],-Ie.angle,Fe);Xe=bs(Xe,Xe,dt),p_(dt,-Ie._pitch,Xe);const yt=Zo([],Fe);return qa(yt,yt,Ie.cameraToCenterDistance/Ie.pixelsPerMeter*Fg),bs(yt,yt,dt),Pc([],Fe,yt)}(s);return w=(p=Eu([],h,o))[0],R=p[1],Y=p[2],ee=(v=o)[0],de=v[1],_e=v[2],Ae=(Te=Math.sqrt(w*w+R*R+Y*Y)*Math.sqrt(ee*ee+de*de+_e*_e))&&ul(p,v)/Te,Math.acos(Math.min(Math.max(Ae,-1),1));var p,v,w,R,Y,ee,de,_e,Te,Ae}function $g(s,i){return Vg(s,i)>Math.PI/2*1.01}const py=N(85),Z2=Math.cos(py),Hg=Math.sin(py);function fy(s,i){const o=s.fovAboveCenter,h=s.elevation?s.elevation.getMinElevationBelowMSL()*i:0,p=(s._camera.position[2]*s.worldSize-h)/Math.cos(s._pitch),v=Math.sin(o)*p/Math.sin(Math.max(Math.PI/2-s._pitch-o,.01)),w=Math.sin(s._pitch)*v+p;return Math.min(1.01*w,p*(1/s._horizonShift))}function Rd(s,i){if(!i.isReprojectedInTileSpace)return{scale:1<<s.z,x:s.x,y:s.y,x2:s.x+1,y2:s.y+1,projection:i};const o=Math.pow(2,-s.z),h=s.x*o,p=(s.x+1)*o,v=s.y*o,w=(s.y+1)*o,R=la(h),Y=la(p),ee=_o(v),de=_o(w),_e=i.project(R,ee),Te=i.project(Y,ee),Ae=i.project(Y,de),Ie=i.project(R,de);let Fe=Math.min(_e.x,Te.x,Ae.x,Ie.x),Xe=Math.min(_e.y,Te.y,Ae.y,Ie.y),dt=Math.max(_e.x,Te.x,Ae.x,Ie.x),yt=Math.max(_e.y,Te.y,Ae.y,Ie.y);const ct=o/16;function ft(bt,Ht,$t,oi,Ei,Zt){const ai=($t+Ei)/2,ui=(oi+Zt)/2,gi=i.project(la(ai),_o(ui)),Ci=Math.max(0,Fe-gi.x,Xe-gi.y,gi.x-dt,gi.y-yt);Fe=Math.min(Fe,gi.x),dt=Math.max(dt,gi.x),Xe=Math.min(Xe,gi.y),yt=Math.max(yt,gi.y),Ci>ct&&(ft(bt,gi,$t,oi,ai,ui),ft(gi,Ht,ai,ui,Ei,Zt))}ft(_e,Te,h,v,p,v),ft(Te,Ae,p,v,p,w),ft(Ae,Ie,p,w,h,w),ft(Ie,_e,h,w,h,v),Fe-=ct,Xe-=ct,dt+=ct,yt+=ct;const St=1/Math.max(dt-Fe,yt-Xe);return{scale:St,x:Fe*St,y:Xe*St,x2:dt*St,y2:yt*St,projection:i}}const K2=dl(new Float32Array(16));class Xs{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,o){return{x:0,y:0,z:0}}unproject(i,o){return new Kn(0,0)}projectTilePoint(i,o,h){return{x:i,y:o,z:0}}locationPoint(i,o,h=!0){return i._coordinatePoint(i.locationCoordinate(o),h)}pixelsPerMeter(i,o){return Xa(1,i)*o}pixelSpaceConversion(i,o,h){return 1}farthestPixelDistance(i){return fy(i,i.pixelsPerMeter)}pointCoordinate(i,o,h,p){const v=i.horizonLineFromTop(!1),w=new U(o,Math.max(v,h));return i.rayIntersectionCoordinate(i.pointRayIntersection(w,p))}pointCoordinate3D(i,o,h){const p=new U(o,h);if(i.elevation)return i.elevation.pointCoordinate(p);{const v=this.pointCoordinate(i,p.x,p.y,0);return[v.x,v.y,v.z]}}isPointAboveHorizon(i,o){if(i.elevation)return!this.pointCoordinate3D(i,o.x,o.y);const h=i.horizonLineFromTop();return o.y<h}createInversionMatrix(i,o){return K2}createTileMatrix(i,o,h){let p,v,w;const R=h.canonical,Y=dl(new Float64Array(16));if(this.isReprojectedInTileSpace){const ee=Rd(R,this);p=1,v=ee.x+h.wrap*ee.scale,w=ee.y,Cd(Y,Y,[p/ee.scale,p/ee.scale,i.pixelsPerMeter/o])}else p=o/i.zoomScale(R.z),v=(R.x+Math.pow(2,R.z)*h.wrap)*p,w=R.y*p;return Rp(Y,Y,[v,w,0]),Cd(Y,Y,[p/cn,p/cn,1]),Y}upVector(i,o,h){return[0,0,1]}upVectorScale(i,o,h){return{metersToTile:1}}}class Wg extends Xs{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[o,h]=this.parallels=i.parallels||[29.5,45.5],p=Math.sin(N(o));this.n=(p+Math.sin(N(h)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(i,o){const{n:h,c:p,r0:v}=this,w=N(i-this.center[0]),R=N(o),Y=Math.sqrt(p-2*h*Math.sin(R))/h;return{x:Y*Math.sin(w*h),y:Y*Math.cos(w*h)-v,z:0}}unproject(i,o){const{n:h,c:p,r0:v}=this,w=v+o;let R=Math.atan2(i,Math.abs(w))*Math.sign(w);w*h<0&&(R-=Math.PI*Math.sign(i)*Math.sign(w));const Y=N(this.center[0])*h;R=D(R,-Math.PI-Y,Math.PI-Y);const ee=y(F(R/h)+this.center[0],-180,180),de=Math.asin(y((p-(i*i+w*w)*h*h)/(2*h),-1,1)),_e=y(F(de),-85.051129,yo);return new Kn(ee,_e)}}const tf=1.340264,nf=-.081106,rf=893e-6,sf=.003796,Nu=Math.sqrt(3)/2;class J2 extends Xs{project(i,o){o=o/180*Math.PI,i=i/180*Math.PI;const h=Math.asin(Nu*Math.sin(o)),p=h*h,v=p*p*p;return{x:.5*(i*Math.cos(h)/(Nu*(tf+3*nf*p+v*(7*rf+9*sf*p)))/Math.PI+.5),y:1-.5*(h*(tf+nf*p+v*(rf+sf*p))/Math.PI+1),z:0}}unproject(i,o){i=(2*i-.5)*Math.PI;let h=o=(2*(1-o)-1)*Math.PI,p=h*h,v=p*p*p;for(let de,_e,Te,Ae=0;Ae<12&&(_e=h*(tf+nf*p+v*(rf+sf*p))-o,Te=tf+3*nf*p+v*(7*rf+9*sf*p),de=_e/Te,h=y(h-de,-Math.PI/3,Math.PI/3),p=h*h,v=p*p*p,!(Math.abs(de)<1e-12));++Ae);const w=Nu*i*(tf+3*nf*p+v*(7*rf+9*sf*p))/Math.cos(h),R=Math.asin(Math.sin(h)/Nu),Y=y(180*w/Math.PI,-180,180),ee=y(180*R/Math.PI,-85.051129,yo);return new Kn(Y,ee)}}class Yg extends Xs{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,o){return{x:.5+i/360,y:.5-o/360,z:0}}unproject(i,o){const h=360*(i-.5),p=y(360*(.5-o),-85.051129,yo);return new Kn(h,p)}}const Fu=Math.PI/2;function j0(s){return Math.tan((Fu+s)/2)}class Q2 extends Xs{constructor(i){super(i),this.center=i.center||[0,30];const[o,h]=this.parallels=i.parallels||[30,30];let p=N(o),v=N(h);this.southernCenter=p+v<0,this.southernCenter&&(p=-p,v=-v);const w=Math.cos(p),R=j0(p);this.n=p===v?Math.sin(p):Math.log(w/Math.cos(v))/Math.log(j0(v)/R),this.f=w*Math.pow(j0(p),this.n)/this.n}project(i,o){o=N(o),this.southernCenter&&(o=-o),i=N(i-this.center[0]);const h=1e-6,{n:p,f:v}=this;v>0?o<-Fu+h&&(o=-Fu+h):o>Fu-h&&(o=Fu-h);const w=v/Math.pow(j0(o),p);let R=w*Math.sin(p*i),Y=v-w*Math.cos(p*i);return R=.5*(R/Math.PI+.5),Y=.5*(Y/Math.PI+.5),{x:R,y:this.southernCenter?Y:1-Y,z:0}}unproject(i,o){i=(2*i-.5)*Math.PI,this.southernCenter&&(o=1-o),o=(2*(1-o)-.5)*Math.PI;const{n:h,f:p}=this,v=p-o,w=Math.sign(v),R=Math.sign(h)*Math.sqrt(i*i+v*v);let Y=Math.atan2(i,Math.abs(v))*w;v*h<0&&(Y-=Math.PI*Math.sign(i)*w);const ee=y(F(Y/h)+this.center[0],-180,180),de=y(F(2*Math.atan(Math.pow(p/R,1/h))-Fu),-85.051129,yo);return new Kn(ee,this.southernCenter?-de:de)}}class my extends Xs{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,o){return{x:Yl(i),y:Ya(o),z:0}}unproject(i,o){const h=la(i),p=_o(o);return new Kn(h,p)}}const Xg=N(yo);class eb extends Xs{project(i,o){const h=(o=N(o))*o,p=h*h;return{x:.5*((i=N(i))*(.8707-.131979*h+p*(p*(.003971*h-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+h*(.015085+p*(.028874*h-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(i,o){i=(2*i-.5)*Math.PI;let h=o=(2*(1-o)-1)*Math.PI,p=25,v=0,w=h*h;do{w=h*h;const ee=w*w;v=(h*(1.007226+w*(.015085+ee*(.028874*w-.044475-.005916*ee)))-o)/(1.007226+w*(.045255+ee*(.259866*w-.311325-.005916*11*ee))),h=y(h-v,-Xg,Xg)}while(Math.abs(v)>1e-6&&--p>0);w=h*h;const R=y(F(i/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),Y=F(h);return new Kn(R,Y)}}const gy=N(yo);class tb extends Xs{project(i,o){o=N(o),i=N(i);const h=Math.cos(o),p=2/Math.PI,v=Math.acos(h*Math.cos(i/2)),w=Math.sin(v)/v,R=.5*(i*p+2*h*Math.sin(i/2)/w)||0,Y=.5*(o+Math.sin(o)/w)||0;return{x:.5*(R/Math.PI+.5),y:1-.5*(Y/Math.PI+1),z:0}}unproject(i,o){let h=i=(2*i-.5)*Math.PI,p=o=(2*(1-o)-1)*Math.PI,v=25;const w=1e-6;let R=0,Y=0;do{const ee=Math.cos(p),de=Math.sin(p),_e=2*de*ee,Te=de*de,Ae=ee*ee,Ie=Math.cos(h/2),Fe=Math.sin(h/2),Xe=2*Ie*Fe,dt=Fe*Fe,yt=1-Ae*Ie*Ie,ct=yt?1/yt:0,ft=yt?Math.acos(ee*Ie)*Math.sqrt(1/yt):0,St=.5*(2*ft*ee*Fe+2*h/Math.PI)-i,bt=.5*(ft*de+p)-o,Ht=.5*ct*(Ae*dt+ft*ee*Ie*Te)+1/Math.PI,$t=ct*(Xe*_e/4-ft*de*Fe),oi=.125*ct*(_e*Fe-ft*de*Ae*Xe),Ei=.5*ct*(Te*Ie+ft*dt*ee)+.5,Zt=$t*oi-Ei*Ht;R=(bt*$t-St*Ei)/Zt,Y=(St*oi-bt*Ht)/Zt,h=y(h-R,-Math.PI,Math.PI),p=y(p-Y,-gy,gy)}while((Math.abs(R)>w||Math.abs(Y)>w)&&--v>0);return new Kn(F(h),F(p))}}class U0 extends Xs{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(N(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,o){const{scale:h,cosPhi:p}=this;return{x:N(i)*p*h+.5,y:-Math.sin(N(o))/p*h+.5,z:0}}unproject(i,o){const{scale:h,cosPhi:p}=this,v=-(o-.5)/h,w=y(F((i-.5)/h)/p,-180,180),R=Math.asin(y(v*p,-1,1)),Y=y(F(R),-85.051129,yo);return new Kn(w,Y)}}class qg extends my{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(i,o,h){const p=Qp(i,o,h);return bs(p,p,ef(Lc(h))),{x:p[0],y:p[1],z:p[2]}}locationPoint(i,o){const h=Jp(o.lat,o.lng),p=Zo([],h),v=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(o),i._centerAltitude):i._centerAltitude;Cu(h,h,p,Xa(1,0)*cn*v);const w=dl(new Float64Array(16));return Ed(w,i.pixelMatrix,i.globeMatrix),bs(h,h,w),new U(h[0],h[1])}pixelsPerMeter(i,o){return Xa(1,0)*o}pixelSpaceConversion(i,o,h){const p=Xa(1,i)*o,v=Pn(Xa(1,45)*o,p,h);return this.pixelsPerMeter(i,o)/v}createTileMatrix(i,o,h){const p=Gg(Lc(h.canonical));return Ed(new Float64Array(16),i.globeMatrix,p)}createInversionMatrix(i,o){const{center:h}=i,p=ef(Lc(o));return Bp(p,p,N(h.lng)),eg(p,p,N(h.lat)),Cd(p,p,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(i,o,h,p){return cy(i,o,h,!0)||new wd(0,0)}pointCoordinate3D(i,o,h){const p=this.pointCoordinate(i,o,h,0);return[p.x,p.y,p.z]}isPointAboveHorizon(i,o){return!cy(i,o.x,o.y,!1)}farthestPixelDistance(i){const o=function(p,v){const w=p.cameraToCenterDistance,R=p._centerAltitude*v,Y=p._camera,ee=p._camera.forward(),de=Pc([],qa([],ee,-w),[0,0,R]),_e=p.worldSize/(2*Math.PI),Te=[0,0,-_e],Ae=p.width/p.height,Ie=Math.tan(p.fovAboveCenter),Fe=qa([],Y.up(),Ie),Xe=qa([],Y.right(),Ie*Ae),dt=Zo([],Pc([],Pc([],ee,Fe),Xe)),yt=[];let ct;if(new f0(de,dt).closestPointOnSphere(Te,_e,yt)){const ft=Pc([],yt,Te),St=Kl([],ft,de);ct=Math.cos(p.fovAboveCenter)*Md(St)}else{const ft=Kl([],de,Te),St=Kl([],Te,de);Zo(St,St);const bt=Md(ft)-_e;ct=Math.sqrt(bt*(bt+2*_e));const Ht=Math.acos(ct/(_e+bt))-Math.acos(ul(ee,St));ct*=Math.cos(Ht)}return 1.01*ct}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),h=Od(i.zoom);if(h>0){const p=fy(i,Xa(1,i.center.lat)*i.worldSize),v=i.worldSize/(2*Math.PI),w=Math.max(i.width,i.height)/i.worldSize*Math.PI;return Pn(o,p+v*(1-Math.cos(w)),Math.pow(h,10))}return o}upVector(i,o,h){return Qp(o,h,i,1)}upVectorScale(i){return{metersToTile:Fg*N0(Lc(i))}}}function _y(s){const i=s.parallels,o=!!i&&Math.abs(i[0]+i[1])<.01;switch(s.name){case"mercator":return new my(s);case"equirectangular":return new Yg(s);case"naturalEarth":return new eb(s);case"equalEarth":return new J2(s);case"winkelTripel":return new tb(s);case"albers":return o?new U0(s):new Wg(s);case"lambertConformalConic":return o?new U0(s):new Q2(s);case"globe":return new qg(s)}throw new Error(`Invalid projection name: ${s.name}`)}const ib=b0.types,nb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function G0(s,i,o,h,p,v,w,R,Y,ee,de,_e,Te){const Ae=R?Math.min(Vh,Math.round(R[0])):0,Ie=R?Math.min(Vh,Math.round(R[1])):0;s.emplaceBack(i,o,Math.round(32*h),Math.round(32*p),v,w,(Ae<<1)+(Y?1:0),Ie,16*ee,16*de,256*_e,256*Te)}function V0(s,i,o,h,p,v,w){s.emplaceBack(i,o,h,p,v,w)}function $0(s,i,o,h,p){s.emplaceBack(i,o,h,p),s.emplaceBack(i,o,h,p),s.emplaceBack(i,o,h,p),s.emplaceBack(i,o,h,p)}function rb(s){for(const i of s.sections)if(Qe(i.text))return!0;return!1}class Zg{constructor(i){this.layoutVertexArray=new wr,this.indexArray=new ao,this.programConfigurations=i,this.segments=new Cs,this.dynamicLayoutVertexArray=new Mo,this.opacityVertexArray=new ms,this.placedSymbolArray=new e_,this.globeExtVertexArray=new sr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,o,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,w2.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,T2.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,nb,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,Jl.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Bi(Zg,"SymbolBuffers");class Kg{constructor(i,o,h){this.layoutVertexArray=new i,this.layoutAttributes=o,this.indexArray=new h,this.segments=new Cs,this.collisionVertexArray=new yd,this.collisionVertexArrayExt=new Ha}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,S2.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,Pd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Bi(Kg,"CollisionBuffers");class $h{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(w=>w.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=dl([]),this.placementViewportMatrix=dl([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sg(this.zoom,o["text-size"]),this.iconSizeData=Sg(this.zoom,o["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(w=>Cn[w]),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new Zg(new Mc(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new Zg(new Mc(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new Bm,this.lineVertexArray=new zm,this.symbolInstances=new n0}calculateGlyphDependencies(i,o,h,p,v){for(let w=0;w<i.length;w++)if(o[i.charCodeAt(w)]=!0,p&&v){const R=Yp[i.charAt(w)];R&&(o[R.charCodeAt(0)]=!0)}}populate(i,o,h,p){const v=this.layers[0],w=v.layout,R=this.projection.name==="globe",Y=w.get("text-font"),ee=w.get("text-field"),de=w.get("icon-image"),_e=(ee.value.kind!=="constant"||ee.value.value instanceof Os&&!ee.value.value.isEmpty()||ee.value.value.toString().length>0)&&(Y.value.kind!=="constant"||Y.value.value.length>0),Te=de.value.kind!=="constant"||!!de.value.value||Object.keys(de.parameters).length>0,Ae=w.get("symbol-sort-key");if(this.features=[],!_e&&!Te)return;const Ie=o.iconDependencies,Fe=o.glyphDependencies,Xe=o.availableImages,dt=new Dt(this.zoom);for(const{feature:yt,id:ct,index:ft,sourceLayerIndex:St}of i){const bt=v._featureFilter.needGeometry,Ht=Ac(yt,bt);if(!v._featureFilter.filter(dt,Ht,h))continue;if(bt||(Ht.geometry=ql(yt,h,p)),R&&yt.type!==1&&h.z<=5){const Zt=Ht.geometry,ai=.98078528056,ui=(gi,Ci)=>ul(Qp(gi.x,gi.y,h,1),Qp(Ci.x,Ci.y,h,1))<ai;for(let gi=0;gi<Zt.length;gi++)Zt[gi]=Ox(Zt[gi],ui)}let $t,oi;if(_e){const Zt=v.getValueAndResolveTokens("text-field",Ht,h,Xe),ai=Os.factory(Zt);rb(ai)&&(this.hasRTLText=!0),(!this.hasRTLText||kt()==="unavailable"||this.hasRTLText&&Ft.isParsed())&&($t=M2(ai,v,Ht))}if(Te){const Zt=v.getValueAndResolveTokens("icon-image",Ht,h,Xe);oi=Zt instanceof Go?Zt:Go.fromString(Zt)}if(!$t&&!oi)continue;const Ei=this.sortFeaturesByKey?Ae.evaluate(Ht,{},h):void 0;if(this.features.push({id:ct,text:$t,icon:oi,index:ft,sourceLayerIndex:St,geometry:Ht.geometry,properties:yt.properties,type:ib[yt.type],sortKey:Ei}),oi&&(Ie[oi.name]=!0),$t){const Zt=Y.evaluate(Ht,{},h).join(","),ai=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Cn.vertical)>=0;for(const ui of $t.sections)if(ui.image)Ie[ui.image.name]=!0;else{const gi=ne($t.toString()),Ci=ui.fontStack||Zt,Jt=Fe[Ci]=Fe[Ci]||{};this.calculateGlyphDependencies(ui.text,Jt,ai,this.allowVerticalPlacement,gi)}}}w.get("symbol-placement")==="line"&&(this.features=function(yt){const ct={},ft={},St=[];let bt=0;function Ht(Zt){St.push(yt[Zt]),bt++}function $t(Zt,ai,ui){const gi=ft[Zt];return delete ft[Zt],ft[ai]=gi,St[gi].geometry[0].pop(),St[gi].geometry[0]=St[gi].geometry[0].concat(ui[0]),gi}function oi(Zt,ai,ui){const gi=ct[ai];return delete ct[ai],ct[Zt]=gi,St[gi].geometry[0].shift(),St[gi].geometry[0]=ui[0].concat(St[gi].geometry[0]),gi}function Ei(Zt,ai,ui){const gi=ui?ai[0][ai[0].length-1]:ai[0][0];return`${Zt}:${gi.x}:${gi.y}`}for(let Zt=0;Zt<yt.length;Zt++){const ai=yt[Zt],ui=ai.geometry,gi=ai.text?ai.text.toString():null;if(!gi){Ht(Zt);continue}const Ci=Ei(gi,ui),Jt=Ei(gi,ui,!0);if(Ci in ft&&Jt in ct&&ft[Ci]!==ct[Jt]){const Di=oi(Ci,Jt,ui),un=$t(Ci,Jt,St[Di].geometry);delete ct[Ci],delete ft[Jt],ft[Ei(gi,St[un].geometry,!0)]=un,St[Di].geometry=null}else Ci in ft?$t(Ci,Jt,ui):Jt in ct?oi(Ci,Jt,ui):(Ht(Zt),ct[Ci]=bt-1,ft[Jt]=bt-1)}return St.filter(Zt=>Zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((yt,ct)=>yt.sortKey-ct.sortKey)}update(i,o,h,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,o,this.layers,h,p),this.icon.programConfigurations.updatePaintArrays(i,o,this.layers,h,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=_y(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,o){const h=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:p,y:v}of o)this.lineVertexArray.emplaceBack(p,v);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,o,h,p,v,w,R,Y,ee,de,_e,Te,Ae,Ie){const Fe=i.indexArray,Xe=i.layoutVertexArray,dt=i.globeExtVertexArray,yt=i.segments.prepareSegment(4*o.length,Xe,Fe,this.canOverlap?w.sortKey:void 0),ct=this.glyphOffsetArray.length,ft=yt.vertexLength,St=this.allowVerticalPlacement&&R===Cn.vertical?Math.PI/2:0,bt=w.text&&w.text.sections;for(let $t=0;$t<o.length;$t++){const{tl:oi,tr:Ei,bl:Zt,br:ai,tex:ui,pixelOffsetTL:gi,pixelOffsetBR:Ci,minFontScaleX:Jt,minFontScaleY:Di,glyphOffset:un,isSDF:Ui,sectionIndex:Ki}=o[$t],Ii=yt.vertexLength,gn=un[1];if(G0(Xe,ee.x,ee.y,oi.x,gn+oi.y,ui.x,ui.y,h,Ui,gi.x,gi.y,Jt,Di),G0(Xe,ee.x,ee.y,Ei.x,gn+Ei.y,ui.x+ui.w,ui.y,h,Ui,Ci.x,gi.y,Jt,Di),G0(Xe,ee.x,ee.y,Zt.x,gn+Zt.y,ui.x,ui.y+ui.h,h,Ui,gi.x,Ci.y,Jt,Di),G0(Xe,ee.x,ee.y,ai.x,gn+ai.y,ui.x+ui.w,ui.y+ui.h,h,Ui,Ci.x,Ci.y,Jt,Di),Y){const{x:qn,y:Hn,z:Gn}=Y.anchor,[xn,Lr,kn]=Y.up;V0(dt,qn,Hn,Gn,xn,Lr,kn),V0(dt,qn,Hn,Gn,xn,Lr,kn),V0(dt,qn,Hn,Gn,xn,Lr,kn),V0(dt,qn,Hn,Gn,xn,Lr,kn),$0(i.dynamicLayoutVertexArray,qn,Hn,Gn,St)}else $0(i.dynamicLayoutVertexArray,ee.x,ee.y,ee.z,St);Fe.emplaceBack(Ii,Ii+1,Ii+2),Fe.emplaceBack(Ii+1,Ii+2,Ii+3),yt.vertexLength+=4,yt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(un[0]),$t!==o.length-1&&Ki===o[$t+1].sectionIndex||i.programConfigurations.populatePaintArrays(Xe.length,w,w.index,{},Ae,Ie,bt&&bt[Ki])}const Ht=Y?Y.anchor:ee;i.placedSymbolArray.emplaceBack(Ht.x,Ht.y,Ht.z,ee.x,ee.y,ct,this.glyphOffsetArray.length-ct,ft,de,_e,ee.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],R,0,!1,0,Te,0)}_commitLayoutVertex(i,o,h,p,v,w,R){i.emplaceBack(o,h,p,v,w,Math.round(R.x),Math.round(R.y))}_addCollisionDebugVertices(i,o,h,p,v,w,R){const Y=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),ee=Y.vertexLength,de=R.tileAnchorX,_e=R.tileAnchorY;for(let Ae=0;Ae<4;Ae++)h.collisionVertexArray.emplaceBack(0,0,0,0);h.collisionVertexArrayExt.emplaceBack(o,-i.padding,-i.padding),h.collisionVertexArrayExt.emplaceBack(o,i.padding,-i.padding),h.collisionVertexArrayExt.emplaceBack(o,i.padding,i.padding),h.collisionVertexArrayExt.emplaceBack(o,-i.padding,i.padding),this._commitLayoutVertex(h.layoutVertexArray,p,v,w,de,_e,new U(i.x1,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,v,w,de,_e,new U(i.x2,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,v,w,de,_e,new U(i.x2,i.y2)),this._commitLayoutVertex(h.layoutVertexArray,p,v,w,de,_e,new U(i.x1,i.y2)),Y.vertexLength+=4;const Te=h.indexArray;Te.emplaceBack(ee,ee+1),Te.emplaceBack(ee+1,ee+2),Te.emplaceBack(ee+2,ee+3),Te.emplaceBack(ee+3,ee),Y.primitiveLength+=4}_addTextDebugCollisionBoxes(i,o,h,p,v,w){for(let R=p;R<v;R++){const Y=h.get(R),ee=this.getSymbolInstanceTextSize(i,w,o,R);this._addCollisionDebugVertices(Y,ee,this.textCollisionBox,Y.projectedAnchorX,Y.projectedAnchorY,Y.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(i,o,h,p,v,w){for(let R=p;R<v;R++){const Y=h.get(R),ee=this.getSymbolInstanceIconSize(i,o,w.placedIconSymbolIndex);this._addCollisionDebugVertices(Y,ee,this.iconCollisionBox,Y.projectedAnchorX,Y.projectedAnchorY,Y.projectedAnchorZ,w)}}generateCollisionDebugBuffers(i,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Kg(jr,Un.members,hl),this.iconCollisionBox=new Kg(jr,Un.members,hl);const h=Du(this.iconSizeData,i),p=Du(this.textSizeData,i);for(let v=0;v<this.symbolInstances.length;v++){const w=this.symbolInstances.get(v);this._addTextDebugCollisionBoxes(p,i,o,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(p,i,o,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(h,i,o,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(h,i,o,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(i,o,h,p){const v=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:p),w=Ql(this.textSizeData,i,v)/Ur;return this.tilePixelRatio*w}getSymbolInstanceIconSize(i,o,h){const p=this.icon.placedSymbolArray.get(h),v=Ql(this.iconSizeData,i,p);return this.tilePixelRatio*v}_commitDebugCollisionVertexUpdate(i,o,h){i.emplaceBack(o,-h,-h),i.emplaceBack(o,h,-h),i.emplaceBack(o,h,h),i.emplaceBack(o,-h,h)}_updateTextDebugCollisionBoxes(i,o,h,p,v,w){for(let R=p;R<v;R++){const Y=h.get(R),ee=this.getSymbolInstanceTextSize(i,w,o,R);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,ee,Y.padding)}}_updateIconDebugCollisionBoxes(i,o,h,p,v,w){for(let R=p;R<v;R++){const Y=h.get(R),ee=this.getSymbolInstanceIconSize(i,o,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,ee,Y.padding)}}updateCollisionDebugBuffers(i,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const h=Du(this.iconSizeData,i),p=Du(this.textSizeData,i);for(let v=0;v<this.symbolInstances.length;v++){const w=this.symbolInstances.get(v);this._updateTextDebugCollisionBoxes(p,i,o,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(p,i,o,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(h,i,o,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(h,i,o,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,o,h,p,v,w,R,Y,ee){const de={};if(o<h){const{x1:_e,y1:Te,x2:Ae,y2:Ie,padding:Fe,projectedAnchorX:Xe,projectedAnchorY:dt,projectedAnchorZ:yt,tileAnchorX:ct,tileAnchorY:ft,featureIndex:St}=i.get(o);de.textBox={x1:_e,y1:Te,x2:Ae,y2:Ie,padding:Fe,projectedAnchorX:Xe,projectedAnchorY:dt,projectedAnchorZ:yt,tileAnchorX:ct,tileAnchorY:ft},de.textFeatureIndex=St}if(p<v){const{x1:_e,y1:Te,x2:Ae,y2:Ie,padding:Fe,projectedAnchorX:Xe,projectedAnchorY:dt,projectedAnchorZ:yt,tileAnchorX:ct,tileAnchorY:ft,featureIndex:St}=i.get(p);de.verticalTextBox={x1:_e,y1:Te,x2:Ae,y2:Ie,padding:Fe,projectedAnchorX:Xe,projectedAnchorY:dt,projectedAnchorZ:yt,tileAnchorX:ct,tileAnchorY:ft},de.verticalTextFeatureIndex=St}if(w<R){const{x1:_e,y1:Te,x2:Ae,y2:Ie,padding:Fe,projectedAnchorX:Xe,projectedAnchorY:dt,projectedAnchorZ:yt,tileAnchorX:ct,tileAnchorY:ft,featureIndex:St}=i.get(w);de.iconBox={x1:_e,y1:Te,x2:Ae,y2:Ie,padding:Fe,projectedAnchorX:Xe,projectedAnchorY:dt,projectedAnchorZ:yt,tileAnchorX:ct,tileAnchorY:ft},de.iconFeatureIndex=St}if(Y<ee){const{x1:_e,y1:Te,x2:Ae,y2:Ie,padding:Fe,projectedAnchorX:Xe,projectedAnchorY:dt,projectedAnchorZ:yt,tileAnchorX:ct,tileAnchorY:ft,featureIndex:St}=i.get(Y);de.verticalIconBox={x1:_e,y1:Te,x2:Ae,y2:Ie,padding:Fe,projectedAnchorX:Xe,projectedAnchorY:dt,projectedAnchorZ:yt,tileAnchorX:ct,tileAnchorY:ft},de.verticalIconFeatureIndex=St}return de}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const h=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,o){const h=i.placedSymbolArray.get(o),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)i.indexArray.emplaceBack(v,v+1,v+2),i.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(i),h=Math.cos(i),p=[],v=[],w=[];for(let R=0;R<this.symbolInstances.length;++R){w.push(R);const Y=this.symbolInstances.get(R);p.push(0|Math.round(o*Y.tileAnchorX+h*Y.tileAnchorY)),v.push(Y.featureIndex)}return w.sort((R,Y)=>p[R]-p[Y]||v[Y]-v[R]),w}addToSortKeyRanges(i,o){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===o?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const h=this.symbolInstances.get(o);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:v,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:R,placedIconSymbolIndex:Y,verticalPlacedIconSymbolIndex:ee}=h;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),v>=0&&v!==p&&this.addIndicesForPlacedSymbol(this.text,v),w>=0&&w!==v&&w!==p&&this.addIndicesForPlacedSymbol(this.text,w),R>=0&&this.addIndicesForPlacedSymbol(this.text,R),Y>=0&&this.addIndicesForPlacedSymbol(this.icon,Y),ee>=0&&this.addIndicesForPlacedSymbol(this.icon,ee)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Bi($h,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),$h.MAX_GLYPHS=65535,$h.addDynamicAttributes=$0;const sb=new nn({"symbol-placement":new Rt(ni.layout_symbol["symbol-placement"]),"symbol-spacing":new Rt(ni.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Rt(ni.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yt(ni.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Rt(ni.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Rt(ni.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Rt(ni.layout_symbol["icon-ignore-placement"]),"icon-optional":new Rt(ni.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Rt(ni.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yt(ni.layout_symbol["icon-size"]),"icon-text-fit":new Rt(ni.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rt(ni.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yt(ni.layout_symbol["icon-image"]),"icon-rotate":new Yt(ni.layout_symbol["icon-rotate"]),"icon-padding":new Rt(ni.layout_symbol["icon-padding"]),"icon-keep-upright":new Rt(ni.layout_symbol["icon-keep-upright"]),"icon-offset":new Yt(ni.layout_symbol["icon-offset"]),"icon-anchor":new Yt(ni.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Rt(ni.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Rt(ni.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Rt(ni.layout_symbol["text-rotation-alignment"]),"text-field":new Yt(ni.layout_symbol["text-field"]),"text-font":new Yt(ni.layout_symbol["text-font"]),"text-size":new Yt(ni.layout_symbol["text-size"]),"text-max-width":new Yt(ni.layout_symbol["text-max-width"]),"text-line-height":new Yt(ni.layout_symbol["text-line-height"]),"text-letter-spacing":new Yt(ni.layout_symbol["text-letter-spacing"]),"text-justify":new Yt(ni.layout_symbol["text-justify"]),"text-radial-offset":new Yt(ni.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Rt(ni.layout_symbol["text-variable-anchor"]),"text-anchor":new Yt(ni.layout_symbol["text-anchor"]),"text-max-angle":new Rt(ni.layout_symbol["text-max-angle"]),"text-writing-mode":new Rt(ni.layout_symbol["text-writing-mode"]),"text-rotate":new Yt(ni.layout_symbol["text-rotate"]),"text-padding":new Rt(ni.layout_symbol["text-padding"]),"text-keep-upright":new Rt(ni.layout_symbol["text-keep-upright"]),"text-transform":new Yt(ni.layout_symbol["text-transform"]),"text-offset":new Yt(ni.layout_symbol["text-offset"]),"text-allow-overlap":new Rt(ni.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Rt(ni.layout_symbol["text-ignore-placement"]),"text-optional":new Rt(ni.layout_symbol["text-optional"])});var Jg={paint:new nn({"icon-opacity":new Yt(ni.paint_symbol["icon-opacity"]),"icon-color":new Yt(ni.paint_symbol["icon-color"]),"icon-halo-color":new Yt(ni.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yt(ni.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yt(ni.paint_symbol["icon-halo-blur"]),"icon-translate":new Rt(ni.paint_symbol["icon-translate"]),"icon-translate-anchor":new Rt(ni.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yt(ni.paint_symbol["text-opacity"]),"text-color":new Yt(ni.paint_symbol["text-color"],{runtimeType:Uo,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Yt(ni.paint_symbol["text-halo-color"]),"text-halo-width":new Yt(ni.paint_symbol["text-halo-width"]),"text-halo-blur":new Yt(ni.paint_symbol["text-halo-blur"]),"text-translate":new Rt(ni.paint_symbol["text-translate"]),"text-translate-anchor":new Rt(ni.paint_symbol["text-translate-anchor"])}),layout:sb};class yy{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:Ls,this.defaultValue=i}evaluate(i){if(i.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(i.formattedSection))return o.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bi(yy,"FormatSectionOverride",{omit:["defaultValue"]});class H0 extends aa{constructor(i){super(i,Jg)}recalculate(i,o){super.recalculate(i,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,o,h,p){const v=this.layout.get(i).evaluate(o,{},h,p),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||Mr(w.value)||!v?v:function(R,Y){return Y.replace(/{([^{}]+)}/g,(ee,de)=>de in R?String(R[de]):"")}(o.properties,v)}createBucket(i){return new $h(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of Jg.paint.overridableProperties){if(!H0.hasPaintOverride(this.layout,i))continue;const o=this.paint.get(i),h=new yy(o),p=new Ys(h,o.property.specification);let v=null;v=o.value.kind==="constant"||o.value.kind==="source"?new Co("source",p):new xs("composite",p,o.value.zoomStops,o.value._interpolationType),this.paint._values[i]=new di(o.property,v,o.parameters)}}_handleOverridablePaintPropertyUpdate(i,o,h){return!(!this.layout||o.isDataDriven()||h.isDataDriven())&&H0.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,o){const h=i.get("text-field"),p=Jg.paint.properties[o];let v=!1;const w=R=>{for(const Y of R)if(p.overrides&&p.overrides.hasOverride(Y))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Os)w(h.value.value.sections);else if(h.value.kind==="source"){const R=ee=>{v||(ee instanceof Il&&ys(ee.value)===ta?w(ee.value.sections):ee instanceof pr?w(ee.sections):ee.eachChild(R))},Y=h.value;Y._styleExpression&&R(Y._styleExpression.expression)}return v}getProgramConfiguration(i){return new Fh(this,i)}}var ob={paint:new nn({"background-color":new Rt(ni.paint_background["background-color"]),"background-pattern":new Rt(ni.paint_background["background-pattern"]),"background-opacity":new Rt(ni.paint_background["background-opacity"])})},ab={paint:new nn({"raster-opacity":new Rt(ni.paint_raster["raster-opacity"]),"raster-hue-rotate":new Rt(ni.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Rt(ni.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Rt(ni.paint_raster["raster-brightness-max"]),"raster-saturation":new Rt(ni.paint_raster["raster-saturation"]),"raster-contrast":new Rt(ni.paint_raster["raster-contrast"]),"raster-resampling":new Rt(ni.paint_raster["raster-resampling"]),"raster-fade-duration":new Rt(ni.paint_raster["raster-fade-duration"])})};class lb extends aa{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var cb={paint:new nn({"sky-type":new Rt(ni.paint_sky["sky-type"]),"sky-atmosphere-sun":new Rt(ni.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Rt(ni.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Rt(ni.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Rt(ni.paint_sky["sky-gradient-radius"]),"sky-gradient":new Hi(ni.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Rt(ni.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Rt(ni.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Rt(ni.paint_sky["sky-opacity"])})};function Qg(s,i,o){const h=[0,0,1],p=og([]);return y_(p,p,o?-N(s)+Math.PI:N(s)),__(p,p,-N(i)),f_(h,h,p),Zo(h,h)}const hb={circle:class extends aa{constructor(s){super(s,Bx)}createBucket(s){return new xu(s)}queryRadius(s){const i=s;return bu("circle-radius",this,i)+bu("circle-stroke-width",this,i)+d0(this.paint.get("circle-translate"))}queryIntersectsFeature(s,i,o,h,p,v,w,R){const Y=qo(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),ee=this.paint.get("circle-radius").evaluate(i,o)+this.paint.get("circle-stroke-width").evaluate(i,o);return v_(s,h,v,w,R,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",Y,ee)}getProgramIds(){return["circle"]}getProgramConfiguration(s){return new Fh(this,s)}},heatmap:class extends aa{createBucket(s){return new b_(s)}constructor(s){super(s,Gx),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Np({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(s){return bu("heatmap-radius",this,s)}queryIntersectsFeature(s,i,o,h,p,v,w,R){const Y=this.paint.get("heatmap-radius").evaluate(i,o);return v_(s,h,v,w,R,!0,!0,new U(0,0),Y)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(s){return new Fh(this,s)}},hillshade:class extends aa{constructor(s){super(s,Vx)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends aa{constructor(s){super(s,r2)}getProgramIds(){const s=this.paint.get("fill-pattern"),i=s&&s.constantOr(1),o=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(s){return new Fh(this,s)}recalculate(s,i){super.recalculate(s,i);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new y0(s)}queryRadius(){return d0(this.paint.get("fill-translate"))}queryIntersectsFeature(s,i,o,h,p,v){return!s.queryGeometry.isAboveHorizon&&h_(kc(s.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}},"fill-extrusion":class extends aa{constructor(s){super(s,z_)}createBucket(s){return new Hp(s)}queryRadius(){return d0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(s){return new Fh(this,s)}queryIntersectsFeature(s,i,o,h,p,v,w,R,Y){const ee=qo(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),de=this.paint.get("fill-extrusion-height").evaluate(i,o),_e=this.paint.get("fill-extrusion-base").evaluate(i,o),Te=[0,0],Ae=R&&v.elevation,Ie=v.elevation?v.elevation.exaggeration():1,Fe=s.tile.getBucket(this);if(Ae&&Fe instanceof Hp){const ft=Fe.centroidVertexArray,St=Y+1;St<ft.length&&(Te[0]=ft.geta_centroid_pos0(St),Te[1]=ft.geta_centroid_pos1(St))}if(Te[0]===0&&Te[1]===1)return!1;v.projection.name==="globe"&&(h=wg([h],[new U(0,0),new U(cn,cn)],s.tileID.canonical).map(ft=>ft.polygon).flat());const Xe=Ae?R:null,[dt,yt]=function(ft,St,bt,Ht,$t,oi,Ei,Zt,ai,ui,gi){return ft.projection.name==="globe"?function(Ci,Jt,Di,un,Ui,Ki,Ii,gn,qn,Hn,Gn){const xn=[],Lr=[],kn=Ci.projection.upVectorScale(Gn,Ci.center.lat,Ci.worldSize).metersToTile,Zn=[0,0,0,1],Gr=[0,0,0,1],es=(ts,rs,Ps,ko)=>{ts[0]=rs,ts[1]=Ps,ts[2]=ko,ts[3]=1},Kr=bg();Di>0&&(Di+=Kr),un+=Kr;for(const ts of Jt){const rs=[],Ps=[];for(const ko of ts){const Or=ko.x+Ui.x,eo=ko.y+Ui.y,qs=Ci.projection.projectTilePoint(Or,eo,Gn),_r=Ci.projection.upVector(Gn,ko.x,ko.y);let _s=Di,co=un;if(Ii){const Vr=Tg(Or,eo,Di,un,Ii,gn,qn,Hn);_s+=Vr.base,co+=Vr.top}Di!==0?es(Zn,qs.x+_r[0]*kn*_s,qs.y+_r[1]*kn*_s,qs.z+_r[2]*kn*_s):es(Zn,qs.x,qs.y,qs.z),es(Gr,qs.x+_r[0]*kn*co,qs.y+_r[1]*kn*co,qs.z+_r[2]*kn*co),bs(Zn,Zn,Ki),bs(Gr,Gr,Ki),rs.push(new Pu(Zn[0],Zn[1],Zn[2])),Ps.push(new Pu(Gr[0],Gr[1],Gr[2]))}xn.push(rs),Lr.push(Ps)}return[xn,Lr]}(ft,St,bt,Ht,$t,oi,Ei,Zt,ai,ui,gi):Ei?function(Ci,Jt,Di,un,Ui,Ki,Ii,gn,qn){const Hn=[],Gn=[],xn=[0,0,0,1];for(const Lr of Ci){const kn=[],Zn=[];for(const Gr of Lr){const es=Gr.x+un.x,Kr=Gr.y+un.y,ts=Tg(es,Kr,Jt,Di,Ki,Ii,gn,qn);xn[0]=es,xn[1]=Kr,xn[2]=ts.base,xn[3]=1,jh(xn,xn,Ui),xn[3]=Math.max(xn[3],1e-5);const rs=new Pu(xn[0]/xn[3],xn[1]/xn[3],xn[2]/xn[3]);xn[0]=es,xn[1]=Kr,xn[2]=ts.top,xn[3]=1,jh(xn,xn,Ui),xn[3]=Math.max(xn[3],1e-5);const Ps=new Pu(xn[0]/xn[3],xn[1]/xn[3],xn[2]/xn[3]);kn.push(rs),Zn.push(Ps)}Hn.push(kn),Gn.push(Zn)}return[Hn,Gn]}(St,bt,Ht,$t,oi,Ei,Zt,ai,ui):function(Ci,Jt,Di,un,Ui){const Ki=[],Ii=[],gn=Ui[8]*Jt,qn=Ui[9]*Jt,Hn=Ui[10]*Jt,Gn=Ui[11]*Jt,xn=Ui[8]*Di,Lr=Ui[9]*Di,kn=Ui[10]*Di,Zn=Ui[11]*Di;for(const Gr of Ci){const es=[],Kr=[];for(const ts of Gr){const rs=ts.x+un.x,Ps=ts.y+un.y,ko=Ui[0]*rs+Ui[4]*Ps+Ui[12],Or=Ui[1]*rs+Ui[5]*Ps+Ui[13],eo=Ui[2]*rs+Ui[6]*Ps+Ui[14],qs=Ui[3]*rs+Ui[7]*Ps+Ui[15],_r=ko+gn,_s=Or+qn,co=eo+Hn,Vr=Math.max(qs+Gn,1e-5),Ns=ko+xn,ha=Or+Lr,Po=eo+kn,Do=Math.max(qs+Zn,1e-5);es.push(new Pu(_r/Vr,_s/Vr,co/Vr)),Kr.push(new Pu(Ns/Do,ha/Do,Po/Do))}Ki.push(es),Ii.push(Kr)}return[Ki,Ii]}(St,bt,Ht,$t,oi)}(v,h,_e,de,ee,w,Xe,Te,Ie,v.center.lat,s.tileID.canonical),ct=s.queryGeometry;return function(ft,St,bt){let Ht=1/0;h_(bt,St)&&(Ht=C0(bt,St[0]));for(let $t=0;$t<St.length;$t++){const oi=St[$t],Ei=ft[$t];for(let Zt=0;Zt<oi.length-1;Zt++){const ai=oi[Zt],ui=[ai,oi[Zt+1],Ei[Zt+1],Ei[Zt],ai];c0(bt,ui)&&(Ht=Math.min(Ht,C0(bt,ui)))}}return Ht!==1/0&&Ht}(dt,yt,ct.isPointQuery()?ct.screenBounds:ct.screenGeometry)}},line:class extends aa{constructor(s){super(s,j_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof To,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,i){super.recalculate(s,i),this.paint._values["line-floorwidth"]=U_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new M0(s)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(s){return new Fh(this,s)}queryRadius(s){const i=s,o=G_(bu("line-width",this,i),bu("line-gap-width",this,i)),h=bu("line-offset",this,i);return o/2+Math.abs(h)+d0(this.paint.get("line-translate"))}queryIntersectsFeature(s,i,o,h,p,v){if(s.queryGeometry.isAboveHorizon)return!1;const w=kc(s.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),R=s.pixelToTileUnitsFactor/2*G_(this.paint.get("line-width").evaluate(i,o),this.paint.get("line-gap-width").evaluate(i,o)),Y=this.paint.get("line-offset").evaluate(i,o);return Y&&(h=function(ee,de){const _e=[],Te=new U(0,0);for(let Ae=0;Ae<ee.length;Ae++){const Ie=ee[Ae],Fe=[];for(let Xe=0;Xe<Ie.length;Xe++){const dt=Ie[Xe-1],yt=Ie[Xe],ct=Ie[Xe+1],ft=Xe===0?Te:yt.sub(dt)._unit()._perp(),St=Xe===Ie.length-1?Te:ct.sub(yt)._unit()._perp(),bt=ft._add(St)._unit();bt._mult(1/(bt.x*St.x+bt.y*St.y)),Fe.push(bt._mult(de)._add(yt))}_e.push(Fe)}return _e}(h,Y*s.pixelToTileUnitsFactor)),function(ee,de,_e){for(let Te=0;Te<de.length;Te++){const Ae=de[Te];if(ee.length>=3){for(let Ie=0;Ie<Ae.length;Ie++)if(Sd(ee,Ae[Ie]))return!0}if(qm(ee,Ae,_e))return!0}return!1}(w,h,R)}isTileClipped(){return!0}},symbol:H0,background:class extends aa{constructor(s){super(s,ob)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends aa{constructor(s){super(s,ab)}getProgramIds(){return["raster"]}},sky:class extends aa{constructor(s){super(s,cb),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="sky-gradient"?this._updateColorRamp():s!=="sky-atmosphere-sun"&&s!=="sky-atmosphere-halo-color"&&s!=="sky-atmosphere-color"&&s!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Np({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(s){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=s.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(s,i){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),p=!h,v=s.style.light,w=v.properties.get("position");return p&&v.properties.get("anchor")==="viewport"&&le("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?Qg(w.azimuthal,90-w.polar,i):Qg(h[0],90-h[1],i)}const o=this.paint.get("sky-gradient-center");return Qg(o[0],90-o[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(s){this._skyboxInvalidated=!1,this._lightPosition=s.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const s=this.paint.get("sky-type");return s==="atmosphere"?["skyboxCapture","skybox"]:s==="gradient"?["skyboxGradient"]:null}}};class of{constructor(i,o,h,p){this.context=i,this.format=h,this.texture=i.gl.createTexture(),this.update(o,p)}update(i,o,h){const{width:p,height:v}=i,{context:w}=this,{gl:R}=w,{HTMLImageElement:Y,HTMLCanvasElement:ee,HTMLVideoElement:de,ImageData:_e,ImageBitmap:Te}=T;if(R.bindTexture(R.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!o||o.premultiply!==!1)),h||this.size&&this.size[0]===p&&this.size[1]===v){const{x:Ae,y:Ie}=h||{x:0,y:0};i instanceof Y||i instanceof ee||i instanceof de||i instanceof _e||Te&&i instanceof Te?R.texSubImage2D(R.TEXTURE_2D,0,Ae,Ie,R.RGBA,R.UNSIGNED_BYTE,i):R.texSubImage2D(R.TEXTURE_2D,0,Ae,Ie,p,v,R.RGBA,R.UNSIGNED_BYTE,i.data)}else this.size=[p,v],i instanceof Y||i instanceof ee||i instanceof de||i instanceof _e||Te&&i instanceof Te?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,i):R.texImage2D(R.TEXTURE_2D,0,this.format,p,v,0,this.format,R.UNSIGNED_BYTE,i.data);this.useMipmap=Boolean(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&R.generateMipmap(R.TEXTURE_2D)}bind(i,o){const{context:h}=this,{gl:p}=h;p.bindTexture(p.TEXTURE_2D,this.texture),i!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?i===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:i),this.filter=i),o!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,o),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class g{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class A{constructor(){this.tasks={},this.taskQueue=[],ue(["process"],this),this.invoker=new g(this.process),this.nextId=0}add(i,o){const h=this.nextId++,p=function({type:v,isSymbolTile:w,zoom:R}){return R=R||0,v==="message"?0:v!=="maybePrepare"||w?v!=="parseTile"||w?v==="parseTile"&&w?300-R:v==="maybePrepare"&&w?400-R:500:200-R:100-R}(o);if(p===0){Le();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[h]={fn:i,metadata:o,priority:p,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){Le();try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const o=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let i=null,o=1/0;for(let p=0;p<this.taskQueue.length;p++){const v=this.tasks[this.taskQueue[p]];v.priority<o&&(o=v.priority,i=p)}if(i===null)return null;const h=this.taskQueue[i];return this.taskQueue.splice(i,1),h}remove(){this.invoker.remove()}}class re{constructor(i){this._stringToNumber={},this._numberToString=[];for(let o=0;o<i.length;o++){const h=i[o];this._stringToNumber[h]=o,this._numberToString[o]=h}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const Ce=["tile","layer","source","sourceLayer","state"];class Ge{constructor(i,o,h,p,v){this.type="Feature",this._vectorTileFeature=i,this._z=o,this._x=h,this._y=p,this.properties=i.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const o of Ce)this[o]!==void 0&&(i[o]=this[o]);return i}}const Je=32,_t=33,At=new Uint16Array(8184);for(let s=0;s<2046;s++){let i=s+2,o=0,h=0,p=0,v=0,w=0,R=0;for(1&i?p=v=w=Je:o=h=R=Je;(i>>=1)>1;){const ee=o+p>>1,de=h+v>>1;1&i?(p=o,v=h,o=w,h=R):(o=p,h=v,p=w,v=R),w=ee,R=de}const Y=4*s;At[Y+0]=o,At[Y+1]=h,At[Y+2]=p,At[Y+3]=v}const zt=new Uint16Array(2178),mi=new Uint8Array(1089),xi=new Uint16Array(1089);function Ai(s){return s===0?-.03125:s===32?.03125:0}var Yi=Vi([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const dn={type:2,extent:cn,loadGeometry:()=>[[new U(0,0),new U(8193,0),new U(8193,8193),new U(0,8193),new U(0,0)]]};class An{constructor(i,o,h,p,v){this.tileID=i,this.uid=fe(),this.uses=0,this.tileSize=o,this.tileZoom=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=v,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(i){const o=i+this.timeAdded;o<Qi.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Rd(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,o,h){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(p,v){const w={};if(!v)return w;for(const R of p){const Y=R.layerIds.map(ee=>v.getLayer(ee)).filter(Boolean);if(Y.length!==0){R.layers=Y,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(ee=>Y.filter(de=>de.id===ee)[0]));for(const ee of Y)w[ee.id]=R}}return w}(i.buckets,o.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const v=this.buckets[p];if(v instanceof $h){if(this.hasSymbolBuckets=!0,!h)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const v=this.buckets[p];if(v instanceof $h&&v.hasRTLText){this.hasRTLText=!0,Ft.isLoading()||Ft.isLoaded()||kt()!=="deferred"||Wt();break}}this.queryPadding=0;for(const p in this.buckets){const v=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(p).queryRadius(v))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new Rm}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const h in this.buckets){const p=this.buckets[h];p.uploadPending()&&p.upload(i)}const o=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new of(i,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new of(i,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new of(i,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,o,h,p,v,w,R,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:R,transform:w,params:v,tileTransform:this.tileTransform},i,o,h):{}}querySourceFeatures(i,o){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const p=h.loadVTLayers(),v=o?o.sourceLayer:"",w=p._geojsonTileLayer||p[v];if(!w)return;const R=ns(o&&o.filter),{z:Y,x:ee,y:de}=this.tileID.canonical,_e={z:Y,x:ee,y:de};for(let Te=0;Te<w.length;Te++){const Ae=w.feature(Te);if(R.needGeometry){const Xe=Ac(Ae,!0);if(!R.filter(new Dt(this.tileID.overscaledZ),Xe,this.tileID.canonical))continue}else if(!R.filter(new Dt(this.tileID.overscaledZ),Ae))continue;const Ie=h.getId(Ae,v),Fe=new Ge(Ae,Y,ee,de,Ie);Fe.tile=_e,i.push(Fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const o=this.expirationTime;if(i.cacheControl){const h=De(i.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const h=Date.now();let p=!1;if(this.expirationTime>h)p=!1;else if(o)if(this.expirationTime<o)p=!0;else{const v=this.expirationTime-o;v?this.expirationTime=h+Math.max(v,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!o)return;const h=this.latestFeatureIndex.loadVTLayers(),p=o.style.listImages();for(const v in this.buckets){if(!o.style.hasLayer(v))continue;const w=this.buckets[v],R=w.layers[0].sourceLayer||"_geojsonTileLayer",Y=h[R],ee=i[R];if(!Y||!ee||Object.keys(ee).length===0)continue;if(w.update(ee,Y,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof M0||w instanceof y0){const _e=o.style._getSourceCache(w.layers[0].source);o._terrain&&o._terrain.enabled&&_e&&w.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(_e.id,this.tileID)}const de=o&&o.style&&o.style.getLayer(v);de&&(this.queryPadding=Math.max(this.queryPadding,de.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Qi.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=Qi.now()+i}setTexture(i,o){const h=o.context,p=h.gl;this.texture=this.texture||o.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new of(h,i,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),h.extTextureFilterAnisotropic&&p.texParameterf(p.TEXTURE_2D,h.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,h.extTextureFilterAnisotropicMax))}setDependencies(i,o){const h={};for(const p of o)h[p]=!0;this.dependencies[i]=h}hasDependency(i,o){for(const h of i){const p=this.dependencies[h];if(p){for(const v of o)if(p[v])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const h=ql(dn,this.tileID.canonical,this.tileTransform)[0],p=new hr,v=new eh;for(let w=0;w<h.length;w++){const{x:R,y:Y}=h[w];p.emplaceBack(R,Y),v.emplaceBack(w)}v.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(v),this._tileDebugBuffer=i.createVertexBuffer(p,Kp.members),this._tileDebugSegments=Cs.simpleSegment(0,0,p.length,v.length)}_makeTileBoundsBuffers(i,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const h=ql(dn,this.tileID.canonical,this.tileTransform)[0];let p,v;if(this.isRaster){const w=function(R,Y){const ee=Rd(R,Y),de=Math.pow(2,R.z);for(let Xe=0;Xe<_t;Xe++)for(let dt=0;dt<_t;dt++){const yt=la((R.x+(dt+Ai(dt))/Je)/de),ct=_o((R.y+(Xe+Ai(Xe))/Je)/de),ft=Y.project(yt,ct),St=Xe*_t+dt;zt[2*St+0]=Math.round((ft.x*ee.scale-ee.x)*cn),zt[2*St+1]=Math.round((ft.y*ee.scale-ee.y)*cn)}mi.fill(0),xi.fill(0);for(let Xe=2045;Xe>=0;Xe--){const dt=4*Xe,yt=At[dt+0],ct=At[dt+1],ft=At[dt+2],St=At[dt+3],bt=yt+ft>>1,Ht=ct+St>>1,$t=bt+Ht-ct,oi=Ht+yt-bt,Ei=ct*_t+yt,Zt=St*_t+ft,ai=Ht*_t+bt,ui=Math.hypot((zt[2*Ei+0]+zt[2*Zt+0])/2-zt[2*ai+0],(zt[2*Ei+1]+zt[2*Zt+1])/2-zt[2*ai+1])>=16;if(mi[ai]=mi[ai]||(ui?1:0),Xe<1022){const gi=(ct+oi>>1)*_t+(yt+$t>>1),Ci=(St+oi>>1)*_t+(ft+$t>>1);mi[ai]=mi[ai]||mi[gi]||mi[Ci]}}const _e=new br,Te=new ao;let Ae=0;function Ie(Xe,dt){const yt=dt*_t+Xe;return xi[yt]===0&&(_e.emplaceBack(zt[2*yt+0],zt[2*yt+1],Xe*cn/Je,dt*cn/Je),xi[yt]=++Ae),xi[yt]-1}function Fe(Xe,dt,yt,ct,ft,St){const bt=Xe+yt>>1,Ht=dt+ct>>1;if(Math.abs(Xe-ft)+Math.abs(dt-St)>1&&mi[Ht*_t+bt])Fe(ft,St,Xe,dt,bt,Ht),Fe(yt,ct,ft,St,bt,Ht);else{const $t=Ie(Xe,dt),oi=Ie(yt,ct),Ei=Ie(ft,St);Te.emplaceBack($t,oi,Ei)}}return Fe(0,0,Je,Je,Je,0),Fe(Je,Je,0,0,0,Je),{vertices:_e,indices:Te}}(this.tileID.canonical,o);p=w.vertices,v=w.indices}else{p=new br,v=new ao;for(const{x:R,y:Y}of h)p.emplaceBack(R,Y,0,0);const w=Fp.exports(p.int16,void 0,4);for(let R=0;R<w.length;R+=3)v.emplaceBack(w[R],w[R+1],w[R+2])}this._tileBoundsBuffer=i.createVertexBuffer(p,Yi.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(v),this._tileBoundsSegments=Cs.simpleSegment(0,0,p.length,v.length)}_makeGlobeTileDebugBuffers(i,o){const h=o.projection;if(!h||h.name!=="globe"||o.freezeTileCoverage)return;const p=this.tileID.canonical,v=ef(hy(p,o)),w=Od(o.zoom);let R;w>0&&(R=u0(new Float64Array(16),o.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,p,o,v,R,w),this._makeGlobeTileDebugTextBuffer(i,p,o,v,R,w)}_globePoint(i,o,h,p,v,w,R){let Y=Qp(i,o,h);if(w){const ee=1<<h.z,de=Yl(p.center.lng),_e=Ya(p.center.lat),Te=(h.x+.5)/ee-de;let Ae=0;Te>.5?Ae=-1:Te<-.5&&(Ae=1);let Ie=(i/cn+h.x)/ee+Ae,Fe=(o/cn+h.y)/ee;Ie=(Ie-de)*p._pixelsPerMercatorPixel+de,Fe=(Fe-_e)*p._pixelsPerMercatorPixel+_e;const Xe=[Ie*p.worldSize,Fe*p.worldSize,0];bs(Xe,Xe,w),Y=Ld(Y,Xe,R)}return bs(Y,Y,v)}_makeGlobeTileDebugBorderBuffer(i,o,h,p,v,w){const R=new hr,Y=new eh,ee=new Ar,de=(Te,Ae,Ie,Fe,Xe)=>{const dt=(Ie-Te)/(Xe-1),yt=(Fe-Ae)/(Xe-1),ct=R.length;for(let ft=0;ft<Xe;ft++){const St=Te+ft*dt,bt=Ae+ft*yt;R.emplaceBack(St,bt);const Ht=this._globePoint(St,bt,o,h,p,v,w);ee.emplaceBack(Ht[0],Ht[1],Ht[2]),Y.emplaceBack(ct+ft)}},_e=cn;de(0,0,_e,0,16),de(_e,0,_e,_e,16),de(_e,_e,0,_e,16),de(0,_e,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(Y),this._tileDebugBuffer=i.createVertexBuffer(R,Kp.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(ee,Ng.members),this._tileDebugSegments=Cs.simpleSegment(0,0,R.length,Y.length)}_makeGlobeTileDebugTextBuffer(i,o,h,p,v,w){const R=new hr,Y=new ao,ee=new Ar,de=25;Y.reserve(32),R.reserve(de),ee.reserve(de);const _e=(Te,Ae)=>de*Te+Ae;for(let Te=0;Te<de;Te++){const Ae=2048*Te;for(let Ie=0;Ie<de;Ie++){const Fe=2048*Ie;R.emplaceBack(Fe,Ae);const Xe=this._globePoint(Fe,Ae,o,h,p,v,w);ee.emplaceBack(Xe[0],Xe[1],Xe[2])}}for(let Te=0;Te<4;Te++)for(let Ae=0;Ae<4;Ae++){const Ie=_e(Te,Ae),Fe=_e(Te,Ae+1),Xe=_e(Te+1,Ae),dt=_e(Te+1,Ae+1);Y.emplaceBack(Ie,Fe,Xe),Y.emplaceBack(Xe,Fe,dt)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(Y),this._tileDebugTextBuffer=i.createVertexBuffer(R,Kp.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(ee,Ng.members),this._tileDebugTextSegments=Cs.simpleSegment(0,0,de,32)}}class Qn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,o,h){const p=String(o);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][p]=this.stateChanges[i][p]||{},q(this.stateChanges[i][p],h),this.deletedStates[i]===null){this.deletedStates[i]={};for(const v in this.state[i])v!==p&&(this.deletedStates[i][v]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][p]===null){this.deletedStates[i][p]={};for(const v in this.state[i][p])h[v]||(this.deletedStates[i][p][v]=null)}else for(const v in h)this.deletedStates[i]&&this.deletedStates[i][p]&&this.deletedStates[i][p][v]===null&&delete this.deletedStates[i][p][v]}removeFeatureState(i,o,h){if(this.deletedStates[i]===null)return;const p=String(o);if(this.deletedStates[i]=this.deletedStates[i]||{},h&&o!==void 0)this.deletedStates[i][p]!==null&&(this.deletedStates[i][p]=this.deletedStates[i][p]||{},this.deletedStates[i][p][h]=null);else if(o!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][p])for(h in this.deletedStates[i][p]={},this.stateChanges[i][p])this.deletedStates[i][p][h]=null;else this.deletedStates[i][p]=null;else this.deletedStates[i]=null}getState(i,o){const h=String(o),p=q({},(this.state[i]||{})[h],(this.stateChanges[i]||{})[h]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const v=this.deletedStates[i][o];if(v===null)return{};for(const w in v)delete p[w]}return p}initializeTileState(i,o){i.setFeatureState(this.state,o)}coalesceChanges(i,o){const h={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const v={};for(const w in this.stateChanges[p])this.state[p][w]||(this.state[p][w]={}),q(this.state[p][w],this.stateChanges[p][w]),v[w]=this.state[p][w];h[p]=v}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const v={};if(this.deletedStates[p]===null)for(const w in this.state[p])v[w]={},this.state[p][w]={};else for(const w in this.deletedStates[p]){if(this.deletedStates[p][w]===null)this.state[p][w]={};else for(const R of Object.keys(this.deletedStates[p][w]))delete this.state[p][w][R];v[w]=this.state[p][w]}h[p]=h[p]||{},q(h[p],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const p in i)i[p].setFeatureState(h,o)}}class In{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,o){const h=this.toIdx(i,o);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(i,o){return this.leaves[this.toIdx(i,o)]}toIdx(i,o){return o*this.size+i}}function or(s,i,o,h){let p=0,v=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(h[w])<1e-15){if(o[w]<s[w]||o[w]>i[w])return null}else{const R=1/h[w];let Y=(s[w]-o[w])*R,ee=(i[w]-o[w])*R;if(Y>ee){const de=Y;Y=ee,ee=de}if(Y>p&&(p=Y),ee<v&&(v=ee),p>v)return null}return p}function gr(s,i,o,h,p,v,w,R,Y,ee,de){const _e=h-s,Te=p-i,Ae=v-o,Ie=w-s,Fe=R-i,Xe=Y-o,dt=de[1]*Xe-de[2]*Fe,yt=de[2]*Ie-de[0]*Xe,ct=de[0]*Fe-de[1]*Ie,ft=_e*dt+Te*yt+Ae*ct;if(Math.abs(ft)<1e-15)return null;const St=1/ft,bt=ee[0]-s,Ht=ee[1]-i,$t=ee[2]-o,oi=(bt*dt+Ht*yt+$t*ct)*St;if(oi<0||oi>1)return null;const Ei=Ht*Ae-$t*Te,Zt=$t*_e-bt*Ae,ai=bt*Te-Ht*_e,ui=(de[0]*Ei+de[1]*Zt+de[2]*ai)*St;return ui<0||oi+ui>1?null:(Ie*Ei+Fe*Zt+Xe*ai)*St}function Ca(s,i,o){return(s-i)/(o-i)}function Qo(s,i,o,h,p,v,w,R,Y){const ee=1<<o,de=v-h,_e=w-p,Te=(s+1)/ee*de+h,Ae=(i+0)/ee*_e+p,Ie=(i+1)/ee*_e+p;R[0]=(s+0)/ee*de+h,R[1]=Ae,Y[0]=Te,Y[1]=Ie}class Ma{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(v){const w=Math.ceil(Math.log2(v.dim/8)),R=[];let Y=Math.ceil(Math.pow(2,w));const ee=1/Y,de=(Ae,Ie,Fe,Xe,dt)=>{const yt=Xe?1:0,ct=(Ae+1)*Fe-yt,ft=Ie*Fe,St=(Ie+1)*Fe-yt;dt[0]=Ae*Fe,dt[1]=ft,dt[2]=ct,dt[3]=St};let _e=new In(Y);const Te=[];for(let Ae=0;Ae<Y*Y;Ae++){de(Ae%Y,Math.floor(Ae/Y),ee,!1,Te);const Ie=vo(Te[0],Te[1],v),Fe=vo(Te[2],Te[1],v),Xe=vo(Te[2],Te[3],v),dt=vo(Te[0],Te[3],v);_e.minimums.push(Math.min(Ie,Fe,Xe,dt)),_e.maximums.push(Math.max(Ie,Fe,Xe,dt)),_e.leaves.push(1)}for(R.push(_e),Y/=2;Y>=1;Y/=2){const Ae=R[R.length-1];_e=new In(Y);for(let Ie=0;Ie<Y*Y;Ie++){de(Ie%Y,Math.floor(Ie/Y),2,!0,Te);const Fe=Ae.getElevation(Te[0],Te[1]),Xe=Ae.getElevation(Te[2],Te[1]),dt=Ae.getElevation(Te[2],Te[3]),yt=Ae.getElevation(Te[0],Te[3]),ct=Ae.isLeaf(Te[0],Te[1]),ft=Ae.isLeaf(Te[2],Te[1]),St=Ae.isLeaf(Te[2],Te[3]),bt=Ae.isLeaf(Te[0],Te[3]),Ht=Math.min(Fe.min,Xe.min,dt.min,yt.min),$t=Math.max(Fe.max,Xe.max,dt.max,yt.max),oi=ct&&ft&&St&&bt;_e.maximums.push($t),_e.minimums.push(Ht),_e.leaves.push($t-Ht<=5&&oi?1:0)}R.push(_e)}return R}(this.dem),h=o.length-1,p=o[h];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(o,0,0,h,0)}raycastRoot(i,o,h,p,v,w,R=1){return or([i,o,-100],[h,p,this.maximums[0]*R],v,w)}raycast(i,o,h,p,v,w,R=1){if(!this.nodeCount)return null;const Y=this.raycastRoot(i,o,h,p,v,w,R);if(Y==null)return null;const ee=[],de=[],_e=[],Te=[],Ae=[{idx:0,t:Y,nodex:0,nodey:0,depth:0}];for(;Ae.length>0;){const{idx:Ie,t:Fe,nodex:Xe,nodey:dt,depth:yt}=Ae.pop();if(this.leaves[Ie]){Qo(Xe,dt,yt,i,o,h,p,_e,Te);const ft=1<<yt,St=(Xe+0)/ft,bt=(Xe+1)/ft,Ht=(dt+0)/ft,$t=(dt+1)/ft,oi=vo(St,Ht,this.dem)*R,Ei=vo(bt,Ht,this.dem)*R,Zt=vo(bt,$t,this.dem)*R,ai=vo(St,$t,this.dem)*R,ui=gr(_e[0],_e[1],oi,Te[0],_e[1],Ei,Te[0],Te[1],Zt,v,w),gi=gr(Te[0],Te[1],Zt,_e[0],Te[1],ai,_e[0],_e[1],oi,v,w),Ci=Math.min(ui!==null?ui:Number.MAX_VALUE,gi!==null?gi:Number.MAX_VALUE);if(Ci!==Number.MAX_VALUE)return Ci;{const Jt=Cu([],v,w,Fe);if(zs(oi,Ei,ai,Zt,Ca(Jt[0],_e[0],Te[0]),Ca(Jt[1],_e[1],Te[1]))>=Jt[2])return Fe}continue}let ct=0;for(let ft=0;ft<this._siblingOffset.length;ft++){Qo((Xe<<1)+this._siblingOffset[ft][0],(dt<<1)+this._siblingOffset[ft][1],yt+1,i,o,h,p,_e,Te),_e[2]=-100,Te[2]=this.maximums[this.childOffsets[Ie]+ft]*R;const St=or(_e,Te,v,w);if(St!=null){const bt=St;ee[ft]=bt;let Ht=!1;for(let $t=0;$t<ct&&!Ht;$t++)bt>=ee[de[$t]]&&(de.splice($t,0,ft),Ht=!0);Ht||(de[ct]=ft),ct++}}for(let ft=0;ft<ct;ft++){const St=de[ft];Ae.push({idx:this.childOffsets[Ie]+St,t:ee[St],nodex:(Xe<<1)+this._siblingOffset[St][0],nodey:(dt<<1)+this._siblingOffset[St][1],depth:yt+1})}}return null}_addNode(i,o,h){return this.minimums.push(i),this.maximums.push(o),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(i,o,h,p,v){if(i[p].isLeaf(o,h)===1)return;this.childOffsets[v]||(this.childOffsets[v]=this.nodeCount);const w=p-1,R=i[w];let Y=0,ee=0;for(let de=0;de<this._siblingOffset.length;de++){const _e=2*o+this._siblingOffset[de][0],Te=2*h+this._siblingOffset[de][1],Ae=R.getElevation(_e,Te),Ie=R.isLeaf(_e,Te),Fe=this._addNode(Ae.min,Ae.max,Ie);Ie&&(Y|=1<<de),ee||(ee=Fe)}for(let de=0;de<this._siblingOffset.length;de++)Y&1<<de||this._construct(i,2*o+this._siblingOffset[de][0],2*h+this._siblingOffset[de][1],w,ee+de)}}function zs(s,i,o,h,p,v){return Pn(Pn(s,o,v),Pn(i,h,v),p)}function vo(s,i,o){const h=o.dim,p=y(s*h-.5,0,h-1),v=y(i*h-.5,0,h-1),w=Math.floor(p),R=Math.floor(v),Y=Math.min(w+1,h-1),ee=Math.min(R+1,h-1);return zs(o.get(w,R),o.get(Y,R),o.get(w,ee),o.get(Y,ee),p-w,v-R)}const Oc={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class af{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,o,h,p=!1,v=!1){if(this.uid=i,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return le(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const w=this.dim=o.height-2,R=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.encoding=h||"mapbox",this.borderReady=p,!p){for(let Y=0;Y<w;Y++)R[this._idx(-1,Y)]=R[this._idx(0,Y)],R[this._idx(w,Y)]=R[this._idx(w-1,Y)],R[this._idx(Y,-1)]=R[this._idx(Y,0)],R[this._idx(Y,w)]=R[this._idx(Y,w-1)];R[this._idx(-1,-1)]=R[this._idx(0,0)],R[this._idx(w,-1)]=R[this._idx(w-1,0)],R[this._idx(-1,w)]=R[this._idx(0,w-1)],R[this._idx(w,w)]=R[this._idx(w-1,w-1)],v&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Ma(this)}get(i,o,h=!1){h&&(i=y(i,-1,this.dim),o=y(o,-1,this.dim));const p=4*this._idx(i,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(i){return Oc[i]}get unpackVector(){return Oc[this.encoding]}_idx(i,o){if(i<-1||i>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(i+1)}_unpackMapbox(i,o,h){return(256*i*256+256*o+h)/10-1e4}_unpackTerrarium(i,o,h){return 256*i+o+h/256-32768}static pack(i,o){const h=[0,0,0,0],p=af.getUnpackVector(o);let v=Math.floor((i+p[3])/p[2]);return h[2]=v%256,v=Math.floor(v/256),h[1]=v%256,v=Math.floor(v/256),h[0]=v,h}getPixels(){return new Ea({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,o,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let p=o*this.dim,v=o*this.dim+this.dim,w=h*this.dim,R=h*this.dim+this.dim;switch(o){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:w=R-1;break;case 1:R=w+1}const Y=-o*this.dim,ee=-h*this.dim;for(let de=w;de<R;de++)for(let _e=p;_e<v;_e++){const Te=4*this._idx(_e,de),Ae=4*this._idx(_e+Y,de+ee);this.pixels[Te+0]=i.pixels[Ae+0],this.pixels[Te+1]=i.pixels[Ae+1],this.pixels[Te+2]=i.pixels[Ae+2],this.pixels[Te+3]=i.pixels[Ae+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Bi(af,"DEMData"),Bi(Ma,"DemMinMaxQuadTree",{omit:["dem"]});class OA{constructor(i,o){this.max=i,this.onRemove=o,this.reset()}reset(){for(const i in this.data)for(const o of this.data[i])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(i,o,h){const p=i.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const v={value:o,timeout:void 0};if(h!==void 0&&(v.timeout=setTimeout(()=>{this.remove(i,v)},h)),this.data[p].push(v),this.order.push(p),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const o=this.data[i].shift();return o.timeout&&clearTimeout(o.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),o.value}getByKey(i){const o=this.data[i];return o?o[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,o){if(!this.has(i))return this;const h=i.wrapped().key,p=o===void 0?0:this.data[h].indexOf(o),v=this.data[h][p];return this.data[h].splice(p,1),v.timeout&&clearTimeout(v.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(v.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(i){const o=[];for(const h in this.data)for(const p of this.data[h])i(p.value)||o.push(p);for(const h of o)this.remove(h.value.tileID,h)}}class W0{constructor(i,o,h){this.func=i,this.mask=o,this.range=h}}W0.ReadOnly=!1,W0.ReadWrite=!0,W0.disabled=new W0(519,W0.ReadOnly,[0,1]);const db=7680;class ub{constructor(i,o,h,p,v,w){this.test=i,this.ref=o,this.mask=h,this.fail=p,this.depthFail=v,this.pass=w}}ub.disabled=new ub({func:519,mask:0},0,0,db,db,db);class Hh{constructor(i,o,h){this.blendFunction=i,this.blendColor=o,this.mask=h}}Hh.Replace=[1,0],Hh.disabled=new Hh(Hh.Replace,is.transparent,[!1,!1,!1,!1]),Hh.unblended=new Hh(Hh.Replace,is.transparent,[!0,!0,!0,!0]),Hh.alphaBlended=new Hh([1,771],is.transparent,[!0,!0,!0,!0]);const pb=1029,fb=2305;class ch{constructor(i,o,h){this.enable=i,this.mode=o,this.frontFace=h}}ch.disabled=new ch(!1,pb,fb),ch.backCCW=new ch(!0,pb,fb),ch.backCW=new ch(!0,pb,2304),ch.frontCW=new ch(!0,1028,2304),ch.frontCCW=new ch(!0,1028,fb);class lf extends wo{constructor(i,o,h){super(),this.id=i,this._onlySymbols=h,o.on("data",p=>{p.dataType==="source"&&p.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&p.dataType==="source"&&p.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new OA(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Qn,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const o=this._tiles[i];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,o){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,o)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const h=this._tiles[o];h.upload(i),h.prepare(this.map.style.imageManager)}}getIds(){return te(this._tiles).map(i=>i.tileID).sort(RT).map(i=>i.key)}getRenderableIds(i){const o=[];for(const h in this._tiles)this._isIdRenderable(+h,i)&&o.push(this._tiles[h]);return i?o.sort((h,p)=>{const v=h.tileID,w=p.tileID,R=new U(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),Y=new U(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-w.overscaledZ||Y.y-R.y||Y.x-R.x}).map(h=>h.tileID.key):o.map(h=>h.tileID).sort(RT).map(h=>h.key)}hasRenderableParent(i){const o=this.findLoadedParent(i,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(i,o){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(o||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,o){const h=this._tiles[i];h&&(h.state!=="loading"&&(h.state=o),this._loadTile(h,this._tileLoaded.bind(this,h,i,o)))}_tileLoaded(i,o,h,p){if(p)if(i.state="errored",p.status!==404)this._source.fire(new el(p,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const v=this.map.painter.terrain;this.update(this.transform,v.getScaledDemTileSize(),!0),v.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=Qi.now(),h==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(o,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new ga("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const o=this.getRenderableIds();for(let p=0;p<o.length;p++){const v=o[p];if(i.neighboringTiles&&i.neighboringTiles[v]){const w=this.getTileByID(v);h(i,w),h(w,i)}}function h(p,v){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let w=v.tileID.canonical.x-p.tileID.canonical.x;const R=v.tileID.canonical.y-p.tileID.canonical.y,Y=Math.pow(2,p.tileID.canonical.z),ee=v.tileID.key;w===0&&R===0||Math.abs(R)>1||(Math.abs(w)>1&&(Math.abs(w+Y)===1?w+=Y:Math.abs(w-Y)===1&&(w-=Y)),v.dem&&p.dem&&(p.dem.backfillBorder(v.dem,w,R),p.neighboringTiles&&p.neighboringTiles[ee]&&(p.neighboringTiles[ee].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,o,h,p){for(const v in this._tiles){let w=this._tiles[v];if(p[v]||!w.hasData()||w.tileID.overscaledZ<=o||w.tileID.overscaledZ>h)continue;let R=w.tileID;for(;w&&w.tileID.overscaledZ>o+1;){const ee=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[ee.key],w&&w.hasData()&&(R=ee)}let Y=R;for(;Y.overscaledZ>o;)if(Y=Y.scaledTo(Y.overscaledZ-1),i[Y.key]){p[R.key]=R;break}}}findLoadedParent(i,o){if(i.key in this._loadedParentTiles){const h=this._loadedParentTiles[i.key];return h&&h.tileID.overscaledZ>=o?h:null}for(let h=i.overscaledZ-1;h>=o;h--){const p=i.scaledTo(h),v=this._getLoadedTile(p);if(v)return v}}_getLoadedTile(i){const o=this._tiles[i.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,o){o=o||this._source.tileSize;const h=Math.ceil(i.width/o)+1,p=Math.ceil(i.height/o)+1,v=Math.floor(h*p*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,v):v,R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(R)}handleWrapJump(i){const o=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,o){const h={};for(const p in this._tiles){const v=this._tiles[p];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+o),h[v.tileID.key]=v}this._tiles=h;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(i,o,h){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!h)return;let p;this.updateCacheSize(i,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new lo(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(p=i.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!h,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(R=>this._source.hasTile(R)))):p=[];const v=this._updateRetainedTiles(p);if(BT(this._source.type)&&p.length!==0){const R={},Y={},ee=Object.keys(v);for(const _e of ee){const Te=v[_e],Ae=this._tiles[_e];if(!Ae||Ae.fadeEndTime&&Ae.fadeEndTime<=Qi.now())continue;const Ie=this.findLoadedParent(Te,Math.max(Te.overscaledZ-lf.maxOverzooming,this._source.minzoom));Ie&&(this._addTile(Ie.tileID),R[Ie.tileID.key]=Ie.tileID),Y[_e]=Te}const de=p[p.length-1].overscaledZ;for(const _e in this._tiles){const Te=this._tiles[_e];if(v[_e]||!Te.hasData())continue;let Ae=Te.tileID;for(;Ae.overscaledZ>de;){Ae=Ae.scaledTo(Ae.overscaledZ-1);const Ie=this._tiles[Ae.key];if(Ie&&Ie.hasData()&&Y[Ae.key]){v[_e]=Te.tileID;break}}}for(const _e in R)v[_e]||(this._coveredTiles[_e]=!0,v[_e]=R[_e])}for(const R in v)this._tiles[R].clearFadeHold();const w=function(R,Y){const ee=[];for(const de in R)de in Y||ee.push(de);return ee}(this._tiles,v);for(const R of w){const Y=this._tiles[R];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(+R)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const o={};if(i.length===0)return o;const h={},p=i.reduce((ee,de)=>Math.min(ee,de.overscaledZ),1/0),v=i[0].overscaledZ,w=Math.max(v-lf.maxOverzooming,this._source.minzoom),R=Math.max(v+lf.maxUnderzooming,this._source.minzoom),Y={};for(const ee of i){const de=this._addTile(ee);o[ee.key]=ee,de.hasData()||p<this._source.maxzoom&&(Y[ee.key]=ee)}this._retainLoadedChildren(Y,p,R,o);for(const ee of i){let de=this._tiles[ee.key];if(de.hasData())continue;if(ee.canonical.z>=this._source.maxzoom){const Te=ee.children(this._source.maxzoom)[0],Ae=this.getTile(Te);if(Ae&&Ae.hasData()){o[Te.key]=Te;continue}}else{const Te=ee.children(this._source.maxzoom);if(o[Te[0].key]&&o[Te[1].key]&&o[Te[2].key]&&o[Te[3].key])continue}let _e=de.wasRequested();for(let Te=ee.overscaledZ-1;Te>=w;--Te){const Ae=ee.scaledTo(Te);if(h[Ae.key]||(h[Ae.key]=!0,de=this.getTile(Ae),!de&&_e&&(de=this._addTile(Ae)),de&&(o[Ae.key]=Ae,_e=de.wasRequested(),de.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const o=[];let h,p=this._tiles[i].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){h=this._loadedParentTiles[p.key];break}o.push(p.key);const v=p.scaledTo(p.overscaledZ-1);if(h=this._getLoadedTile(v),h)break;p=v}for(const v of o)this._loadedParentTiles[v]=h}}_addTile(i){let o=this._tiles[i.key];if(o)return o;o=this._cache.getAndRemove(i),o&&(this._setTileReloadTimer(i.key,o),o.tileID=i,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,o)));const h=Boolean(o);if(!h){const p=this.map?this.map.painter:null;o=new An(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._loadTile(o,this._tileLoaded.bind(this,o,i.key,o.state))}return o?(o.uses++,this._tiles[i.key]=o,h||this._source.fire(new ga("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(i,o){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const h=o.getExpiryTimeout();h&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},h))}_removeTile(i){const o=this._tiles[i];o&&(o.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,o,h){const p=[],v=this.transform;if(!v)return p;const w=v.projection.name==="globe",R=Yl(v.center.lng);for(const Y in this._tiles){const ee=this._tiles[Y];if(h&&ee.clearQueryDebugViz(),ee.holdingForFade())continue;let de;if(w){const _e=ee.tileID.canonical;if(_e.z===0){const Te=[Math.abs(y(R,...e1(_e,-1))-R),Math.abs(y(R,...e1(_e,1))-R)];de=[0,2*Te.indexOf(Math.min(...Te))-1]}else{const Te=[Math.abs(y(R,...e1(_e,-1))-R),Math.abs(y(R,...e1(_e,0))-R),Math.abs(y(R,...e1(_e,1))-R)];de=[Te.indexOf(Math.min(...Te))-1]}}else de=[0];for(const _e of de){const Te=i.containsTile(ee,v,o,_e);Te&&p.push(Te)}}return p}getVisibleCoordinates(i){const o=this.getRenderableIds(i).map(h=>this._tiles[h].tileID);for(const h of o)h.projMatrix=this.transform.calculateProjMatrix(h.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(BT(this._source.type))for(const i in this._tiles){const o=this._tiles[i];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=Qi.now())return!0}return!1}setFeatureState(i,o,h){this._state.updateState(i=i||"_geojsonTileLayer",o,h)}removeFeatureState(i,o,h){this._state.removeFeatureState(i=i||"_geojsonTileLayer",o,h)}getFeatureState(i,o){return this._state.getState(i=i||"_geojsonTileLayer",o)}setDependencies(i,o,h){const p=this._tiles[i];p&&p.setDependencies(o,h)}reloadTilesForDependencies(i,o){for(const h in this._tiles)this._tiles[h].hasDependency(i,o)&&this._reloadTile(+h,"reloading");this._cache.filter(h=>!h.hasDependency(i,o))}_preloadTiles(i,o){const h=new Map,p=Array.isArray(i)?i:[i],v=this.map.painter.terrain,w=this.usedForTerrain&&v?v.getScaledDemTileSize():this._source.tileSize;for(const R of p){const Y=R.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const ee of Y)h.set(ee.key,ee);this.usedForTerrain&&R.updateElevation(!1)}X(Array.from(h.values()),(R,Y)=>{const ee=new An(R,this._source.tileSize*R.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(ee,de=>{this._source.type==="raster-dem"&&ee.dem&&this._backfillDEM(ee),Y(de,ee)})},o)}}function RT(s,i){const o=Math.abs(2*s.wrap)-+(s.wrap<0),h=Math.abs(2*i.wrap)-+(i.wrap<0);return s.overscaledZ-i.overscaledZ||h-o||i.canonical.y-s.canonical.y||i.canonical.x-s.canonical.x}function BT(s){return s==="raster"||s==="image"||s==="video"||s==="custom"}function e1(s,i){const o=1<<s.z;return[s.x/o+i,(s.x+1)/o+i]}lf.maxOverzooming=10,lf.maxUnderzooming=3;class vy{constructor(i,o,h){this._demTile=i,this._dem=this._demTile.dem,this._scale=o,this._offset=h}static create(i,o,h){const p=h||i.findDEMTileFor(o);if(!p||!p.dem)return;const v=p.dem,w=p.tileID,R=1<<o.canonical.z-w.canonical.z;return new vy(p,p.tileSize/cn/R,[(o.canonical.x/R-w.canonical.x)*v.dim,(o.canonical.y/R-w.canonical.y)*v.dim])}tileCoordToPixel(i,o){const h=o*this._scale+this._offset[1],p=Math.floor(i*this._scale+this._offset[0]),v=Math.floor(h);return new U(p,v)}getElevationAt(i,o,h,p){const v=i*this._scale+this._offset[0],w=o*this._scale+this._offset[1],R=Math.floor(v),Y=Math.floor(w),ee=this._dem;return p=!!p,h?Pn(Pn(ee.get(R,Y,p),ee.get(R,Y+1,p),w-Y),Pn(ee.get(R+1,Y,p),ee.get(R+1,Y+1,p),w-Y),v-R):ee.get(R,Y,p)}getElevationAtPixel(i,o,h){return this._dem.get(i,o,!!h)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*Xa(1,i)*this._dem.stride}}class zT{constructor(i,o){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Rh(cn,16,0),this.featureIndexArray=new th,this.promoteId=o}insert(i,o,h,p,v,w=0){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v,w);const Y=this.grid;for(let ee=0;ee<o.length;ee++){const de=o[ee],_e=[1/0,1/0,-1/0,-1/0];for(let Te=0;Te<de.length;Te++){const Ae=de[Te];_e[0]=Math.min(_e[0],Ae.x),_e[1]=Math.min(_e[1],Ae.y),_e[2]=Math.max(_e[2],Ae.x),_e[3]=Math.max(_e[3],Ae.y)}_e[0]<cn&&_e[1]<cn&&_e[2]>=0&&_e[3]>=0&&Y.insert(R,_e[0],_e[1],_e[2],_e[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new yg(new Xp(this.rawTileData)).layers,this.sourceLayerCoder=new re(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,o,h,p){this.loadVTLayers();const v=i.params||{},w=ns(v.filter),R=i.tileResult,Y=i.transform,ee=R.bufferedTilespaceBounds,de=this.grid.query(ee.min.x,ee.min.y,ee.max.x,ee.max.y,(Ie,Fe,Xe,dt)=>Jm(R.bufferedTilespaceGeometry,Ie,Fe,Xe,dt));de.sort(RA);let _e=null;Y.elevation&&de.length>0&&(_e=vy.create(Y.elevation,this.tileID));const Te={};let Ae;for(let Ie=0;Ie<de.length;Ie++){const Fe=de[Ie];if(Fe===Ae)continue;Ae=Fe;const Xe=this.featureIndexArray.get(Fe);let dt=null;this.loadMatchingFeature(Te,Xe,w,v.layers,v.availableImages,o,h,p,(yt,ct,ft,St=0)=>(dt||(dt=ql(yt,this.tileID.canonical,i.tileTransform)),ct.queryIntersectsFeature(R,yt,ft,dt,this.z,i.transform,i.pixelPosMatrix,_e,St)))}return Te}loadMatchingFeature(i,o,h,p,v,w,R,Y,ee){const{featureIndex:de,bucketIndex:_e,sourceLayerIndex:Te,layoutVertexArrayOffset:Ae}=o,Ie=this.bucketLayerIDs[_e];if(p&&!function(yt,ct){for(let ft=0;ft<yt.length;ft++)if(ct.indexOf(yt[ft])>=0)return!0;return!1}(p,Ie))return;const Fe=this.sourceLayerCoder.decode(Te),Xe=this.vtLayers[Fe].feature(de);if(h.needGeometry){const yt=Ac(Xe,!0);if(!h.filter(new Dt(this.tileID.overscaledZ),yt,this.tileID.canonical))return}else if(!h.filter(new Dt(this.tileID.overscaledZ),Xe))return;const dt=this.getId(Xe,Fe);for(let yt=0;yt<Ie.length;yt++){const ct=Ie[yt];if(p&&p.indexOf(ct)<0)continue;const ft=w[ct];if(!ft)continue;let St={};dt!==void 0&&Y&&(St=Y.getState(ft.sourceLayer||"_geojsonTileLayer",dt));const bt=q({},R[ct]);bt.paint=NT(bt.paint,ft.paint,Xe,St,v),bt.layout=NT(bt.layout,ft.layout,Xe,St,v);const Ht=!ee||ee(Xe,ft,St,Ae);if(!Ht)continue;const $t=new Ge(Xe,this.z,this.x,this.y,dt);$t.layer=bt;let oi=i[ct];oi===void 0&&(oi=i[ct]=[]),oi.push({featureIndex:de,feature:$t,intersectionZ:Ht})}}lookupSymbolFeatures(i,o,h,p,v,w,R,Y){const ee={};this.loadVTLayers();const de=ns(v);for(const _e of i)this.loadMatchingFeature(ee,{bucketIndex:h,sourceLayerIndex:p,featureIndex:_e,layoutVertexArrayOffset:0},de,w,R,Y,o);return ee}loadFeature(i){const{featureIndex:o,sourceLayerIndex:h}=i;this.loadVTLayers();const p=this.sourceLayerCoder.decode(h),v=this.vtFeatures[p];if(v[o])return v[o];const w=this.vtLayers[p].feature(o);return v[o]=w,w}hasLayer(i){for(const o of this.bucketLayerIDs)for(const h of o)if(i===h)return!0;return!1}getId(i,o){let h=i.id;if(this.promoteId){const p=typeof this.promoteId=="string"?this.promoteId:this.promoteId[o];p!=null&&(h=i.properties[p]),typeof h=="boolean"&&(h=Number(h))}return h}}function NT(s,i,o,h,p){return Pe(s,(v,w)=>{const R=i instanceof wi?i.get(w):null;return R&&R.evaluate?R.evaluate(o,h,p):R})}function RA(s,i){return i-s}Bi(zT,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class FT{constructor(i,o){this.width=i,this.height=o,this.nextRow=0,this.image=new sh({width:i,height:o}),this.positions={},this.uploaded=!1}getDash(i,o){const h=this.getKey(i,o);return this.positions[h]}trim(){const i=this.width,o=this.height=Z(this.nextRow);this.image.resize({width:i,height:o})}getKey(i,o){return i.join(",")+o}getDashRanges(i,o,h){const p=[];let v=i.length%2==1?-i[i.length-1]*h:0,w=i[0]*h,R=!0;p.push({left:v,right:w,isDash:R,zeroLength:i[0]===0});let Y=i[0];for(let ee=1;ee<i.length;ee++){R=!R;const de=i[ee];v=Y*h,Y+=de,w=Y*h,p.push({left:v,right:w,isDash:R,zeroLength:de===0})}return p}addRoundDash(i,o,h){const p=o/2;for(let v=-h;v<=h;v++){const w=this.width*(this.nextRow+h+v);let R=0,Y=i[R];for(let ee=0;ee<this.width;ee++){ee/Y.right>1&&(Y=i[++R]);const de=Math.abs(ee-Y.left),_e=Math.abs(ee-Y.right),Te=Math.min(de,_e);let Ae;const Ie=v/h*(p+1);if(Y.isDash){const Fe=p-Math.abs(Ie);Ae=Math.sqrt(Te*Te+Fe*Fe)}else Ae=p-Math.sqrt(Te*Te+Ie*Ie);this.image.data[w+ee]=Math.max(0,Math.min(255,Ae+128))}}}addRegularDash(i,o){for(let Y=i.length-1;Y>=0;--Y){const ee=i[Y],de=i[Y+1];ee.zeroLength?i.splice(Y,1):de&&de.isDash===ee.isDash&&(de.left=ee.left,i.splice(Y,1))}const h=i[0],p=i[i.length-1];h.isDash===p.isDash&&(h.left=p.left-this.width,p.right=h.right+this.width);const v=this.width*this.nextRow;let w=0,R=i[w];for(let Y=0;Y<this.width;Y++){Y/R.right>1&&(R=i[++w]);const ee=Math.abs(Y-R.left),de=Math.abs(Y-R.right),_e=Math.min(ee,de);this.image.data[v+Y]=Math.max(0,Math.min(255,(R.isDash?_e:-_e)+o+128))}}addDash(i,o){const h=this.getKey(i,o);if(this.positions[h])return this.positions[h];const p=o==="round",v=p?7:0,w=2*v+1;if(this.nextRow+w>this.height)return le("LineAtlas out of space"),null;i.length===0&&i.push(1);let R=0;for(let de=0;de<i.length;de++)i[de]<0&&(le("Negative value is found in line dasharray, replacing values with 0"),i[de]=0),R+=i[de];if(R!==0){const de=this.width/R,_e=this.getDashRanges(i,this.width,de);p?this.addRoundDash(_e,de,v):this.addRegularDash(_e,o==="square"?.5*de:0)}const Y=this.nextRow+v;this.nextRow+=w;const ee={tl:[Y,v],br:[R,0]};return this.positions[h]=ee,ee}}Bi(FT,"LineAtlas");class jT{constructor(i){const o={},h=[];for(const R in i){const Y=i[R],ee=o[R]={};for(const de in Y.glyphs){const _e=Y.glyphs[+de];if(!_e||_e.bitmap.width===0||_e.bitmap.height===0)continue;const Te=_e.metrics.localGlyph?2:1,Ae={x:0,y:0,w:_e.bitmap.width+2*Te,h:_e.bitmap.height+2*Te};h.push(Ae),ee[de]=Ae}}const{w:p,h:v}=kg(h),w=new sh({width:p||1,height:v||1});for(const R in i){const Y=i[R];for(const ee in Y.glyphs){const de=Y.glyphs[+ee];if(!de||de.bitmap.width===0||de.bitmap.height===0)continue;const _e=o[R][ee],Te=de.metrics.localGlyph?2:1;sh.copy(de.bitmap,w,{x:0,y:0},{x:_e.x+Te,y:_e.y+Te},de.bitmap)}}this.image=w,this.positions=o}}Bi(jT,"GlyphAtlas");class BA{constructor(i){this.tileID=new lo(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=Rd(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,o,h,p,v){this.status="parsing",this.data=i,this.collisionBoxArray=new Rm;const w=new re(Object.keys(i.layers).sort()),R=new zT(this.tileID,this.promoteId);R.bucketLayerIDs=[];const Y={},ee=new FT(256,256),de={featureIndex:R,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:ee,availableImages:h},_e=o.familiesBySource[this.source];for(const St in _e){const bt=i.layers[St];if(!bt)continue;let Ht=!1,$t=!1;for(const Zt of _e[St])Zt[0].type==="symbol"?Ht=!0:$t=!0;if(this.isSymbolTile===!0&&!Ht||this.isSymbolTile===!1&&!$t)continue;bt.version===1&&le(`Vector tile source "${this.source}" layer "${St}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const oi=w.encode(St),Ei=[];for(let Zt=0;Zt<bt.length;Zt++){const ai=bt.feature(Zt),ui=R.getId(ai,St);Ei.push({feature:ai,id:ui,index:Zt,sourceLayerIndex:oi})}for(const Zt of _e[St]){const ai=Zt[0];this.isSymbolTile!==void 0&&ai.type==="symbol"!==this.isSymbolTile||ai.minzoom&&this.zoom<Math.floor(ai.minzoom)||ai.maxzoom&&this.zoom>=ai.maxzoom||ai.visibility!=="none"&&(mb(Zt,this.zoom,h),(Y[ai.id]=ai.createBucket({index:R.bucketLayerIDs.length,layers:Zt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:oi,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:h})).populate(Ei,de,this.tileID.canonical,this.tileTransform),R.bucketLayerIDs.push(Zt.map(ui=>ui.id)))}}let Te,Ae,Ie,Fe;ee.trim();const Xe={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},dt=Pe(de.glyphDependencies,St=>Object.keys(St).map(Number));Object.keys(dt).length?p.send("getGlyphs",{uid:this.uid,stacks:dt},(St,bt)=>{Te||(Te=St,Ae=bt,ft.call(this))},void 0,!1,Xe):Ae={};const yt=Object.keys(de.iconDependencies);yt.length?p.send("getImages",{icons:yt,source:this.source,tileID:this.tileID,type:"icons"},(St,bt)=>{Te||(Te=St,Ie=bt,ft.call(this))},void 0,!1,Xe):Ie={};const ct=Object.keys(de.patternDependencies);function ft(){if(Te)return v(Te);if(Ae&&Ie&&Fe){const St=new jT(Ae),bt=new Ic(Ie,Fe);for(const Ht in Y){const $t=Y[Ht];$t instanceof $h?(mb($t.layers,this.zoom,h),V2($t,Ae,St.positions,Ie,bt.iconPositions,this.showCollisionBoxes,h,this.tileID.canonical,this.tileZoom,this.projection)):$t.hasPattern&&($t instanceof M0||$t instanceof y0||$t instanceof Hp)&&(mb($t.layers,this.zoom,h),$t.addFeatures(de,this.tileID.canonical,bt.patternPositions,h,this.tileTransform))}this.status="done",v(null,{buckets:te(Y).filter(Ht=>!Ht.isEmpty()),featureIndex:R,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:St.image,lineAtlas:ee,imageAtlas:bt,glyphMap:this.returnDependencies?Ae:null,iconMap:this.returnDependencies?Ie:null,glyphPositions:this.returnDependencies?St.positions:null})}}ct.length?p.send("getImages",{icons:ct,source:this.source,tileID:this.tileID,type:"patterns"},(St,bt)=>{Te||(Te=St,Fe=bt,ft.call(this))},void 0,!1,Xe):Fe={},ft.call(this)}}function mb(s,i,o){const h=new Dt(i);for(const p of s)p.recalculate(h,o)}class UT{constructor(i){this.entries={},this.scheduler=i}request(i,o,h,p){const v=this.entries[i]=this.entries[i]||{callbacks:[]};if(v.result){const[w,R]=v.result;return this.scheduler?this.scheduler.add(()=>{p(w,R)},o):p(w,R),()=>{}}return v.callbacks.push(p),v.cancel||(v.cancel=h((w,R)=>{v.result=[w,R];for(const Y of v.callbacks)this.scheduler?this.scheduler.add(()=>{Y(w,R)},o):Y(w,R);setTimeout(()=>delete this.entries[i],3e3)})),()=>{v.result||(v.callbacks=v.callbacks.filter(w=>w!==p),v.callbacks.length||(v.cancel(),delete this.entries[i]))}}}function GT(s,i,o){const h=JSON.stringify(s.request);return s.data&&(this.deduped.entries[h]={result:[null,s.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom},p=>{const v=qi(s.request,(w,R,Y,ee)=>{w?p(w):R&&p(null,{vectorTile:o?void 0:new yg(new Xp(R)),rawData:R,cacheControl:Y,expires:ee})});return()=>{v.cancel(),p()}},i)}n.ARRAY_TYPE=Ta,n.AUTH_ERR_MSG=ur,n.Aabb=Ko,n.Actor=class{constructor(s,i,o){this.target=s,this.parent=i,this.mapId=o,this.callbacks={},this.cancelCallbacks={},ue(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Le()?s:T,this.scheduler=new A}send(s,i,o,h,p=!1,v){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=v,this.callbacks[w]=o);const R=st(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:s,hasCallback:!!o,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Sc(i,R)},R),{cancel:()=>{o&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(s){const i=s.data,o=i.id;if(o&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const h=this.cancelCallbacks[o];delete this.cancelCallbacks[o],h&&h.cancel()}else if(i.mustQueue||Le()){const h=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,i),h&&h.metadata||{type:"message"})}else this.processTask(o,i)}processTask(s,i){if(i.type==="<response>"){const o=this.callbacks[s];delete this.callbacks[s],o&&(i.error?o(_d(i.error)):o(null,_d(i.data)))}else{const o=st(this.globalScope)?void 0:[],h=i.hasCallback?(v,w)=>{delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:v?Sc(v):null,data:Sc(w,o)},o)}:v=>{},p=_d(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,p,h);else if(this.parent.getWorkerSource){const v=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,v[0],p.source)[v[1]](p,h)}else h(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},n.CanonicalTileID=E0,n.Color=is,n.ColorMode=Hh,n.CullFaceMode=ch,n.DEMData=af,n.DataConstantProperty=Rt,n.DedupedRequest=UT,n.DepthMode=W0,n.EXTENT=cn,n.Elevation=class{isDataAvailableAtPoint(s){const i=this._source();if(this.isUsingMockSource()||!i||s.y<0||s.y>1)return!1;const o=i.getSource().maxzoom,h=1<<o,p=Math.floor(s.x),v=Math.floor((s.x-p)*h),w=Math.floor(s.y*h),R=this.findDEMTileFor(new lo(o,p,o,v,w));return!(!R||!R.dem)}getAtPointOrZero(s,i=0){return this.getAtPoint(s,i)||0}getAtPoint(s,i,o=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const h=this._source();if(!h||s.y<0||s.y>1)return i;const p=h.getSource().maxzoom,v=1<<p,w=Math.floor(s.x),R=s.x-w,Y=new lo(p,w,p,Math.floor(R*v),Math.floor(s.y*v)),ee=this.findDEMTileFor(Y);if(!ee||!ee.dem)return i;const de=ee.dem,_e=1<<ee.tileID.canonical.z,Te=(R*_e-ee.tileID.canonical.x)*de.dim,Ae=(s.y*_e-ee.tileID.canonical.y)*de.dim,Ie=Math.floor(Te),Fe=Math.floor(Ae);return(o?this.exaggeration():1)*Pn(Pn(de.get(Ie,Fe),de.get(Ie,Fe+1),Ae-Fe),Pn(de.get(Ie+1,Fe),de.get(Ie+1,Fe+1),Ae-Fe),Te-Ie)}getAtTileOffset(s,i,o){const h=1<<s.canonical.z;return this.getAtPointOrZero(new wd(s.wrap+(s.canonical.x+i/cn)/h,(s.canonical.y+o/cn)/h))}getAtTileOffsetFunc(s,i,o,h){return p=>{const v=this.getAtTileOffset(s,p.x,p.y),w=h.upVector(s.canonical,p.x,p.y);return qa(w,w,v*h.upVectorScale(s.canonical,i,o).metersToTile),w}}getForTilePoints(s,i,o,h){if(this.isUsingMockSource())return!1;const p=vy.create(this,s,h);return!!p&&(i.forEach(v=>{v[2]=this.exaggeration()*p.getElevationAt(v[0],v[1],o)}),!0)}getMinMaxForTile(s){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(s);if(!i||!i.dem)return null;const o=i.dem.tree,h=i.tileID,p=1<<s.canonical.z-h.canonical.z;let v=s.canonical.x/p-h.canonical.x,w=s.canonical.y/p-h.canonical.y,R=0;for(let Y=0;Y<s.canonical.z-h.canonical.z&&!o.leaves[R];Y++){v*=2,w*=2;const ee=2*Math.floor(w)+Math.floor(v);R=o.childOffsets[R]+ee,v%=1,w%=1}return{min:this.exaggeration()*o.minimums[R],max:this.exaggeration()*o.maximums[R]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(s,i,o){throw new Error("Pure virtual method called.")}pointCoordinate(s){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(s){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},n.ErrorEvent=el,n.EvaluationParameters=Dt,n.Event=ga,n.Evented=wo,n.FillExtrusionBucket=Hp,n.Frustum=lg,n.FrustumCorners=ag,n.GLOBE_METERS_TO_ECEF=Fg,n.GLOBE_RADIUS=lh,n.GLOBE_SCALE_MATCH_LATITUDE=45,n.GLOBE_ZOOM_THRESHOLD_MAX=6,n.GLOBE_ZOOM_THRESHOLD_MIN=5,n.GlobeSharedBuffers=class{constructor(s){this._createGrid(s),this._createPoles(s)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const s of this._poleSegments)s.destroy();for(const s of this._gridSegments)s.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const s of this._wireframeSegments)s.destroy()}}_createGrid(s){const i=new hr,o=new ao,h=65;for(let p=0;p<h;p++)for(let v=0;v<h;v++)i.emplaceBack(v,p);this._gridSegments=[];for(let p=0,v=0;p<Bu.length;p++){const w=Bu[p];for(let Y=0;Y<w;Y++)for(let ee=0;ee<64;ee++){const de=Y*h+ee;o.emplaceBack(de+1,de,de+h),o.emplaceBack(de+h,de+h+1,de+1)}const R=64*w*2;this._gridSegments.push(Cs.simpleSegment(0,v,(w+1)*h,R)),v+=R}this._gridBuffer=s.createVertexBuffer(i,Kp.members),this._gridIndexBuffer=s.createIndexBuffer(o,!0)}_createPoles(s){const i=new ao;for(let p=0;p<=Ru;p++)i.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=s.createIndexBuffer(i,!0);const o=new jn,h=new jn;this._poleSegments=[];for(let p=0,v=0;p<5;p++){const w=360/(1<<p);o.emplaceBack(0,-lh,0,.5,0),h.emplaceBack(0,-lh,0,.5,1);for(let R=0;R<=Ru;R++){const Y=R/Ru,ee=Pn(0,w,Y),[de,_e,Te]=zu(Z2,Hg,ee,lh);o.emplaceBack(de,_e,Te,Y,0),h.emplaceBack(de,_e,Te,Y,1)}this._poleSegments.push(Cs.simpleSegment(v,0,66,64)),v+=66}this._poleNorthVertexBuffer=s.createVertexBuffer(o,zg,!1),this._poleSouthVertexBuffer=s.createVertexBuffer(h,zg,!1)}getGridBuffers(s){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[s]]}getPoleBuffers(s){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[s]]}getWirefameBuffers(s,i){if(!this._wireframeSegments){const o=new hl,h=Ru,p=h+1;this._wireframeSegments=[];for(let v=0,w=0;v<Bu.length;v++){const R=Bu[v];for(let ee=0;ee<R;ee++)for(let de=0;de<h;de++){const _e=ee*p+de;o.emplaceBack(_e,_e+1),o.emplaceBack(_e,_e+p),o.emplaceBack(_e,_e+p+1)}const Y=R*h*3;this._wireframeSegments.push(Cs.simpleSegment(0,w,(R+1)*p,Y)),w+=Y}this._wireframeIndexBuffer=s.createIndexBuffer(o)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},n.GlyphManager=ks,n.ImagePosition=k0,n.LivePerformanceUtils=Ri,n.LngLat=Kn,n.LngLatBounds=nh,n.LocalGlyphMode=Ig,n.MAX_MERCATOR_LATITUDE=yo,n.MercatorCoordinate=wd,n.ONE_EM=Ur,n.OverscaledTileID=lo,n.PerformanceMarkers=li,n.Properties=nn,n.RGBAImage=Ea,n.Ray=f0,n.RequestManager=class{constructor(s,i,o){this._transformRequestFn=s,this._customAccessToken=i,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const s=function(){let i="";for(let o=0;o<10;o++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",S,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,i){return this._transformRequestFn&&this._transformRequestFn(s,i)||{url:s}}normalizeStyleURL(s,i){if(!Dr(s))return s;const o=io(s);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||i)}normalizeGlyphsURL(s,i){if(!Dr(s))return s;const o=io(s);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||i)}normalizeSourceURL(s,i,o,h){if(!Dr(s))return s;const p=io(s);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),o&&p.params.push(`language=${o}`),h&&p.params.push(`worldview=${h}`),this._makeAPIURL(p,this._customAccessToken||i)}normalizeSpriteURL(s,i,o,h){const p=io(s);return Dr(s)?(p.path=`/styles/v1${p.path}/sprite${i}${o}`,this._makeAPIURL(p,this._customAccessToken||h)):(p.path+=`${i}${o}`,Qa(p))}normalizeTileURL(s,i,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!Dr(s))return s;const h=io(s);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||o&&h.authority!=="raster"&&o===512?"@2x":""}${W.supported?".webp":"$1"}`),h.authority==="raster"?h.path=`/${z.RASTER_URL_PREFIX}${h.path}`:(h.path=h.path.replace(/^.+\/v4\//,"/"),h.path=`/${z.TILE_URL_VERSION}${h.path}`);const p=this._customAccessToken||function(v){for(const w of v){const R=w.match(/^access_token=(.*)$/);if(R)return R[1]}return null}(h.params)||z.ACCESS_TOKEN;return z.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&h.params.push(`sku=${this._skuToken}`),this._makeAPIURL(h,p)}canonicalizeTileURL(s,i){const o=io(s);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return s;let h="mapbox://";o.path.match(/^\/raster\/v1\//)?h+=`raster/${o.path.replace(`/${z.RASTER_URL_PREFIX}/`,"")}`:h+=`tiles/${o.path.replace(`/${z.TILE_URL_VERSION}/`,"")}`;let p=o.params;return i&&(p=p.filter(v=>!v.match(/^access_token=/))),p.length&&(h+=`?${p.join("&")}`),h}canonicalizeTileset(s,i){const o=!!i&&Dr(i),h=[];for(const p of s.tiles||[])Ir(p)?h.push(this.canonicalizeTileURL(p,o)):h.push(p);return h}_makeAPIURL(s,i){const o="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",h=io(z.API_URL);if(s.protocol=h.protocol,s.authority=h.authority,s.protocol==="http"){const p=s.params.indexOf("secure");p>=0&&s.params.splice(p,1)}if(h.path!=="/"&&(s.path=`${h.path}${s.path}`),!z.REQUIRE_ACCESS_TOKEN)return Qa(s);if(i=i||z.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return s.params=s.params.filter(p=>p.indexOf("access_token")===-1),s.params.push(`access_token=${i||""}`),Qa(s)}},n.ResourceType=ri,n.SegmentVector=Cs,n.SourceCache=lf,n.StencilMode=ub,n.StructArrayLayout1ui2=eh,n.StructArrayLayout2f1f2i16=go,n.StructArrayLayout2i4=hr,n.StructArrayLayout2ui4=hl,n.StructArrayLayout3f12=Ha,n.StructArrayLayout3ui6=ao,n.StructArrayLayout4i8=br,n.StructArrayLayout5f20=jn,n.Texture=of,n.Tile=An,n.Transitionable=si,n.Uniform1f=_u,n.Uniform1i=class extends Cc{constructor(s){super(s),this.current=0}set(s,i,o){this.fetchUniformLocation(s,i)&&this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},n.Uniform2f=class extends Cc{constructor(s){super(s),this.current=[0,0]}set(s,i,o){this.fetchUniformLocation(s,i)&&(o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1])))}},n.Uniform3f=class extends Cc{constructor(s){super(s),this.current=[0,0,0]}set(s,i,o){this.fetchUniformLocation(s,i)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2])))}},n.Uniform4f=n_,n.UniformColor=r_,n.UniformMatrix2f=class extends Cc{constructor(s){super(s),this.current=o_}set(s,i,o){if(this.fetchUniformLocation(s,i)){for(let h=0;h<4;h++)if(o[h]!==this.current[h]){this.current=o,this.gl.uniformMatrix2fv(this.location,!1,o);break}}}},n.UniformMatrix3f=class extends Cc{constructor(s){super(s),this.current=s_}set(s,i,o){if(this.fetchUniformLocation(s,i)){for(let h=0;h<9;h++)if(o[h]!==this.current[h]){this.current=o,this.gl.uniformMatrix3fv(this.location,!1,o);break}}}},n.UniformMatrix4f=class extends Cc{constructor(s){super(s),this.current=Dx}set(s,i,o){if(this.fetchUniformLocation(s,i)){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let h=1;h<16;h++)if(o[h]!==this.current[h]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}}},n.UnwrappedTileID=F_,n.ValidationError=Gi,n.VectorTileFeature=b0,n.VectorTileWorkerSource=class extends wo{constructor(s,i,o,h,p){super(),this.actor=s,this.layerIndex=i,this.availableImages=o,this.loadVectorData=p||GT,this.loading={},this.loaded={},this.deduped=new UT(s.scheduler),this.isSpriteLoaded=h,this.scheduler=s.scheduler}loadTile(s,i){const o=s.uid,h=s&&s.request,p=h&&h.collectResourceTiming,v=this.loading[o]=new BA(s);v.abort=this.loadVectorData(s,(w,R)=>{const Y=!this.loading[o];if(delete this.loading[o],Y||w||!R)return v.status="done",Y||(this.loaded[o]=v),i(w);const ee=R.rawData,de={};R.expires&&(de.expires=R.expires),R.cacheControl&&(de.cacheControl=R.cacheControl),v.vectorTile=R.vectorTile||new yg(new Xp(ee));const _e=()=>{v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,(Te,Ae)=>{if(Te||!Ae)return i(Te);const Ie={};if(p){const Fe=rn(h);Fe.length>0&&(Ie.resourceTiming=JSON.parse(JSON.stringify(Fe)))}i(null,q({rawTileData:ee.slice(0)},Ae,de,Ie))})};this.isSpriteLoaded?_e():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(_e,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom}):_e()}),this.loaded=this.loaded||{},this.loaded[o]=v})}reloadTile(s,i){const o=this.loaded,h=s.uid,p=this;if(o&&o[h]){const v=o[h];v.showCollisionBoxes=s.showCollisionBoxes,v.enableTerrain=!!s.enableTerrain,v.projection=s.projection,v.tileTransform=Rd(s.tileID.canonical,s.projection);const w=(R,Y)=>{const ee=v.reloadCallback;ee&&(delete v.reloadCallback,v.parse(v.vectorTile,p.layerIndex,this.availableImages,p.actor,ee)),i(R,Y)};v.status==="parsing"?v.reloadCallback=w:v.status==="done"&&(v.vectorTile?v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(s,i){const o=s.uid,h=this.loading[o];h&&(h.abort&&h.abort(),delete this.loading[o]),i()}removeTile(s,i){const o=this.loaded,h=s.uid;o&&o[h]&&delete o[h],i()}},n.WritingMode=Cn,n.add=Pc,n.addDynamicAttributes=$0,n.adjoint=function(s,i){var o=i[0],h=i[1],p=i[2],v=i[3],w=i[4],R=i[5],Y=i[6],ee=i[7],de=i[8];return s[0]=w*de-R*ee,s[1]=p*ee-h*de,s[2]=h*R-p*w,s[3]=R*Y-v*de,s[4]=o*de-p*Y,s[5]=p*v-o*R,s[6]=v*ee-w*Y,s[7]=h*Y-o*ee,s[8]=o*w-h*v,s},n.asyncAll=X,n.bezier=L,n.bindAll=ue,n.boundsAttributes=Yi,n.bufferConvexPolygon=function(s,i){const o=[];for(let h=0;h<s.length;h++){const p=D(h-1,-1,s.length-1),v=D(h+1,-1,s.length-1),w=s[h],R=s[v],Y=s[p].sub(w).unit(),ee=R.sub(w).unit(),de=ee.angleWithSep(Y.x,Y.y),_e=Y.add(ee).unit().mult(-1*i/Math.sin(de/2));o.push(w.add(_e))}return o},n.cacheEntryPossiblyAdded=function(s){yi++,yi>nt&&(s.getActor().send("enforceCacheSizeLimit",We),yi=0)},n.calculateGlobeLabelMatrix=function(s,i){const{x:o,y:h}=s.point,p=F0(o,h,s.worldSize/s._pixelsPerMercatorPixel,0,0);return Ed(p,p,Gg(Lc(i)))},n.calculateGlobeMatrix=function(s){const{x:i,y:o}=s.point,{lng:h,lat:p}=s._center;return F0(i,o,s.worldSize,h,p)},n.calculateGlobeMercatorMatrix=function(s){const i=s.pixelsPerMeter,o=i/Xa(1,s.center.lat),h=dl(new Float64Array(16));return Rp(h,h,[s.point.x,s.point.y,0]),Cd(h,h,[o,o,i]),Float32Array.from(h)},n.circumferenceAtLatitude=Gm,n.clamp=y,n.clearTileCache=function(s){if(!wt())return;const i=T.caches.delete(ke);s&&i.catch(s).then(()=>s())},n.clipLine=iy,n.clone=function(s){var i=new Ta(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},n.clone$1=xe,n.collisionCircleLayout=E2,n.config=z,n.conjugate=function(s,i){return s[0]=-i[0],s[1]=-i[1],s[2]=-i[2],s[3]=i[3],s},n.create=function(){var s=new Ta(16);return Ta!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},n.create$1=u_,n.createExpression=so,n.createLayout=Vi,n.createStyleLayer=function(s){return s.type==="custom"?new lb(s):new hb[s.type](s)},n.cross=rg,n.degToRad=N,n.distance=function(s,i){return Math.hypot(i[0]-s[0],i[1]-s[1],i[2]-s[2])},n.div=function(s,i,o){return s[0]=i[0]/o[0],s[1]=i[1]/o[1],s[2]=i[2]/o[2],s},n.dot=ul,n.earthRadius=bd,n.ease=f,n.easeCubicInOut=E,n.ecefToLatLng=function([s,i,o]){const h=Math.hypot(s,i,o),p=Math.atan2(s,o),v=.5*Math.PI-Math.acos(-i/h);return new Kn(F(p),F(v))},n.emitValidationErrors=Yf,n.endsWith=ye,n.enforceCacheSizeLimit=function(s){Ut(),Be&&Be.then(i=>{i.keys().then(o=>{for(let h=0;h<o.length-s;h++)i.delete(o[h])})})},n.evaluateSizeForFeature=Ql,n.evaluateSizeForZoom=Du,n.evaluateVariableOffset=Og,n.evented=gt,n.exactEquals=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]},n.exactEquals$1=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]},n.exported=Qi,n.exported$1=W,n.extend=q,n.extend$1=jo,n.fillExtrusionHeightLift=bg,n.filterObject=ae,n.fromMat4=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[4],s[4]=i[5],s[5]=i[6],s[6]=i[8],s[7]=i[9],s[8]=i[10],s},n.fromQuat=function(s,i){var o=i[0],h=i[1],p=i[2],v=i[3],w=o+o,R=h+h,Y=p+p,ee=o*w,de=h*w,_e=h*R,Te=p*w,Ae=p*R,Ie=p*Y,Fe=v*w,Xe=v*R,dt=v*Y;return s[0]=1-_e-Ie,s[1]=de+dt,s[2]=Te-Xe,s[3]=0,s[4]=de-dt,s[5]=1-ee-Ie,s[6]=Ae+Fe,s[7]=0,s[8]=Te+Xe,s[9]=Ae-Fe,s[10]=1-ee-_e,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},n.fromRotation=function(s,i){var o=Math.sin(i),h=Math.cos(i);return s[0]=h,s[1]=o,s[2]=0,s[3]=-o,s[4]=h,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},n.fromScaling=tg,n.furthestTileCorner=function(s){const i=Math.round((s+45+360)%360/90)%4;return H[i]},n.getAABBPointSquareDist=function(s,i,o){let h=0;for(let p=0;p<2;++p){const v=o?o[p]:0;s[p]>v&&(h+=(s[p]-v)*(s[p]-v)),i[p]<v&&(h+=(v-i[p])*(v-i[p]))}return h},n.getAnchorAlignment=Dg,n.getAnchorJustification=Rg,n.getBounds=function(s){let i=1/0,o=1/0,h=-1/0,p=-1/0;for(const v of s)i=Math.min(i,v.x),o=Math.min(o,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{min:new U(i,o),max:new U(h,p)}},n.getColumn=ht,n.getGridMatrix=function(s,i,o,h){const p=i.getNorth(),v=i.getSouth(),w=i.getWest(),R=i.getEast(),Y=1<<s.z,ee=R-w,de=p-v,_e=ee/Ru,Te=-de/Bu[o],Ae=[0,_e,0,Te,0,0,p,w,0];if(s.z>0){const Ie=180/h;Tu(Ae,Ae,[Ie/ee+1,0,0,0,Ie/de+1,0,-.5*Ie/_e,.5*Ie/Te,1])}return Ae[2]=Y,Ae[5]=s.x,Ae[8]=s.y,Ae},n.getImage=Ts,n.getJSON=function(s,i){return zi(q(s,{type:"json"}),i)},n.getLatitudinalLod=function(s){const i=80.051129;s=y(s,-80.051129,i)/i*90;const o=Math.pow(Math.abs(Math.sin(N(s))),3);return Math.round(o*(Bu.length-1))},n.getMapSessionAPI=Mt,n.getPerformanceMeasurement=rn,n.getProjection=_y,n.getRTLTextPluginStatus=kt,n.getReferrer=$i,n.getTilePoint=function(s,{x:i,y:o},h=0){return new U(((i-h)*s.scale-s.x)*cn,(o*s.scale-s.y)*cn)},n.getTileVec3=function(s,i,o=0){return Ad(((i.x-o)*s.scale-s.x)*cn,(i.y*s.scale-s.y)*cn,Vm(i.z,i.y))},n.getVideo=function(s,i){const o=T.document.createElement("video");o.muted=!0,o.onloadstart=function(){i(null,o)};for(let h=0;h<s.length;h++){const p=T.document.createElement("source");Oi(s[h])||(o.crossOrigin="Anonymous"),p.src=s[h],o.appendChild(p)}return{cancel:()=>{}}},n.globeCenterToScreenPoint=function(s){const i=[0,0,0],o=dl(new Float64Array(16));return Ed(o,s.pixelMatrix,s.globeMatrix),bs(i,i,o),new U(i[0],i[1])},n.globeDenormalizeECEF=Gg,n.globeECEFOrigin=function(s,i){const o=[0,0,0];return bs(o,o,ef(Lc(i.canonical))),bs(o,o,s),o},n.globeNormalizeECEF=ef,n.globePixelsToTileUnits=function(s,i){return cn/(512*Math.pow(2,s))*N0(Lc(i))},n.globePoleMatrixForTile=function(s,i,o){const h=dl(new Float64Array(16)),p=(i/(1<<s)-.5)*Math.PI*2;return Bp(h,o.globeMatrix,p),Float32Array.from(h)},n.globeTileBounds=Lc,n.globeTiltAtLngLat=Vg,n.globeToMercatorTransition=Od,n.globeUseCustomAntiAliasing=function(s,i,o){const h=Od(o.zoom),p=s.style.map._antialias,v=!!i.extStandardDerivatives,w=i.extStandardDerivativesForceOff||s.terrain&&s.terrain.exaggeration()>0;return h===0&&!p&&!w&&v},n.identity=dl,n.identity$1=og,n.invert=u0,n.isFullscreen=function(){return!!T.document.fullscreenElement||!!T.document.webkitFullscreenElement},n.isLngLatBehindGlobe=$g,n.isMapAuthenticated=function(s){return jt.has(s)},n.isMapboxURL=Dr,n.isSafariWithAntialiasingBug=function(s){const i=s.navigator?s.navigator.userAgent:null;return!!st(s)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.latFromMercatorY=_o,n.latLngToECEF=Jp,n.len=Nx,n.length=Md,n.length$1=function(s){return Math.hypot(s[0],s[1],s[2],s[3])},n.lngFromMercatorX=la,n.loadVectorTile=GT,n.makeRequest=zi,n.mapValue=function(s,i,o,h,p){return y((s-i)/(o-i)*(p-h)+h,h,p)},n.mercatorScale=$m,n.mercatorXfromLng=Yl,n.mercatorYfromLat=Ya,n.mercatorZfromAltitude=Xa,n.mul=ig,n.mul$1=zx,n.multiply=Ed,n.multiply$1=Tu,n.multiply$2=ng,n.nextPowerOfTwo=Z,n.normalize=Zo,n.normalize$1=Fx,n.normalize$2=g_,n.number=Pn,n.ortho=function(s,i,o,h,p,v,w){var R=1/(i-o),Y=1/(h-p),ee=1/(v-w);return s[0]=-2*R,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*Y,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*ee,s[11]=0,s[12]=(i+o)*R,s[13]=(p+h)*Y,s[14]=(w+v)*ee,s[15]=1,s},n.pbf=Xp,n.perspective=function(s,i,o,h,p){var v,w=1/Math.tan(i/2);return s[0]=w/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=w,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,p!=null&&p!==1/0?(s[10]=(p+h)*(v=1/(h-p)),s[14]=2*p*h*v):(s[10]=-1,s[14]=-2*h),s},n.pick=function(s,i){const o={};for(let h=0;h<i.length;h++){const p=i[h];p in s&&(o[p]=s[p])}return o},n.plugin=Ft,n.pointGeometry=U,n.polesInViewport=function(s){const i=dl(new Float64Array(16));Ed(i,s.pixelMatrix,s.globeMatrix);const o=[0,fl,0],h=[0,ml,0];return bs(o,o,i),bs(h,h,i),[o[0]>0&&o[0]<=s.width&&o[1]>0&&o[1]<=s.height&&!$g(s,new Kn(s.center.lat,90)),h[0]>0&&h[0]<=s.width&&h[1]>0&&h[1]<=s.height&&!$g(s,new Kn(s.center.lat,-90))]},n.polygonContainsPoint=Sd,n.polygonIntersectsBox=Jm,n.polygonIntersectsPolygon=c0,n.polygonizeBounds=function(s,i,o=0,h=!0){const p=new U(o,o),v=s.sub(p),w=i.add(p),R=[v,new U(w.x,v.y),w,new U(v.x,w.y)];return h&&R.push(v.clone()),R},n.posAttributes=Kp,n.postMapLoadEvent=ut,n.postPerformanceEvent=Ot,n.postTurnstileEvent=Ve,n.potpack=kg,n.prevPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},n.radToDeg=F,n.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.registerForPluginStateChange=function(s){return s({pluginStatus:lt,pluginURL:tt}),gt.on("pluginStateChange",s),s},n.removeAuthState=function(s){jt.delete(s)},n.renderColorRamp=Np,n.resample=Wm,n.rotateX=eg,n.rotateX$1=__,n.rotateY=Bp,n.rotateY$1=y_,n.rotateZ=function(s,i,o){var h=Math.sin(o),p=Math.cos(o),v=i[0],w=i[1],R=i[2],Y=i[3],ee=i[4],de=i[5],_e=i[6],Te=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=v*p+ee*h,s[1]=w*p+de*h,s[2]=R*p+_e*h,s[3]=Y*p+Te*h,s[4]=ee*p-v*h,s[5]=de*p-w*h,s[6]=_e*p-R*h,s[7]=Te*p-Y*h,s},n.rotateZ$1=function(s,i,o){o*=.5;var h=i[0],p=i[1],v=i[2],w=i[3],R=Math.sin(o),Y=Math.cos(o);return s[0]=h*Y+p*R,s[1]=p*Y-h*R,s[2]=v*Y+w*R,s[3]=w*Y-v*R,s},n.scale=Cd,n.scale$1=m_,n.scale$2=qa,n.scaleAndAdd=Cu,n.set=function(s,i,o,h){return s[0]=i,s[1]=o,s[2]=h,s},n.setCacheLimits=function(s,i){We=s,nt=i},n.setColumn=function(s,i,o){s[4*i+0]=o[0],s[4*i+1]=o[1],s[4*i+2]=o[2],s[4*i+3]=o[3]},n.setRTLTextPlugin=function(s,i,o=!1){if(lt===et||lt===rt||lt===Ye)throw new Error("setRTLTextPlugin cannot be called multiple times.");tt=Qi.resolveURL(s),lt=et,Ze=i,Tt(),o||Wt()},n.smoothstep=b,n.spec=ni,n.squaredLength=function(s){var i=s[0],o=s[1],h=s[2];return i*i+o*o+h*h},n.storeAuthState=function(s,i){i?jt.add(s):jt.delete(s)},n.sub=Kl,n.subtract=Eu,n.symbolSize=C2,n.tileAABB=function(s,i,o,h,p,v,w,R,Y){if(Y.name==="globe")return q2(s,i,new E0(o,h,p));const ee=Rd({z:o,x:h,y:p},Y);return new Ko([(v+ee.x/ee.scale)*i,i*(ee.y/ee.scale),w],[(v+ee.x2/ee.scale)*i,i*(ee.y2/ee.scale),R])},n.tileCornersToBounds=z0,n.tileTransform=Rd,n.transformMat3=function(s,i,o){var h=i[0],p=i[1],v=i[2];return s[0]=h*o[0]+p*o[3]+v*o[6],s[1]=h*o[1]+p*o[4]+v*o[7],s[2]=h*o[2]+p*o[5]+v*o[8],s},n.transformMat4=bs,n.transformMat4$1=jh,n.transformQuat=f_,n.transitionTileAABBinECEF=hy,n.translate=Rp,n.transpose=function(s,i){if(s===i){var o=i[1],h=i[2],p=i[5];s[1]=i[3],s[2]=i[6],s[3]=o,s[5]=i[7],s[6]=h,s[7]=p}else s[0]=i[0],s[1]=i[3],s[2]=i[6],s[3]=i[1],s[4]=i[4],s[5]=i[7],s[6]=i[2],s[7]=i[5],s[8]=i[8];return s},n.triggerPluginCompletionEvent=pt,n.uniqueId=fe,n.updateGlobeVertexNormal=function(s,i,o,h,p){const v=5*i+2;s.float32[v+0]=o,s.float32[v+1]=h,s.float32[v+2]=p},n.validateCustomStyleLayer=function(s){const i=[],o=s.id;return o===void 0&&i.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),i},n.validateFilter=s=>Hl(Tc(s)),n.validateFog=s=>Hl(gd(s)),n.validateLayer=s=>Hl(pu(s)),n.validateLight=s=>Hl(qe(s)),n.validateSource=s=>Hl(Oh(s)),n.validateStyle=Tp,n.validateTerrain=s=>Hl($l(s)),n.values=te,n.vectorTile=v0,n.version=V,n.warnOnce=le,n.window=T,n.wrap=D}),d(["./shared"],function(n){function T(at){if(typeof at=="number"||typeof at=="boolean"||typeof at=="string"||at==null)return JSON.stringify(at);if(Array.isArray(at)){let Ve="[";for(const ot of at)Ve+=`${T(ot)},`;return`${Ve}]`}let Oe="{";for(const Ve of Object.keys(at).sort())Oe+=`${Ve}:${T(at[Ve])},`;return`${Oe}}`}function V(at){let Oe="";for(const Ve of n.refProperties)Oe+=`/${T(at[Ve])}`;return Oe}class Q{constructor(Oe){this.keyCache={},Oe&&this.replace(Oe)}replace(Oe){this._layerConfigs={},this._layers={},this.update(Oe,[])}update(Oe,Ve){for(const ut of Oe)this._layerConfigs[ut.id]=ut,(this._layers[ut.id]=n.createStyleLayer(ut)).compileFilter(),this.keyCache[ut.id]&&delete this.keyCache[ut.id];for(const ut of Ve)delete this.keyCache[ut],delete this._layerConfigs[ut],delete this._layers[ut];this.familiesBySource={};const ot=function(ut,Et){const Ot={};for(let Mt=0;Mt<ut.length;Mt++){const jt=Et&&Et[ut[Mt].id]||V(ut[Mt]);Et&&(Et[ut[Mt].id]=jt);let li=Ot[jt];li||(li=Ot[jt]=[]),li.push(ut[Mt])}const Bt=[];for(const Mt in Ot)Bt.push(Ot[Mt]);return Bt}(n.values(this._layerConfigs),this.keyCache);for(const ut of ot){const Et=ut.map(Ri=>this._layers[Ri.id]),Ot=Et[0];if(Ot.visibility==="none")continue;const Bt=Ot.source||"";let Mt=this.familiesBySource[Bt];Mt||(Mt=this.familiesBySource[Bt]={});const jt=Ot.sourceLayer||"_geojsonTileLayer";let li=Mt[jt];li||(li=Mt[jt]=[]),li.push(Et)}}}class z{loadTile(Oe,Ve){const{uid:ot,encoding:ut,rawImageData:Et,padding:Ot,buildQuadTree:Bt}=Oe,Mt=n.window.ImageBitmap&&Et instanceof n.window.ImageBitmap?this.getImageData(Et,Ot):Et;Ve(null,new n.DEMData(ot,Mt,ut,Ot<1,Bt))}getImageData(Oe,Ve){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Oe.width,Oe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Oe.width,this.offscreenCanvas.height=Oe.height,this.offscreenCanvasContext.drawImage(Oe,0,0,Oe.width,Oe.height);const ot=this.offscreenCanvasContext.getImageData(-Ve,-Ve,Oe.width+2*Ve,Oe.height+2*Ve);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ot}}var W=function at(Oe,Ve){var ot,ut=Oe&&Oe.type;if(ut==="FeatureCollection")for(ot=0;ot<Oe.features.length;ot++)at(Oe.features[ot],Ve);else if(ut==="GeometryCollection")for(ot=0;ot<Oe.geometries.length;ot++)at(Oe.geometries[ot],Ve);else if(ut==="Feature")at(Oe.geometry,Ve);else if(ut==="Polygon")K(Oe.coordinates,Ve);else if(ut==="MultiPolygon")for(ot=0;ot<Oe.coordinates.length;ot++)K(Oe.coordinates[ot],Ve);return Oe};function K(at,Oe){if(at.length!==0){I(at[0],Oe);for(var Ve=1;Ve<at.length;Ve++)I(at[Ve],!Oe)}}function I(at,Oe){for(var Ve=0,ot=0,ut=0,Et=at.length,Ot=Et-1;ut<Et;Ot=ut++){var Bt=(at[ut][0]-at[Ot][0])*(at[Ot][1]+at[ut][1]),Mt=Ve+Bt;ot+=Math.abs(Ve)>=Math.abs(Bt)?Ve-Mt+Bt:Bt-Mt+Ve,Ve=Mt}Ve+ot>=0!=!!Oe&&at.reverse()}const O=n.VectorTileFeature.prototype.toGeoJSON;class ${constructor(Oe){this._feature=Oe,this.extent=n.EXTENT,this.type=Oe.type,this.properties=Oe.tags,"id"in Oe&&!isNaN(Oe.id)&&(this.id=parseInt(Oe.id,10))}loadGeometry(){if(this._feature.type===1){const Oe=[];for(const Ve of this._feature.geometry)Oe.push([new n.pointGeometry(Ve[0],Ve[1])]);return Oe}{const Oe=[];for(const Ve of this._feature.geometry){const ot=[];for(const ut of Ve)ot.push(new n.pointGeometry(ut[0],ut[1]));Oe.push(ot)}return Oe}}toGeoJSON(Oe,Ve,ot){return O.call(this,Oe,Ve,ot)}}class M{constructor(Oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=Oe.length,this._features=Oe}feature(Oe){return new $(this._features[Oe])}}var S={exports:{}},k=n.pointGeometry,G=n.vectorTile.VectorTileFeature,U=C;function C(at,Oe){this.options=Oe||{},this.features=at,this.length=at.length}function ie(at,Oe){this.id=typeof at.id=="number"?at.id:void 0,this.type=at.type,this.rawGeometry=at.type===1?[at.geometry]:at.geometry,this.properties=at.tags,this.extent=Oe||4096}C.prototype.feature=function(at){return new ie(this.features[at],this.options.extent)},ie.prototype.loadGeometry=function(){var at=this.rawGeometry;this.geometry=[];for(var Oe=0;Oe<at.length;Oe++){for(var Ve=at[Oe],ot=[],ut=0;ut<Ve.length;ut++)ot.push(new k(Ve[ut][0],Ve[ut][1]));this.geometry.push(ot)}return this.geometry},ie.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var at=this.geometry,Oe=1/0,Ve=-1/0,ot=1/0,ut=-1/0,Et=0;Et<at.length;Et++)for(var Ot=at[Et],Bt=0;Bt<Ot.length;Bt++){var Mt=Ot[Bt];Oe=Math.min(Oe,Mt.x),Ve=Math.max(Ve,Mt.x),ot=Math.min(ot,Mt.y),ut=Math.max(ut,Mt.y)}return[Oe,ot,Ve,ut]},ie.prototype.toGeoJSON=G.prototype.toGeoJSON;var J=n.pbf,N=U;function F(at){var Oe=new J;return function(Ve,ot){for(var ut in Ve.layers)ot.writeMessage(3,H,Ve.layers[ut])}(at,Oe),Oe.finish()}function H(at,Oe){var Ve;Oe.writeVarintField(15,at.version||1),Oe.writeStringField(1,at.name||""),Oe.writeVarintField(5,at.extent||4096);var ot={keys:[],values:[],keycache:{},valuecache:{}};for(Ve=0;Ve<at.length;Ve++)ot.feature=at.feature(Ve),Oe.writeMessage(2,E,ot);var ut=ot.keys;for(Ve=0;Ve<ut.length;Ve++)Oe.writeStringField(3,ut[Ve]);var Et=ot.values;for(Ve=0;Ve<Et.length;Ve++)Oe.writeMessage(4,D,Et[Ve])}function E(at,Oe){var Ve=at.feature;Ve.id!==void 0&&Oe.writeVarintField(1,Ve.id),Oe.writeMessage(2,L,at),Oe.writeVarintField(3,Ve.type),Oe.writeMessage(4,b,Ve)}function L(at,Oe){var Ve=at.feature,ot=at.keys,ut=at.values,Et=at.keycache,Ot=at.valuecache;for(var Bt in Ve.properties){var Mt=Ve.properties[Bt],jt=Et[Bt];if(Mt!==null){jt===void 0&&(ot.push(Bt),Et[Bt]=jt=ot.length-1),Oe.writeVarint(jt);var li=typeof Mt;li!=="string"&&li!=="boolean"&&li!=="number"&&(Mt=JSON.stringify(Mt));var Ri=li+":"+Mt,_i=Ot[Ri];_i===void 0&&(ut.push(Mt),Ot[Ri]=_i=ut.length-1),Oe.writeVarint(_i)}}}function f(at,Oe){return(Oe<<3)+(7&at)}function y(at){return at<<1^at>>31}function b(at,Oe){for(var Ve=at.loadGeometry(),ot=at.type,ut=0,Et=0,Ot=Ve.length,Bt=0;Bt<Ot;Bt++){var Mt=Ve[Bt],jt=1;ot===1&&(jt=Mt.length),Oe.writeVarint(f(1,jt));for(var li=ot===3?Mt.length-1:Mt.length,Ri=0;Ri<li;Ri++){Ri===1&&ot!==1&&Oe.writeVarint(f(2,li-1));var _i=Mt[Ri].x-ut,on=Mt[Ri].y-Et;Oe.writeVarint(y(_i)),Oe.writeVarint(y(on)),ut+=_i,Et+=on}ot===3&&Oe.writeVarint(f(7,1))}}function D(at,Oe){var Ve=typeof at;Ve==="string"?Oe.writeStringField(1,at):Ve==="boolean"?Oe.writeBooleanField(7,at):Ve==="number"&&(at%1!=0?Oe.writeDoubleField(3,at):at<0?Oe.writeSVarintField(6,at):Oe.writeVarintField(5,at))}function X(at,Oe,Ve,ot,ut,Et){if(ut-ot<=Ve)return;const Ot=ot+ut>>1;te(at,Oe,Ot,ot,ut,Et%2),X(at,Oe,Ve,ot,Ot-1,Et+1),X(at,Oe,Ve,Ot+1,ut,Et+1)}function te(at,Oe,Ve,ot,ut,Et){for(;ut>ot;){if(ut-ot>600){const jt=ut-ot+1,li=Ve-ot+1,Ri=Math.log(jt),_i=.5*Math.exp(2*Ri/3),on=.5*Math.sqrt(Ri*_i*(jt-_i)/jt)*(li-jt/2<0?-1:1);te(at,Oe,Ve,Math.max(ot,Math.floor(Ve-li*_i/jt+on)),Math.min(ut,Math.floor(Ve+(jt-li)*_i/jt+on)),Et)}const Ot=Oe[2*Ve+Et];let Bt=ot,Mt=ut;for(q(at,Oe,ot,Ve),Oe[2*ut+Et]>Ot&&q(at,Oe,ot,ut);Bt<Mt;){for(q(at,Oe,Bt,Mt),Bt++,Mt--;Oe[2*Bt+Et]<Ot;)Bt++;for(;Oe[2*Mt+Et]>Ot;)Mt--}Oe[2*ot+Et]===Ot?q(at,Oe,ot,Mt):(Mt++,q(at,Oe,Mt,ut)),Mt<=Ve&&(ot=Mt+1),Ve<=Mt&&(ut=Mt-1)}}function q(at,Oe,Ve,ot){ce(at,Ve,ot),ce(Oe,2*Ve,2*ot),ce(Oe,2*Ve+1,2*ot+1)}function ce(at,Oe,Ve){const ot=at[Oe];at[Oe]=at[Ve],at[Ve]=ot}function fe(at,Oe,Ve,ot){const ut=at-Ve,Et=Oe-ot;return ut*ut+Et*Et}S.exports=F,S.exports.fromVectorTileJs=F,S.exports.fromGeojsonVt=function(at,Oe){Oe=Oe||{};var Ve={};for(var ot in at)Ve[ot]=new N(at[ot].features,Oe),Ve[ot].name=ot,Ve[ot].version=Oe.version,Ve[ot].extent=Oe.extent;return F({layers:Ve})},S.exports.GeoJSONWrapper=N;const we=at=>at[0],Z=at=>at[1];class se{constructor(Oe,Ve=we,ot=Z,ut=64,Et=Float64Array){this.nodeSize=ut,this.points=Oe;const Ot=Oe.length<65536?Uint16Array:Uint32Array,Bt=this.ids=new Ot(Oe.length),Mt=this.coords=new Et(2*Oe.length);for(let jt=0;jt<Oe.length;jt++)Bt[jt]=jt,Mt[2*jt]=Ve(Oe[jt]),Mt[2*jt+1]=ot(Oe[jt]);X(Bt,Mt,ut,0,Bt.length-1,0)}range(Oe,Ve,ot,ut){return function(Et,Ot,Bt,Mt,jt,li,Ri){const _i=[0,Et.length-1,0],on=[];let rn,Xi;for(;_i.length;){const hn=_i.pop(),Nn=_i.pop(),er=_i.pop();if(Nn-er<=Ri){for(let lr=er;lr<=Nn;lr++)rn=Ot[2*lr],Xi=Ot[2*lr+1],rn>=Bt&&rn<=jt&&Xi>=Mt&&Xi<=li&&on.push(Et[lr]);continue}const Qi=Math.floor((er+Nn)/2);rn=Ot[2*Qi],Xi=Ot[2*Qi+1],rn>=Bt&&rn<=jt&&Xi>=Mt&&Xi<=li&&on.push(Et[Qi]);const Tr=(hn+1)%2;(hn===0?Bt<=rn:Mt<=Xi)&&(_i.push(er),_i.push(Qi-1),_i.push(Tr)),(hn===0?jt>=rn:li>=Xi)&&(_i.push(Qi+1),_i.push(Nn),_i.push(Tr))}return on}(this.ids,this.coords,Oe,Ve,ot,ut,this.nodeSize)}within(Oe,Ve,ot){return function(ut,Et,Ot,Bt,Mt,jt){const li=[0,ut.length-1,0],Ri=[],_i=Mt*Mt;for(;li.length;){const on=li.pop(),rn=li.pop(),Xi=li.pop();if(rn-Xi<=jt){for(let Tr=Xi;Tr<=rn;Tr++)fe(Et[2*Tr],Et[2*Tr+1],Ot,Bt)<=_i&&Ri.push(ut[Tr]);continue}const hn=Math.floor((Xi+rn)/2),Nn=Et[2*hn],er=Et[2*hn+1];fe(Nn,er,Ot,Bt)<=_i&&Ri.push(ut[hn]);const Qi=(on+1)%2;(on===0?Ot-Mt<=Nn:Bt-Mt<=er)&&(li.push(Xi),li.push(hn-1),li.push(Qi)),(on===0?Ot+Mt>=Nn:Bt+Mt>=er)&&(li.push(hn+1),li.push(rn),li.push(Qi))}return Ri}(this.ids,this.coords,Oe,Ve,ot,this.nodeSize)}}const ue={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:at=>at},ye=Math.fround||(Pe=new Float32Array(1),at=>(Pe[0]=+at,Pe[0]));var Pe;class ae{constructor(Oe){this.options=Ne(Object.create(ue),Oe),this.trees=new Array(this.options.maxZoom+1)}load(Oe){const{log:Ve,minZoom:ot,maxZoom:ut,nodeSize:Et}=this.options;Ve&&console.time("total time");const Ot=`prepare ${Oe.length} points`;Ve&&console.time(Ot),this.points=Oe;let Bt=[];for(let Mt=0;Mt<Oe.length;Mt++)Oe[Mt].geometry&&Bt.push(ve(Oe[Mt],Mt));this.trees[ut+1]=new se(Bt,st,it,Et,Float32Array),Ve&&console.timeEnd(Ot);for(let Mt=ut;Mt>=ot;Mt--){const jt=+Date.now();Bt=this._cluster(Bt,Mt),this.trees[Mt]=new se(Bt,st,it,Et,Float32Array),Ve&&console.log("z%d: %d clusters in %dms",Mt,Bt.length,+Date.now()-jt)}return Ve&&console.timeEnd("total time"),this}getClusters(Oe,Ve){let ot=((Oe[0]+180)%360+360)%360-180;const ut=Math.max(-90,Math.min(90,Oe[1]));let Et=Oe[2]===180?180:((Oe[2]+180)%360+360)%360-180;const Ot=Math.max(-90,Math.min(90,Oe[3]));if(Oe[2]-Oe[0]>=360)ot=-180,Et=180;else if(ot>Et){const li=this.getClusters([ot,ut,180,Ot],Ve),Ri=this.getClusters([-180,ut,Et,Ot],Ve);return li.concat(Ri)}const Bt=this.trees[this._limitZoom(Ve)],Mt=Bt.range(be(ot),Le(Ot),be(Et),Le(ut)),jt=[];for(const li of Mt){const Ri=Bt.points[li];jt.push(Ri.numPoints?le(Ri):this.points[Ri.index])}return jt}getChildren(Oe){const Ve=this._getOriginId(Oe),ot=this._getOriginZoom(Oe),ut="No cluster with the specified id.",Et=this.trees[ot];if(!Et)throw new Error(ut);const Ot=Et.points[Ve];if(!Ot)throw new Error(ut);const Bt=this.options.radius/(this.options.extent*Math.pow(2,ot-1)),Mt=Et.within(Ot.x,Ot.y,Bt),jt=[];for(const li of Mt){const Ri=Et.points[li];Ri.parentId===Oe&&jt.push(Ri.numPoints?le(Ri):this.points[Ri.index])}if(jt.length===0)throw new Error(ut);return jt}getLeaves(Oe,Ve,ot){const ut=[];return this._appendLeaves(ut,Oe,Ve=Ve||10,ot=ot||0,0),ut}getTile(Oe,Ve,ot){const ut=this.trees[this._limitZoom(Oe)],Et=Math.pow(2,Oe),{extent:Ot,radius:Bt}=this.options,Mt=Bt/Ot,jt=(ot-Mt)/Et,li=(ot+1+Mt)/Et,Ri={features:[]};return this._addTileFeatures(ut.range((Ve-Mt)/Et,jt,(Ve+1+Mt)/Et,li),ut.points,Ve,ot,Et,Ri),Ve===0&&this._addTileFeatures(ut.range(1-Mt/Et,jt,1,li),ut.points,Et,ot,Et,Ri),Ve===Et-1&&this._addTileFeatures(ut.range(0,jt,Mt/Et,li),ut.points,-1,ot,Et,Ri),Ri.features.length?Ri:null}getClusterExpansionZoom(Oe){let Ve=this._getOriginZoom(Oe)-1;for(;Ve<=this.options.maxZoom;){const ot=this.getChildren(Oe);if(Ve++,ot.length!==1)break;Oe=ot[0].properties.cluster_id}return Ve}_appendLeaves(Oe,Ve,ot,ut,Et){const Ot=this.getChildren(Ve);for(const Bt of Ot){const Mt=Bt.properties;if(Mt&&Mt.cluster?Et+Mt.point_count<=ut?Et+=Mt.point_count:Et=this._appendLeaves(Oe,Mt.cluster_id,ot,ut,Et):Et<ut?Et++:Oe.push(Bt),Oe.length===ot)break}return Et}_addTileFeatures(Oe,Ve,ot,ut,Et,Ot){for(const Bt of Oe){const Mt=Ve[Bt],jt=Mt.numPoints;let li,Ri,_i;if(jt)li=me(Mt),Ri=Mt.x,_i=Mt.y;else{const Xi=this.points[Mt.index];li=Xi.properties,Ri=be(Xi.geometry.coordinates[0]),_i=Le(Xi.geometry.coordinates[1])}const on={type:1,geometry:[[Math.round(this.options.extent*(Ri*Et-ot)),Math.round(this.options.extent*(_i*Et-ut))]],tags:li};let rn;jt?rn=Mt.id:this.options.generateId?rn=Mt.index:this.points[Mt.index].id&&(rn=this.points[Mt.index].id),rn!==void 0&&(on.id=rn),Ot.features.push(on)}}_limitZoom(Oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+Oe),this.options.maxZoom+1))}_cluster(Oe,Ve){const ot=[],{radius:ut,extent:Et,reduce:Ot,minPoints:Bt}=this.options,Mt=ut/(Et*Math.pow(2,Ve));for(let jt=0;jt<Oe.length;jt++){const li=Oe[jt];if(li.zoom<=Ve)continue;li.zoom=Ve;const Ri=this.trees[Ve+1],_i=Ri.within(li.x,li.y,Mt),on=li.numPoints||1;let rn=on;for(const Xi of _i){const hn=Ri.points[Xi];hn.zoom>Ve&&(rn+=hn.numPoints||1)}if(rn>on&&rn>=Bt){let Xi=li.x*on,hn=li.y*on,Nn=Ot&&on>1?this._map(li,!0):null;const er=(jt<<5)+(Ve+1)+this.points.length;for(const Qi of _i){const Tr=Ri.points[Qi];if(Tr.zoom<=Ve)continue;Tr.zoom=Ve;const lr=Tr.numPoints||1;Xi+=Tr.x*lr,hn+=Tr.y*lr,Tr.parentId=er,Ot&&(Nn||(Nn=this._map(li,!0)),Ot(Nn,this._map(Tr)))}li.parentId=er,ot.push(xe(Xi/rn,hn/rn,er,rn,Nn))}else if(ot.push(li),rn>1)for(const Xi of _i){const hn=Ri.points[Xi];hn.zoom<=Ve||(hn.zoom=Ve,ot.push(hn))}}return ot}_getOriginId(Oe){return Oe-this.points.length>>5}_getOriginZoom(Oe){return(Oe-this.points.length)%32}_map(Oe,Ve){if(Oe.numPoints)return Ve?Ne({},Oe.properties):Oe.properties;const ot=this.points[Oe.index].properties,ut=this.options.map(ot);return Ve&&ut===ot?Ne({},ut):ut}}function xe(at,Oe,Ve,ot,ut){return{x:ye(at),y:ye(Oe),zoom:1/0,id:Ve,parentId:-1,numPoints:ot,properties:ut}}function ve(at,Oe){const[Ve,ot]=at.geometry.coordinates;return{x:ye(be(Ve)),y:ye(Le(ot)),zoom:1/0,index:Oe,parentId:-1}}function le(at){return{type:"Feature",id:at.id,properties:me(at),geometry:{type:"Point",coordinates:[(Oe=at.x,360*(Oe-.5)),De(at.y)]}};var Oe}function me(at){const Oe=at.numPoints,Ve=Oe>=1e4?`${Math.round(Oe/1e3)}k`:Oe>=1e3?Math.round(Oe/100)/10+"k":Oe;return Ne(Ne({},at.properties),{cluster:!0,cluster_id:at.id,point_count:Oe,point_count_abbreviated:Ve})}function be(at){return at/360+.5}function Le(at){const Oe=Math.sin(at*Math.PI/180),Ve=.5-.25*Math.log((1+Oe)/(1-Oe))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function De(at){const Oe=(180-360*at)*Math.PI/180;return 360*Math.atan(Math.exp(Oe))/Math.PI-90}function Ne(at,Oe){for(const Ve in Oe)at[Ve]=Oe[Ve];return at}function st(at){return at.x}function it(at){return at.y}function ht(at,Oe,Ve,ot){for(var ut,Et=ot,Ot=Ve-Oe>>1,Bt=Ve-Oe,Mt=at[Oe],jt=at[Oe+1],li=at[Ve],Ri=at[Ve+1],_i=Oe+3;_i<Ve;_i+=3){var on=ke(at[_i],at[_i+1],Mt,jt,li,Ri);if(on>Et)ut=_i,Et=on;else if(on===Et){var rn=Math.abs(_i-Ot);rn<Bt&&(ut=_i,Bt=rn)}}Et>ot&&(ut-Oe>3&&ht(at,Oe,ut,ot),at[ut+2]=Et,Ve-ut>3&&ht(at,ut,Ve,ot))}function ke(at,Oe,Ve,ot,ut,Et){var Ot=ut-Ve,Bt=Et-ot;if(Ot!==0||Bt!==0){var Mt=((at-Ve)*Ot+(Oe-ot)*Bt)/(Ot*Ot+Bt*Bt);Mt>1?(Ve=ut,ot=Et):Mt>0&&(Ve+=Ot*Mt,ot+=Bt*Mt)}return(Ot=at-Ve)*Ot+(Bt=Oe-ot)*Bt}function Be(at,Oe,Ve,ot){var ut={id:at===void 0?null:at,type:Oe,geometry:Ve,tags:ot,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Et){var Ot=Et.geometry,Bt=Et.type;if(Bt==="Point"||Bt==="MultiPoint"||Bt==="LineString")Ue(Et,Ot);else if(Bt==="Polygon"||Bt==="MultiLineString")for(var Mt=0;Mt<Ot.length;Mt++)Ue(Et,Ot[Mt]);else if(Bt==="MultiPolygon")for(Mt=0;Mt<Ot.length;Mt++)for(var jt=0;jt<Ot[Mt].length;jt++)Ue(Et,Ot[Mt][jt])}(ut),ut}function Ue(at,Oe){for(var Ve=0;Ve<Oe.length;Ve+=3)at.minX=Math.min(at.minX,Oe[Ve]),at.minY=Math.min(at.minY,Oe[Ve+1]),at.maxX=Math.max(at.maxX,Oe[Ve]),at.maxY=Math.max(at.maxY,Oe[Ve+1])}function We(at,Oe,Ve,ot){if(Oe.geometry){var ut=Oe.geometry.coordinates,Et=Oe.geometry.type,Ot=Math.pow(Ve.tolerance/((1<<Ve.maxZoom)*Ve.extent),2),Bt=[],Mt=Oe.id;if(Ve.promoteId?Mt=Oe.properties[Ve.promoteId]:Ve.generateId&&(Mt=ot||0),Et==="Point")nt(ut,Bt);else if(Et==="MultiPoint")for(var jt=0;jt<ut.length;jt++)nt(ut[jt],Bt);else if(Et==="LineString")wt(ut,Bt,Ot,!1);else if(Et==="MultiLineString"){if(Ve.lineMetrics){for(jt=0;jt<ut.length;jt++)wt(ut[jt],Bt=[],Ot,!1),at.push(Be(Mt,"LineString",Bt,Oe.properties));return}Ut(ut,Bt,Ot,!1)}else if(Et==="Polygon")Ut(ut,Bt,Ot,!0);else{if(Et!=="MultiPolygon"){if(Et==="GeometryCollection"){for(jt=0;jt<Oe.geometry.geometries.length;jt++)We(at,{id:Mt,geometry:Oe.geometry.geometries[jt],properties:Oe.properties},Ve,ot);return}throw new Error("Input data is not a valid GeoJSON object.")}for(jt=0;jt<ut.length;jt++){var li=[];Ut(ut[jt],li,Ot,!0),Bt.push(li)}}at.push(Be(Mt,Et,Bt,Oe.properties))}}function nt(at,Oe){Oe.push(Vt(at[0])),Oe.push(yi(at[1])),Oe.push(0)}function wt(at,Oe,Ve,ot){for(var ut,Et,Ot=0,Bt=0;Bt<at.length;Bt++){var Mt=Vt(at[Bt][0]),jt=yi(at[Bt][1]);Oe.push(Mt),Oe.push(jt),Oe.push(0),Bt>0&&(Ot+=ot?(ut*jt-Mt*Et)/2:Math.sqrt(Math.pow(Mt-ut,2)+Math.pow(jt-Et,2))),ut=Mt,Et=jt}var li=Oe.length-3;Oe[2]=1,ht(Oe,0,li,Ve),Oe[li+2]=1,Oe.size=Math.abs(Ot),Oe.start=0,Oe.end=Oe.size}function Ut(at,Oe,Ve,ot){for(var ut=0;ut<at.length;ut++){var Et=[];wt(at[ut],Et,Ve,ot),Oe.push(Et)}}function Vt(at){return at/360+.5}function yi(at){var Oe=Math.sin(at*Math.PI/180),Ve=.5-.25*Math.log((1+Oe)/(1-Oe))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function ri(at,Oe,Ve,ot,ut,Et,Ot,Bt){if(ot/=Oe,Et>=(Ve/=Oe)&&Ot<ot)return at;if(Ot<Ve||Et>=ot)return null;for(var Mt=[],jt=0;jt<at.length;jt++){var li=at[jt],Ri=li.geometry,_i=li.type,on=ut===0?li.minX:li.minY,rn=ut===0?li.maxX:li.maxY;if(on>=Ve&&rn<ot)Mt.push(li);else if(!(rn<Ve||on>=ot)){var Xi=[];if(_i==="Point"||_i==="MultiPoint")Mi(Ri,Xi,Ve,ot,ut);else if(_i==="LineString")$i(Ri,Xi,Ve,ot,ut,!1,Bt.lineMetrics);else if(_i==="MultiLineString")qi(Ri,Xi,Ve,ot,ut,!1);else if(_i==="Polygon")qi(Ri,Xi,Ve,ot,ut,!0);else if(_i==="MultiPolygon")for(var hn=0;hn<Ri.length;hn++){var Nn=[];qi(Ri[hn],Nn,Ve,ot,ut,!0),Nn.length&&Xi.push(Nn)}if(Xi.length){if(Bt.lineMetrics&&_i==="LineString"){for(hn=0;hn<Xi.length;hn++)Mt.push(Be(li.id,_i,Xi[hn],li.tags));continue}_i!=="LineString"&&_i!=="MultiLineString"||(Xi.length===1?(_i="LineString",Xi=Xi[0]):_i="MultiLineString"),_i!=="Point"&&_i!=="MultiPoint"||(_i=Xi.length===3?"Point":"MultiPoint"),Mt.push(Be(li.id,_i,Xi,li.tags))}}}return Mt.length?Mt:null}function Mi(at,Oe,Ve,ot,ut){for(var Et=0;Et<at.length;Et+=3){var Ot=at[Et+ut];Ot>=Ve&&Ot<=ot&&(Oe.push(at[Et]),Oe.push(at[Et+1]),Oe.push(at[Et+2]))}}function $i(at,Oe,Ve,ot,ut,Et,Ot){for(var Bt,Mt,jt=zi(at),li=ut===0?_n:wn,Ri=at.start,_i=0;_i<at.length-3;_i+=3){var on=at[_i],rn=at[_i+1],Xi=at[_i+2],hn=at[_i+3],Nn=at[_i+4],er=ut===0?on:rn,Qi=ut===0?hn:Nn,Tr=!1;Ot&&(Bt=Math.sqrt(Math.pow(on-hn,2)+Math.pow(rn-Nn,2))),er<Ve?Qi>Ve&&(Mt=li(jt,on,rn,hn,Nn,Ve),Ot&&(jt.start=Ri+Bt*Mt)):er>ot?Qi<ot&&(Mt=li(jt,on,rn,hn,Nn,ot),Ot&&(jt.start=Ri+Bt*Mt)):Oi(jt,on,rn,Xi),Qi<Ve&&er>=Ve&&(Mt=li(jt,on,rn,hn,Nn,Ve),Tr=!0),Qi>ot&&er<=ot&&(Mt=li(jt,on,rn,hn,Nn,ot),Tr=!0),!Et&&Tr&&(Ot&&(jt.end=Ri+Bt*Mt),Oe.push(jt),jt=zi(at)),Ot&&(Ri+=Bt)}var lr=at.length-3;on=at[lr],rn=at[lr+1],Xi=at[lr+2],(er=ut===0?on:rn)>=Ve&&er<=ot&&Oi(jt,on,rn,Xi),lr=jt.length-3,Et&&lr>=3&&(jt[lr]!==jt[0]||jt[lr+1]!==jt[1])&&Oi(jt,jt[0],jt[1],jt[2]),jt.length&&Oe.push(jt)}function zi(at){var Oe=[];return Oe.size=at.size,Oe.start=at.start,Oe.end=at.end,Oe}function qi(at,Oe,Ve,ot,ut,Et){for(var Ot=0;Ot<at.length;Ot++)$i(at[Ot],Oe,Ve,ot,ut,Et,!1)}function Oi(at,Oe,Ve,ot){at.push(Oe),at.push(Ve),at.push(ot)}function _n(at,Oe,Ve,ot,ut,Et){var Ot=(Et-Oe)/(ot-Oe);return at.push(Et),at.push(Ve+(ut-Ve)*Ot),at.push(1),Ot}function wn(at,Oe,Ve,ot,ut,Et){var Ot=(Et-Ve)/(ut-Ve);return at.push(Oe+(ot-Oe)*Ot),at.push(Et),at.push(1),Ot}function Yn(at,Oe){for(var Ve=[],ot=0;ot<at.length;ot++){var ut,Et=at[ot],Ot=Et.type;if(Ot==="Point"||Ot==="MultiPoint"||Ot==="LineString")ut=Ts(Et.geometry,Oe);else if(Ot==="MultiLineString"||Ot==="Polygon"){ut=[];for(var Bt=0;Bt<Et.geometry.length;Bt++)ut.push(Ts(Et.geometry[Bt],Oe))}else if(Ot==="MultiPolygon")for(ut=[],Bt=0;Bt<Et.geometry.length;Bt++){for(var Mt=[],jt=0;jt<Et.geometry[Bt].length;jt++)Mt.push(Ts(Et.geometry[Bt][jt],Oe));ut.push(Mt)}Ve.push(Be(Et.id,Ot,ut,Et.tags))}return Ve}function Ts(at,Oe){var Ve=[];Ve.size=at.size,at.start!==void 0&&(Ve.start=at.start,Ve.end=at.end);for(var ot=0;ot<at.length;ot+=3)Ve.push(at[ot]+Oe,at[ot+1],at[ot+2]);return Ve}function ur(at,Oe){if(at.transformed)return at;var Ve,ot,ut,Et=1<<at.z,Ot=at.x,Bt=at.y;for(Ve=0;Ve<at.features.length;Ve++){var Mt=at.features[Ve],jt=Mt.geometry,li=Mt.type;if(Mt.geometry=[],li===1)for(ot=0;ot<jt.length;ot+=2)Mt.geometry.push(Dr(jt[ot],jt[ot+1],Oe,Et,Ot,Bt));else for(ot=0;ot<jt.length;ot++){var Ri=[];for(ut=0;ut<jt[ot].length;ut+=2)Ri.push(Dr(jt[ot][ut],jt[ot][ut+1],Oe,Et,Ot,Bt));Mt.geometry.push(Ri)}}return at.transformed=!0,at}function Dr(at,Oe,Ve,ot,ut,Et){return[Math.round(Ve*(at*ot-ut)),Math.round(Ve*(Oe*ot-Et))]}function Ir(at,Oe,Ve,ot,ut){for(var Et=Oe===ut.maxZoom?0:ut.tolerance/((1<<Oe)*ut.extent),Ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ve,y:ot,z:Oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Bt=0;Bt<at.length;Bt++){Ot.numFeatures++,za(Ot,at[Bt],Et,ut);var Mt=at[Bt].minX,jt=at[Bt].minY,li=at[Bt].maxX,Ri=at[Bt].maxY;Mt<Ot.minX&&(Ot.minX=Mt),jt<Ot.minY&&(Ot.minY=jt),li>Ot.maxX&&(Ot.maxX=li),Ri>Ot.maxY&&(Ot.maxY=Ri)}return Ot}function za(at,Oe,Ve,ot){var ut=Oe.geometry,Et=Oe.type,Ot=[];if(Et==="Point"||Et==="MultiPoint")for(var Bt=0;Bt<ut.length;Bt+=3)Ot.push(ut[Bt]),Ot.push(ut[Bt+1]),at.numPoints++,at.numSimplified++;else if(Et==="LineString")uc(Ot,ut,at,Ve,!1,!1);else if(Et==="MultiLineString"||Et==="Polygon")for(Bt=0;Bt<ut.length;Bt++)uc(Ot,ut[Bt],at,Ve,Et==="Polygon",Bt===0);else if(Et==="MultiPolygon")for(var Mt=0;Mt<ut.length;Mt++){var jt=ut[Mt];for(Bt=0;Bt<jt.length;Bt++)uc(Ot,jt[Bt],at,Ve,!0,Bt===0)}if(Ot.length){var li=Oe.tags||null;if(Et==="LineString"&&ot.lineMetrics){for(var Ri in li={},Oe.tags)li[Ri]=Oe.tags[Ri];li.mapbox_clip_start=ut.start/ut.size,li.mapbox_clip_end=ut.end/ut.size}var _i={geometry:Ot,type:Et==="Polygon"||Et==="MultiPolygon"?3:Et==="LineString"||Et==="MultiLineString"?2:1,tags:li};Oe.id!==null&&(_i.id=Oe.id),at.features.push(_i)}}function uc(at,Oe,Ve,ot,ut,Et){var Ot=ot*ot;if(ot>0&&Oe.size<(ut?Ot:ot))Ve.numPoints+=Oe.length/3;else{for(var Bt=[],Mt=0;Mt<Oe.length;Mt+=3)(ot===0||Oe[Mt+2]>Ot)&&(Ve.numSimplified++,Bt.push(Oe[Mt]),Bt.push(Oe[Mt+1])),Ve.numPoints++;ut&&function(jt,li){for(var Ri=0,_i=0,on=jt.length,rn=on-2;_i<on;rn=_i,_i+=2)Ri+=(jt[_i]-jt[rn])*(jt[_i+1]+jt[rn+1]);if(Ri>0===li)for(_i=0,on=jt.length;_i<on/2;_i+=2){var Xi=jt[_i],hn=jt[_i+1];jt[_i]=jt[on-2-_i],jt[_i+1]=jt[on-1-_i],jt[on-2-_i]=Xi,jt[on-1-_i]=hn}}(Bt,Et),at.push(Bt)}}function Ml(at,Oe){var Ve=(Oe=this.options=function(ut,Et){for(var Ot in Et)ut[Ot]=Et[Ot];return ut}(Object.create(this.options),Oe)).debug;if(Ve&&console.time("preprocess data"),Oe.maxZoom<0||Oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Oe.promoteId&&Oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var ot=function(ut,Et){var Ot=[];if(ut.type==="FeatureCollection")for(var Bt=0;Bt<ut.features.length;Bt++)We(Ot,ut.features[Bt],Et,Bt);else We(Ot,ut.type==="Feature"?ut:{geometry:ut},Et);return Ot}(at,Oe);this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Oe.indexMaxZoom,Oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ot=function(ut,Et){var Ot=Et.buffer/Et.extent,Bt=ut,Mt=ri(ut,1,-1-Ot,Ot,0,-1,2,Et),jt=ri(ut,1,1-Ot,2+Ot,0,-1,2,Et);return(Mt||jt)&&(Bt=ri(ut,1,-Ot,1+Ot,0,-1,2,Et)||[],Mt&&(Bt=Yn(Mt,1).concat(Bt)),jt&&(Bt=Bt.concat(Yn(jt,-1)))),Bt}(ot,Oe),ot.length&&this.splitTile(ot,0,0,0),Ve&&(ot.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ja(at,Oe,Ve){return 32*((1<<at)*Ve+Oe)+at}function io(at,Oe){const Ve=at.tileID.canonical;if(!this._geoJSONIndex)return Oe(null,null);const ot=this._geoJSONIndex.getTile(Ve.z,Ve.x,Ve.y);if(!ot)return Oe(null,null);const ut=new M(ot.features);let Et=S.exports(ut);Et.byteOffset===0&&Et.byteLength===Et.buffer.byteLength||(Et=new Uint8Array(Et)),Oe(null,{vectorTile:ut,rawData:Et.buffer})}Ml.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ml.prototype.splitTile=function(at,Oe,Ve,ot,ut,Et,Ot){for(var Bt=[at,Oe,Ve,ot],Mt=this.options,jt=Mt.debug;Bt.length;){ot=Bt.pop(),Ve=Bt.pop(),Oe=Bt.pop(),at=Bt.pop();var li=1<<Oe,Ri=Ja(Oe,Ve,ot),_i=this.tiles[Ri];if(!_i&&(jt>1&&console.time("creation"),_i=this.tiles[Ri]=Ir(at,Oe,Ve,ot,Mt),this.tileCoords.push({z:Oe,x:Ve,y:ot}),jt)){jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Oe,Ve,ot,_i.numFeatures,_i.numPoints,_i.numSimplified),console.timeEnd("creation"));var on="z"+Oe;this.stats[on]=(this.stats[on]||0)+1,this.total++}if(_i.source=at,ut){if(Oe===Mt.maxZoom||Oe===ut)continue;var rn=1<<ut-Oe;if(Ve!==Math.floor(Et/rn)||ot!==Math.floor(Ot/rn))continue}else if(Oe===Mt.indexMaxZoom||_i.numPoints<=Mt.indexMaxPoints)continue;if(_i.source=null,at.length!==0){jt>1&&console.time("clipping");var Xi,hn,Nn,er,Qi,Tr,lr=.5*Mt.buffer/Mt.extent,ga=.5-lr,el=.5+lr,wo=1+lr;Xi=hn=Nn=er=null,Qi=ri(at,li,Ve-lr,Ve+el,0,_i.minX,_i.maxX,Mt),Tr=ri(at,li,Ve+ga,Ve+wo,0,_i.minX,_i.maxX,Mt),at=null,Qi&&(Xi=ri(Qi,li,ot-lr,ot+el,1,_i.minY,_i.maxY,Mt),hn=ri(Qi,li,ot+ga,ot+wo,1,_i.minY,_i.maxY,Mt),Qi=null),Tr&&(Nn=ri(Tr,li,ot-lr,ot+el,1,_i.minY,_i.maxY,Mt),er=ri(Tr,li,ot+ga,ot+wo,1,_i.minY,_i.maxY,Mt),Tr=null),jt>1&&console.timeEnd("clipping"),Bt.push(Xi||[],Oe+1,2*Ve,2*ot),Bt.push(hn||[],Oe+1,2*Ve,2*ot+1),Bt.push(Nn||[],Oe+1,2*Ve+1,2*ot),Bt.push(er||[],Oe+1,2*Ve+1,2*ot+1)}}},Ml.prototype.getTile=function(at,Oe,Ve){var ot=this.options,ut=ot.extent,Et=ot.debug;if(at<0||at>24)return null;var Ot=1<<at,Bt=Ja(at,Oe=(Oe%Ot+Ot)%Ot,Ve);if(this.tiles[Bt])return ur(this.tiles[Bt],ut);Et>1&&console.log("drilling down to z%d-%d-%d",at,Oe,Ve);for(var Mt,jt=at,li=Oe,Ri=Ve;!Mt&&jt>0;)jt--,li=Math.floor(li/2),Ri=Math.floor(Ri/2),Mt=this.tiles[Ja(jt,li,Ri)];return Mt&&Mt.source?(Et>1&&console.log("found parent tile z%d-%d-%d",jt,li,Ri),Et>1&&console.time("drilling down"),this.splitTile(Mt.source,jt,li,Ri,at,Oe,Ve),Et>1&&console.timeEnd("drilling down"),this.tiles[Bt]?ur(this.tiles[Bt],ut):null):null};class Qa extends n.VectorTileWorkerSource{constructor(Oe,Ve,ot,ut,Et){super(Oe,Ve,ot,ut,io),Et&&(this.loadGeoJSON=Et)}loadData(Oe,Ve){const ot=Oe&&Oe.request,ut=ot&&ot.collectResourceTiming;this.loadGeoJSON(Oe,(Et,Ot)=>{if(Et||!Ot)return Ve(Et);if(typeof Ot!="object")return Ve(new Error(`Input data given to '${Oe.source}' is not a valid GeoJSON object.`));{W(Ot,!0);try{if(Oe.filter){const Mt=n.createExpression(Oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Mt.result==="error")throw new Error(Mt.value.map(li=>`${li.key}: ${li.message}`).join(", "));Ot={type:"FeatureCollection",features:Ot.features.filter(li=>Mt.value.evaluate({zoom:0},li))}}this._geoJSONIndex=Oe.cluster?new ae(function({superclusterOptions:Mt,clusterProperties:jt}){if(!jt||!Mt)return Mt;const li={},Ri={},_i={accumulated:null,zoom:0},on={properties:null},rn=Object.keys(jt);for(const Xi of rn){const[hn,Nn]=jt[Xi],er=n.createExpression(Nn),Qi=n.createExpression(typeof hn=="string"?[hn,["accumulated"],["get",Xi]]:hn);li[Xi]=er.value,Ri[Xi]=Qi.value}return Mt.map=Xi=>{on.properties=Xi;const hn={};for(const Nn of rn)hn[Nn]=li[Nn].evaluate(_i,on);return hn},Mt.reduce=(Xi,hn)=>{on.properties=hn;for(const Nn of rn)_i.accumulated=Xi[Nn],Xi[Nn]=Ri[Nn].evaluate(_i,on)},Mt}(Oe)).load(Ot.features):function(Mt,jt){return new Ml(Mt,jt)}(Ot,Oe.geojsonVtOptions)}catch(Mt){return Ve(Mt)}this.loaded={};const Bt={};if(ut){const Mt=n.getPerformanceMeasurement(ot);Mt&&(Bt.resourceTiming={},Bt.resourceTiming[Oe.source]=JSON.parse(JSON.stringify(Mt)))}Ve(null,Bt)}})}reloadTile(Oe,Ve){const ot=this.loaded;return ot&&ot[Oe.uid]?super.reloadTile(Oe,Ve):this.loadTile(Oe,Ve)}loadGeoJSON(Oe,Ve){if(Oe.request)n.getJSON(Oe.request,Ve);else{if(typeof Oe.data!="string")return Ve(new Error(`Input data given to '${Oe.source}' is not a valid GeoJSON object.`));try{return Ve(null,JSON.parse(Oe.data))}catch{return Ve(new Error(`Input data given to '${Oe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Oe,Ve){try{Ve(null,this._geoJSONIndex.getClusterExpansionZoom(Oe.clusterId))}catch(ot){Ve(ot)}}getClusterChildren(Oe,Ve){try{Ve(null,this._geoJSONIndex.getChildren(Oe.clusterId))}catch(ot){Ve(ot)}}getClusterLeaves(Oe,Ve){try{Ve(null,this._geoJSONIndex.getLeaves(Oe.clusterId,Oe.limit,Oe.offset))}catch(ot){Ve(ot)}}}class Hc{constructor(Oe){this.self=Oe,this.actor=new n.Actor(Oe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=n.getProjection({name:"mercator"}),this.workerSourceTypes={vector:n.VectorTileWorkerSource,geojson:Qa},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ve,ot)=>{if(this.workerSourceTypes[Ve])throw new Error(`Worker source with name "${Ve}" already registered.`);this.workerSourceTypes[Ve]=ot},this.self.registerRTLTextPlugin=Ve=>{if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=Ve.applyArabicShaping,n.plugin.processBidirectionalText=Ve.processBidirectionalText,n.plugin.processStyledBidirectionalText=Ve.processStyledBidirectionalText}}clearCaches(Oe,Ve,ot){delete this.layerIndexes[Oe],delete this.availableImages[Oe],delete this.workerSources[Oe],delete this.demWorkerSources[Oe],ot()}checkIfReady(Oe,Ve,ot){ot()}setReferrer(Oe,Ve){this.referrer=Ve}spriteLoaded(Oe,Ve){this.isSpriteLoaded[Oe]=Ve;for(const ot in this.workerSources[Oe]){const ut=this.workerSources[Oe][ot];for(const Et in ut)ut[Et]instanceof n.VectorTileWorkerSource&&(ut[Et].isSpriteLoaded=Ve,ut[Et].fire(new n.Event("isSpriteLoaded")))}}setImages(Oe,Ve,ot){this.availableImages[Oe]=Ve;for(const ut in this.workerSources[Oe]){const Et=this.workerSources[Oe][ut];for(const Ot in Et)Et[Ot].availableImages=Ve}ot()}enableTerrain(Oe,Ve,ot){this.terrain=Ve,ot()}setProjection(Oe,Ve){this.projections[Oe]=n.getProjection(Ve)}setLayers(Oe,Ve,ot){this.getLayerIndex(Oe).replace(Ve),ot()}updateLayers(Oe,Ve,ot){this.getLayerIndex(Oe).update(Ve.layers,Ve.removedIds),ot()}loadTile(Oe,Ve,ot){const ut=this.enableTerrain?n.extend({enableTerrain:this.terrain},Ve):Ve;ut.projection=this.projections[Oe]||this.defaultProjection,this.getWorkerSource(Oe,Ve.type,Ve.source).loadTile(ut,ot)}loadDEMTile(Oe,Ve,ot){const ut=this.enableTerrain?n.extend({buildQuadTree:this.terrain},Ve):Ve;this.getDEMWorkerSource(Oe,Ve.source).loadTile(ut,ot)}reloadTile(Oe,Ve,ot){const ut=this.enableTerrain?n.extend({enableTerrain:this.terrain},Ve):Ve;ut.projection=this.projections[Oe]||this.defaultProjection,this.getWorkerSource(Oe,Ve.type,Ve.source).reloadTile(ut,ot)}abortTile(Oe,Ve,ot){this.getWorkerSource(Oe,Ve.type,Ve.source).abortTile(Ve,ot)}removeTile(Oe,Ve,ot){this.getWorkerSource(Oe,Ve.type,Ve.source).removeTile(Ve,ot)}removeSource(Oe,Ve,ot){if(!this.workerSources[Oe]||!this.workerSources[Oe][Ve.type]||!this.workerSources[Oe][Ve.type][Ve.source])return;const ut=this.workerSources[Oe][Ve.type][Ve.source];delete this.workerSources[Oe][Ve.type][Ve.source],ut.removeSource!==void 0?ut.removeSource(Ve,ot):ot()}loadWorkerSource(Oe,Ve,ot){try{this.self.importScripts(Ve.url),ot()}catch(ut){ot(ut.toString())}}syncRTLPluginState(Oe,Ve,ot){try{n.plugin.setState(Ve);const ut=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&ut!=null){this.self.importScripts(ut);const Et=n.plugin.isParsed();ot(Et?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ut}`),Et)}}catch(ut){ot(ut.toString())}}getAvailableImages(Oe){let Ve=this.availableImages[Oe];return Ve||(Ve=[]),Ve}getLayerIndex(Oe){let Ve=this.layerIndexes[Oe];return Ve||(Ve=this.layerIndexes[Oe]=new Q),Ve}getWorkerSource(Oe,Ve,ot){if(this.workerSources[Oe]||(this.workerSources[Oe]={}),this.workerSources[Oe][Ve]||(this.workerSources[Oe][Ve]={}),!this.workerSources[Oe][Ve][ot]){const ut={send:(Et,Ot,Bt,Mt,jt,li)=>{this.actor.send(Et,Ot,Bt,Oe,jt,li)},scheduler:this.actor.scheduler};this.workerSources[Oe][Ve][ot]=new this.workerSourceTypes[Ve](ut,this.getLayerIndex(Oe),this.getAvailableImages(Oe),this.isSpriteLoaded[Oe])}return this.workerSources[Oe][Ve][ot]}getDEMWorkerSource(Oe,Ve){return this.demWorkerSources[Oe]||(this.demWorkerSources[Oe]={}),this.demWorkerSources[Oe][Ve]||(this.demWorkerSources[Oe][Ve]=new z),this.demWorkerSources[Oe][Ve]}enforceCacheSizeLimit(Oe,Ve){n.enforceCacheSizeLimit(Ve)}getWorkerPerformanceMetrics(Oe,Ve,ot){ot(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Hc(self)),Hc}),d(["./shared"],function(n){function T(_,a){if(Array.isArray(_)){if(!Array.isArray(a)||_.length!==a.length)return!1;for(let u=0;u<_.length;u++)if(!T(_[u],a[u]))return!1;return!0}if(typeof _=="object"&&_!==null&&a!==null){if(typeof a!="object"||Object.keys(_).length!==Object.keys(a).length)return!1;for(const u in _)if(!T(_[u],a[u]))return!1;return!0}return _===a}var V=Q;function Q(_){return!function(a){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,P,B=new Blob([""],{type:"text/javascript"}),ne=URL.createObjectURL(B);try{P=new Worker(ne),x=!0}catch{x=!1}return P&&P.terminate(),URL.revokeObjectURL(ne),x}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var x=document.createElement("canvas");x.width=x.height=1;var P=x.getContext("2d");if(!P)return!1;var B=P.getImageData(0,0,1,1);return B&&B.width===x.width}()?(z[u=a&&a.failIfMajorPerformanceCaveat]===void 0&&(z[u]=function(x){var P,B=function(ne){var he=document.createElement("canvas"),pe=Object.create(Q.webGLContextAttributes);return pe.failIfMajorPerformanceCaveat=ne,he.getContext("webgl",pe)||he.getContext("experimental-webgl",pe)}(x);if(!B)return!1;try{P=B.createShader(B.VERTEX_SHADER)}catch{return!1}return!(!P||B.isContextLost())&&(B.shaderSource(P,"void main() {}"),B.compileShader(P),B.getShaderParameter(P,B.COMPILE_STATUS)===!0)}(u)),z[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(_)}var z={};function W(_,a,u){const x=n.window.document.createElement(_);return a!==void 0&&(x.className=a),u&&u.appendChild(x),x}function K(_,a,u){const x=n.window.document.createElementNS("http://www.w3.org/2000/svg",_);for(const P of Object.keys(a))x.setAttributeNS(null,P,a[P]);return u&&u.appendChild(x),x}Q.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const I=n.window.document&&n.window.document.documentElement.style,O=I&&I.userSelect!==void 0?"userSelect":"WebkitUserSelect";let $;function M(){I&&O&&($=I[O],I[O]="none")}function S(){I&&O&&(I[O]=$)}function k(_){_.preventDefault(),_.stopPropagation(),n.window.removeEventListener("click",k,!0)}function G(){n.window.addEventListener("click",k,!0),n.window.setTimeout(()=>{n.window.removeEventListener("click",k,!0)},0)}function U(_,a){const u=_.getBoundingClientRect();return J(_,u,a)}function C(_,a){const u=_.getBoundingClientRect(),x=[];for(let P=0;P<a.length;P++)x.push(J(_,u,a[P]));return x}function ie(_){return n.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&n.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button}function J(_,a,u){const x=_.offsetWidth===a.width?1:_.offsetWidth/a.width;return new n.pointGeometry((u.clientX-a.left)*x,(u.clientY-a.top)*x)}function N(_,a){var u=a[0],x=a[1],P=a[2],B=a[3],ne=u*B-P*x;return ne?(_[0]=B*(ne=1/ne),_[1]=-x*ne,_[2]=-P*ne,_[3]=u*ne,_):null}function F(_){const{userImage:a}=_;return!!(a&&a.render&&a.render())&&(_.data.replace(new Uint8Array(a.data.buffer)),!0)}class H extends n.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:u,callback:x}of this.requestors)this._notify(u,x);this.requestors=[]}}hasImage(a){return!!this.getImage(a)}getImage(a){return this.images[a]}addImage(a,u){this._validate(a,u)&&(this.images[a]=u)}_validate(a,u){let x=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new n.ErrorEvent(new Error(`Image "${a}" has invalid "stretchX" value`))),x=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new n.ErrorEvent(new Error(`Image "${a}" has invalid "stretchY" value`))),x=!1),this._validateContent(u.content,u)||(this.fire(new n.ErrorEvent(new Error(`Image "${a}" has invalid "content" value`))),x=!1),x}_validateStretch(a,u){if(!a)return!0;let x=0;for(const P of a){if(P[0]<x||P[1]<P[0]||u<P[1])return!1;x=P[1]}return!0}_validateContent(a,u){return!(a&&(a.length!==4||a[0]<0||u.data.width<a[0]||a[1]<0||u.data.height<a[1]||a[2]<0||u.data.width<a[2]||a[3]<0||u.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))}updateImage(a,u){u.version=this.images[a].version+1,this.images[a]=u,this.updatedImages[a]=!0}removeImage(a){const u=this.images[a];delete this.images[a],delete this.patterns[a],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a,u){let x=!0;if(!this.isLoaded())for(const P of a)this.images[P]||(x=!1);this.isLoaded()||x?this._notify(a,u):this.requestors.push({ids:a,callback:u})}_notify(a,u){const x={};for(const P of a){this.images[P]||this.fire(new n.Event("styleimagemissing",{id:P}));const B=this.images[P];B?x[P]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:Boolean(B.userImage&&B.userImage.render)}:n.warnOnce(`Image "${P}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,x)}getPixelSize(){const{width:a,height:u}=this.atlasImage;return{width:a,height:u}}getPattern(a){const u=this.patterns[a],x=this.getImage(a);if(!x)return null;if(u&&u.position.version===x.version)return u.position;if(u)u.position.version=x.version;else{const P={w:x.data.width+2,h:x.data.height+2,x:0,y:0},B=new n.ImagePosition(P,x);this.patterns[a]={bin:P,position:B}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const u=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new n.Texture(a,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const B in this.patterns)a.push(this.patterns[B].bin);const{w:u,h:x}=n.potpack(a),P=this.atlasImage;P.resize({width:u||1,height:x||1});for(const B in this.patterns){const{bin:ne}=this.patterns[B],he=ne.x+1,pe=ne.y+1,Me=this.images[B].data,Ee=Me.width,Re=Me.height;n.RGBAImage.copy(Me,P,{x:0,y:0},{x:he,y:pe},{width:Ee,height:Re}),n.RGBAImage.copy(Me,P,{x:0,y:Re-1},{x:he,y:pe-1},{width:Ee,height:1}),n.RGBAImage.copy(Me,P,{x:0,y:0},{x:he,y:pe+Re},{width:Ee,height:1}),n.RGBAImage.copy(Me,P,{x:Ee-1,y:0},{x:he-1,y:pe},{width:1,height:Re}),n.RGBAImage.copy(Me,P,{x:0,y:0},{x:he+Ee,y:pe},{width:1,height:Re})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const u of a){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const x=this.images[u];F(x)&&this.updateImage(u,x)}}}const E=new n.Properties({anchor:new n.DataConstantProperty(n.spec.light.anchor),position:new class{constructor(){this.specification=n.spec.light.position}possiblyEvaluate(_,a){return function([u,x,P]){const B=n.degToRad(x+90),ne=n.degToRad(P);return{x:u*Math.cos(B)*Math.sin(ne),y:u*Math.sin(B)*Math.sin(ne),z:u*Math.cos(ne),azimuthal:x,polar:P}}(_.expression.evaluate(a))}interpolate(_,a,u){return{x:n.number(_.x,a.x,u),y:n.number(_.y,a.y,u),z:n.number(_.z,a.z,u),azimuthal:n.number(_.azimuthal,a.azimuthal,u),polar:n.number(_.polar,a.polar,u)}}},color:new n.DataConstantProperty(n.spec.light.color),intensity:new n.DataConstantProperty(n.spec.light.intensity)}),L="-transition";class f extends n.Evented{constructor(a){super(),this._transitionable=new n.Transitionable(E),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,u={}){if(!this._validate(n.validateLight,a,u))for(const x in a){const P=a[x];n.endsWith(x,L)?this._transitionable.setTransition(x.slice(0,-L.length),P):this._transitionable.setValue(x,P)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,x){return(!x||x.validate!==!1)&&n.emitValidationErrors(this,a.call(n.validateStyle,n.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:n.spec})))}}const y=new n.Properties({source:new n.DataConstantProperty(n.spec.terrain.source),exaggeration:new n.DataConstantProperty(n.spec.terrain.exaggeration)}),b="-transition";class D extends n.Evented{constructor(a,u){super(),this._transitionable=new n.Transitionable(y),this.set(a),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=u}get(){return this._transitionable.serialize()}set(a){for(const u in a){const x=a[u];n.endsWith(u,b)?this._transitionable.setTransition(u.slice(0,-b.length),x):this._transitionable.setValue(u,x)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}}function X(_,a,u,x){const P=n.smoothstep(45,65,u),[B,ne]=te(_,x),he=n.length(a);let pe=1-Math.min(1,Math.exp((he-B)/(ne-B)*-6));return pe*=pe*pe,pe=Math.min(1,1.00747*pe),pe*P*_.alpha}function te(_,a){const u=.5/Math.tan(.5*a);return[_.range[0]+u,_.range[1]+u]}const q=new n.Properties({range:new n.DataConstantProperty(n.spec.fog.range),color:new n.DataConstantProperty(n.spec.fog.color),"high-color":new n.DataConstantProperty(n.spec.fog["high-color"]),"space-color":new n.DataConstantProperty(n.spec.fog["space-color"]),"horizon-blend":new n.DataConstantProperty(n.spec.fog["horizon-blend"]),"star-intensity":new n.DataConstantProperty(n.spec.fog["star-intensity"])}),ce="-transition";class fe extends n.Evented{constructor(a,u){super(),this._transitionable=new n.Transitionable(q),this.set(a),this._transitioning=this._transitionable.untransitioned(),this._transform=u}get state(){const a=this._transform,u=a.projection.name==="globe",x=n.globeToMercatorTransition(a.zoom),P=this.properties.get("range"),B=[.5,3];return{range:u?[n.number(B[0],P[0],x),n.number(B[1],P[1],x)]:P,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(a,u={}){if(!this._validate(n.validateFog,a,u)){for(const x of Object.keys(n.spec.fog))a&&a[x]===void 0&&(a[x]=n.spec.fog[x].default);for(const x in a){const P=a[x];n.endsWith(x,ce)?this._transitionable.setTransition(x.slice(0,-ce.length),P):this._transitionable.setValue(x,P)}}}getOpacity(a){if(!this._transform.projection.supportsFog)return 0;const u=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.smoothstep(45,65,a))*u.a}getOpacityAtLatLng(a,u){return this._transform.projection.supportsFog?function(x,P,B){const ne=n.MercatorCoordinate.fromLngLat(P),he=B.elevation?B.elevation.getAtPointOrZero(ne):0,pe=[ne.x,ne.y,he];return n.transformMat4(pe,pe,B.mercatorFogMatrix),X(x,pe,B.pitch,B._fov)}(this.state,a,u):0}getFovAdjustedRange(a){return this._transform.projection.supportsFog?te(this.state,a):[0,1]}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,x){return(!x||x.validate!==!1)&&n.emitValidationErrors(this,a.call(n.validateStyle,n.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:n.spec})))}}class we{constructor(a,u){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=n.uniqueId();const x=this.workerPool.acquire(this.id);for(let P=0;P<x.length;P++){const B=new we.Actor(x[P],u,this.id);B.name=`Worker ${P}`,this.actors.push(B)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(a,u,x){n.asyncAll(this.actors,(P,B)=>{P.send(a,u,B)},x=x||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(a=>{a.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Z(_,a,u){return a*(n.EXTENT/(_.tileSize*Math.pow(2,u-_.tileID.overscaledZ)))}we.Actor=n.Actor;class se{constructor(a,u,x,P){this.screenBounds=a,this.cameraPoint=u,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=x,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,P)}static createFromScreenPoints(a,u){let x,P;if(a instanceof n.pointGeometry||typeof a[0]=="number"){const B=n.pointGeometry.convert(a);x=[B],P=u.isPointAboveHorizon(B)}else{const B=n.pointGeometry.convert(a[0]),ne=n.pointGeometry.convert(a[1]);x=[B,ne],P=n.polygonizeBounds(B,ne).every(he=>u.isPointAboveHorizon(he))}return new se(x,u.getCameraPoint(),P,u)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(a){return n.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],a)}bufferedCameraGeometry(a){const u=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new n.pointGeometry(1,1)):this.screenBounds[1],P=n.polygonizeBounds(u,x,0,!1);return this.cameraPoint.y>x.y&&(this.cameraPoint.x>u.x&&this.cameraPoint.x<x.x?P.splice(3,0,this.cameraPoint):this.cameraPoint.x>=x.x?P[2]=this.cameraPoint:this.cameraPoint.x<=u.x&&(P[3]=this.cameraPoint)),n.bufferConvexPolygon(P,a)}bufferedCameraGeometryGlobe(a){const u=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new n.pointGeometry(1,1)):this.screenBounds[1],P=n.polygonizeBounds(u,x,a),B=this.cameraPoint.clone();switch(3*((B.y>u.y)+(B.y>x.y))+((B.x>u.x)+(B.x>x.x))){case 0:P[0]=B,P[4]=B.clone();break;case 1:P.splice(1,0,B);break;case 2:P[1]=B;break;case 3:P.splice(4,0,B);break;case 5:P.splice(2,0,B);break;case 6:P[3]=B;break;case 7:P.splice(3,0,B);break;case 8:P[2]=B}return P}containsTile(a,u,x,P=0){const B=a.queryPadding/u._pixelsPerMercatorPixel+1,ne=x?this._bufferedCameraMercator(B,u):this._bufferedScreenMercator(B,u);let he=a.tileID.wrap+(ne.unwrapped?P:0);const pe=ne.polygon.map(Ye=>n.getTilePoint(a.tileTransform,Ye,he));if(!n.polygonIntersectsBox(pe,0,0,n.EXTENT,n.EXTENT))return;he=a.tileID.wrap+(this.screenGeometryMercator.unwrapped?P:0);const Me=this.screenGeometryMercator.polygon.map(Ye=>n.getTileVec3(a.tileTransform,Ye,he)),Ee=Me.map(Ye=>new n.pointGeometry(Ye[0],Ye[1])),Re=u.getFreeCameraOptions().position||new n.MercatorCoordinate(0,0,0),$e=n.getTileVec3(a.tileTransform,Re,he),Qe=Me.map(Ye=>{const Ze=n.sub(Ye,Ye,$e);return n.normalize(Ze,Ze),new n.Ray($e,Ze)}),et=Z(a,1,u.zoom)*u._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Ee,tilespaceRays:Qe,bufferedTilespaceGeometry:pe,bufferedTilespaceBounds:(rt=n.getBounds(pe),rt.min.x=n.clamp(rt.min.x,0,n.EXTENT),rt.min.y=n.clamp(rt.min.y,0,n.EXTENT),rt.max.x=n.clamp(rt.max.x,0,n.EXTENT),rt.max.y=n.clamp(rt.max.y,0,n.EXTENT),rt),tile:a,tileID:a.tileID,pixelToTileUnitsFactor:et};var rt}_bufferedScreenMercator(a,u){const x=Pe(a);if(this._screenRaycastCache[x])return this._screenRaycastCache[x];{let P;return P=u.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(a),u):{polygon:this.bufferedScreenGeometry(a).map(B=>u.pointCoordinate3D(B)),unwrapped:!0},this._screenRaycastCache[x]=P,P}}_bufferedCameraMercator(a,u){const x=Pe(a);if(this._cameraRaycastCache[x])return this._cameraRaycastCache[x];{let P;return P=u.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(a),u):{polygon:this.bufferedCameraGeometry(a).map(B=>u.pointCoordinate3D(B)),unwrapped:!0},this._cameraRaycastCache[x]=P,P}}_projectAndResample(a,u){const x=function(B,ne){const he=n.multiply([],ne.pixelMatrix,ne.globeMatrix),pe=[0,-n.GLOBE_RADIUS,0,1],Me=[0,n.GLOBE_RADIUS,0,1],Ee=[0,0,0,1];n.transformMat4$1(pe,pe,he),n.transformMat4$1(Me,Me,he),n.transformMat4$1(Ee,Ee,he);const Re=new n.pointGeometry(pe[0]/pe[3],pe[1]/pe[3]),$e=new n.pointGeometry(Me[0]/Me[3],Me[1]/Me[3]),Qe=n.polygonContainsPoint(B,Re)&&pe[3]<Ee[3],et=n.polygonContainsPoint(B,$e)&&Me[3]<Ee[3];if(!Qe&&!et)return null;const rt=function(kt,Wt,Ft){for(let Dt=1;Dt<kt.length;Dt++){const pi=ye(Wt.pointCoordinate3D(kt[Dt-1]).x),Nt=ye(Wt.pointCoordinate3D(kt[Dt]).x);if(Ft<0){if(pi<Nt)return{idx:Dt,t:-pi/(Nt-1-pi)}}else if(Nt<pi)return{idx:Dt,t:(1-pi)/(Nt+1-pi)}}return null}(B,ne,Qe?-1:1);if(!rt)return null;const{idx:Ye,t:Ze}=rt;let lt=Ye>1?ue(B.slice(0,Ye),ne):[],tt=Ye<B.length?ue(B.slice(Ye),ne):[];lt=lt.map(kt=>new n.pointGeometry(ye(kt.x),kt.y)),tt=tt.map(kt=>new n.pointGeometry(ye(kt.x),kt.y));const pt=[...lt];pt.length===0&&pt.push(tt[tt.length-1]);const Tt=n.number(pt[pt.length-1].y,(tt.length===0?lt[0]:tt[0]).y,Ze);let gt;return gt=Qe?[new n.pointGeometry(0,Tt),new n.pointGeometry(0,0),new n.pointGeometry(1,0),new n.pointGeometry(1,Tt)]:[new n.pointGeometry(1,Tt),new n.pointGeometry(1,1),new n.pointGeometry(0,1),new n.pointGeometry(0,Tt)],pt.push(...gt),tt.length===0?pt.push(lt[0]):pt.push(...tt),{polygon:pt.map(kt=>new n.MercatorCoordinate(kt.x,kt.y)),unwrapped:!1}}(a,u);if(x)return x;const P=function(B,ne){let he=!1,pe=-1/0,Me=0;for(let Re=0;Re<B.length-1;Re++)B[Re].x>pe&&(pe=B[Re].x,Me=Re);for(let Re=0;Re<B.length-1;Re++){const $e=(Me+Re)%(B.length-1),Qe=B[$e],et=B[$e+1];Math.abs(Qe.x-et.x)>.5&&(Qe.x<et.x?(Qe.x+=1,$e===0&&(B[B.length-1].x+=1)):(et.x+=1,$e+1===B.length-1&&(B[0].x+=1)),he=!0)}const Ee=n.mercatorXfromLng(ne.center.lng);return he&&Ee<Math.abs(Ee-1)&&B.forEach(Re=>{Re.x-=1}),{polygon:B,unwrapped:he}}(ue(a,u).map(B=>new n.pointGeometry(ye(B.x),B.y)),u);return{polygon:P.polygon.map(B=>new n.MercatorCoordinate(B.x,B.y)),unwrapped:P.unwrapped}}}function ue(_,a){return n.resample(_,u=>{const x=a.pointCoordinate3D(u);u.x=x.x,u.y=x.y},1/256)}function ye(_){return _<0?1+_%1:_%1}function Pe(_){return 100*_|0}function ae(_,a,u,x,P){const B=function(ne,he){if(ne)return P(ne);if(he){_.url&&he.tiles&&_.tiles&&delete _.tiles;const pe=n.pick(n.extend(he,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);he.vector_layers&&(pe.vectorLayers=he.vector_layers,pe.vectorLayerIds=pe.vectorLayers.map(Me=>Me.id)),pe.tiles=a.canonicalizeTileset(pe,_.url),P(null,pe)}};return _.url?n.getJSON(a.transformRequest(a.normalizeSourceURL(_.url,null,u,x),n.ResourceType.Source),B):n.exported.frame(()=>B(null,_))}class xe{constructor(a,u,x){this.bounds=n.LngLatBounds.convert(this.validateBounds(a)),this.minzoom=u||0,this.maxzoom=x||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const u=Math.pow(2,a.z),x=Math.floor(n.mercatorXfromLng(this.bounds.getWest())*u),P=Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*u),B=Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*u),ne=Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*u);return a.x>=x&&a.x<B&&a.y>=P&&a.y<ne}}class ve{constructor(a,u,x){this.context=a;const P=a.gl;this.buffer=P.createBuffer(),this.dynamicDraw=Boolean(x),this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),P.bufferData(P.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||u.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const le={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class me{constructor(a,u,x,P){this.length=u.length,this.attributes=x,this.itemSize=u.bytesPerElement,this.dynamicDraw=P,this.context=a;const B=a.gl;this.buffer=B.createBuffer(),a.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||u.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,u){for(let x=0;x<this.attributes.length;x++){const P=u.attributes[this.attributes[x].name];P!==void 0&&a.enableVertexAttribArray(P)}}setVertexAttribPointers(a,u,x){for(let P=0;P<this.attributes.length;P++){const B=this.attributes[P],ne=u.attributes[B.name];ne!==void 0&&a.vertexAttribPointer(ne,B.components,a[le[B.type]],!1,this.itemSize,B.offset+this.itemSize*(x||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class be{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Le extends be{getDefault(){return n.Color.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class De extends be{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Ne extends be{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class st extends be{getDefault(){return[!0,!0,!0,!0]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class it extends be{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class ht extends be{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class ke extends be{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const u=this.current;(a.func!==u.func||a.ref!==u.ref||a.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Be extends be{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Ue extends be{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=a,this.dirty=!1}}class We extends be{getDefault(){return[0,1]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class nt extends be{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=a,this.dirty=!1}}class wt extends be{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Ut extends be{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.BLEND):u.disable(u.BLEND),this.current=a,this.dirty=!1}}class Vt extends be{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class yi extends be{getDefault(){return n.Color.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class ri extends be{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Mi extends be{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=a,this.dirty=!1}}class $i extends be{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class zi extends be{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class qi extends be{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Oi extends be{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class _n extends be{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class wn extends be{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Yn extends be{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Ts extends be{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class ur extends be{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Dr extends be{getDefault(){return null}set(a){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Ir extends be{constructor(a){super(a),this.vao=a.extVertexArrayObject}getDefault(){return null}set(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)}}class za extends be{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class uc extends be{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Ml extends be{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Ja extends be{constructor(a,u){super(a),this.context=a,this.parent=u}getDefault(){return null}}class io extends Ja{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Qa extends Ja{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,this.attachment(),u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Hc extends Qa{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class at{constructor(a,u,x,P){this.context=a,this.width=u,this.height=x;const B=this.framebuffer=a.gl.createFramebuffer();this.colorAttachment=new io(a,B),P&&(this.depthAttachment=new Qa(a,B))}destroy(){const a=this.context.gl,u=this.colorAttachment.get();if(u&&a.deleteTexture(u),this.depthAttachment){const x=this.depthAttachment.get();x&&a.deleteRenderbuffer(x)}a.deleteFramebuffer(this.framebuffer)}}class Oe{constructor(a){this.gl=a,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Le(this),this.clearDepth=new De(this),this.clearStencil=new Ne(this),this.colorMask=new st(this),this.depthMask=new it(this),this.stencilMask=new ht(this),this.stencilFunc=new ke(this),this.stencilOp=new Be(this),this.stencilTest=new Ue(this),this.depthRange=new We(this),this.depthTest=new nt(this),this.depthFunc=new wt(this),this.blend=new Ut(this),this.blendFunc=new Vt(this),this.blendColor=new yi(this),this.blendEquation=new ri(this),this.cullFace=new Mi(this),this.cullFaceSide=new $i(this),this.frontFace=new zi(this),this.program=new qi(this),this.activeTexture=new Oi(this),this.viewport=new _n(this),this.bindFramebuffer=new wn(this),this.bindRenderbuffer=new Yn(this),this.bindTexture=new Ts(this),this.bindVertexBuffer=new ur(this),this.bindElementBuffer=new Dr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ir(this),this.pixelStoreUnpack=new za(this),this.pixelStoreUnpackPremultiplyAlpha=new uc(this),this.pixelStoreUnpackFlipY=new Ml(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=a.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=a.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=a.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=a.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(a.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=a.getExtension("OES_standard_derivatives"),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,u){return new ve(this,a,u)}createVertexBuffer(a,u,x){return new me(this,a,u,x)}createRenderbuffer(a,u,x){const P=this.gl,B=P.createRenderbuffer();return this.bindRenderbuffer.set(B),P.renderbufferStorage(P.RENDERBUFFER,a,u,x),this.bindRenderbuffer.set(null),B}createFramebuffer(a,u,x){return new at(this,a,u,x)}clear({color:a,depth:u,stencil:x}){const P=this.gl;let B=0;a&&(B|=P.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(B|=P.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),x!==void 0&&(B|=P.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),P.clear(B)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){T(a.blendFunction,n.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ve extends n.Evented{constructor(a,u,x,P){super(),this.id=a,this.dispatcher=x,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},u),n.extend(this,n.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ae(this._options,this.map._requestManager,null,null,(a,u)=>{this._tileJSONRequest=null,this._loaded=!0,a?this.fire(new n.ErrorEvent(a)):u&&(n.extend(this,u),u.bounds&&(this.tileBounds=new xe(u.bounds,this.minzoom,this.maxzoom)),n.postTurnstileEvent(u.tiles),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return n.extend({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,u){const x=n.exported.devicePixelRatio>=2,P=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),x,this.tileSize);a.request=n.getImage(this.map._requestManager.transformRequest(P,n.ResourceType.Tile),(B,ne,he,pe)=>(delete a.request,a.aborted?(a.state="unloaded",u(null)):B?(a.state="errored",u(B)):ne?(this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:he,expires:pe}),a.setTexture(ne,this.map.painter),a.state="loaded",n.cacheEntryPossiblyAdded(this.dispatcher),void u(null)):u(null)))}static loadTileData(a,u,x){a.setTexture(u,x)}static unloadTileData(a,u){a.texture&&u.saveTileTexture(a.texture)}abortTile(a,u){a.request&&(a.request.cancel(),delete a.request),u()}unloadTile(a,u){a.texture&&this.map.painter.saveTileTexture(a.texture),u()}hasTransition(){return!1}}let ot;function ut(_,a,u,x,P,B,ne,he){const pe=[_,u,P,a,x,B,1,1,1],Me=[ne,he,1],Ee=n.adjoint([],pe),[Re,$e,Qe]=n.transformMat3(Me,Me,n.transpose(Ee,Ee));return n.multiply$1(pe,[Re,0,0,0,$e,0,0,0,Qe],pe)}class Et extends n.Evented{constructor(a,u,x,P){super(),this.id=a,this.dispatcher=x,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=u,this._dirty=!1}load(a,u){this._loaded=u||!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),(x,P)=>{if(this._imageRequest=null,this._loaded=!0,x)this.fire(new n.ErrorEvent(x));else if(P){const{HTMLImageElement:B}=n.window;this.image=P instanceof B?n.exported.getImageData(P):P,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,a&&(this.coordinates=a),this._finishLoading()}})}loaded(){return this._loaded}updateImage(a){return this.image&&a.url?(this._imageRequest&&a.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=a.url,this.load(a.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(a){this.coordinates=a,this._boundsArray=void 0;const u=a.map(n.MercatorCoordinate.fromLngLat);return this.tileID=function(x){let P=1/0,B=1/0,ne=-1/0,he=-1/0;for(const Re of x)P=Math.min(P,Re.x),B=Math.min(B,Re.y),ne=Math.max(ne,Re.x),he=Math.max(he,Re.y);const pe=Math.max(ne-P,he-B),Me=Math.max(0,Math.floor(-Math.log(pe)/Math.LN2)),Ee=Math.pow(2,Me);return new n.CanonicalTileID(Me,Math.floor((P+ne)/2*Ee),Math.floor((B+he)/2*Ee))}(u),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(a){for(const pe in this.tiles){const Me=this.tiles[pe];Me.state!=="loaded"&&(Me.state="loaded",Me.texture=this.texture)}if(this._boundsArray)return;const u=n.tileTransform(this.tileID,this.map.transform.projection),[x,P,B,ne]=this.coordinates.map(pe=>{const Me=u.projection.project(pe[0],pe[1]);return n.getTilePoint(u,Me)._round()});this.perspectiveTransform=function(pe,Me,Ee,Re,$e,Qe,et,rt,Ye,Ze){const lt=ut(0,0,pe,0,0,Me,pe,Me),tt=ut(Ee,Re,$e,Qe,et,rt,Ye,Ze);return n.multiply$1(tt,n.adjoint(lt,lt),tt),[tt[6]/tt[8]*pe/n.EXTENT,tt[7]/tt[8]*Me/n.EXTENT]}(this.width,this.height,x.x,x.y,P.x,P.y,ne.x,ne.y,B.x,B.y);const he=this._boundsArray=new n.StructArrayLayout4i8;he.emplaceBack(x.x,x.y,0,0),he.emplaceBack(P.x,P.y,n.EXTENT,0),he.emplaceBack(ne.x,ne.y,0,n.EXTENT),he.emplaceBack(B.x,B.y,n.EXTENT,n.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=a.createVertexBuffer(he,n.boundsAttributes.members),this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,u=a.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new n.Texture(a,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(a)}loadTile(a,u){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},u(null)):(a.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ot={vector:class extends n.Evented{constructor(_,a,u,x){if(super(),this.id=_,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(a,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new n.DedupedRequest}load(_){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"}));const a=Array.isArray(this.map._language)?this.map._language.join():this.map._language,u=this.map._worldview;this._tileJSONRequest=ae(this._options,this.map._requestManager,a,u,(x,P)=>{this._tileJSONRequest=null,this._loaded=!0,x?(a&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${a}`),u&&u.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${u}`),this.fire(new n.ErrorEvent(x))):P&&(n.extend(this,P),P.bounds&&(this.tileBounds=new xe(P.bounds,this.minzoom,this.maxzoom)),n.postTurnstileEvent(P.tiles,this.map._requestManager._customAccessToken),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"}))),_&&_(x)})}loaded(){return this._loaded}hasTile(_){return!this.tileBounds||this.tileBounds.contains(_.canonical)}onAdd(_){this.map=_,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>{const _=this.map.style._getSourceCaches(this.id);for(const a of _)a.clearTiles()})}setSourceProperty(_){_(),this.reload()}setTiles(_){return this._options.tiles=_,this.reload(),this}setUrl(_){return this.url=_,this._options.url=_,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return n.extend({},this._options)}loadTile(_,a){const u=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(u,n.ResourceType.Tile),data:void 0,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,tileSize:this.tileSize*_.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:n.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:_.isSymbolTile};if(x.request.collectResourceTiming=this._collectResourceTiming,_.actor&&_.state!=="expired")_.state==="loading"?_.reloadCallback=a:_.request=_.actor.send("reloadTile",x,P.bind(this));else if(_.actor=this._tileWorkers[u]=this._tileWorkers[u]||this.dispatcher.getActor(),this.dispatcher.ready)_.request=_.actor.send("loadTile",x,P.bind(this),void 0,!0);else{const B=n.loadVectorTile.call({deduped:this._deduped},x,(ne,he)=>{ne||!he?P.call(this,ne):(x.data={cacheControl:he.cacheControl,expires:he.expires,rawData:he.rawData.slice(0)},_.actor&&_.actor.send("loadTile",x,P.bind(this),void 0,!0))},!0);_.request={cancel:B}}function P(B,ne){return delete _.request,_.aborted?a(null):B&&B.status!==404?a(B):(ne&&ne.resourceTiming&&(_.resourceTiming=ne.resourceTiming),this.map._refreshExpiredTiles&&ne&&_.setExpiryData(ne),_.loadVectorData(ne,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),a(null),void(_.reloadCallback&&(this.loadTile(_,_.reloadCallback),_.reloadCallback=null)))}}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.actor&&_.actor.send("abortTile",{uid:_.uid,type:this.type,source:this.id})}unloadTile(_){_.unloadVectorData(),_.actor&&_.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},raster:Ve,"raster-dem":class extends Ve{constructor(_,a,u,x){super(_,a,u,x),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}loadTile(_,a){const u=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function x(P,B){P&&(_.state="errored",a(P)),B&&(_.dem=B,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",a(null))}_.request=n.getImage(this.map._requestManager.transformRequest(u,n.ResourceType.Tile),function(P,B,ne,he){if(delete _.request,_.aborted)_.state="unloaded",a(null);else if(P)_.state="errored",a(P);else if(B){this.map._refreshExpiredTiles&&_.setExpiryData({cacheControl:ne,expires:he});const pe=n.window.ImageBitmap&&B instanceof n.window.ImageBitmap&&(ot==null&&(ot=n.window.OffscreenCanvas&&new n.window.OffscreenCanvas(1,1).getContext("2d")&&typeof n.window.createImageBitmap=="function"),ot),Me=1-(B.width-n.prevPowerOfTwo(B.width))/2;Me<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const Ee=pe?B:n.exported.getImageData(B,Me),Re={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:Ee,encoding:this.encoding,padding:Me};_.actor&&_.state!=="expired"||(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",Re,x.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(_){const a=_.canonical,u=Math.pow(2,a.z),x=(a.x-1+u)%u,P=a.x===0?_.wrap-1:_.wrap,B=(a.x+1+u)%u,ne=a.x+1===u?_.wrap+1:_.wrap,he={};return he[new n.OverscaledTileID(_.overscaledZ,P,a.z,x,a.y).key]={backfilled:!1},he[new n.OverscaledTileID(_.overscaledZ,ne,a.z,B,a.y).key]={backfilled:!1},a.y>0&&(he[new n.OverscaledTileID(_.overscaledZ,P,a.z,x,a.y-1).key]={backfilled:!1},he[new n.OverscaledTileID(_.overscaledZ,_.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},he[new n.OverscaledTileID(_.overscaledZ,ne,a.z,B,a.y-1).key]={backfilled:!1}),a.y+1<u&&(he[new n.OverscaledTileID(_.overscaledZ,P,a.z,x,a.y+1).key]={backfilled:!1},he[new n.OverscaledTileID(_.overscaledZ,_.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},he[new n.OverscaledTileID(_.overscaledZ,ne,a.z,B,a.y+1).key]={backfilled:!1}),he}unloadTile(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded"}},geojson:class extends n.Evented{constructor(_,a,u,x){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=u.getActor(),this.setEventedParent(x),this._data=a.data,this._options=n.extend({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const P=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*P,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*P,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:n.EXTENT,radius:(a.clusterRadius!==void 0?a.clusterRadius:50)*P,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}getClusterExpansionZoom(_,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},a),this}getClusterChildren(_,a){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},a),this}getClusterLeaves(_,a,u,x){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:a,offset:u},x),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _=n.extend({},this.workerOptions),a=this._data;typeof a=="string"?(_.request=this.map._requestManager.transformRequest(n.exported.resolveURL(a),n.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(a),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_,(u,x)=>{if(this._loaded=!0,this._pendingLoad=null,u)this.fire(new n.ErrorEvent(u));else{const P={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&x&&x.resourceTiming&&x.resourceTiming[this.id]&&(P.resourceTiming=x.resourceTiming[this.id]),this.fire(new n.Event("data",P)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(_,a){const u=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(u,{type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:n.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(x,P)=>(delete _.request,_.unloadVectorData(),_.aborted?a(null):x?a(x):(_.loadVectorData(P,this.map.painter,u==="reloadTile"),a(null))),void 0,u==="loadTile")}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Et{constructor(_,a,u,x){super(_,a,u,x),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const a of _.urls)this.urls.push(this.map._requestManager.transformRequest(a,n.ResourceType.Source).url);n.getVideo(this.urls,(a,u)=>{this._loaded=!0,a?this.fire(new n.ErrorEvent(a)):u&&(this.video=u,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const a=this.video.seekable;_<a.start(0)||_>a.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,a=_.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new n.Texture(_,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Et,canvas:class extends Et{constructor(_,a,u,x){super(_,a,u,x),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(P=>!Array.isArray(P)||P.length!==2||P.some(B=>typeof B!="number"))||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${_}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof n.window.HTMLCanvasElement||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${_}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof n.window.HTMLCanvasElement?this.options.canvas:n.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context;this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.Texture(a,this.canvas,a.gl.RGBA,{premultiply:!0}),this._prepareData(a)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}},custom:class extends n.Evented{constructor(_,a,u,x){super(),this.id=_,this.type="custom",this._dataType="raster",this._dispatcher=u,this._implementation=a,this.setEventedParent(x),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new xe(this._implementation.bounds,this.minzoom,this.maxzoom)),a.update=this._update.bind(this),a.clearTiles=this._clearTiles.bind(this),a.coveringTiles=this._coveringTiles.bind(this),n.extend(this,n.pick(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_){this._map=_,this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_),this.load()}onRemove(_){this._implementation.onRemove&&this._implementation.onRemove(_)}hasTile(_){if(this._implementation.hasTile){const{x:a,y:u,z:x}=_.canonical;return this._implementation.hasTile({x:a,y:u,z:x})}return!this.tileBounds||this.tileBounds.contains(_.canonical)}loadTile(_,a){const{x:u,y:x,z:P}=_.tileID.canonical,B=new n.window.AbortController;_.request=Promise.resolve(this._implementation.loadTile({x:u,y:x,z:P},{signal:B.signal})).then(function(ne){return delete _.request,_.aborted?(_.state="unloaded",a(null)):ne===void 0?(_.state="errored",a(null)):ne===null?(this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",a(null)):function(he){return he instanceof n.window.ImageData||he instanceof n.window.HTMLCanvasElement||he instanceof n.window.ImageBitmap||he instanceof n.window.HTMLImageElement}(ne)?(this.loadTileData(_,ne),_.state="loaded",void a(null)):(_.state="errored",a(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(ne=>{ne.code!==20&&(_.state="errored",a(ne))}),_.request.cancel=()=>B.abort()}loadTileData(_,a){Ve.loadTileData(_,a,this._map.painter)}unloadTileData(_){Ve.unloadTileData(_,this._map.painter)}unloadTile(_,a){if(this.unloadTileData(_),this._implementation.unloadTile){const{x:u,y:x,z:P}=_.tileID.canonical;this._implementation.unloadTile({x:u,y:x,z:P})}a()}abortTile(_,a){_.request&&_.request.cancel&&(_.request.cancel(),delete _.request),a()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(_=>({x:_.canonical.x,y:_.canonical.y,z:_.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Bt=function(_,a,u,x){const P=new Ot[a.type](_,a,u,x);if(P.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${P.id}`);return n.bindAll(["load","abort","unload","serialize","prepare"],P),P};function Mt(_,a){const u=n.identity([]);return n.scale(u,u,[.5*_.width,.5*-_.height,1]),n.translate(u,u,[1,-1,0]),n.multiply(u,u,_.calculateProjMatrix(a.toUnwrapped())),Float32Array.from(u)}function jt(_,a,u,x,P,B,ne,he=!1){const pe=_.tilesIn(x,ne,he);pe.sort(Ri);const Me=[];for(const Re of pe)Me.push({wrappedTileID:Re.tile.tileID.wrapped().key,queryResults:Re.tile.queryRenderedFeatures(a,u,_._state,Re,P,B,Mt(_.transform,Re.tile.tileID),he)});const Ee=function(Re){const $e={},Qe={};for(const et of Re){const rt=et.queryResults,Ye=et.wrappedTileID,Ze=Qe[Ye]=Qe[Ye]||{};for(const lt in rt){const tt=rt[lt],pt=Ze[lt]=Ze[lt]||{},Tt=$e[lt]=$e[lt]||[];for(const gt of tt)pt[gt.featureIndex]||(pt[gt.featureIndex]=!0,Tt.push(gt))}}return $e}(Me);for(const Re in Ee)Ee[Re].forEach($e=>{const Qe=$e.feature,et=Qe.layer;et&&et.type!=="background"&&et.type!=="sky"&&(Qe.source=et.source,et["source-layer"]&&(Qe.sourceLayer=et["source-layer"]),Qe.state=Qe.id!==void 0?_.getFeatureState(et["source-layer"],Qe.id):{})});return Ee}function li(_,a){const u=_.getRenderableIds().map(B=>_.getTileByID(B)),x=[],P={};for(let B=0;B<u.length;B++){const ne=u[B],he=ne.tileID.canonical.key;P[he]||(P[he]=!0,ne.querySourceFeatures(x,a))}return x}function Ri(_,a){const u=_.tileID,x=a.tileID;return u.overscaledZ-x.overscaledZ||u.canonical.y-x.canonical.y||u.wrap-x.wrap||u.canonical.x-x.canonical.x}function _i(){return Qc.workerClass!=null?new Qc.workerClass:new n.window.Worker(Qc.workerUrl)}const on="mapboxgl_preloaded_worker_pool";class rn{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<rn.workerCount;)this.workers.push(new _i);return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[on]}numActive(){return Object.keys(this.active).length}}let Xi;function hn(){return Xi||(Xi=new rn),Xi}function Nn(_,a){const u={};for(const x in _)x!=="ref"&&(u[x]=_[x]);return n.refProperties.forEach(x=>{x in a&&(u[x]=a[x])}),u}function er(_){_=_.slice();const a=Object.create(null);for(let u=0;u<_.length;u++)a[_[u].id]=_[u];for(let u=0;u<_.length;u++)"ref"in _[u]&&(_[u]=Nn(_[u],a[_[u].ref]));return _}rn.workerCount=2;const Qi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Tr(_,a,u){u.push({command:Qi.addSource,args:[_,a[_]]})}function lr(_,a,u){a.push({command:Qi.removeSource,args:[_]}),u[_]=!0}function ga(_,a,u,x){lr(_,u,x),Tr(_,a,u)}function el(_,a,u){let x;for(x in _[u])if(_[u].hasOwnProperty(x)&&x!=="data"&&!T(_[u][x],a[u][x]))return!1;for(x in a[u])if(a[u].hasOwnProperty(x)&&x!=="data"&&!T(_[u][x],a[u][x]))return!1;return!0}function wo(_,a,u,x,P,B){let ne;for(ne in a=a||{},_=_||{})_.hasOwnProperty(ne)&&(T(_[ne],a[ne])||u.push({command:B,args:[x,ne,a[ne],P]}));for(ne in a)a.hasOwnProperty(ne)&&!_.hasOwnProperty(ne)&&(T(_[ne],a[ne])||u.push({command:B,args:[x,ne,a[ne],P]}))}function ni(_){return _.id}function jo(_,a){return _[a.id]=a,_}class as{constructor(a,u){this.reset(a,u)}reset(a,u){this.points=a||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=n.clamp(a,0,1);let u=1,x=this._distances[u];const P=a*this.paddedLength+this.padding;for(;x<P&&u<this._distances.length;)x=this._distances[++u];const B=u-1,ne=this._distances[B],he=x-ne,pe=he>0?(P-ne)/he:0;return this.points[B].mult(1-pe).add(this.points[u].mult(pe))}}class ls{constructor(a,u,x){const P=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(a/x),this.yCellCount=Math.ceil(u/x);for(let ne=0;ne<this.xCellCount*this.yCellCount;ne++)P.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=u,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,u,x,P,B){this._forEachCell(u,x,P,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(u),this.bboxes.push(x),this.bboxes.push(P),this.bboxes.push(B)}insertCircle(a,u,x,P){this._forEachCell(u-P,x-P,u+P,x+P,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(u),this.circles.push(x),this.circles.push(P)}_insertBoxCell(a,u,x,P,B,ne){this.boxCells[B].push(ne)}_insertCircleCell(a,u,x,P,B,ne){this.circleCells[B].push(ne)}_query(a,u,x,P,B,ne){if(x<0||a>this.width||P<0||u>this.height)return!B&&[];const he=[];if(a<=0&&u<=0&&this.width<=x&&this.height<=P){if(B)return!0;for(let pe=0;pe<this.boxKeys.length;pe++)he.push({key:this.boxKeys[pe],x1:this.bboxes[4*pe],y1:this.bboxes[4*pe+1],x2:this.bboxes[4*pe+2],y2:this.bboxes[4*pe+3]});for(let pe=0;pe<this.circleKeys.length;pe++){const Me=this.circles[3*pe],Ee=this.circles[3*pe+1],Re=this.circles[3*pe+2];he.push({key:this.circleKeys[pe],x1:Me-Re,y1:Ee-Re,x2:Me+Re,y2:Ee+Re})}return ne?he.filter(ne):he}return this._forEachCell(a,u,x,P,this._queryCell,he,{hitTest:B,seenUids:{box:{},circle:{}}},ne),B?he.length>0:he}_queryCircle(a,u,x,P,B){const ne=a-x,he=a+x,pe=u-x,Me=u+x;if(he<0||ne>this.width||Me<0||pe>this.height)return!P&&[];const Ee=[];return this._forEachCell(ne,pe,he,Me,this._queryCellCircle,Ee,{hitTest:P,circle:{x:a,y:u,radius:x},seenUids:{box:{},circle:{}}},B),P?Ee.length>0:Ee}query(a,u,x,P,B){return this._query(a,u,x,P,!1,B)}hitTest(a,u,x,P,B){return this._query(a,u,x,P,!0,B)}hitTestCircle(a,u,x,P){return this._queryCircle(a,u,x,!0,P)}_queryCell(a,u,x,P,B,ne,he,pe){const Me=he.seenUids,Ee=this.boxCells[B];if(Ee!==null){const $e=this.bboxes;for(const Qe of Ee)if(!Me.box[Qe]){Me.box[Qe]=!0;const et=4*Qe;if(a<=$e[et+2]&&u<=$e[et+3]&&x>=$e[et+0]&&P>=$e[et+1]&&(!pe||pe(this.boxKeys[Qe]))){if(he.hitTest)return ne.push(!0),!0;ne.push({key:this.boxKeys[Qe],x1:$e[et],y1:$e[et+1],x2:$e[et+2],y2:$e[et+3]})}}}const Re=this.circleCells[B];if(Re!==null){const $e=this.circles;for(const Qe of Re)if(!Me.circle[Qe]){Me.circle[Qe]=!0;const et=3*Qe;if(this._circleAndRectCollide($e[et],$e[et+1],$e[et+2],a,u,x,P)&&(!pe||pe(this.circleKeys[Qe]))){if(he.hitTest)return ne.push(!0),!0;{const rt=$e[et],Ye=$e[et+1],Ze=$e[et+2];ne.push({key:this.circleKeys[Qe],x1:rt-Ze,y1:Ye-Ze,x2:rt+Ze,y2:Ye+Ze})}}}}}_queryCellCircle(a,u,x,P,B,ne,he,pe){const Me=he.circle,Ee=he.seenUids,Re=this.boxCells[B];if(Re!==null){const Qe=this.bboxes;for(const et of Re)if(!Ee.box[et]){Ee.box[et]=!0;const rt=4*et;if(this._circleAndRectCollide(Me.x,Me.y,Me.radius,Qe[rt+0],Qe[rt+1],Qe[rt+2],Qe[rt+3])&&(!pe||pe(this.boxKeys[et])))return ne.push(!0),!0}}const $e=this.circleCells[B];if($e!==null){const Qe=this.circles;for(const et of $e)if(!Ee.circle[et]){Ee.circle[et]=!0;const rt=3*et;if(this._circlesCollide(Qe[rt],Qe[rt+1],Qe[rt+2],Me.x,Me.y,Me.radius)&&(!pe||pe(this.circleKeys[et])))return ne.push(!0),!0}}}_forEachCell(a,u,x,P,B,ne,he,pe){const Me=this._convertToXCellCoord(a),Ee=this._convertToYCellCoord(u),Re=this._convertToXCellCoord(x),$e=this._convertToYCellCoord(P);for(let Qe=Me;Qe<=Re;Qe++)for(let et=Ee;et<=$e;et++)if(B.call(this,a,u,x,P,this.xCellCount*et+Qe,ne,he,pe))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,u,x,P,B,ne){const he=P-a,pe=B-u,Me=x+ne;return Me*Me>he*he+pe*pe}_circleAndRectCollide(a,u,x,P,B,ne,he){const pe=(ne-P)/2,Me=Math.abs(a-(P+pe));if(Me>pe+x)return!1;const Ee=(he-B)/2,Re=Math.abs(u-(B+Ee));if(Re>Ee+x)return!1;if(Me<=pe||Re<=Ee)return!0;const $e=Me-pe,Qe=Re-Ee;return $e*$e+Qe*Qe<=x*x}}const pc=Math.tan(85*Math.PI/180);function Ks(_,a,u,x,P,B,ne){const he=n.create();if(u)if(B.name==="globe"){const pe=n.calculateGlobeLabelMatrix(P,a);n.multiply(he,he,pe)}else{const pe=N([],ne);he[0]=pe[0],he[1]=pe[1],he[4]=pe[2],he[5]=pe[3],x||n.rotateZ(he,he,P.angle)}else n.multiply(he,P.labelPlaneMatrix,_);return he}function xh(_,a,u,x,P,B,ne){const he=Ks(_,a,u,x,P,B,ne);return B.name==="globe"&&u||(he[2]=he[6]=he[10]=he[14]=0),he}function od(_,a,u,x,P,B,ne){if(u){if(B.name==="globe"){const he=Ks(_,a,u,x,P,B,ne);return n.invert(he,he),n.multiply(he,_,he),he}{const he=n.clone(_),pe=n.identity([]);return pe[0]=ne[0],pe[1]=ne[1],pe[4]=ne[2],pe[5]=ne[3],n.multiply(he,he,pe),x||n.rotateZ(he,he,-P.angle),he}}return P.glCoordMatrix}function Ls(_,a,u,x){const P=[_,a,u,1];u?n.transformMat4$1(P,P,x):xr(P,P,x);const B=P[3];return P[0]/=B,P[1]/=B,P[2]/=B,P}function Li(_,a){return Math.min(.5+_/a*.5,1.5)}function zn(_,a){const u=_[0]/_[3],x=_[1]/_[3];return u>=-a[0]&&u<=a[0]&&x>=-a[1]&&x<=a[1]}function Fn(_,a,u,x,P,B,ne,he,pe,Me){const Ee=u.transform,Re=x?_.textSizeData:_.iconSizeData,$e=n.evaluateSizeForZoom(Re,u.transform.zoom),Qe=Ee.projection.name==="globe",et=[256/u.width*2+1,256/u.height*2+1],rt=x?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;rt.clear();let Ye=null;Qe&&(Ye=x?_.text.globeExtVertexArray:_.icon.globeExtVertexArray);const Ze=_.lineVertexArray,lt=x?_.text.placedSymbolArray:_.icon.placedSymbolArray,tt=u.transform.width/u.transform.height;let pt,Tt=!1;for(let gt=0;gt<lt.length;gt++){const kt=lt.get(gt),{numGlyphs:Wt,writingMode:Ft}=kt;if(Ft!==n.WritingMode.vertical||Tt||pt===n.WritingMode.horizontal||(Tt=!0),pt=Ft,(kt.hidden||Ft===n.WritingMode.vertical)&&!Tt){Ss(Wt,rt);continue}Tt=!1;const Dt=new n.pointGeometry(kt.tileAnchorX,kt.tileAnchorY);let{x:pi,y:Nt,z:si}=Ee.projection.projectTilePoint(Dt.x,Dt.y,Me.canonical);if(pe){const[nn,Wi,pn]=pe(Dt);pi+=nn,Nt+=Wi,si+=pn}const Xt=[pi,Nt,si,1];if(n.transformMat4$1(Xt,Xt,a),!zn(Xt,et)){Ss(Wt,rt);continue}const vi=Li(u.transform.cameraToCenterDistance,Xt[3]),qt=n.evaluateSizeForFeature(Re,$e,kt),di=ne?qt/vi:qt*vi,wi=Ls(pi,Nt,si,P);if(wi[3]<=0){Ss(Wt,rt);continue}let Rt={};const Yt=ne?null:pe,Hi=yn(kt,di,!1,he,a,P,B,_.glyphOffsetArray,Ze,rt,Ye,wi,Dt,Rt,tt,Yt,Ee.projection,Me,ne);Tt=Hi.useVertical,Yt&&Hi.needsFlipping&&(Rt={}),(Hi.notEnoughRoom||Tt||Hi.needsFlipping&&yn(kt,di,!0,he,a,P,B,_.glyphOffsetArray,Ze,rt,Ye,wi,Dt,Rt,tt,Yt,Ee.projection,Me,ne).notEnoughRoom)&&Ss(Wt,rt)}x?(_.text.dynamicLayoutVertexBuffer.updateData(rt),Ye&&_.text.globeExtVertexBuffer.updateData(Ye)):(_.icon.dynamicLayoutVertexBuffer.updateData(rt),Ye&&_.icon.globeExtVertexBuffer.updateData(Ye))}function Uo(_,a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe,et,rt){const{lineStartIndex:Ye,glyphStartIndex:Ze,segment:lt}=he,tt=Ze+he.numGlyphs,pt=Ye+he.lineLength,Tt=a.getoffsetX(Ze),gt=a.getoffsetX(tt-1),kt=Na(_*Tt,u,x,P,B,ne,lt,Ye,pt,pe,Me,Ee,Re,$e,!0,Qe,et,rt);if(!kt)return null;const Wt=Na(_*gt,u,x,P,B,ne,lt,Ye,pt,pe,Me,Ee,Re,$e,!0,Qe,et,rt);return Wt?{first:kt,last:Wt}:null}function _a(_,a,u,x){return _===n.WritingMode.horizontal&&Math.abs(x)>Math.abs(u)?{useVertical:!0}:_===n.WritingMode.vertical?x>0?{needsFlipping:!0}:null:a!==0&&function(P,B){return P===0||Math.abs(B/P)>pc}(u,x)?a===1?{needsFlipping:!0}:null:u<0?{needsFlipping:!0}:null}function yn(_,a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe,et,rt,Ye,Ze,lt){const tt=a/24,pt=_.lineOffsetX*tt,Tt=_.lineOffsetY*tt,{lineStartIndex:gt,glyphStartIndex:kt,numGlyphs:Wt,segment:Ft,writingMode:Dt,flipState:pi}=_,Nt=gt+_.lineLength,si=Xt=>{if(Ee){const[wi,Rt,Yt]=Xt.up,Hi=Me.length;n.updateGlobeVertexNormal(Ee,Hi+0,wi,Rt,Yt),n.updateGlobeVertexNormal(Ee,Hi+1,wi,Rt,Yt),n.updateGlobeVertexNormal(Ee,Hi+2,wi,Rt,Yt),n.updateGlobeVertexNormal(Ee,Hi+3,wi,Rt,Yt)}const[vi,qt,di]=Xt.point;n.addDynamicAttributes(Me,vi,qt,di,Xt.angle)};if(Wt>1){const Xt=Uo(tt,he,pt,Tt,u,Re,$e,_,pe,B,Qe,rt,!1,Ye,Ze,lt);if(!Xt)return{notEnoughRoom:!0};if(x&&!u){let[vi,qt,di]=Xt.first.point,[wi,Rt,Yt]=Xt.last.point;[vi,qt]=Ls(vi,qt,di,ne),[wi,Rt]=Ls(wi,Rt,Yt,ne);const Hi=_a(Dt,pi,(wi-vi)*et,Rt-qt);if(_.flipState=Hi&&Hi.needsFlipping?1:2,Hi)return Hi}si(Xt.first);for(let vi=kt+1;vi<kt+Wt-1;vi++){const qt=Na(tt*he.getoffsetX(vi),pt,Tt,u,Re,$e,Ft,gt,Nt,pe,B,Qe,rt,!1,!1,Ye,Ze,lt);if(!qt)return Me.length-=4*(vi-kt),{notEnoughRoom:!0};si(qt)}si(Xt.last)}else{if(x&&!u){const vi=Ls($e.x,$e.y,0,P),qt=gt+Ft+1,di=new n.pointGeometry(pe.getx(qt),pe.gety(qt)),wi=Ls(di.x,di.y,0,P),Rt=wi[3]>0?wi:ta($e,di,vi,1,P,void 0,Ye,Ze.canonical),Yt=_a(Dt,pi,(Rt[0]-vi[0])*et,Rt[1]-vi[1]);if(_.flipState=Yt&&Yt.needsFlipping?1:2,Yt)return Yt}const Xt=Na(tt*he.getoffsetX(kt),pt,Tt,u,Re,$e,Ft,gt,Nt,pe,B,Qe,rt,!1,!1,Ye,Ze,lt);if(!Xt)return{notEnoughRoom:!0};si(Xt)}return{}}function fc(_,a,u,x,P){const{x:B,y:ne,z:he}=x.projectTilePoint(_.x,_.y,a);if(!P)return Ls(B,ne,he,u);const[pe,Me,Ee]=P(_);return Ls(B+pe,ne+Me,he+Ee,u)}function ta(_,a,u,x,P,B,ne,he){const pe=fc(_.sub(a)._unit()._add(_),he,P,ne,B);return n.sub(pe,u,pe),n.normalize(pe,pe),n.scaleAndAdd(pe,u,pe,x)}function Na(_,a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe,et,rt,Ye,Ze){const lt=x?_-a:_+a;let tt=lt>0?1:-1,pt=0;x&&(tt*=-1,pt=Math.PI),tt<0&&(pt+=Math.PI);let Tt=he+ne+(tt>0?0:1)|0,gt=P,kt=P,Wt=0,Ft=0;const Dt=Math.abs(lt),pi=[],Nt=[];let si=B,Xt=si;const vi=()=>ta(Xt,si,kt,Dt-Wt+1,Ee,$e,rt,Ye.canonical);for(;Wt+Ft<=Dt;){if(Tt+=tt,Tt<he||Tt>=pe)return null;if(kt=gt,Xt=si,pi.push(kt),Qe&&Nt.push(Xt),si=new n.pointGeometry(Me.getx(Tt),Me.gety(Tt)),gt=Re[Tt],!gt){const pn=fc(si,Ye.canonical,Ee,rt,$e);gt=pn[3]>0?Re[Tt]=pn:vi()}Wt+=Ft,Ft=n.distance(kt,gt)}et&&$e&&(Re[Tt]&&(gt=vi(),Ft=n.distance(kt,gt)),Re[Tt]=gt);const qt=(Dt-Wt)/Ft,di=si.sub(Xt)._mult(qt)._add(Xt),wi=n.sub([],gt,kt),Rt=n.scaleAndAdd([],kt,wi,qt);let Yt=[0,0,1],Hi=wi[0],nn=wi[1];if(Ze&&(Yt=rt.upVector(Ye.canonical,di.x,di.y),Yt[0]!==0||Yt[1]!==0||Yt[2]!==1)){const pn=[Yt[2],0,-Yt[0]],Rn=n.cross([],Yt,pn);n.normalize(pn,pn),n.normalize(Rn,Rn),Hi=n.dot(wi,pn),nn=n.dot(wi,Rn)}if(u){const pn=n.cross([],Yt,wi);n.normalize(pn,pn),n.scaleAndAdd(Rt,Rt,pn,u*tt)}const Wi=pt+Math.atan2(nn,Hi);return pi.push(Rt),Qe&&Nt.push(di),{point:Rt,angle:Wi,path:pi,tilePath:Nt,up:Yt}}function Ss(_,a){const u=a.length,x=u+4*_;a.resize(x),a.float32.fill(-1/0,4*u,4*x)}function xr(_,a,u){const x=a[0],P=a[1];return _[0]=u[0]*x+u[4]*P+u[12],_[1]=u[1]*x+u[5]*P+u[13],_[3]=u[3]*x+u[7]*P+u[15],_}const Vs=100;class Fa{constructor(a,u,x=new ls(a.width+200,a.height+200,25),P=new ls(a.width+200,a.height+200,25)){this.transform=a,this.grid=x,this.ignoredGrid=P,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Vs,this.screenBottomBoundary=a.height+Vs,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.fogState=u}placeCollisionBox(a,u,x,P,B,ne,he,pe){let Me=x.projectedAnchorX,Ee=x.projectedAnchorY,Re=x.projectedAnchorZ;const $e=x.elevation,Qe=x.tileID,et=a.getProjection();if($e&&Qe){const[gt,kt,Wt]=et.upVector(Qe.canonical,x.tileAnchorX,x.tileAnchorY),Ft=et.upVectorScale(Qe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Me+=gt*$e*Ft,Ee+=kt*$e*Ft,Re+=Wt*$e*Ft}const rt=this.projectAndGetPerspectiveRatio(he,Me,Ee,Re,x.tileID,et.name==="globe"||!!$e||this.transform.pitch>0,et),Ye=ne*rt.perspectiveRatio,Ze=(x.x1*u+P.x-x.padding)*Ye+rt.point.x,lt=(x.y1*u+P.y-x.padding)*Ye+rt.point.y,tt=(x.x2*u+P.x+x.padding)*Ye+rt.point.x,pt=(x.y2*u+P.y+x.padding)*Ye+rt.point.y,Tt=rt.perspectiveRatio<=.55||rt.occluded;return!this.isInsideGrid(Ze,lt,tt,pt)||!B&&this.grid.hitTest(Ze,lt,tt,pt,pe)||Tt?{box:[],offscreen:!1,occluded:rt.occluded}:{box:[Ze,lt,tt,pt],offscreen:this.isOffscreen(Ze,lt,tt,pt),occluded:!1}}placeCollisionCircles(a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe,et,rt){const Ye=[],Ze=this.transform.elevation,lt=a.getProjection(),tt=Ze?Ze.getAtTileOffsetFunc(rt,this.transform.center.lat,this.transform.worldSize,lt):null,pt=new n.pointGeometry(x.tileAnchorX,x.tileAnchorY);let{x:Tt,y:gt,z:kt}=lt.projectTilePoint(pt.x,pt.y,rt.canonical);if(tt){const[di,wi,Rt]=tt(pt);Tt+=di,gt+=wi,kt+=Rt}const Wt=lt.name==="globe",Ft=this.projectAndGetPerspectiveRatio(he,Tt,gt,kt,rt,Wt||!!Ze||this.transform.pitch>0,lt),{perspectiveRatio:Dt}=Ft,pi=(Re?ne/Dt:ne*Dt)/n.ONE_EM,Nt=Ls(Tt,gt,kt,pe),si=Ft.signedDistanceFromCamera>0?Uo(pi,B,x.lineOffsetX*pi,x.lineOffsetY*pi,!1,Nt,pt,x,P,pe,{},Ze&&!Re?tt:null,Re&&!!Ze,lt,rt,Re):null;let Xt=!1,vi=!1,qt=!0;if(si&&!Ft.occluded){const di=.5*Qe*Dt+et,wi=new n.pointGeometry(-100,-100),Rt=new n.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Yt=new as,{first:Hi,last:nn}=si,Wi=Hi.path.length;let pn=[];for(let Vi=Wi-1;Vi>=1;Vi--)pn.push(Hi.path[Vi]);for(let Vi=1;Vi<nn.path.length;Vi++)pn.push(nn.path[Vi]);const Rn=2.5*di;Me&&(pn=pn.map(([Vi,Sr,hr],Ar)=>(tt&&!Wt&&(hr=tt(Ar<Wi-1?Hi.tilePath[Wi-1-Ar]:nn.tilePath[Ar-Wi+2])[2]),Ls(Vi,Sr,hr,Me))),pn.some(Vi=>Vi[3]<=0)&&(pn=[]));let sn=[];if(pn.length>0){let Vi=1/0,Sr=-1/0,hr=1/0,Ar=-1/0;for(const br of pn)Vi=Math.min(Vi,br[0]),hr=Math.min(hr,br[1]),Sr=Math.max(Sr,br[0]),Ar=Math.max(Ar,br[1]);Sr>=wi.x&&Vi<=Rt.x&&Ar>=wi.y&&hr<=Rt.y&&(sn=[pn.map(br=>new n.pointGeometry(br[0],br[1]))],(Vi<wi.x||Sr>Rt.x||hr<wi.y||Ar>Rt.y)&&(sn=n.clipLine(sn,wi.x,wi.y,Rt.x,Rt.y)))}for(const Vi of sn){Yt.reset(Vi,.25*di);let Sr=0;Sr=Yt.length<=.5*di?1:Math.ceil(Yt.paddedLength/Rn)+1;for(let hr=0;hr<Sr;hr++){const Ar=hr/Math.max(Sr-1,1),br=Yt.lerp(Ar),Wo=br.x+Vs,Mo=br.y+Vs;Ye.push(Wo,Mo,di,0);const mo=Wo-di,$a=Mo-di,Fr=Wo+di,wr=Mo+di;if(qt=qt&&this.isOffscreen(mo,$a,Fr,wr),vi=vi||this.isInsideGrid(mo,$a,Fr,wr),!u&&this.grid.hitTestCircle(Wo,Mo,di,$e)&&(Xt=!0,!Ee))return{circles:[],offscreen:!1,collisionDetected:Xt,occluded:!1}}}}return{circles:!Ee&&Xt||!vi?[]:Ye,offscreen:qt,collisionDetected:Xt,occluded:Ft.occluded}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let x=1/0,P=1/0,B=-1/0,ne=-1/0;for(const Ee of a){const Re=new n.pointGeometry(Ee.x+Vs,Ee.y+Vs);x=Math.min(x,Re.x),P=Math.min(P,Re.y),B=Math.max(B,Re.x),ne=Math.max(ne,Re.y),u.push(Re)}const he=this.grid.query(x,P,B,ne).concat(this.ignoredGrid.query(x,P,B,ne)),pe={},Me={};for(const Ee of he){const Re=Ee.key;if(pe[Re.bucketInstanceId]===void 0&&(pe[Re.bucketInstanceId]={}),pe[Re.bucketInstanceId][Re.featureIndex])continue;const $e=[new n.pointGeometry(Ee.x1,Ee.y1),new n.pointGeometry(Ee.x2,Ee.y1),new n.pointGeometry(Ee.x2,Ee.y2),new n.pointGeometry(Ee.x1,Ee.y2)];n.polygonIntersectsPolygon(u,$e)&&(pe[Re.bucketInstanceId][Re.featureIndex]=!0,Me[Re.bucketInstanceId]===void 0&&(Me[Re.bucketInstanceId]=[]),Me[Re.bucketInstanceId].push(Re.featureIndex))}return Me}insertCollisionBox(a,u,x,P,B){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:P,collisionGroupID:B},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,u,x,P,B){const ne=u?this.ignoredGrid:this.grid,he={bucketInstanceId:x,featureIndex:P,collisionGroupID:B};for(let pe=0;pe<a.length;pe+=4)ne.insertCircle(he,a[pe],a[pe+1],a[pe+2])}projectAndGetPerspectiveRatio(a,u,x,P,B,ne,he){const pe=[u,x,P,1];let Me=!1;if(P||this.transform.pitch>0){n.transformMat4$1(pe,pe,a);const Re=he.name==="globe";this.fogState&&B&&!Re&&(Me=function(Qe,et,rt,Ye,Ze,lt){const tt=lt.calculateFogTileMatrix(Ze),pt=[et,rt,Ye];return n.transformMat4(pt,pt,tt),X(Qe,pt,lt.pitch,lt._fov)}(this.fogState,u,x,P,B.toUnwrapped(),this.transform)>.9)}else xr(pe,pe,a);const Ee=pe[3];return{point:new n.pointGeometry((pe[0]/Ee+1)/2*this.transform.width+Vs,(-pe[1]/Ee+1)/2*this.transform.height+Vs),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(he)/Ee*.5,1.5),signedDistanceFromCamera:Ee,occluded:ne&&pe[2]>Ee||Me}}isOffscreen(a,u,x,P){return x<Vs||a>=this.screenRightBoundary||P<Vs||u>this.screenBottomBoundary}isInsideGrid(a,u,x,P){return x>=0&&a<this.gridRightBoundary&&P>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const a=n.identity([]);return n.translate(a,a,[-100,-100,0]),a}}function Al(_,a,u){const x=a.createTileMatrix(_,_.worldSize,u.toUnwrapped());return n.multiply(new Float32Array(16),_.projMatrix,x)}function ia(_,a,u){if(a.projection.name===u.projection.name)return _.projMatrix;const x=u.clone();return x.setProjection(a.projection),Al(x,a.getProjection(),_)}function kl(_,a,u){return a.name===u.projection.name?_.projMatrix:Al(u,a,_)}class tl{constructor(a,u,x,P){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?u:-u))):P&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class ja{constructor(a,u,x,P,B,ne=!1){this.text=new tl(a?a.text:null,u,x,B),this.icon=new tl(a?a.icon:null,u,P,B),this.clipped=ne}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class il{constructor(a,u,x,P=!1){this.text=a,this.icon=u,this.skipFade=x,this.clipped=P}}class Wc{constructor(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]}}class Yc{constructor(a,u,x,P,B){this.bucketInstanceId=a,this.featureIndex=u,this.sourceLayerIndex=x,this.bucketIndex=P,this.tileID=B}}class no{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const u=++this.maxGroupID;this.collisionGroups[a]={ID:u,predicate:x=>x.collisionGroupID===u}}return this.collisionGroups[a]}}function is(_,a,u,x,P){const{horizontalAlign:B,verticalAlign:ne}=n.getAnchorAlignment(_),he=-(B-.5)*a,pe=-(ne-.5)*u,Me=n.evaluateVariableOffset(_,x);return new n.pointGeometry(he+Me[0]*P,pe+Me[1]*P)}function Pl(_,a,u,x,P){const B=new n.pointGeometry(_,a);return u&&B._rotate(x?P:-P),B}class ad{constructor(a,u,x,P,B){this.transform=a.clone(),this.projection=a.projection.name,this.collisionIndex=new Fa(this.transform,B),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new no(x),this.collisionCircleArrays={},this.prevPlacement=P,P&&(P.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,u,x,P){const B=x.getBucket(u),ne=x.latestFeatureIndex;if(!B||!ne||u.id!==B.layerIds[0])return;const he=B.layers[0].layout,pe=x.collisionBoxArray,Me=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),Ee=x.tileSize/n.EXTENT,Re=x.tileID.toUnwrapped();this.transform.setProjection(B.projection);const $e=(Qe=x.tileID,et=B.getProjection(),rt=this.transform,et.name===this.projection?rt.calculateProjMatrix(Qe.toUnwrapped()):Al(rt,et,Qe));var Qe,et,rt;const Ye=he.get("text-pitch-alignment")==="map",Ze=he.get("text-rotation-alignment")==="map";u.compileFilter();const lt=u.dynamicFilter(),tt=u.dynamicFilterNeedsFeature(),pt=this.transform.calculatePixelsToTileUnitsMatrix(x),Tt=xh($e,x.tileID.canonical,Ye,Ze,this.transform,B.getProjection(),pt);let gt=null;if(Ye){const Ft=od($e,x.tileID.canonical,Ye,Ze,this.transform,B.getProjection(),pt);gt=n.multiply([],this.transform.labelPlaneMatrix,Ft)}let kt=null;lt&&x.latestFeatureIndex&&(kt={unwrappedTileID:Re,dynamicFilter:lt,dynamicFilterNeedsFeature:tt,featureIndex:x.latestFeatureIndex}),this.retainedQueryData[B.bucketInstanceId]=new Yc(B.bucketInstanceId,ne,B.sourceLayerIndex,B.index,x.tileID);const Wt={bucket:B,layout:he,posMatrix:$e,textLabelPlaneMatrix:Tt,labelToScreenMatrix:gt,clippingData:kt,scale:Me,textPixelRatio:Ee,holdingForFade:x.holdingForFade(),collisionBoxArray:pe,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(B.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:n.evaluateSizeForZoom(B.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(P)for(const Ft of B.sortKeyRanges){const{sortKey:Dt,symbolInstanceStart:pi,symbolInstanceEnd:Nt}=Ft;a.push({sortKey:Dt,symbolInstanceStart:pi,symbolInstanceEnd:Nt,parameters:Wt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:Wt})}attemptAnchorPlacement(a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe,et,rt,Ye,Ze,lt){const{textOffset0:tt,textOffset1:pt,crossTileID:Tt}=$e,gt=[tt,pt],kt=is(a,x,P,gt,B),Wt=this.collisionIndex.placeCollisionBox(et,B,u,Pl(kt.x,kt.y,ne,he,this.transform.angle),Re,pe,Me,Ee.predicate);if(Ye){const Ft=et.getSymbolInstanceIconSize(lt,this.transform.zoom,$e.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(et,Ft,Ye,Pl(kt.x,kt.y,ne,he,this.transform.angle),Re,pe,Me,Ee.predicate).box.length===0)return}if(Wt.box.length>0){let Ft;return this.prevPlacement&&this.prevPlacement.variableOffsets[Tt]&&this.prevPlacement.placements[Tt]&&this.prevPlacement.placements[Tt].text&&(Ft=this.prevPlacement.variableOffsets[Tt].anchor),this.variableOffsets[Tt]={textOffset:gt,width:x,height:P,anchor:a,textScale:B,prevAnchor:Ft},this.markUsedJustification(et,a,$e,rt),et.allowVerticalPlacement&&(this.markUsedOrientation(et,rt,$e),this.placedOrientations[Tt]=rt),{shift:kt,placedGlyphBoxes:Wt}}}placeLayerBucketPart(a,u,x,P){const{bucket:B,layout:ne,posMatrix:he,textLabelPlaneMatrix:pe,labelToScreenMatrix:Me,clippingData:Ee,textPixelRatio:Re,holdingForFade:$e,collisionBoxArray:Qe,partiallyEvaluatedTextSize:et,partiallyEvaluatedIconSize:rt,collisionGroup:Ye}=a.parameters,Ze=ne.get("text-optional"),lt=ne.get("icon-optional"),tt=ne.get("text-allow-overlap"),pt=ne.get("icon-allow-overlap"),Tt=ne.get("text-rotation-alignment")==="map",gt=ne.get("text-pitch-alignment")==="map",kt=ne.get("icon-text-fit")!=="none",Wt=ne.get("symbol-z-order")==="viewport-y";this.transform.setProjection(B.projection);let Ft=tt&&(pt||!B.hasIconData()||lt),Dt=pt&&(tt||!B.hasTextData()||Ze);!B.collisionArrays&&Qe&&B.deserializeCollisionBoxes(Qe),x&&P&&B.updateCollisionDebugBuffers(this.transform.zoom,Qe);const pi=(Nt,si,Xt)=>{const{crossTileID:vi,numVerticalGlyphVertices:qt}=Nt;if(Ee){const Fr={zoom:this.transform.zoom,pitch:this.transform.pitch};let wr=null;if(Ee.dynamicFilterNeedsFeature){const sr=this.retainedQueryData[B.bucketInstanceId];wr=Ee.featureIndex.loadFeature({featureIndex:Nt.featureIndex,bucketIndex:sr.bucketIndex,sourceLayerIndex:sr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,Ee.dynamicFilter)(Fr,wr,this.retainedQueryData[B.bucketInstanceId].tileID.canonical,new n.pointGeometry(Nt.tileAnchorX,Nt.tileAnchorY),this.transform.calculateDistanceTileData(Ee.unwrappedTileID)))return this.placements[vi]=new il(!1,!1,!1,!0),void(u[vi]=!0)}if(u[vi])return;if($e)return void(this.placements[vi]=new il(!1,!1,!1));let di=!1,wi=!1,Rt=!0,Yt=!1,Hi=!1,nn=null,Wi={box:null,offscreen:null,occluded:null},pn={box:null,offscreen:null,occluded:null},Rn=null,sn=null,Vi=null,Sr=0,hr=0,Ar=0;Xt.textFeatureIndex?Sr=Xt.textFeatureIndex:Nt.useRuntimeCollisionCircles&&(Sr=Nt.featureIndex),Xt.verticalTextFeatureIndex&&(hr=Xt.verticalTextFeatureIndex);const br=Fr=>{Fr.tileID=this.retainedQueryData[B.bucketInstanceId].tileID;const wr=this.transform.elevation;(wr||Fr.elevation)&&(Fr.elevation=wr?wr.getAtTileOffset(Fr.tileID,Fr.tileAnchorX,Fr.tileAnchorY):0)},Wo=Xt.textBox;if(Wo){br(Wo);const Fr=sr=>{let ms=n.WritingMode.horizontal;if(B.allowVerticalPlacement&&!sr&&this.prevPlacement){const oo=this.prevPlacement.placedOrientations[vi];oo&&(this.placedOrientations[vi]=oo,ms=oo,this.markUsedOrientation(B,ms,Nt))}return ms},wr=(sr,ms)=>{if(B.allowVerticalPlacement&&qt>0&&Xt.verticalTextBox){for(const oo of B.writingModes)if(oo===n.WritingMode.vertical?(Wi=ms(),pn=Wi):Wi=sr(),Wi&&Wi.box&&Wi.box.length)break}else Wi=sr()};if(ne.get("text-variable-anchor")){let sr=ne.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[vi]){const jr=this.prevPlacement.variableOffsets[vi];sr.indexOf(jr.anchor)>0&&(sr=sr.filter(go=>go!==jr.anchor),sr.unshift(jr.anchor))}const ms=(jr,go,yd)=>{const Ha=B.getSymbolInstanceTextSize(et,Nt,this.transform.zoom,si),ao=(jr.x2-jr.x1)*Ha+2*jr.padding,Yo=(jr.y2-jr.y1)*Ha+2*jr.padding,cl=kt&&!pt?go:null;cl&&br(cl);let ba={box:[],offscreen:!1,occluded:!1};const jn=tt?2*sr.length:sr.length;for(let zh=0;zh<jn;++zh){const hl=this.attemptAnchorPlacement(sr[zh%sr.length],jr,ao,Yo,Ha,Tt,gt,Re,he,Ye,zh>=sr.length,Nt,si,B,yd,cl,et,rt);if(hl&&(ba=hl.placedGlyphBoxes,ba&&ba.box&&ba.box.length)){di=!0,nn=hl.shift;break}}return ba};wr(()=>ms(Wo,Xt.iconBox,n.WritingMode.horizontal),()=>{const jr=Xt.verticalTextBox;return jr&&br(jr),B.allowVerticalPlacement&&!(Wi&&Wi.box&&Wi.box.length)&&qt>0&&jr?ms(jr,Xt.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Wi&&(di=Wi.box,Rt=Wi.offscreen,Yt=Wi.occluded);const oo=Fr(Wi&&Wi.box);if(!di&&this.prevPlacement){const jr=this.prevPlacement.variableOffsets[vi];jr&&(this.variableOffsets[vi]=jr,this.markUsedJustification(B,jr.anchor,Nt,oo))}}else{const sr=(ms,oo)=>{const jr=B.getSymbolInstanceTextSize(et,Nt,this.transform.zoom,si),go=this.collisionIndex.placeCollisionBox(B,jr,ms,new n.pointGeometry(0,0),tt,Re,he,Ye.predicate);return go&&go.box&&go.box.length&&(this.markUsedOrientation(B,oo,Nt),this.placedOrientations[vi]=oo),go};wr(()=>sr(Wo,n.WritingMode.horizontal),()=>{const ms=Xt.verticalTextBox;return B.allowVerticalPlacement&&qt>0&&ms?(br(ms),sr(ms,n.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Fr(Wi&&Wi.box&&Wi.box.length)}}if(Rn=Wi,di=Rn&&Rn.box&&Rn.box.length>0,Rt=Rn&&Rn.offscreen,Yt=Rn&&Rn.occluded,Nt.useRuntimeCollisionCircles){const Fr=B.text.placedSymbolArray.get(Nt.centerJustifiedTextSymbolIndex>=0?Nt.centerJustifiedTextSymbolIndex:Nt.verticalPlacedTextSymbolIndex),wr=n.evaluateSizeForFeature(B.textSizeData,et,Fr),sr=ne.get("text-padding");sn=this.collisionIndex.placeCollisionCircles(B,tt,Fr,B.lineVertexArray,B.glyphOffsetArray,wr,he,pe,Me,x,gt,Ye.predicate,Nt.collisionCircleDiameter*wr/n.ONE_EM,sr,this.retainedQueryData[B.bucketInstanceId].tileID),di=tt||sn.circles.length>0&&!sn.collisionDetected,Rt=Rt&&sn.offscreen,Yt=sn.occluded}if(Xt.iconFeatureIndex&&(Ar=Xt.iconFeatureIndex),Xt.iconBox){const Fr=wr=>{br(wr);const sr=kt&&nn?Pl(nn.x,nn.y,Tt,gt,this.transform.angle):new n.pointGeometry(0,0),ms=B.getSymbolInstanceIconSize(rt,this.transform.zoom,Nt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(B,ms,wr,sr,pt,Re,he,Ye.predicate)};pn&&pn.box&&pn.box.length&&Xt.verticalIconBox?(Vi=Fr(Xt.verticalIconBox),wi=Vi.box.length>0):(Vi=Fr(Xt.iconBox),wi=Vi.box.length>0),Rt=Rt&&Vi.offscreen,Hi=Vi.occluded}const Mo=Ze||Nt.numHorizontalGlyphVertices===0&&qt===0,mo=lt||Nt.numIconVertices===0;if(Mo||mo?mo?Mo||(wi=wi&&di):di=wi&&di:wi=di=wi&&di,di&&Rn&&Rn.box&&this.collisionIndex.insertCollisionBox(Rn.box,ne.get("text-ignore-placement"),B.bucketInstanceId,pn&&pn.box&&hr?hr:Sr,Ye.ID),wi&&Vi&&this.collisionIndex.insertCollisionBox(Vi.box,ne.get("icon-ignore-placement"),B.bucketInstanceId,Ar,Ye.ID),sn&&(di&&this.collisionIndex.insertCollisionCircles(sn.circles,ne.get("text-ignore-placement"),B.bucketInstanceId,Sr,Ye.ID),x)){const Fr=B.bucketInstanceId;let wr=this.collisionCircleArrays[Fr];wr===void 0&&(wr=this.collisionCircleArrays[Fr]=new Wc);for(let sr=0;sr<sn.circles.length;sr+=4)wr.circles.push(sn.circles[sr+0]),wr.circles.push(sn.circles[sr+1]),wr.circles.push(sn.circles[sr+2]),wr.circles.push(sn.collisionDetected?1:0)}const $a=B.projection.name!=="globe";Ft=Ft&&($a||!Yt),Dt=Dt&&($a||!Hi),this.placements[vi]=new il(di||Ft,wi||Dt,Rt||B.justReloaded),u[vi]=!0};if(Wt){const Nt=B.getSortedSymbolIndexes(this.transform.angle);for(let si=Nt.length-1;si>=0;--si){const Xt=Nt[si];pi(B.symbolInstances.get(Xt),Xt,B.collisionArrays[Xt])}}else for(let Nt=a.symbolInstanceStart;Nt<a.symbolInstanceEnd;Nt++)pi(B.symbolInstances.get(Nt),Nt,B.collisionArrays[Nt]);if(x&&B.bucketInstanceId in this.collisionCircleArrays){const Nt=this.collisionCircleArrays[B.bucketInstanceId];n.invert(Nt.invProjMatrix,he),Nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}B.justReloaded=!1}markUsedJustification(a,u,x,P){const{leftJustifiedTextSymbolIndex:B,centerJustifiedTextSymbolIndex:ne,rightJustifiedTextSymbolIndex:he,verticalPlacedTextSymbolIndex:pe,crossTileID:Me}=x,Ee=n.getAnchorJustification(u),Re=P===n.WritingMode.vertical?pe:Ee==="left"?B:Ee==="center"?ne:Ee==="right"?he:-1;B>=0&&(a.text.placedSymbolArray.get(B).crossTileID=Re>=0&&B!==Re?0:Me),ne>=0&&(a.text.placedSymbolArray.get(ne).crossTileID=Re>=0&&ne!==Re?0:Me),he>=0&&(a.text.placedSymbolArray.get(he).crossTileID=Re>=0&&he!==Re?0:Me),pe>=0&&(a.text.placedSymbolArray.get(pe).crossTileID=Re>=0&&pe!==Re?0:Me)}markUsedOrientation(a,u,x){const P=u===n.WritingMode.horizontal||u===n.WritingMode.horizontalOnly?u:0,B=u===n.WritingMode.vertical?u:0,{leftJustifiedTextSymbolIndex:ne,centerJustifiedTextSymbolIndex:he,rightJustifiedTextSymbolIndex:pe,verticalPlacedTextSymbolIndex:Me}=x,Ee=a.text.placedSymbolArray;ne>=0&&(Ee.get(ne).placedOrientation=P),he>=0&&(Ee.get(he).placedOrientation=P),pe>=0&&(Ee.get(pe).placedOrientation=P),Me>=0&&(Ee.get(Me).placedOrientation=B)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let x=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const P=u?u.symbolFadeChange(a):1,B=u?u.opacities:{},ne=u?u.variableOffsets:{},he=u?u.placedOrientations:{};for(const pe in this.placements){const Me=this.placements[pe],Ee=B[pe];Ee?(this.opacities[pe]=new ja(Ee,P,Me.text,Me.icon,null,Me.clipped),x=x||Me.text!==Ee.text.placed||Me.icon!==Ee.icon.placed):(this.opacities[pe]=new ja(null,P,Me.text,Me.icon,Me.skipFade,Me.clipped),x=x||Me.text||Me.icon)}for(const pe in B){const Me=B[pe];if(!this.opacities[pe]){const Ee=new ja(Me,P,!1,!1);Ee.isHidden()||(this.opacities[pe]=Ee,x=x||Me.text.placed||Me.icon.placed)}}for(const pe in ne)this.variableOffsets[pe]||!this.opacities[pe]||this.opacities[pe].isHidden()||(this.variableOffsets[pe]=ne[pe]);for(const pe in he)this.placedOrientations[pe]||!this.opacities[pe]||this.opacities[pe].isHidden()||(this.placedOrientations[pe]=he[pe]);x?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:a)}updateLayerOpacities(a,u){const x={};for(const P of u){const B=P.getBucket(a);B&&P.latestFeatureIndex&&a.id===B.layerIds[0]&&this.updateBucketOpacities(B,x,P.collisionBoxArray)}}updateBucketOpacities(a,u,x){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const P=a.layers[0].layout,B=!!a.layers[0].dynamicFilter(),ne=new ja(null,0,!1,!1,!0),he=P.get("text-allow-overlap"),pe=P.get("icon-allow-overlap"),Me=P.get("text-variable-anchor"),Ee=P.get("text-rotation-alignment")==="map",Re=P.get("text-pitch-alignment")==="map",$e=P.get("icon-text-fit")!=="none",Qe=new ja(null,0,he&&(pe||!a.hasIconData()||P.get("icon-optional")),pe&&(he||!a.hasTextData()||P.get("text-optional")),!0);!a.collisionArrays&&x&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(x);const et=(Ye,Ze,lt)=>{for(let tt=0;tt<Ze/4;tt++)Ye.opacityVertexArray.emplaceBack(lt)};let rt=0;for(let Ye=0;Ye<a.symbolInstances.length;Ye++){const Ze=a.symbolInstances.get(Ye),{numHorizontalGlyphVertices:lt,numVerticalGlyphVertices:tt,crossTileID:pt,numIconVertices:Tt}=Ze;let gt=this.opacities[pt];u[pt]?gt=ne:gt||(gt=Qe,this.opacities[pt]=gt),u[pt]=!0;const kt=lt>0||tt>0,Wt=Tt>0,Ft=this.placedOrientations[pt],Dt=Ft===n.WritingMode.vertical,pi=Ft===n.WritingMode.horizontal||Ft===n.WritingMode.horizontalOnly;if(!kt&&!Wt||gt.isHidden()||rt++,kt){const Nt=Es(gt.text);et(a.text,lt,Dt?nl:Nt),et(a.text,tt,pi?nl:Nt);const si=gt.text.isHidden(),{leftJustifiedTextSymbolIndex:Xt,centerJustifiedTextSymbolIndex:vi,rightJustifiedTextSymbolIndex:qt,verticalPlacedTextSymbolIndex:di}=Ze,wi=a.text.placedSymbolArray,Rt=si||Dt?1:0;Xt>=0&&(wi.get(Xt).hidden=Rt),vi>=0&&(wi.get(vi).hidden=Rt),qt>=0&&(wi.get(qt).hidden=Rt),di>=0&&(wi.get(di).hidden=si||pi?1:0);const Yt=this.variableOffsets[pt];Yt&&this.markUsedJustification(a,Yt.anchor,Ze,Ft);const Hi=this.placedOrientations[pt];Hi&&(this.markUsedJustification(a,"left",Ze,Hi),this.markUsedOrientation(a,Hi,Ze))}if(Wt){const Nt=Es(gt.icon),{placedIconSymbolIndex:si,verticalPlacedIconSymbolIndex:Xt}=Ze,vi=a.icon.placedSymbolArray,qt=gt.icon.isHidden()?1:0;si>=0&&(et(a.icon,Tt,Dt?nl:Nt),vi.get(si).hidden=qt),Xt>=0&&(et(a.icon,Ze.numVerticalIconVertices,pi?nl:Nt),vi.get(Xt).hidden=qt)}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Nt=a.collisionArrays[Ye];if(Nt){let si=new n.pointGeometry(0,0),Xt=!0;if(Nt.textBox||Nt.verticalTextBox){if(Me){const qt=this.variableOffsets[pt];qt?(si=is(qt.anchor,qt.width,qt.height,qt.textOffset,qt.textScale),Ee&&si._rotate(Re?this.transform.angle:-this.transform.angle)):Xt=!1}B&&(Xt=!gt.clipped),Nt.textBox&&Os(a.textCollisionBox.collisionVertexArray,gt.text.placed,!Xt||Dt,si.x,si.y),Nt.verticalTextBox&&Os(a.textCollisionBox.collisionVertexArray,gt.text.placed,!Xt||pi,si.x,si.y)}const vi=Xt&&Boolean(!pi&&Nt.verticalIconBox);Nt.iconBox&&Os(a.iconCollisionBox.collisionVertexArray,gt.icon.placed,vi,$e?si.x:0,$e?si.y:0),Nt.verticalIconBox&&Os(a.iconCollisionBox.collisionVertexArray,gt.icon.placed,!vi,$e?si.x:0,$e?si.y:0)}}}if(a.fullyClipped=rt===0,a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.bucketInstanceId in this.collisionCircleArrays){const Ye=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Ye.invProjMatrix,a.placementViewportMatrix=Ye.viewportMatrix,a.collisionCircleArray=Ye.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,u){const x=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*x>a}setStale(){this.stale=!0}}function Os(_,a,u,x,P){_.emplaceBack(a?1:0,u?1:0,x||0,P||0),_.emplaceBack(a?1:0,u?1:0,x||0,P||0),_.emplaceBack(a?1:0,u?1:0,x||0,P||0),_.emplaceBack(a?1:0,u?1:0,x||0,P||0)}const Go=Math.pow(2,25),su=Math.pow(2,24),bh=Math.pow(2,17),ys=Math.pow(2,16),Dl=Math.pow(2,9),wh=Math.pow(2,8),Il=Math.pow(2,1);function Es(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const a=_.placed?1:0,u=Math.floor(127*_.opacity);return u*Go+a*su+u*bh+a*ys+u*Dl+a*wh+u*Il+a}const nl=0;class Th{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&a.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,u,x,P,B){const ne=this._bucketParts;for(;this._currentTileIndex<a.length;)if(u.getBucketParts(ne,P,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ne.sort((he,pe)=>he.sortKey-pe.sortKey));this._currentPartIndex<ne.length;){const he=ne[this._currentPartIndex];if(u.placeLayerBucketPart(he,this._seenCrossTileIDs,x,he.symbolInstanceStart===0),this._currentPartIndex++,B())return!0}return!1}}class nr{constructor(a,u,x,P,B,ne,he,pe){this.placement=new ad(a,B,ne,he,pe),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=P,this._done=!1}isDone(){return this._done}continuePlacement(a,u,x){const P=n.exported.now(),B=()=>{const ne=n.exported.now()-P;return!this._forceFullPlacement&&ne>2};for(;this._currentPlacementIndex>=0;){const ne=u[a[this._currentPlacementIndex]],he=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=he)&&(!ne.maxzoom||ne.maxzoom>he)){if(this._inProgressLayer||(this._inProgressLayer=new Th(ne)),this._inProgressLayer.continuePlacement(x[ne.source],this.placement,this._showCollisionBoxes,ne,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const pr=512/n.EXTENT/2;class Sh{constructor(a,u,x){this.tileID=a,this.indexedSymbolInstances={},this.bucketInstanceId=x;for(let P=0;P<u.length;P++){const B=u.get(P),ne=B.key;this.indexedSymbolInstances[ne]||(this.indexedSymbolInstances[ne]=[]),this.indexedSymbolInstances[ne].push({crossTileID:B.crossTileID,coord:this.getScaledCoordinates(B,a)})}}getScaledCoordinates(a,u){const x=pr/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*n.EXTENT+a.tileAnchorX)*x),y:Math.floor((u.canonical.y*n.EXTENT+a.tileAnchorY)*x)}}findMatches(a,u,x){const P=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let B=0;B<a.length;B++){const ne=a.get(B);if(ne.crossTileID)continue;const he=this.indexedSymbolInstances[ne.key];if(!he)continue;const pe=this.getScaledCoordinates(ne,u);for(const Me of he)if(Math.abs(Me.coord.x-pe.x)<=P&&Math.abs(Me.coord.y-pe.y)<=P&&!x[Me.crossTileID]){x[Me.crossTileID]=!0,ne.crossTileID=Me.crossTileID;break}}}}class _p{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ld{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const u=Math.round((a-this.lng)/360);if(u!==0)for(const x in this.indexes){const P=this.indexes[x],B={};for(const ne in P){const he=P[ne];he.tileID=he.tileID.unwrapTo(he.tileID.wrap+u),B[he.tileID.key]=he}this.indexes[x]=B}this.lng=a}addBucket(a,u,x){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let B=0;B<u.symbolInstances.length;B++)u.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const P=this.usedCrossTileIDs[a.overscaledZ];for(const B in this.indexes){const ne=this.indexes[B];if(Number(B)>a.overscaledZ)for(const he in ne){const pe=ne[he];pe.tileID.isChildOf(a)&&pe.findMatches(u.symbolInstances,a,P)}else{const he=ne[a.scaledTo(Number(B)).key];he&&he.findMatches(u.symbolInstances,a,P)}}for(let B=0;B<u.symbolInstances.length;B++){const ne=u.symbolInstances.get(B);ne.crossTileID||(ne.crossTileID=x.generate(),P[ne.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Sh(a,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(a,u){for(const x in u.indexedSymbolInstances)for(const P of u.indexedSymbolInstances[x])delete this.usedCrossTileIDs[a][P.crossTileID]}removeStaleBuckets(a){let u=!1;for(const x in this.indexes){const P=this.indexes[x];for(const B in P)a[P[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,P[B]),delete P[B],u=!0)}return u}}class na{constructor(){this.layerIndexes={},this.crossTileIDs=new _p,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,u,x,P){let B=this.layerIndexes[a.id];B===void 0&&(B=this.layerIndexes[a.id]=new ld);let ne=!1;const he={};P.name!=="globe"&&B.handleWrapJump(x);for(const pe of u){const Me=pe.getBucket(a);Me&&a.id===Me.layerIds[0]&&(Me.bucketInstanceId||(Me.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(pe.tileID,Me,this.crossTileIDs)&&(ne=!0),he[Me.bucketInstanceId]=!0)}return B.removeStaleBuckets(he)&&(ne=!0),ne}pruneUnusedLayers(a){const u={};a.forEach(x=>{u[x]=!0});for(const x in this.layerIndexes)u[x]||delete this.layerIndexes[x]}}const Xc=(_,a)=>n.emitValidationErrors(_,a&&a.filter(u=>u.identifier!=="source.canvas")),Eh=n.pick(Qi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ll=n.pick(Qi,["setCenter","setZoom","setBearing","setPitch"]),rl={version:8,layers:[],sources:{}},vs={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class j extends n.Evented{constructor(a,u={}){super(),this.map=a,this.dispatcher=new we(hn(),this),this.imageManager=new H,this.imageManager.setEventedParent(this),this.glyphManager=new n.GlyphManager(a._requestManager,u.localFontFamily?n.LocalGlyphMode.all:u.localIdeographFontFamily?n.LocalGlyphMode.ideographs:n.LocalGlyphMode.none,u.localFontFamily||u.localIdeographFontFamily),this.crossTileSymbolIndex=new na,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());const x=this;this._rtlTextPluginCallback=j.registerForPluginStateChange(P=>{x.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:P.pluginStatus,pluginURL:P.pluginURL},(B,ne)=>{if(n.triggerPluginCompletionEvent(B),ne&&ne.every(he=>he))for(const he in x._sourceCaches){const pe=x._sourceCaches[he],Me=pe.getSource().type;Me!=="vector"&&Me!=="geojson"||pe.reload()}})}),this.on("data",P=>{if(P.dataType!=="source"||P.sourceDataType!=="metadata")return;const B=this.getSource(P.sourceId);if(B&&B.vectorLayerIds)for(const ne in this._layers){const he=this._layers[ne];he.source===B.id&&this._validateLayer(he)}})}loadURL(a,u={}){this.fire(new n.Event("dataloading",{dataType:"style"}));const x=typeof u.validate=="boolean"?u.validate:!n.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,u.accessToken);const P=this.map._requestManager.transformRequest(a,n.ResourceType.Style);this._request=n.getJSON(P,(B,ne)=>{this._request=null,B?this.fire(new n.ErrorEvent(B)):ne&&this._load(ne,x)})}loadJSON(a,u={}){this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.exported.frame(()=>{this._request=null,this._load(a,u.validate!==!1)})}loadEmpty(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(rl,!1)}_updateLayerCount(a,u){const x=u?1:-1;a.is3D()&&(this._num3DLayers+=x),a.type==="circle"&&(this._numCircleLayers+=x),a.type==="symbol"&&(this._numSymbolLayers+=x)}_load(a,u){if(u&&Xc(this,n.validateStyle(a)))return;this._loaded=!0,this.stylesheet=n.clone$1(a),this._updateMapProjection();for(const P in a.sources)this.addSource(P,a.sources[P],{validate:!1});this._changed=!1,a.sprite?this._loadSprite(a.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(a.glyphs);const x=er(this.stylesheet.layers);this._order=x.map(P=>P.id),this._layers={},this._serializedLayers={};for(let P of x)P=n.createStyleLayer(P),P.setEventedParent(this,{layer:{id:P.id}}),this._layers[P.id]=P,this._serializedLayers[P.id]=P.serialize(),this._updateLayerCount(P,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new f(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(a){a?this.stylesheet.projection=a:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(a){this._spriteRequest=function(u,x,P){let B,ne,he;const pe=n.exported.devicePixelRatio>1?"@2x":"";let Me=n.getJSON(x.transformRequest(x.normalizeSpriteURL(u,pe,".json"),n.ResourceType.SpriteJSON),($e,Qe)=>{Me=null,he||(he=$e,B=Qe,Re())}),Ee=n.getImage(x.transformRequest(x.normalizeSpriteURL(u,pe,".png"),n.ResourceType.SpriteImage),($e,Qe)=>{Ee=null,he||(he=$e,ne=Qe,Re())});function Re(){if(he)P(he);else if(B&&ne){const $e=n.exported.getImageData(ne),Qe={};for(const et in B){const{width:rt,height:Ye,x:Ze,y:lt,sdf:tt,pixelRatio:pt,stretchX:Tt,stretchY:gt,content:kt}=B[et],Wt=new n.RGBAImage({width:rt,height:Ye});n.RGBAImage.copy($e,Wt,{x:Ze,y:lt},{x:0,y:0},{width:rt,height:Ye}),Qe[et]={data:Wt,pixelRatio:pt,sdf:tt,stretchX:Tt,stretchY:gt,content:kt}}P(null,Qe)}}return{cancel(){Me&&(Me.cancel(),Me=null),Ee&&(Ee.cancel(),Ee=null)}}}(a,this.map._requestManager,(u,x)=>{if(this._spriteRequest=null,u)this.fire(new n.ErrorEvent(u));else if(x)for(const P in x)this.imageManager.addImage(P,x[P]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new n.Event("data",{dataType:"style"}))})}_validateLayer(a){const u=this.getSource(a.source);if(!u)return;const x=a.sourceLayer;x&&(u.type==="geojson"||u.vectorLayerIds&&u.vectorLayerIds.indexOf(x)===-1)&&this.fire(new n.ErrorEvent(new Error(`Source layer "${x}" does not exist on source "${u.id}" as specified by style layer "${a.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this._sourceCaches)if(!this._sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(a){const u=[];for(const x of a){const P=this._layers[x];P.type!=="custom"&&u.push(P.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const a in this._sourceCaches)if(this._sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(a){return!!this.terrain&&vs[a.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(a){if(!this._loaded)return;const u=this._changed;if(this._changed){const P=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(P.length||B.length)&&this._updateWorkerLayers(P,B);for(const ne in this._updatedSources){const he=this._updatedSources[ne];he==="reload"?this._reloadSource(ne):he==="clear"&&this._clearSource(ne)}this._updateTilesForChangedImages();for(const ne in this._updatedPaintProps)this._layers[ne].updateTransitions(a);this.light.updateTransitions(a),this.fog&&this.fog.updateTransitions(a),this._resetUpdates()}const x={};for(const P in this._sourceCaches){const B=this._sourceCaches[P];x[P]=B.used,B.used=!1}for(const P of this._order){const B=this._layers[P];if(B.recalculate(a,this._availableImages),!B.isHidden(a.zoom)){const he=this._getLayerSourceCache(B);he&&(he.used=!0)}const ne=this.map.painter;if(ne){const he=B.getProgramIds();if(!he)continue;const pe=B.getProgramConfiguration(a.zoom);for(const Me of he)ne.useProgram(Me,pe)}}for(const P in x){const B=this._sourceCaches[P];x[P]!==B.used&&B.getSource().fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:B.getSource().id}))}this.light.recalculate(a),this.terrain&&this.terrain.recalculate(a),this.fog&&this.fog.recalculate(a),this.z=a.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),u&&this.fire(new n.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const u in this._sourceCaches)this._sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateWorkerLayers(a,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(a){if(this._checkLoaded(),Xc(this,n.validateStyle(a)))return!1;(a=n.clone$1(a)).layers=er(a.layers);const u=function(P,B){if(!P)return[{command:Qi.setStyle,args:[B]}];let ne=[];try{if(!T(P.version,B.version))return[{command:Qi.setStyle,args:[B]}];T(P.center,B.center)||ne.push({command:Qi.setCenter,args:[B.center]}),T(P.zoom,B.zoom)||ne.push({command:Qi.setZoom,args:[B.zoom]}),T(P.bearing,B.bearing)||ne.push({command:Qi.setBearing,args:[B.bearing]}),T(P.pitch,B.pitch)||ne.push({command:Qi.setPitch,args:[B.pitch]}),T(P.sprite,B.sprite)||ne.push({command:Qi.setSprite,args:[B.sprite]}),T(P.glyphs,B.glyphs)||ne.push({command:Qi.setGlyphs,args:[B.glyphs]}),T(P.transition,B.transition)||ne.push({command:Qi.setTransition,args:[B.transition]}),T(P.light,B.light)||ne.push({command:Qi.setLight,args:[B.light]}),T(P.fog,B.fog)||ne.push({command:Qi.setFog,args:[B.fog]}),T(P.projection,B.projection)||ne.push({command:Qi.setProjection,args:[B.projection]});const he={},pe=[];(function(Re,$e,Qe,et){let rt;for(rt in $e=$e||{},Re=Re||{})Re.hasOwnProperty(rt)&&($e.hasOwnProperty(rt)||lr(rt,Qe,et));for(rt in $e)$e.hasOwnProperty(rt)&&(Re.hasOwnProperty(rt)?T(Re[rt],$e[rt])||(Re[rt].type==="geojson"&&$e[rt].type==="geojson"&&el(Re,$e,rt)?Qe.push({command:Qi.setGeoJSONSourceData,args:[rt,$e[rt].data]}):ga(rt,$e,Qe,et)):Tr(rt,$e,Qe))})(P.sources,B.sources,pe,he);const Me=[];P.layers&&P.layers.forEach(Re=>{Re.source&&he[Re.source]?ne.push({command:Qi.removeLayer,args:[Re.id]}):Me.push(Re)});let Ee=P.terrain;Ee&&he[Ee.source]&&(ne.push({command:Qi.setTerrain,args:[void 0]}),Ee=void 0),ne=ne.concat(pe),T(Ee,B.terrain)||ne.push({command:Qi.setTerrain,args:[B.terrain]}),function(Re,$e,Qe){$e=$e||[];const et=(Re=Re||[]).map(ni),rt=$e.map(ni),Ye=Re.reduce(jo,{}),Ze=$e.reduce(jo,{}),lt=et.slice(),tt=Object.create(null);let pt,Tt,gt,kt,Wt,Ft,Dt;for(pt=0,Tt=0;pt<et.length;pt++)gt=et[pt],Ze.hasOwnProperty(gt)?Tt++:(Qe.push({command:Qi.removeLayer,args:[gt]}),lt.splice(lt.indexOf(gt,Tt),1));for(pt=0,Tt=0;pt<rt.length;pt++)gt=rt[rt.length-1-pt],lt[lt.length-1-pt]!==gt&&(Ye.hasOwnProperty(gt)?(Qe.push({command:Qi.removeLayer,args:[gt]}),lt.splice(lt.lastIndexOf(gt,lt.length-Tt),1)):Tt++,Ft=lt[lt.length-pt],Qe.push({command:Qi.addLayer,args:[Ze[gt],Ft]}),lt.splice(lt.length-pt,0,gt),tt[gt]=!0);for(pt=0;pt<rt.length;pt++)if(gt=rt[pt],kt=Ye[gt],Wt=Ze[gt],!tt[gt]&&!T(kt,Wt))if(T(kt.source,Wt.source)&&T(kt["source-layer"],Wt["source-layer"])&&T(kt.type,Wt.type)){for(Dt in wo(kt.layout,Wt.layout,Qe,gt,null,Qi.setLayoutProperty),wo(kt.paint,Wt.paint,Qe,gt,null,Qi.setPaintProperty),T(kt.filter,Wt.filter)||Qe.push({command:Qi.setFilter,args:[gt,Wt.filter]}),T(kt.minzoom,Wt.minzoom)&&T(kt.maxzoom,Wt.maxzoom)||Qe.push({command:Qi.setLayerZoomRange,args:[gt,Wt.minzoom,Wt.maxzoom]}),kt)kt.hasOwnProperty(Dt)&&Dt!=="layout"&&Dt!=="paint"&&Dt!=="filter"&&Dt!=="metadata"&&Dt!=="minzoom"&&Dt!=="maxzoom"&&(Dt.indexOf("paint.")===0?wo(kt[Dt],Wt[Dt],Qe,gt,Dt.slice(6),Qi.setPaintProperty):T(kt[Dt],Wt[Dt])||Qe.push({command:Qi.setLayerProperty,args:[gt,Dt,Wt[Dt]]}));for(Dt in Wt)Wt.hasOwnProperty(Dt)&&!kt.hasOwnProperty(Dt)&&Dt!=="layout"&&Dt!=="paint"&&Dt!=="filter"&&Dt!=="metadata"&&Dt!=="minzoom"&&Dt!=="maxzoom"&&(Dt.indexOf("paint.")===0?wo(kt[Dt],Wt[Dt],Qe,gt,Dt.slice(6),Qi.setPaintProperty):T(kt[Dt],Wt[Dt])||Qe.push({command:Qi.setLayerProperty,args:[gt,Dt,Wt[Dt]]}))}else Qe.push({command:Qi.removeLayer,args:[gt]}),Ft=lt[lt.lastIndexOf(gt)+1],Qe.push({command:Qi.addLayer,args:[Wt,Ft]})}(Me,B.layers,ne)}catch(he){console.warn("Unable to compute style diff:",he),ne=[{command:Qi.setStyle,args:[B]}]}return ne}(this.serialize(),a).filter(P=>!(P.command in Ll));if(u.length===0)return!1;const x=u.filter(P=>!(P.command in Eh));if(x.length>0)throw new Error(`Unimplemented: ${x.map(P=>P.command).join(", ")}.`);return u.forEach(P=>{P.command!=="setTransition"&&P.command!=="setProjection"&&this[P.command].apply(this,P.args)}),this.stylesheet=a,this._updateMapProjection(),!0}addImage(a,u){return this.getImage(a)?this.fire(new n.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(a,u),this._afterImageUpdated(a),this)}updateImage(a,u){this.imageManager.updateImage(a,u)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){return this.getImage(a)?(this.imageManager.removeImage(a),this._afterImageUpdated(a),this):this.fire(new n.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(a,u,x={}){if(this._checkLoaded(),this.getSource(a)!==void 0)throw new Error("There is already a source with this ID");if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(n.validateSource,`sources.${a}`,u,null,x))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const P=Bt(a,u,this.dispatcher,this);P.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(a),source:P.serialize(),sourceId:a}));const B=ne=>{const he=(ne?"symbol:":"other:")+a,pe=this._sourceCaches[he]=new n.SourceCache(he,P,ne);(ne?this._symbolSourceCaches:this._otherSourceCaches)[a]=pe,pe.style=this,pe.onAdd(this.map)};B(!1),u.type!=="vector"&&u.type!=="geojson"||B(!0),P.onAdd&&P.onAdd(this.map),this._changed=!0}removeSource(a){this._checkLoaded();const u=this.getSource(a);if(!u)throw new Error("There is no source with this ID");for(const P in this._layers)if(this._layers[P].source===a)return this.fire(new n.ErrorEvent(new Error(`Source "${a}" cannot be removed while layer "${P}" is using it.`)));if(this.terrain&&this.terrain.get().source===a)return this.fire(new n.ErrorEvent(new Error(`Source "${a}" cannot be removed while terrain is using it.`)));const x=this._getSourceCaches(a);for(const P of x)delete this._sourceCaches[P.id],delete this._updatedSources[P.id],P.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:P.getSource().id})),P.setEventedParent(null),P.clearTiles();return delete this._otherSourceCaches[a],delete this._symbolSourceCaches[a],u.setEventedParent(null),u.onRemove&&u.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(a,u){this._checkLoaded(),this.getSource(a).setData(u),this._changed=!0}getSource(a){const u=this._getSourceCache(a);return u&&u.getSource()}_getSources(){const a=[];for(const u in this._otherSourceCaches){const x=this._getSourceCache(u);x&&a.push(x.getSource())}return a}addLayer(a,u,x={}){this._checkLoaded();const P=a.id;if(this.getLayer(P))return void this.fire(new n.ErrorEvent(new Error(`Layer with id "${P}" already exists on this map`)));let B;if(a.type==="custom"){if(Xc(this,n.validateCustomStyleLayer(a)))return;B=n.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(P,a.source),a=n.clone$1(a),a=n.extend(a,{source:P})),this._validate(n.validateLayer,`layers.${P}`,a,{arrayIndex:-1},x))return;B=n.createStyleLayer(a),this._validateLayer(B),B.setEventedParent(this,{layer:{id:P}}),this._serializedLayers[B.id]=B.serialize(),this._updateLayerCount(B,!0)}const ne=u?this._order.indexOf(u):this._order.length;if(u&&ne===-1)return void this.fire(new n.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`)));this._order.splice(ne,0,P),this._layerOrderChanged=!0,this._layers[P]=B;const he=this._getLayerSourceCache(B);if(this._removedLayers[P]&&B.source&&he&&B.type!=="custom"){const pe=this._removedLayers[P];delete this._removedLayers[P],pe.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",he.pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(a,u){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new n.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===u)return;const x=this._order.indexOf(a);this._order.splice(x,1);const P=u?this._order.indexOf(u):this._order.length;u&&P===-1?this.fire(new n.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`))):(this._order.splice(P,0,a),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(a){this._checkLoaded();const u=this._layers[a];if(!u)return void this.fire(new n.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be removed.`)));u.setEventedParent(null),this._updateLayerCount(u,!1);const x=this._order.indexOf(a);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=u,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],u.onRemove&&u.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(a){return this._layers[a]}hasLayer(a){return a in this._layers}hasLayerType(a){for(const u in this._layers)if(this._layers[u].type===a)return!0;return!1}setLayerZoomRange(a,u,x){this._checkLoaded();const P=this.getLayer(a);P?P.minzoom===u&&P.maxzoom===x||(u!=null&&(P.minzoom=u),x!=null&&(P.maxzoom=x),this._updateLayer(P)):this.fire(new n.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(a,u,x={}){this._checkLoaded();const P=this.getLayer(a);if(P){if(!T(P.filter,u))return u==null?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(n.validateFilter,`layers.${P.id}.filter`,u,{layerType:P.type},x)||(P.filter=n.clone$1(u),this._updateLayer(P)))}else this.fire(new n.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be filtered.`)))}getFilter(a){const u=this.getLayer(a);return u&&n.clone$1(u.filter)}setLayoutProperty(a,u,x,P={}){this._checkLoaded();const B=this.getLayer(a);B?T(B.getLayoutProperty(u),x)||(B.setLayoutProperty(u,x,P),this._updateLayer(B)):this.fire(new n.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(a,u){const x=this.getLayer(a);if(x)return x.getLayoutProperty(u);this.fire(new n.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style.`)))}setPaintProperty(a,u,x,P={}){this._checkLoaded();const B=this.getLayer(a);B?T(B.getPaintProperty(u),x)||(B.setPaintProperty(u,x,P)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new n.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(a,u){const x=this.getLayer(a);return x&&x.getPaintProperty(u)}setFeatureState(a,u){this._checkLoaded();const x=a.source,P=a.sourceLayer,B=this.getSource(x);if(!B)return void this.fire(new n.ErrorEvent(new Error(`The source '${x}' does not exist in the map's style.`)));const ne=B.type;if(ne==="geojson"&&P)return void this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(ne==="vector"&&!P)return void this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));a.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided.")));const he=this._getSourceCaches(x);for(const pe of he)pe.setFeatureState(P,a.id,u)}removeFeatureState(a,u){this._checkLoaded();const x=a.source,P=this.getSource(x);if(!P)return void this.fire(new n.ErrorEvent(new Error(`The source '${x}' does not exist in the map's style.`)));const B=P.type,ne=B==="vector"?a.sourceLayer:void 0;if(B==="vector"&&!ne)return void this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(u&&typeof a.id!="string"&&typeof a.id!="number")return void this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const he=this._getSourceCaches(x);for(const pe of he)pe.removeFeatureState(ne,a.id,u)}getFeatureState(a){this._checkLoaded();const u=a.source,x=a.sourceLayer,P=this.getSource(u);if(P){if(P.type!=="vector"||x)return a.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(u)[0].getFeatureState(x,a.id);this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new n.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const a={};for(const u in this._sourceCaches){const x=this._sourceCaches[u].getSource();a[x.id]||(a[x.id]=x.serialize())}return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:a,layers:this._serializeLayers(this._order)},u=>u!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0;const u=this._getLayerSourceCache(a);a.source&&!this._updatedSources[a.source]&&u&&u.getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",u.pause()),this._changed=!0,a.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(a){const u=ne=>this._layers[ne].type==="fill-extrusion",x={},P=[];for(let ne=this._order.length-1;ne>=0;ne--){const he=this._order[ne];if(u(he)){x[he]=ne;for(const pe of a){const Me=pe[he];if(Me)for(const Ee of Me)P.push(Ee)}}}P.sort((ne,he)=>he.intersectionZ-ne.intersectionZ);const B=[];for(let ne=this._order.length-1;ne>=0;ne--){const he=this._order[ne];if(u(he))for(let pe=P.length-1;pe>=0;pe--){const Me=P[pe].feature;if(x[Me.layer.id]<ne)break;B.push(Me),P.pop()}else for(const pe of a){const Me=pe[he];if(Me)for(const Ee of Me)B.push(Ee.feature)}}return B}queryRenderedFeatures(a,u,x){u&&u.filter&&this._validate(n.validateFilter,"queryRenderedFeatures.filter",u.filter,null,u);const P={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const pe of u.layers){const Me=this._layers[pe];if(!Me)return this.fire(new n.ErrorEvent(new Error(`The layer '${pe}' does not exist in the map's style and cannot be queried for features.`))),[];P[Me.source]=!0}}const B=[];u.availableImages=this._availableImages;const ne=u&&u.layers?u.layers.some(pe=>{const Me=this.getLayer(pe);return Me&&Me.is3D()}):this.has3DLayers(),he=se.createFromScreenPoints(a,x);for(const pe in this._sourceCaches){const Me=this._sourceCaches[pe].getSource().id;u.layers&&!P[Me]||B.push(jt(this._sourceCaches[pe],this._layers,this._serializedLayers,he,u,x,ne,!!this.map._showQueryGeometry))}return this.placement&&B.push(function(pe,Me,Ee,Re,$e,Qe,et){const rt={},Ye=Qe.queryRenderedSymbols(Re),Ze=[];for(const lt of Object.keys(Ye).map(Number))Ze.push(et[lt]);Ze.sort(Ri);for(const lt of Ze){const tt=lt.featureIndex.lookupSymbolFeatures(Ye[lt.bucketInstanceId],Me,lt.bucketIndex,lt.sourceLayerIndex,$e.filter,$e.layers,$e.availableImages,pe);for(const pt in tt){const Tt=rt[pt]=rt[pt]||[],gt=tt[pt];gt.sort((kt,Wt)=>{const Ft=lt.featureSortOrder;if(Ft){const Dt=Ft.indexOf(kt.featureIndex);return Ft.indexOf(Wt.featureIndex)-Dt}return Wt.featureIndex-kt.featureIndex});for(const kt of gt)Tt.push(kt)}}for(const lt in rt)rt[lt].forEach(tt=>{const pt=tt.feature,Tt=Ee(pe[lt]).getFeatureState(pt.layer["source-layer"],pt.id);pt.source=pt.layer.source,pt.layer["source-layer"]&&(pt.sourceLayer=pt.layer["source-layer"]),pt.state=Tt});return rt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),he.screenGeometry,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(a,u){u&&u.filter&&this._validate(n.validateFilter,"querySourceFeatures.filter",u.filter,null,u);const x=this._getSourceCaches(a);let P=[];for(const B of x)P=P.concat(li(B,u));return P}addSourceType(a,u,x){return j.getSourceType(a)?x(new Error(`A source type called "${a}" already exists.`)):(j.setSourceType(a,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:u.workerSourceURL},x):x(null,null))}getLight(){return this.light.getLight()}setLight(a,u={}){this._checkLoaded();const x=this.light.getLight();let P=!1;for(const ne in a)if(!T(a[ne],x[ne])){P=!0;break}if(!P)return;const B=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(a,u),this.light.updateTransitions(B)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(a,u=1){if(this._checkLoaded(),!a)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(u===1){if(typeof a.source=="object"){const x="terrain-dem-src";this.addSource(x,a.source),a=n.clone$1(a),a=n.extend(a,{source:x})}if(this._validate(n.validateTerrain,"terrain",a))return}if(!this.terrain||this.terrain&&u!==this.terrain.drapeRenderMode)this._createTerrain(a,u);else{const x=this.terrain,P=x.get();for(const B of Object.keys(n.spec.terrain))!a.hasOwnProperty(B)&&n.spec.terrain[B].default&&(a[B]=n.spec.terrain[B].default);for(const B in a)if(!T(a[B],P[B])){x.set(a),this.stylesheet.terrain=a;const ne=this._setTransitionParameters({duration:0});x.updateTransitions(ne);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(a){const u=this.fog=new fe(a,this.map.transform);this.stylesheet.fog=a;const x=this._setTransitionParameters({duration:0});u.updateTransitions(x)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const a of this.map._markers)a._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(a){if(this._checkLoaded(),!a)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const u=this.fog,x=u.get();Object.keys(a).length===0&&u.set(a);for(const P in a)if(!T(a[P],x[P])){u.set(a),this.stylesheet.fog=a;const B=this._setTransitionParameters({duration:0});u.updateTransitions(B);break}}else this._createFog(a);this._markersNeedUpdate=!0}_setTransitionParameters(a){return{now:n.exported.now(),transition:n.extend(a,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const a=this._order.filter(x=>this.isLayerDraped(this._layers[x])),u=this._order.filter(x=>!this.isLayerDraped(this._layers[x]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...a),this._drapedFirstOrder.push(...u)}_createTerrain(a,u){const x=this.terrain=new D(a,u);this.stylesheet.terrain=a,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const P=this._setTransitionParameters({duration:0});x.updateTransitions(P)}_force3DLayerUpdate(){for(const a in this._layers){const u=this._layers[a];u.type==="fill-extrusion"&&this._updateLayer(u)}}_forceSymbolLayerUpdate(){for(const a in this._layers){const u=this._layers[a];u.type==="symbol"&&this._updateLayer(u)}}_validate(a,u,x,P,B={}){return(!B||B.validate!==!1)&&Xc(this,a.call(n.validateStyle,n.extend({key:u,style:this.serialize(),value:x,styleSpec:n.spec},P)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this._sourceCaches)this._sourceCaches[a].clearTiles(),this._sourceCaches[a].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(a){const u=this._getSourceCaches(a);for(const x of u)x.clearTiles()}_reloadSource(a){const u=this._getSourceCaches(a);for(const x of u)x.resume(),x.reload()}_reloadSources(){for(const a of this._getSources())a.reload&&a.reload()}_updateSources(a){for(const u in this._sourceCaches)this._sourceCaches[u].update(a)}_generateCollisionBoxes(){for(const a in this._sourceCaches){const u=this._sourceCaches[a];u.resume(),u.reload()}}_updatePlacement(a,u,x,P,B=!1){let ne=!1,he=!1;const pe={};for(const Me of this._order){const Ee=this._layers[Me];if(Ee.type!=="symbol")continue;if(!pe[Ee.source]){const $e=this._getLayerSourceCache(Ee);if(!$e)continue;pe[Ee.source]=$e.getRenderableIds(!0).map(Qe=>$e.getTileByID(Qe)).sort((Qe,et)=>et.tileID.overscaledZ-Qe.tileID.overscaledZ||(Qe.tileID.isLessThan(et.tileID)?-1:1))}const Re=this.crossTileSymbolIndex.addLayer(Ee,pe[Ee.source],a.center.lng,a.projection);ne=ne||Re}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),B=B||this._layerOrderChanged||x===0,this._layerOrderChanged&&this.fire(new n.Event("neworder")),(B||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.exported.now(),a.zoom))&&(this.pauseablePlacement=new nr(a,this._order,B,u,x,P,this.placement,this.fog&&a.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,pe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.exported.now()),he=!0),ne&&this.pauseablePlacement.placement.setStale()),he||ne)for(const Me of this._order){const Ee=this._layers[Me];Ee.type==="symbol"&&this.placement.updateLayerOpacities(Ee,pe[Ee.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.exported.now())}_releaseSymbolFadeTiles(){for(const a in this._sourceCaches)this._sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,u,x){this.imageManager.getImages(u.icons,x),this._updateTilesForChangedImages();const P=B=>{B&&B.setDependencies(u.tileID.key,u.type,u.icons)};P(this._otherSourceCaches[u.source]),P(this._symbolSourceCaches[u.source])}getGlyphs(a,u,x){this.glyphManager.getGlyphs(u.stacks,x)}getResource(a,u,x){return n.makeRequest(u,x)}_getSourceCache(a){return this._otherSourceCaches[a]}_getLayerSourceCache(a){return a.type==="symbol"?this._symbolSourceCaches[a.source]:this._otherSourceCaches[a.source]}_getSourceCaches(a){const u=[];return this._otherSourceCaches[a]&&u.push(this._otherSourceCaches[a]),this._symbolSourceCaches[a]&&u.push(this._symbolSourceCaches[a]),u}_isSourceCacheLoaded(a){const u=this._getSourceCaches(a);return u.length===0?(this.fire(new n.ErrorEvent(new Error(`There is no source with ID '${a}'`))),!1):u.every(x=>x.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}j.getSourceType=function(_){return Ot[_]},j.setSourceType=function(_,a){Ot[_]=a},j.registerForPluginStateChange=n.registerForPluginStateChange;var oe=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,ge="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Se=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,ze=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,je=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let He={},Ct={};const vt=[];ei(oe,vt),ei(Se,vt),ei(ze,vt),ei(je,vt),He=Pi("",Se),Ct=Pi(je,ze);const Gt=Pi(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),ii=oe,fi=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Kt={background:Pi(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Pi(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Pi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Pi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Pi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Pi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Pi("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Pi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Pi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Pi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Pi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Pi(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Pi(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Pi(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Pi(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Pi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Pi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Pi(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Pi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Pi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Pi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Pi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Pi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Pi(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Pi(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Pi(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ge),skyboxGradient:Pi(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ge),skyboxCapture:Pi(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Pi(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Pi(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function ei(_,a){const u=_.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let x of u)if(x=x.trim(),x[0]==="#"&&x.includes("if")&&!x.includes("endif")){x=x.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const P=x.split(" ");for(const B of P)a.includes(B)||a.push(B)}}function Pi(_,a){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=a.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),P={},B=[...vt];return ei(_,B),ei(a,B),{fragmentSource:_=_.replace(u,(ne,he,pe,Me,Ee)=>(P[Ee]=!0,he==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
varying ${pe} ${Me} ${Ee};
#else
uniform ${pe} ${Me} u_${Ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ee}
    ${pe} ${Me} ${Ee} = u_${Ee};
#endif
`)),vertexSource:a=a.replace(u,(ne,he,pe,Me,Ee)=>{const Re=Me==="float"?"vec2":"vec4",$e=Ee.match(/color/)?"color":Re;return P[Ee]?he==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
uniform lowp float u_${Ee}_t;
attribute ${pe} ${Re} a_${Ee};
varying ${pe} ${Me} ${Ee};
#else
uniform ${pe} ${Me} u_${Ee};
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ee}
    ${Ee} = a_${Ee};
#else
    ${pe} ${Me} ${Ee} = u_${Ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ee}
    ${Ee} = unpack_mix_${$e}(a_${Ee}, u_${Ee}_t);
#else
    ${pe} ${Me} ${Ee} = u_${Ee};
#endif
`:he==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
uniform lowp float u_${Ee}_t;
attribute ${pe} ${Re} a_${Ee};
#else
uniform ${pe} ${Me} u_${Ee};
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ee}
    ${pe} ${Me} ${Ee} = a_${Ee};
#else
    ${pe} ${Me} ${Ee} = u_${Ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ee}
    ${pe} ${Me} ${Ee} = unpack_mix_${$e}(a_${Ee}, u_${Ee}_t);
#else
    ${pe} ${Me} ${Ee} = u_${Ee};
#endif
`}),staticAttributes:x,usedDefines:B}}class Ln{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(a,u,x,P,B,ne,he){this.context=a;let pe=this.boundPaintVertexBuffers.length!==P.length;for(let Ee=0;!pe&&Ee<P.length;Ee++)this.boundPaintVertexBuffers[Ee]!==P[Ee]&&(pe=!0);let Me=this.boundDynamicVertexBuffers.length!==he.length;for(let Ee=0;!Me&&Ee<he.length;Ee++)this.boundDynamicVertexBuffers[Ee]!==he[Ee]&&(Me=!0);if(!a.extVertexArrayObject||!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==x||pe||Me||this.boundIndexBuffer!==B||this.boundVertexOffset!==ne)this.freshBind(u,x,P,B,ne,he);else{a.bindVertexArrayOES.set(this.vao);for(const Ee of he)Ee&&Ee.bind();B&&B.dynamicDraw&&B.bind()}}freshBind(a,u,x,P,B,ne){let he;const pe=a.numAttributes,Me=this.context,Ee=Me.gl;if(Me.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Me.extVertexArrayObject.createVertexArrayOES(),Me.bindVertexArrayOES.set(this.vao),he=0,this.boundProgram=a,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=P,this.boundVertexOffset=B,this.boundDynamicVertexBuffers=ne;else{he=Me.currentNumAttributes||0;for(let Re=pe;Re<he;Re++)Ee.disableVertexAttribArray(Re)}u.enableAttributes(Ee,a),u.bind(),u.setVertexAttribPointers(Ee,a,B);for(const Re of x)Re.enableAttributes(Ee,a),Re.bind(),Re.setVertexAttribPointers(Ee,a,B);for(const Re of ne)Re&&(Re.enableAttributes(Ee,a),Re.bind(),Re.setVertexAttribPointers(Ee,a,B));P&&P.bind(),Me.currentNumAttributes=pe}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function en(_,a){const u=Math.pow(2,a.canonical.z),x=a.canonical.y;return[new n.MercatorCoordinate(0,x/u).toLngLat().lat,new n.MercatorCoordinate(0,(x+1)/u).toLngLat().lat]}function Qr(_,a,u,x,P,B,ne){const he=_.context,pe=he.gl,Me=u.fbo;if(!Me)return;_.prepareDrawTile();const Ee=_.useProgram("hillshade");he.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,Me.colorAttachment.get());const Re=((rt,Ye,Ze,lt)=>{const tt=Ze.paint.get("hillshade-shadow-color"),pt=Ze.paint.get("hillshade-highlight-color"),Tt=Ze.paint.get("hillshade-accent-color");let gt=Ze.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ze.paint.get("hillshade-illumination-anchor")==="viewport"&&(gt-=rt.transform.angle);const kt=!rt.options.moving;return{u_matrix:lt||rt.transform.calculateProjMatrix(Ye.tileID.toUnwrapped(),kt),u_image:0,u_latrange:en(0,Ye.tileID),u_light:[Ze.paint.get("hillshade-exaggeration"),gt],u_shadow:tt,u_highlight:pt,u_accent:Tt}})(_,u,x,_.terrain?a.projMatrix:null);_.prepareDrawProgram(he,Ee,a.toUnwrapped());const{tileBoundsBuffer:$e,tileBoundsIndexBuffer:Qe,tileBoundsSegments:et}=_.getTileBoundsBuffers(u);Ee.draw(he,pe.TRIANGLES,P,B,ne,n.CullFaceMode.disabled,Re,x.id,$e,Qe,et)}function zr(_,a,u){if(!a.needsDEMTextureUpload)return;const x=_.context,P=x.gl;x.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||_.getTileTexture(u.stride);const B=u.getPixels();a.demTexture?a.demTexture.update(B,{premultiply:!1}):a.demTexture=new n.Texture(x,B,P.RGBA,{premultiply:!1}),a.needsDEMTextureUpload=!1}function Vn(_,a,u,x,P,B){const ne=_.context,he=ne.gl;if(!a.dem)return;const pe=a.dem;if(ne.activeTexture.set(he.TEXTURE1),zr(_,a,pe),!a.demTexture)return;a.demTexture.bind(he.NEAREST,he.CLAMP_TO_EDGE);const Me=pe.dim;ne.activeTexture.set(he.TEXTURE0);let Ee=a.fbo;if(!Ee){const et=new n.Texture(ne,{width:Me,height:Me,data:null},he.RGBA);et.bind(he.LINEAR,he.CLAMP_TO_EDGE),Ee=a.fbo=ne.createFramebuffer(Me,Me,!0),Ee.colorAttachment.set(et.texture)}ne.bindFramebuffer.set(Ee.framebuffer),ne.viewport.set([0,0,Me,Me]);const{tileBoundsBuffer:Re,tileBoundsIndexBuffer:$e,tileBoundsSegments:Qe}=_.getMercatorTileBoundsBuffers();_.useProgram("hillshadePrepare").draw(ne,he.TRIANGLES,x,P,B,n.CullFaceMode.disabled,((et,rt)=>{const Ye=rt.stride,Ze=n.create();return n.ortho(Ze,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(Ze,Ze,[0,-n.EXTENT,0]),{u_matrix:Ze,u_image:1,u_dimension:[Ye,Ye],u_zoom:et.overscaledZ,u_unpack:rt.unpackVector}})(a.tileID,pe),u.id,Re,$e,Qe),a.needsHillshadePrepare=!1}const $n=_=>({u_matrix:new n.UniformMatrix4f(_),u_image0:new n.Uniform1i(_),u_skirt_height:new n.Uniform1f(_)}),Tn=(_,a)=>({u_matrix:_,u_image0:0,u_skirt_height:a}),Js=(_,a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe)=>({u_proj_matrix:Float32Array.from(_),u_globe_matrix:a,u_normalize_matrix:Float32Array.from(x),u_merc_matrix:u,u_zoom_transition:P,u_merc_center:B,u_image0:0,u_frustum_tl:ne,u_frustum_tr:he,u_frustum_br:pe,u_frustum_bl:Me,u_globe_pos:Ee,u_globe_radius:Re,u_viewport:$e,u_grid_matrix:Qe?Float32Array.from(Qe):new Float32Array(9)});function Xn(_,a){return _!=null&&a!=null&&!(!_.hasData()||!a.hasData())&&_.demTexture!=null&&a.demTexture!=null&&_.tileID.key!==a.tileID.key}const Cr=new class{constructor(){this.operations={}}newMorphing(_,a,u,x,P){if(_ in this.operations){const B=this.operations[_];B.to.tileID.key!==u.tileID.key&&(B.queued=u)}else this.operations[_]={startTime:x,phase:0,duration:P,from:a,to:u,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const a=this.operations[_];return{from:a.from,to:a.to,phase:a.phase}}update(_){for(const a in this.operations){const u=this.operations[a];for(u.phase=(_-u.startTime)/u.duration;u.phase>=1||!this._validOp(u);)if(!this._nextOp(u,_)){delete this.operations[a];break}}}_nextOp(_,a){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=a,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},ya={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ol(_,a){const u=1<<_.z;return!a&&(_.x===0||_.x===u-1)||_.y===0||_.y===u-1}const Rs=_=>({u_matrix:_});function To(_,a,u,x,P){if(P>0){const B=n.exported.now(),ne=(B-_.timeAdded)/P,he=a?(B-a.timeAdded)/P:-1,pe=u.getSource(),Me=x.coveringZoomLevel({tileSize:pe.tileSize,roundZoom:pe.roundZoom}),Ee=!a||Math.abs(a.tileID.overscaledZ-Me)>Math.abs(_.tileID.overscaledZ-Me),Re=Ee&&_.refreshedUponExpiration?1:n.clamp(Ee?ne:1-he,0,1);return _.refreshedUponExpiration&&ne>=1&&(_.refreshedUponExpiration=!1),a?{opacity:1,mix:1-Re}:{opacity:Re,mix:0}}return{opacity:1,mix:0}}class Pn extends n.SourceCache{constructor(a){const u={type:"raster-dem",maxzoom:a.transform.maxZoom},x=new we(hn(),null),P=Bt("mock-dem",u,x,a.style);super("mock-dem",P,!1),P.setEventedParent(this),this._sourceLoaded=!0}_loadTile(a,u){a.state="loaded",u(null)}}class $s extends n.SourceCache{constructor(a){const u=Bt("proxy",{type:"geojson",maxzoom:a.transform.maxZoom},new we(hn(),null),a.style);super("proxy",u,!1),u.setEventedParent(this),this.map=this.getSource().map=a,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(a,u,x){if(a.freezeTileCoverage)return;this.transform=a;const P=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((B,ne)=>{if(B[ne.key]="",!this._tiles[ne.key]){const he=new n.Tile(ne,this._source.tileSize*ne.overscaleFactor(),a.tileZoom);he.state="loaded",this._tiles[ne.key]=he}return B},{});for(const B in this._tiles)B in P||(this.freeFBO(B),this._tiles[B].unloadVectorData(),delete this._tiles[B])}freeFBO(a){const u=this.proxyCachedFBO[a];if(u!==void 0){const x=Object.values(u);this.renderCachePool.push(...x),delete this.proxyCachedFBO[a]}}deallocRenderCache(){this.renderCache.forEach(a=>a.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ra extends n.OverscaledTileID{constructor(a,u,x){super(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y),this.proxyTileKey=u,this.projMatrix=x}}class uo extends n.Elevation{constructor(a,u){super(),this.painter=a,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[x,P,B]=function(pe){const Me=new n.StructArrayLayout4i8,Ee=new n.StructArrayLayout3ui6,Re=131;Me.reserve(17161),Ee.reserve(33800);const $e=n.EXTENT/128,Qe=n.EXTENT+$e/2,et=Qe+$e;for(let Ye=-$e;Ye<et;Ye+=$e)for(let Ze=-$e;Ze<et;Ze+=$e){const lt=Ze<0||Ze>Qe||Ye<0||Ye>Qe?24575:0,tt=n.clamp(Math.round(Ze),0,n.EXTENT),pt=n.clamp(Math.round(Ye),0,n.EXTENT);Me.emplaceBack(tt+lt,pt,tt,pt)}const rt=(Ye,Ze)=>{const lt=Ze*Re+Ye;Ee.emplaceBack(lt+1,lt,lt+Re),Ee.emplaceBack(lt+Re,lt+Re+1,lt+1)};for(let Ye=1;Ye<129;Ye++)for(let Ze=1;Ze<129;Ze++)rt(Ze,Ye);return[0,129].forEach(Ye=>{for(let Ze=0;Ze<130;Ze++)rt(Ze,Ye),rt(Ye,Ze)}),[Me,Ee,32768]}(),ne=a.context;this.gridBuffer=ne.createVertexBuffer(x,n.boundsAttributes.members),this.gridIndexBuffer=ne.createIndexBuffer(P),this.gridSegments=n.SegmentVector.simpleSegment(0,0,x.length,P.length),this.gridNoSkirtSegments=n.SegmentVector.simpleSegment(0,0,x.length,B),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new $s(u.map),this.orthoMatrix=n.create(),n.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.EXTENT,0,n.EXTENT,0,1);const he=ne.gl;this._overlapStencilMode=new n.StencilMode({func:he.GEQUAL,mask:255},0,255,he.KEEP,he.KEEP,he.REPLACE),this._previousZoom=a.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=u,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Pn(u.map)}set style(a){a.on("data",this._onStyleDataEvent.bind(this)),a.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=a,this._checkRenderCacheEfficiency()}update(a,u,x){if(a&&a.terrain){this._style!==a&&(this.style=a),this.enabled=!0;const P=a.terrain.properties;this.sourceCache=a.terrain.drapeRenderMode===0?this._mockSourceCache:a._getSourceCache(P.get("source")),this._exaggeration=P.get("exaggeration");const B=()=>{this.sourceCache.used&&n.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const ne=this.getScaledDemTileSize();this.sourceCache.update(u,ne,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,B(),this._initializing=!0),B(),u.updateElevation(!0,x),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(u),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(a){this._findCoveringTileCache[a]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const a=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||a.efficiency!==100&&n.warnOnce(`Terrain render cache efficiency is not optimal (${a.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${a.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(a){a.coord&&a.dataType==="source"?this._clearRenderCacheForTile(a.sourceCacheId,a.coord):a.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const a in this._style._sourceCaches)this._style._sourceCaches[a].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(a=>a.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const a=2*this.proxySourceCache.getSource().tileSize;return[a,a]}set useVertexMorphing(a){this._useVertexMorphing=a}updateTileBinding(a){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const u=this.proxySourceCache,x=this.painter.transform;this._initializing&&(this._initializing=x._centerAltitude===0&&this.getAtPointOrZero(n.MercatorCoordinate.fromLngLat(x.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const P=this.proxyCoords=u.getIds().map(pe=>{const Me=u.getTileByID(pe).tileID;return Me.projMatrix=x.calculateProjMatrix(Me.toUnwrapped()),Me});(function(pe,Me){const Ee=Me.transform.pointCoordinate(Me.transform.getCameraPoint()),Re=new n.pointGeometry(Ee.x,Ee.y);pe.sort(($e,Qe)=>{if(Qe.overscaledZ-$e.overscaledZ)return Qe.overscaledZ-$e.overscaledZ;const et=new n.pointGeometry($e.canonical.x+(1<<$e.canonical.z)*$e.wrap,$e.canonical.y),rt=new n.pointGeometry(Qe.canonical.x+(1<<Qe.canonical.z)*Qe.wrap,Qe.canonical.y),Ye=Re.mult(1<<$e.canonical.z);return Ye.x-=.5,Ye.y-=.5,Ye.distSqr(et)-Ye.distSqr(rt)})})(P,this.painter),this._previousZoom=x.zoom;const B=this.proxyToSource||{};this.proxyToSource={},P.forEach(pe=>{this.proxyToSource[pe.key]={}}),this.terrainTileForTile={};const ne=this._style._sourceCaches;for(const pe in ne){const Me=ne[pe];if(!Me.used||(Me!==this.sourceCache&&this.resetTileLookupCache(Me.id),this._setupProxiedCoordsForOrtho(Me,a[pe],B),Me.usedForTerrain))continue;const Ee=a[pe];Me.getSource().reparseOverscaled&&this._assignTerrainTiles(Ee)}this.proxiedCoords[u.id]=P.map(pe=>new ra(pe,pe.key,this.orthoMatrix)),this._assignTerrainTiles(P),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(B),this.renderingToTexture=!1,this._updateTimestamp=n.exported.now();const he={};this._visibleDemTiles=[];for(const pe of this.proxyCoords){const Me=this.terrainTileForTile[pe.key];if(!Me)continue;const Ee=Me.tileID.key;Ee in he||(this._visibleDemTiles.push(Me),he[Ee]=Ee)}}_assignTerrainTiles(a){this._initializing||a.forEach(u=>{if(this.terrainTileForTile[u.key])return;const x=this._findTileCoveringTileID(u,this.sourceCache);x&&(this.terrainTileForTile[u.key]=x)})}_prepareDEMTextures(){const a=this.painter.context,u=a.gl;for(const x in this.terrainTileForTile){const P=this.terrainTileForTile[x],B=P.dem;!B||P.demTexture&&!P.needsDEMTextureUpload||(a.activeTexture.set(u.TEXTURE1),zr(this.painter,P,B))}}_prepareDemTileUniforms(a,u,x,P){if(!u||u.demTexture==null)return!1;const B=a.tileID.canonical,ne=Math.pow(2,u.tileID.canonical.z-B.z),he=P||"";return x[`u_dem_tl${he}`]=[B.x*ne%1,B.y*ne%1],x[`u_dem_scale${he}`]=ne,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const a=this.painter.context,u=a.gl;if(!this._emptyDepthBufferTexture){const x=new n.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new n.Texture(a,x,u.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let a=0;const u=this._visibleDemTiles.reduce((x,P)=>{if(!P.dem)return x;const B=P.dem.tree.minimums[0];return B>0&&a++,x+B},0);return a?u/a:0}_updateEmptyDEMTexture(){const a=this.painter.context,u=a.gl;a.activeTexture.set(u.TEXTURE2);const x=this._getLoadedAreaMinimum(),P=new n.RGBAImage({width:1,height:1},new Uint8Array(n.DEMData.pack(x,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let B=this._emptyDEMTexture;return B?B.update(P,{premultiply:!1}):B=this._emptyDEMTexture=new n.Texture(a,P,u.RGBA,{premultiply:!1}),B}setupElevationDraw(a,u,x){const P=this.painter.context,B=P.gl,ne=(he=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:n.DEMData.getUnpackVector(he),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var he;ne.u_dem_size=this.sourceCache.getSource().tileSize,ne.u_exaggeration=this.exaggeration();let pe=null,Me=null,Ee=1;if(x&&x.morphing&&this._useVertexMorphing){const Re=x.morphing.srcDemTile,$e=x.morphing.dstDemTile;Ee=x.morphing.phase,Re&&$e&&(this._prepareDemTileUniforms(a,Re,ne,"_prev")&&(Me=Re),this._prepareDemTileUniforms(a,$e,ne)&&(pe=$e))}if(Me&&pe?(P.activeTexture.set(B.TEXTURE2),pe.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE,B.NEAREST),P.activeTexture.set(B.TEXTURE4),Me.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE,B.NEAREST),ne.u_dem_lerp=Ee):(pe=this.terrainTileForTile[a.tileID.key],P.activeTexture.set(B.TEXTURE2),(this._prepareDemTileUniforms(a,pe,ne)?pe.demTexture:this.emptyDEMTexture).bind(B.NEAREST,B.CLAMP_TO_EDGE)),P.activeTexture.set(B.TEXTURE3),x&&x.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),this._depthFBO&&(ne.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),ne.u_depth_size_inv=[1,1]),x&&x.useMeterToDem&&pe){const Re=(1<<pe.tileID.canonical.z)*n.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;ne.u_meter_to_dem=Re}if(x&&x.labelPlaneMatrixInv&&(ne.u_label_plane_matrix_inv=x.labelPlaneMatrixInv),u.setTerrainUniformValues(P,ne),this.painter.transform.projection.name==="globe"){const Re=this.globeUniformValues(this.painter.transform,a.tileID.canonical,x&&x.useDenormalizedUpVectorScale);u.setGlobeUniformValues(P,Re)}}globeUniformValues(a,u,x){const P=a.projection;return{u_tile_tl_up:P.upVector(u,0,0),u_tile_tr_up:P.upVector(u,n.EXTENT,0),u_tile_br_up:P.upVector(u,n.EXTENT,n.EXTENT),u_tile_bl_up:P.upVector(u,0,n.EXTENT),u_tile_up_scale:x?n.GLOBE_METERS_TO_ECEF:P.upVectorScale(u,a.center.lat,a.worldSize).metersToTile}}renderToBackBuffer(a){const u=this.painter,x=this.painter.context;a.length!==0&&(x.bindFramebuffer.set(null),x.viewport.set([0,0,u.width,u.height]),u.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(P,B,ne,he,pe){if(P.transform.projection.name==="globe")(function(Me,Ee,Re,$e,Qe){const et=Me.context,rt=et.gl;let Ye,Ze;const lt=Me.options.showTerrainWireframe?2:0,tt=Me.transform,pt=n.globeUseCustomAntiAliasing(Me,et,tt),Tt=(vi,qt)=>{if(Ze===vi)return;const di=[ya[vi],"PROJECTION_GLOBE_VIEW"];pt&&di.push("CUSTOM_ANTIALIASING"),qt&&di.push(ya[lt]),Ye=Me.useProgram("globeRaster",null,di),Ze=vi},gt=Me.colorModeForRenderPass(),kt=new n.DepthMode(rt.LEQUAL,n.DepthMode.ReadWrite,Me.depthRangeFor3D);Cr.update(Qe);const Wt=n.calculateGlobeMercatorMatrix(tt),Ft=[n.mercatorXfromLng(tt.center.lng),n.mercatorYfromLat(tt.center.lat)],Dt=lt?[!1,!0]:[!1],pi=Me.globeSharedBuffers,Nt=[tt.width*n.exported.devicePixelRatio,tt.height*n.exported.devicePixelRatio],si=Float32Array.from(tt.globeMatrix),Xt={useDenormalizedUpVectorScale:!0};if(Dt.forEach(vi=>{Ze=-1;const qt=vi?rt.LINES:rt.TRIANGLES;for(const di of $e){const wi=Re.getTile(di),Rt=n.StencilMode.disabled,Yt=Ee.prevTerrainTileForTile[di.key],Hi=Ee.terrainTileForTile[di.key];Xn(Yt,Hi)&&Cr.newMorphing(di.key,Yt,Hi,Qe,250),et.activeTexture.set(rt.TEXTURE0),wi.texture.bind(rt.LINEAR,rt.CLAMP_TO_EDGE);const nn=Cr.getMorphValuesForProxy(di.key),Wi=nn?1:0;nn&&n.extend$1(Xt,{morphing:{srcDemTile:nn.from,dstDemTile:nn.to,phase:n.easeCubicInOut(nn.phase)}});const pn=n.tileCornersToBounds(di.canonical),Rn=n.getLatitudinalLod(pn.getCenter().lat),sn=n.getGridMatrix(di.canonical,pn,Rn,tt.worldSize/tt._pixelsPerMercatorPixel),Vi=n.globeNormalizeECEF(n.globeTileBounds(di.canonical)),Sr=Js(tt.projMatrix,si,Wt,Vi,n.globeToMercatorTransition(tt.zoom),Ft,tt.frustumCorners.TL,tt.frustumCorners.TR,tt.frustumCorners.BR,tt.frustumCorners.BL,tt.globeCenterInViewSpace,tt.globeRadius,Nt,sn);if(Tt(Wi,vi),Ee.setupElevationDraw(wi,Ye,Xt),Me.prepareDrawProgram(et,Ye,di.toUnwrapped()),pi){const[hr,Ar,br]=vi?pi.getWirefameBuffers(Me.context,Rn):pi.getGridBuffers(Rn);Ye.draw(et,qt,kt,Rt,gt,n.CullFaceMode.backCCW,Sr,"globe_raster",hr,Ar,br)}}}),pi){const vi=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];pt&&vi.push("CUSTOM_ANTIALIASING"),Ye=Me.useProgram("globeRaster",null,vi);for(const qt of $e){const{x:di,y:wi,z:Rt}=qt.canonical,Yt=wi===0,Hi=wi===(1<<Rt)-1,[nn,Wi,pn,Rn]=pi.getPoleBuffers(Rt);if(Rn&&(Yt||Hi)){const sn=Re.getTile(qt);et.activeTexture.set(rt.TEXTURE0),sn.texture.bind(rt.LINEAR,rt.CLAMP_TO_EDGE);let Vi=n.globePoleMatrixForTile(Rt,di,tt);const Sr=n.globeNormalizeECEF(n.globeTileBounds(qt.canonical)),hr=(Ar,br)=>Ar.draw(et,rt.TRIANGLES,kt,n.StencilMode.disabled,gt,n.CullFaceMode.disabled,Js(tt.projMatrix,Vi,Vi,Sr,0,Ft,tt.frustumCorners.TL,tt.frustumCorners.TR,tt.frustumCorners.BR,tt.frustumCorners.BL,tt.globeCenterInViewSpace,tt.globeRadius,Nt),"globe_pole_raster",br,pn,Rn);Ee.setupElevationDraw(sn,Ye,Xt),Me.prepareDrawProgram(et,Ye,qt.toUnwrapped()),Yt&&hr(Ye,nn),Hi&&(Vi=n.scale(n.create(),Vi,[1,-1,1]),hr(Ye,Wi))}}}})(P,B,ne,he,pe);else{const Me=P.context,Ee=Me.gl;let Re,$e;const Qe=P.options.showTerrainWireframe?2:0,et=(tt,pt)=>{if($e===tt)return;const Tt=[ya[tt]];pt&&Tt.push(ya[Qe]),Re=P.useProgram("terrainRaster",null,Tt),$e=tt},rt=P.colorModeForRenderPass(),Ye=new n.DepthMode(Ee.LEQUAL,n.DepthMode.ReadWrite,P.depthRangeFor3D);Cr.update(pe);const Ze=P.transform,lt=6*Math.pow(1.5,22-Ze.zoom)*B.exaggeration();(Qe?[!1,!0]:[!1]).forEach(tt=>{$e=-1;const pt=tt?Ee.LINES:Ee.TRIANGLES,[Tt,gt]=tt?B.getWirefameBuffer():[B.gridIndexBuffer,B.gridSegments];for(const kt of he){const Wt=ne.getTile(kt),Ft=n.StencilMode.disabled,Dt=B.prevTerrainTileForTile[kt.key],pi=B.terrainTileForTile[kt.key];Xn(Dt,pi)&&Cr.newMorphing(kt.key,Dt,pi,pe,250),Me.activeTexture.set(Ee.TEXTURE0),Wt.texture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST);const Nt=Cr.getMorphValuesForProxy(kt.key),si=Nt?1:0;let Xt;Nt&&(Xt={morphing:{srcDemTile:Nt.from,dstDemTile:Nt.to,phase:n.easeCubicInOut(Nt.phase)}});const vi=Tn(kt.projMatrix,Ol(kt.canonical,Ze.renderWorldCopies)?lt/10:lt);et(si,tt),B.setupElevationDraw(Wt,Re,Xt),P.prepareDrawProgram(Me,Re,kt.toUnwrapped()),Re.draw(Me,pt,Ye,Ft,rt,n.CullFaceMode.backCCW,vi,"terrain_raster",B.gridBuffer,Tt,gt)}})}}(u,this,this.proxySourceCache,a,this._updateTimestamp),this.renderingToTexture=!0,u.gpuTimingDeferredRenderEnd(),a.splice(0,a.length))}renderBatch(a){if(this._drapedRenderBatches.length===0)return a+1;this.renderingToTexture=!0;const u=this.painter,x=this.painter.context,P=this.proxySourceCache,B=this.proxiedCoords[P.id],ne=this._drapedRenderBatches.shift(),he=[],pe=u.style.order;let Me=0;for(const Ee of B){const Re=P.getTileByID(Ee.proxyTileKey),$e=P.proxyCachedFBO[Ee.key]?P.proxyCachedFBO[Ee.key][a]:void 0,Qe=$e!==void 0?P.renderCache[$e]:this.pool[Me++],et=$e!==void 0;if(Re.texture=Qe.tex,et&&!Qe.dirty){he.push(Re.tileID);continue}let rt;x.bindFramebuffer.set(Qe.fb.framebuffer),this.renderedToTile=!1,Qe.dirty&&(x.clear({color:n.Color.transparent,stencil:0}),Qe.dirty=!1);for(let Ye=ne.start;Ye<=ne.end;++Ye){const Ze=u.style._layers[pe[Ye]];if(Ze.isHidden(u.transform.zoom))continue;const lt=u.style._getLayerSourceCache(Ze),tt=lt?this.proxyToSource[Ee.key][lt.id]:[Ee];if(!tt)continue;const pt=tt;x.viewport.set([0,0,Qe.fb.width,Qe.fb.height]),rt!==(lt?lt.id:null)&&(this._setupStencil(Qe,tt,Ze,lt),rt=lt?lt.id:null),u.renderLayer(u,lt,Ze,pt)}this.renderedToTile?(Qe.dirty=!0,he.push(Re.tileID)):et||--Me,Me===5&&(Me=0,this.renderToBackBuffer(he))}return this.renderToBackBuffer(he),this.renderingToTexture=!1,x.bindFramebuffer.set(null),x.viewport.set([0,0,u.width,u.height]),ne.end+1}postRender(){}renderCacheEfficiency(a){const u=a.order.length;if(u===0)return{efficiency:100};let x,P=0,B=0,ne=!1;for(let he=0;he<u;++he){const pe=a._layers[a.order[he]];this._style.isLayerDraped(pe)?(ne&&++P,++B):ne||(ne=!0,x=pe.id)}return B===0?{efficiency:100}:{efficiency:100*(1-P/B),firstUndrapedLayer:x}}getMinElevationBelowMSL(){let a=0;return this._visibleDemTiles.filter(u=>u.dem).forEach(u=>{a=Math.min(a,u.dem.tree.minimums[0])}),a===0?a:(a-30)*this._exaggeration}raycast(a,u,x){if(!this._visibleDemTiles)return null;const P=this._visibleDemTiles.filter(B=>B.dem).map(B=>{const ne=B.tileID,he=1<<ne.overscaledZ,{x:pe,y:Me}=ne.canonical,Ee=pe/he,Re=(pe+1)/he,$e=Me/he,Qe=(Me+1)/he;return{minx:Ee,miny:$e,maxx:Re,maxy:Qe,t:B.dem.tree.raycastRoot(Ee,$e,Re,Qe,a,u,x),tile:B}});P.sort((B,ne)=>(B.t!==null?B.t:Number.MAX_VALUE)-(ne.t!==null?ne.t:Number.MAX_VALUE));for(const B of P){if(B.t==null)return null;const ne=B.tile.dem.tree.raycast(B.minx,B.miny,B.maxx,B.maxy,a,u,x);if(ne!=null)return ne}return null}_createFBO(){const a=this.painter.context,u=a.gl,x=this.drapeBufferSize;a.activeTexture.set(u.TEXTURE0);const P=new n.Texture(a,{width:x[0],height:x[1],data:null},u.RGBA);P.bind(u.LINEAR,u.CLAMP_TO_EDGE);const B=a.createFramebuffer(x[0],x[1],!1);return B.colorAttachment.set(P.texture),B.depthAttachment=new Hc(a,B.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=a.createRenderbuffer(a.gl.DEPTH_STENCIL,x[0],x[1]),this._stencilRef=0,B.depthAttachment.set(this._sharedDepthStencil),a.clear({stencil:0})):B.depthAttachment.set(this._sharedDepthStencil),a.extTextureFilterAnisotropic&&!a.extTextureFilterAnisotropicForceOff&&u.texParameterf(u.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax),{fb:B,tex:P,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const a in this._style._sourceCaches)if(this._style._sourceCaches[a].hasTransition())return!0;return this._style.order.some(a=>{const u=this._style._layers[a],x=u.isHidden(this.painter.transform.zoom);return u.type!=="custom"&&!x&&u.hasTransition()})}_clearRasterFadeFromRenderCache(){let a=!1;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u]._source instanceof Ve){a=!0;break}if(a)for(let u=0;u<this._style.order.length;++u){const x=this._style._layers[this._style.order[u]],P=x.isHidden(this.painter.transform.zoom),B=this._style._getLayerSourceCache(x);if(x.type!=="raster"||P||!B)continue;const ne=x.paint.get("raster-fade-duration");for(const he of this.proxyCoords){const pe=this.proxyToSource[he.key][B.id];if(pe)for(const Me of pe){const Ee=To(B.getTile(Me),B.findLoadedParent(Me,0),B,this.painter.transform,ne);(Ee.opacity!==1||Ee.mix!==0)&&this._clearRenderCacheForTile(B.id,Me)}}}}_setupDrapedRenderBatches(){const a=this._style.order,u=a.length;if(u===0)return;const x=[];let P,B=0,ne=this._style._layers[a[B]];for(;!this._style.isLayerDraped(ne)&&ne.isHidden(this.painter.transform.zoom)&&++B<u;)ne=this._style._layers[a[B]];for(;B<u;++B){const he=this._style._layers[a[B]];he.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(he)?P===void 0&&(P=B):P!==void 0&&(x.push({start:P,end:B-1}),P=void 0))}P!==void 0&&x.push({start:P,end:B-1}),this._drapedRenderBatches=x}_setupRenderCache(a){const u=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,u.renderCache.length>u.renderCachePool.length){const ne=Object.values(u.proxyCachedFBO);u.proxyCachedFBO={};for(let he=0;he<ne.length;++he){const pe=Object.values(ne[he]);u.renderCachePool.push(...pe)}}return}this._clearRasterFadeFromRenderCache();const x=this.proxyCoords,P=this._tilesDirty;for(let ne=x.length-1;ne>=0;ne--){const he=x[ne];if(u.getTileByID(he.key),u.proxyCachedFBO[he.key]!==void 0){const pe=a[he.key],Me=this.proxyToSource[he.key];let Ee=0;for(const Re in Me){const $e=Me[Re],Qe=pe[Re];if(!Qe||Qe.length!==$e.length||$e.some((et,rt)=>et!==Qe[rt]||P[Re]&&P[Re].hasOwnProperty(et.key))){Ee=-1;break}++Ee}for(const Re in u.proxyCachedFBO[he.key])u.renderCache[u.proxyCachedFBO[he.key][Re]].dirty=Ee<0||Ee!==Object.values(pe).length}}const B=[...this._drapedRenderBatches];B.sort((ne,he)=>he.end-he.start-(ne.end-ne.start));for(const ne of B)for(const he of x){if(u.proxyCachedFBO[he.key])continue;let pe=u.renderCachePool.pop();pe===void 0&&u.renderCache.length<50&&(pe=u.renderCache.length,u.renderCache.push(this._createFBO())),pe!==void 0&&(u.proxyCachedFBO[he.key]={},u.proxyCachedFBO[he.key][ne.start]=pe,u.renderCache[pe].dirty=!0)}this._tilesDirty={}}_setupStencil(a,u,x,P){if(!P||!this._sourceTilesOverlap[P.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const B=this.painter.context,ne=B.gl;if(u.length<=1)return void(this._overlapStencilType=!1);let he;if(x.isTileClipped())he=u.length,this._overlapStencilMode.test={func:ne.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(u[0].overscaledZ>u[u.length-1].overscaledZ))return void(this._overlapStencilType=!1);he=1,this._overlapStencilMode.test={func:ne.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+he>255&&(B.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=he,this._overlapStencilMode.ref=this._stencilRef,x.isTileClipped()&&this._renderTileClippingMasks(u,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(a){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[a.key]),this._overlapStencilMode):n.StencilMode.disabled}_renderTileClippingMasks(a,u){const x=this.painter,P=this.painter.context,B=P.gl;x._tileClippingMaskIDs={},P.setColorMode(n.ColorMode.disabled),P.setDepthMode(n.DepthMode.disabled);const ne=x.useProgram("clippingMask");for(const he of a){const pe=x._tileClippingMaskIDs[he.key]=--u;ne.draw(P,B.TRIANGLES,n.DepthMode.disabled,new n.StencilMode({func:B.ALWAYS,mask:0},pe,255,B.KEEP,B.KEEP,B.REPLACE),n.ColorMode.disabled,n.CullFaceMode.disabled,Rs(he.projMatrix),"$clipping",x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}pointCoordinate(a){const u=this.painter.transform;if(a.x<0||a.x>u.width||a.y<0||a.y>u.height)return null;const x=[a.x,a.y,1,1];n.transformMat4$1(x,x,u.pixelMatrixInverse),n.scale$1(x,x,1/x[3]),x[0]/=u.worldSize,x[1]/=u.worldSize;const P=u._camera.position,B=n.mercatorZfromAltitude(1,u.center.lat),ne=[P[0],P[1],P[2]/B,0],he=n.subtract([],x.slice(0,3),ne);n.normalize(he,he);const pe=this.raycast(ne,he,this._exaggeration);return pe!==null&&pe?(n.scaleAndAdd(ne,ne,he,pe),ne[3]=ne[2],ne[2]*=B,ne):null}drawDepth(){const a=this.painter,u=a.context,x=this.proxySourceCache,P=Math.ceil(a.width),B=Math.ceil(a.height);if(!this._depthFBO||this._depthFBO.width===P&&this._depthFBO.height===B||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const ne=u.gl,he=u.createFramebuffer(P,B,!0);u.activeTexture.set(ne.TEXTURE0);const pe=new n.Texture(u,{width:P,height:B,data:null},ne.RGBA);pe.bind(ne.NEAREST,ne.CLAMP_TO_EDGE),he.colorAttachment.set(pe.texture);const Me=u.createRenderbuffer(u.gl.DEPTH_COMPONENT16,P,B);he.depthAttachment.set(Me),this._depthFBO=he,this._depthTexture=pe}u.bindFramebuffer.set(this._depthFBO.framebuffer),u.viewport.set([0,0,P,B]),function(ne,he,pe,Me){if(ne.transform.projection.name==="globe")return;const Ee=ne.context,Re=Ee.gl;Ee.clear({depth:1});const $e=ne.useProgram("terrainDepth"),Qe=new n.DepthMode(Re.LESS,n.DepthMode.ReadWrite,ne.depthRangeFor3D);for(const et of Me){const rt=pe.getTile(et),Ye=Tn(et.projMatrix,0);he.setupElevationDraw(rt,$e),$e.draw(Ee,Re.TRIANGLES,Qe,n.StencilMode.disabled,n.ColorMode.unblended,n.CullFaceMode.backCCW,Ye,"terrain_depth",he.gridBuffer,he.gridIndexBuffer,he.gridNoSkirtSegments)}}(a,this,x,this.proxyCoords)}_setupProxiedCoordsForOrtho(a,u,x){if(a.getSource()instanceof Et)return this._setupProxiedCoordsForImageSource(a,u,x);this._findCoveringTileCache[a.id]=this._findCoveringTileCache[a.id]||{};const P=this.proxiedCoords[a.id]=[],B=this.proxyCoords;for(let he=0;he<B.length;he++){const pe=B[he],Me=this._findTileCoveringTileID(pe,a);if(Me){const Ee=this._createProxiedId(pe,Me,x[pe.key]&&x[pe.key][a.id]);P.push(Ee),this.proxyToSource[pe.key][a.id]=[Ee]}}let ne=!1;for(let he=0;he<u.length;he++){const pe=a.getTile(u[he]);if(!pe||!pe.hasData())continue;const Me=this._findTileCoveringTileID(pe.tileID,this.proxySourceCache);if(Me&&Me.tileID.canonical.z!==pe.tileID.canonical.z){const Ee=this.proxyToSource[Me.tileID.key][a.id],Re=this._createProxiedId(Me.tileID,pe,x[Me.tileID.key]&&x[Me.tileID.key][a.id]);Ee?Ee.splice(Ee.length-1,0,Re):this.proxyToSource[Me.tileID.key][a.id]=[Re],P.push(Re),ne=!0}}this._sourceTilesOverlap[a.id]=ne}_setupProxiedCoordsForImageSource(a,u,x){if(!a.getSource().loaded())return;const P=this.proxiedCoords[a.id]=[],B=this.proxyCoords,ne=a.getSource(),he=new n.pointGeometry(ne.tileID.x,ne.tileID.y)._div(1<<ne.tileID.z),pe=ne.coordinates.map(n.MercatorCoordinate.fromLngLat).reduce((Ee,Re)=>(Ee.min.x=Math.min(Ee.min.x,Re.x-he.x),Ee.min.y=Math.min(Ee.min.y,Re.y-he.y),Ee.max.x=Math.max(Ee.max.x,Re.x-he.x),Ee.max.y=Math.max(Ee.max.y,Re.y-he.y),Ee),{min:new n.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Me=(Ee,Re)=>{const $e=Ee.wrap+Ee.canonical.x/(1<<Ee.canonical.z),Qe=Ee.canonical.y/(1<<Ee.canonical.z),et=n.EXTENT/(1<<Ee.canonical.z),rt=Re.wrap+Re.canonical.x/(1<<Re.canonical.z),Ye=Re.canonical.y/(1<<Re.canonical.z);return $e+et<rt+pe.min.x||$e>rt+pe.max.x||Qe+et<Ye+pe.min.y||Qe>Ye+pe.max.y};for(let Ee=0;Ee<B.length;Ee++){const Re=B[Ee];for(let $e=0;$e<u.length;$e++){const Qe=a.getTile(u[$e]);if(!Qe||!Qe.hasData()||Me(Re,Qe.tileID))continue;const et=this._createProxiedId(Re,Qe,x[Re.key]&&x[Re.key][a.id]),rt=this.proxyToSource[Re.key][a.id];rt?rt.push(et):this.proxyToSource[Re.key][a.id]=[et],P.push(et)}}}_createProxiedId(a,u,x){let P=this.orthoMatrix;if(x){const B=x.find(ne=>ne.key===u.tileID.key);if(B)return B}if(u.tileID.key!==a.key){const B=a.canonical.z-u.tileID.canonical.z;let ne,he,pe;P=n.create();const Me=u.tileID.wrap-a.wrap<<a.overscaledZ;B>0?(ne=n.EXTENT>>B,he=ne*((u.tileID.canonical.x<<B)-a.canonical.x+Me),pe=ne*((u.tileID.canonical.y<<B)-a.canonical.y)):(ne=n.EXTENT<<-B,he=n.EXTENT*(u.tileID.canonical.x-(a.canonical.x+Me<<-B)),pe=n.EXTENT*(u.tileID.canonical.y-(a.canonical.y<<-B))),n.ortho(P,0,ne,0,ne,0,1),n.translate(P,P,[he,pe,0])}return new ra(u.tileID,a.key,P)}_findTileCoveringTileID(a,u){let x=u.getTile(a);if(x&&x.hasData())return x;const P=this._findCoveringTileCache[u.id],B=P[a.key];if(x=B?u.getTileByID(B):null,x&&x.hasData()||B===null)return x;let ne=x?x.tileID:a,he=ne.overscaledZ;const pe=u.getSource().minzoom,Me=[];if(!B){const Re=u.getSource().maxzoom;if(a.canonical.z>=Re){const $e=a.canonical.z-Re;u.getSource().reparseOverscaled?(he=Math.max(a.canonical.z+2,u.transform.tileZoom),ne=new n.OverscaledTileID(he,a.wrap,Re,a.canonical.x>>$e,a.canonical.y>>$e)):$e!==0&&(he=Re,ne=new n.OverscaledTileID(he,a.wrap,Re,a.canonical.x>>$e,a.canonical.y>>$e))}ne.key!==a.key&&(Me.push(ne.key),x=u.getTile(ne))}const Ee=Re=>{Me.forEach($e=>{P[$e]=Re}),Me.length=0};for(he-=1;he>=pe&&(!x||!x.hasData());he--){x&&Ee(x.tileID.key);const Re=ne.calculateScaledKey(he);if(x=u.getTileByID(Re),x&&x.hasData())break;const $e=P[Re];if($e===null)break;$e===void 0?Me.push(Re):x=u.getTileByID($e)}return Ee(x?x.tileID.key:null),x&&x.hasData()?x:null}findDEMTileFor(a){return this.enabled?this._findTileCoveringTileID(a,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(a,u){let x=this._tilesDirty[a];x||(x=this._tilesDirty[a]={}),x[u.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const a=function(u){let x=0;const P=new n.StructArrayLayout2ui4,B=131;for(let ne=1;ne<129;ne++){for(let he=1;he<129;he++)x=ne*B+he,P.emplaceBack(x,x+1),P.emplaceBack(x,x+B),P.emplaceBack(x+1,x+B),ne===128&&P.emplaceBack(x+B,x+B+1);P.emplaceBack(x+1,x+1+B)}return P}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(a),this.wireframeSegments=n.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,a.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Vo{static cacheKey(a,u,x,P){let B=`${u}${P?P.cacheKey:""}`;for(const ne of x)a.usedDefines.includes(ne)&&(B+=`/${ne}`);return B}constructor(a,u,x,P,B,ne){const he=a.gl;this.program=he.createProgram();const pe=function(Ye){const Ze=[];for(let lt=0;lt<Ye.length;lt++){if(Ye[lt]===null)continue;const tt=Ye[lt].split(" ");Ze.push(tt.pop())}return Ze}(x.staticAttributes),Me=P?P.getBinderAttributes():[],Ee=pe.concat(Me);let Re=P?P.defines():[];Re=Re.concat(ne.map(Ye=>`#define ${Ye}`));const $e=Re.concat(a.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(fi):fi,fi,ii,Gt.fragmentSource,Ct.fragmentSource,x.fragmentSource).join(`
`),Qe=Re.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,ii,Gt.vertexSource,Ct.vertexSource,He.vertexSource,x.vertexSource).join(`
`),et=he.createShader(he.FRAGMENT_SHADER);if(he.isContextLost())return void(this.failedToCreate=!0);he.shaderSource(et,$e),he.compileShader(et),he.attachShader(this.program,et);const rt=he.createShader(he.VERTEX_SHADER);if(he.isContextLost())this.failedToCreate=!0;else{he.shaderSource(rt,Qe),he.compileShader(rt),he.attachShader(this.program,rt),this.attributes={},this.numAttributes=Ee.length;for(let Ye=0;Ye<this.numAttributes;Ye++)Ee[Ye]&&(he.bindAttribLocation(this.program,Ye,Ee[Ye]),this.attributes[Ee[Ye]]=Ye);he.linkProgram(this.program),he.deleteShader(rt),he.deleteShader(et),this.fixedUniforms=B(a),this.binderUniforms=P?P.getUniforms(a):[],ne.includes("TERRAIN")&&(this.terrainUniforms=(Ye=>({u_dem:new n.Uniform1i(Ye),u_dem_prev:new n.Uniform1i(Ye),u_dem_unpack:new n.Uniform4f(Ye),u_dem_tl:new n.Uniform2f(Ye),u_dem_scale:new n.Uniform1f(Ye),u_dem_tl_prev:new n.Uniform2f(Ye),u_dem_scale_prev:new n.Uniform1f(Ye),u_dem_size:new n.Uniform1f(Ye),u_dem_lerp:new n.Uniform1f(Ye),u_exaggeration:new n.Uniform1f(Ye),u_depth:new n.Uniform1i(Ye),u_depth_size_inv:new n.Uniform2f(Ye),u_meter_to_dem:new n.Uniform1f(Ye),u_label_plane_matrix_inv:new n.UniformMatrix4f(Ye)}))(a)),ne.includes("GLOBE")&&(this.globeUniforms=(Ye=>({u_tile_tl_up:new n.Uniform3f(Ye),u_tile_tr_up:new n.Uniform3f(Ye),u_tile_br_up:new n.Uniform3f(Ye),u_tile_bl_up:new n.Uniform3f(Ye),u_tile_up_scale:new n.Uniform1f(Ye)}))(a)),ne.includes("FOG")&&(this.fogUniforms=(Ye=>({u_fog_matrix:new n.UniformMatrix4f(Ye),u_fog_range:new n.Uniform2f(Ye),u_fog_color:new n.Uniform4f(Ye),u_fog_horizon_blend:new n.Uniform1f(Ye),u_fog_temporal_offset:new n.Uniform1f(Ye),u_frustum_tl:new n.Uniform3f(Ye),u_frustum_tr:new n.Uniform3f(Ye),u_frustum_br:new n.Uniform3f(Ye),u_frustum_bl:new n.Uniform3f(Ye),u_globe_pos:new n.Uniform3f(Ye),u_globe_radius:new n.Uniform1f(Ye),u_globe_transition:new n.Uniform1f(Ye),u_is_globe:new n.Uniform1i(Ye),u_viewport:new n.Uniform2f(Ye)}))(a))}}setTerrainUniformValues(a,u){if(!this.terrainUniforms)return;const x=this.terrainUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const P in u)x[P]&&x[P].set(this.program,P,u[P])}}setGlobeUniformValues(a,u){if(!this.globeUniforms)return;const x=this.globeUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const P in u)x[P]&&x[P].set(this.program,P,u[P])}}setFogUniformValues(a,u){if(!this.fogUniforms)return;const x=this.fogUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const P in u)x[P].set(this.program,P,u[P])}}draw(a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe,et,rt){const Ye=a.gl;if(this.failedToCreate)return;a.program.set(this.program),a.setDepthMode(x),a.setStencilMode(P),a.setColorMode(B),a.setCullFace(ne);for(const lt of Object.keys(this.fixedUniforms))this.fixedUniforms[lt].set(this.program,lt,he[lt]);et&&et.setUniforms(this.program,a,this.binderUniforms,$e,{zoom:Qe});const Ze={[Ye.LINES]:2,[Ye.TRIANGLES]:3,[Ye.LINE_STRIP]:1}[u];for(const lt of Re.get()){const tt=lt.vaos||(lt.vaos={});(tt[pe]||(tt[pe]=new Ln)).bind(a,this,Me,et?et.getPaintVertexBuffers():[],Ee,lt.vertexOffset,rt||[]),Ye.drawElements(u,lt.primitiveLength*Ze,Ye.UNSIGNED_SHORT,lt.primitiveOffset*Ze*2)}}}function Rl(_,a){const u=Math.pow(2,a.tileID.overscaledZ),x=a.tileSize*Math.pow(2,_.transform.tileZoom)/u,P=x*(a.tileID.canonical.x+a.tileID.wrap*u),B=x*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_tile_units_to_pixels:1/Z(a,1,_.transform.tileZoom),u_pixel_coord_upper:[P>>16,B>>16],u_pixel_coord_lower:[65535&P,65535&B]}}const Ua=n.create(),Ch=(_,a,u,x,P,B,ne,he,pe,Me,Ee)=>{const Re=a.style.light,$e=Re.properties.get("position"),Qe=[$e.x,$e.y,$e.z],et=n.create$1();Re.properties.get("anchor")==="viewport"&&(n.fromRotation(et,-a.transform.angle),n.transformMat3(Qe,Qe,et));const rt=Re.properties.get("color"),Ye=a.transform,Ze={u_matrix:_,u_lightpos:Qe,u_lightintensity:Re.properties.get("intensity"),u_lightcolor:[rt.r,rt.g,rt.b],u_vertical_gradient:+u,u_opacity:x,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ua,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:P,u_edge_radius:B};return Ye.projection.name==="globe"&&(Ze.u_tile_id=[ne.canonical.x,ne.canonical.y,1<<ne.canonical.z],Ze.u_zoom_transition=pe,Ze.u_inv_rot_matrix=Ee,Ze.u_merc_center=Me,Ze.u_up_dir=Ye.projection.upVector(new n.CanonicalTileID(0,0,0),Me[0]*n.EXTENT,Me[1]*n.EXTENT),Ze.u_height_lift=he),Ze},fr=(_,a,u,x,P,B,ne,he,pe,Me,Ee,Re)=>{const $e=Ch(_,a,u,x,P,B,ne,pe,Me,Ee,Re),Qe={u_height_factor:-Math.pow(2,ne.overscaledZ)/he.tileSize/8};return n.extend($e,Rl(a,he),Qe)},$o=_=>({u_matrix:_}),qc=(_,a,u)=>n.extend($o(_),Rl(a,u)),mc=(_,a)=>({u_matrix:_,u_world:a}),ro=(_,a,u,x)=>n.extend(qc(_,a,u),{u_world:x}),Bl=n.create(),gc=(_,a,u,x,P,B)=>{const ne=_.transform,he=ne.projection.name==="globe";let pe;if(B.paint.get("circle-pitch-alignment")==="map")if(he){const Ee=n.globePixelsToTileUnits(ne.zoom,a.canonical)*ne._pixelsPerMercatorPixel;pe=Float32Array.from([Ee,0,0,Ee])}else pe=ne.calculatePixelsToTileUnitsMatrix(u);else pe=new Float32Array([ne.pixelsToGLUnits[0],0,0,ne.pixelsToGLUnits[1]]);const Me={u_camera_to_center_distance:ne.cameraToCenterDistance,u_matrix:_.translatePosMatrix(a.projMatrix,u,B.paint.get("circle-translate"),B.paint.get("circle-translate-anchor")),u_device_pixel_ratio:n.exported.devicePixelRatio,u_extrude_scale:pe,u_inv_rot_matrix:Bl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(he){Me.u_inv_rot_matrix=x,Me.u_merc_center=P,Me.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],Me.u_zoom_transition=n.globeToMercatorTransition(ne.zoom);const Ee=P[0]*n.EXTENT,Re=P[1]*n.EXTENT;Me.u_up_dir=ne.projection.upVector(new n.CanonicalTileID(0,0,0),Ee,Re)}return Me},cd=_=>{const a=[];return _.paint.get("circle-pitch-alignment")==="map"&&a.push("PITCH_WITH_MAP"),_.paint.get("circle-pitch-scale")==="map"&&a.push("SCALE_WITH_MAP"),a},_c=(_,a,u,x)=>{const P=n.EXTENT/u.tileSize;return{u_matrix:_,u_camera_to_center_distance:a.getCameraToCenterDistance(x),u_extrude_scale:[a.pixelsToGLUnits[0]/P,a.pixelsToGLUnits[1]/P]}},yc=(_,a,u=1)=>({u_matrix:_,u_color:a,u_overlay:0,u_overlay_scale:u}),ou=n.create(),zl=(_,a,u,x,P,B,ne)=>{const he=_.transform,pe=he.projection.name==="globe",Me=pe?n.globePixelsToTileUnits(he.zoom,a.canonical)*he._pixelsPerMercatorPixel:Z(u,1,B),Ee={u_matrix:a.projMatrix,u_extrude_scale:Me,u_intensity:ne,u_inv_rot_matrix:ou,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(pe){Ee.u_inv_rot_matrix=x,Ee.u_merc_center=P,Ee.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],Ee.u_zoom_transition=n.globeToMercatorTransition(he.zoom);const Re=P[0]*n.EXTENT,$e=P[1]*n.EXTENT;Ee.u_up_dir=he.projection.upVector(new n.CanonicalTileID(0,0,0),Re,$e)}return Ee},hd=(_,a,u,x,P,B,ne)=>{const he=_.transform,pe=he.calculatePixelsToTileUnitsMatrix(a);return{u_matrix:Nl(_,a,u,x),u_pixels_to_tile_units:pe,u_device_pixel_ratio:B,u_units_to_pixels:[1/he.pixelsToGLUnits[0],1/he.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:P,u_texsize:Mh(u)?a.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Ga(a,_.transform),u_alpha_discard_threshold:0,u_trim_offset:ne}},va=(_,a,u,x,P)=>{const B=_.transform;return{u_matrix:Nl(_,a,u,x),u_texsize:a.imageAtlasTexture.size,u_pixels_to_tile_units:B.calculatePixelsToTileUnitsMatrix(a),u_device_pixel_ratio:P,u_image:0,u_tile_units_to_pixels:Ga(a,B),u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ga(_,a){return 1/Z(_,1,a.tileZoom)}function Nl(_,a,u,x){return _.translatePosMatrix(x||a.tileID.projMatrix,a,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}function Mh(_){const a=_.paint.get("line-dasharray").value;return a.value||a.kind!=="constant"}const vc=(_,a,u,x,P,B)=>{return{u_matrix:_,u_tl_parent:a,u_scale_parent:u,u_fade_t:x.mix,u_opacity:x.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:(he=P.paint.get("raster-saturation"),he>0?1-1/(1.001-he):-he),u_contrast_factor:(ne=P.paint.get("raster-contrast"),ne>0?1/(1-ne):1+ne),u_spin_weights:Ho(P.paint.get("raster-hue-rotate")),u_perspective_transform:B};var ne,he};function Ho(_){_*=Math.PI/180;const a=Math.sin(_),u=Math.cos(_);return[(2*u+1)/3,(-Math.sqrt(3)*a-u+1)/3,(Math.sqrt(3)*a-u+1)/3]}const Hs=n.create(),sl=(_,a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe,et,rt)=>{const Ye=P.transform,Ze={u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Ye.cameraToCenterDistance,u_rotate_symbol:+u,u_aspect_ratio:Ye.width/Ye.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:ne,u_coord_matrix:he,u_is_text:+pe,u_pitch_with_map:+x,u_texsize:Me,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Hs,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Hs,u_up_vector:[0,-1,0]};return rt.name==="globe"&&(Ze.u_tile_id=[Ee.canonical.x,Ee.canonical.y,1<<Ee.canonical.z],Ze.u_zoom_transition=Re,Ze.u_inv_rot_matrix=Qe,Ze.u_merc_center=$e,Ze.u_camera_forward=Ye._camera.forward(),Ze.u_ecef_origin=n.globeECEFOrigin(Ye.globeMatrix,Ee.toUnwrapped()),Ze.u_tile_matrix=Float32Array.from(Ye.globeMatrix),Ze.u_up_vector=et),Ze},dd=(_,a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe,et,rt,Ye)=>n.extend(sl(_,a,u,x,P,B,ne,he,pe,Me,Re,$e,Qe,et,rt,Ye),{u_gamma_scale:x?P.transform.cameraToCenterDistance*Math.cos(P.terrain?0:P.transform._pitch):1,u_device_pixel_ratio:n.exported.devicePixelRatio,u_is_halo:+Ee}),Zc=(_,a,u,x,P,B,ne,he,pe,Me,Ee,Re,$e,Qe,et,rt)=>n.extend(dd(_,a,u,x,P,B,ne,he,!0,pe,!0,Ee,Re,$e,Qe,et,rt),{u_texsize_icon:Me,u_texture_icon:1}),yp=(_,a,u)=>({u_matrix:_,u_opacity:a,u_color:u}),rr=(_,a,u,x,P)=>n.extend(function(B,ne,he){const pe=ne.imageManager.getPattern(B.toString()),{width:Me,height:Ee}=ne.imageManager.getPixelSize(),Re=Math.pow(2,he.tileID.overscaledZ),$e=he.tileSize*Math.pow(2,ne.transform.tileZoom)/Re,Qe=$e*(he.tileID.canonical.x+he.tileID.wrap*Re),et=$e*he.tileID.canonical.y;return{u_image:0,u_pattern_tl:pe.tl,u_pattern_br:pe.br,u_texsize:[Me,Ee],u_pattern_size:pe.displaySize,u_tile_units_to_pixels:1/Z(he,1,ne.transform.tileZoom),u_pixel_coord_upper:[Qe>>16,et>>16],u_pixel_coord_lower:[65535&Qe,65535&et]}}(x,u,P),{u_matrix:_,u_opacity:a}),po={fillExtrusion:_=>({u_matrix:new n.UniformMatrix4f(_),u_lightpos:new n.Uniform3f(_),u_lightintensity:new n.Uniform1f(_),u_lightcolor:new n.Uniform3f(_),u_vertical_gradient:new n.Uniform1f(_),u_opacity:new n.Uniform1f(_),u_edge_radius:new n.Uniform1f(_),u_ao:new n.Uniform2f(_),u_tile_id:new n.Uniform3f(_),u_zoom_transition:new n.Uniform1f(_),u_inv_rot_matrix:new n.UniformMatrix4f(_),u_merc_center:new n.Uniform2f(_),u_up_dir:new n.Uniform3f(_),u_height_lift:new n.Uniform1f(_)}),fillExtrusionPattern:_=>({u_matrix:new n.UniformMatrix4f(_),u_lightpos:new n.Uniform3f(_),u_lightintensity:new n.Uniform1f(_),u_lightcolor:new n.Uniform3f(_),u_vertical_gradient:new n.Uniform1f(_),u_height_factor:new n.Uniform1f(_),u_edge_radius:new n.Uniform1f(_),u_ao:new n.Uniform2f(_),u_tile_id:new n.Uniform3f(_),u_zoom_transition:new n.Uniform1f(_),u_inv_rot_matrix:new n.UniformMatrix4f(_),u_merc_center:new n.Uniform2f(_),u_up_dir:new n.Uniform3f(_),u_height_lift:new n.Uniform1f(_),u_image:new n.Uniform1i(_),u_texsize:new n.Uniform2f(_),u_pixel_coord_upper:new n.Uniform2f(_),u_pixel_coord_lower:new n.Uniform2f(_),u_tile_units_to_pixels:new n.Uniform1f(_),u_opacity:new n.Uniform1f(_)}),fill:_=>({u_matrix:new n.UniformMatrix4f(_)}),fillPattern:_=>({u_matrix:new n.UniformMatrix4f(_),u_image:new n.Uniform1i(_),u_texsize:new n.Uniform2f(_),u_pixel_coord_upper:new n.Uniform2f(_),u_pixel_coord_lower:new n.Uniform2f(_),u_tile_units_to_pixels:new n.Uniform1f(_)}),fillOutline:_=>({u_matrix:new n.UniformMatrix4f(_),u_world:new n.Uniform2f(_)}),fillOutlinePattern:_=>({u_matrix:new n.UniformMatrix4f(_),u_world:new n.Uniform2f(_),u_image:new n.Uniform1i(_),u_texsize:new n.Uniform2f(_),u_pixel_coord_upper:new n.Uniform2f(_),u_pixel_coord_lower:new n.Uniform2f(_),u_tile_units_to_pixels:new n.Uniform1f(_)}),circle:_=>({u_camera_to_center_distance:new n.Uniform1f(_),u_extrude_scale:new n.UniformMatrix2f(_),u_device_pixel_ratio:new n.Uniform1f(_),u_matrix:new n.UniformMatrix4f(_),u_inv_rot_matrix:new n.UniformMatrix4f(_),u_merc_center:new n.Uniform2f(_),u_tile_id:new n.Uniform3f(_),u_zoom_transition:new n.Uniform1f(_),u_up_dir:new n.Uniform3f(_)}),collisionBox:_=>({u_matrix:new n.UniformMatrix4f(_),u_camera_to_center_distance:new n.Uniform1f(_),u_extrude_scale:new n.Uniform2f(_)}),collisionCircle:_=>({u_matrix:new n.UniformMatrix4f(_),u_inv_matrix:new n.UniformMatrix4f(_),u_camera_to_center_distance:new n.Uniform1f(_),u_viewport_size:new n.Uniform2f(_)}),debug:_=>({u_color:new n.UniformColor(_),u_matrix:new n.UniformMatrix4f(_),u_overlay:new n.Uniform1i(_),u_overlay_scale:new n.Uniform1f(_)}),clippingMask:_=>({u_matrix:new n.UniformMatrix4f(_)}),heatmap:_=>({u_extrude_scale:new n.Uniform1f(_),u_intensity:new n.Uniform1f(_),u_matrix:new n.UniformMatrix4f(_),u_inv_rot_matrix:new n.UniformMatrix4f(_),u_merc_center:new n.Uniform2f(_),u_tile_id:new n.Uniform3f(_),u_zoom_transition:new n.Uniform1f(_),u_up_dir:new n.Uniform3f(_)}),heatmapTexture:_=>({u_image:new n.Uniform1i(_),u_color_ramp:new n.Uniform1i(_),u_opacity:new n.Uniform1f(_)}),hillshade:_=>({u_matrix:new n.UniformMatrix4f(_),u_image:new n.Uniform1i(_),u_latrange:new n.Uniform2f(_),u_light:new n.Uniform2f(_),u_shadow:new n.UniformColor(_),u_highlight:new n.UniformColor(_),u_accent:new n.UniformColor(_)}),hillshadePrepare:_=>({u_matrix:new n.UniformMatrix4f(_),u_image:new n.Uniform1i(_),u_dimension:new n.Uniform2f(_),u_zoom:new n.Uniform1f(_),u_unpack:new n.Uniform4f(_)}),line:_=>({u_matrix:new n.UniformMatrix4f(_),u_pixels_to_tile_units:new n.UniformMatrix2f(_),u_device_pixel_ratio:new n.Uniform1f(_),u_units_to_pixels:new n.Uniform2f(_),u_dash_image:new n.Uniform1i(_),u_gradient_image:new n.Uniform1i(_),u_image_height:new n.Uniform1f(_),u_texsize:new n.Uniform2f(_),u_tile_units_to_pixels:new n.Uniform1f(_),u_alpha_discard_threshold:new n.Uniform1f(_),u_trim_offset:new n.Uniform2f(_)}),linePattern:_=>({u_matrix:new n.UniformMatrix4f(_),u_texsize:new n.Uniform2f(_),u_pixels_to_tile_units:new n.UniformMatrix2f(_),u_device_pixel_ratio:new n.Uniform1f(_),u_image:new n.Uniform1i(_),u_units_to_pixels:new n.Uniform2f(_),u_tile_units_to_pixels:new n.Uniform1f(_),u_alpha_discard_threshold:new n.Uniform1f(_)}),raster:_=>({u_matrix:new n.UniformMatrix4f(_),u_tl_parent:new n.Uniform2f(_),u_scale_parent:new n.Uniform1f(_),u_fade_t:new n.Uniform1f(_),u_opacity:new n.Uniform1f(_),u_image0:new n.Uniform1i(_),u_image1:new n.Uniform1i(_),u_brightness_low:new n.Uniform1f(_),u_brightness_high:new n.Uniform1f(_),u_saturation_factor:new n.Uniform1f(_),u_contrast_factor:new n.Uniform1f(_),u_spin_weights:new n.Uniform3f(_),u_perspective_transform:new n.Uniform2f(_)}),symbolIcon:_=>({u_is_size_zoom_constant:new n.Uniform1i(_),u_is_size_feature_constant:new n.Uniform1i(_),u_size_t:new n.Uniform1f(_),u_size:new n.Uniform1f(_),u_camera_to_center_distance:new n.Uniform1f(_),u_rotate_symbol:new n.Uniform1i(_),u_aspect_ratio:new n.Uniform1f(_),u_fade_change:new n.Uniform1f(_),u_matrix:new n.UniformMatrix4f(_),u_label_plane_matrix:new n.UniformMatrix4f(_),u_coord_matrix:new n.UniformMatrix4f(_),u_is_text:new n.Uniform1i(_),u_pitch_with_map:new n.Uniform1i(_),u_texsize:new n.Uniform2f(_),u_tile_id:new n.Uniform3f(_),u_zoom_transition:new n.Uniform1f(_),u_inv_rot_matrix:new n.UniformMatrix4f(_),u_merc_center:new n.Uniform2f(_),u_camera_forward:new n.Uniform3f(_),u_tile_matrix:new n.UniformMatrix4f(_),u_up_vector:new n.Uniform3f(_),u_ecef_origin:new n.Uniform3f(_),u_texture:new n.Uniform1i(_)}),symbolSDF:_=>({u_is_size_zoom_constant:new n.Uniform1i(_),u_is_size_feature_constant:new n.Uniform1i(_),u_size_t:new n.Uniform1f(_),u_size:new n.Uniform1f(_),u_camera_to_center_distance:new n.Uniform1f(_),u_rotate_symbol:new n.Uniform1i(_),u_aspect_ratio:new n.Uniform1f(_),u_fade_change:new n.Uniform1f(_),u_matrix:new n.UniformMatrix4f(_),u_label_plane_matrix:new n.UniformMatrix4f(_),u_coord_matrix:new n.UniformMatrix4f(_),u_is_text:new n.Uniform1i(_),u_pitch_with_map:new n.Uniform1i(_),u_texsize:new n.Uniform2f(_),u_texture:new n.Uniform1i(_),u_gamma_scale:new n.Uniform1f(_),u_device_pixel_ratio:new n.Uniform1f(_),u_tile_id:new n.Uniform3f(_),u_zoom_transition:new n.Uniform1f(_),u_inv_rot_matrix:new n.UniformMatrix4f(_),u_merc_center:new n.Uniform2f(_),u_camera_forward:new n.Uniform3f(_),u_tile_matrix:new n.UniformMatrix4f(_),u_up_vector:new n.Uniform3f(_),u_ecef_origin:new n.Uniform3f(_),u_is_halo:new n.Uniform1i(_)}),symbolTextAndIcon:_=>({u_is_size_zoom_constant:new n.Uniform1i(_),u_is_size_feature_constant:new n.Uniform1i(_),u_size_t:new n.Uniform1f(_),u_size:new n.Uniform1f(_),u_camera_to_center_distance:new n.Uniform1f(_),u_rotate_symbol:new n.Uniform1i(_),u_aspect_ratio:new n.Uniform1f(_),u_fade_change:new n.Uniform1f(_),u_matrix:new n.UniformMatrix4f(_),u_label_plane_matrix:new n.UniformMatrix4f(_),u_coord_matrix:new n.UniformMatrix4f(_),u_is_text:new n.Uniform1i(_),u_pitch_with_map:new n.Uniform1i(_),u_texsize:new n.Uniform2f(_),u_texsize_icon:new n.Uniform2f(_),u_texture:new n.Uniform1i(_),u_texture_icon:new n.Uniform1i(_),u_gamma_scale:new n.Uniform1f(_),u_device_pixel_ratio:new n.Uniform1f(_),u_is_halo:new n.Uniform1i(_)}),background:_=>({u_matrix:new n.UniformMatrix4f(_),u_opacity:new n.Uniform1f(_),u_color:new n.UniformColor(_)}),backgroundPattern:_=>({u_matrix:new n.UniformMatrix4f(_),u_opacity:new n.Uniform1f(_),u_image:new n.Uniform1i(_),u_pattern_tl:new n.Uniform2f(_),u_pattern_br:new n.Uniform2f(_),u_texsize:new n.Uniform2f(_),u_pattern_size:new n.Uniform2f(_),u_pixel_coord_upper:new n.Uniform2f(_),u_pixel_coord_lower:new n.Uniform2f(_),u_tile_units_to_pixels:new n.Uniform1f(_)}),terrainRaster:$n,terrainDepth:$n,skybox:_=>({u_matrix:new n.UniformMatrix4f(_),u_sun_direction:new n.Uniform3f(_),u_cubemap:new n.Uniform1i(_),u_opacity:new n.Uniform1f(_),u_temporal_offset:new n.Uniform1f(_)}),skyboxGradient:_=>({u_matrix:new n.UniformMatrix4f(_),u_color_ramp:new n.Uniform1i(_),u_center_direction:new n.Uniform3f(_),u_radius:new n.Uniform1f(_),u_opacity:new n.Uniform1f(_),u_temporal_offset:new n.Uniform1f(_)}),skyboxCapture:_=>({u_matrix_3f:new n.UniformMatrix3f(_),u_sun_direction:new n.Uniform3f(_),u_sun_intensity:new n.Uniform1f(_),u_color_tint_r:new n.Uniform4f(_),u_color_tint_m:new n.Uniform4f(_),u_luminance:new n.Uniform1f(_)}),globeRaster:_=>({u_proj_matrix:new n.UniformMatrix4f(_),u_globe_matrix:new n.UniformMatrix4f(_),u_normalize_matrix:new n.UniformMatrix4f(_),u_merc_matrix:new n.UniformMatrix4f(_),u_zoom_transition:new n.Uniform1f(_),u_merc_center:new n.Uniform2f(_),u_image0:new n.Uniform1i(_),u_grid_matrix:new n.UniformMatrix3f(_),u_frustum_tl:new n.Uniform3f(_),u_frustum_tr:new n.Uniform3f(_),u_frustum_br:new n.Uniform3f(_),u_frustum_bl:new n.Uniform3f(_),u_globe_pos:new n.Uniform3f(_),u_globe_radius:new n.Uniform1f(_),u_viewport:new n.Uniform2f(_)}),globeAtmosphere:_=>({u_frustum_tl:new n.Uniform3f(_),u_frustum_tr:new n.Uniform3f(_),u_frustum_br:new n.Uniform3f(_),u_frustum_bl:new n.Uniform3f(_),u_horizon:new n.Uniform1f(_),u_transition:new n.Uniform1f(_),u_fadeout_range:new n.Uniform1f(_),u_color:new n.Uniform4f(_),u_high_color:new n.Uniform4f(_),u_space_color:new n.Uniform4f(_),u_star_intensity:new n.Uniform1f(_),u_star_density:new n.Uniform1f(_),u_star_size:new n.Uniform1f(_),u_temporal_offset:new n.Uniform1f(_),u_horizon_angle:new n.Uniform1f(_),u_rotation_matrix:new n.UniformMatrix4f(_)})};let Ws;function So(_,a,u,x,P,B,ne){const he=_.context,pe=he.gl,Me=_.transform,Ee=_.useProgram("collisionBox"),Re=[];let $e=0,Qe=0;for(let pt=0;pt<x.length;pt++){const Tt=x[pt],gt=a.getTile(Tt),kt=gt.getBucket(u);if(!kt)continue;const Wt=ia(Tt,kt,Me);let Ft=Wt;P[0]===0&&P[1]===0||(Ft=_.translatePosMatrix(Wt,gt,P,B));const Dt=ne?kt.textCollisionBox:kt.iconCollisionBox,pi=kt.collisionCircleArray;if(pi.length>0){const Nt=n.create(),si=Ft;n.mul(Nt,kt.placementInvProjMatrix,Me.glCoordMatrix),n.mul(Nt,Nt,kt.placementViewportMatrix),Re.push({circleArray:pi,circleOffset:Qe,transform:si,invTransform:Nt,projection:kt.getProjection()}),$e+=pi.length/4,Qe=$e}Dt&&(_.terrain&&_.terrain.setupElevationDraw(gt,Ee),Ee.draw(he,pe.LINES,n.DepthMode.disabled,n.StencilMode.disabled,_.colorModeForRenderPass(),n.CullFaceMode.disabled,_c(Ft,Me,gt,kt.getProjection()),u.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,null,Me.zoom,null,[Dt.collisionVertexBuffer,Dt.collisionVertexBufferExt]))}if(!ne||!Re.length)return;const et=_.useProgram("collisionCircle"),rt=new n.StructArrayLayout2f1f2i16;rt.resize(4*$e),rt._trim();let Ye=0;for(const pt of Re)for(let Tt=0;Tt<pt.circleArray.length/4;Tt++){const gt=4*Tt,kt=pt.circleArray[gt+0],Wt=pt.circleArray[gt+1],Ft=pt.circleArray[gt+2],Dt=pt.circleArray[gt+3];rt.emplace(Ye++,kt,Wt,Ft,Dt,0),rt.emplace(Ye++,kt,Wt,Ft,Dt,1),rt.emplace(Ye++,kt,Wt,Ft,Dt,2),rt.emplace(Ye++,kt,Wt,Ft,Dt,3)}(!Ws||Ws.length<2*$e)&&(Ws=function(pt){const Tt=2*pt,gt=new n.StructArrayLayout3ui6;gt.resize(Tt),gt._trim();for(let kt=0;kt<Tt;kt++){const Wt=6*kt;gt.uint16[Wt+0]=4*kt+0,gt.uint16[Wt+1]=4*kt+1,gt.uint16[Wt+2]=4*kt+2,gt.uint16[Wt+3]=4*kt+2,gt.uint16[Wt+4]=4*kt+3,gt.uint16[Wt+5]=4*kt+0}return gt}($e));const Ze=he.createIndexBuffer(Ws,!0),lt=he.createVertexBuffer(rt,n.collisionCircleLayout.members,!0);for(const pt of Re){const Tt={u_matrix:pt.transform,u_inv_matrix:pt.invTransform,u_camera_to_center_distance:(tt=Me).getCameraToCenterDistance(pt.projection),u_viewport_size:[tt.width,tt.height]};et.draw(he,pe.TRIANGLES,n.DepthMode.disabled,n.StencilMode.disabled,_.colorModeForRenderPass(),n.CullFaceMode.disabled,Tt,u.id,lt,Ze,n.SegmentVector.simpleSegment(0,2*pt.circleOffset,pt.circleArray.length,pt.circleArray.length/2),null,Me.zoom)}var tt;lt.destroy(),Ze.destroy()}const Fl=n.create();function au({width:_,height:a,anchor:u,textOffset:x,textScale:P},B){const{horizontalAlign:ne,verticalAlign:he}=n.getAnchorAlignment(u),pe=-(ne-.5)*_,Me=-(he-.5)*a,Ee=n.evaluateVariableOffset(u,x);return new n.pointGeometry((pe/P+Ee[0])*B,(Me/P+Ee[1])*B)}function lu(_,a,u,x,P,B,ne,he,pe,Me,Ee){const Re=_.text.placedSymbolArray,$e=_.text.dynamicLayoutVertexArray,Qe=_.icon.dynamicLayoutVertexArray,et={},rt=_.getProjection(),Ye=kl(he,rt,B),Ze=B.elevation,lt=rt.upVectorScale(he.canonical,B.center.lat,B.worldSize).metersToTile;$e.clear();for(let tt=0;tt<Re.length;tt++){const pt=Re.get(tt),{tileAnchorX:Tt,tileAnchorY:gt,numGlyphs:kt}=pt,Wt=_.allowVerticalPlacement&&!pt.placedOrientation,Ft=pt.hidden||!pt.crossTileID||Wt?null:x[pt.crossTileID];if(Ft){let Dt=0,pi=0,Nt=0;if(Ze){const Hi=Ze?Ze.getAtTileOffset(he,Tt,gt):0,[nn,Wi,pn]=rt.upVector(he.canonical,Tt,gt);Dt=Hi*nn*lt,pi=Hi*Wi*lt,Nt=Hi*pn*lt}let[si,Xt,vi,qt]=Ls(pt.projectedAnchorX+Dt,pt.projectedAnchorY+pi,pt.projectedAnchorZ+Nt,u?Ye:ne);const di=Li(B.getCameraToCenterDistance(rt),qt);let wi=P.evaluateSizeForFeature(_.textSizeData,Me,pt)*di/n.ONE_EM;u&&(wi*=_.tilePixelRatio/pe);const Rt=au(Ft,wi);u?({x:si,y:Xt,z:vi}=rt.projectTilePoint(Tt+Rt.x,gt+Rt.y,he.canonical),[si,Xt,vi]=Ls(si+Dt,Xt+pi,vi+Nt,ne)):(a&&Rt._rotate(-B.angle),si+=Rt.x,Xt+=Rt.y,vi=0);const Yt=_.allowVerticalPlacement&&pt.placedOrientation===n.WritingMode.vertical?Math.PI/2:0;for(let Hi=0;Hi<kt;Hi++)n.addDynamicAttributes($e,si,Xt,vi,Yt);Ee&&pt.associatedIconIndex>=0&&(et[pt.associatedIconIndex]={x:si,y:Xt,z:vi,angle:Yt})}else Ss(kt,$e)}if(Ee){Qe.clear();const tt=_.icon.placedSymbolArray;for(let pt=0;pt<tt.length;pt++){const Tt=tt.get(pt),{numGlyphs:gt}=Tt,kt=et[pt];if(Tt.hidden||!kt)Ss(gt,Qe);else{const{x:Wt,y:Ft,z:Dt,angle:pi}=kt;for(let Nt=0;Nt<gt;Nt++)n.addDynamicAttributes(Qe,Wt,Ft,Dt,pi)}}_.icon.dynamicLayoutVertexBuffer.updateData(Qe)}_.text.dynamicLayoutVertexBuffer.updateData($e)}function cu(_,a,u){return u.iconsInText&&a?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Eo(_,a,u,x,P,B,ne,he,pe,Me,Ee,Re){const $e=_.context,Qe=$e.gl,et=_.transform,rt=he==="map",Ye=pe==="map",Ze=rt&&u.layout.get("symbol-placement")!=="point",lt=rt&&!Ye&&!Ze,tt=u.layout.get("symbol-sort-key").constantOr(1)!==void 0;let pt=!1;const Tt=_.depthModeForSublayer(0,n.DepthMode.ReadOnly),gt=[n.mercatorXfromLng(et.center.lng),n.mercatorYfromLat(et.center.lat)],kt=u.layout.get("text-variable-anchor"),Wt=et.projection.name==="globe",Ft=[],Dt=[0,-1,0];let pi=Dt;!Wt&&!et.mercatorFromTransition||rt||(pi=function(Nt){const si=Nt._camera.getWorldToCamera(Nt.worldSize,1),Xt=n.multiply([],si,Nt.globeMatrix);n.invert(Xt,Xt);const vi=[0,0,0],qt=[0,1,0,0];return n.transformMat4$1(qt,qt,Xt),vi[0]=qt[0],vi[1]=qt[1],vi[2]=qt[2],n.normalize(vi,vi),vi}(et));for(const Nt of x){const si=a.getTile(Nt),Xt=si.getBucket(u);if(!Xt||Xt.projection.name==="mercator"&&Wt)continue;const vi=P?Xt.text:Xt.icon;if(!vi||Xt.fullyClipped||!vi.segments.get().length)continue;const qt=vi.programConfigurations.get(u.id),di=P||Xt.sdfIcons,wi=P?Xt.textSizeData:Xt.iconSizeData,Rt=Ye||et.pitch!==0,Yt=n.evaluateSizeForZoom(wi,et.zoom);let Hi,nn,Wi,pn,Rn=[0,0],sn=null;if(P){if(nn=si.glyphAtlasTexture,Wi=Qe.LINEAR,Hi=si.glyphAtlasTexture.size,Xt.iconsInText){Rn=si.imageAtlasTexture.size,sn=si.imageAtlasTexture;const Yo=wi.kind==="composite"||wi.kind==="camera";pn=Rt||_.options.rotating||_.options.zooming||Yo?Qe.LINEAR:Qe.NEAREST}}else{const Yo=u.layout.get("icon-size").constantOr(0)!==1||Xt.iconsNeedLinear;nn=si.imageAtlasTexture,Wi=di||_.options.rotating||_.options.zooming||Yo||Rt?Qe.LINEAR:Qe.NEAREST,Hi=si.imageAtlasTexture.size}const Vi=Xt.projection.name==="globe",Sr=Vi?pi:Dt,hr=Vi?n.globeToMercatorTransition(et.zoom):0,Ar=kl(Nt,Xt.getProjection(),et),br=et.calculatePixelsToTileUnitsMatrix(si),Wo=Ks(Ar,si.tileID.canonical,Ye,rt,et,Xt.getProjection(),br),Mo=_.terrain&&Ye&&Ze?n.invert(n.create(),Wo):Fl,mo=od(Ar,si.tileID.canonical,Ye,rt,et,Xt.getProjection(),br),$a=kt&&Xt.hasTextData(),Fr=u.layout.get("icon-text-fit")!=="none"&&$a&&Xt.hasIconData();if(Ze){const Yo=et.elevation,cl=Yo?Yo.getAtTileOffsetFunc(Nt,et.center.lat,et.worldSize,Xt.getProjection()):null,ba=xh(Ar,si.tileID.canonical,Ye,rt,et,Xt.getProjection(),br);Fn(Xt,Ar,_,P,ba,mo,Ye,Me,cl,Nt)}const wr=Ze||P&&kt||Fr,sr=_.translatePosMatrix(Ar,si,B,ne),ms=wr?Fl:Wo,oo=_.translatePosMatrix(mo,si,B,ne,!0),jr=Xt.getProjection().createInversionMatrix(et,Nt.canonical),go=[];_.terrainRenderModeElevated()&&Ye&&go.push("PITCH_WITH_MAP_TERRAIN"),Vi&&go.push("PROJECTION_GLOBE_VIEW"),wr&&go.push("PROJECTED_POS_ON_VIEWPORT");const yd=di&&u.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ha;Ha=di?Xt.iconsInText?Zc(wi.kind,Yt,lt,Ye,_,sr,ms,oo,Hi,Rn,Nt,hr,gt,jr,Sr,Xt.getProjection()):dd(wi.kind,Yt,lt,Ye,_,sr,ms,oo,P,Hi,!0,Nt,hr,gt,jr,Sr,Xt.getProjection()):sl(wi.kind,Yt,lt,Ye,_,sr,ms,oo,P,Hi,Nt,hr,gt,jr,Sr,Xt.getProjection());const ao={program:_.useProgram(cu(di,P,Xt),qt,go),buffers:vi,uniformValues:Ha,atlasTexture:nn,atlasTextureIcon:sn,atlasInterpolation:Wi,atlasInterpolationIcon:pn,isSDF:di,hasHalo:yd,tile:si,labelPlaneMatrixInv:Mo};if(tt&&Xt.canOverlap){pt=!0;const Yo=vi.segments.get();for(const cl of Yo)Ft.push({segments:new n.SegmentVector([cl]),sortKey:cl.sortKey,state:ao})}else Ft.push({segments:vi.segments,sortKey:0,state:ao})}pt&&Ft.sort((Nt,si)=>Nt.sortKey-si.sortKey);for(const Nt of Ft){const si=Nt.state;if(_.terrain&&_.terrain.setupElevationDraw(si.tile,si.program,{useDepthForOcclusion:!Wt,labelPlaneMatrixInv:si.labelPlaneMatrixInv}),$e.activeTexture.set(Qe.TEXTURE0),si.atlasTexture.bind(si.atlasInterpolation,Qe.CLAMP_TO_EDGE),si.atlasTextureIcon&&($e.activeTexture.set(Qe.TEXTURE1),si.atlasTextureIcon&&si.atlasTextureIcon.bind(si.atlasInterpolationIcon,Qe.CLAMP_TO_EDGE)),si.isSDF){const Xt=si.uniformValues;si.hasHalo&&(Xt.u_is_halo=1,It(si.buffers,Nt.segments,u,_,si.program,Tt,Ee,Re,Xt)),Xt.u_is_halo=0}It(si.buffers,Nt.segments,u,_,si.program,Tt,Ee,Re,si.uniformValues)}}function It(_,a,u,x,P,B,ne,he,pe){const Me=x.context,Ee=[_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer,_.globeExtVertexBuffer];P.draw(Me,Me.gl.TRIANGLES,B,ne,he,n.CullFaceMode.disabled,pe,u.id,_.layoutVertexBuffer,_.indexBuffer,a,u.paint,x.transform.zoom,_.programConfigurations.get(u.id),Ee)}function ci(_,a,u,x,P,B,ne){const he=_.context.gl,pe=u.paint.get("fill-pattern"),Me=pe&&pe.constantOr(1);let Ee,Re,$e,Qe,et;ne?(Re=Me&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ee=he.LINES):(Re=Me?"fillPattern":"fill",Ee=he.TRIANGLES);for(const rt of x){const Ye=a.getTile(rt);if(Me&&!Ye.patternsLoaded())continue;const Ze=Ye.getBucket(u);if(!Ze)continue;_.prepareDrawTile();const lt=Ze.programConfigurations.get(u.id),tt=_.useProgram(Re,lt);Me&&(_.context.activeTexture.set(he.TEXTURE0),Ye.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),lt.updatePaintBuffers());const pt=pe.constantOr(null);if(pt&&Ye.imageAtlas){const gt=Ye.imageAtlas.patternPositions[pt.toString()];gt&&lt.setConstantPatternPositions(gt)}const Tt=_.translatePosMatrix(rt.projMatrix,Ye,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(ne){Qe=Ze.indexBuffer2,et=Ze.segments2;const gt=_.terrain&&_.terrain.renderingToTexture?_.terrain.drapeBufferSize:[he.drawingBufferWidth,he.drawingBufferHeight];$e=Re==="fillOutlinePattern"&&Me?ro(Tt,_,Ye,gt):mc(Tt,gt)}else Qe=Ze.indexBuffer,et=Ze.segments,$e=Me?qc(Tt,_,Ye):$o(Tt);_.prepareDrawProgram(_.context,tt,rt.toUnwrapped()),tt.draw(_.context,Ee,P,_.stencilModeForClipping(rt),B,n.CullFaceMode.disabled,$e,u.id,Ze.layoutVertexBuffer,Qe,et,u.paint,_.transform.zoom,lt)}}function ti(_,a,u,x,P,B,ne){const he=_.context,pe=he.gl,Me=_.transform,Ee=u.paint.get("fill-extrusion-pattern"),Re=Ee.constantOr(1),$e=u.paint.get("fill-extrusion-opacity"),Qe=[u.paint.get("fill-extrusion-ambient-occlusion-intensity"),u.paint.get("fill-extrusion-ambient-occlusion-radius")],et=u.layout.get("fill-extrusion-edge-radius"),rt=Me.projection.name==="globe"?n.fillExtrusionHeightLift():0,Ye=Me.projection.name==="globe",Ze=Ye?n.globeToMercatorTransition(Me.zoom):0,lt=[n.mercatorXfromLng(Me.center.lng),n.mercatorYfromLat(Me.center.lat)],tt=[];Ye&&(tt.push("PROJECTION_GLOBE_VIEW"),_.style.terrainSetForDrapingOnly()&&tt.push("TERRAIN")),Qe[0]>0&&tt.push("FAUX_AO");for(const pt of x){const Tt=a.getTile(pt),gt=Tt.getBucket(u);if(!gt||gt.projection.name!==Me.projection.name)continue;const kt=gt.programConfigurations.get(u.id),Wt=_.useProgram(Re?"fillExtrusionPattern":"fillExtrusion",kt,tt);if(_.terrain){const vi=_.terrain;if(_.style.terrainSetForDrapingOnly())vi.setupElevationDraw(Tt,Wt,{useMeterToDem:!0});else{if(!gt.enableTerrain)continue;if(vi.setupElevationDraw(Tt,Wt,{useMeterToDem:!0}),Zi(he,a,pt,gt,u,vi),!gt.centroidVertexBuffer){const qt=Wt.attributes.a_centroid_pos;qt!==void 0&&pe.vertexAttrib2f(qt,0,0)}}}Re&&(_.context.activeTexture.set(pe.TEXTURE0),Tt.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),kt.updatePaintBuffers());const Ft=Ee.constantOr(null);if(Ft&&Tt.imageAtlas){const vi=Tt.imageAtlas.patternPositions[Ft.toString()];vi&&kt.setConstantPatternPositions(vi)}const Dt=_.translatePosMatrix(pt.projMatrix,Tt,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),pi=Me.projection.createInversionMatrix(Me,pt.canonical),Nt=u.paint.get("fill-extrusion-vertical-gradient"),si=Re?fr(Dt,_,Nt,$e,Qe,et,pt,Tt,rt,Ze,lt,pi):Ch(Dt,_,Nt,$e,Qe,et,pt,rt,Ze,lt,pi);_.prepareDrawProgram(he,Wt,pt.toUnwrapped());const Xt=[];_.terrain&&Xt.push(gt.centroidVertexBuffer),Ye&&Xt.push(gt.layoutVertexExtBuffer),Wt.draw(he,he.gl.TRIANGLES,P,B,ne,n.CullFaceMode.backCCW,si,u.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,u.paint,_.transform.zoom,kt,Xt)}}function Zi(_,a,u,x,P,B){const ne=[Ze=>{let lt=Ze.canonical.x-1,tt=Ze.wrap;return lt<0&&(lt=(1<<Ze.canonical.z)-1,tt--),new n.OverscaledTileID(Ze.overscaledZ,tt,Ze.canonical.z,lt,Ze.canonical.y)},Ze=>{let lt=Ze.canonical.x+1,tt=Ze.wrap;return lt===1<<Ze.canonical.z&&(lt=0,tt++),new n.OverscaledTileID(Ze.overscaledZ,tt,Ze.canonical.z,lt,Ze.canonical.y)},Ze=>new n.OverscaledTileID(Ze.overscaledZ,Ze.wrap,Ze.canonical.z,Ze.canonical.x,(Ze.canonical.y===0?1<<Ze.canonical.z:Ze.canonical.y)-1),Ze=>new n.OverscaledTileID(Ze.overscaledZ,Ze.wrap,Ze.canonical.z,Ze.canonical.x,Ze.canonical.y===(1<<Ze.canonical.z)-1?0:Ze.canonical.y+1)],he=Ze=>{const lt=a.getSource().minzoom,tt=Tt=>{const gt=a.getTileByID(Tt);if(gt&&gt.hasData())return gt.getBucket(P)},pt=[0,-1,1];for(const Tt of pt){if(Ze.overscaledZ+Tt<lt)continue;const gt=tt(Ze.calculateScaledKey(Ze.overscaledZ+Tt));if(gt)return gt}},pe=[0,0,0],Me=(Ze,lt)=>(pe[0]=Math.min(Ze.min.y,lt.min.y),pe[1]=Math.max(Ze.max.y,lt.max.y),pe[2]=n.EXTENT-lt.min.x>Ze.max.x?lt.min.x-n.EXTENT:Ze.max.x,pe),Ee=(Ze,lt)=>(pe[0]=Math.min(Ze.min.x,lt.min.x),pe[1]=Math.max(Ze.max.x,lt.max.x),pe[2]=n.EXTENT-lt.min.y>Ze.max.y?lt.min.y-n.EXTENT:Ze.max.y,pe),Re=[(Ze,lt)=>Me(Ze,lt),(Ze,lt)=>Me(lt,Ze),(Ze,lt)=>Ee(Ze,lt),(Ze,lt)=>Ee(lt,Ze)],$e=new n.pointGeometry(0,0);let Qe,et,rt;const Ye=(Ze,lt,tt,pt,Tt)=>{const gt=[[pt?tt:Ze,pt?Ze:tt,0],[pt?tt:lt,pt?lt:tt,0]],kt=Tt<0?n.EXTENT+Tt:Tt,Wt=[pt?kt:(Ze+lt)/2,pt?(Ze+lt)/2:kt,0];return tt===0&&Tt<0||tt!==0&&Tt>0?B.getForTilePoints(rt,[Wt],!0,et):gt.push(Wt),B.getForTilePoints(u,gt,!0,Qe),Math.max(gt[0][2],gt[1][2],Wt[2])/B.exaggeration()};for(let Ze=0;Ze<4;Ze++){const lt=(Ze<2?1:5)-Ze,tt=x.borders[Ze];if(tt.length===0)continue;const pt=rt=ne[Ze](u),Tt=he(pt);if(!(Tt&&Tt instanceof n.FillExtrusionBucket&&Tt.enableTerrain)||x.borderDoneWithNeighborZ[Ze]===Tt.canonical.z&&Tt.borderDoneWithNeighborZ[lt]===x.canonical.z||(et=B.findDEMTileFor(pt),!et||!et.dem))continue;if(!Qe){const Ft=B.findDEMTileFor(u);if(!Ft||!Ft.dem)return;Qe=Ft}const gt=Tt.borders[lt];let kt=0;const Wt=Tt.borderDoneWithNeighborZ[lt]!==x.canonical.z;if(x.canonical.z===Tt.canonical.z){for(let Ft=0;Ft<tt.length;Ft++){const Dt=x.featuresOnBorder[tt[Ft]],pi=Dt.borders[Ze];let Nt;for(;kt<gt.length&&(Nt=Tt.featuresOnBorder[gt[kt]],!(Nt.borders[lt][1]>pi[0]+3));)Wt&&Tt.encodeCentroid(void 0,Nt,!1),kt++;if(Nt&&kt<gt.length){const si=kt;let Xt=0;for(;!(Nt.borders[lt][0]>pi[1]-3)&&(Xt++,++kt!==gt.length);)Nt=Tt.featuresOnBorder[gt[kt]];if(Nt=Tt.featuresOnBorder[gt[si]],Dt.intersectsCount()>1||Nt.intersectsCount()>1||Xt!==1){Xt!==1&&(kt=si),x.encodeCentroid(void 0,Dt,!1),Wt&&Tt.encodeCentroid(void 0,Nt,!1);continue}const vi=Re[Ze](Dt,Nt),qt=Ze%2?n.EXTENT-1:0;$e.x=Ye(vi[0],Math.min(n.EXTENT-1,vi[1]),qt,Ze<2,vi[2]),$e.y=0,x.encodeCentroid($e,Dt,!1),Wt&&Tt.encodeCentroid($e,Nt,!1)}else x.encodeCentroid(void 0,Dt,!1)}x.borderDoneWithNeighborZ[Ze]=Tt.canonical.z,x.needsCentroidUpdate=!0,Wt&&(Tt.borderDoneWithNeighborZ[lt]=x.canonical.z,Tt.needsCentroidUpdate=!0)}else{for(const Ft of tt)x.encodeCentroid(void 0,x.featuresOnBorder[Ft],!1);if(Wt){for(const Ft of gt)Tt.encodeCentroid(void 0,Tt.featuresOnBorder[Ft],!1);Tt.borderDoneWithNeighborZ[lt]=x.canonical.z,Tt.needsCentroidUpdate=!0}x.borderDoneWithNeighborZ[Ze]=Tt.canonical.z,x.needsCentroidUpdate=!0}}(x.needsCentroidUpdate||!x.centroidVertexBuffer&&x.centroidVertexArray.length!==0)&&x.uploadCentroid(_)}const Dn=new n.Color(1,0,0,1),cr=new n.Color(0,1,0,1),ps=new n.Color(0,0,1,1),mr=new n.Color(1,0,1,1),xc=new n.Color(0,1,1,1);function Ah(_,a,u){const x=_.context,P=_.transform,B=x.gl,ne=P.projection.name==="globe",he=ne?["PROJECTION_GLOBE_VIEW"]:null;let pe=u.projMatrix;if(ne&&n.globeToMercatorTransition(P.zoom)>0){const Dt=n.transitionTileAABBinECEF(u.canonical,P),pi=n.globeDenormalizeECEF(Dt);pe=n.multiply(new Float32Array(16),P.globeMatrix,pi),n.multiply(pe,P.projMatrix,pe)}const Me=_.useProgram("debug",null,he),Ee=a.getTileByID(u.key);_.terrain&&_.terrain.setupElevationDraw(Ee,Me);const Re=n.DepthMode.disabled,$e=n.StencilMode.disabled,Qe=_.colorModeForRenderPass(),et="$debug";x.activeTexture.set(B.TEXTURE0),_.emptyTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),ne?Ee._makeGlobeTileDebugBuffers(_.context,P):Ee._makeDebugTileBoundsBuffers(_.context,P.projection);const rt=Ee._tileDebugBuffer||_.debugBuffer,Ye=Ee._tileDebugIndexBuffer||_.debugIndexBuffer,Ze=Ee._tileDebugSegments||_.debugSegments;Me.draw(x,B.LINE_STRIP,Re,$e,Qe,n.CullFaceMode.disabled,yc(pe,n.Color.red),et,rt,Ye,Ze,null,null,null,[Ee._globeTileDebugBorderBuffer]);const lt=Ee.latestRawTileData,tt=Math.floor((lt&&lt.byteLength||0)/1024),pt=a.getTile(u).tileSize,Tt=512/Math.min(pt,512)*(u.overscaledZ/P.zoom)*.5;let gt=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(gt+=` => ${u.overscaledZ}`),gt+=` ${tt}kb`,function(Dt,pi){Dt.initDebugOverlayCanvas();const Nt=Dt.debugOverlayCanvas,si=Dt.context.gl,Xt=Dt.debugOverlayCanvas.getContext("2d");Xt.clearRect(0,0,Nt.width,Nt.height),Xt.shadowColor="white",Xt.shadowBlur=2,Xt.lineWidth=1.5,Xt.strokeStyle="white",Xt.textBaseline="top",Xt.font="bold 36px Open Sans, sans-serif",Xt.fillText(pi,5,5),Xt.strokeText(pi,5,5),Dt.debugOverlayTexture.update(Nt),Dt.debugOverlayTexture.bind(si.LINEAR,si.CLAMP_TO_EDGE)}(_,gt);const kt=Ee._tileDebugTextBuffer||_.debugBuffer,Wt=Ee._tileDebugTextIndexBuffer||_.quadTriangleIndexBuffer,Ft=Ee._tileDebugTextSegments||_.debugSegments;Me.draw(x,B.TRIANGLES,Re,$e,n.ColorMode.alphaBlended,n.CullFaceMode.disabled,yc(pe,n.Color.transparent,Tt),et,kt,Wt,Ft,null,null,null,[Ee._globeTileDebugTextBuffer])}function fo(_,a,u,x){xt(_,0,a+u/2,_.transform.width,u,x)}function Ke(_,a,u,x){xt(_,a-u/2,0,u,_.transform.height,x)}function xt(_,a,u,x,P,B){const ne=_.context,he=ne.gl;he.enable(he.SCISSOR_TEST),he.scissor(a*n.exported.devicePixelRatio,u*n.exported.devicePixelRatio,x*n.exported.devicePixelRatio,P*n.exported.devicePixelRatio),ne.clear({color:B}),he.disable(he.SCISSOR_TEST)}const Pt=n.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:hi}=Pt;function Lt(_,a,u,x){_.emplaceBack(a,u,x)}class Qt{constructor(a){this.vertexArray=new n.StructArrayLayout3f12,this.indices=new n.StructArrayLayout3ui6,Lt(this.vertexArray,-1,-1,1),Lt(this.vertexArray,1,-1,1),Lt(this.vertexArray,-1,1,1),Lt(this.vertexArray,1,1,1),Lt(this.vertexArray,-1,-1,-1),Lt(this.vertexArray,1,-1,-1),Lt(this.vertexArray,-1,1,-1),Lt(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=a.createVertexBuffer(this.vertexArray,hi),this.indexBuffer=a.createIndexBuffer(this.indices),this.segment=n.SegmentVector.simpleSegment(0,0,36,12)}}function Si(_,a,u,x,P,B){const ne=_.gl,he=a.paint.get("sky-atmosphere-color"),pe=a.paint.get("sky-atmosphere-halo-color"),Me=a.paint.get("sky-atmosphere-sun-intensity"),Ee=((Re,$e,Qe,et,rt)=>({u_matrix_3f:Re,u_sun_direction:$e,u_sun_intensity:Qe,u_color_tint_r:[et.r,et.g,et.b,et.a],u_color_tint_m:[rt.r,rt.g,rt.b,rt.a],u_luminance:5e-5}))(n.fromMat4(n.create$1(),x),P,Me,he,pe);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+B,a.skyboxTexture,0),u.draw(_,ne.TRIANGLES,n.DepthMode.disabled,n.StencilMode.disabled,n.ColorMode.unblended,n.CullFaceMode.frontCW,Ee,"skyboxCapture",a.skyboxGeometry.vertexBuffer,a.skyboxGeometry.indexBuffer,a.skyboxGeometry.segment)}const ji=n.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class bi{constructor(a){const u=new n.StructArrayLayout5f20;u.emplaceBack(-1,1,1,0,0),u.emplaceBack(1,1,1,1,0),u.emplaceBack(1,-1,1,1,1),u.emplaceBack(-1,-1,1,0,1);const x=new n.StructArrayLayout3ui6;x.emplaceBack(0,1,2),x.emplaceBack(2,3,0),this.vertexBuffer=a.createVertexBuffer(u,ji.members),this.indexBuffer=a.createIndexBuffer(x),this.segments=n.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const fn={symbol:function(_,a,u,x,P){if(_.renderPass!=="translucent")return;const B=n.StencilMode.disabled,ne=_.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(he,pe,Me,Ee,Re,$e,Qe){const et=pe.transform,rt=Re==="map",Ye=$e==="map";for(const Ze of he){const lt=Ee.getTile(Ze),tt=lt.getBucket(Me);if(!tt||!tt.text||!tt.text.segments.get().length)continue;const pt=n.evaluateSizeForZoom(tt.textSizeData,et.zoom),Tt=kl(Ze,tt.getProjection(),et),gt=et.calculatePixelsToTileUnitsMatrix(lt),kt=Ks(Tt,lt.tileID.canonical,Ye,rt,et,tt.getProjection(),gt),Wt=Me.layout.get("icon-text-fit")!=="none"&&tt.hasIconData();if(pt){const Ft=Math.pow(2,et.zoom-lt.tileID.overscaledZ);lu(tt,rt,Ye,Qe,n.symbolSize,et,kt,Ze,Ft,pt,Wt)}}}(x,_,u,a,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),P),u.paint.get("icon-opacity").constantOr(1)!==0&&Eo(_,a,u,x,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),B,ne),u.paint.get("text-opacity").constantOr(1)!==0&&Eo(_,a,u,x,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),B,ne),a.map.showCollisionBoxes&&(So(_,a,u,x,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),So(_,a,u,x,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(_,a,u,x){if(_.renderPass!=="translucent")return;const P=u.paint.get("circle-opacity"),B=u.paint.get("circle-stroke-width"),ne=u.paint.get("circle-stroke-opacity"),he=u.layout.get("circle-sort-key").constantOr(1)!==void 0;if(P.constantOr(1)===0&&(B.constantOr(1)===0||ne.constantOr(1)===0))return;const pe=_.context,Me=pe.gl,Ee=_.transform,Re=_.depthModeForSublayer(0,n.DepthMode.ReadOnly),$e=n.StencilMode.disabled,Qe=_.colorModeForRenderPass(),et=Ee.projection.name==="globe",rt=[n.mercatorXfromLng(Ee.center.lng),n.mercatorYfromLat(Ee.center.lat)],Ye=[];for(let lt=0;lt<x.length;lt++){const tt=x[lt],pt=a.getTile(tt),Tt=pt.getBucket(u);if(!Tt||Tt.projection.name!==Ee.projection.name)continue;const gt=Tt.programConfigurations.get(u.id),kt=cd(u);et&&kt.push("PROJECTION_GLOBE_VIEW");const Wt=_.useProgram("circle",gt,kt),Ft=Tt.layoutVertexBuffer,Dt=Tt.globeExtVertexBuffer,pi=Tt.indexBuffer,Nt=Ee.projection.createInversionMatrix(Ee,tt.canonical),si={programConfiguration:gt,program:Wt,layoutVertexBuffer:Ft,globeExtVertexBuffer:Dt,indexBuffer:pi,uniformValues:gc(_,tt,pt,Nt,rt,u),tile:pt};if(he){const Xt=Tt.segments.get();for(const vi of Xt)Ye.push({segments:new n.SegmentVector([vi]),sortKey:vi.sortKey,state:si})}else Ye.push({segments:Tt.segments,sortKey:0,state:si})}he&&Ye.sort((lt,tt)=>lt.sortKey-tt.sortKey);const Ze={useDepthForOcclusion:!et};for(const lt of Ye){const{programConfiguration:tt,program:pt,layoutVertexBuffer:Tt,globeExtVertexBuffer:gt,indexBuffer:kt,uniformValues:Wt,tile:Ft}=lt.state,Dt=lt.segments;_.terrain&&_.terrain.setupElevationDraw(Ft,pt,Ze),_.prepareDrawProgram(pe,pt,Ft.tileID.toUnwrapped()),pt.draw(pe,Me.TRIANGLES,Re,$e,Qe,n.CullFaceMode.disabled,Wt,u.id,Tt,kt,Dt,u.paint,Ee.zoom,tt,[gt])}},heatmap:function(_,a,u,x){if(u.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const P=_.context,B=P.gl,ne=n.StencilMode.disabled,he=new n.ColorMode([B.ONE,B.ONE],n.Color.transparent,[!0,!0,!0,!0]);(function(Qe,et,rt,Ye){const Ze=Qe.gl,lt=et.width*Ye,tt=et.height*Ye;Qe.activeTexture.set(Ze.TEXTURE1),Qe.viewport.set([0,0,lt,tt]);let pt=rt.heatmapFbo;if(!pt||pt&&(pt.width!==lt||pt.height!==tt)){pt&&pt.destroy();const Tt=Ze.createTexture();Ze.bindTexture(Ze.TEXTURE_2D,Tt),Ze.texParameteri(Ze.TEXTURE_2D,Ze.TEXTURE_WRAP_S,Ze.CLAMP_TO_EDGE),Ze.texParameteri(Ze.TEXTURE_2D,Ze.TEXTURE_WRAP_T,Ze.CLAMP_TO_EDGE),Ze.texParameteri(Ze.TEXTURE_2D,Ze.TEXTURE_MIN_FILTER,Ze.LINEAR),Ze.texParameteri(Ze.TEXTURE_2D,Ze.TEXTURE_MAG_FILTER,Ze.LINEAR),pt=rt.heatmapFbo=Qe.createFramebuffer(lt,tt,!1),function(gt,kt,Wt,Ft,Dt,pi){const Nt=gt.gl;Nt.texImage2D(Nt.TEXTURE_2D,0,Nt.RGBA,Dt,pi,0,Nt.RGBA,gt.extRenderToTextureHalfFloat?gt.extTextureHalfFloat.HALF_FLOAT_OES:Nt.UNSIGNED_BYTE,null),Ft.colorAttachment.set(Wt)}(Qe,0,Tt,pt,lt,tt)}else Ze.bindTexture(Ze.TEXTURE_2D,pt.colorAttachment.get()),Qe.bindFramebuffer.set(pt.framebuffer)})(P,_,u,_.transform.projection.name==="globe"?.5:.25),P.clear({color:n.Color.transparent});const pe=_.transform,Me=pe.projection.name==="globe",Ee=Me?["PROJECTION_GLOBE_VIEW"]:null,Re=Me?n.CullFaceMode.frontCCW:n.CullFaceMode.disabled,$e=[n.mercatorXfromLng(pe.center.lng),n.mercatorYfromLat(pe.center.lat)];for(let Qe=0;Qe<x.length;Qe++){const et=x[Qe];if(a.hasRenderableParent(et))continue;const rt=a.getTile(et),Ye=rt.getBucket(u);if(!Ye||Ye.projection.name!==pe.projection.name)continue;const Ze=Ye.programConfigurations.get(u.id),lt=_.useProgram("heatmap",Ze,Ee),{zoom:tt}=_.transform;_.terrain&&_.terrain.setupElevationDraw(rt,lt),_.prepareDrawProgram(P,lt,et.toUnwrapped());const pt=pe.projection.createInversionMatrix(pe,et.canonical);lt.draw(P,B.TRIANGLES,n.DepthMode.disabled,ne,he,Re,zl(_,et,rt,pt,$e,tt,u.paint.get("heatmap-intensity")),u.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,u.paint,_.transform.zoom,Ze,Me?[Ye.globeExtVertexBuffer]:null)}P.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(P,B){const ne=P.context,he=ne.gl,pe=B.heatmapFbo;if(!pe)return;ne.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,pe.colorAttachment.get()),ne.activeTexture.set(he.TEXTURE1);let Me=B.colorRampTexture;Me||(Me=B.colorRampTexture=new n.Texture(ne,B.colorRamp,he.RGBA)),Me.bind(he.LINEAR,he.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(ne,he.TRIANGLES,n.DepthMode.disabled,n.StencilMode.disabled,P.colorModeForRenderPass(),n.CullFaceMode.disabled,((Ee,Re,$e,Qe)=>({u_image:0,u_color_ramp:1,u_opacity:Re.paint.get("heatmap-opacity")}))(0,B),B.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,B.paint,P.transform.zoom)}(_,u))},line:function(_,a,u,x){if(_.renderPass!=="translucent")return;const P=u.paint.get("line-opacity"),B=u.paint.get("line-width");if(P.constantOr(1)===0||B.constantOr(1)===0)return;const ne=_.depthModeForSublayer(0,n.DepthMode.ReadOnly),he=_.colorModeForRenderPass(),pe=_.terrain&&_.terrain.renderingToTexture?1:n.exported.devicePixelRatio,Me=u.paint.get("line-dasharray"),Ee=Me.constantOr(1),Re=u.layout.get("line-cap"),$e=u.paint.get("line-pattern"),Qe=$e.constantOr(1),et=u.paint.get("line-gradient"),rt=Qe?"linePattern":"line",Ye=_.context,Ze=Ye.gl,lt=(pt=>{const Tt=[];Mh(pt)&&Tt.push("RENDER_LINE_DASH"),pt.paint.get("line-gradient")&&Tt.push("RENDER_LINE_GRADIENT");const gt=pt.paint.get("line-trim-offset");gt[0]===0&&gt[1]===0||Tt.push("RENDER_LINE_TRIM_OFFSET");const kt=pt.paint.get("line-pattern").constantOr(1),Wt=pt.paint.get("line-opacity").constantOr(1)!==1;return!kt&&Wt&&Tt.push("RENDER_LINE_ALPHA_DISCARD"),Tt})(u);let tt=lt.includes("RENDER_LINE_ALPHA_DISCARD");_.terrain&&_.terrain.clipOrMaskOverlapStencilType()&&(tt=!1);for(const pt of x){const Tt=a.getTile(pt);if(Qe&&!Tt.patternsLoaded())continue;const gt=Tt.getBucket(u);if(!gt)continue;_.prepareDrawTile();const kt=gt.programConfigurations.get(u.id),Wt=_.useProgram(rt,kt,lt),Ft=$e.constantOr(null);if(Ft&&Tt.imageAtlas){const di=Tt.imageAtlas.patternPositions[Ft.toString()];di&&kt.setConstantPatternPositions(di)}const Dt=Me.constantOr(null),pi=Re.constantOr(null);if(!Qe&&Dt&&pi&&Tt.lineAtlas){const di=Tt.lineAtlas.getDash(Dt,pi);di&&kt.setConstantPatternPositions(di)}let[Nt,si]=u.paint.get("line-trim-offset");(pi==="round"||pi==="square")&&Nt!==si&&(Nt===0&&(Nt-=1),si===1&&(si+=1));const Xt=_.terrain?pt.projMatrix:null,vi=Qe?va(_,Tt,u,Xt,pe):hd(_,Tt,u,Xt,gt.lineClipsArray.length,pe,[Nt,si]);if(et){const di=gt.gradients[u.id];let wi=di.texture;if(u.gradientVersion!==di.version){let Rt=256;if(u.stepInterpolant){const Yt=a.getSource().maxzoom,Hi=pt.canonical.z===Yt?Math.ceil(1<<_.transform.maxZoom-pt.canonical.z):1;Rt=n.clamp(n.nextPowerOfTwo(gt.maxLineLength/n.EXTENT*1024*Hi),256,Ye.maxTextureSize)}di.gradient=n.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:Rt,image:di.gradient||void 0,clips:gt.lineClipsArray}),di.texture?di.texture.update(di.gradient):di.texture=new n.Texture(Ye,di.gradient,Ze.RGBA),di.version=u.gradientVersion,wi=di.texture}Ye.activeTexture.set(Ze.TEXTURE1),wi.bind(u.stepInterpolant?Ze.NEAREST:Ze.LINEAR,Ze.CLAMP_TO_EDGE)}Ee&&(Ye.activeTexture.set(Ze.TEXTURE0),Tt.lineAtlasTexture.bind(Ze.LINEAR,Ze.REPEAT),kt.updatePaintBuffers()),Qe&&(Ye.activeTexture.set(Ze.TEXTURE0),Tt.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),kt.updatePaintBuffers()),_.prepareDrawProgram(Ye,Wt,pt.toUnwrapped());const qt=di=>{Wt.draw(Ye,Ze.TRIANGLES,ne,di,he,n.CullFaceMode.disabled,vi,u.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,u.paint,_.transform.zoom,kt,[gt.layoutVertexBuffer2])};if(tt){const di=_.stencilModeForClipping(pt).ref;di===0&&_.terrain&&Ye.clear({stencil:0});const wi={func:Ze.EQUAL,mask:255};vi.u_alpha_discard_threshold=.8,qt(new n.StencilMode(wi,di,255,Ze.KEEP,Ze.KEEP,Ze.INVERT)),vi.u_alpha_discard_threshold=0,qt(new n.StencilMode(wi,di,255,Ze.KEEP,Ze.KEEP,Ze.KEEP))}else qt(_.stencilModeForClipping(pt))}tt&&(_.resetStencilClippingMasks(),_.terrain&&Ye.clear({stencil:0}))},fill:function(_,a,u,x){const P=u.paint.get("fill-color"),B=u.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const ne=_.colorModeForRenderPass(),he=u.paint.get("fill-pattern"),pe=_.opaquePassEnabledForLayer()&&!he.constantOr(1)&&P.constantOr(n.Color.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===pe){const Me=_.depthModeForSublayer(1,_.renderPass==="opaque"?n.DepthMode.ReadWrite:n.DepthMode.ReadOnly);ci(_,a,u,x,Me,ne,!1)}if(_.renderPass==="translucent"&&u.paint.get("fill-antialias")){const Me=_.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,n.DepthMode.ReadOnly);ci(_,a,u,x,Me,ne,!0)}},"fill-extrusion":function(_,a,u,x){const P=u.paint.get("fill-extrusion-opacity");if(P!==0&&_.renderPass==="translucent"){const B=new n.DepthMode(_.context.gl.LEQUAL,n.DepthMode.ReadWrite,_.depthRangeFor3D);if(P!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))ti(_,a,u,x,B,n.StencilMode.disabled,n.ColorMode.disabled),ti(_,a,u,x,B,_.stencilModeFor3D(),_.colorModeForRenderPass()),_.resetStencilClippingMasks();else{const ne=_.colorModeForRenderPass();ti(_,a,u,x,B,n.StencilMode.disabled,ne)}}},hillshade:function(_,a,u,x){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const P=_.context,B=_.depthModeForSublayer(0,n.DepthMode.ReadOnly),ne=_.colorModeForRenderPass(),he=_.terrain&&_.terrain.renderingToTexture,[pe,Me]=_.renderPass!=="translucent"||he?[{},x]:_.stencilConfigForOverlap(x);for(const Ee of Me){const Re=a.getTile(Ee);if(Re.needsHillshadePrepare&&_.renderPass==="offscreen")Vn(_,Re,u,B,n.StencilMode.disabled,ne);else if(_.renderPass==="translucent"){const $e=he&&_.terrain?_.terrain.stencilModeForRTTOverlap(Ee):pe[Ee.overscaledZ];Qr(_,Ee,Re,u,B,$e,ne)}}P.viewport.set([0,0,_.width,_.height]),_.resetStencilClippingMasks()},raster:function(_,a,u,x,P,B){if(_.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!x.length)return;const ne=_.context,he=ne.gl,pe=a.getSource(),Me=_.useProgram("raster"),Ee=_.colorModeForRenderPass(),Re=_.terrain&&_.terrain.renderingToTexture,[$e,Qe]=pe instanceof Et||Re?[{},x]:_.stencilConfigForOverlap(x),et=Qe[Qe.length-1].overscaledZ,rt=!_.options.moving;for(const Ye of Qe){const Ze=Re?n.DepthMode.disabled:_.depthModeForSublayer(Ye.overscaledZ-et,u.paint.get("raster-opacity")===1?n.DepthMode.ReadWrite:n.DepthMode.ReadOnly,he.LESS),lt=Ye.toUnwrapped(),tt=a.getTile(Ye);if(Re&&(!tt||!tt.hasData()))continue;const pt=Re?Ye.projMatrix:_.transform.calculateProjMatrix(lt,rt),Tt=_.terrain&&Re?_.terrain.stencilModeForRTTOverlap(Ye):$e[Ye.overscaledZ],gt=B?0:u.paint.get("raster-fade-duration");tt.registerFadeDuration(gt);const kt=a.findLoadedParent(Ye,0),Wt=To(tt,kt,a,_.transform,gt);let Ft,Dt;_.terrain&&_.terrain.prepareDrawTile();const pi=u.paint.get("raster-resampling")==="nearest"?he.NEAREST:he.LINEAR;ne.activeTexture.set(he.TEXTURE0),tt.texture.bind(pi,he.CLAMP_TO_EDGE),ne.activeTexture.set(he.TEXTURE1),kt?(kt.texture.bind(pi,he.CLAMP_TO_EDGE),Ft=Math.pow(2,kt.tileID.overscaledZ-tt.tileID.overscaledZ),Dt=[tt.tileID.canonical.x*Ft%1,tt.tileID.canonical.y*Ft%1]):tt.texture.bind(pi,he.CLAMP_TO_EDGE);const Nt=vc(pt,Dt||[0,0],Ft||1,Wt,u,pe instanceof Et?pe.perspectiveTransform:[0,0]);if(_.prepareDrawProgram(ne,Me,lt),pe instanceof Et)pe.boundsBuffer&&pe.boundsSegments&&Me.draw(ne,he.TRIANGLES,Ze,n.StencilMode.disabled,Ee,n.CullFaceMode.disabled,Nt,u.id,pe.boundsBuffer,_.quadTriangleIndexBuffer,pe.boundsSegments);else{const{tileBoundsBuffer:si,tileBoundsIndexBuffer:Xt,tileBoundsSegments:vi}=_.getTileBoundsBuffers(tt);Me.draw(ne,he.TRIANGLES,Ze,Tt,Ee,n.CullFaceMode.disabled,Nt,u.id,si,Xt,vi)}}_.resetStencilClippingMasks()},background:function(_,a,u,x){const P=u.paint.get("background-color"),B=u.paint.get("background-opacity");if(B===0)return;const ne=_.context,he=ne.gl,pe=_.transform,Me=pe.tileSize,Ee=u.paint.get("background-pattern");if(_.isPatternMissing(Ee))return;const Re=!Ee&&P.a===1&&B===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Re)return;const $e=n.StencilMode.disabled,Qe=_.depthModeForSublayer(0,Re==="opaque"?n.DepthMode.ReadWrite:n.DepthMode.ReadOnly),et=_.colorModeForRenderPass(),rt=_.useProgram(Ee?"backgroundPattern":"background");let Ye,Ze=x;Ze||(Ye=_.getBackgroundTiles(),Ze=Object.values(Ye).map(lt=>lt.tileID)),Ee&&(ne.activeTexture.set(he.TEXTURE0),_.imageManager.bind(_.context));for(const lt of Ze){const tt=lt.toUnwrapped(),pt=x?lt.projMatrix:_.transform.calculateProjMatrix(tt);_.prepareDrawTile();const Tt=a?a.getTile(lt):Ye?Ye[lt.key]:new n.Tile(lt,Me,pe.zoom,_),gt=Ee?rr(pt,B,_,Ee,{tileID:lt,tileSize:Me}):yp(pt,B,P);_.prepareDrawProgram(ne,rt,tt);const{tileBoundsBuffer:kt,tileBoundsIndexBuffer:Wt,tileBoundsSegments:Ft}=_.getTileBoundsBuffers(Tt);rt.draw(ne,he.TRIANGLES,Qe,$e,et,n.CullFaceMode.disabled,gt,u.id,kt,Wt,Ft)}},sky:function(_,a,u){const x=_.transform,P=x.projection.name==="mercator"||x.projection.name==="globe"?1:n.smoothstep(7,8,x.zoom),B=u.paint.get("sky-opacity")*P;if(B===0)return;const ne=_.context,he=u.paint.get("sky-type"),pe=new n.DepthMode(ne.gl.LEQUAL,n.DepthMode.ReadOnly,[0,1]),Me=_.frameCounter/1e3%1;he==="atmosphere"?_.renderPass==="offscreen"?u.needsSkyboxCapture(_)&&(function(Ee,Re,$e,Qe){const et=Ee.context,rt=et.gl;let Ye=Re.skyboxFbo;if(!Ye){Ye=Re.skyboxFbo=et.createFramebuffer(32,32,!1),Re.skyboxGeometry=new Qt(et),Re.skyboxTexture=et.gl.createTexture(),rt.bindTexture(rt.TEXTURE_CUBE_MAP,Re.skyboxTexture),rt.texParameteri(rt.TEXTURE_CUBE_MAP,rt.TEXTURE_WRAP_S,rt.CLAMP_TO_EDGE),rt.texParameteri(rt.TEXTURE_CUBE_MAP,rt.TEXTURE_WRAP_T,rt.CLAMP_TO_EDGE),rt.texParameteri(rt.TEXTURE_CUBE_MAP,rt.TEXTURE_MIN_FILTER,rt.LINEAR),rt.texParameteri(rt.TEXTURE_CUBE_MAP,rt.TEXTURE_MAG_FILTER,rt.LINEAR);for(let pt=0;pt<6;++pt)rt.texImage2D(rt.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0,rt.RGBA,32,32,0,rt.RGBA,rt.UNSIGNED_BYTE,null)}et.bindFramebuffer.set(Ye.framebuffer),et.viewport.set([0,0,32,32]);const Ze=Re.getCenter(Ee,!0),lt=Ee.useProgram("skyboxCapture"),tt=new Float64Array(16);n.identity(tt),n.rotateY(tt,tt,.5*-Math.PI),Si(et,Re,lt,tt,Ze,0),n.identity(tt),n.rotateY(tt,tt,.5*Math.PI),Si(et,Re,lt,tt,Ze,1),n.identity(tt),n.rotateX(tt,tt,.5*-Math.PI),Si(et,Re,lt,tt,Ze,2),n.identity(tt),n.rotateX(tt,tt,.5*Math.PI),Si(et,Re,lt,tt,Ze,3),n.identity(tt),Si(et,Re,lt,tt,Ze,4),n.identity(tt),n.rotateY(tt,tt,Math.PI),Si(et,Re,lt,tt,Ze,5),et.viewport.set([0,0,Ee.width,Ee.height])}(_,u),u.markSkyboxValid(_)):_.renderPass==="sky"&&function(Ee,Re,$e,Qe,et){const rt=Ee.context,Ye=rt.gl,Ze=Ee.transform,lt=Ee.useProgram("skybox");rt.activeTexture.set(Ye.TEXTURE0),Ye.bindTexture(Ye.TEXTURE_CUBE_MAP,Re.skyboxTexture);const tt=((pt,Tt,gt,kt,Wt)=>({u_matrix:pt,u_sun_direction:Tt,u_cubemap:0,u_opacity:kt,u_temporal_offset:Wt}))(Ze.skyboxMatrix,Re.getCenter(Ee,!1),0,Qe,et);Ee.prepareDrawProgram(rt,lt),lt.draw(rt,Ye.TRIANGLES,$e,n.StencilMode.disabled,Ee.colorModeForRenderPass(),n.CullFaceMode.backCW,tt,"skybox",Re.skyboxGeometry.vertexBuffer,Re.skyboxGeometry.indexBuffer,Re.skyboxGeometry.segment)}(_,u,pe,B,Me):he==="gradient"&&_.renderPass==="sky"&&function(Ee,Re,$e,Qe,et){const rt=Ee.context,Ye=rt.gl,Ze=Ee.transform,lt=Ee.useProgram("skyboxGradient");Re.skyboxGeometry||(Re.skyboxGeometry=new Qt(rt)),rt.activeTexture.set(Ye.TEXTURE0);let tt=Re.colorRampTexture;tt||(tt=Re.colorRampTexture=new n.Texture(rt,Re.colorRamp,Ye.RGBA)),tt.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE);const pt=((Tt,gt,kt,Wt,Ft)=>({u_matrix:Tt,u_color_ramp:0,u_center_direction:gt,u_radius:n.degToRad(kt),u_opacity:Wt,u_temporal_offset:Ft}))(Ze.skyboxMatrix,Re.getCenter(Ee,!1),Re.paint.get("sky-gradient-radius"),Qe,et);Ee.prepareDrawProgram(rt,lt),lt.draw(rt,Ye.TRIANGLES,$e,n.StencilMode.disabled,Ee.colorModeForRenderPass(),n.CullFaceMode.backCW,pt,"skyboxGradient",Re.skyboxGeometry.vertexBuffer,Re.skyboxGeometry.indexBuffer,Re.skyboxGeometry.segment)}(_,u,pe,B,Me)},debug:function(_,a,u){for(let x=0;x<u.length;x++)Ah(_,a,u[x])},custom:function(_,a,u){const x=_.context,P=u.implementation;if(_.transform.projection.unsupportedLayers&&_.transform.projection.unsupportedLayers.includes("custom"))n.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(_.renderPass==="offscreen"){const B=P.prerender;B&&(_.setCustomLayerDefaults(),x.setColorMode(_.colorModeForRenderPass()),B.call(P,x.gl,_.transform.customLayerMatrix()),x.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),x.setColorMode(_.colorModeForRenderPass()),x.setStencilMode(n.StencilMode.disabled);const B=P.renderingMode==="3d"?new n.DepthMode(_.context.gl.LEQUAL,n.DepthMode.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,n.DepthMode.ReadOnly);x.setDepthMode(B),P.render(x.gl,_.transform.customLayerMatrix()),x.setDirty(),_.setBaseState(),x.bindFramebuffer.set(null)}}};class vn{constructor(a,u){this.context=new Oe(a),this.transform=u,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=n.SourceCache.maxUnderzooming+n.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new na,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(a,u){const x=!!a&&!!a.terrain&&this.transform.projection.supportsTerrain;if(!(x||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new uo(this,a));const P=this._terrain;this.transform.elevation=x?P:null,P.update(a,this.transform,u)}_updateFog(a){const u=a.fog;if(!u||this.transform.projection.name==="globe"||u.getOpacity(this.transform.pitch)<1||u.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[x,P]=u.getFovAdjustedRange(this.transform._fov);if(x>P)return void(this.transform.fogCullDistSq=null);const B=x+.78*(P-x);this.transform.fogCullDistSq=B*B}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(a,u){if(this.width=a*n.exported.devicePixelRatio,this.height=u*n.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const x of this.style.order)this.style._layers[x].resize()}setup(){const a=this.context,u=new n.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(n.EXTENT,0),u.emplaceBack(0,n.EXTENT),u.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=a.createVertexBuffer(u,n.posAttributes.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);const x=new n.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(n.EXTENT,0),x.emplaceBack(0,n.EXTENT),x.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=a.createVertexBuffer(x,n.posAttributes.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);const P=new n.StructArrayLayout2i4;P.emplaceBack(-1,-1),P.emplaceBack(1,-1),P.emplaceBack(-1,1),P.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(P,n.posAttributes.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);const B=new n.StructArrayLayout4i8;B.emplaceBack(0,0,0,0),B.emplaceBack(n.EXTENT,0,n.EXTENT,0),B.emplaceBack(0,n.EXTENT,0,n.EXTENT),B.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.mercatorBoundsBuffer=a.createVertexBuffer(B,n.boundsAttributes.members),this.mercatorBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);const ne=new n.StructArrayLayout3ui6;ne.emplaceBack(0,1,2),ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(ne);const he=new n.StructArrayLayout1ui2;for(const Me of[0,1,3,2,0])he.emplaceBack(Me);this.debugIndexBuffer=a.createIndexBuffer(he),this.emptyTexture=new n.Texture(a,new n.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),a.gl.RGBA),this.identityMat=n.create();const pe=this.context.gl;this.stencilClearMode=new n.StencilMode({func:pe.ALWAYS,mask:0},0,255,pe.ZERO,pe.ZERO,pe.ZERO),this.loadTimeStamps.push(n.window.performance.now()),this.atmosphereBuffer=new bi(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(a){return a._makeTileBoundsBuffers(this.context,this.transform.projection),a._tileBoundsBuffer?{tileBoundsBuffer:a._tileBoundsBuffer,tileBoundsIndexBuffer:a._tileBoundsIndexBuffer,tileBoundsSegments:a._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const a=this.context,u=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(a,u.TRIANGLES,n.DepthMode.disabled,this.stencilClearMode,n.ColorMode.disabled,n.CullFaceMode.disabled,Rs(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(a,u,x){if(!u||this.currentStencilSource===u.id||!a.isTileClipped()||!x||x.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let he=!1;for(const pe of x)if(this._tileClippingMaskIDs[pe.key]===void 0){he=!0;break}if(!he)return}this.currentStencilSource=u.id;const P=this.context,B=P.gl;this.nextStencilID+x.length>256&&this.clearStencil(),P.setColorMode(n.ColorMode.disabled),P.setDepthMode(n.DepthMode.disabled);const ne=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const he of x){const pe=u.getTile(he),Me=this._tileClippingMaskIDs[he.key]=this.nextStencilID++,{tileBoundsBuffer:Ee,tileBoundsIndexBuffer:Re,tileBoundsSegments:$e}=this.getTileBoundsBuffers(pe);ne.draw(P,B.TRIANGLES,n.DepthMode.disabled,new n.StencilMode({func:B.ALWAYS,mask:0},Me,255,B.KEEP,B.KEEP,B.REPLACE),n.ColorMode.disabled,n.CullFaceMode.disabled,Rs(he.projMatrix),"$clipping",Ee,Re,$e)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,u=this.context.gl;return new n.StencilMode({func:u.NOTEQUAL,mask:255},a,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(a){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(a);const u=this.context.gl;return new n.StencilMode({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(a){const u=this.context.gl,x=a.sort((ne,he)=>he.overscaledZ-ne.overscaledZ),P=x[x.length-1].overscaledZ,B=x[0].overscaledZ-P+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const ne={};for(let he=0;he<B;he++)ne[he+P]=new n.StencilMode({func:u.GEQUAL,mask:255},he+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=B,[ne,x]}return[{[P]:n.StencilMode.disabled},x]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new n.ColorMode([a.CONSTANT_COLOR,a.ONE],new n.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?n.ColorMode.unblended:n.ColorMode.alphaBlended}depthModeForSublayer(a,u,x){if(!this.opaquePassEnabledForLayer())return n.DepthMode.disabled;const P=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new n.DepthMode(x||this.context.gl.LEQUAL,u,[P,P])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,u){this.style=a,this.options=u,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(n.exported.now()),this.imageManager.beginFrame();const x=this.style.order,P=this.style._sourceCaches;for(const pe in P){const Me=P[pe];Me.used&&Me.prepare(this.context)}const B={},ne={},he={};for(const pe in P){const Me=P[pe];B[pe]=Me.getVisibleCoordinates(),ne[pe]=B[pe].slice().reverse(),he[pe]=Me.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let pe=0;pe<x.length;pe++)if(this.style._layers[x[pe]].is3D()){this.opaquePassCutoff=pe;break}if(this.terrain&&(this.terrain.updateTileBinding(he),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.GlobeSharedBuffers(this.context)),n.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const pe of x){const Me=this.style._layers[pe],Ee=a._getLayerSourceCache(Me);if(!Me.hasOffscreenPass()||Me.isHidden(this.transform.zoom))continue;const Re=Ee?ne[Ee.id]:void 0;(Me.type==="custom"||Me.isSky()||Re&&Re.length)&&this.renderLayer(this,Ee,Me,Re)}if(this.depthRangeFor3D=[0,1-(a.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:u.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const pe=this.style._layers[x[this.currentLayer]],Me=a._getLayerSourceCache(pe);if(pe.isSky())continue;const Ee=Me?ne[Me.id]:void 0;this._renderTileClippingMasks(pe,Me,Ee),this.renderLayer(this,Me,pe,Ee)}if(this.style.fog&&this.transform.projection.supportsFog&&function(pe,Me){const Ee=pe.context,Re=Ee.gl,$e=pe.transform,Qe=new n.DepthMode(Re.LEQUAL,n.DepthMode.ReadOnly,[0,1]),et=pe.useProgram("globeAtmosphere",null,$e.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),rt=n.globeToMercatorTransition($e.zoom),Ye=Me.properties.get("color").toArray01(),Ze=Me.properties.get("high-color").toArray01(),lt=Me.properties.get("space-color").toArray01PremultipliedAlpha(),tt=n.identity$1([]);n.rotateY$1(tt,tt,-n.degToRad($e._center.lng)),n.rotateX$1(tt,tt,n.degToRad($e._center.lat)),n.rotateZ$1(tt,tt,$e.angle),n.rotateX$1(tt,tt,-$e._pitch);const pt=n.fromQuat(new Float32Array(16),tt),Tt=n.mapValue(Me.properties.get("star-intensity"),0,1,0,.25),gt=5e-4,kt=n.mapValue(Me.properties.get("horizon-blend"),0,1,gt,.25),Wt=n.globeUseCustomAntiAliasing(pe,Ee,$e)&&kt===gt?$e.worldSize/(2*Math.PI*1.025)-1:$e.globeRadius,Ft=pe.frameCounter/1e3%1,Dt=n.length($e.globeCenterInViewSpace),pi=Math.sqrt(Math.pow(Dt,2)-Math.pow(Wt,2)),Nt=Math.acos(pi/Dt),si=((vi,qt,di,wi,Rt,Yt,Hi,nn,Wi,pn,Rn,sn,Vi,Sr)=>({u_frustum_tl:vi,u_frustum_tr:qt,u_frustum_br:di,u_frustum_bl:wi,u_horizon:Rt,u_transition:Yt,u_fadeout_range:Hi,u_color:nn,u_high_color:Wi,u_space_color:pn,u_star_intensity:Rn,u_star_size:5*n.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:sn,u_horizon_angle:Vi,u_rotation_matrix:Sr}))($e.frustumCorners.TL,$e.frustumCorners.TR,$e.frustumCorners.BR,$e.frustumCorners.BL,$e.frustumCorners.horizon,rt,kt,Ye,Ze,lt,Tt,Ft,Nt,pt);pe.prepareDrawProgram(Ee,et);const Xt=pe.atmosphereBuffer;Xt&&et.draw(Ee,Re.TRIANGLES,Qe,n.StencilMode.disabled,n.ColorMode.alphaBlended,n.CullFaceMode.backCW,si,"skybox",Xt.vertexBuffer,Xt.indexBuffer,Xt.segments)}(this,this.style.fog),this.renderPass="sky",(n.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const pe=this.style._layers[x[this.currentLayer]],Me=a._getLayerSourceCache(pe);pe.isSky()&&this.renderLayer(this,Me,pe,Me?ne[Me.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<x.length;){const pe=this.style._layers[x[this.currentLayer]],Me=a._getLayerSourceCache(pe);if(pe.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(pe)){if(pe.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Ee=Me?(pe.type==="symbol"?he:ne)[Me.id]:void 0;this._renderTileClippingMasks(pe,Me,Me?B[Me.id]:void 0),this.renderLayer(this,Me,pe,Ee),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let pe=null;n.values(this.style._layers).forEach(Me=>{const Ee=a._getLayerSourceCache(Me);Ee&&!Me.isHidden(this.transform.zoom)&&(!pe||pe.getSource().maxzoom<Ee.getSource().maxzoom)&&(pe=Ee)}),pe&&this.options.showTileBoundaries&&fn.debug(this,pe,pe.getVisibleCoordinates())}this.options.showPadding&&function(pe){const Me=pe.transform.padding;fo(pe,pe.transform.height-(Me.top||0),3,Dn),fo(pe,Me.bottom||0,3,cr),Ke(pe,Me.left||0,3,ps),Ke(pe,pe.transform.width-(Me.right||0),3,mr);const Ee=pe.transform.centerPoint;(function(Re,$e,Qe,et){xt(Re,$e-1,Qe-10,2,20,et),xt(Re,$e-10,Qe-1,20,2,et)})(pe,Ee.x,pe.transform.height-Ee.y,xc)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(n.window.performance.now()),this.saveCanvasCopy())}}renderLayer(a,u,x,P){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="sky"||x.type==="custom"||P&&P.length)&&(this.id=x.id,this.gpuTimingStart(x),a.transform.projection.unsupportedLayers&&a.transform.projection.unsupportedLayers.includes(x.type)||fn[x.type](a,u,x,P,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let x=this.gpuTimers[a.id];x||(x=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),x.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,x.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const a=this.context.extTimerQuery,u=a.createQueryEXT();this.deferredRenderGpuTimeQueries.push(u),a.beginQueryEXT(a.TIME_ELAPSED_EXT,u)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const a=this.context.extTimerQuery;a.endQueryEXT(a.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const a=this.context.extTimerQuery;a.endQueryEXT(a.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}collectDeferredRenderGpuQueries(){const a=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],a}queryGpuTimers(a){const u={};for(const x in a){const P=a[x],B=this.context.extTimerQuery,ne=B.getQueryObjectEXT(P.query,B.QUERY_RESULT_EXT)/1e6;B.deleteQueryEXT(P.query),u[x]=ne}return u}queryGpuTimeDeferredRender(a){if(!this.options.gpuTimingDeferredRender)return 0;const u=this.context.extTimerQuery;let x=0;for(const P of a)x+=u.getQueryObjectEXT(P,u.QUERY_RESULT_EXT)/1e6,u.deleteQueryEXT(P);return x}translatePosMatrix(a,u,x,P,B){if(!x[0]&&!x[1])return a;const ne=B?P==="map"?this.transform.angle:0:P==="viewport"?-this.transform.angle:0;if(ne){const Me=Math.sin(ne),Ee=Math.cos(ne);x=[x[0]*Ee-x[1]*Me,x[0]*Me+x[1]*Ee]}const he=[B?x[0]:Z(u,x[0],this.transform.zoom),B?x[1]:Z(u,x[1],this.transform.zoom),0],pe=new Float32Array(16);return n.translate(pe,a,he),pe}saveTileTexture(a){const u=this._tileTextures[a.size[0]];u?u.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const u=this._tileTextures[a];return u&&u.length>0?u.pop():null}isPatternMissing(a){return a===null||a!==void 0&&!this.imageManager.getPattern(a.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const a=this.terrain&&this.terrain.renderingToTexture,u=this.terrain&&this.terrain.exaggeration()===0,x=this.style&&this.style.fog,P=[];return this.terrainRenderModeElevated()&&P.push("TERRAIN"),this.transform.projection.name==="globe"&&P.push("GLOBE"),u&&P.push("ZERO_EXAGGERATION"),x&&!a&&x.getOpacity(this.transform.pitch)!==0&&P.push("FOG"),a&&P.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&P.push("OVERDRAW_INSPECTOR"),P}useProgram(a,u,x){this.cache=this.cache||{};const P=x||[],B=this.currentGlobalDefines().concat(P),ne=Vo.cacheKey(Kt[a],a,B,u);return this.cache[ne]||(this.cache[ne]=new Vo(this.context,a,Kt[a],u,po[a],B)),this.cache[ne]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=n.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(a,u,x){if(this.terrain&&this.terrain.renderingToTexture)return;const P=this.style.fog;if(P){const B=P.getOpacity(this.transform.pitch),ne=((he,pe,Me,Ee,Re,$e,Qe,et,rt,Ye,Ze)=>{const lt=he.transform,tt=pe.properties.get("color").toArray01();tt[3]=Ee;const pt=he.frameCounter/1e3%1;return{u_fog_matrix:Me?lt.calculateFogTileMatrix(Me):he.identityMat,u_fog_range:pe.getFovAdjustedRange(lt._fov),u_fog_color:tt,u_fog_horizon_blend:pe.properties.get("horizon-blend"),u_fog_temporal_offset:pt,u_frustum_tl:Re,u_frustum_tr:$e,u_frustum_br:Qe,u_frustum_bl:et,u_globe_pos:rt,u_globe_radius:Ye,u_viewport:Ze,u_globe_transition:n.globeToMercatorTransition(lt.zoom),u_is_globe:+(lt.projection.name==="globe")}})(this,P,x,B,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.exported.devicePixelRatio,this.transform.height*n.exported.devicePixelRatio]);u.setFogUniformValues(a,ne)}}setTileLoadedFlag(a){this.tileLoaded=a}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const a=this.context.gl,u=a.createTexture();return a.bindTexture(a.TEXTURE_2D,u),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,a.drawingBufferWidth,a.drawingBufferHeight,0),u}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const a=this.style&&this.style.fog;return!!a&&a.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const a=this._backgroundTiles,u=this._backgroundTiles={},x=this.transform.coveringTiles({tileSize:512});for(const P of x)u[P.key]=a[P.key]||new n.Tile(P,512,this.transform.tileZoom,this);return u}clearBackgroundTiles(){this._backgroundTiles={}}}class bn{constructor(a=0,u=0,x=0,P=0){if(isNaN(a)||a<0||isNaN(u)||u<0||isNaN(x)||x<0||isNaN(P)||P<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=u,this.left=x,this.right=P}interpolate(a,u,x){return u.top!=null&&a.top!=null&&(this.top=n.number(a.top,u.top,x)),u.bottom!=null&&a.bottom!=null&&(this.bottom=n.number(a.bottom,u.bottom,x)),u.left!=null&&a.left!=null&&(this.left=n.number(a.left,u.left,x)),u.right!=null&&a.right!=null&&(this.right=n.number(a.right,u.right,x)),this}getCenter(a,u){const x=n.clamp((this.left+a-this.right)/2,0,a),P=n.clamp((this.top+u-this.bottom)/2,0,u);return new n.pointGeometry(x,P)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new bn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function On(_,a){const u=n.getColumn(_,3);n.fromQuat(_,a),n.setColumn(_,3,u)}function Jn(_,a){const u=n.identity$1([]);return n.rotateZ$1(u,u,-a),n.rotateX$1(u,u,-_),u}function mn(_,a){const u=[_[0],_[1],0],x=[a[0],a[1],0];if(n.length(u)>=1e-15){const ne=n.normalize([],u);n.scale$2(x,ne,n.dot(x,ne)),a[0]=x[0],a[1]=x[1]}const P=n.cross([],a,_);if(n.len(P)<1e-15)return null;const B=Math.atan2(-P[1],P[0]);return Jn(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),B)}class cs{constructor(a,u){this.position=a,this.orientation=u}get position(){return this._position}set position(a){if(a){const u=a instanceof n.MercatorCoordinate?a:new n.MercatorCoordinate(a[0],a[1],a[2]);this._renderWorldCopies&&(u.x=n.wrap(u.x,0,1)),this._position=u}else this._position=null}lookAtPoint(a,u){if(this.orientation=null,!this.position)return;const x=this._elevation?this._elevation.getAtPointOrZero(n.MercatorCoordinate.fromLngLat(a)):0,P=this.position,B=n.MercatorCoordinate.fromLngLat(a,x),ne=[B.x-P.x,B.y-P.y,B.z-P.z];u||(u=[0,0,1]),u[2]=Math.abs(u[2]),this.orientation=mn(ne,u)}setPitchBearing(a,u){this.orientation=Jn(n.degToRad(a),n.degToRad(-u))}}class fs{constructor(a,u){this._transform=n.identity([]),this.orientation=u,this.position=a}get mercatorPosition(){const a=this.position;return new n.MercatorCoordinate(a[0],a[1],a[2])}get position(){const a=n.getColumn(this._transform,3);return[a[0],a[1],a[2]]}set position(a){var u;a&&n.setColumn(this._transform,3,[(u=a)[0],u[1],u[2],1])}get orientation(){return this._orientation}set orientation(a){this._orientation=a||n.identity$1([]),a&&On(this._transform,this._orientation)}getPitchBearing(){const a=this.forward(),u=this.right();return{bearing:Math.atan2(-u[1],u[0]),pitch:Math.atan2(Math.sqrt(a[0]*a[0]+a[1]*a[1]),-a[2])}}setPitchBearing(a,u){this._orientation=Jn(a,u),On(this._transform,this._orientation)}forward(){const a=n.getColumn(this._transform,2);return[-a[0],-a[1],-a[2]]}up(){const a=n.getColumn(this._transform,1);return[-a[0],-a[1],-a[2]]}right(){const a=n.getColumn(this._transform,0);return[a[0],a[1],a[2]]}getCameraToWorld(a,u){const x=new Float64Array(16);return n.invert(x,this.getWorldToCamera(a,u)),x}getWorldToCameraPosition(a,u,x){const P=this.position;n.scale$2(P,P,-a);const B=new Float64Array(16);return n.fromScaling(B,[x,x,x]),n.translate(B,B,P),B[10]*=u,B}getWorldToCamera(a,u){const x=new Float64Array(16),P=new Float64Array(4),B=this.position;return n.conjugate(P,this._orientation),n.scale$2(B,B,-a),n.fromQuat(x,P),n.translate(x,x,B),x[1]*=-1,x[5]*=-1,x[9]*=-1,x[13]*=-1,x[8]*=u,x[9]*=u,x[10]*=u,x[11]*=u,x}getCameraToClipPerspective(a,u,x,P){const B=new Float64Array(16);return n.perspective(B,a,u,x,P),B}getDistanceToElevation(a,u=!1){const x=a===0?0:n.mercatorZfromAltitude(a,u?n.latFromMercatorY(this.position[1]):this.position[1]),P=this.forward();return(x-this.position[2])/P[2]}clone(){return new fs([...this.position],[...this.orientation])}}function Ys(_,a){const u=so(_.projection,_.zoom,_.width,_.height),x=function(B,ne,he,pe,Me){const Ee=new n.LngLat(he.lng-180*Co,he.lat),Re=new n.LngLat(he.lng+180*Co,he.lat),$e=B.project(Ee.lng,Ee.lat),Qe=B.project(Re.lng,Re.lat),et=-Math.atan2(Qe.y-$e.y,Qe.x-$e.x),rt=n.MercatorCoordinate.fromLngLat(he);rt.y=n.clamp(rt.y,-.999975,.999975);const Ye=rt.toLngLat(),Ze=B.project(Ye.lng,Ye.lat),lt=n.MercatorCoordinate.fromLngLat(Ye);lt.x+=Co;const tt=lt.toLngLat(),pt=B.project(tt.lng,tt.lat),Tt=jl(pt.x-Ze.x,pt.y-Ze.y,et),gt=n.MercatorCoordinate.fromLngLat(Ye);gt.y+=Co;const kt=gt.toLngLat(),Wt=B.project(kt.lng,kt.lat),Ft=jl(Wt.x-Ze.x,Wt.y-Ze.y,et),Dt=Math.abs(Tt.x)/Math.abs(Ft.y),pi=n.identity([]);n.rotateZ(pi,pi,-et*(1-(Me?0:pe)));const Nt=n.identity([]);return n.scale(Nt,Nt,[1,1-(1-Dt)*pe,1]),Nt[4]=-Ft.x/Ft.y*pe,n.rotateZ(Nt,Nt,et),n.multiply(Nt,pi,Nt),Nt}(_.projection,0,_.center,u,a),P=Mr(_);return n.scale(x,x,[P,P,1]),x}function Mr(_){const a=_.projection,u=so(_.projection,_.zoom,_.width,_.height),x=xs(a,_.center),P=xs(a,n.LngLat.convert(a.center));return Math.pow(2,x*u+(1-u)*P)}function so(_,a,u,x,P=1/0){const B=_.range;if(!B)return 0;const ne=Math.min(P,Math.max(u,x)),he=Math.log(ne/1024)/Math.LN2;return n.smoothstep(B[0]+he,B[1]+he,a)}const Co=1/4e4;function xs(_,a){const u=n.clamp(a.lat,-n.MAX_MERCATOR_LATITUDE,n.MAX_MERCATOR_LATITUDE),x=new n.LngLat(a.lng-180*Co,u),P=new n.LngLat(a.lng+180*Co,u),B=_.project(x.lng,u),ne=_.project(P.lng,u),he=n.MercatorCoordinate.fromLngLat(x),pe=n.MercatorCoordinate.fromLngLat(P),Me=ne.x-B.x,Ee=ne.y-B.y,Re=pe.x-he.x,$e=pe.y-he.y,Qe=Math.sqrt((Re*Re+$e*$e)/(Me*Me+Ee*Ee));return Math.log(Qe)/Math.LN2}function jl(_,a,u){const x=Math.cos(u),P=Math.sin(u);return{x:_*x-a*P,y:_*P+a*x}}class Ul{constructor(a,u,x,P,B,ne,he){this.tileSize=512,this._renderWorldCopies=B===void 0||B,this._minZoom=a||0,this._maxZoom=u||22,this._minPitch=x??0,this._maxPitch=P??60,this.setProjection(ne),this.setMaxBounds(he),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new bn,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new fs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const a=new Ul(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return a._elevation=this._elevation,a._centerAltitude=this._centerAltitude,a._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,a.tileSize=this.tileSize,a.mercatorFromTransition=this.mercatorFromTransition,a.width=this.width,a.height=this.height,a.cameraElevationReference=this.cameraElevationReference,a._center=this._center,a._setZoom(this.zoom),a._seaLevelZoom=this._seaLevelZoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._nearZ=this._nearZ,a._farZ=this._farZ,a._averageElevation=this._averageElevation,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._camera=this._camera.clone(),a._calcMatrices(),a.freezeTileCoverage=this.freezeTileCoverage,a.frustumCorners=this.frustumCorners,a}get elevation(){return this._elevation}set elevation(a){this._elevation!==a&&(this._elevation=a,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(a,u=!1){const x=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||x)&&this._updateCameraOnTerrain(),(a||x)&&this._constrainCamera(u),this._calcMatrices()}getProjection(){return n.pick(this.projection,["name","center","parallels"])}setProjection(a){this.projectionOptions=a||{name:"mercator"};const u=this.projection?this.getProjection():void 0;this.projection=n.getProjection(this.projectionOptions);const x=!T(u,this.getProjection());return x&&this._calcMatrices(),this.mercatorFromTransition=!1,x}setMercatorFromTransition(){const a=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.getProjection({name:"mercator"});const u=a!==this.projection.name;return u&&this._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get cameraWorldSize(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.pointGeometry(this.width,this.height)}get bearing(){return n.wrap(this.rotation,-180,180)}set bearing(a){this.rotation=a}get rotation(){return-this.angle/Math.PI*180}set rotation(a){const u=-a*Math.PI/180;var x;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(x=new n.ARRAY_TYPE(4),n.ARRAY_TYPE!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x),function(P,B,ne){var he=B[0],pe=B[1],Me=B[2],Ee=B[3],Re=Math.sin(ne),$e=Math.cos(ne);P[0]=he*$e+Me*Re,P[1]=pe*$e+Ee*Re,P[2]=he*-Re+Me*$e,P[3]=pe*-Re+Ee*$e}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const u=n.clamp(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const a=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/a)}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=n.degToRad(a),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(a){this._averageElevation=a,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(a){const u=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._setZoom(u),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(a){this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const a=this._elevation;this._centerAltitude=a.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=a.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const a=this._elevation,u=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],x=this.horizonLineFromTop();let P=0,B=0;for(let ne=0;ne<u.length;ne++){const he=new n.pointGeometry(u[ne][0]*this.width,x+u[ne][1]*(this.height-x)),pe=a.pointCoordinate(he);if(!pe)continue;const Me=1/Math.hypot(pe[0]-this._camera.position[0],pe[1]-this._camera.position[1]);P+=pe[3]*Me,B+=Me}return B===0?NaN:P/B}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const a=this._seaLevelZoom,u=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),x=this.pixelsPerMeter/this.worldSize*u,P=this._mercatorZfromZoom(a),B=this._mercatorZfromZoom(this._maxZoom),ne=Math.max(P-x,B);this._setZoom(this._zoomFromMercatorZ(ne))}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}computeZoomRelativeTo(a){const u=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,a.toAltitude()));let x;x=a.z<this._camera.position[2]?[u.x,u.y,u.z]:[a.x,a.y,a.z];const P=n.length(n.sub([],this._camera.position,x));return n.clamp(this._zoomFromMercatorZ(P),this._minZoom,this._maxZoom)}setFreeCameraOptions(a){if(!this.height||!a.position&&!a.orientation)return;this._updateCameraState();let u=!1;if(a.orientation&&!n.exactEquals(a.orientation,this._camera.orientation)&&(u=this._setCameraOrientation(a.orientation)),a.position){const x=[a.position.x,a.position.y,a.position.z];n.exactEquals$1(x,this._camera.position)||(this._setCameraPosition(x),u=!0)}u&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const a=this._camera.position,u=new cs;return u.position=new n.MercatorCoordinate(a[0],a[1],a[2]),u.orientation=this._camera.orientation,u._elevation=this.elevation,u._renderWorldCopies=this.renderWorldCopies,u}_setCameraOrientation(a){if(!n.length$1(a))return!1;n.normalize$1(a,a);const u=n.transformQuat([],[0,0,-1],a),x=n.transformQuat([],[0,-1,0],a);if(x[2]<0)return!1;const P=mn(u,x);return!!P&&(this._camera.orientation=P,!0)}_setCameraPosition(a){const u=this.zoomScale(this.minZoom)*this.tileSize,x=this.zoomScale(this.maxZoom)*this.tileSize,P=this.cameraToCenterDistance;a[2]=n.clamp(a[2],P/x,P/u),this._camera.position=a}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,u,x){this._unmodified=!1,this._edgeInsets.interpolate(a,u,x),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const u=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(a){const u=[new n.UnwrappedTileID(0,a)];if(this.renderWorldCopies){const x=this.pointCoordinate(new n.pointGeometry(0,0)),P=this.pointCoordinate(new n.pointGeometry(this.width,0)),B=this.pointCoordinate(new n.pointGeometry(this.width,this.height)),ne=this.pointCoordinate(new n.pointGeometry(0,this.height)),he=Math.floor(Math.min(x.x,P.x,B.x,ne.x)),pe=Math.floor(Math.max(x.x,P.x,B.x,ne.x)),Me=1;for(let Ee=he-Me;Ee<=pe+Me;Ee++)Ee!==0&&u.push(new n.UnwrappedTileID(Ee,a))}return u}coveringTiles(a){let u=this.coveringZoomLevel(a);const x=u,P=this.elevation&&!a.isTerrainDEM,B=this.projection.name==="mercator";if(a.minzoom!==void 0&&u<a.minzoom)return[];a.maxzoom!==void 0&&u>a.maxzoom&&(u=a.maxzoom);const ne=this.locationCoordinate(this.center),he=this.center.lat,pe=1<<u,Me=[pe*ne.x,pe*ne.y,0],Ee=this.projection.name==="globe",Re=!Ee,$e=n.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u,Re),Qe=Ee?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),et=pe*n.mercatorZfromAltitude(1,this.center.lat),rt=this._camera.position[2]/n.mercatorZfromAltitude(1,this.center.lat),Ye=[pe*Qe.x,pe*Qe.y,rt*(Re?1:et)],Ze=this.cameraToCenterDistance/a.tileSize*(a.roundZoom?1:.502),lt=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?u:0,tt=a.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,pt=a.isTerrainDEM?-tt:this._elevation?this._elevation.getMinElevationBelowMSL():0,Tt=this.projection.isReprojectedInTileSpace?Mr(this):1,gt=qt=>{const wi=new n.MercatorCoordinate(qt.x+25e-6,qt.y,qt.z),Rt=new n.MercatorCoordinate(qt.x,qt.y+25e-6,qt.z),Yt=qt.toLngLat(),Hi=wi.toLngLat(),nn=Rt.toLngLat(),Wi=this.locationCoordinate(Yt),pn=this.locationCoordinate(Hi),Rn=this.locationCoordinate(nn),sn=Math.hypot(pn.x-Wi.x,pn.y-Wi.y),Vi=Math.hypot(Rn.x-Wi.x,Rn.y-Wi.y);return Math.sqrt(sn*Vi)*Tt/25e-6},kt=qt=>{const di=tt,wi=pt;return{aabb:n.tileAABB(this,pe,0,0,0,qt,wi,di,this.projection),zoom:0,x:0,y:0,minZ:wi,maxZ:di,wrap:qt,fullyVisible:!1}},Wt=[];let Ft=[];const Dt=u,pi=a.reparseOverscaled?x:u,Nt=qt=>qt*qt,si=Nt((rt-this._centerAltitude)*et),Xt=qt=>{if(!this._elevation||!qt.tileID||!B)return;const di=this._elevation.getMinMaxForTile(qt.tileID),wi=qt.aabb;di?(wi.min[2]=di.min,wi.max[2]=di.max,wi.center[2]=(wi.min[2]+wi.max[2])/2):(qt.shouldSplit=vi(qt),qt.shouldSplit||(wi.min[2]=wi.max[2]=wi.center[2]=this._centerAltitude))},vi=qt=>{if(qt.zoom<lt)return!0;if(qt.zoom===Dt)return!1;if(qt.shouldSplit!=null)return qt.shouldSplit;const di=qt.aabb.distanceX(Ye),wi=qt.aabb.distanceY(Ye);let Rt=si,Yt=1;if(Ee){Rt=Nt(qt.aabb.distanceZ(Ye));const Wi=Math.pow(2,qt.zoom),pn=n.latFromMercatorY((qt.y+1)/Wi),Rn=n.latFromMercatorY(qt.y/Wi),sn=Math.min(Math.max(he,pn),Rn),Vi=n.circumferenceAtLatitude(sn)/n.circumferenceAtLatitude(he);if(Yt=sn===he?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Vi/this._mercatorScaleRatio),this.zoom<=n.GLOBE_ZOOM_THRESHOLD_MIN&&qt.zoom===Dt-1&&Vi>=.9)return!0}else if(P&&(Rt=Nt(qt.aabb.distanceZ(Ye)*et)),this.projection.isReprojectedInTileSpace&&x<=5){const Wi=Math.pow(2,qt.zoom),pn=gt(new n.MercatorCoordinate((qt.x+.5)/Wi,(qt.y+.5)/Wi));Yt=pn>.85?1:pn}const Hi=di*di+wi*wi+Rt,nn=Nt((1<<Dt-qt.zoom)*Ze*Yt*((Wi,pn)=>{if(pn*Nt(.707)<Wi)return 1;const Rn=Math.sqrt(pn/Wi);return Rn/(1.4144271570014144+(Math.pow(1.1,Rn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Rt,si),Hi));return Hi<nn};if(this.renderWorldCopies)for(let qt=1;qt<=3;qt++)Wt.push(kt(-qt)),Wt.push(kt(qt));for(Wt.push(kt(0));Wt.length>0;){const qt=Wt.pop(),di=qt.x,wi=qt.y;let Rt=qt.fullyVisible;if(!Rt){const Yt=qt.aabb.intersects($e);if(Yt===0)continue;Rt=Yt===2}if(qt.zoom!==Dt&&vi(qt))for(let Yt=0;Yt<4;Yt++){const Hi=(di<<1)+Yt%2,nn=(wi<<1)+(Yt>>1),Wi={aabb:B?qt.aabb.quadrant(Yt):n.tileAABB(this,pe,qt.zoom+1,Hi,nn,qt.wrap,qt.minZ,qt.maxZ,this.projection),zoom:qt.zoom+1,x:Hi,y:nn,wrap:qt.wrap,fullyVisible:Rt,tileID:void 0,shouldSplit:void 0,minZ:qt.minZ,maxZ:qt.maxZ};P&&!Ee&&(Wi.tileID=new n.OverscaledTileID(qt.zoom+1===Dt?pi:qt.zoom+1,qt.wrap,qt.zoom+1,Hi,nn),Xt(Wi)),Wt.push(Wi)}else{const Yt=qt.zoom===Dt?pi:qt.zoom;if(a.minzoom&&a.minzoom>Yt)continue;const Hi=Me[0]-(.5+di+(qt.wrap<<qt.zoom))*(1<<u-qt.zoom),nn=Me[1]-.5-wi,Wi=qt.tileID?qt.tileID:new n.OverscaledTileID(Yt,qt.wrap,qt.zoom,di,wi);Ft.push({tileID:Wi,distanceSq:Hi*Hi+nn*nn})}}if(this.fogCullDistSq){const qt=this.fogCullDistSq,di=this.horizonLineFromTop();Ft=Ft.filter(wi=>{const Rt=[0,0,0,1],Yt=[n.EXTENT,n.EXTENT,0,1],Hi=this.calculateFogTileMatrix(wi.tileID.toUnwrapped());n.transformMat4$1(Rt,Rt,Hi),n.transformMat4$1(Yt,Yt,Hi);const nn=n.getAABBPointSquareDist(Rt,Yt);if(nn===0)return!0;let Wi=!1;const pn=this._elevation;if(pn&&nn>qt&&di!==0){const Rn=this.calculateProjMatrix(wi.tileID.toUnwrapped());let sn;a.isTerrainDEM||(sn=pn.getMinMaxForTile(wi.tileID)),sn||(sn={min:pt,max:tt});const Vi=n.furthestTileCorner(this.rotation),Sr=[Vi[0]*n.EXTENT,Vi[1]*n.EXTENT,sn.max];n.transformMat4(Sr,Sr,Rn),Wi=(1-Sr[1])*this.height*.5<di}return nn<qt||Wi})}return Ft.sort((qt,di)=>qt.distanceSq-di.distanceSq).map(qt=>qt.tileID)}resize(a,u){this.width=a,this.height=u,this.pixelsToGLUnits=[2/a,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const u=n.clamp(a.lat,-n.MAX_MERCATOR_LATITUDE,n.MAX_MERCATOR_LATITUDE),x=this.projection.project(a.lng,u);return new n.pointGeometry(x.x*this.worldSize,x.y*this.worldSize)}unproject(a){return this.projection.unproject(a.x/this.worldSize,a.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(a,u){let x,P;const B=this.centerPoint;if(this.projection.name==="globe"){const he=this.worldSize;x=(u.x-B.x)/he,P=(u.y-B.y)/he}else{const he=this.pointCoordinate(u),pe=this.pointCoordinate(B);x=he.x-pe.x,P=he.y-pe.y}const ne=this.locationCoordinate(a);this.setLocation(new n.MercatorCoordinate(ne.x-x,ne.y-P))}setLocation(a){this.center=this.coordinateLocation(a),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(a){return this.projection.locationPoint(this,a)}locationPoint3D(a){return this.projection.locationPoint(this,a,!0)}pointLocation(a){return this.coordinateLocation(this.pointCoordinate(a))}pointLocation3D(a){return this.coordinateLocation(this.pointCoordinate3D(a))}locationCoordinate(a,u){const x=u?n.mercatorZfromAltitude(u,a.lat):void 0,P=this.projection.project(a.lng,a.lat);return new n.MercatorCoordinate(P.x,P.y,x)}coordinateLocation(a){return this.projection.unproject(a.x,a.y)}pointRayIntersection(a,u){const x=u??this._centerAltitude,P=[a.x,a.y,0,1],B=[a.x,a.y,1,1];n.transformMat4$1(P,P,this.pixelMatrixInverse),n.transformMat4$1(B,B,this.pixelMatrixInverse);const ne=B[3];n.scale$1(P,P,1/P[3]),n.scale$1(B,B,1/ne);const he=P[2],pe=B[2];return{p0:P,p1:B,t:he===pe?0:(x-he)/(pe-he)}}screenPointToMercatorRay(a){const u=[a.x,a.y,0,1],x=[a.x,a.y,1,1];return n.transformMat4$1(u,u,this.pixelMatrixInverse),n.transformMat4$1(x,x,this.pixelMatrixInverse),n.scale$1(u,u,1/u[3]),n.scale$1(x,x,1/x[3]),u[2]=n.mercatorZfromAltitude(u[2],this._center.lat)*this.worldSize,x[2]=n.mercatorZfromAltitude(x[2],this._center.lat)*this.worldSize,n.scale$1(u,u,1/this.worldSize),n.scale$1(x,x,1/this.worldSize),new n.Ray([u[0],u[1],u[2]],n.normalize([],n.sub([],x,u)))}rayIntersectionCoordinate(a){const{p0:u,p1:x,t:P}=a,B=n.mercatorZfromAltitude(u[2],this._center.lat),ne=n.mercatorZfromAltitude(x[2],this._center.lat);return new n.MercatorCoordinate(n.number(u[0],x[0],P)/this.worldSize,n.number(u[1],x[1],P)/this.worldSize,n.number(B,ne,P))}pointCoordinate(a,u=this._centerAltitude){return this.projection.pointCoordinate(this,a.x,a.y,u)}pointCoordinate3D(a){if(!this.elevation)return this.pointCoordinate(a);let u=this.projection.pointCoordinate3D(this,a.x,a.y);if(u)return new n.MercatorCoordinate(u[0],u[1],u[2]);let x=0,P=this.horizonLineFromTop();if(a.y>P)return this.pointCoordinate(a);const B=.02*P,ne=a.clone();for(let he=0;he<10&&P-x>B;he++){ne.y=n.number(x,P,.66);const pe=this.projection.pointCoordinate3D(this,ne.x,ne.y);pe?(P=ne.y,u=pe):x=ne.y}return u?new n.MercatorCoordinate(u[0],u[1],u[2]):this.pointCoordinate(a)}isPointAboveHorizon(a){return this.projection.isPointAboveHorizon(this,a)}_coordinatePoint(a,u){const x=u&&this.elevation?this.elevation.getAtPointOrZero(a,this._centerAltitude):this._centerAltitude,P=[a.x*this.worldSize,a.y*this.worldSize,x+a.toAltitude(),1];return n.transformMat4$1(P,P,this.pixelMatrix),P[3]>0?new n.pointGeometry(P[0]/P[3],P[1]/P[3]):new n.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getGlobeBounds(){const{top:a,left:u}=this._edgeInsets,x=this.height-this._edgeInsets.bottom,P=this.width-this._edgeInsets.right,B=this.pointCoordinate3D(new n.pointGeometry(u,a)),ne=this.pointCoordinate3D(new n.pointGeometry(P,a)),he=this.pointCoordinate3D(new n.pointGeometry(P,x)),pe=this.pointCoordinate3D(new n.pointGeometry(u,x));let Me=Math.min(B.x,pe.x),Ee=Math.max(ne.x,he.x),Re=Math.min(B.y,ne.y),$e=Math.max(pe.y,he.y);const Qe=Math.pow(2,-this.zoom)/16,et=(gt,kt,Wt,Ft)=>{const Dt=(gt+Wt)/2,pi=(kt+Ft)/2,Nt=new n.pointGeometry(Dt,pi),si=this.pointCoordinate3D(Nt),Xt=Math.max(0,Me-si.x,Re-si.y,si.x-Ee,si.y-$e);Me=Math.min(Me,si.x),Ee=Math.max(Ee,si.x),Re=Math.min(Re,si.y),$e=Math.max($e,si.y),Xt>Qe&&(et(gt,kt,Dt,pi),et(Dt,pi,Wt,Ft))};et(u,a,P,a),et(P,a,P,x),et(P,x,u,x),et(u,x,u,a);const[rt,Ye]=n.polesInViewport(this),Ze=rt||Ye,lt=rt?90:n.latFromMercatorY(Re),tt=Ze?180:n.lngFromMercatorX(Ee),pt=Ye?-90:n.latFromMercatorY($e),Tt=Ze?-180:n.lngFromMercatorX(Me);return new n.LngLatBounds(new n.LngLat(Tt,pt),new n.LngLat(tt,lt))}_getBounds(a,u){if(this.projection.name==="globe")return this._getGlobeBounds();const x=new n.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),P=new n.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),B=new n.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),ne=new n.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let he=this.pointCoordinate(x,a),pe=this.pointCoordinate(P,a);const Me=this.pointCoordinate(B,u),Ee=this.pointCoordinate(ne,u),Re=($e,Qe)=>(Qe.y-$e.y)/(Qe.x-$e.x);return he.y>1&&pe.y>=0?he=new n.MercatorCoordinate((1-Ee.y)/Re(Ee,he)+Ee.x,1):he.y<0&&pe.y<=1&&(he=new n.MercatorCoordinate(-Ee.y/Re(Ee,he)+Ee.x,0)),pe.y>1&&he.y>=0?pe=new n.MercatorCoordinate((1-Me.y)/Re(Me,pe)+Me.x,1):pe.y<0&&he.y<=1&&(pe=new n.MercatorCoordinate(-Me.y/Re(Me,pe)+Me.x,0)),new n.LngLatBounds().extend(this.coordinateLocation(he)).extend(this.coordinateLocation(pe)).extend(this.coordinateLocation(Ee)).extend(this.coordinateLocation(Me))}_getBounds3D(){const a=this.elevation;if(!a.visibleDemTiles.length||a.isUsingMockSource())return this._getBounds(0,0);const u=a.visibleDemTiles.reduce((x,P)=>{if(P.dem){const B=P.dem.tree;x.min=Math.min(x.min,B.minimums[0]),x.max=Math.max(x.max,B.maximums[0])}return x},{min:Number.MAX_VALUE,max:0});return this._getBounds(u.min*a.exaggeration(),u.max*a.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(a=!0){const u=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,x=this.height/2-u*(1-this._horizonShift);return a?Math.max(0,x):x}getMaxBounds(){return this.maxBounds}setMaxBounds(a){this.maxBounds=a,this.minLat=-n.MAX_MERCATOR_LATITUDE,this.maxLat=n.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,a&&(this.minLat=a.getSouth(),this.maxLat=a.getNorth(),this.minLng=a.getWest(),this.maxLng=a.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=n.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=n.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=n.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(a,u){return this.projection.createTileMatrix(this,u,a)}calculateDistanceTileData(a){const u=a.key,x=this._distanceTileDataCache;if(x[u])return x[u];const P=a.canonical,B=1/this.height,ne=this.cameraWorldSize,he=ne/this.zoomScale(P.z),pe=(P.x+Math.pow(2,P.z)*a.wrap)*he,Me=P.y*he,Ee=this.point;Ee.x*=ne/this.worldSize,Ee.y*=ne/this.worldSize;const Re=this.angle,$e=Math.sin(-Re),Qe=-Math.cos(-Re);return x[u]={bearing:[$e,Qe],center:[(Ee.x-pe)*B,(Ee.y-Me)*B],scale:he/n.EXTENT*B},x[u]}calculateFogTileMatrix(a){const u=a.key,x=this._fogTileMatrixCache;if(x[u])return x[u];const P=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,a);return n.multiply(P,this.worldToFogMatrix,P),x[u]=new Float32Array(P),x[u]}calculateProjMatrix(a,u=!1){const x=a.key,P=u?this._alignedProjMatrixCache:this._projMatrixCache;if(P[x])return P[x];const B=this.calculatePosMatrix(a,this.worldSize);return n.multiply(B,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:u?this.alignedProjMatrix:this.projMatrix,B),P[x]=new Float32Array(B),P[x]}calculatePixelsToTileUnitsMatrix(a){const u=a.tileID.key,x=this._pixelsToTileUnitsCache;if(x[u])return x[u];const P=function(B,ne){const{scale:he}=B.tileTransform,pe=he*n.EXTENT/(B.tileSize*Math.pow(2,ne.zoom-B.tileID.overscaledZ+B.tileID.canonical.z));return Me=new Float32Array(4),$e=(Ee=ne.inverseAdjustmentMatrix)[1],Qe=Ee[2],et=Ee[3],Ye=(Re=[pe,pe])[1],Me[0]=Ee[0]*(rt=Re[0]),Me[1]=$e*rt,Me[2]=Qe*Ye,Me[3]=et*Ye,Me;var Me,Ee,Re,$e,Qe,et,rt,Ye}(a,this);return x[u]=P,x[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const a=this._elevation;this._updateCameraState();const u=n.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(u),P=this._camera.forward(),B=n.mercatorZfromAltitude(1,this._center.lat);x[2]/=B,P[2]/=B,n.normalize(P,P);const ne=a.raycast(x,P,a.exaggeration());if(ne){const he=n.scaleAndAdd([],x,P,ne),pe=new n.MercatorCoordinate(he[0],he[1],n.mercatorZfromAltitude(he[2],n.latFromMercatorY(he[1]))),Me=(pe.z+n.length([pe.x-x[0],pe.y-x[1],pe.z-x[2]*B]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Me),this._centerAltitude=pe.toAltitude(),this._center=this.coordinateLocation(pe),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(a=!1){if(!this._elevation)return;const u=this._elevation,x=n.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,P=this._computeCameraPosition(x),B=u.getAtPointOrZero(new n.MercatorCoordinate(...P)),ne=this.pixelsPerMeter/this.worldSize*B,he=this._minimumHeightOverTerrain(),pe=P[2]-ne;if(pe<=he)if(pe<0||a){const Me=this.locationCoordinate(this._center,this._centerAltitude),Ee=[P[0],P[1],Me.z-P[2]],Re=n.length(Ee);Ee[2]-=(he-pe)/this._pixelsPerMercatorPixel;const $e=n.length(Ee);if($e===0)return;n.scale$2(Ee,Ee,Re/$e*this._pixelsPerMercatorPixel),this._camera.position=[P[0],P[1],Me.z*this._pixelsPerMercatorPixel-Ee[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||a){const $e=this.center;return $e.lat=n.clamp($e.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!a)&&($e.lng=n.clamp($e.lng,this.minLng,this.maxLng)),this.center=$e,void(this._constraining=!1)}const u=this._unmodified,{x,y:P}=this.point;let B=0,ne=x,he=P;const pe=this.width/2,Me=this.height/2,Ee=this.worldMinY*this.scale,Re=this.worldMaxY*this.scale;if(P-Me<Ee&&(he=Ee+Me),P+Me>Re&&(he=Re-Me),Re-Ee<this.height&&(B=Math.max(B,this.height/(Re-Ee)),he=(Re+Ee)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const $e=this.worldMinX*this.scale,Qe=this.worldMaxX*this.scale,et=this.worldSize/2-($e+Qe)/2;ne=(x+et+this.worldSize)%this.worldSize-et,ne-pe<$e&&(ne=$e+pe),ne+pe>Qe&&(ne=Qe-pe),Qe-$e<this.width&&(B=Math.max(B,this.width/(Qe-$e)),ne=(Qe+$e)/2)}ne===x&&he===P||(this.center=this.unproject(new n.pointGeometry(ne,he))),B&&(this.zoom+=this.scaleZoom(B)),this._constrainCamera(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){let a=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(a=Math.max(a,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),a}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,u=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.mercatorZfromAltitude(1,this.center.lat)/n.mercatorZfromAltitude(1,n.GLOBE_SCALE_MATCH_LATITUDE));const x=so(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,x),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const P=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?u:1),B=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);B[8]=2*-a.x/this.width,B[9]=2*a.y/this.height;let ne=n.mul([],B,P);if(this.projection.isReprojectedInTileSpace){const Tt=this.locationCoordinate(this.center),gt=n.identity([]);n.translate(gt,gt,[Tt.x*this.worldSize,Tt.y*this.worldSize,0]),n.multiply(gt,gt,Ys(this)),n.translate(gt,gt,[-Tt.x*this.worldSize,-Tt.y*this.worldSize,0]),n.multiply(ne,ne,gt),this.inverseAdjustmentMatrix=function(kt){const Wt=Ys(kt,!0);return N([],[Wt[0],Wt[1],Wt[4],Wt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=n.scale([],ne,[this.worldSize,this.worldSize,this.worldSize/u,1]),this.projMatrix=ne,this.invProjMatrix=n.invert(new Float64Array(16),this.projMatrix);const he=n.invert([],B);this.frustumCorners=n.FrustumCorners.fromInvProjectionMatrix(he,this.horizonLineFromTop(),this.height);const pe=new Float32Array(16);n.identity(pe),n.scale(pe,pe,[1,-1,1]),n.rotateX(pe,pe,this._pitch),n.rotateZ(pe,pe,this.angle);const Me=n.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Ee=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Me[8]=2*-a.x/this.width,Me[9]=2*(a.y+Ee)/this.height,this.skyboxMatrix=n.multiply(pe,Me,pe);const Re=this.point,$e=Re.x,Qe=Re.y,et=this.width%2/2,rt=this.height%2/2,Ye=Math.cos(this.angle),Ze=Math.sin(this.angle),lt=$e-Math.round($e)+Ye*et+Ze*rt,tt=Qe-Math.round(Qe)+Ye*rt+Ze*et,pt=new Float64Array(ne);if(n.translate(pt,pt,[lt>.5?lt-1:lt,tt>.5?tt-1:tt,0]),this.alignedProjMatrix=pt,ne=n.create(),n.scale(ne,ne,[this.width/2,-this.height/2,1]),n.translate(ne,ne,[1,-1,0]),this.labelPlaneMatrix=ne,ne=n.create(),n.scale(ne,ne,[1,-1,1]),n.translate(ne,ne,[-1,-1,0]),n.scale(ne,ne,[2/this.width,2/this.height,1]),this.glCoordMatrix=ne,this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},ne=n.invert(new Float64Array(16),this.pixelMatrix),!ne)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=ne,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.calculateGlobeMatrix(this);const Tt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.transformMat4(Tt,Tt,P),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=ne;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const a=this.cameraWorldSizeForFog,u=this.cameraPixelsPerMeter,x=this._camera.position,P=1/this.height/this._pixelsPerMercatorPixel,B=[a,a,u];n.scale$2(B,B,P),n.scale$2(x,x,-1),n.multiply$2(x,x,B);const ne=n.create();n.translate(ne,ne,x),n.scale(ne,ne,B),this.mercatorFogMatrix=ne,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(a,u,P)}_computeCameraPosition(a){const u=(a=a||this.pixelsPerMeter)/this.pixelsPerMeter,x=this._camera.forward(),P=this.point,B=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*u-a/this.worldSize*this._centerAltitude;return[P.x/this.worldSize-x[0]*B,P.y/this.worldSize-x[1]*B,a/this.worldSize*this._centerAltitude-x[2]*B]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(a){const u=this._maxCameraBoundsDistance()*Math.cos(this._pitch),x=this._camera.position[2],P=a[2];let B=1;this.projection.wrap&&(this.center=this.center.wrap()),P>0&&(B=Math.min((u-x)/P,1)),this._camera.position=n.scaleAndAdd([],this._camera.position,a,B),this._updateStateFromCamera()}_updateStateFromCamera(){const a=this._camera.position,u=this._camera.forward(),{pitch:x,bearing:P}=this._camera.getPitchBearing(),B=n.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,ne=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.degToRad(this._maxPitch)),he=Math.max((a[2]-B)/Math.cos(x),ne),pe=this._zoomFromMercatorZ(he);n.scaleAndAdd(a,a,u,he),this._pitch=n.clamp(x,n.degToRad(this.minPitch),n.degToRad(this.maxPitch)),this.angle=n.wrap(P,-Math.PI,Math.PI),this._setZoom(n.clamp(pe,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.MercatorCoordinate(a[0],a[1],a[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(a){return Math.pow(2,a)*this.tileSize}_mercatorZfromZoom(a){return this.cameraToCenterDistance/this._worldSizeFromZoom(a)}_minimumHeightOverTerrain(){const a=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(a)}_zoomFromMercatorZ(a){return this.scaleZoom(this.cameraToCenterDistance/(a*this.tileSize))}zoomFromMercatorZAdjusted(a){const u=ne=>{const he=this.getCameraToCenterDistance(this.projection,ne);return this.scaleZoom(he/(a*this.tileSize))};let x,P=u(this.zoom),B=Math.abs(P-u(P));for(;x!==B;)P=u(P),x=B,B=Math.abs(P-u(P));return P}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(a,u){const x=Math.min(a.x,u.x),P=Math.max(a.x,u.x),B=Math.min(a.y,u.y),ne=Math.max(a.y,u.y);if(B<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const he=[new n.pointGeometry(x,B),new n.pointGeometry(P,ne),new n.pointGeometry(x,ne),new n.pointGeometry(P,B)],pe=this.renderWorldCopies?-3:0,Me=this.renderWorldCopies?4:1;for(const Ee of he){const Re=this.pointRayIntersection(Ee);if(Re.t<0)return!0;const $e=this.rayIntersectionCoordinate(Re);if($e.x<pe||$e.y<0||$e.x>Me||$e.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.pointGeometry(0,0),new n.pointGeometry(this.width,this.height))}zoomDeltaToMovement(a,u){const x=n.length(n.sub([],this._camera.position,a)),P=this._zoomFromMercatorZ(x)+u;return x-this._mercatorZfromZoom(P)}getCameraPoint(){if(this.projection.name==="globe"){const a=function([u,x,P],B){const ne=[u,x,P,1];n.transformMat4$1(ne,ne,B);const he=ne[3]=Math.max(ne[3],1e-6);return ne[0]/=he,ne[1]/=he,ne[2]/=he,ne}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.pointGeometry(a[0],a[1])}{const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.pointGeometry(0,a))}}getCameraToCenterDistance(a,u=this.zoom){const x=so(a,u,this.width,this.height,1024),P=a.pixelSpaceConversion(this.center.lat,this.worldSize,x);return .5/Math.tan(.5*this._fov)*this.height*P}getWorldToCameraMatrix(){const a=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.multiply(a,a,this.globeMatrix),a}}function ud(_,a){let u=!1,x=null;const P=()=>{x=null,u&&(_(),x=setTimeout(P,a),u=!1)};return()=>(u=!0,x||P(),x)}class Gi{constructor(a){this._hashName=a&&encodeURIComponent(a),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ud(this._updateHashUnthrottled.bind(this),300)}addTo(a){return this._map=a,n.window.addEventListener("hashchange",this._onHashChange,!1),a.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),n.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const a=this._map;if(!a)return"";const u=xa(a);if(this._hashName){const x=this._hashName;let P=!1;const B=n.window.location.hash.slice(1).split("&").map(ne=>{const he=ne.split("=")[0];return he===x?(P=!0,`${he}=${u}`):ne}).filter(ne=>ne);return P||B.push(`${x}=${u}`),`#${B.join("&")}`}return`#${u}`}_getCurrentHash(){const a=n.window.location.hash.replace("#","");if(this._hashName){let u;return a.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(u=x)}),(u&&u[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._map;if(!a)return!1;const u=this._getCurrentHash();if(u.length>=3&&!u.some(x=>isNaN(x))){const x=a.dragRotate.isEnabled()&&a.touchZoomRotate.isEnabled()?+(u[3]||0):a.getBearing();return a.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:x,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){const a=n.window.location.href.replace(/(#.+)?$/,this.getHashString());n.window.history.replaceState(n.window.history.state,null,a)}}function xa(_,a){const u=_.getCenter(),x=Math.round(100*_.getZoom())/100,P=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,P),ne=Math.round(u.lng*B)/B,he=Math.round(u.lat*B)/B,pe=_.getBearing(),Me=_.getPitch();let Ee=a?`/${ne}/${he}/${x}`:`${x}/${he}/${ne}`;return(pe||Me)&&(Ee+="/"+Math.round(10*pe)/10),Me&&(Ee+=`/${Math.round(Me)}`),Ee}const bc={linearity:.3,easing:n.bezier(0,0,.3,1)},pd=n.extend({deceleration:2500,maxSpeed:1400},bc),hu=n.extend({deceleration:20,maxSpeed:1400},bc),kh=n.extend({deceleration:1e3,maxSpeed:360},bc),vp=n.extend({deceleration:1e3,maxSpeed:90},bc);class du{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.exported.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,u=n.exported.now();for(;a.length>0&&u-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new n.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)u.zoom+=B.zoomDelta||0,u.bearing+=B.bearingDelta||0,u.pitch+=B.pitchDelta||0,B.panDelta&&u.pan._add(B.panDelta),B.around&&(u.around=B.around),B.pinchAround&&(u.pinchAround=B.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,P={};if(u.pan.mag()){const B=ns(u.pan.mag(),x,n.extend({},pd,a||{}));P.offset=u.pan.mult(B.amount/u.pan.mag()),P.center=this._map.transform.center,Ph(P,B)}if(u.zoom){const B=ns(u.zoom,x,hu);P.zoom=this._map.transform.zoom+B.amount,Ph(P,B)}if(u.bearing){const B=ns(u.bearing,x,kh);P.bearing=this._map.transform.bearing+n.clamp(B.amount,-179,179),Ph(P,B)}if(u.pitch){const B=ns(u.pitch,x,vp);P.pitch=this._map.transform.pitch+B.amount,Ph(P,B)}if(P.zoom||P.bearing){const B=u.pinchAround===void 0?u.around:u.pinchAround;P.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),P.noMoveStart=!0,P}}function Ph(_,a){(!_.duration||_.duration<a.duration)&&(_.duration=a.duration,_.easing=a.easing)}function ns(_,a,u){const{maxSpeed:x,linearity:P,deceleration:B}=u,ne=n.clamp(_*P/(a/1e3),-x,x),he=Math.abs(ne)/(B*P);return{easing:u.easing,duration:1e3*he,amount:ne*(he/2)}}class Nr extends n.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,x,P={}){const B=U(u.getCanvasContainer(),x),ne=u.unproject(B);super(a,n.extend({point:B,lngLat:ne,originalEvent:x},P)),this._defaultPrevented=!1,this.target=u}}class fd extends n.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,x){const P=a==="touchend"?x.changedTouches:x.touches,B=C(u.getCanvasContainer(),P),ne=B.map(pe=>u.unproject(pe)),he=B.reduce((pe,Me,Ee,Re)=>pe.add(Me.div(Re.length)),new n.pointGeometry(0,0));super(a,{points:B,point:he,lngLats:ne,lngLat:u.unproject(he),originalEvent:x}),this._defaultPrevented=!1}}class Dh extends n.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,x){super(a,{originalEvent:x}),this._defaultPrevented=!1}}class Hf{constructor(a,u){this._map=a,this._clickTolerance=u.clickTolerance}reset(){this._mousedownPos=void 0}wheel(a){return this._firePreventable(new Dh(a.type,this._map,a))}mousedown(a,u){return this._mousedownPos=u,this._firePreventable(new Nr(a.type,this._map,a))}mouseup(a){this._map.fire(new Nr(a.type,this._map,a))}preclick(a){const u=n.extend({},a);u.type="preclick",this._map.fire(new Nr(u.type,this._map,u))}click(a,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||(this.preclick(a),this._map.fire(new Nr(a.type,this._map,a)))}dblclick(a){return this._firePreventable(new Nr(a.type,this._map,a))}mouseover(a){this._map.fire(new Nr(a.type,this._map,a))}mouseout(a){this._map.fire(new Nr(a.type,this._map,a))}touchstart(a){return this._firePreventable(new fd(a.type,this._map,a))}touchmove(a){this._map.fire(new fd(a.type,this._map,a))}touchend(a){this._map.fire(new fd(a.type,this._map,a))}touchcancel(a){this._map.fire(new fd(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Im{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(a){this._map.fire(new Nr(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Nr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._map.fire(new Nr(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class uu{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,u){this.isEnabled()&&a.shiftKey&&a.button===0&&(M(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(a,u){if(!this._active)return;const x=u,P=this._startPos,B=this._lastPos;if(!P||!B||B.equals(x)||!this._box&&x.dist(P)<this._clickTolerance)return;this._lastPos=x,this._box||(this._box=W("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const ne=Math.min(P.x,x.x),he=Math.max(P.x,x.x),pe=Math.min(P.y,x.y),Me=Math.max(P.y,x.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${ne}px,${pe}px)`,this._box.style.width=he-ne+"px",this._box.style.height=Me-pe+"px")})}mouseupWindow(a,u){if(!this._active)return;const x=this._startPos,P=u;if(x&&a.button===0){if(this.reset(),G(),x.x!==P.x||x.y!==P.y)return this._map.fire(new n.Event("boxzoomend",{originalEvent:a})),{cameraAnimation:B=>B.fitScreenCoordinates(x,P,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",a)}}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),S(),delete this._startPos,delete this._lastPos}_fireEvent(a,u){return this._map.fire(new n.Event(a,{originalEvent:u}))}}function ol(_,a){const u={};for(let x=0;x<_.length;x++)u[_[x].identifier]=a[x];return u}class md{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(a,u,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=a.timeStamp),x.length===this.numTouches&&(this.centroid=function(P){const B=new n.pointGeometry(0,0);for(const ne of P)B._add(ne);return B.div(P.length)}(u),this.touches=ol(x,u)))}touchmove(a,u,x){if(this.aborted||!this.centroid)return;const P=ol(x,u);for(const B in this.touches){const ne=this.touches[B],he=P[B];(!he||he.dist(ne)>30)&&(this.aborted=!0)}}touchend(a,u,x){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const P=!this.aborted&&this.centroid;if(this.reset(),P)return P}}}class Gl{constructor(a){this.singleTap=new md(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(a,u,x){this.singleTap.touchstart(a,u,x)}touchmove(a,u,x){this.singleTap.touchmove(a,u,x)}touchend(a,u,x){const P=this.singleTap.touchend(a,u,x);if(P){const B=a.timeStamp-this.lastTime<500,ne=!this.lastTap||this.lastTap.dist(P)<30;if(B&&ne||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=P,this.count===this.numTaps)return this.reset(),P}}}class Ih{constructor(){this._zoomIn=new Gl({numTouches:1,numTaps:2}),this._zoomOut=new Gl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,u,x){this._zoomIn.touchstart(a,u,x),this._zoomOut.touchstart(a,u,x)}touchmove(a,u,x){this._zoomIn.touchmove(a,u,x),this._zoomOut.touchmove(a,u,x)}touchend(a,u,x){const P=this._zoomIn.touchend(a,u,x),B=this._zoomOut.touchend(a,u,x);return P?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ne=>ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(P)},{originalEvent:a})}):B?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ne=>ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject(B)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const wc={0:1,2:2};class Tc{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(a,u){return!1}_move(a,u){return{}}mousedown(a,u){if(this._lastPoint)return;const x=ie(a);this._correctButton(a,x)&&(this._lastPoint=u,this._eventButton=x)}mousemoveWindow(a,u){const x=this._lastPoint;if(x){if(a.preventDefault(),this._eventButton!=null&&function(P,B){const ne=wc[B];return P.buttons===void 0||(P.buttons&ne)!==ne}(a,this._eventButton))this.reset();else if(this._moved||!(u.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(x,u)}}mouseupWindow(a){this._lastPoint&&ie(a)===this._eventButton&&(this._moved&&G(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kc extends Tc{mousedown(a,u){super.mousedown(a,u),this._lastPoint&&(this._active=!0)}_correctButton(a,u){return u===0&&!a.ctrlKey}_move(a,u){return{around:u,panDelta:u.sub(a)}}}class xp extends Tc{_correctButton(a,u){return u===0&&a.ctrlKey||u===2}_move(a,u){const x=.8*(u.x-a.x);if(x)return this._active=!0,{bearingDelta:x}}contextmenu(a){a.preventDefault()}}class bp extends Tc{_correctButton(a,u){return u===0&&a.ctrlKey||u===2}_move(a,u){const x=-.5*(u.y-a.y);if(x)return this._active=!0,{pitchDelta:x}}contextmenu(a){a.preventDefault()}}class Wf{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset(),n.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.pointGeometry(0,0)}touchstart(a,u,x){return this._calculateTransform(a,u,x)}touchmove(a,u,x){if(this._active&&!(x.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(x.length===1&&!n.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return a.cancelable&&a.preventDefault(),this._calculateTransform(a,u,x)}}touchend(a,u,x){this._calculateTransform(a,u,x),this._active&&x.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,u,x){x.length>0&&(this._active=!0);const P=ol(x,u),B=new n.pointGeometry(0,0),ne=new n.pointGeometry(0,0);let he=0;for(const Me in P){const Ee=P[Me],Re=this._touches[Me];Re&&(B._add(Ee),ne._add(Ee.sub(Re)),he++,P[Me]=Ee)}if(this._touches=P,he<this._minTouches||!ne.mag())return;const pe=ne.div(he);return this._sum._add(pe),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(he),panDelta:pe}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=W("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class pu{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(a){}_move(a,u,x){return{}}touchstart(a,u,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([u[0],u[1]]))}touchmove(a,u,x){const P=this._firstTwoTouches;if(!P)return;a.preventDefault();const[B,ne]=P,he=Vl(x,u,B),pe=Vl(x,u,ne);if(!he||!pe)return;const Me=this._aroundCenter?null:he.add(pe).div(2);return this._move([he,pe],Me,a)}touchend(a,u,x){if(!this._firstTwoTouches)return;const[P,B]=this._firstTwoTouches,ne=Vl(x,u,P),he=Vl(x,u,B);ne&&he||(this._active&&G(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Vl(_,a,u){for(let x=0;x<_.length;x++)if(_[x].identifier===u)return a[x]}function Lh(_,a){return Math.log(_/a)/Math.LN2}class Oh extends pu{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,u){const x=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Lh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Lh(this._distance,x),pinchAround:u}}}function wp(_,a){return 180*_.angleWith(a)/Math.PI}class qe extends pu{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,u){const x=this._vector;if(this._vector=a[0].sub(a[1]),x&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:wp(this._vector,x),pinchAround:u}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const u=25/(Math.PI*this._minDiameter)*360,x=this._startVector;if(!x)return!1;const P=wp(a,x);return Math.abs(P)<u}}function $l(_){return Math.abs(_.y)>Math.abs(_.x)}class gd extends pu{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(a){this._lastPoints=a,$l(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,u,x){const P=this._lastPoints;if(!P)return;const B=a[0].sub(P[0]),ne=a[1].sub(P[1]);return this._map._cooperativeGestures&&!n.isFullscreen()&&x.touches.length<3||(this._valid=this.gestureBeginsVertically(B,ne,x.timeStamp),!this._valid)?void 0:(this._lastPoints=a,this._active=!0,{pitchDelta:(B.y+ne.y)/2*-.5})}gestureBeginsVertically(a,u,x){if(this._valid!==void 0)return this._valid;const P=a.mag()>=2,B=u.mag()>=2;if(!P&&!B)return;if(!P||!B)return this._firstMove==null&&(this._firstMove=x),x-this._firstMove<100&&void 0;const ne=a.y>0==u.y>0;return $l(a)&&$l(u)&&ne}}const sa={panStep:100,bearingStep:15,pitchStep:10};class En{constructor(){const a=sa;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let u=0,x=0,P=0,B=0,ne=0;switch(a.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:a.shiftKey?x=-1:(a.preventDefault(),B=-1);break;case 39:a.shiftKey?x=1:(a.preventDefault(),B=1);break;case 38:a.shiftKey?P=1:(a.preventDefault(),ne=-1);break;case 40:a.shiftKey?P=-1:(a.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(x=0,P=0),{cameraAnimation:he=>{const pe=he.getZoom();he.easeTo({duration:300,easeId:"keyboardHandler",easing:Lm,zoom:u?Math.round(pe)+u*(a.shiftKey?2:1):pe,bearing:he.getBearing()+x*this._bearingStep,pitch:he.getPitch()+P*this._pitchStep,offset:[-B*this._panStep,-ne*this._panStep],center:he.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Lm(_){return _*(2-_)}const Tp=4.000244140625;class Om{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,n.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(a.ctrlKey||a.metaKey||this.isZooming()||n.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let u=a.deltaMode===n.window.WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const x=n.exported.now(),P=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,u!==0&&u%Tp==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":P>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(P*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),a.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=a,this._delta-=u,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=U(this._el,a);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:u,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;this._type==="wheel"&&a.projection.wrap&&(a._center.lng>=180||a._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const u=()=>a._terrainEnabled()&&this._aroundCoord?a.computeZoomRelativeTo(this._aroundCoord):a.zoom;if(this._delta!==0){const pe=this._type==="wheel"&&Math.abs(this._delta)>Tp?this._wheelZoomRate:this._defaultZoomRate;let Me=2/(1+Math.exp(-Math.abs(this._delta*pe)));this._delta<0&&Me!==0&&(Me=1/Me);const Ee=u(),Re=Math.pow(2,Ee),$e=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):Re;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom($e*Me))),this._type==="wheel"&&(this._startZoom=Ee,this._easing=this._smoothOutEasing(200)),this._delta=0}const x=typeof this._targetZoom=="number"?this._targetZoom:u(),P=this._startZoom,B=this._easing;let ne,he=!1;if(this._type==="wheel"&&P&&B){const pe=Math.min((n.exported.now()-this._lastWheelEventTime)/200,1),Me=B(pe);ne=n.number(P,x,Me),pe<1?this._frameId||(this._frameId=!0):he=!0}else ne=x,he=!0;return this._active=!0,he&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!he,zoomDelta:ne-u(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let u=n.ease;if(this._prevEase){const x=this._prevEase,P=(n.exported.now()-x.start)/x.duration,B=x.easing(P+.01)-x.easing(P),ne=.27/Math.sqrt(B*B+1e-4)*.01,he=Math.sqrt(.0729-ne*ne);u=n.bezier(ne,he,.25,1)}return this._prevEase={start:n.exported.now(),duration:a,easing:u},u}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=W("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(n.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Jc{constructor(a,u){this._clickZoom=a,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Hl{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(a,u){return a.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:x.getZoom()+(a.shiftKey?-1:1),around:x.unproject(u)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yf{constructor(){this._tap=new Gl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(a,u,x){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=u[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(a,u,x))}touchmove(a,u,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const P=u[0],B=P.y-this._swipePoint.y;return this._swipePoint=P,a.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(a,u,x)}touchend(a,u,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(a,u,x)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rh{constructor(a,u,x){this._el=a,this._mousePan=u,this._touchPan=x}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class al{constructor(a,u,x){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=u,this._mousePitch=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class fu{constructor(a,u,x,P){this._el=a,this._touchZoom=u,this._touchRotate=x,this._tapDragZoom=P,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Bi=_=>_.zoom||_.drag||_.pitch||_.rotate;class Xf extends n.Event{}class qf{constructor(){this.constants=[1,1,.01],this.radius=0}setup(a,u){const x=n.sub([],u,a);this.radius=n.length(x[2]<0?n.div([],x,this.constants):[x[0],x[1],0])}projectRay(a){n.div(a,a,this.constants),n.normalize(a,a),n.mul$1(a,a,this.constants);const u=n.scale$2([],a,this.radius);if(u[2]>0){const x=n.scale$2([],[0,0,1],n.dot(u,[0,0,1])),P=n.scale$2([],n.normalize([],[u[0],u[1],0]),this.radius),B=n.add([],u,n.scale$2([],n.sub([],n.add([],P,x),u),2));u[0]=B[0],u[1]=B[1]}return u}}function Sc(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class _d{constructor(a,u){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new du(a),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new qf,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(u),n.bindAll(["handleEvent","handleWindowEvent"],this);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[n.window.document,"mousemove",{capture:!0}],[n.window.document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[n.window,"blur",void 0]];for(const[P,B,ne]of this._listeners)P.addEventListener(B,P===n.window.document?this.handleWindowEvent:this.handleEvent,ne)}destroy(){for(const[a,u,x]of this._listeners)a.removeEventListener(u,a===n.window.document?this.handleWindowEvent:this.handleEvent,x)}_addDefaultHandlers(a){const u=this._map,x=u.getCanvasContainer();this._add("mapEvent",new Hf(u,a));const P=u.boxZoom=new uu(u,a);this._add("boxZoom",P);const B=new Ih,ne=new Hl;u.doubleClickZoom=new Jc(ne,B),this._add("tapZoom",B),this._add("clickZoom",ne);const he=new Yf;this._add("tapDragZoom",he);const pe=u.touchPitch=new gd(u);this._add("touchPitch",pe);const Me=new xp(a),Ee=new bp(a);u.dragRotate=new al(a,Me,Ee),this._add("mouseRotate",Me,["mousePitch"]),this._add("mousePitch",Ee,["mouseRotate"]);const Re=new Kc(a),$e=new Wf(u,a);u.dragPan=new Rh(x,Re,$e),this._add("mousePan",Re),this._add("touchPan",$e,["touchZoom","touchRotate"]);const Qe=new qe,et=new Oh;u.touchZoomRotate=new fu(x,et,Qe,he),this._add("touchRotate",Qe,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Im(u));const rt=u.scrollZoom=new Om(u,this);this._add("scrollZoom",rt,["mousePan"]);const Ye=u.keyboard=new En;this._add("keyboard",Ye);for(const Ze of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[Ze]&&u[Ze].enable(a[Ze])}_add(a,u,x){this._handlers.push({handlerName:a,handler:u,allowed:x}),this._handlersById[a]=u}stop(a){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Bi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(a,u,x){for(const P in a)if(P!==x&&(!u||u.indexOf(P)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const u=[];for(const x of a)this._el.contains(x.target)&&u.push(x);return u}handleEvent(a,u){this._updatingCamera=!0;const x=a.type==="renderFrame",P=x?void 0:a,B={needsRenderFrame:!1},ne={},he={},pe=a.touches?this._getMapTouches(a.touches):void 0,Me=pe?C(this._el,pe):x?void 0:U(this._el,a);for(const{handlerName:$e,handler:Qe,allowed:et}of this._handlers){if(!Qe.isEnabled())continue;let rt;this._blockedByActive(he,et,$e)?Qe.reset():Qe[u||a.type]&&(rt=Qe[u||a.type](a,Me,pe),this.mergeHandlerResult(B,ne,rt,$e,P),rt&&rt.needsRenderFrame&&this._triggerRenderFrame()),(rt||Qe.isActive())&&(he[$e]=Qe)}const Ee={};for(const $e in this._previousActiveHandlers)he[$e]||(Ee[$e]=P);this._previousActiveHandlers=he,(Object.keys(Ee).length||Sc(B))&&(this._changes.push([B,ne,Ee]),this._triggerRenderFrame()),(Object.keys(he).length||Sc(B))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Re}=B;Re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Re(this._map))}mergeHandlerResult(a,u,x,P,B){if(!x)return;n.extend(a,x);const ne={handlerName:P,originalEvent:x.originalEvent||B};x.zoomDelta!==void 0&&(u.zoom=ne),x.panDelta!==void 0&&(u.drag=ne),x.pitchDelta!==void 0&&(u.pitch=ne),x.bearingDelta!==void 0&&(u.rotate=ne)}_applyChanges(){const a={},u={},x={};for(const[P,B,ne]of this._changes)P.panDelta&&(a.panDelta=(a.panDelta||new n.pointGeometry(0,0))._add(P.panDelta)),P.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+P.zoomDelta),P.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+P.bearingDelta),P.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+P.pitchDelta),P.around!==void 0&&(a.around=P.around),P.aroundCoord!==void 0&&(a.aroundCoord=P.aroundCoord),P.pinchAround!==void 0&&(a.pinchAround=P.pinchAround),P.noInertia&&(a.noInertia=P.noInertia),n.extend(u,B),n.extend(x,ne);this._updateMapTransform(a,u,x),this._changes=[]}_updateMapTransform(a,u,x){const P=this._map,B=P.transform,ne=lt=>[lt.x,lt.y,lt.z];if((lt=>{const tt=this._eventsInProgress.drag;return tt&&!this._handlersById[tt.handlerName].isActive()})()&&!Sc(a)){const lt=B.zoom;B.cameraElevationReference="sea",B.recenterOnTerrain(),B.cameraElevationReference="ground",lt!==B.zoom&&this._map._update(!0)}if(B._isCameraConstrained&&P._stop(!0),!Sc(a))return void this._fireEvents(u,x,!0);let{panDelta:he,zoomDelta:pe,bearingDelta:Me,pitchDelta:Ee,around:Re,aroundCoord:$e,pinchAround:Qe}=a;B._isCameraConstrained&&(pe>0&&(pe=0),B._isCameraConstrained=!1),Qe!==void 0&&(Re=Qe),(lt=>u.drag&&!this._eventsInProgress.drag)()&&Re&&(this._dragOrigin=ne(B.pointCoordinate3D(Re)),this._trackingEllipsoid.setup(B._camera.position,this._dragOrigin)),B.cameraElevationReference="sea",P._stop(!0),Re=Re||P.transform.centerPoint,Me&&(B.bearing+=Me),Ee&&(B.pitch+=Ee),B._updateCameraState();const et=[0,0,0];if(he)if(B.projection.name==="mercator"){const lt=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(Re).dir),tt=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(Re.sub(he)).dir);et[0]=tt[0]-lt[0],et[1]=tt[1]-lt[1]}else{const lt=B.pointCoordinate(Re);if(B.projection.name==="globe"){he=he.rotate(-B.angle);const tt=B._pixelsPerMercatorPixel/B.worldSize;et[0]=-he.x*n.mercatorScale(n.latFromMercatorY(lt.y))*tt,et[1]=-he.y*n.mercatorScale(B.center.lat)*tt}else{const tt=B.pointCoordinate(Re.sub(he));lt&&tt&&(et[0]=tt.x-lt.x,et[1]=tt.y-lt.y)}}const rt=B.zoom,Ye=[0,0,0];if(pe){const lt=ne($e||B.pointCoordinate3D(Re)),tt={dir:n.normalize([],n.sub([],lt,B._camera.position))};if(tt.dir[2]<0){const pt=B.zoomDeltaToMovement(lt,pe);n.scale$2(Ye,tt.dir,pt)}}const Ze=n.add(et,et,Ye);B._translateCameraConstrained(Ze),pe&&Math.abs(B.zoom-rt)>1e-4&&B.recenterOnTerrain(),B.cameraElevationReference="ground",this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(u,x,!0)}_fireEvents(a,u,x){const P=Bi(this._eventsInProgress),B=Bi(a),ne={};for(const Ee in a){const{originalEvent:Re}=a[Ee];this._eventsInProgress[Ee]||(ne[`${Ee}start`]=Re),this._eventsInProgress[Ee]=a[Ee]}!P&&B&&this._fireEvent("movestart",B.originalEvent);for(const Ee in ne)this._fireEvent(Ee,ne[Ee]);B&&this._fireEvent("move",B.originalEvent);for(const Ee in a){const{originalEvent:Re}=a[Ee];this._fireEvent(Ee,Re)}const he={};let pe;for(const Ee in this._eventsInProgress){const{handlerName:Re,originalEvent:$e}=this._eventsInProgress[Ee];this._handlersById[Re].isActive()||(delete this._eventsInProgress[Ee],pe=u[Re]||$e,he[`${Ee}end`]=pe)}for(const Ee in he)this._fireEvent(Ee,he[Ee]);const Me=Bi(this._eventsInProgress);if(x&&(P||B)&&!Me){this._updatingCamera=!0;const Ee=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Re=$e=>$e!==0&&-this._bearingSnap<$e&&$e<this._bearingSnap;Ee?(Re(Ee.bearing||this._map.getBearing())&&(Ee.bearing=0),this._map.easeTo(Ee,{originalEvent:pe})):(this._map.fire(new n.Event("moveend",{originalEvent:pe})),Re(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,u){this._map.fire(new n.Event(a,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{this._frameId=void 0,this.handleEvent(new Xf("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Sp="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ll extends n.Evented{constructor(a,u){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=u.bearingSnap,n.bindAll(["_renderFrameCallback"],this)}getCenter(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(a,u){return this.jumpTo({center:a},u)}panBy(a,u,x){return a=n.pointGeometry.convert(a).mult(-1),this.panTo(this.transform.center,n.extend({offset:a},u),x)}panTo(a,u,x){return this.easeTo(n.extend({center:a},u),x)}getZoom(){return this.transform.zoom}setZoom(a,u){return this.jumpTo({zoom:a},u),this}zoomTo(a,u,x){return this.easeTo(n.extend({zoom:a},u),x)}zoomIn(a,u){return this.zoomTo(this.getZoom()+1,a,u),this}zoomOut(a,u){return this.zoomTo(this.getZoom()-1,a,u),this}getBearing(){return this.transform.bearing}setBearing(a,u){return this.jumpTo({bearing:a},u),this}getPadding(){return this.transform.padding}setPadding(a,u){return this.jumpTo({padding:a},u),this}rotateTo(a,u,x){return this.easeTo(n.extend({bearing:a},u),x)}resetNorth(a,u){return this.rotateTo(0,n.extend({duration:1e3},a),u),this}resetNorthPitch(a,u){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},a),u),this}snapToNorth(a,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,u):this}getPitch(){return this.transform.pitch}setPitch(a,u){return this.jumpTo({pitch:a},u),this}cameraForBounds(a,u){a=n.LngLatBounds.convert(a);const x=u&&u.bearing||0,P=u&&u.pitch||0,B=a.getNorthWest(),ne=a.getSouthEast();return this._cameraForBounds(this.transform,B,ne,x,P,u)}_extendCameraOptions(a){const u={top:0,bottom:0,right:0,left:0};if(typeof(a=n.extend({padding:u,offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding=="number"){const x=a.padding;a.padding={top:x,bottom:x,right:x,left:x}}return a.padding=n.extend(u,a.padding),a}_minimumAABBFrustumDistance(a,u){const x=u.max[0]-u.min[0],P=u.max[1]-u.min[1];return x/P>a.aspect?x/(2*Math.tan(.5*a.fovX)*a.aspect):P/(2*Math.tan(.5*a.fovY)*a.aspect)}_cameraForBoundsOnGlobe(a,u,x,P,B,ne){const he=a.clone(),pe=this._extendCameraOptions(ne);he.bearing=P,he.pitch=B;const Me=n.LngLat.convert(u),Ee=n.LngLat.convert(x),Re=.5*(Me.lat+Ee.lat),$e=.5*(Me.lng+Ee.lng),Qe=n.latLngToECEF(Re,$e),et=n.normalize([],Qe),rt=n.normalize([],n.cross([],et,[0,1,0])),Ye=n.cross([],rt,et),Ze=[rt[0],rt[1],rt[2],0,Ye[0],Ye[1],Ye[2],0,et[0],et[1],et[2],0,0,0,0,1],lt=[Qe,n.latLngToECEF(Me.lat,Me.lng),n.latLngToECEF(Ee.lat,Me.lng),n.latLngToECEF(Ee.lat,Ee.lng),n.latLngToECEF(Me.lat,Ee.lng),n.latLngToECEF(Re,Me.lng),n.latLngToECEF(Re,Ee.lng),n.latLngToECEF(Me.lat,$e),n.latLngToECEF(Ee.lat,$e)];let tt=n.Aabb.fromPoints(lt.map(Rt=>[n.dot(rt,Rt),n.dot(Ye,Rt),n.dot(et,Rt)]));const pt=n.transformMat4([],tt.center,Ze);n.squaredLength(pt)===0&&n.set(pt,0,0,1),n.normalize(pt,pt),n.scale$2(pt,pt,n.GLOBE_RADIUS),he.center=n.ecefToLatLng(pt);const Tt=he.getWorldToCameraMatrix(),gt=n.invert(new Float64Array(16),Tt);tt=n.Aabb.applyTransform(tt,n.multiply([],Tt,Ze)),n.transformMat4(pt,pt,Tt);const kt=.5*(tt.max[2]-tt.min[2]),Wt=this._minimumAABBFrustumDistance(he,tt),Ft=n.scale$2([],[0,0,1],kt),Dt=n.add(Ft,pt,Ft),pi=Wt+(he.pitch===0?0:n.distance(pt,Dt)),Nt=he.globeCenterInViewSpace,si=n.sub([],pt,[Nt[0],Nt[1],Nt[2]]);n.normalize(si,si),n.scale$2(si,si,pi);const Xt=n.add([],pt,si);n.transformMat4(Xt,Xt,gt);const vi=n.earthRadius/n.GLOBE_RADIUS,qt=n.length(Xt),di=n.mercatorZfromAltitude(qt*vi-n.earthRadius,0),wi=Math.min(he.zoomFromMercatorZAdjusted(di),pe.maxZoom);return wi>.5*(n.GLOBE_ZOOM_THRESHOLD_MIN+n.GLOBE_ZOOM_THRESHOLD_MAX)?(he.setProjection({name:"mercator"}),he.zoom=wi,this._cameraForBounds(he,u,x,P,B,ne)):{center:he.center,zoom:wi,bearing:P,pitch:B}}queryTerrainElevation(a,u){const x=this.transform.elevation;return x?(u=n.extend({},{exaggerated:!0},u),x.getAtPoint(n.MercatorCoordinate.fromLngLat(a),null,u.exaggerated)):null}_cameraForBounds(a,u,x,P,B,ne){if(a.projection.name==="globe")return this._cameraForBoundsOnGlobe(a,u,x,P,B,ne);const he=a.clone(),pe=this._extendCameraOptions(ne),Me=he.padding;he.bearing=P,he.pitch=B;const Ee=n.LngLat.convert(u),Re=n.LngLat.convert(x),$e=new n.LngLat(Ee.lng,Re.lat),Qe=new n.LngLat(Re.lng,Ee.lat),et=he.project(Ee),rt=he.project(Re),Ye=this.queryTerrainElevation(Ee),Ze=this.queryTerrainElevation(Re),lt=this.queryTerrainElevation($e),tt=this.queryTerrainElevation(Qe),pt=[[et.x,et.y,Math.min(Ye||0,Ze||0,lt||0,tt||0)],[rt.x,rt.y,Math.max(Ye||0,Ze||0,lt||0,tt||0)]];let Tt=n.Aabb.fromPoints(pt);const gt=he.getWorldToCameraMatrix(),kt=n.invert(new Float64Array(16),gt);Tt=n.Aabb.applyTransform(Tt,gt);const Wt=n.sub([],Tt.max,Tt.min),Ft=Me.left||0,Dt=Me.right||0,pi=Me.bottom||0,Nt=Me.top||0,{left:si,right:Xt,top:vi,bottom:qt}=pe.padding,di=.5*(Ft+Dt),wi=.5*(Nt+pi),Rt=Math.min(he.scaleZoom(he.scale*Math.min((he.width-(Ft+Dt+si+Xt))/Wt[0],(he.height-(pi+Nt+qt+vi))/Wt[1])),pe.maxZoom),Yt=he.scale/he.zoomScale(Rt);Tt=new n.Aabb([Tt.min[0]-(si+di)*Yt,Tt.min[1]-(qt+wi)*Yt,Tt.min[2]],[Tt.max[0]+(Xt+di)*Yt,Tt.max[1]+(vi+wi)*Yt,Tt.max[2]]);const Hi=.5*Wt[2],nn=this._minimumAABBFrustumDistance(he,Tt),Wi=[0,0,1,0];n.transformMat4$1(Wi,Wi,gt),n.normalize$2(Wi,Wi);const pn=n.scale$2([],Wi,nn+Hi),Rn=n.add([],Tt.center,pn),sn=(typeof pe.offset.x=="number"&&typeof pe.offset.y=="number"?new n.pointGeometry(pe.offset.x,pe.offset.y):n.pointGeometry.convert(pe.offset)).rotate(-n.degToRad(P));Tt.center[0]-=sn.x*Yt,Tt.center[1]+=sn.y*Yt,n.transformMat4(Tt.center,Tt.center,kt),n.transformMat4(Rn,Rn,kt);const Vi=[Tt.center[0],Tt.center[1],Rn[2]*he.pixelsPerMeter];n.scale$2(Vi,Vi,1/he.worldSize);const Sr=n.lngFromMercatorX(Vi[0]),hr=n.latFromMercatorY(Vi[1]),Ar=Math.min(he._zoomFromMercatorZ(Vi[2]),pe.maxZoom),br=new n.LngLat(Sr,hr);return he.mercatorFromTransition&&Ar<.5*(n.GLOBE_ZOOM_THRESHOLD_MIN+n.GLOBE_ZOOM_THRESHOLD_MAX)?(he.setProjection({name:"globe"}),he.zoom=Ar,this._cameraForBounds(he,u,x,P,B,ne)):{center:br,zoom:Ar,bearing:P,pitch:B}}fitBounds(a,u,x){const P=this.cameraForBounds(a,u);return this._fitInternal(P,u,x)}fitScreenCoordinates(a,u,x,P,B){const ne=n.pointGeometry.convert(a),he=n.pointGeometry.convert(u),pe=new n.pointGeometry(Math.min(ne.x,he.x),Math.min(ne.y,he.y)),Me=new n.pointGeometry(Math.max(ne.x,he.x),Math.max(ne.y,he.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(ne,he))return this;const Ee=this.transform.pointLocation3D(pe),Re=this.transform.pointLocation3D(Me),$e=this.transform.pointLocation3D(new n.pointGeometry(pe.x,Me.y)),Qe=this.transform.pointLocation3D(new n.pointGeometry(Me.x,pe.y)),et=[Math.min(Ee.lng,Re.lng,$e.lng,Qe.lng),Math.min(Ee.lat,Re.lat,$e.lat,Qe.lat)],rt=[Math.max(Ee.lng,Re.lng,$e.lng,Qe.lng),Math.max(Ee.lat,Re.lat,$e.lat,Qe.lat)],Ye=P&&P.pitch?P.pitch:this.getPitch(),Ze=this._cameraForBounds(this.transform,et,rt,x,Ye,P);return this._fitInternal(Ze,P,B)}_fitInternal(a,u,x){return a?(delete(u=n.extend(a,u)).padding,u.linear?this.easeTo(u,x):this.flyTo(u,x)):this}jumpTo(a,u){this.stop();const x=a.preloadOnly?this.transform.clone():this.transform;let P=!1,B=!1,ne=!1;return"zoom"in a&&x.zoom!==+a.zoom&&(P=!0,x.zoom=+a.zoom),a.center!==void 0&&(x.center=n.LngLat.convert(a.center)),"bearing"in a&&x.bearing!==+a.bearing&&(B=!0,x.bearing=+a.bearing),"pitch"in a&&x.pitch!==+a.pitch&&(ne=!0,x.pitch=+a.pitch),a.padding==null||x.isPaddingEqual(a.padding)||(x.padding=a.padding),a.preloadOnly?(this._preloadTiles(x),this):(this.fire(new n.Event("movestart",u)).fire(new n.Event("move",u)),P&&this.fire(new n.Event("zoomstart",u)).fire(new n.Event("zoom",u)).fire(new n.Event("zoomend",u)),B&&this.fire(new n.Event("rotatestart",u)).fire(new n.Event("rotate",u)).fire(new n.Event("rotateend",u)),ne&&this.fire(new n.Event("pitchstart",u)).fire(new n.Event("pitch",u)).fire(new n.Event("pitchend",u)),this.fire(new n.Event("moveend",u)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.warnOnce(Sp),this.transform.getFreeCameraOptions()}setFreeCameraOptions(a,u){const x=this.transform;if(!x.projection.supportsFreeCamera)return n.warnOnce(Sp),this;this.stop();const P=x.zoom,B=x.pitch,ne=x.bearing;x.setFreeCameraOptions(a);const he=P!==x.zoom,pe=B!==x.pitch,Me=ne!==x.bearing;return this.fire(new n.Event("movestart",u)).fire(new n.Event("move",u)),he&&this.fire(new n.Event("zoomstart",u)).fire(new n.Event("zoom",u)).fire(new n.Event("zoomend",u)),Me&&this.fire(new n.Event("rotatestart",u)).fire(new n.Event("rotate",u)).fire(new n.Event("rotateend",u)),pe&&this.fire(new n.Event("pitchstart",u)).fire(new n.Event("pitch",u)).fire(new n.Event("pitchend",u)),this.fire(new n.Event("moveend",u)),this}easeTo(a,u){this._stop(!1,a.easeId),((a=n.extend({offset:[0,0],duration:500,easing:n.ease},a)).animate===!1||!a.essential&&n.exported.prefersReducedMotion)&&(a.duration=0);const x=this.transform,P=this.getZoom(),B=this.getBearing(),ne=this.getPitch(),he=this.getPadding(),pe="zoom"in a?+a.zoom:P,Me="bearing"in a?this._normalizeBearing(a.bearing,B):B,Ee="pitch"in a?+a.pitch:ne,Re="padding"in a?a.padding:x.padding,$e=n.pointGeometry.convert(a.offset);let Qe,et,rt;if(x.projection.name==="globe"){const Ft=n.MercatorCoordinate.fromLngLat(x.center),Dt=$e.rotate(-x.angle);Ft.x+=Dt.x/x.worldSize,Ft.y+=Dt.y/x.worldSize;const pi=Ft.toLngLat(),Nt=n.LngLat.convert(a.center||pi);this._normalizeCenter(Nt),Qe=x.centerPoint.add(Dt),et=new n.pointGeometry(Ft.x,Ft.y).mult(x.worldSize),rt=new n.pointGeometry(n.mercatorXfromLng(Nt.lng),n.mercatorYfromLat(Nt.lat)).mult(x.worldSize).sub(et)}else{Qe=x.centerPoint.add($e);const Ft=x.pointLocation(Qe),Dt=n.LngLat.convert(a.center||Ft);this._normalizeCenter(Dt),et=x.project(Ft),rt=x.project(Dt).sub(et)}const Ye=x.zoomScale(pe-P);let Ze,lt;a.around&&(Ze=n.LngLat.convert(a.around),lt=x.locationPoint(Ze));const tt=this._zooming||pe!==P,pt=this._rotating||B!==Me,Tt=this._pitching||Ee!==ne,gt=!x.isPaddingEqual(Re),kt=Ft=>Dt=>{if(tt&&(Ft.zoom=n.number(P,pe,Dt)),pt&&(Ft.bearing=n.number(B,Me,Dt)),Tt&&(Ft.pitch=n.number(ne,Ee,Dt)),gt&&(Ft.interpolatePadding(he,Re,Dt),Qe=Ft.centerPoint.add($e)),Ze)Ft.setLocationAtPoint(Ze,lt);else{const pi=Ft.zoomScale(Ft.zoom-P),Nt=pe>P?Math.min(2,Ye):Math.max(.5,Ye),si=Math.pow(Nt,1-Dt),Xt=Ft.unproject(et.add(rt.mult(Dt*si)).mult(pi));Ft.setLocationAtPoint(Ft.renderWorldCopies?Xt.wrap():Xt,Qe)}return a.preloadOnly||this._fireMoveEvents(u),Ft};if(a.preloadOnly){const Ft=this._emulate(kt,a.duration,x);return this._preloadTiles(Ft),this}const Wt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=tt,this._rotating=pt,this._pitching=Tt,this._padding=gt,this._easeId=a.easeId,this._prepareEase(u,a.noMoveStart,Wt),this._ease(kt(x),Ft=>{x.recenterOnTerrain(),this._afterEase(u,Ft)},a),this}_prepareEase(a,u,x={}){this._moving=!0,this.transform.cameraElevationReference="sea",u||x.moving||this.fire(new n.Event("movestart",a)),this._zooming&&!x.zooming&&this.fire(new n.Event("zoomstart",a)),this._rotating&&!x.rotating&&this.fire(new n.Event("rotatestart",a)),this._pitching&&!x.pitching&&this.fire(new n.Event("pitchstart",a))}_fireMoveEvents(a){this.fire(new n.Event("move",a)),this._zooming&&this.fire(new n.Event("zoom",a)),this._rotating&&this.fire(new n.Event("rotate",a)),this._pitching&&this.fire(new n.Event("pitch",a))}_afterEase(a,u){if(this._easeId&&u&&this._easeId===u)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const x=this._zooming,P=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,x&&this.fire(new n.Event("zoomend",a)),P&&this.fire(new n.Event("rotateend",a)),B&&this.fire(new n.Event("pitchend",a)),this.fire(new n.Event("moveend",a))}flyTo(a,u){if(!a.essential&&n.exported.prefersReducedMotion){const Rt=n.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Rt,u)}this.stop(),a=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},a);const x=this.transform,P=this.getZoom(),B=this.getBearing(),ne=this.getPitch(),he=this.getPadding(),pe="zoom"in a?n.clamp(+a.zoom,x.minZoom,x.maxZoom):P,Me="bearing"in a?this._normalizeBearing(a.bearing,B):B,Ee="pitch"in a?+a.pitch:ne,Re="padding"in a?a.padding:x.padding,$e=x.zoomScale(pe-P),Qe=n.pointGeometry.convert(a.offset);let et=x.centerPoint.add(Qe);const rt=x.pointLocation(et),Ye=n.LngLat.convert(a.center||rt);this._normalizeCenter(Ye);const Ze=x.project(rt),lt=x.project(Ye).sub(Ze);let tt=a.curve;const pt=Math.max(x.width,x.height),Tt=pt/$e,gt=lt.mag();if("minZoom"in a){const Rt=n.clamp(Math.min(a.minZoom,P,pe),x.minZoom,x.maxZoom),Yt=pt/x.zoomScale(Rt-P);tt=Math.sqrt(Yt/gt*2)}const kt=tt*tt;function Wt(Rt){const Yt=(Tt*Tt-pt*pt+(Rt?-1:1)*kt*kt*gt*gt)/(2*(Rt?Tt:pt)*kt*gt);return Math.log(Math.sqrt(Yt*Yt+1)-Yt)}function Ft(Rt){return(Math.exp(Rt)-Math.exp(-Rt))/2}function Dt(Rt){return(Math.exp(Rt)+Math.exp(-Rt))/2}const pi=Wt(0);let Nt=function(Rt){return Dt(pi)/Dt(pi+tt*Rt)},si=function(Rt){return pt*((Dt(pi)*(Ft(Yt=pi+tt*Rt)/Dt(Yt))-Ft(pi))/kt)/gt;var Yt},Xt=(Wt(1)-pi)/tt;if(Math.abs(gt)<1e-6||!isFinite(Xt)){if(Math.abs(pt-Tt)<1e-6)return this.easeTo(a,u);const Rt=Tt<pt?-1:1;Xt=Math.abs(Math.log(Tt/pt))/tt,si=function(){return 0},Nt=function(Yt){return Math.exp(Rt*tt*Yt)}}a.duration="duration"in a?+a.duration:1e3*Xt/("screenSpeed"in a?+a.screenSpeed/tt:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0);const vi=B!==Me,qt=Ee!==ne,di=!x.isPaddingEqual(Re),wi=Rt=>Yt=>{const Hi=Yt*Xt,nn=1/Nt(Hi);Rt.zoom=Yt===1?pe:P+Rt.scaleZoom(nn),vi&&(Rt.bearing=n.number(B,Me,Yt)),qt&&(Rt.pitch=n.number(ne,Ee,Yt)),di&&(Rt.interpolatePadding(he,Re,Yt),et=Rt.centerPoint.add(Qe));const Wi=Yt===1?Ye:Rt.unproject(Ze.add(lt.mult(si(Hi))).mult(nn));return Rt.setLocationAtPoint(Rt.renderWorldCopies?Wi.wrap():Wi,et),Rt._updateCameraOnTerrain(),a.preloadOnly||this._fireMoveEvents(u),Rt};if(a.preloadOnly){const Rt=this._emulate(wi,a.duration,x);return this._preloadTiles(Rt),this}return this._zooming=!0,this._rotating=vi,this._pitching=qt,this._padding=di,this._prepareEase(u,!1),this._ease(wi(x),()=>this._afterEase(u),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const x=this._onEaseEnd;this._onEaseEnd=void 0,x.call(this,u)}if(!a){const x=this.handlers;x&&x.stop(!1)}return this}_ease(a,u,x){x.animate===!1||x.duration===0?(a(1),u()):(this._easeStart=n.exported.now(),this._easeOptions=x,this._onEaseFrame=a,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((n.exported.now()-this._easeStart)/this._easeOptions.duration,1),u=this._onEaseFrame;u&&u(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,u){a=n.wrap(a,-180,180);const x=Math.abs(a-u);return Math.abs(a-360-u)<x&&(a-=360),Math.abs(a+360-u)<x&&(a+=360),a}_normalizeCenter(a){const u=this.transform;if(!u.renderWorldCopies||u.maxBounds)return;const x=a.lng-u.center.lng;a.lng+=x>180?-360:x<-180?360:0}_emulate(a,u,x){const P=Math.ceil(15*u/1e3),B=[],ne=a(x.clone());for(let he=0;he<=P;he++){const pe=ne(he/P);B.push(pe.clone())}return B}}class Ep{constructor(a={}){this.options=a,n.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){const u=this.options&&this.options.compact;return this._map=a,this._container=W("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=W("button","mapboxgl-ctrl-attrib-button",this._container),W("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=W("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),u===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(a,u){const x=this._map._getUIString(`AttributionControl.${u}`);a.setAttribute("aria-label",x),a.removeAttribute("title"),a.firstElementChild&&a.firstElementChild.setAttribute("title",x)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));const u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.config.ACCESS_TOKEN}];if(a){const x=u.reduce((P,B,ne)=>(B.value&&(P+=`${B.key}=${B.value}${ne<u.length-1?"&":""}`),P),"?");a.href=`${n.config.FEEDBACK_URL}/${x}#${xa(this._map,!0)}`,a.rel="noopener nofollow",this._setElementTitle(a,"MapFeedback")}}_updateData(a){!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let a=[];if(this._map.style.stylesheet){const P=this._map.style.stylesheet;this.styleOwner=P.owner,this.styleId=P.id}const u=this._map.style._sourceCaches;for(const P in u){const B=u[P];if(B.used){const ne=B.getSource();ne.attribution&&a.indexOf(ne.attribution)<0&&a.push(ne.attribution)}}a.sort((P,B)=>P.length-B.length),a=a.filter((P,B)=>{for(let ne=B+1;ne<a.length;ne++)if(a[ne].indexOf(P)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=[...this.options.customAttribution,...a]:a.unshift(this.options.customAttribution));const x=a.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,a.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Cp{constructor(){n.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(a){this._map=a,this._container=W("div","mapboxgl-ctrl");const u=W("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(a){a&&a.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const a=this._map.style._sourceCaches;if(Object.entries(a).length===0)return!0;for(const u in a){const x=a[u].getSource();if(x.hasOwnProperty("mapbox_logo")&&!x.mapbox_logo)return!1}return!0}_updateCompact(){const a=this._container.children;if(a.length){const u=a[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}}}class Mp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const u=++this._id;return this._queue.push({callback:a,id:u,cancelled:!1}),u}remove(a){const u=this._currentlyRunning,x=u?this._queue.concat(u):this._queue;for(const P of x)if(P.id===a)return void(P.cancelled=!0)}run(a=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const x of u)if(!x.cancelled&&(x.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ap(_,a,u){if(_=new n.LngLat(_.lng,_.lat),a){const x=new n.LngLat(_.lng-360,_.lat),P=new n.LngLat(_.lng+360,_.lat),B=360*Math.ceil(Math.abs(_.lng-u.center.lng)/360),ne=u.locationPoint(_).distSqr(a),he=a.x<0||a.y<0||a.x>u.width||a.y>u.height;u.locationPoint(x).distSqr(a)<ne&&(he||Math.abs(x.lng-u.center.lng)<B)?_=x:u.locationPoint(P).distSqr(a)<ne&&(he||Math.abs(P.lng-u.center.lng)<B)&&(_=P)}for(;Math.abs(_.lng-u.center.lng)>180;){const x=u.locationPoint(_);if(x.x>=0&&x.y>=0&&x.x<=u.width&&x.y<=u.height)break;_.lng>u.center.lng?_.lng-=360:_.lng+=360}return _}const Bh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Va extends n.Evented{constructor(a,u){if(super(),(a instanceof n.window.HTMLElement||u)&&(a=n.extend({element:a},u)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=a&&a.occludedOpacity||.2,a&&a.element)this._element=a.element,this._offset=n.pointGeometry.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=W("div");const P=41,B=27,ne=K("svg",{display:"block",height:P*this._scale+"px",width:B*this._scale+"px",viewBox:`0 0 ${B} ${P}`},this._element),he=K("radialGradient",{id:"shadowGradient"},K("defs",{},ne));K("stop",{offset:"10%","stop-opacity":.4},he),K("stop",{offset:"100%","stop-opacity":.05},he),K("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},ne),K("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},ne),K("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},ne),K("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},ne),this._offset=n.pointGeometry.convert(a&&a.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",P=>{P.preventDefault()}),this._element.addEventListener("mousedown",P=>{P.preventDefault()});const x=this._element.classList;for(const P in Bh)x.remove(`mapboxgl-marker-anchor-${P}`);x.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(a){return a===this._map||(this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._updateMoving),a.on("moveend",this._update),a.on("remove",this._clearFadeTimer),a._addMarker(this),this.setDraggable(this._draggable),this._update(),a.on("click",this._onMapClick)),this}remove(){const a=this._map;return a&&(a.off("click",this._onMapClick),a.off("move",this._updateMoving),a.off("moveend",this._update),a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler),a.off("mouseup",this._onUp),a.off("touchend",this._onUp),a.off("mousemove",this._onMove),a.off("touchmove",this._onMove),a.off("remove",this._clearFadeTimer),a._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=n.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const P=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[P,-1*(38.1-13.5+P)],"bottom-right":[-P,-1*(38.1-13.5+P)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,a._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(a){const u=a.code,x=a.charCode||a.keyCode;u!=="Space"&&u!=="Enter"&&x!==32&&x!==13||this.togglePopup()}_onMapClick(a){const u=a.originalEvent.target,x=this._element;this._popup&&(u===x||x.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?(a.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(a.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const a=this._map,u=this._pos;if(!a||!u)return!1;const x=a.unproject(u),P=a.getFreeCameraOptions();if(!P.position)return!1;const B=P.position.toLngLat();return B.distanceTo(x)<.9*B.distanceTo(this._lngLat)}_evaluateOpacity(){const a=this._map;if(!a)return;const u=this._pos;if(!u||u.x<0||u.x>a.transform.width||u.y<0||u.y>a.transform.height)return void this._clearFadeTimer();const x=a.unproject(u);let P;a._showingGlobe()&&n.isLngLatBehindGlobe(a.transform,this._lngLat)?P=0:(P=1-a._queryFogOpacity(x),a.transform._terrainEnabled()&&a.getTerrain()&&this._behindTerrain()&&(P*=this._occludedOpacity)),this._element.style.opacity=`${P}`,this._element.style.pointerEvents=P>0?"auto":"none",this._popup&&this._popup._setOpacity(P),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const a=this._pos;if(!a||!this._map)return;const u=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${a.x}px,${a.y}px)
            ${Bh[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${u.x}px,${u.y}px)
        `}_calculateXYTransform(){const a=this._pos,u=this._map,x=this.getPitchAlignment();if(!u||!a||x!=="map")return"";if(!u._showingGlobe()){const pe=u.getPitch();return pe?`rotateX(${pe}deg)`:""}const P=n.radToDeg(n.globeTiltAtLngLat(u.transform,this._lngLat)),B=a.sub(n.globeCenterToScreenPoint(u.transform)),ne=Math.abs(B.x)+Math.abs(B.y);if(ne===0)return"";const he=P/ne;return`rotateX(${-B.y*he}deg) rotateY(${B.x*he}deg)`}_calculateZTransform(){const a=this._pos,u=this._map;if(!u||!a)return"";let x=0;const P=this.getRotationAlignment();if(P==="map")if(u._showingGlobe()){const B=u.project(new n.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),ne=u.project(new n.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(B);x=n.radToDeg(Math.atan2(ne.y,ne.x))-90}else x=-u.getBearing();else if(P==="horizon"){const B=n.smoothstep(4,6,u.getZoom()),ne=n.globeCenterToScreenPoint(u.transform);ne.y+=B*u.transform.height;const he=a.sub(ne),pe=n.radToDeg(Math.atan2(he.y,he.x));x=(pe>90?pe-270:pe+90)*(1-B)}return x+=this._rotation,x?`rotateZ(${x}deg)`:""}_update(a){n.window.cancelAnimationFrame(this._updateFrameId);const u=this._map;u&&(u.transform.renderWorldCopies&&(this._lngLat=Ap(this._lngLat,this._pos,u.transform)),this._pos=u.project(this._lngLat),a===!0?this._updateFrameId=n.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),u._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(u._showingGlobe()||u.getTerrain()||u.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(a){return this._offset=n.pointGeometry.convert(a),this._update(),this}_onMove(a){const u=this._map;if(!u)return;const x=this._pointerdownPos,P=this._positionDelta;if(x&&P){if(!this._isDragging){const B=this._clickTolerance||u._clickTolerance;if(a.point.dist(x)<B)return;this._isDragging=!0}this._pos=a.point.sub(P),this._lngLat=u.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const a=this._map;a&&(a.off("mousemove",this._onMove),a.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.Event("dragend")),this._state="inactive"}_addDragHandler(a){const u=this._map,x=this._pos;u&&x&&this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(x),this._pointerdownPos=a.point,this._state="pending",u.on("mousemove",this._onMove),u.on("touchmove",this._onMove),u.once("mouseup",this._onUp),u.once("touchend",this._onUp))}setDraggable(a){this._draggable=!!a;const u=this._map;return u&&(a?(u.on("mousedown",this._addDragHandler),u.on("touchstart",this._addDragHandler)):(u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(a){return this._occludedOpacity=a||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const mu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oa(_=new n.pointGeometry(0,0),a="bottom"){if(typeof _=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(_,2)));switch(a){case"top":return new n.pointGeometry(0,_);case"top-left":return new n.pointGeometry(u,u);case"top-right":return new n.pointGeometry(-u,u);case"bottom":return new n.pointGeometry(0,-_);case"bottom-left":return new n.pointGeometry(u,-u);case"bottom-right":return new n.pointGeometry(-u,-u);case"left":return new n.pointGeometry(_,0);case"right":return new n.pointGeometry(-_,0)}return new n.pointGeometry(0,0)}return _ instanceof n.pointGeometry||Array.isArray(_)?n.pointGeometry.convert(_):n.pointGeometry.convert(_[a]||[0,0])}class Kf{constructor(a){this.jumpTo(a)}getValue(a){if(a<=this._startTime)return this._start;if(a>=this._endTime)return this._end;const u=n.easeCubicInOut((a-this._startTime)/(this._endTime-this._startTime));return this._start*(1-u)+this._end*u}isEasing(a){return a>=this._startTime&&a<=this._endTime}jumpTo(a){this._startTime=-1/0,this._endTime=-1/0,this._start=a,this._end=a}easeTo(a,u,x){this._start=this.getValue(u),this._end=a,this._startTime=u,this._endTime=u+x}}const Jf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Qf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},e0={showCompass:!0,showZoom:!0,visualizePitch:!1};class t0{constructor(a,u,x=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new xp({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,x&&(this.mousePitch=new bp({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener("mousedown",this.mousedown),u.addEventListener("touchstart",this.touchstart,{passive:!1}),u.addEventListener("touchmove",this.touchmove),u.addEventListener("touchend",this.touchend),u.addEventListener("touchcancel",this.reset)}down(a,u){this.mouseRotate.mousedown(a,u),this.mousePitch&&this.mousePitch.mousedown(a,u),M()}move(a,u){const x=this.map,P=this.mouseRotate.mousemoveWindow(a,u),B=P&&P.bearingDelta;if(B&&x.setBearing(x.getBearing()+B),this.mousePitch){const ne=this.mousePitch.mousemoveWindow(a,u),he=ne&&ne.pitchDelta;he&&x.setPitch(x.getPitch()+he)}}off(){const a=this.element;a.removeEventListener("mousedown",this.mousedown),a.removeEventListener("touchstart",this.touchstart,{passive:!1}),a.removeEventListener("touchmove",this.touchmove),a.removeEventListener("touchend",this.touchend),a.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){S(),n.window.removeEventListener("mousemove",this.mousemove),n.window.removeEventListener("mouseup",this.mouseup)}mousedown(a){this.down(n.extend({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),U(this.element,a)),n.window.addEventListener("mousemove",this.mousemove),n.window.addEventListener("mouseup",this.mouseup)}mousemove(a){this.move(a,U(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){a.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){a.targetTouches.length!==1?this.reset():(this._lastPos=C(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){a.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const gu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},kp={maxWidth:100,unit:"metric"};function i0(_,a,u){const x=Pp(a),P=x/a,B={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[u];this._map._requestDomTask(()=>{this._container.style.width=_*P+"px",this._container.innerHTML=`${x}&nbsp;${B}`})}function Pp(_){const a=Math.pow(10,`${Math.floor(_)}`.length-1);let u=_/a;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:u>=1?1:function(x){const P=Math.pow(10,Math.ceil(-Math.log(x)/Math.LN10));return Math.round(x*P)/P}(u),a*u}const Qc={version:n.version,supported:V,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:class extends ll{constructor(_){if(n.LivePerformanceUtils.mark(n.PerformanceMarkers.create),(_=n.extend({},Qf,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_.antialias&&n.isSafariWithAntialiasingBug(n.window)&&(_.antialias=!1,n.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ul(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),_),this._interactive=_.interactive,this._minTileCacheSize=_.minTileCacheSize,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._collectResourceTiming=_.collectResourceTiming,this._optimizeForTerrain=_.optimizeForTerrain,this._language=this._parseLanguage(_.language),this._worldview=_.worldview,this._renderTaskQueue=new Mp,this._domRenderTaskQueue=new Mp,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.uniqueId(),this._locale=n.extend({},Jf,_.locale),this._clickTolerance=_.clickTolerance,this._cooperativeGestures=_.cooperativeGestures,this._performanceMetricsCollection=_.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Kf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new n.RequestManager(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,typeof _.container=="string"){if(this._container=n.window.document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof n.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(this._container.childNodes.length>0&&n.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_.maxBounds&&this.setMaxBounds(_.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),n.window!==void 0&&(n.window.addEventListener("online",this._onWindowOnline,!1),n.window.addEventListener("resize",this._onWindowResize,!1),n.window.addEventListener("orientationchange",this._onWindowResize,!1),n.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),n.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new _d(this,_),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.projection&&this.setProjection(_.projection),this._hash=_.hash&&new Gi(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,n.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),_.attributionControl&&this.addControl(new Ep({customAttribution:_.customAttribution})),this._logoControl=new Cp,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new n.Event(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new n.Event(`${a.dataType}dataloading`,a))})}_getMapId(){return this._mapId}addControl(_,a){if(a===void 0&&(a=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=_.onAdd(this);this._controls.push(_);const x=this._controlPositions[a];return a.indexOf("bottom")!==-1?x.insertBefore(u,x.firstChild):x.appendChild(u),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(_);return a>-1&&this._controls.splice(a,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const a=!this._moving;return a&&this.fire(new n.Event("movestart",_)).fire(new n.Event("move",_)),this.fire(new n.Event("resize",_)),a&&this.fire(new n.Event("moveend",_)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_){return this.transform.setMaxBounds(n.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_?this.setZoom(_):this.fire(new n.Event("zoomstart")).fire(new n.Event("zoom")).fire(new n.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_?this.setZoom(_):this.fire(new n.Event("zoomstart")).fire(new n.Event("zoom")).fire(new n.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_?this.setPitch(_):this.fire(new n.Event("pitchstart")).fire(new n.Event("pitch")).fire(new n.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_?this.setPitch(_):this.fire(new n.Event("pitchstart")).fire(new n.Event("pitch")).fire(new n.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(_){return _==="auto"?n.window.navigator.language:Array.isArray(_)?_.length===0?void 0:_.map(a=>a==="auto"?n.window.navigator.language:a):_}setLanguage(_){const a=this._parseLanguage(_);if(!this.style||a===this._language)return this;this._language=a,this.style._reloadSources();for(const u of this._controls)u._setLanguage&&u._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_){return this.style&&_!==this._worldview?(this._worldview=_,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(_){return this._lazyInitEmptyStyle(),_?typeof _=="string"&&(_={name:_}):_=null,this._useExplicitProjection=!!_,this._prioritizeAndUpdateProjection(_,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const _=this.transform,a=_.projection.name;let u;a==="globe"&&_.zoom>=n.GLOBE_ZOOM_THRESHOLD_MAX?(_.setMercatorFromTransition(),u=!0):a==="mercator"&&_.zoom<n.GLOBE_ZOOM_THRESHOLD_MAX&&(_.setProjection({name:"globe"}),u=!0),u&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(_,a){return this._updateProjection(_||a||{name:"mercator"})}_updateProjection(_){let a;if(a=_.name==="globe"&&this.transform.zoom>=n.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(_),this.style.applyProjectionUpdate(),a){this.painter.clearBackgroundTiles();for(const u in this.style._sourceCaches)this.style._sourceCaches[u].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(_){return this.transform.locationPoint3D(n.LngLat.convert(_))}unproject(_){return this.transform.pointLocation3D(n.pointGeometry.convert(_))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(_,a,u){if(_==="mouseenter"||_==="mouseover"){let x=!1;const P=ne=>{const he=a.filter(Me=>this.getLayer(Me)),pe=he.length?this.queryRenderedFeatures(ne.point,{layers:he}):[];pe.length?x||(x=!0,u.call(this,new Nr(_,this,ne.originalEvent,{features:pe}))):x=!1},B=()=>{x=!1};return{layers:new Set(a),listener:u,delegates:{mousemove:P,mouseout:B}}}if(_==="mouseleave"||_==="mouseout"){let x=!1;const P=ne=>{const he=a.filter(pe=>this.getLayer(pe));(he.length?this.queryRenderedFeatures(ne.point,{layers:he}):[]).length?x=!0:x&&(x=!1,u.call(this,new Nr(_,this,ne.originalEvent)))},B=ne=>{x&&(x=!1,u.call(this,new Nr(_,this,ne.originalEvent)))};return{layers:new Set(a),listener:u,delegates:{mousemove:P,mouseout:B}}}{const x=P=>{const B=a.filter(he=>this.getLayer(he)),ne=B.length?this.queryRenderedFeatures(P.point,{layers:B}):[];ne.length&&(P.features=ne,u.call(this,P),delete P.features)};return{layers:new Set(a),listener:u,delegates:{[_]:x}}}}on(_,a,u){if(u===void 0)return super.on(_,a);Array.isArray(a)||(a=[a]);const x=this._createDelegatedListener(_,a,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(x);for(const P in x.delegates)this.on(P,x.delegates[P]);return this}once(_,a,u){if(u===void 0)return super.once(_,a);Array.isArray(a)||(a=[a]);const x=this._createDelegatedListener(_,a,u);for(const P in x.delegates)this.once(P,x.delegates[P]);return this}off(_,a,u){if(u===void 0)return super.off(_,a);a=new Set(Array.isArray(a)?a:[a]);const x=(B,ne)=>{if(B.size!==ne.size)return!1;for(const he of B)if(!ne.has(he))return!1;return!0},P=this._delegatedListeners?this._delegatedListeners[_]:void 0;return P&&(B=>{for(let ne=0;ne<B.length;ne++){const he=B[ne];if(he.listener===u&&x(he.layers,a)){for(const pe in he.delegates)this.off(pe,he.delegates[pe]);return B.splice(ne,1),this}}})(P),this}queryRenderedFeatures(_,a){return this.style?(a!==void 0||_===void 0||_ instanceof n.pointGeometry||Array.isArray(_)||(a=_,_=void 0),this.style.queryRenderedFeatures(_=_||[[0,0],[this.transform.width,this.transform.height]],a=a||{},this.transform)):[]}querySourceFeatures(_,a){return this.style.querySourceFeatures(_,a)}setStyle(_,a){return(a=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&a.localFontFamily===this._localFontFamily&&this.style&&_?(this._diffStyle(_,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._localFontFamily=a.localFontFamily,this._updateStyle(_,a))}_getUIString(_){const a=this._locale[_];if(a==null)throw new Error(`Missing UI string '${_}'`);return a}_updateStyle(_,a){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_&&(this.style=new j(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_):this.style.loadJSON(_)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new j(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,a){if(typeof _=="string"){const u=this._requestManager.normalizeStyleURL(_),x=this._requestManager.transformRequest(u,n.ResourceType.Style);n.getJSON(x,(P,B)=>{P?this.fire(new n.ErrorEvent(P)):B&&this._updateDiff(B,a)})}else typeof _=="object"&&this._updateDiff(_,a)}_updateDiff(_,a){try{this.style.setState(_)&&this._update(!0)}catch(u){n.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(_,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.warnOnce("There is no style added to the map."),!1)}addSource(_,a){return this._lazyInitEmptyStyle(),this.style.addSource(_,a),this._update(!0)}isSourceLoaded(_){return!!this.style&&this.style._isSourceCacheLoaded(_)}areTilesLoaded(){const _=this.style&&this.style._sourceCaches;for(const a in _){const u=_[a]._tiles;for(const x in u){const P=u[x];if(P.state!=="loaded"&&P.state!=="errored")return!1}}return!0}addSourceType(_,a,u){this._lazyInitEmptyStyle(),this.style.addSourceType(_,a,u)}removeSource(_){return this.style.removeSource(_),this._updateTerrain(),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,a,{pixelRatio:u=1,sdf:x=!1,stretchX:P,stretchY:B,content:ne}={}){if(this._lazyInitEmptyStyle(),a instanceof n.window.HTMLImageElement||n.window.ImageBitmap&&a instanceof n.window.ImageBitmap){const{width:he,height:pe,data:Me}=n.exported.getImageData(a);this.style.addImage(_,{data:new n.RGBAImage({width:he,height:pe},Me),pixelRatio:u,stretchX:P,stretchY:B,content:ne,sdf:x,version:0})}else if(a.width===void 0||a.height===void 0)this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:he,height:pe}=a,Me=a;this.style.addImage(_,{data:new n.RGBAImage({width:he,height:pe},new Uint8Array(Me.data)),pixelRatio:u,stretchX:P,stretchY:B,content:ne,sdf:x,version:0,userImage:Me}),Me.onAdd&&Me.onAdd(this,_)}}updateImage(_,a){const u=this.style.getImage(_);if(!u)return void this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=a instanceof n.window.HTMLImageElement||n.window.ImageBitmap&&a instanceof n.window.ImageBitmap?n.exported.getImageData(a):a,{width:P,height:B}=x;P!==void 0&&B!==void 0?P===u.data.width&&B===u.data.height?(u.data.replace(x.data,!(a instanceof n.window.HTMLImageElement||n.window.ImageBitmap&&a instanceof n.window.ImageBitmap)),this.style.updateImage(_,u)):this.fire(new n.ErrorEvent(new Error(`The width and height of the updated image (${P}, ${B})
                must be that same as the previous version of the image
                (${u.data.width}, ${u.data.height})`))):this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,a){n.getImage(this._requestManager.transformRequest(_,n.ResourceType.Image),(u,x)=>{a(u,x instanceof n.window.HTMLImageElement?n.exported.getImageData(x):x)})}listImages(){return this.style.listImages()}addLayer(_,a){return this._lazyInitEmptyStyle(),this.style.addLayer(_,a),this._update(!0)}moveLayer(_,a){return this.style.moveLayer(_,a),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,a,u){return this.style.setLayerZoomRange(_,a,u),this._update(!0)}setFilter(_,a,u={}){return this.style.setFilter(_,a,u),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,a,u,x={}){return this.style.setPaintProperty(_,a,u,x),this._update(!0)}getPaintProperty(_,a){return this.style.getPaintProperty(_,a)}setLayoutProperty(_,a,u,x={}){return this.style.setLayoutProperty(_,a,u,x),this._update(!0)}getLayoutProperty(_,a){return this.style.getLayoutProperty(_,a)}setLight(_,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,a),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_){return this._lazyInitEmptyStyle(),!_&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.LngLat.convert(_),this.transform):0}setFeatureState(_,a){return this.style.setFeatureState(_,a),this._update()}removeFeatureState(_,a){return this.style.removeFeatureState(_,a),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}_updateContainerDimensions(){if(!this._container)return;const _=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300;let u,x,P,B=this._container;for(;B&&(!x||!P);){const ne=n.window.getComputedStyle(B).transform;ne&&ne!=="none"&&(u=ne.match(/matrix.*\((.+)\)/)[1].split(", "),u[0]&&u[0]!=="0"&&u[0]!=="1"&&(x=u[0]),u[3]&&u[3]!=="0"&&u[3]!=="1"&&(P=u[3])),B=B.parentElement}this._containerWidth=x?Math.abs(_/x):_,this._containerHeight=P?Math.abs(a/P):a}_detectMissingCSS(){n.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=W("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const a=this._canvasContainer=W("div","mapboxgl-canvas-container",_);this._interactive&&a.classList.add("mapboxgl-interactive"),this._canvas=W("canvas","mapboxgl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const u=this._controlContainer=W("div","mapboxgl-control-container",_),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{x[P]=W("div",`mapboxgl-ctrl-${P}`,u)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,a){const u=n.exported.devicePixelRatio||1;this._canvas.width=u*Math.ceil(_),this._canvas.height=u*Math.ceil(a),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${a}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const a=this._markers.indexOf(_);a!==-1&&this._markers.splice(a,1)}_addPopup(_){this._popups.push(_)}_removePopup(_){const a=this._popups.indexOf(_);a!==-1&&this._popups.splice(a,1)}_setupPainter(){const _=n.extend({},V.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);a?(n.storeAuthState(a,!0),this.painter=new vn(a,this.transform),this.on("data",u=>{u.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.exported$1.testSupport(a)):this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.loaded()||this.loaded()&&!this.isMoving()?_():this._domRenderTaskQueue.add(_)}_render(_){let a;const u=this.painter.context.extTimerQuery,x=n.exported.now();if(this.listens("gpu-timing-frame")&&(a=u.createQueryEXT(),u.beginQueryEXT(u.TIME_ELAPSED_EXT,a)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],n.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],n.window.performance.now())),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;this._updateProjectionTransition();const P=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const he=this.transform.zoom,pe=this.transform.pitch,Me=n.exported.now(),Ee=new n.EvaluationParameters(he,{now:Me,fadeDuration:P,pitch:pe,transition:this.style.getTransition()});this.style.update(Ee)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let B=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),B=this._updateAverageElevation(x),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):B=this._updateAverageElevation(x),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,P,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:P,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new n.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),a){const he=n.exported.now()-x;u.endQueryEXT(u.TIME_ELAPSED_EXT,a),setTimeout(()=>{const pe=u.getQueryObjectEXT(a,u.QUERY_RESULT_EXT)/1e6;u.deleteQueryEXT(a),this.fire(new n.Event("gpu-timing-frame",{cpuTime:he,gpuTime:pe})),n.window.performance.mark("frame-gpu",{startTime:x,detail:{gpuTime:pe}})},50)}if(this.listens("gpu-timing-layer")){const he=this.painter.collectGpuTimers();setTimeout(()=>{const pe=this.painter.queryGpuTimers(he);this.fire(new n.Event("gpu-timing-layer",{layerTimes:pe}))},50)}if(this.listens("gpu-timing-deferred-render")){const he=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const pe=this.painter.queryGpuTimeDeferredRender(he);this.fire(new n.Event("gpu-timing-deferred-render",{gpuTime:pe}))},50)}const ne=this._sourcesDirty||this._styleDirty||this._placementDirty||B;if(ne||this._repaint)this.triggerRepaint();else{const he=!this.isMoving()&&this.loaded();if(he&&(B=this._updateAverageElevation(x,!0)),B)this.triggerRepaint();else if(this._triggerFrame(!1),he&&(this.fire(new n.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const pe=this._calculateSpeedIndex();this.fire(new n.Event("speedindexcompleted",{speedIndex:pe})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||ne||(this._fullyLoaded=!0,n.LivePerformanceUtils.mark(n.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&n.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(_){for(const a of this._markers)_&&!this.getRenderWorldCopies()&&(a._lngLat=a._lngLat.wrap()),a._update();for(const a of this._popups)!_||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}_updateAverageElevation(_,a=!1){const u=x=>(this.transform.averageElevation=x,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&u(0);if((a||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const x=this.transform.averageElevation;let P=this.transform.sampleAverageElevation(),B=!1;this.transform.elevation&&(B=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(P)?P=0:this._averageElevationLastSampledAt=_;const ne=Math.abs(x-P);if(ne>1){if(this._isInitialLoad||B)return this._averageElevation.jumpTo(P),u(P);this._averageElevation.easeTo(P,_,300)}else if(ne>1e-4)return this._averageElevation.jumpTo(P),u(P)}return!!this._averageElevation.isEasing(_)&&u(this._averageElevation.getValue(_))}_authenticate(){n.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,_=>{if(_&&(_.message===n.AUTH_ERR_MSG||_.status===401)){const a=this.painter.context.gl;n.storeAuthState(a,!1),this._logoControl instanceof Cp&&this._logoControl._updateLogo(),a&&a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),n.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const _=this._isDragging();this.painter.updateTerrain(this.style,_)}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),a=this.painter.getCanvasCopiesAndTimestamps();a.timeStamps.push(performance.now());const u=this.painter.context.gl,x=u.createFramebuffer();function P(B){u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,B,0);const ne=new Uint8Array(u.drawingBufferWidth*u.drawingBufferHeight*4);return u.readPixels(0,0,u.drawingBufferWidth,u.drawingBufferHeight,u.RGBA,u.UNSIGNED_BYTE,ne),ne}return u.bindFramebuffer(u.FRAMEBUFFER,x),this._canvasPixelComparison(P(_),a.canvasCopies.map(P),a.timeStamps)}_canvasPixelComparison(_,a,u){let x=u[1]-u[0];const P=_.length/4;for(let B=0;B<a.length;B++){const ne=a[B];let he=0;for(let pe=0;pe<ne.length;pe+=4)ne[pe]===_[pe]&&ne[pe+1]===_[pe+1]&&ne[pe+2]===_[pe+2]&&ne[pe+3]===_[pe+3]&&(he+=1);x+=(u[B+2]-u[B+1])*(1-he/P)}return x}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),n.window!==void 0&&(n.window.removeEventListener("resize",this._onWindowResize,!1),n.window.removeEventListener("orientationchange",this._onWindowResize,!1),n.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),n.window.removeEventListener("online",this._onWindowOnline,!1),n.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),n.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new n.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=n.exported.frame(a=>{const u=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,u&&this._render(a)}))}_preloadTiles(_){const a=this.style?Object.values(this.style._sourceCaches):[];return n.asyncAll(a,(u,x)=>u._preloadTiles(_,x),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}_onVisibilityChange(){n.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(_){this._showTileAABBs!==_&&(this._showTileAABBs=_,_&&this._update())}_setCacheLimits(_,a){n.setCacheLimits(_,a)}get version(){return n.version}},NavigationControl:class{constructor(_){this.options=n.extend({},e0,_),this._container=W("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",a=>{this._map&&this._map.zoomIn({},{originalEvent:a})}),W("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",a=>{this._map&&this._map.zoomOut({},{originalEvent:a})}),W("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",a=>{const u=this._map;u&&(this.options.visualizePitch?u.resetNorthPitch({},{originalEvent:a}):u.resetNorth({},{originalEvent:a}))}),this._compassIcon=W("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map;if(!_)return;const a=_.getZoom(),u=a===_.getMaxZoom(),x=a===_.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())}_rotateCompassArrow(){const _=this._map;if(!_)return;const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_.transform.pitch}deg) rotateZ(${_.transform.angle*(180/Math.PI)}deg)`:`rotate(${_.transform.angle*(180/Math.PI)}deg)`;_._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=a)})}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_.on("pitch",this._rotateCompassArrow),_.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new t0(_,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _=this._map;_&&(this._container.remove(),this.options.showZoom&&_.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_.off("pitch",this._rotateCompassArrow),_.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_,a){const u=W("button",_,this._container);return u.type="button",u.addEventListener("click",a),u}_setButtonTitle(_,a){if(!this._map)return;const u=this._map._getUIString(`NavigationControl.${a}`);_.setAttribute("aria-label",u),_.firstElementChild&&_.firstElementChild.setAttribute("title",u)}},GeolocateControl:class extends n.Evented{constructor(_){super(),this.options=n.extend({geolocation:n.window.navigator.geolocation},gu,_),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ud(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_){return this._map=_,this._container=W("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_){const a=(u=!!this.options.geolocation)=>{this._supportsGeolocation=u,_(u)};this._supportsGeolocation!==void 0?_(this._supportsGeolocation):n.window.navigator.permissions!==void 0?n.window.navigator.permissions.query({name:"geolocation"}).then(u=>a(u.state!=="denied")).catch(()=>a()):a()}_isOutOfMapMaxBounds(_){const a=this._map.getMaxBounds(),u=_.coords;return!!a&&(u.longitude<a.getWest()||u.longitude>a.getEast()||u.latitude<a.getSouth()||u.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new n.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",_)),this._finish()}}_updateCamera(_){const a=new n.LngLat(_.coords.longitude,_.coords.latitude),u=_.coords.accuracy,x=this._map.getBearing(),P=n.extend({bearing:x},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(u),P,{geolocateSource:!0})}_updateMarker(_){if(_){const a=new n.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.transform,a=n.mercatorZfromAltitude(1,_._center.lat)*_.worldSize,u=Math.ceil(2*this._accuracy*a);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=W("button","mapboxgl-ctrl-geolocate",this._container),W("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=W("div","mapboxgl-user-location"),this._dotElement.appendChild(W("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(W("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Va({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=W("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Va({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.Event("trackuserlocationend")))})}}_onDeviceOrientation(_){this._userLocationDotMarker&&(_.webkitCompassHeading?this._heading=_.webkitCompassHeading:_.absolute===!0&&(this._heading=-1*_.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const _=()=>{n.window.addEventListener("ondeviceorientationabsolute"in n.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};n.window.DeviceMotionEvent!==void 0&&typeof n.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"&&_()}).catch(console.error):_()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),n.window.removeEventListener("deviceorientation",this._onDeviceOrientation),n.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ep,ScaleControl:class{constructor(_){this.options=n.extend({},kp,_),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=i0.bind(this)),n.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _=this.options.maxWidth||100,a=this._map,u=a._containerHeight/2,x=a._containerWidth/2-_/2,P=a.unproject([x,u]),B=a.unproject([x+_,u]),ne=P.distanceTo(B);if(this.options.unit==="imperial"){const he=3.2808*ne;he>5280?this._setScale(_,he/5280,"mile"):this._setScale(_,he,"foot")}else this.options.unit==="nautical"?this._setScale(_,ne/1852,"nautical-mile"):ne>=1e3?this._setScale(_,ne/1e3,"kilometer"):this._setScale(_,ne,"meter")}_setScale(_,a,u){const x=Pp(a),P=x/a;this._map._requestDomTask(()=>{this._container.style.width=_*P+"px",this._container.innerHTML=u!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:u}).format(x):`${x}&nbsp;nm`})}onAdd(_){return this._map=_,this._language=_.getLanguage(),this._container=W("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_){this._language=_,this._update()}setUnit(_){this.options.unit=_,this._update()}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof n.window.HTMLElement?this._container=_.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in n.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in n.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=W("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,n.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!n.window.document.fullscreenEnabled&&!n.window.document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=W("button","mapboxgl-ctrl-fullscreen",this._controlContainer);W("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),n.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(n.window.document.fullscreenElement||n.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?n.window.document.exitFullscreen?n.window.document.exitFullscreen():n.window.document.webkitCancelFullScreen&&n.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.Evented{constructor(_){super(),this.options=n.extend(Object.create(mu),_),n.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_&&_.className?_.className.trim().split(/\s+/):[])}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&_.on("preclick",this._onClose),this.options.closeOnMove&&_.on("move",this._onClose),_.on("remove",this.remove),this._update(),_._addPopup(this),this._focusFirstElement(),this._trackPointer?(_.on("mousemove",this._onMouseEvent),_.on("mouseup",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")):_.on("move",this._update),this.fire(new n.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _=this._map;return _&&(_.off("move",this._update),_.off("move",this._onClose),_.off("preclick",this._onClose),_.off("click",this._onClose),_.off("remove",this.remove),_.off("mousemove",this._onMouseEvent),_.off("mouseup",this._onMouseEvent),_.off("drag",this._onMouseEvent),_._canvasContainer&&_._canvasContainer.classList.remove("mapboxgl-track-pointer"),_._removePopup(this),this._map=void 0),this.fire(new n.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){this._lngLat=n.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update();const a=this._map;return a&&(a.on("move",this._update),a.off("mousemove",this._onMouseEvent),a._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _=this._map;return _&&(_.off("move",this._update),_.on("mousemove",this._onMouseEvent),_.on("drag",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(n.window.document.createTextNode(_))}setHTML(_){const a=n.window.document.createDocumentFragment(),u=n.window.document.createElement("body");let x;for(u.innerHTML=_;x=u.firstChild,x;)a.appendChild(x);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){let a=this._content;if(a)for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);else a=this._content=W("div","mapboxgl-popup-content",this._container||void 0);if(a.appendChild(_),this.options.closeButton){const u=this._closeButton=W("button","mapboxgl-popup-close-button",a);u.type="button",u.setAttribute("aria-label","Close popup"),u.setAttribute("aria-hidden","true"),u.innerHTML="&#215;",u.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_){return this._classList.add(_),this._updateClassList(),this}removeClassName(_){return this._classList.delete(_),this._updateClassList(),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){let a;return this._classList.delete(_)?a=!1:(this._classList.add(_),a=!0),this._updateClassList(),a}_onMouseEvent(_){this._update(_.point)}_getAnchor(_){if(this.options.anchor)return this.options.anchor;const a=this._map,u=this._container,x=this._pos;if(!a||!u||!x)return"bottom";const P=u.offsetWidth,B=u.offsetHeight,ne=x.x<P/2,he=x.x>a.transform.width-P/2;if(x.y+_<B)return ne?"top-left":he?"top-right":"top";if(x.y>a.transform.height-B){if(ne)return"bottom-left";if(he)return"bottom-right"}return ne?"left":he?"right":"bottom"}_updateClassList(){const _=this._container;if(!_)return;const a=[...this._classList];a.push("mapboxgl-popup"),this._anchor&&a.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&a.push("mapboxgl-popup-track-pointer"),_.className=a.join(" ")}_update(_){const a=this._map,u=this._content;if(!a||!this._lngLat&&!this._trackPointer||!u)return;let x=this._container;if(x||(x=this._container=W("div","mapboxgl-popup",a.getContainer()),this._tip=W("div","mapboxgl-popup-tip",x),x.appendChild(u)),this.options.maxWidth&&x.style.maxWidth!==this.options.maxWidth&&(x.style.maxWidth=this.options.maxWidth),a.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ap(this._lngLat,this._pos,a.transform)),!this._trackPointer||_){const P=this._pos=this._trackPointer&&_?_:a.project(this._lngLat),B=oa(this.options.offset),ne=this._anchor=this._getAnchor(B.y),he=oa(this.options.offset,ne),pe=P.add(he).round();a._requestDomTask(()=>{this._container&&ne&&(this._container.style.transform=`${Bh[ne]} translate(${pe.x}px,${pe.y}px)`)})}if(!this._marker&&a._showingGlobe()){const P=n.isLngLatBehindGlobe(a.transform,this._lngLat)?0:1;this._setOpacity(P)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Zf);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._container&&(this._container.style.opacity=`${_}`),this._content&&(this._content.style.pointerEvents=_?"auto":"none")}},Marker:Va,Style:j,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.pointGeometry,MercatorCoordinate:n.MercatorCoordinate,FreeCameraOptions:cs,Evented:n.Evented,config:n.config,prewarm:function(){hn().acquire(on)},clearPrewarmedResources:function(){const _=Xi;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(on),Xi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return n.config.ACCESS_TOKEN},set accessToken(_){n.config.ACCESS_TOKEN=_},get baseApiUrl(){return n.config.API_URL},set baseApiUrl(_){n.config.API_URL=_},get workerCount(){return rn.workerCount},set workerCount(_){rn.workerCount=_},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){n.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){n.clearTileCache(_)},workerUrl:"",workerClass:null,setNow:n.exported.setNow,restoreNow:n.exported.restoreNow};return Qc});var m=c;return m})})(x7);const Sl=Bw;var Pm=w7,b7=Object.prototype.hasOwnProperty;function w7(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var l in r)b7.call(r,l)&&(e[l]=r[l])}return e}var zw={},T7={get exports(){return zw},set exports(e){zw=e}};(function(e,t){(function(){var r={};e.exports=r,r.simpleFilter=function(l,c){return c.filter(function(d){return r.test(l,d)})},r.test=function(l,c){return r.match(l,c)!==null},r.match=function(l,c,d){d=d||{};var m=0,n=[],T=c.length,V=0,Q=0,z=d.pre||"",W=d.post||"",K=d.caseSensitive&&c||c.toLowerCase(),I;l=d.caseSensitive&&l||l.toLowerCase();for(var O=0;O<T;O++)I=c[O],K[O]===l[m]?(I=z+I+W,m+=1,Q+=1+Q):Q=0,V+=Q,n[n.length]=I;return m===l.length?(V=K===l?1/0:V,{rendered:n.join(""),score:V}):null},r.filter=function(l,c,d){return!c||c.length===0?[]:typeof l!="string"?c:(d=d||{},c.reduce(function(m,n,T,V){var Q=n;d.extract&&(Q=d.extract(n));var z=r.match(l,Q,d);return z!=null&&(m[m.length]={string:z.rendered,score:z.score,index:T,original:n}),m},[]).sort(function(m,n){var T=n.score-m.score;return T||m.index-n.index}))}})()})(T7);var Cl=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};Cl.prototype.show=function(){this.element.style.display="block"};Cl.prototype.hide=function(){this.element.style.display="none"};Cl.prototype.add=function(e){this.items.push(e)};Cl.prototype.clear=function(){this.items=[],this.active=0};Cl.prototype.isEmpty=function(){return!this.items.length};Cl.prototype.isVisible=function(){return this.element.style.display==="block"};Cl.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};Cl.prototype.drawItem=function(e,t){var r=document.createElement("li"),l=document.createElement("a");t&&(r.className+=" active"),l.innerHTML=e.string,r.appendChild(l),this.element.appendChild(r),r.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),r.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};Cl.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};Cl.prototype.move=function(e){this.active=e,this.draw()};Cl.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Cl.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Cl.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var S7=Cl,E7=Pm,C7=zw,M7=S7,Ba=function(e,t,r){return r=r||{},this.options=E7({minLength:2,limit:5,filter:!0,hideOnBlur:!0},r),this.el=e,this.data=t||[],this.list=new M7(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(l){this.handleKeyUp(l.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(l){this.handleKeyDown(l)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(l){this.handlePaste(l)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Ba.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};Ba.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Ba.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Ba.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};Ba.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var r=0;r<t.length&&(this.list.add(t[r]),r!==this.options.limit-1);r++);this.list.draw()}.bind(this))};Ba.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Ba.prototype.update=function(e){this.data=e,this.handleKeyUp()};Ba.prototype.clear=function(){this.data=[],this.list.clear()};Ba.prototype.normalize=function(e){return e=e.toLowerCase(),e};Ba.prototype.match=function(e,t){return e.indexOf(t)>-1};Ba.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};Ba.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(l){return this.getItemValue(l)}.bind(this)},r;this.options.filter?(r=C7.filter(this.query,this.data,t),r=r.map(function(l){return{original:l.original,string:this.render(l.original,l.string)}}.bind(this))):r=this.data.map(function(l){var c=this.render(l);return{original:l,string:c}}.bind(this)),e(r)};Ba.prototype.getItemValue=function(e){return e};Ba.prototype.render=function(e,t){if(t)return t;for(var r=e.original?this.getItemValue(e.original):this.getItemValue(e),l=this.normalize(r),c=l.lastIndexOf(this.query);c>-1;){var d=c+this.query.length;r=r.slice(0,c)+"<strong>"+r.slice(c,d)+"</strong>"+r.slice(d),c=l.slice(0,c).lastIndexOf(this.query)}return r};Ba.prototype.renderError=function(e){this.list.drawError(e)};var A7=Ba,A8=A7,k7=A8;typeof window<"u"&&(window.Suggestions=A8);var P7="Expected a function",d5=0/0,D7="[object Symbol]",I7=/^\s+|\s+$/g,L7=/^[-+]0x[0-9a-f]+$/i,O7=/^0b[01]+$/i,R7=/^0o[0-7]+$/i,B7=parseInt,z7=typeof Oo=="object"&&Oo&&Oo.Object===Object&&Oo,N7=typeof self=="object"&&self&&self.Object===Object&&self,F7=z7||N7||Function("return this")(),j7=Object.prototype,U7=j7.toString,G7=Math.max,V7=Math.min,Nb=function(){return F7.Date.now()};function $7(e,t,r){var l,c,d,m,n,T,V=0,Q=!1,z=!1,W=!0;if(typeof e!="function")throw new TypeError(P7);t=u5(t)||0,Nw(r)&&(Q=!!r.leading,z="maxWait"in r,d=z?G7(u5(r.maxWait)||0,t):d,W="trailing"in r?!!r.trailing:W);function K(C){var ie=l,J=c;return l=c=void 0,V=C,m=e.apply(J,ie),m}function I(C){return V=C,n=setTimeout(M,t),Q?K(C):m}function O(C){var ie=C-T,J=C-V,N=t-ie;return z?V7(N,d-J):N}function $(C){var ie=C-T,J=C-V;return T===void 0||ie>=t||ie<0||z&&J>=d}function M(){var C=Nb();if($(C))return S(C);n=setTimeout(M,O(C))}function S(C){return n=void 0,W&&l?K(C):(l=c=void 0,m)}function k(){n!==void 0&&clearTimeout(n),V=0,l=T=c=n=void 0}function G(){return n===void 0?m:S(Nb())}function U(){var C=Nb(),ie=$(C);if(l=arguments,c=this,T=C,ie){if(n===void 0)return I(T);if(z)return n=setTimeout(M,t),K(T)}return n===void 0&&(n=setTimeout(M,t)),m}return U.cancel=k,U.flush=G,U}function Nw(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function H7(e){return!!e&&typeof e=="object"}function W7(e){return typeof e=="symbol"||H7(e)&&U7.call(e)==D7}function u5(e){if(typeof e=="number")return e;if(W7(e))return d5;if(Nw(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Nw(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(I7,"");var r=O7.test(e);return r||R7.test(e)?B7(e.slice(2),r?2:8):L7.test(e)?d5:+e}var Y7=$7,Cv={},X7={get exports(){return Cv},set exports(e){Cv=e}},am=typeof Reflect=="object"?Reflect:null,p5=am&&typeof am.apply=="function"?am.apply:function(t,r,l){return Function.prototype.apply.call(t,r,l)},Ky;am&&typeof am.ownKeys=="function"?Ky=am.ownKeys:Object.getOwnPropertySymbols?Ky=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Ky=function(t){return Object.getOwnPropertyNames(t)};function q7(e){console&&console.warn&&console.warn(e)}var k8=Number.isNaN||function(t){return t!==t};function ds(){ds.init.call(this)}X7.exports=ds;Cv.once=Q7;ds.EventEmitter=ds;ds.prototype._events=void 0;ds.prototype._eventsCount=0;ds.prototype._maxListeners=void 0;var f5=10;function Ex(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ds,"defaultMaxListeners",{enumerable:!0,get:function(){return f5},set:function(e){if(typeof e!="number"||e<0||k8(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");f5=e}});ds.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ds.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||k8(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function P8(e){return e._maxListeners===void 0?ds.defaultMaxListeners:e._maxListeners}ds.prototype.getMaxListeners=function(){return P8(this)};ds.prototype.emit=function(t){for(var r=[],l=1;l<arguments.length;l++)r.push(arguments[l]);var c=t==="error",d=this._events;if(d!==void 0)c=c&&d.error===void 0;else if(!c)return!1;if(c){var m;if(r.length>0&&(m=r[0]),m instanceof Error)throw m;var n=new Error("Unhandled error."+(m?" ("+m.message+")":""));throw n.context=m,n}var T=d[t];if(T===void 0)return!1;if(typeof T=="function")p5(T,this,r);else for(var V=T.length,Q=R8(T,V),l=0;l<V;++l)p5(Q[l],this,r);return!0};function D8(e,t,r,l){var c,d,m;if(Ex(r),d=e._events,d===void 0?(d=e._events=Object.create(null),e._eventsCount=0):(d.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),d=e._events),m=d[t]),m===void 0)m=d[t]=r,++e._eventsCount;else if(typeof m=="function"?m=d[t]=l?[r,m]:[m,r]:l?m.unshift(r):m.push(r),c=P8(e),c>0&&m.length>c&&!m.warned){m.warned=!0;var n=new Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");n.name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=m.length,q7(n)}return e}ds.prototype.addListener=function(t,r){return D8(this,t,r,!1)};ds.prototype.on=ds.prototype.addListener;ds.prototype.prependListener=function(t,r){return D8(this,t,r,!0)};function Z7(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function I8(e,t,r){var l={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},c=Z7.bind(l);return c.listener=r,l.wrapFn=c,c}ds.prototype.once=function(t,r){return Ex(r),this.on(t,I8(this,t,r)),this};ds.prototype.prependOnceListener=function(t,r){return Ex(r),this.prependListener(t,I8(this,t,r)),this};ds.prototype.removeListener=function(t,r){var l,c,d,m,n;if(Ex(r),c=this._events,c===void 0)return this;if(l=c[t],l===void 0)return this;if(l===r||l.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete c[t],c.removeListener&&this.emit("removeListener",t,l.listener||r));else if(typeof l!="function"){for(d=-1,m=l.length-1;m>=0;m--)if(l[m]===r||l[m].listener===r){n=l[m].listener,d=m;break}if(d<0)return this;d===0?l.shift():K7(l,d),l.length===1&&(c[t]=l[0]),c.removeListener!==void 0&&this.emit("removeListener",t,n||r)}return this};ds.prototype.off=ds.prototype.removeListener;ds.prototype.removeAllListeners=function(t){var r,l,c;if(l=this._events,l===void 0)return this;if(l.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):l[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete l[t]),this;if(arguments.length===0){var d=Object.keys(l),m;for(c=0;c<d.length;++c)m=d[c],m!=="removeListener"&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=l[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(c=r.length-1;c>=0;c--)this.removeListener(t,r[c]);return this};function L8(e,t,r){var l=e._events;if(l===void 0)return[];var c=l[t];return c===void 0?[]:typeof c=="function"?r?[c.listener||c]:[c]:r?J7(c):R8(c,c.length)}ds.prototype.listeners=function(t){return L8(this,t,!0)};ds.prototype.rawListeners=function(t){return L8(this,t,!1)};ds.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):O8.call(e,t)};ds.prototype.listenerCount=O8;function O8(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ds.prototype.eventNames=function(){return this._eventsCount>0?Ky(this._events):[]};function R8(e,t){for(var r=new Array(t),l=0;l<t;++l)r[l]=e[l];return r}function K7(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function J7(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Q7(e,t){return new Promise(function(r,l){function c(m){e.removeListener(t,d),l(m)}function d(){typeof e.removeListener=="function"&&e.removeListener("error",c),r([].slice.call(arguments))}B8(e,t,d,{once:!0}),t!=="error"&&eR(e,c,{once:!0})})}function eR(e,t,r){typeof e.on=="function"&&B8(e,"error",t,r)}function B8(e,t,r,l){if(typeof e.on=="function")l.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function c(d){l.once&&e.removeEventListener(t,c),r(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var tR={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function iR(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function nR(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var r=t[1],l=t[2].split(";"),c=null,d=l.reduce(function(m,n){var T=iR(n);return T?T.key==="rel"?(c||(c=T.value),m):(m[T.key]=T.value,m):m},{});return c?{url:r,rel:c,params:d}:null}function rR(e){return e?e.split(/,\s*</).reduce(function(t,r){var l=nR(r);if(!l)return t;var c=l.rel.split(/\s+/);return c.forEach(function(d){t[d]||(t[d]={url:l.url,params:l.params})}),t},{}):{}}var sR=rR,oR=sR;function AT(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=oR(this.headers.link)}AT.prototype.hasNextPage=function(){return!!this.links.next};AT.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var aR=AT,Cx={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},m5=Cx;function lR(e){var t=e.type||m5.ERROR_HTTP,r;if(e.body)try{r=JSON.parse(e.body)}catch{r=e.body}else r=null;var l=e.message||null;l||(typeof r=="string"?l=r:r&&typeof r.message=="string"?l=r.message:t===m5.ERROR_REQUEST_ABORTED&&(l="Request aborted")),this.message=l,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=r}var cR=lR;function hR(e){var t=e.indexOf(":"),r=e.substring(0,t).trim().toLowerCase(),l=e.substring(t+1).trim();return{name:r,value:l}}function dR(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(r){var l=hR(r);t[l.name]=l.value}),t}var uR=dR,pR=aR,g5=cR,Fb=Cx,fR=uR,Mv={};function mR(e){var t=Mv[e.id];t&&(t.abort(),delete Mv[e.id])}function gR(e,t){return new pR(e,{body:t.response,headers:fR(t.getAllResponseHeaders()),statusCode:t.status})}function _5(e){var t=e.total,r=e.loaded,l=100*r/t;return{total:t,transferred:r,percent:l}}function z8(e,t){return new Promise(function(r,l){t.onprogress=function(m){e.emitter.emit(Fb.EVENT_PROGRESS_DOWNLOAD,_5(m))};var c=e.file;c&&(t.upload.onprogress=function(m){e.emitter.emit(Fb.EVENT_PROGRESS_UPLOAD,_5(m))}),t.onerror=function(m){l(m)},t.onabort=function(){var m=new g5({request:e,type:Fb.ERROR_REQUEST_ABORTED});l(m)},t.onload=function(){if(delete Mv[e.id],t.status<200||t.status>=400){var m=new g5({request:e,body:t.response,statusCode:t.status});l(m);return}r(t)};var d=e.body;typeof d=="string"?t.send(d):d?t.send(JSON.stringify(d)):c?t.send(c):t.send(),Mv[e.id]=t}).then(function(r){return gR(e,r)})}function N8(e,t){var r=e.url(t),l=new window.XMLHttpRequest;return l.open(e.method,r),Object.keys(e.headers).forEach(function(c){l.setRequestHeader(c,e.headers[c])}),l}function _R(e){return Promise.resolve().then(function(){var t=N8(e,e.client.accessToken);return z8(e,t)})}var yR={browserAbort:mR,sendRequestXhr:z8,browserSend:_R,createRequestXhr:N8},Av={},vR={get exports(){return Av},set exports(e){Av=e}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(e,t){(function(r){var l=t,c=e&&e.exports==l&&e,d=typeof Oo=="object"&&Oo;(d.global===d||d.window===d)&&(r=d);var m=function(I){this.message=I};m.prototype=new Error,m.prototype.name="InvalidCharacterError";var n=function(I){throw new m(I)},T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V=/[\t\n\f\r ]/g,Q=function(I){I=String(I).replace(V,"");var O=I.length;O%4==0&&(I=I.replace(/==?$/,""),O=I.length),(O%4==1||/[^+a-zA-Z0-9/]/.test(I))&&n("Invalid character: the string to be decoded is not correctly encoded.");for(var $=0,M,S,k="",G=-1;++G<O;)S=T.indexOf(I.charAt(G)),M=$%4?M*64+S:S,$++%4&&(k+=String.fromCharCode(255&M>>(-2*$&6)));return k},z=function(I){I=String(I),/[^\0-\xFF]/.test(I)&&n("The string to be encoded contains characters outside of the Latin1 range.");for(var O=I.length%3,$="",M=-1,S,k,G,U,C=I.length-O;++M<C;)S=I.charCodeAt(M)<<16,k=I.charCodeAt(++M)<<8,G=I.charCodeAt(++M),U=S+k+G,$+=T.charAt(U>>18&63)+T.charAt(U>>12&63)+T.charAt(U>>6&63)+T.charAt(U&63);return O==2?(S=I.charCodeAt(M)<<8,k=I.charCodeAt(++M),U=S+k,$+=T.charAt(U>>10)+T.charAt(U>>4&63)+T.charAt(U<<2&63)+"="):O==1&&(U=I.charCodeAt(M),$+=T.charAt(U>>2)+T.charAt(U<<4&63)+"=="),$},W={encode:z,decode:Q,version:"0.1.0"};if(l&&!l.nodeType)if(c)c.exports=W;else for(var K in W)W.hasOwnProperty(K)&&(l[K]=W[K]);else r.base64=W})(Oo)})(vR,Av);var xR=Av,jb={};function bR(e){if(jb[e])return jb[e];var t=e.split("."),r=t[0],l=t[1];if(!l)throw new Error("Invalid token");var c=wR(l),d={usage:r,user:c.u};return ff(c,"a")&&(d.authorization=c.a),ff(c,"exp")&&(d.expires=c.exp*1e3),ff(c,"iat")&&(d.created=c.iat*1e3),ff(c,"scopes")&&(d.scopes=c.scopes),ff(c,"client")&&(d.client=c.client),ff(c,"ll")&&(d.lastLogin=c.ll),ff(c,"iu")&&(d.impersonator=c.iu),jb[e]=d,d}function wR(e){try{return JSON.parse(xR.decode(e))}catch{throw new Error("Invalid token")}}function ff(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var F8=bR,Fw={},TR={get exports(){return Fw},set exports(e){Fw=e}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(r=!1));function c(T,V,Q){this.fn=T,this.context=V,this.once=Q||!1}function d(T,V,Q,z,W){if(typeof Q!="function")throw new TypeError("The listener must be a function");var K=new c(Q,z||T,W),I=r?r+V:V;return T._events[I]?T._events[I].fn?T._events[I]=[T._events[I],K]:T._events[I].push(K):(T._events[I]=K,T._eventsCount++),T}function m(T,V){--T._eventsCount===0?T._events=new l:delete T._events[V]}function n(){this._events=new l,this._eventsCount=0}n.prototype.eventNames=function(){var V=[],Q,z;if(this._eventsCount===0)return V;for(z in Q=this._events)t.call(Q,z)&&V.push(r?z.slice(1):z);return Object.getOwnPropertySymbols?V.concat(Object.getOwnPropertySymbols(Q)):V},n.prototype.listeners=function(V){var Q=r?r+V:V,z=this._events[Q];if(!z)return[];if(z.fn)return[z.fn];for(var W=0,K=z.length,I=new Array(K);W<K;W++)I[W]=z[W].fn;return I},n.prototype.listenerCount=function(V){var Q=r?r+V:V,z=this._events[Q];return z?z.fn?1:z.length:0},n.prototype.emit=function(V,Q,z,W,K,I){var O=r?r+V:V;if(!this._events[O])return!1;var $=this._events[O],M=arguments.length,S,k;if($.fn){switch($.once&&this.removeListener(V,$.fn,void 0,!0),M){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,Q),!0;case 3:return $.fn.call($.context,Q,z),!0;case 4:return $.fn.call($.context,Q,z,W),!0;case 5:return $.fn.call($.context,Q,z,W,K),!0;case 6:return $.fn.call($.context,Q,z,W,K,I),!0}for(k=1,S=new Array(M-1);k<M;k++)S[k-1]=arguments[k];$.fn.apply($.context,S)}else{var G=$.length,U;for(k=0;k<G;k++)switch($[k].once&&this.removeListener(V,$[k].fn,void 0,!0),M){case 1:$[k].fn.call($[k].context);break;case 2:$[k].fn.call($[k].context,Q);break;case 3:$[k].fn.call($[k].context,Q,z);break;case 4:$[k].fn.call($[k].context,Q,z,W);break;default:if(!S)for(U=1,S=new Array(M-1);U<M;U++)S[U-1]=arguments[U];$[k].fn.apply($[k].context,S)}}return!0},n.prototype.on=function(V,Q,z){return d(this,V,Q,z,!1)},n.prototype.once=function(V,Q,z){return d(this,V,Q,z,!0)},n.prototype.removeListener=function(V,Q,z,W){var K=r?r+V:V;if(!this._events[K])return this;if(!Q)return m(this,K),this;var I=this._events[K];if(I.fn)I.fn===Q&&(!W||I.once)&&(!z||I.context===z)&&m(this,K);else{for(var O=0,$=[],M=I.length;O<M;O++)(I[O].fn!==Q||W&&!I[O].once||z&&I[O].context!==z)&&$.push(I[O]);$.length?this._events[K]=$.length===1?$[0]:$:m(this,K)}return this},n.prototype.removeAllListeners=function(V){var Q;return V?(Q=r?r+V:V,this._events[Q]&&m(this,Q)):(this._events=new l,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=r,n.EventEmitter=n,e.exports=n})(TR);function SR(e){return e.map(encodeURIComponent).join(",")}function j8(e){return Array.isArray(e)?SR(e):encodeURIComponent(String(e))}function U8(e,t,r){if(r===!1||r===null)return e;var l=/\?/.test(e)?"&":"?",c=encodeURIComponent(t);return r!==void 0&&r!==""&&r!==!0&&(c+="="+j8(r)),""+e+l+c}function ER(e,t){if(!t)return e;var r=e;return Object.keys(t).forEach(function(l){var c=t[l];c!==void 0&&(Array.isArray(c)&&(c=c.filter(function(d){return d!=null}).join(",")),r=U8(r,l,c))}),r}function CR(e,t){if(!t||e.slice(0,4)==="http")return e;var r=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+r+e}function MR(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(r,l){var c=t[l];if(c===void 0)throw new Error("Unspecified route parameter "+l);var d=j8(c);return"/"+d}):e}var AR={appendQueryObject:ER,appendQueryParam:U8,prependOrigin:CR,interpolateRouteParams:MR},kR=F8,kT=Pm,PR=Fw,By=AR,y5=Cx,DR=1;function dp(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var r={};t.body&&(r["content-type"]="application/json");var l=kT(r,t.headers),c=Object.keys(l).reduce(function(d,m){return d[m.toLowerCase()]=l[m],d},{});this.id=DR++,this._options=t,this.emitter=new PR,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=c}dp.prototype.url=function(t){var r=By.prependOrigin(this.path,this.origin);r=By.appendQueryObject(r,this.query);var l=this.params,c=t??this.client.accessToken;if(c){r=By.appendQueryParam(r,"access_token",c);var d=kR(c).user;l=kT({ownerId:d},l)}return r=By.interpolateRouteParams(r,l),r};dp.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(r){return t.response=r,t.emitter.emit(y5.EVENT_RESPONSE,r),r},function(r){throw t.error=r,t.emitter.emit(y5.EVENT_ERROR,r),r})};dp.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};dp.prototype.eachPage=function(t){var r=this;function l(m){function n(){delete r._nextPageRequest;var T=m.nextPage();T&&(r._nextPageRequest=T,d(T))}t(null,m,n)}function c(m){t(m,null,function(){})}function d(m){m.send().then(l,c)}d(this)};dp.prototype.clone=function(){return this._extend()};dp.prototype._extend=function(t){var r=kT(this._options,t);return new dp(this.client,r)};var IR=dp,LR=F8,OR=IR,RR=Cx;function G8(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");LR(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||RR.API_ORIGIN}G8.prototype.createRequest=function(t){return new OR(this,t)};var V8=G8,$8=yR,H8=V8;function vm(e){H8.call(this,e)}vm.prototype=Object.create(H8.prototype);vm.prototype.constructor=vm;vm.prototype.sendRequest=$8.browserSend;vm.prototype.abortRequest=$8.browserAbort;function BR(e){return new vm(e)}var W8=BR,zR=W8,NR=zR,FR=Object.prototype.toString,jR=function(e){var t;return FR.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},UR=jR,GR=Pm,Y8="value",Ub=`
  `,ws={};ws.assert=function(e,t){return t=t||{},function(r){var l=up(e,r);if(l){var c=PT(l,t);throw t.apiName&&(c=t.apiName+": "+c),new Error(c)}}};ws.shape=function(t){var r=WR(t);return function(c){var d=up(ws.plainObject,c);if(d)return d;for(var m,n,T=[],V=0;V<r.length;V++)m=r[V].key,n=r[V].value,d=up(n,c[m]),d&&T.push([m].concat(d));return T.length<2?T[0]:function(Q){T=T.map(function(K){var I=K[0],O=PT(K,Q).split(`
`).join(Ub);return"- "+I+": "+O});var z=Q.path.join("."),W=z===Y8?"":" of "+z;return"The following properties"+W+" have invalid values:"+Ub+T.join(Ub)}}};ws.strictShape=function(t){var r=ws.shape(t);return function(c){var d=r(c);if(d)return d;var m=Object.keys(c).reduce(function(n,T){return t[T]===void 0&&n.push(T),n},[]);if(m.length!==0)return function(){return"The following keys are invalid: "+m.join(", ")}}};ws.arrayOf=function(t){return X8(t)};ws.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return X8(t)};function X8(e){var t=Array.isArray(e),r=function(l){return t?e[l]:e};return function(c){var d=up(ws.plainArray,c);if(d)return d;if(t&&c.length!==e.length)return"an array with "+e.length+" items";for(var m=0;m<c.length;m++)if(d=up(r(m),c[m]),d)return[m].concat(d)}}ws.required=function(t){function r(l){return l==null?function(c){return q8(c,Z8(c.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return r.__required=!0,r};ws.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(l){var c=t.map(function(d){return up(d,l)}).filter(Boolean);if(c.length===t.length)return c.every(function(d){return d.length===1&&typeof d[0]=="string"})?VR(c.map(function(d){return d[0]})):c.reduce(function(d,m){return m.length>d.length?m:d})}};ws.equal=function(t){return function(l){if(l!==t)return JSON.stringify(t)}};ws.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),r=t.map(function(l){return ws.equal(l)});return ws.oneOfType.apply(this,r)};ws.range=function(t){var r=t[0],l=t[1];return function(d){var m=up(ws.number,d);if(m||d<r||d>l)return"number between "+r+" & "+l+" (inclusive)"}};ws.any=function(){};ws.boolean=function(t){if(typeof t!="boolean")return"boolean"};ws.number=function(t){if(typeof t!="number")return"number"};ws.plainArray=function(t){if(!Array.isArray(t))return"array"};ws.plainObject=function(t){if(!UR(t))return"object"};ws.string=function(t){if(typeof t!="string")return"string"};ws.func=function(t){if(typeof t!="function")return"function"};function up(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var r=e(t);if(r)return Array.isArray(r)?r:[r]}}function PT(e,t){var r=e.length,l=e[r-1],c=e.slice(0,r-1);return c.length===0&&(c=[Y8]),t=GR(t,{path:c}),typeof l=="function"?l(t):q8(t,$R(l))}function VR(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function $R(e){return"must be "+HR(e)+"."}function HR(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function q8(e,t){var r=Z8(e.path),l=e.path.join(".")+" "+t,c=r?"Item at position ":"";return c+l}function Z8(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function WR(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}ws.validate=up;ws.processMessage=PT;var YR=ws,XR=Pm,lm=YR;function qR(e){if(typeof window<"u")return e instanceof Oo.Blob||e instanceof Oo.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function ZR(e,t){return lm.assert(lm.strictShape(e),t)}function KR(e){var t="date";if(typeof e=="boolean")return t;try{var r=new Date(e);if(r.getTime&&isNaN(r.getTime()))return t}catch{return t}}function JR(e){return lm.tuple(lm.number,lm.number)(e)}var QR=XR(lm,{file:qR,date:KR,coordinates:JR,assertShape:ZR});function eB(e,t){var r=function(l,c){return t.indexOf(l)!==-1&&c!==void 0};return typeof t=="function"&&(r=t),Object.keys(e).filter(function(l){return r(l,e[l])}).reduce(function(l,c){return l[c]=e[c],l},{})}var tB=eB;function iB(e,t){return Object.keys(e).reduce(function(r,l){return r[l]=t(l,e[l]),r},{})}var nB=iB,rB=nB;function sB(e){return rB(e,function(t,r){return typeof r=="boolean"?JSON.stringify(r):r})}var oB=sB,aB=V8,lB=W8;function cB(e){return function(t){var r;aB.prototype.isPrototypeOf(t)?r=t:r=lB(t);var l=Object.create(e);return l.client=r,l}}var hB=cB,K8=Pm,kr=QR,kv=tB,J8=oB,dB=hB,DT={},Q8=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];DT.forwardGeocode=function(e){kr.assertShape({query:kr.required(kr.string),mode:kr.oneOf("mapbox.places","mapbox.places-permanent"),countries:kr.arrayOf(kr.string),proximity:kr.oneOf(kr.coordinates,"ip"),types:kr.arrayOf(kr.oneOf(Q8)),autocomplete:kr.boolean,bbox:kr.arrayOf(kr.number),limit:kr.number,language:kr.arrayOf(kr.string),routing:kr.boolean,fuzzyMatch:kr.boolean,worldview:kr.string})(e),e.mode=e.mode||"mapbox.places";var t=J8(K8({country:e.countries},kv(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:kv(e,["mode","query"]),query:t})};DT.reverseGeocode=function(e){kr.assertShape({query:kr.required(kr.coordinates),mode:kr.oneOf("mapbox.places","mapbox.places-permanent"),countries:kr.arrayOf(kr.string),types:kr.arrayOf(kr.oneOf(Q8)),bbox:kr.arrayOf(kr.number),limit:kr.number,language:kr.arrayOf(kr.string),reverseMode:kr.oneOf("distance","score"),routing:kr.boolean,worldview:kr.string})(e),e.mode=e.mode||"mapbox.places";var t=J8(K8({country:e.countries},kv(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:kv(e,["mode","query"]),query:t})};var uB=dB(DT);let pB="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",eA=e=>crypto.getRandomValues(new Uint8Array(e)),tA=(e,t,r)=>{let l=(2<<Math.log(e.length-1)/Math.LN2)-1,c=-~(1.6*l*t/e.length);return(d=t)=>{let m="";for(;;){let n=r(c),T=c;for(;T--;)if(m+=e[n[T]&l]||"",m.length===d)return m}}},fB=(e,t=21)=>tA(e,t,eA),mB=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");const gB=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:fB,customRandom:tA,nanoid:mB,random:eA,urlAlphabet:pB},Symbol.toStringTag,{value:"Module"})),_B=O5(gB);var yB=_B.nanoid;function iA(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}iA.prototype={select:function(e,t){var r=this.getSelectedIndex(e,t),l=this.getEventPayload("search.select",t);if(l.resultIndex=r,l.resultPlaceName=e.place_name,l.resultId=e.id,!(r===this.lastSentIndex&&l.queryString===this.lastSentInput||r==-1)&&(this.lastSentIndex=r,this.lastSentInput=l.queryString,!!l.queryString))return this.push(l)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var r=this.getEventPayload("search.keystroke",t);if(r.lastAction=e.key,!!r.queryString)return this.push(r)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var r=this.getRequestOptions(e);this.request(r,function(l){if(l)return this.handleError(l,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var r;t.options.proximity?typeof t.options.proximity=="object"?r=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?r=[999,999]:r=t.options.proximity:r=null;var l=t._map?t._map.getZoom():void 0,c={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:r,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:l,keyboardLocale:this.locale};return e==="search.select"?c.queryString=t.inputString:e!="search.select"&&t._inputEl?c.queryString=t._inputEl.value:c.queryString=t.inputString,c},request:function(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},r.open(e.method,e.host+"/"+e.path,!0);for(var l in e.headers){var c=e.headers[l];r.setRequestHeader(l,c)}r.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return yB()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var r=t._typeahead.data,l=e.id,c=r.map(function(m){return m.id}),d=c.indexOf(l);return d}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var vB=iA,xB={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},bB={placeholder:xB},jw={},wB={get exports(){return jw},set exports(e){jw=e}};(function(e){(function(t,r,l){e.exports?e.exports=l():t[r]=l()})(Oo,"subtag",function(){var t="",r=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function l(T){return T.match(r)||[]}function c(T){return l(T).filter(function(V,Q){return V&&Q})}function d(T){return T=l(T),{language:T[1]||t,extlang:T[2]||t,script:T[3]||t,region:T[4]||t}}function m(T,V,Q){Object.defineProperty(T,V,{value:Q,enumerable:!0})}function n(T,V,Q){function z(W){return l(W)[T]||t}m(z,"pattern",V),m(d,Q,z)}return n(1,/^[a-zA-Z]{2,3}$/,"language"),n(2,/^[a-zA-Z]{3}$/,"extlang"),n(3,/^[a-zA-Z]{4}$/,"script"),n(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),m(d,"split",c),d})})(wB);function nA(){}nA.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,r){window.navigator.geolocation.getCurrentPosition(t,r,e)})}};var TB=nA;function SB(e,t){const r=rA(e),l=["address","street","place","country"];var c;if(typeof t=="function")return t(r);const d=l.indexOf(t);return d===-1?c=l:c=l.slice(d),c.reduce(function(m,n){return r[n]?(m!==""&&(m=m+", "),m+r[n]):m},"")}function rA(e){const t=e.address||"",r=e.text||"",l=e.place_name||"",d={address:l.split(",")[0],houseNumber:t,street:r,placeName:l};return e.context.forEach(function(m){const n=m.id.split(".")[0];d[n]=m.text}),d}const EB=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var CB={transformFeatureToGeolocationText:SB,getAddressInfo:rA,REVERSE_GEOCODE_COORD_RGX:EB},MB=k7,AB=Y7,gf=Pm,kB=Cv.EventEmitter,v5=tR,Gb=NR,Vb=uB,PB=vB,DB=bB,IB=jw,LB=TB,x5=CB;const Hu={FORWARD:0,LOCAL:1,REVERSE:2};function OB(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function sA(e){this._eventEmitter=new kB,this.options=gf({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new LB}sA.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(r,l){if(!document.body.contains(l))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const c=r.onAdd();l.appendChild(c)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element ",e,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=Vb(Gb({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new PB(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",AB(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(V){this.eventManager.keyevent(V,this)}.bind(this));var l=document.createElement("div");l.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var c=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(c),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),l.appendChild(this._clearEl),l.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(l),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var d=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(d),l.appendChild(this._geolocateEl),this._showGeolocateButton()}var m=this._typeahead=new MB(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),m.getItemValue=this.options.getItemValue;var n=m.list.draw,T=this._footerNode=OB();return m.list.draw=function(){n.call(this),T.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),T.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(T)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const r={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const l=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(l),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(r).send().then(function(l){const c=l.body.features[0];if(c){const d=x5.transformFeatureToGeolocationText(c,this.options.addressAccuracy);this._setInputValue(d),c.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:c})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),r.innerHTML=t,r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,r=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var l=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,c=l?l.value:"";if(!c)return this.fresh=!0,e.keyCode!==r&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[r,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&l.value.length>=this.options.minLength&&this._geocode(l.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&v5[e.properties.short_code])t=gf({},this.options.flyTo),this._map&&this._map.fitBounds(v5[e.properties.short_code].bbox,t);else if(e.bbox){var r=e.bbox;t=gf({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{var l={zoom:this.options.zoom};t=gf({},l,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var r;return e.localGeocoderOnly?r=Hu.LOCAL:e.reverseGeocode&&x5.REVERSE_GEOCODE_COORD_RGX.test(t)?r=Hu.REVERSE:r=Hu.FORWARD,r},_setupConfig:function(e,t){const r=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],l=/[\s,]+/;var c=this,d=r.reduce(function(n,T){if(c.options[T]===void 0||c.options[T]===null)return n;["countries","types","language"].indexOf(T)>-1?n[T]=c.options[T].split(l):n[T]=c.options[T];const V=typeof c.options[T].longitude=="number"&&typeof c.options[T].latitude=="number";if(T==="proximity"&&V){const Q=c.options[T].longitude,z=c.options[T].latitude;n[T]=[Q,z]}return n},{});switch(e){case Hu.REVERSE:{var m=t.split(l).map(function(n){return parseFloat(n,10)});c.options.flipCoordinates||m.reverse(),d.types&&d.types[0],d=gf(d,{query:m,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(n){n in d&&delete d[n]})}break;case Hu.FORWARD:{const n=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(n)&&(t=t.replace(/,/g," ")),d=gf(d,{query:t})}break}return d},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),r=this._setupConfig(t,e);var l;switch(t){case Hu.LOCAL:l=Promise.resolve();break;case Hu.FORWARD:l=this.geocoderService.forwardGeocode(r).send();break;case Hu.REVERSE:l=this.geocoderService.reverseGeocode(r).send();break}var c=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],d=[],m=null;return l.catch(function(n){m=n}.bind(this)).then(function(n){this._hideLoadingIcon();var T={};return n?n.statusCode=="200"&&(T=n.body,T.request=n.request,T.headers=n.headers):T={type:"FeatureCollection",features:[]},T.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),T.features=T.features?c.concat(T.features):c,this.options.externalGeocoder?(d=this.options.externalGeocoder(e,T.features)||Promise.resolve([]),d.then(function(V){return T.features=T.features?V.concat(T.features):V,T},function(){return T})):T}.bind(this)).then(function(n){if(m)throw m;this.options.filter&&n.features.length&&(n.features=n.features.filter(this.options.filter)),n.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",n),this._typeahead.update(n.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",n))}.bind(this)).catch(function(n){this._hideLoadingIcon(),this._hideAttribution(),c.length&&this.options.localGeocoder||d.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(c)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:c}),this._eventEmitter.emit("error",{error:n})}.bind(this)),l},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var r=t.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=IB.language(e),r=DB.placeholder[t];if(r)return r}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=Vb(Gb({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=Vb(Gb({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t={color:"#4668F2"},r=gf({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(r),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var RB=sA;function BB(){return{map:Cf("mapbox-map")}}var $b=new Map,zB=/onMb([A-Z])(.+)/;function NB(e){return $b.has(e)||$b.set(e,e.replace(zB,(t,r,l)=>r.toLowerCase()+l)),$b.get(e)}function oA(e,t,r=[],l=null){const c=L3(),d=Mm(()=>Object.entries(c).filter(([V,Q])=>V.startsWith("on")&&typeof Q=="function").map(([V])=>V)),m=new Map;function n(V){Array.isArray(V)&&V.forEach(Q=>{const z=m.get(Q);typeof z=="function"&&z()})}function T(V){Array.isArray(V)&&V.forEach(Q=>{const z=NB(Q);if(!r.includes(z))return;const W=(...K)=>{e(`mb-${z}`,...K)};l?(xo(t).on(z,l,W),m.set(Q,()=>{xo(t).off(z,l,W)})):(xo(t).on(z,W),m.set(Q,()=>{xo(t).off(z,W)}))})}Uc(d,(V,Q)=>{const z=Array.isArray(V)?(Q??[]).filter(K=>!V.includes(K)):Q??[],W=Array.isArray(Q)?(V??[]).filter(K=>!Q.includes(K)):V??[];if(xo(t))n(z),T(W);else{const K=Uc(t,I=>{I&&(n(z),T(W),K())})}},{immediate:!0})}function FB(e){return e.charAt(0).toUpperCase()+e.slice(1)}function aA(e,t,r){function l(c){Object.keys(e).filter(d=>e[d]!==void 0&&e[d]!==null).forEach(d=>{var m,n;const T=d==="mapStyle"?"setStyle":`set${FB(d)}`,V=typeof c[T]=="function",Q=typeof r[d]>"u"||"bind"in r[d]?(n=(m=r[d])==null?void 0:m.bind)!=null?n:!1:!0;if(!V||!Q)return;const{type:z}=e[d],W={deep:z===Object||Array.isArray(z)&&z.includes(Object)};Uc(()=>e[d],K=>{c[T](K)},W)})}if(xo(t))l(xo(t));else{const c=Uc(t,d=>{d&&(l(d),c())})}}function jB(e,{propsConfig:t,props:r,emit:l,events:c=[]}){const{map:d}=BB(),m=Zs();return Array.isArray(c)&&c.length&&oA(l,m,c),typeof t<"u"&&aA(r,m,t),Uc(()=>r.position,n=>{xo(d)&&xo(d).removeControl(xo(m)).addControl(xo(m),n)}),td(async()=>{const n=new e(r);xo(d)&&xo(d).addControl(n,r.position),await Em(),m.value=n}),Gf(()=>{xo(m)&&xo(d)&&xo(d).removeControl(xo(m))}),{control:m,map:d}}var lA=(e,t)=>{const r=e.__vccOpts||e;for(const[l,c]of t)r[l]=c;return r};if(!Sl)throw new Error("mapboxgl is not installed.");if(!RB)throw new Error("MapboxGeocoder is not installed.");var UB={key:0},GB={key:1};if(!Sl)throw new Error("mapboxgl is not installed.");var{LngLatBounds:b5,LngLat:VB}=Sl,w5={accessToken:{type:String,default:"no-token"},container:{type:[typeof HTMLElement<"u"&&HTMLElement,String],default:void 0},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},minPitch:{type:Number,default:0},maxPitch:{type:Number,default:60},mapStyle:{type:[Object,String],required:!0},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},pitchWithRotate:{type:Boolean,default:!0},clickTolerance:{type:Number,default:3},attributionControl:{type:Boolean,default:!0},customAttribution:{type:[String,Array],default:null},logoPosition:{type:String,default:"bottom-left"},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},antialias:{type:Boolean,default:!1},refreshExpiredTiles:{type:Boolean,default:!0},maxBounds:{type:[b5,Array],default:void 0},scrollZoom:{type:[Boolean,Object],default:!0},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:[Boolean,Object],default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default:!0},trackResize:{type:Boolean,default:!0},center:{type:[VB,Array,Object],default:()=>[0,0]},zoom:{type:Number,default:0},bearing:{type:Number,default:0},pitch:{type:Number,default:0},bounds:{type:[b5,Array],default:void 0},fitBoundsOptions:{type:Object,default:null},renderWorldCopies:{type:Boolean,default:!0},maxTileCacheSize:{type:Number,default:null},localIdeographFontFamily:{type:String,default:"sans-serif"},transformRequest:{type:Function,default:null},collectResourceTiming:{type:Boolean,default:!1},fadeDuration:{type:Number,default:300},crossSourceCollisions:{type:Boolean,default:!0}},$B=["boxzoomcancel","boxzoomend","boxzoomstart","click","contextmenu","data","dataloading","dblclick","drag","dragend","dragstart","error","idle","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","move","moveend","movestart","pitch","pitchend","pitchstart","remove","render","resize","rotate","rotateend","rotatestart","sourcedata","sourcedataloading","styledata","styledataloading","styleimagemissing","touchcancel","touchend","touchmove","touchstart","webglcontextlost","webglcontextrestored","wheel","zoom","zoomend","zoomstart"],HB={inheritAttrs:!1},WB=Object.assign(HB,{__name:"MapboxMap",props:w5,setup(e,{expose:t,emit:r}){const l=e,c=Zs();Cm("mapbox-map",c);const d=Zs(),m=Zs(!1),n=Mm(()=>{const{accessToken:T,mapStyle:V,...Q}=l;return!Q.container&&d.value&&(Q.container=d.value),{style:V,...Q}});return oA(r,c,$B),aA(l,c,w5),td(()=>{Sl.accessToken=l.accessToken,c.value=new Sl.Map(n.value),c.value.on("load",()=>{m.value=!0}),r("mb-created",c.value);const T=new ResizeObserver(()=>{c.value.resize()});T.observe(n.value.container),Gf(()=>{T.disconnect(),c.value.remove()})}),t({map:c}),(T,V)=>(ki(),Fi(Pr,null,[mt("div",sx({ref_key:"root",ref:d},T.$attrs),null,16),m.value?(ki(),Fi("div",UB,[hh(T.$slots,"default")])):(ki(),Fi("div",GB,[hh(T.$slots,"loader")]))],64))}}),Mx=lA(WB,[["__file","/home/runner/work/vue-mapbox-gl/vue-mapbox-gl/packages/vue-mapbox-gl/components/MapboxMap.vue"]]);if(!Sl)throw new Error("mapboxgl is not installed.");var T5={showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0},visualizePitch:{type:Boolean,default:!1},position:{type:String,default:"top-right",bind:!1}},YB={__name:"MapboxNavigationControl",props:T5,setup(e,{expose:t}){const r=e,{NavigationControl:l}=Sl,{control:c}=jB(l,{props:r,propsConfig:T5});return t({control:c}),(d,m)=>(ki(),Fi("div"))}},Ax=lA(YB,[["__file","/home/runner/work/vue-mapbox-gl/vue-mapbox-gl/packages/vue-mapbox-gl/components/MapboxNavigationControl.vue"]]);const kx="/build/assets/ship-c94d8078.png",Zr=(e,t)=>{const r=e.__vccOpts||e;for(const[l,c]of t)r[l]=c;return r},XB={props:{fleets:Array},data(){return{isExpand:!1,keyword:""}},methods:{searchExpand(){this.isExpand=!this.isExpand;let e=this.$refs.searchBody;this.isExpand?(e.style.display="block",this.$refs.cSearch.style.bottom="40px"):(e.style.display="none",this.$refs.cSearch.style.bottom="unset")},search(){this.keyword.length>=2&&!this.isExpand&&this.searchExpand(),this.keyword.length==0&&this.isExpand&&this.searchExpand()},selected(e){this.$emit("selected",e)}},computed:{filters(){return this.fleets.filter(e=>e.name.toLowerCase().includes(this.keyword.toLowerCase()))}}},qB={class:"ships-list position-absolute",ref:"cSearch"},ZB={class:"card",style:{height:"100%"}},KB={class:"card-header search"},JB={action:"#",method:"get",style:{width:"100%"}},QB={class:"input-icon"},ez=id('<span class="input-icon-addon"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="10" cy="10" r="7"></circle><line x1="21" y1="21" x2="15" y2="15"></line></svg></span>',1),tz={class:"card-actions btn-actions"},iz={key:0,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-left",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},nz=mt("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),rz=mt("polyline",{points:"15 6 9 12 15 18"},null,-1),sz=[nz,rz],oz={key:1,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-down",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},az=mt("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),lz=mt("polyline",{points:"6 9 12 15 18 9"},null,-1),cz=[az,lz],hz={class:"card-body card-body-scrollable card-body-scrollable-shadow search-body",ref:"searchBody"},dz={class:"divide-y pointer"},uz=["onClick"],pz={class:"row"},fz=mt("div",{class:"col-auto"},[mt("span",{class:"avatar",style:{"background-image":"url('')"}})],-1),mz={class:"col p-0"},gz={class:"text-truncate"},_z={class:"text-muted text-sm"},yz={key:0,class:"col-auto"},vz=mt("div",{class:"badge bg-success"},null,-1),xz=mt("span",{class:"text-xs ml-1"},"Online",-1),bz=[vz,xz],wz={key:1,class:"col-auto"},Tz=mt("div",{class:"badge bg-danger"},null,-1),Sz=mt("span",{class:"text-xs ml-1"},"Offline",-1),Ez=[Tz,Sz];function Cz(e,t,r,l,c,d){return ki(),Fi("div",qB,[mt("div",ZB,[mt("div",KB,[mt("form",JB,[mt("div",QB,[ez,Pa(mt("input",{type:"text",onKeyup:t[0]||(t[0]=(...m)=>d.search&&d.search(...m)),"onUpdate:modelValue":t[1]||(t[1]=m=>c.keyword=m),class:"form-control",placeholder:"Search…","aria-label":"Search in website"},null,544),[[Jd,c.keyword]])])]),mt("div",tz,[mt("a",{href:"#",class:"btn-action",onClick:t[2]||(t[2]=(...m)=>d.searchExpand&&d.searchExpand(...m))},[c.isExpand?yr("",!0):(ki(),Fi("svg",iz,sz)),c.isExpand?(ki(),Fi("svg",oz,cz)):yr("",!0)])])]),mt("div",hz,[mt("div",dz,[(ki(!0),Fi(Pr,null,pa(d.filters,m=>(ki(),Fi("div",{key:m.id,onClick:n=>d.selected(m)},[mt("div",pz,[fz,mt("div",mz,[mt("div",gz,Bn(m.name),1),mt("div",_z,Bn(m.imo_number),1)]),m.connected?(ki(),Fi("div",yz,bz)):yr("",!0),m.connected?yr("",!0):(ki(),Fi("div",wz,Ez))])],8,uz))),128))])],512)])],512)}const cA=Zr(XB,[["render",Cz]]),Mz={data(){return{isExpand:!0,notifications:[{id:1,title:"SPEED THROUGH WATER",date:"2022-11-19",desc:"Vessel observed to be in idle condition"},{id:2,title:"SPEED THROUGH WATER",date:"2022-11-19",desc:"Vessel observed to be in idle condition"},{id:3,title:"SPEED THROUGH WATER",date:"2022-11-19",desc:"Vessel observed to be in idle condition"},{id:4,title:"SPEED THROUGH WATER",date:"2022-11-19",desc:"Vessel observed to be in idle condition"},{id:5,title:"SPEED THROUGH WATER",date:"2022-11-19",desc:"Vessel observed to be in idle condition"},{id:6,title:"SPEED THROUGH WATER",date:"2022-11-19",desc:"Vessel observed to be in idle condition"},{id:7,title:"SPEED THROUGH WATER",date:"2022-11-19",desc:"Vessel observed to be in idle condition"},{id:8,title:"SPEED THROUGH WATER",date:"2022-11-19",desc:"Vessel observed to be in idle condition"}],params:{}}},mounted(){this.fetchData()},methods:{notifExpand(){this.isExpand=!this.isExpand;let e=this.$refs.notifBody;this.isExpand?(e.style.display="block",this.$refs.cSearch.style.bottom="150px"):(e.style.display="none",this.$refs.cSearch.style.bottom="unset")},async fetchData(){this.notifications=await axios.get("/api/notifications",{params:this.params}).then(e=>e.data)}}},Dm=e=>(Nf("data-v-cbda607e"),e=e(),Ff(),e),Az={class:"ships-notification",ref:"cSearch"},kz={class:"card",style:{height:"100%"}},Pz={class:"card-header search"},Dz=Dm(()=>mt("h4",{class:"card-title"}," Active Notifications ",-1)),Iz={class:"card-actions btn-actions"},Lz={key:0,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-left",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Oz=Dm(()=>mt("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),Rz=Dm(()=>mt("polyline",{points:"15 6 9 12 15 18"},null,-1)),Bz=[Oz,Rz],zz={key:1,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-down",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Nz=Dm(()=>mt("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),Fz=Dm(()=>mt("polyline",{points:"6 9 12 15 18 9"},null,-1)),jz=[Nz,Fz],Uz={class:"card-body card-body-scrollable card-body-scrollable-shadow notif-body",ref:"notifBody"},Gz={class:"divide-y"},Vz=id('<div class="notif-status" data-v-cbda607e><div class="status-item" data-v-cbda607e><div class="status-icon" data-v-cbda607e><img src="img/icons/alarm.png" alt="" width="20" data-v-cbda607e><span class="fw-bold h6" data-v-cbda607e>2</span></div><div data-v-cbda607e>Alarm</div></div><div class="status-item" data-v-cbda607e><div class="status-icon" data-v-cbda607e><img src="img/icons/volume.png" alt="" width="20" data-v-cbda607e><span class="fw-bold h6" data-v-cbda607e>4</span></div><div data-v-cbda607e>Warning</div></div><div class="status-item" data-v-cbda607e><div class="status-icon" data-v-cbda607e><img src="img/icons/caution.png" alt="" width="20" data-v-cbda607e><span class="fw-bold h6" data-v-cbda607e>2</span></div><div data-v-cbda607e>Caution</div></div><div class="status-item" data-v-cbda607e><div class="status-icon" data-v-cbda607e><img src="img/icons/info-blue.png" alt="" width="20" data-v-cbda607e><span class="fw-bold h6" data-v-cbda607e>2</span></div><div data-v-cbda607e>Info</div></div></div>',1),$z={class:"row"},Hz=Dm(()=>mt("div",{class:"col-auto"},[mt("img",{src:"img/icons/caution.png",alt:"",width:"20"})],-1)),Wz={class:"col"},Yz={class:"fw-bold"},Xz={class:"text-sm"};function qz(e,t,r,l,c,d){return ki(),Fi("div",Az,[mt("div",kz,[mt("div",Pz,[Dz,mt("div",Iz,[mt("a",{href:"#",class:"btn-action",onClick:t[0]||(t[0]=(...m)=>d.notifExpand&&d.notifExpand(...m))},[c.isExpand?yr("",!0):(ki(),Fi("svg",Lz,Bz)),c.isExpand?(ki(),Fi("svg",zz,jz)):yr("",!0)])])]),mt("div",Uz,[mt("div",Gz,[Vz,(ki(!0),Fi(Pr,null,pa(c.notifications,m=>(ki(),Fi("div",{key:m.id,class:"py-2 border-bottom border-white"},[mt("div",$z,[Hz,mt("div",Wz,[mt("div",Yz,Bn(m.title),1),gh(" "+Bn(m.desc)+" ",1),mt("div",Xz,Bn(m.date),1)])])]))),128))])],512)])],512)}const hA=Zr(Mz,[["render",qz],["__scopeId","data-v-cbda607e"]]),Zz={},Kz={class:"ships-records"},Jz=id('<div class="card" data-v-b06cef02><div class="card-header" data-v-b06cef02><div class="text-center" data-v-b06cef02><img src="img/singapore.png" alt="" data-v-b06cef02><div class="text-white" data-v-b06cef02>PRO</div></div><div class="w-100 d-flex align-items-start justify-content-between" data-v-b06cef02><div class="card-title" data-v-b06cef02><div data-v-b06cef02>Widuri</div><small class="text-white" data-v-b06cef02>Fleet II</small></div><div class="card-status" data-v-b06cef02><div class="status-box bg-online" data-v-b06cef02></div><div class="text-white" data-v-b06cef02>Online</div></div></div></div><div class="card-body" data-v-b06cef02><div data-v-b06cef02>under way using engine</div><div class="d-flex align-items-center justify-content-between" data-v-b06cef02><div data-v-b06cef02>ATD 27/5</div><div data-v-b06cef02>ETA 10/6</div></div><div class="d-flex align-items-center justify-content-between mb-3" data-v-b06cef02><div data-v-b06cef02>Singapura</div><div data-v-b06cef02>Jakarta</div></div><div class="ships-route-ltr" data-v-b06cef02></div></div></div>',1),Qz=[Jz];function eN(e,t,r,l,c,d){return ki(),Fi("div",Kz,Qz)}const dA=Zr(Zz,[["render",eN],["__scopeId","data-v-b06cef02"]]),tN={},iN={class:"ships-navigations"},nN=id('<div class="card" data-v-23fc79b0><div class="card-header" data-v-23fc79b0><div class="card-title" data-v-23fc79b0><div data-v-23fc79b0>Navigation</div></div><div class="card-status" data-v-23fc79b0><a href="#" data-v-23fc79b0><img src="img/icons/arrow-topright.png" alt="" data-v-23fc79b0></a></div></div><div class="card-body" data-v-23fc79b0><div class="d-flex align-items-center justify-content-between mb-3 gap-5" data-v-23fc79b0><div data-v-23fc79b0><h6 class="m-0" data-v-23fc79b0>15.015 knots</h6><small data-v-23fc79b0>Speed (Ground)</small></div><div data-v-23fc79b0><h6 class="m-0" data-v-23fc79b0>13.679 knots</h6><small data-v-23fc79b0>Speed (Water)</small></div></div><div class="d-flex align-items-center justify-content-between mb-3 gap-5" data-v-23fc79b0><div data-v-23fc79b0><h6 class="m-0" data-v-23fc79b0>181.87 deg</h6><small data-v-23fc79b0>Course (Ground)</small></div><div data-v-23fc79b0><h6 class="m-0" data-v-23fc79b0>13.224 knots</h6><small data-v-23fc79b0>Wiind Speed</small></div></div><div class="ships-route-ltr" data-v-23fc79b0></div></div></div><div class="card" data-v-23fc79b0><div class="card-header" data-v-23fc79b0><div class="card-title" data-v-23fc79b0><div data-v-23fc79b0>Navigation</div></div><div class="card-status" data-v-23fc79b0><a href="#" data-v-23fc79b0><img src="img/icons/arrow-topright.png" alt="" data-v-23fc79b0></a></div></div><div class="card-body" data-v-23fc79b0><div class="d-flex align-items-center justify-content-between mb-3 gap-5" data-v-23fc79b0><div data-v-23fc79b0><h6 class="m-0" data-v-23fc79b0>15.015 knots</h6><small data-v-23fc79b0>Speed (Ground)</small></div><div data-v-23fc79b0><h6 class="m-0" data-v-23fc79b0>13.679 knots</h6><small data-v-23fc79b0>Speed (Water)</small></div></div><div class="d-flex align-items-center justify-content-between mb-3 gap-5" data-v-23fc79b0><div data-v-23fc79b0><h6 class="m-0" data-v-23fc79b0>181.87 deg</h6><small data-v-23fc79b0>Course (Ground)</small></div><div data-v-23fc79b0><h6 class="m-0" data-v-23fc79b0>13.224 knots</h6><small data-v-23fc79b0>Wiind Speed</small></div></div><div class="ships-route-ltr" data-v-23fc79b0></div></div></div>',2),rN=[nN];function sN(e,t,r,l,c,d){return ki(),Fi("div",iN,rN)}const uA=Zr(tN,[["render",sN],["__scopeId","data-v-23fc79b0"]]),oN={},aN={class:"ships-camera"},lN=id('<a href="" data-v-34ce2568><div class="card" data-v-34ce2568><div class="card-header" data-v-34ce2568><div class="card-title" data-v-34ce2568><div data-v-34ce2568>Front View</div></div></div><div class="card-body" data-v-34ce2568><div class="d-flex align-items-center flex-column gap-1" data-v-34ce2568><img src="img/icons/camera.png" alt="" data-v-34ce2568><small data-v-34ce2568>Camera</small></div></div></div></a><a href="" data-v-34ce2568><div class="card" data-v-34ce2568><div class="card-header" data-v-34ce2568><div class="card-title" data-v-34ce2568><div data-v-34ce2568>Bridge</div></div></div><div class="card-body" data-v-34ce2568><div class="d-flex align-items-center flex-column gap-1" data-v-34ce2568><img src="img/icons/camera.png" alt="" data-v-34ce2568><small data-v-34ce2568>Camera</small></div></div></div></a>',2),cN=[lN];function hN(e,t,r,l,c,d){return ki(),Fi("div",aN,cN)}const pA=Zr(oN,[["render",hN],["__scopeId","data-v-34ce2568"]]),dN={data(){return{isExpand:!0,parameter:[{id:1,title:"SPEED THROUGH WATER",value:"13.8",format:"KNOTS"},{id:2,title:"SPEED OVER GROUND",value:"14.9",format:"KNOTS"},{id:3,title:"ME SHAFT POWER",value:"4852",format:"KW"},{id:4,title:"ME RPM",value:"95",format:"RPM"},{id:5,title:"ME FO",value:"26.5",format:"FO"}],params:{}}},mounted(){this.fetchData()},methods:{notifExpand(){this.isExpand=!this.isExpand;let e=this.$refs.notifBody;this.isExpand?(e.style.display="block",this.$refs.cSearch.style.bottom="150px"):(e.style.display="none",this.$refs.cSearch.style.bottom="unset")},async fetchData(){this.notifications=await axios.get("/api/notifications",{params:this.params}).then(e=>e.data)}}},gp=e=>(Nf("data-v-82e529c6"),e=e(),Ff(),e),uN={class:"ships-parameter",ref:"cSearch"},pN={class:"card",style:{height:"100%"}},fN={class:"card-header search"},mN=gp(()=>mt("h4",{class:"card-title"}," KEY PARAMETER ",-1)),gN={class:"card-actions btn-actions"},_N={key:0,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-left",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},yN=gp(()=>mt("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),vN=gp(()=>mt("polyline",{points:"15 6 9 12 15 18"},null,-1)),xN=[yN,vN],bN={key:1,xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-down",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},wN=gp(()=>mt("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),TN=gp(()=>mt("polyline",{points:"6 9 12 15 18 9"},null,-1)),SN=[wN,TN],EN={class:"card-body card-body-scrollable card-body-scrollable-shadow notif-body",ref:"notifBody"},CN={class:"divide-y"},MN=gp(()=>mt("ul",{class:"nav nav-pills nav-justified",id:"pills-tab",role:"tablist"},[mt("li",{class:"nav-item",role:"presentation"},[mt("button",{class:"nav-link justify-content-center active",id:"pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#pills-home",type:"button",role:"tab","aria-controls":"pills-home","aria-selected":"true"},"DAILY AVG")]),mt("li",{class:"nav-item",role:"presentation"},[mt("button",{class:"nav-link justify-content-center",id:"pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#pills-profile",type:"button",role:"tab","aria-controls":"pills-profile","aria-selected":"false"},"PRESENT VALUES")])],-1)),AN={class:"tab-content",id:"pills-tabContent"},kN={class:"tab-pane fade show active",id:"pills-home",role:"tabpanel","aria-labelledby":"pills-home-tab"},PN={class:"row align-items-center"},DN={class:"col-6"},IN={class:"fw-bold"},LN={class:"col-6 text-center"},ON={class:"fw-normal"},RN={class:"text-sm"},BN=gp(()=>mt("div",{class:"py-2 border-bottom border-white"},[mt("div",{class:"row align-items-center"},[mt("div",{class:"col-12"},[mt("div",{class:""},"NOTE: Daily average is calculated at 12 PM UTC")])])],-1)),zN=gp(()=>mt("div",{class:"tab-pane fade",id:"pills-profile",role:"tabpanel","aria-labelledby":"pills-profile-tab"}," ... ",-1));function NN(e,t,r,l,c,d){return ki(),Fi("div",uN,[mt("div",pN,[mt("div",fN,[mN,mt("div",gN,[mt("a",{href:"#",class:"btn-action",onClick:t[0]||(t[0]=(...m)=>d.notifExpand&&d.notifExpand(...m))},[c.isExpand?yr("",!0):(ki(),Fi("svg",_N,xN)),c.isExpand?(ki(),Fi("svg",bN,SN)):yr("",!0)])])]),mt("div",EN,[mt("div",CN,[MN,mt("div",AN,[mt("div",kN,[(ki(!0),Fi(Pr,null,pa(c.parameter,m=>(ki(),Fi("div",{key:m.id,class:"py-2 border-bottom border-white"},[mt("div",PN,[mt("div",DN,[mt("div",IN,Bn(m.title),1)]),mt("div",LN,[mt("h2",ON,Bn(m.value),1),mt("div",RN,Bn(m.format),1)])])]))),128)),BN]),zN])])],512)])],512)}const fA=Zr(dN,[["render",NN],["__scopeId","data-v-82e529c6"]]);var FN=["second","minute","hour","day","week","month","year"];function jN(e,t){if(t===0)return["just now","right now"];var r=FN[Math.floor(t/2)];return e>1&&(r+="s"),[e+" "+r+" ago","in "+e+" "+r]}var UN=["秒","分钟","小时","天","周","个月","年"];function GN(e,t){if(t===0)return["刚刚","片刻后"];var r=UN[~~(t/2)];return[e+" "+r+"前",e+" "+r+"后"]}var Uw={},mA=function(e,t){Uw[e]=t},VN=function(e){return Uw[e]||Uw.en_US},Hb=[60,60,24,7,365/7/12,12];function S5(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function $N(e,t){var r=e<0?1:0;e=Math.abs(e);for(var l=e,c=0;e>=Hb[c]&&c<Hb.length;c++)e/=Hb[c];return e=Math.floor(e),c*=2,e>(c===0?9:1)&&(c+=1),t(e,c,l)[r].replace("%s",e.toString())}function HN(e,t){var r=t?S5(t):new Date;return(+r-+S5(e))/1e3}var xm=function(e,t,r){var l=HN(e,r&&r.relativeDate);return $N(l,VN(t))};mA("en_US",jN);mA("zh_CN",GN);const WN={components:{"x-search":cA,"x-notification":hA,"x-records":dA,"x-navigation":uA,"x-camera":pA,"x-parameter":fA,MapboxMap:Mx,MapboxNavigationControl:Ax},data(){return{map:null,current:[],timer:null,fleets:[],zoom:3,center:[118,0],popup:null}},mounted(){this.timer=setInterval(()=>{this.loaded()},15*1e3),this.map.loadImage(kx,(e,t)=>{if(e)throw e;this.map.addImage("ship",t)}),this.popup=new Sl.Popup({closeButton:!0,closeOnClick:!1})},methods:{async loaded(){let{data:e}=await axios.get("/api/fleets");this.fleets=e,e.forEach(t=>{this.positionShip(t)})},findFleet(e){if(!e.navigation)return;let t=e.id;this.popup.remove();const r=`<a class="no-style" href="/fleet/${t}"><b>${e.name} [ID]</b> at ${e.navigation.sog} <b>kn</b> / ${e.navigation.cog}&deg;<br>last update: <b>${xm(e.navigation.updated_at)}</b></a>`;this.popup.setLngLat([e.navigation.lng,e.navigation.lat]).setHTML(r).addTo(this.map),this.center=[e.navigation.lng,e.navigation.lat],this.zoom=5},pointerLocation(e){let t=e.lngLat.wrap();this.$refs.pointerInfo.innerHTML=`<span> ${t.lat.toFixed(5)}</span><span> ${t.lng.toFixed(5)}</span>`},positionShip(e){if(!e.navigation)return;let t=this;typeof this.map.getLayer(`ship-positions-${e.id}`)<"u"&&this.map.removeLayer(`ship-positions-${e.id}`).removeSource(`ship-positions-${e.id}`),this.map.addSource(`ship-positions-${e.id}`,{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e.navigation.lng,e.navigation.lat]},properties:{scale:1,id:e.id,heading:e.navigation.heading,name:e.name,image:e.image,sog:e.navigation.sog,cog:e.navigation.cog,last_update:xm(e.navigation.updated_at)}}]}}),this.map.addLayer({id:`ship-positions-${e.id}`,type:"symbol",source:`ship-positions-${e.id}`,layout:{"icon-image":"ship","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-size":.3,"icon-rotate":{property:"heading",stops:[[-360,-360],[0,0],[360,360]]},"icon-rotation-alignment":"map"}});const l=new Sl.Popup({closeButton:!1,closeOnClick:!1});this.map.on("click",`ship-positions-${e.id}`,c=>{let d=c.features[0].properties.id;location.href=`/fleet/${d}`}),this.map.on("mouseenter",`ship-positions-${e.id}`,c=>{t.map.getCanvas().style.cursor="pointer";const d=c.features[0].geometry.coordinates.slice(),m=`<b>${c.features[0].properties.name} [ID]</b> at ${c.features[0].properties.sog} <b>kn</b> / ${c.features[0].properties.cog}&deg;<br>last update: <b>${c.features[0].properties.last_update}</b>`;for(;Math.abs(c.lngLat.lng-d[0])>180;)d[0]+=c.lngLat.lng>d[0]?360:-360;l.setLngLat(d).setHTML(m).addTo(t.map)}),this.map.on("mouseleave",`ship-positions-${e.id}`,()=>{t.map.getCanvas().style.cursor="",l.remove()})}}},YN={class:"position-relative"},XN={class:"pointer-info",ref:"pointerInfo"};function qN(e,t,r,l,c,d){const m=ar("x-search"),n=ar("MapboxNavigationControl"),T=ar("MapboxMap");return ki(),Fi("div",YN,[Ji(m,{fleets:c.fleets,onSelected:d.findFleet},null,8,["fleets","onSelected"]),mt("div",XN,null,512),Ji(T,{onMbCreated:t[0]||(t[0]=V=>c.map=V),onMbLoad:d.loaded,onMbMousemove:d.pointerLocation,style:{height:"calc(100vh - 128px)",width:"100%"},"access-token":"pk.eyJ1Ijoia3JvbmljayIsImEiOiJjaWxyZGZwcHQwOHRidWxrbnd0OTB0cDBzIn0.u2R3NY5PnevWH3cHRk6TWQ","map-style":"mapbox://styles/mapbox/navigation-day-v1",center:c.center,zoom:c.zoom},{default:js(()=>[Ji(n,{position:"bottom-right"})]),_:1},8,["onMbLoad","onMbMousemove","center","zoom"])])}const ZN=Zr(WN,[["render",qN]]),KN=[{time:1673037001e3,id:"c78219c1-d81e-4d33-8984-e39fa3710bfa",ship_id:1,terminal_time:"2023-01-06 20:30:01",lat:-6.009818,lng:106.900525,wind_speed:17.4,wind_direction:21,heading:249.1,distance:88548.42,depth:-12,cog:282.6,sog:0,created_at:"2023-01-07 08:06:28",updated_at:"2023-01-07 08:06:28"},{time:1673037901e3,id:"ee8ec98d-526d-46bf-9d00-ec50433fafb3",ship_id:1,terminal_time:"2023-01-06 20:45:01",lat:-6.009707,lng:106.900482,wind_speed:19.6,wind_direction:15.4,heading:242.9,distance:88548.43,depth:-12.1,cog:358.3,sog:0,created_at:"2023-01-07 08:07:15",updated_at:"2023-01-07 08:07:15"},{time:1673038801e3,id:"22cab800-8d22-44fb-abc1-f5fafd1947a3",ship_id:1,terminal_time:"2023-01-06 21:00:01",lat:-6.00976,lng:106.90053,wind_speed:17.1,wind_direction:16.8,heading:247,distance:88548.44,depth:-12.3,cog:285.2,sog:.1,created_at:"2023-01-07 08:07:02",updated_at:"2023-01-07 08:07:02"},{time:1673039701e3,id:"ee9bb42d-3fac-455b-8140-e032fc3abdcc",ship_id:1,terminal_time:"2023-01-06 21:15:01",lat:-6.0098,lng:106.900533,wind_speed:16.5,wind_direction:19.6,heading:247.1,distance:88548.45,depth:-12.1,cog:208.1,sog:.1,created_at:"2023-01-07 08:06:48",updated_at:"2023-01-07 08:06:48"},{time:1673040601e3,id:"9bf240fd-0767-4f62-94c9-91a4ef95f0cd",ship_id:1,terminal_time:"2023-01-06 21:30:01",lat:-6.009815,lng:106.900515,wind_speed:18.8,wind_direction:21,heading:248,distance:88548.46,depth:-12.1,cog:192.2,sog:0,created_at:"2023-01-07 08:06:43",updated_at:"2023-01-07 08:06:43"},{time:1673041501e3,id:"f4b05071-bc72-44fd-b58b-63e43e69112b",ship_id:1,terminal_time:"2023-01-06 21:45:01",lat:-6.00981,lng:106.900533,wind_speed:18.8,wind_direction:19.6,heading:0,distance:0,depth:-12.1,cog:79.9,sog:0,created_at:"2023-01-07 08:07:29",updated_at:"2023-01-07 08:07:29"},{time:1673042401e3,id:"2d2f89d4-18d5-4ac9-b08b-949a44cad43a",ship_id:1,terminal_time:"2023-01-06 22:00:01",lat:-6.009765,lng:106.900487,wind_speed:15.1,wind_direction:16.8,heading:0,distance:0,depth:-12.1,cog:11.7,sog:0,created_at:"2023-01-07 08:08:00",updated_at:"2023-01-07 08:08:00"},{time:1673043301e3,id:"e79b359c-6eb7-41e3-a526-c4c06282e62a",ship_id:1,terminal_time:"2023-01-06 22:15:01",lat:-6.009688,lng:106.900457,wind_speed:18.6,wind_direction:11.2,heading:242.7,distance:88548.47,depth:-12.1,cog:121.2,sog:0,created_at:"2023-01-07 08:07:47",updated_at:"2023-01-07 08:07:47"},{time:1673044201e3,id:"2750d1e6-4e3c-4946-a145-3e66185627ef",ship_id:1,terminal_time:"2023-01-06 22:30:01",lat:-6.009655,lng:106.900433,wind_speed:14.7,wind_direction:12.5,heading:242.4,distance:88548.48,depth:-12.1,cog:185.9,sog:.1,created_at:"2023-01-07 08:07:40",updated_at:"2023-01-07 08:07:40"},{time:1673045101e3,id:"85d26971-e86f-4f16-8fa5-bc711fcb9b91",ship_id:1,terminal_time:"2023-01-06 22:45:01",lat:-6.0096,lng:106.900403,wind_speed:13.2,wind_direction:11.2,heading:239.6,distance:88548.48,depth:-12.1,cog:180.1,sog:0,created_at:"2023-01-07 08:08:22",updated_at:"2023-01-07 08:08:22"},{time:1673046001e3,id:"06fa9922-e8d6-41c9-886e-e5295949399c",ship_id:1,terminal_time:"2023-01-06 23:00:01",lat:-16.056667,lng:116.8825,wind_speed:16.3,wind_direction:16.8,heading:241.5,distance:88548.49,depth:-12.1,cog:0,sog:0,created_at:"2023-01-07 08:08:11",updated_at:"2023-01-07 08:08:11"},{time:1673046901e3,id:"557403a0-0bc2-42f1-9a07-646c8d66822e",ship_id:1,terminal_time:"2023-01-06 23:15:01",lat:-6.009613,lng:106.900427,wind_speed:18.6,wind_direction:16.8,heading:240.7,distance:88548.49,depth:-12.3,cog:.9,sog:0,created_at:"2023-01-07 08:08:10",updated_at:"2023-01-07 08:08:10"},{time:1673047801e3,id:"bb7144ef-0827-4d3d-9c7b-b0bb7881f441",ship_id:1,terminal_time:"2023-01-06 23:30:01",lat:-6.009658,lng:106.900407,wind_speed:14.1,wind_direction:21,heading:0,distance:0,depth:-12.3,cog:192.5,sog:0,created_at:"2023-01-07 08:07:55",updated_at:"2023-01-07 08:07:55"},{time:1673048701e3,id:"8df2a863-e7d4-4c66-ab22-310f7ac661f2",ship_id:1,terminal_time:"2023-01-06 23:45:01",lat:-6.009732,lng:106.900458,wind_speed:15.7,wind_direction:21,heading:244.8,distance:88548.49,depth:-12.3,cog:152.6,sog:0,created_at:"2023-01-07 08:08:26",updated_at:"2023-01-07 08:08:26"},{time:1673049601e3,id:"e7d31596-5cc9-4fab-850b-c892908430b8",ship_id:1,terminal_time:"2023-01-07 00:00:01",lat:-6.009775,lng:106.900575,wind_speed:19.8,wind_direction:21,heading:250.9,distance:88548.5,depth:-12.3,cog:178.6,sog:.1,created_at:"2023-01-07 08:08:38",updated_at:"2023-01-07 08:08:38"},{time:1673050503e3,id:"1ae1dd53-7f4b-48cb-9aa3-af6f97274fdb",ship_id:1,terminal_time:"2023-01-07 00:15:03",lat:-6.010635,lng:106.898792,wind_speed:21.1,wind_direction:33.6,heading:236.2,distance:88548.61,depth:-12.3,cog:236.1,sog:2.5,created_at:"2023-01-07 08:09:21",updated_at:"2023-01-07 08:09:21"},{time:1673051403e3,id:"c12a6b0d-c9db-4451-a7c5-6f13c29e0954",ship_id:1,terminal_time:"2023-01-07 00:30:03",lat:-6.030335,lng:106.886345,wind_speed:19.8,wind_direction:54.9,heading:195.2,distance:88550.03,depth:-10.6,cog:193.8,sog:7.1,created_at:"2023-01-07 08:08:47",updated_at:"2023-01-07 08:08:47"},{time:1673052303e3,id:"c5971d9c-2c92-4736-950d-6734e6b305cd",ship_id:1,terminal_time:"2023-01-07 00:45:03",lat:-6.059783,lng:106.883237,wind_speed:19.6,wind_direction:67.5,heading:185.4,distance:88551.81,depth:-9.3,cog:182.4,sog:6.5,created_at:"2023-01-07 08:09:35",updated_at:"2023-01-07 08:09:35"},{time:1673053308e3,id:"bd9913a5-6be1-4c3b-89d1-938a9cf2f382",ship_id:1,terminal_time:"2023-01-07 01:01:48",lat:-6.08938,lng:106.883468,wind_speed:16.3,wind_direction:78.7,heading:0,distance:0,depth:-9,cog:161.9,sog:8.8,created_at:"2023-01-07 08:09:28",updated_at:"2023-01-07 08:09:28"},{time:1673054103e3,id:"aac0a1a7-cf35-4a7c-bdff-faef950524be",ship_id:1,terminal_time:"2023-01-07 01:15:03",lat:-6.095888,lng:106.902867,wind_speed:7.9,wind_direction:168.9,heading:0,distance:0,depth:-8.5,cog:97.1,sog:4.1,created_at:"2023-01-07 08:09:07",updated_at:"2023-01-07 08:09:07"},{time:1673055003e3,id:"db38b400-18fe-4637-84bc-441c4333900c",ship_id:1,terminal_time:"2023-01-07 01:30:03",lat:-6.100858,lng:106.906243,wind_speed:6.2,wind_direction:259,heading:0,distance:0,depth:-6,cog:181,sog:1,created_at:"2023-01-07 08:09:40",updated_at:"2023-01-07 08:09:40"},{time:1673055903e3,id:"52f58367-b5da-4516-99ac-401425b6889a",ship_id:1,terminal_time:"2023-01-07 01:45:03",lat:-6.101412,lng:106.90592,wind_speed:7.7,wind_direction:270.3,heading:0,distance:88555.15,depth:-2.1,cog:209.8,sog:0,created_at:"2023-01-07 08:09:32",updated_at:"2023-01-07 08:09:32"},{time:1673056803e3,id:"f8144029-2e71-4a9f-a077-871b58532749",ship_id:1,terminal_time:"2023-01-07 02:00:03",lat:-6.101405,lng:106.905882,wind_speed:3.3,wind_direction:280,heading:0,distance:88555.16,depth:-2.1,cog:349.2,sog:0,created_at:"2023-01-07 08:09:31",updated_at:"2023-01-07 08:09:31"},{time:1673057703e3,id:"03be7e48-aa1c-4ffb-8c39-402c203a283e",ship_id:1,terminal_time:"2023-01-07 02:15:03",lat:-6.101395,lng:106.905868,wind_speed:8.1,wind_direction:281.5,heading:359.9,distance:88555.18,depth:-2.1,cog:328.8,sog:.1,created_at:"2023-01-07 08:10:05",updated_at:"2023-01-07 08:10:05"},{time:1673058603e3,id:"fa44cb0f-6f3d-4e8d-b2b5-6540c952f48b",ship_id:1,terminal_time:"2023-01-07 02:30:03",lat:-6.101392,lng:106.90591,wind_speed:11,wind_direction:259,heading:359.9,distance:88555.18,depth:-2.1,cog:302,sog:0,created_at:"2023-01-07 08:10:07",updated_at:"2023-01-07 08:10:07"},{time:1673059503e3,id:"75810f78-b08f-42b1-a508-ee1b5d13c9e5",ship_id:1,terminal_time:"2023-01-07 02:45:03",lat:-6.101392,lng:106.90587,wind_speed:11,wind_direction:274.5,heading:359.7,distance:88555.19,depth:-2.1,cog:336.9,sog:.1,created_at:"2023-01-07 08:10:09",updated_at:"2023-01-07 08:10:09"},{time:1673060403e3,id:"b8076a15-7e98-4b6b-af9b-0261c6d1ce26",ship_id:1,terminal_time:"2023-01-07 03:00:03",lat:-6.101413,lng:106.905907,wind_speed:9.3,wind_direction:267.4,heading:359.5,distance:88555.2,depth:-2.1,cog:327.9,sog:0,created_at:"2023-01-07 08:09:38",updated_at:"2023-01-07 08:09:38"},{time:1673061303e3,id:"32656a8d-db24-44cc-af81-a149b2fa4e1f",ship_id:1,terminal_time:"2023-01-07 03:15:03",lat:-6.101405,lng:106.905922,wind_speed:8.5,wind_direction:270.3,heading:359.3,distance:88555.2,depth:-5.5,cog:34.4,sog:.1,created_at:"2023-01-07 08:10:40",updated_at:"2023-01-07 08:10:40"},{time:1673062203e3,id:"3e3fcfcf-19d1-4d33-857a-f68b14328338",ship_id:1,terminal_time:"2023-01-07 03:30:03",lat:-6.101402,lng:106.905877,wind_speed:6.2,wind_direction:268.8,heading:359.5,distance:88555.2,depth:-2.1,cog:292.1,sog:0,created_at:"2023-01-07 08:10:33",updated_at:"2023-01-07 08:10:33"},{time:1673063103e3,id:"1c4697c3-b6e6-4eb4-b165-94d5d36d3aa1",ship_id:1,terminal_time:"2023-01-07 03:45:03",lat:-6.10142,lng:106.905858,wind_speed:5.2,wind_direction:264.5,heading:359.7,distance:88555.2,depth:-2.1,cog:129.7,sog:0,created_at:"2023-01-07 08:10:44",updated_at:"2023-01-07 08:10:44"},{time:1673064003e3,id:"ba69338a-3d22-4a08-bb11-d3f886eb6c9b",ship_id:1,terminal_time:"2023-01-07 04:00:03",lat:-6.101392,lng:106.905878,wind_speed:5.6,wind_direction:264.5,heading:359.8,distance:88555.2,depth:-2.3,cog:233.4,sog:0,created_at:"2023-01-07 08:10:39",updated_at:"2023-01-07 08:10:39"},{time:1673064903e3,id:"bd930a40-a514-4c87-8044-e8633e1c1c52",ship_id:1,terminal_time:"2023-01-07 04:15:03",lat:-6.101395,lng:106.905902,wind_speed:6.4,wind_direction:252,heading:359.7,distance:88555.2,depth:0,cog:274.4,sog:0,created_at:"2023-01-07 08:11:40",updated_at:"2023-01-07 08:11:40"},{time:1673065803e3,id:"6544c411-e0b0-40bb-bf1e-efd22c3a2595",ship_id:1,terminal_time:"2023-01-07 04:30:03",lat:-6.101398,lng:106.905932,wind_speed:5.4,wind_direction:252,heading:359.7,distance:88555.2,depth:-2.5,cog:276.2,sog:0,created_at:"2023-01-07 08:11:26",updated_at:"2023-01-07 08:11:26"},{time:1673066703e3,id:"02b25b22-4c20-48a6-a3ad-5944f017c3b9",ship_id:1,terminal_time:"2023-01-07 04:45:03",lat:-6.101387,lng:106.9059,wind_speed:9.3,wind_direction:257.5,heading:0,distance:0,depth:-2.5,cog:163.2,sog:0,created_at:"2023-01-07 08:10:53",updated_at:"2023-01-07 08:10:53"},{time:1673067608e3,id:"523c3936-bffc-4662-9879-e3dff459febf",ship_id:1,terminal_time:"2023-01-07 05:00:08",lat:-6.101402,lng:106.905932,wind_speed:3.6,wind_direction:257.5,heading:359.7,distance:88555.21,depth:-2.5,cog:195.8,sog:0,created_at:"2023-01-07 08:11:05",updated_at:"2023-01-07 08:11:05"},{time:1673068503e3,id:"ccdee8cd-a739-471e-9dfc-0aa08c034f7a",ship_id:1,terminal_time:"2023-01-07 05:15:03",lat:-6.101402,lng:106.905907,wind_speed:6,wind_direction:257.5,heading:359.6,distance:88555.21,depth:-6.1,cog:162.3,sog:0,created_at:"2023-01-07 08:10:45",updated_at:"2023-01-07 08:10:45"},{time:1673069403e3,id:"d3d4589c-77e7-48fc-b418-c5957dae636d",ship_id:1,terminal_time:"2023-01-07 05:30:03",lat:-6.101398,lng:106.905877,wind_speed:7.7,wind_direction:263.1,heading:359.6,distance:88555.21,depth:-6,cog:295.8,sog:0,created_at:"2023-01-07 08:11:06",updated_at:"2023-01-07 08:11:06"},{time:1673070303e3,id:"9285db16-04b0-4d1a-812e-94fe03b78b0d",ship_id:1,terminal_time:"2023-01-07 05:45:03",lat:-6.101412,lng:106.90585,wind_speed:9.3,wind_direction:274.5,heading:359.6,distance:88555.21,depth:-2.6,cog:268.8,sog:0,created_at:"2023-01-07 08:11:37",updated_at:"2023-01-07 08:11:37"},{time:1673071203e3,id:"4cb25dd1-23a6-4a37-81de-b46cc1e8df0b",ship_id:1,terminal_time:"2023-01-07 06:00:03",lat:-6.101398,lng:106.905858,wind_speed:5.6,wind_direction:268.8,heading:359.6,distance:88555.21,depth:-2.8,cog:327.7,sog:0,created_at:"2023-01-07 08:12:02",updated_at:"2023-01-07 08:12:02"},{time:1673072103e3,id:"6ebeea29-07ba-4384-8f78-c0244a1a85e8",ship_id:1,terminal_time:"2023-01-07 06:15:03",lat:-6.101398,lng:106.905865,wind_speed:6,wind_direction:268.8,heading:0,distance:0,depth:-2.8,cog:324.2,sog:0,created_at:"2023-01-07 08:11:27",updated_at:"2023-01-07 08:11:27"},{time:1673073003e3,id:"de3806a1-9032-426c-84dc-93a8c6d7c31d",ship_id:1,terminal_time:"2023-01-07 06:30:03",lat:-6.101413,lng:106.905873,wind_speed:3.6,wind_direction:256.1,heading:359.7,distance:88555.21,depth:-2.8,cog:5.8,sog:0,created_at:"2023-01-07 08:12:23",updated_at:"2023-01-07 08:12:23"},{time:1673073903e3,id:"65707fec-2ee3-473e-beeb-9b2e845a36ca",ship_id:1,terminal_time:"2023-01-07 06:45:03",lat:-6.101433,lng:106.905833,wind_speed:6.8,wind_direction:257.5,heading:359.7,distance:88555.21,depth:-2.8,cog:304.6,sog:0,created_at:"2023-01-07 08:12:19",updated_at:"2023-01-07 08:12:19"},{time:1673074803e3,id:"6fa32b36-f399-4d56-8fa7-bea17b414006",ship_id:1,terminal_time:"2023-01-07 07:00:03",lat:-6.101392,lng:106.905888,wind_speed:3.4,wind_direction:246.3,heading:0,distance:0,depth:-2.8,cog:93.1,sog:0,created_at:"2023-01-07 08:12:40",updated_at:"2023-01-07 08:12:40"},{time:1673075703e3,id:"67ff30a8-02ef-41c0-bd19-463ebbd32668",ship_id:1,terminal_time:"2023-01-07 07:15:03",lat:-6.101408,lng:106.905885,wind_speed:7.5,wind_direction:229.4,heading:359.7,distance:88555.21,depth:-2.8,cog:197,sog:0,created_at:"2023-01-07 08:12:42",updated_at:"2023-01-07 08:12:42"},{time:1673094603e3,id:"3f01785d-ea13-49f9-b6ae-419329c8f20a",ship_id:1,terminal_time:"2023-01-07 12:30:03",lat:-6.101452,lng:106.905917,wind_speed:14.7,wind_direction:347.6,heading:0,distance:0,depth:-3.1,cog:35.3,sog:0,created_at:"2023-01-08 08:13:52",updated_at:"2023-01-08 08:13:52"},{time:1673095503e3,id:"317256ef-d958-4792-ac19-0af4678f296f",ship_id:1,terminal_time:"2023-01-07 12:45:03",lat:-6.101427,lng:106.905863,wind_speed:14.9,wind_direction:315.3,heading:359.7,distance:88555.22,depth:-3,cog:35.3,sog:0,created_at:"2023-01-08 08:24:39",updated_at:"2023-01-08 08:24:39"},{time:1673096403e3,id:"01638351-e630-4d24-a1b3-dc902b3abd82",ship_id:1,terminal_time:"2023-01-07 13:00:03",lat:-6.10141,lng:106.905895,wind_speed:17.3,wind_direction:326.5,heading:359.7,distance:88555.22,depth:-3,cog:91.4,sog:0,created_at:"2023-01-08 08:20:11",updated_at:"2023-01-08 08:20:11"},{time:1673097303e3,id:"70c8224a-27c3-469d-9482-f3b2e98f4bee",ship_id:1,terminal_time:"2023-01-07 13:15:03",lat:-6.101365,lng:106.905885,wind_speed:13.9,wind_direction:342,heading:359.7,distance:88555.22,depth:-3,cog:153.7,sog:0,created_at:"2023-01-08 08:07:44",updated_at:"2023-01-08 08:07:44"},{time:1673098203e3,id:"54be4b76-e5c1-4af2-b06a-d08e68ca8e6d",ship_id:1,terminal_time:"2023-01-07 13:30:03",lat:-6.101402,lng:106.905883,wind_speed:8.3,wind_direction:309.6,heading:359.9,distance:88555.22,depth:-2.8,cog:103.8,sog:0,created_at:"2023-01-08 08:05:41",updated_at:"2023-01-08 08:05:41"},{time:1673099103e3,id:"f45be026-3f21-4763-9f2e-599cfd772936",ship_id:1,terminal_time:"2023-01-07 13:45:03",lat:-6.101387,lng:106.90587,wind_speed:7.1,wind_direction:336.4,heading:359.6,distance:88555.22,depth:-3,cog:22,sog:0,created_at:"2023-01-08 08:25:15",updated_at:"2023-01-08 08:25:15"},{time:1673100003e3,id:"dda32aec-7c91-4a18-bc02-c6f8b1d47700",ship_id:1,terminal_time:"2023-01-07 14:00:03",lat:-6.101395,lng:106.905882,wind_speed:7.9,wind_direction:332.1,heading:0,distance:0,depth:-2.8,cog:57.4,sog:0,created_at:"2023-01-08 08:08:16",updated_at:"2023-01-08 08:08:16"},{time:1673100903e3,id:"b22e0b57-db66-4fe8-8773-39a691c334f9",ship_id:1,terminal_time:"2023-01-07 14:15:03",lat:-6.101398,lng:106.905873,wind_speed:8.3,wind_direction:350.5,heading:359.6,distance:88555.22,depth:-2.8,cog:37.9,sog:0,created_at:"2023-01-08 08:21:48",updated_at:"2023-01-08 08:21:48"},{time:1673101803e3,id:"4cb687f7-6740-478a-b9d8-7c415359678f",ship_id:1,terminal_time:"2023-01-07 14:30:03",lat:-6.101415,lng:106.90584,wind_speed:7.1,wind_direction:334.9,heading:359.7,distance:88555.23,depth:-2.8,cog:335.3,sog:0,created_at:"2023-01-08 08:14:53",updated_at:"2023-01-08 08:14:53"},{time:1673102703e3,id:"31d66256-54fa-4245-874b-a971ded2ac22",ship_id:1,terminal_time:"2023-01-07 14:45:03",lat:-6.10138,lng:106.905867,wind_speed:14.9,wind_direction:337.8,heading:359.7,distance:88555.23,depth:-2.8,cog:27.8,sog:0,created_at:"2023-01-08 08:03:26",updated_at:"2023-01-08 08:03:26"},{time:1673103603e3,id:"6e9c3626-321a-4c87-adb4-5e285a43cdf7",ship_id:1,terminal_time:"2023-01-07 15:00:03",lat:-6.101413,lng:106.905813,wind_speed:9.3,wind_direction:315.3,heading:359.6,distance:88555.24,depth:-2.6,cog:326.6,sog:.1,created_at:"2023-01-08 08:01:50",updated_at:"2023-01-08 08:01:50"},{time:1673104503e3,id:"dabbcbd4-70dc-48a7-9bf6-6a791bf70bf0",ship_id:1,terminal_time:"2023-01-07 15:15:03",lat:-6.101362,lng:106.905902,wind_speed:8.5,wind_direction:315.3,heading:359.6,distance:88555.25,depth:-2.6,cog:286.2,sog:0,created_at:"2023-01-08 08:14:31",updated_at:"2023-01-08 08:14:31"},{time:1673105403e3,id:"9ce52c58-26fe-4b79-acf6-efd91d7c3dea",ship_id:1,terminal_time:"2023-01-07 15:30:03",lat:-6.101402,lng:106.905895,wind_speed:8.7,wind_direction:290,heading:359.6,distance:88555.25,depth:-2.5,cog:39.8,sog:0,created_at:"2023-01-08 08:06:38",updated_at:"2023-01-08 08:06:38"},{time:1673106303e3,id:"fab10037-7bec-4b1b-a448-af671c2e5a09",ship_id:1,terminal_time:"2023-01-07 15:45:03",lat:-6.101377,lng:106.905907,wind_speed:9.1,wind_direction:302.5,heading:359.6,distance:88555.25,depth:-2.5,cog:11.5,sog:0,created_at:"2023-01-08 08:26:36",updated_at:"2023-01-08 08:26:36"},{time:1673107203e3,id:"72c4e9f4-b126-4cd5-af12-72d225bcc777",ship_id:1,terminal_time:"2023-01-07 16:00:03",lat:-6.101407,lng:106.90585,wind_speed:16.5,wind_direction:261,heading:359.5,distance:88555.26,depth:-2.5,cog:227.4,sog:0,created_at:"2023-01-08 08:29:59",updated_at:"2023-01-08 08:29:59"},{time:1673108103e3,id:"4dda9ef7-b131-499c-abb6-90d31b833212",ship_id:1,terminal_time:"2023-01-07 16:15:03",lat:-6.101415,lng:106.905928,wind_speed:7.7,wind_direction:274.5,heading:359.7,distance:88555.26,depth:-2.5,cog:276.8,sog:0,created_at:"2023-01-08 08:35:23",updated_at:"2023-01-08 08:35:23"},{time:1673109003e3,id:"eb055a93-284e-490c-b241-fc286a5245cb",ship_id:1,terminal_time:"2023-01-07 16:30:03",lat:-6.101398,lng:106.905935,wind_speed:18.4,wind_direction:281.5,heading:359.5,distance:88555.26,depth:-2.5,cog:150.5,sog:.1,created_at:"2023-01-08 08:19:17",updated_at:"2023-01-08 08:19:17"},{time:1673109903e3,id:"70fe1092-70d1-4e3e-9e6a-880e95753afe",ship_id:1,terminal_time:"2023-01-07 16:45:03",lat:-6.101348,lng:106.905867,wind_speed:12.8,wind_direction:244.9,heading:359.6,distance:88555.27,depth:-2.3,cog:354.6,sog:0,created_at:"2023-01-08 08:39:36",updated_at:"2023-01-08 08:39:36"},{time:1673110803e3,id:"256314cb-dc49-4a3d-bfc0-33982995e693",ship_id:1,terminal_time:"2023-01-07 17:00:03",lat:-6.101383,lng:106.905903,wind_speed:12,wind_direction:291.4,heading:359.6,distance:88555.27,depth:-2.5,cog:354.6,sog:0,created_at:"2023-01-08 08:12:53",updated_at:"2023-01-08 08:12:53"},{time:1673111703e3,id:"3cec9ede-f851-4440-95b3-e72f237da615",ship_id:1,terminal_time:"2023-01-07 17:15:03",lat:-6.101377,lng:106.905882,wind_speed:9.9,wind_direction:292.8,heading:359.6,distance:88555.27,depth:-2.5,cog:311.3,sog:0,created_at:"2023-01-08 08:18:20",updated_at:"2023-01-08 08:18:20"},{time:1673112893e3,id:"da145ee1-2387-4054-9190-cfd1c2e5f63c",ship_id:1,terminal_time:"2023-01-07 17:34:53",lat:-6.101393,lng:106.905928,wind_speed:13.6,wind_direction:257.1,heading:359.6,distance:88555.27,depth:-2.5,cog:278.9,sog:0,created_at:"2023-01-08 08:26:11",updated_at:"2023-01-08 08:26:11"},{time:1673113508e3,id:"25b0fe9e-9b29-4029-a7db-9138ef1c0173",ship_id:1,terminal_time:"2023-01-07 17:45:08",lat:-6.101463,lng:106.90597,wind_speed:14.3,wind_direction:263.1,heading:359.6,distance:88555.27,depth:-2.5,cog:350.3,sog:.1,created_at:"2023-01-08 08:06:11",updated_at:"2023-01-08 08:06:11"},{time:1673114403e3,id:"d85ae345-eb3f-420f-ae10-c8f0c078fb2d",ship_id:1,terminal_time:"2023-01-07 18:00:03",lat:-6.101395,lng:106.90591,wind_speed:15.3,wind_direction:246.3,heading:359.6,distance:88555.28,depth:-2.5,cog:8.3,sog:0,created_at:"2023-01-08 08:21:44",updated_at:"2023-01-08 08:21:44"},{time:1673115303e3,id:"388136b9-939e-4016-bb94-69e2165428e2",ship_id:1,terminal_time:"2023-01-07 18:15:03",lat:-6.101417,lng:106.905957,wind_speed:11,wind_direction:237,heading:359.7,distance:88555.28,depth:-2.5,cog:320.6,sog:0,created_at:"2023-01-08 08:27:27",updated_at:"2023-01-08 08:27:27"},{time:1673116203e3,id:"718bb2e9-5a2a-47c8-9899-3f613b300f13",ship_id:1,terminal_time:"2023-01-07 18:30:03",lat:-6.1014230000000005,lng:106.90596,wind_speed:10.1,wind_direction:252,heading:359.7,distance:88555.28,depth:-2.5,cog:262,sog:.3,created_at:"2023-01-08 08:35:15",updated_at:"2023-01-08 08:35:15"},{time:1673117103e3,id:"58662b8e-afe4-4e8d-9d81-e92fd5bd6de1",ship_id:1,terminal_time:"2023-01-07 18:45:03",lat:-6.101337,lng:106.905935,wind_speed:16.7,wind_direction:259,heading:359.6,distance:88555.28,depth:-2.5,cog:265.6,sog:0,created_at:"2023-01-08 08:24:32",updated_at:"2023-01-08 08:24:32"},{time:1673118003e3,id:"9dcc2e7d-fc6a-4026-8452-732e033d633d",ship_id:1,terminal_time:"2023-01-07 19:00:03",lat:-6.101408,lng:106.905923,wind_speed:12.6,wind_direction:270.4,heading:0,distance:0,depth:-2.5,cog:251.1,sog:.1,created_at:"2023-01-08 08:31:10",updated_at:"2023-01-08 08:31:10"},{time:1673118903e3,id:"d77f77c6-11e3-4d58-8a75-767aacbdee1c",ship_id:1,terminal_time:"2023-01-07 19:15:03",lat:-6.101403,lng:106.905935,wind_speed:9.3,wind_direction:274.5,heading:359.7,distance:88555.28,depth:-2.5,cog:242.4,sog:.1,created_at:"2023-01-08 08:32:39",updated_at:"2023-01-08 08:32:39"},{time:1673119803e3,id:"8676ff37-9bd6-4f53-8ba7-7eaad2bd126b",ship_id:1,terminal_time:"2023-01-07 19:30:03",lat:-6.101392,lng:106.905928,wind_speed:15.3,wind_direction:247.7,heading:359.7,distance:88555.28,depth:-2.5,cog:252.7,sog:0,created_at:"2023-01-08 08:34:35",updated_at:"2023-01-08 08:34:35"},{time:1673120703e3,id:"5a10a4d6-445d-4387-9c6a-e002b768b83b",ship_id:1,terminal_time:"2023-01-07 19:45:03",lat:-6.101385,lng:106.905918,wind_speed:9.1,wind_direction:259,heading:359.7,distance:88555.29,depth:-2.5,cog:142.2,sog:0,created_at:"2023-01-08 08:31:06",updated_at:"2023-01-08 08:31:06"},{time:1673121603e3,id:"b43588b1-8bee-476f-ba71-4ee6dc1af694",ship_id:1,terminal_time:"2023-01-07 20:00:03",lat:-6.101337,lng:106.90589,wind_speed:9.9,wind_direction:268.8,heading:359.6,distance:88555.29,depth:-6,cog:205.2,sog:0,created_at:"2023-01-08 08:47:20",updated_at:"2023-01-08 08:47:20"},{time:1673122503e3,id:"6ef2d5ef-f541-4f4e-98b6-8369ed0998fb",ship_id:1,terminal_time:"2023-01-07 20:15:03",lat:-6.101357,lng:106.90591,wind_speed:9.1,wind_direction:274.5,heading:359.7,distance:88555.29,depth:-2.5,cog:133.2,sog:0,created_at:"2023-01-08 08:45:51",updated_at:"2023-01-08 08:45:51"},{time:1673123403e3,id:"9ac81b12-4d78-42fa-926f-0e27f16a6abe",ship_id:1,terminal_time:"2023-01-07 20:30:03",lat:-6.101347,lng:106.905885,wind_speed:11.2,wind_direction:268.8,heading:359.7,distance:88555.29,depth:-2.5,cog:129.4,sog:0,created_at:"2023-01-08 08:43:43",updated_at:"2023-01-08 08:43:43"},{time:1673124303e3,id:"9c3c0c72-7ede-45ce-8cd0-45f46d05cf4f",ship_id:1,terminal_time:"2023-01-07 20:45:03",lat:-6.101392,lng:106.905992,wind_speed:9.9,wind_direction:280,heading:359.7,distance:88555.29,depth:-2.5,cog:269.2,sog:0,created_at:"2023-01-08 08:42:24",updated_at:"2023-01-08 08:42:24"},{time:1673125203e3,id:"180ab6f9-b46b-4175-9c0c-cfbd47d75a75",ship_id:1,terminal_time:"2023-01-07 21:00:03",lat:-6.10138,lng:106.905928,wind_speed:6.2,wind_direction:259,heading:359.6,distance:88555.29,depth:-2.5,cog:273,sog:.1,created_at:"2023-01-08 08:44:15",updated_at:"2023-01-08 08:44:15"},{time:1673126103e3,id:"aca79290-d836-4f81-b20c-db5c3d1c9ed5",ship_id:1,terminal_time:"2023-01-07 21:15:03",lat:-6.101395,lng:106.905888,wind_speed:8.5,wind_direction:270.3,heading:359.7,distance:88555.29,depth:-5.5,cog:284.7,sog:0,created_at:"2023-01-08 08:44:39",updated_at:"2023-01-08 08:44:39"},{time:1673127003e3,id:"3d37da9b-e78d-4c94-9628-2f75dfacd975",ship_id:1,terminal_time:"2023-01-07 21:30:03",lat:-6.10136,lng:106.905928,wind_speed:7.1,wind_direction:291.4,heading:359.7,distance:88555.29,depth:-2.5,cog:288.6,sog:0,created_at:"2023-01-08 08:43:59",updated_at:"2023-01-08 08:43:59"},{time:1673127903e3,id:"c85fc3eb-6766-4f04-b655-698bee2b112a",ship_id:1,terminal_time:"2023-01-07 21:45:03",lat:-6.101362,lng:106.905857,wind_speed:6.9,wind_direction:257.5,heading:359.8,distance:88555.29,depth:-2.3,cog:157.1,sog:0,created_at:"2023-01-08 08:48:25",updated_at:"2023-01-08 08:48:25"},{time:1673128803e3,id:"e0371ba8-d853-4a52-b612-ef2dd4db6f02",ship_id:1,terminal_time:"2023-01-07 22:00:03",lat:-6.101388,lng:106.905863,wind_speed:9.9,wind_direction:248,heading:359.6,distance:88555.29,depth:-2.5,cog:157.1,sog:0,created_at:"2023-01-08 08:46:57",updated_at:"2023-01-08 08:46:57"},{time:1673129703e3,id:"6aabe75f-fedb-42af-8440-6af78469558d",ship_id:1,terminal_time:"2023-01-07 22:15:03",lat:-6.101375,lng:106.905928,wind_speed:6.9,wind_direction:287.1,heading:359.7,distance:88555.29,depth:-2.3,cog:216.5,sog:0,created_at:"2023-01-08 08:54:20",updated_at:"2023-01-08 08:54:20"},{time:1673130603e3,id:"4068d565-7aa1-427b-8727-8edb9c691ecc",ship_id:1,terminal_time:"2023-01-07 22:30:03",lat:-6.101373,lng:106.905895,wind_speed:7.9,wind_direction:287.1,heading:359.8,distance:88555.29,depth:-2.5,cog:205.4,sog:0,created_at:"2023-01-08 08:51:59",updated_at:"2023-01-08 08:51:59"},{time:1673131503e3,id:"701364de-f35b-4f45-b2f2-65f53ffe574a",ship_id:1,terminal_time:"2023-01-07 22:45:03",lat:-6.101392,lng:106.905898,wind_speed:12.4,wind_direction:287.1,heading:359.8,distance:88555.29,depth:-2.5,cog:222.7,sog:0,created_at:"2023-01-08 08:48:51",updated_at:"2023-01-08 08:48:51"},{time:1673132403e3,id:"658bd145-0a61-4c2d-94fb-1bf054a3264c",ship_id:1,terminal_time:"2023-01-07 23:00:03",lat:-6.101363,lng:106.905863,wind_speed:7.9,wind_direction:274.5,heading:359.7,distance:88555.29,depth:-5.6,cog:129.2,sog:0,created_at:"2023-01-08 08:48:31",updated_at:"2023-01-08 08:48:31"},{time:1673133303e3,id:"58f92089-82d0-4bd5-9832-04677dc76be5",ship_id:1,terminal_time:"2023-01-07 23:15:03",lat:-6.101358,lng:106.905842,wind_speed:8.7,wind_direction:294.1,heading:359.7,distance:88555.29,depth:-2.5,cog:128.4,sog:0,created_at:"2023-01-08 08:55:51",updated_at:"2023-01-08 08:55:51"},{time:1673134203e3,id:"4736fadb-7f73-40fa-a2de-b9fa0a792b3e",ship_id:1,terminal_time:"2023-01-07 23:30:03",lat:-6.101348,lng:106.905888,wind_speed:10.6,wind_direction:297,heading:359.6,distance:88555.29,depth:-2.5,cog:344,sog:0,created_at:"2023-01-08 08:59:25",updated_at:"2023-01-08 08:59:25"},{time:1673135178e3,id:"bf83dfc7-4cb9-4b55-965a-1452ed8e111e",ship_id:1,terminal_time:"2023-01-07 23:46:18",lat:-6.101382,lng:106.905902,wind_speed:10.8,wind_direction:281.6,heading:359.7,distance:88555.29,depth:-5.6,cog:32.8,sog:0,created_at:"2023-01-08 08:58:17",updated_at:"2023-01-08 08:58:17"},{time:1673136003e3,id:"1e9d6cbb-3da5-46c2-8c1d-7c43e9e347d7",ship_id:1,terminal_time:"2023-01-08 00:00:03",lat:-6.10139,lng:106.905845,wind_speed:6.9,wind_direction:270.3,heading:0,distance:0,depth:-5.8,cog:57.4,sog:0,created_at:"2023-01-08 08:54:51",updated_at:"2023-01-08 08:54:51"},{time:1673136904e3,id:"9a56f8c9-a895-41ed-88cb-c63672950f2c",ship_id:1,terminal_time:"2023-01-08 00:15:04",lat:-6.101378,lng:106.905893,wind_speed:6.8,wind_direction:274.5,heading:359.7,distance:88555.29,depth:-5.6,cog:336.6,sog:0,created_at:"2023-01-08 08:58:04",updated_at:"2023-01-08 08:58:04"},{time:1673137804e3,id:"71adab84-32a5-43f8-9a16-44dd7cdf4c02",ship_id:1,terminal_time:"2023-01-08 00:30:04",lat:-6.101417,lng:106.905875,wind_speed:2.5,wind_direction:268.8,heading:359.6,distance:88555.29,depth:-2.5,cog:80.7,sog:0,created_at:"2023-01-08 08:56:16",updated_at:"2023-01-08 08:56:16"},{time:1673138704e3,id:"2b4e0681-bca8-423e-968c-9cbb94911ade",ship_id:1,terminal_time:"2023-01-08 00:45:04",lat:-6.101407,lng:106.905868,wind_speed:6.6,wind_direction:270.3,heading:359.5,distance:88555.29,depth:-2.5,cog:281.8,sog:0,created_at:"2023-01-08 09:02:07",updated_at:"2023-01-08 09:02:07"},{time:1673139604e3,id:"a5757655-280b-4850-9423-55cce4abb3d4",ship_id:1,terminal_time:"2023-01-08 01:00:04",lat:-6.101452,lng:106.905895,wind_speed:8.7,wind_direction:302.5,heading:359.6,distance:88555.29,depth:-2.5,cog:159.5,sog:0,created_at:"2023-01-08 09:02:50",updated_at:"2023-01-08 09:02:50"},{time:1673140504e3,id:"38de4f6b-61c5-490a-a785-9c11f352809e",ship_id:1,terminal_time:"2023-01-08 01:15:04",lat:-6.101402,lng:106.905898,wind_speed:7.9,wind_direction:292.8,heading:359.8,distance:88555.29,depth:-2.5,cog:171.7,sog:0,created_at:"2023-01-08 09:05:18",updated_at:"2023-01-08 09:05:18"},{time:1673141404e3,id:"0a1776c1-1425-41e8-91b9-367b23512d33",ship_id:1,terminal_time:"2023-01-08 01:30:04",lat:-6.101413,lng:106.905882,wind_speed:5.6,wind_direction:297,heading:359.7,distance:88555.29,depth:-2.5,cog:149.7,sog:.2,created_at:"2023-01-08 09:02:30",updated_at:"2023-01-08 09:02:30"},{time:1673142304e3,id:"25822b6e-cc26-4120-a534-707fae66297d",ship_id:1,terminal_time:"2023-01-08 01:45:04",lat:-6.101383,lng:106.905855,wind_speed:3.8,wind_direction:291.4,heading:359.7,distance:88555.3,depth:-2.5,cog:211.1,sog:0,created_at:"2023-01-08 09:05:11",updated_at:"2023-01-08 09:05:11"},{time:1673143204e3,id:"e6ba87a3-cf19-4484-886d-ed8a0850dd54",ship_id:1,terminal_time:"2023-01-08 02:00:04",lat:-6.101395,lng:106.905888,wind_speed:6.4,wind_direction:268.8,heading:359.8,distance:88555.31,depth:-2.5,cog:342.7,sog:.1,created_at:"2023-01-08 09:04:03",updated_at:"2023-01-08 09:04:03"},{time:1673144104e3,id:"828812ff-8977-46cf-8927-bec2687ff712",ship_id:1,terminal_time:"2023-01-08 02:15:04",lat:-6.101372,lng:106.905882,wind_speed:3.8,wind_direction:268.8,heading:359.8,distance:88555.33,depth:-2.6,cog:297.3,sog:.1,created_at:"2023-01-08 09:13:33",updated_at:"2023-01-08 09:13:33"},{time:1673145004e3,id:"25389b81-dc4a-46e8-ad1c-1660eb03a08f",ship_id:1,terminal_time:"2023-01-08 02:30:04",lat:-6.101395,lng:106.905907,wind_speed:7.5,wind_direction:264.5,heading:359.8,distance:88555.33,depth:-2.6,cog:315.1,sog:0,created_at:"2023-01-08 09:06:48",updated_at:"2023-01-08 09:06:48"},{time:1673145904e3,id:"0047c054-acbc-4a29-9ccd-52ba001da3a7",ship_id:1,terminal_time:"2023-01-08 02:45:04",lat:-6.101398,lng:106.905878,wind_speed:6.6,wind_direction:264.5,heading:0,distance:0,depth:-2.6,cog:336.3,sog:0,created_at:"2023-01-08 09:11:48",updated_at:"2023-01-08 09:11:48"},{time:1673146804e3,id:"829090c9-17ba-4477-8592-deb4da86dc63",ship_id:1,terminal_time:"2023-01-08 03:00:04",lat:-6.101402,lng:106.905895,wind_speed:5.4,wind_direction:264.5,heading:359.7,distance:88555.35,depth:-2.6,cog:17.1,sog:0,created_at:"2023-01-08 09:06:28",updated_at:"2023-01-08 09:06:28"},{time:1673147709e3,id:"1098eec6-77fe-4726-9e36-eea8a0a47b48",ship_id:1,terminal_time:"2023-01-08 03:15:09",lat:-6.101387,lng:106.905917,wind_speed:6.2,wind_direction:260.4,heading:359.7,distance:88555.35,depth:-2.6,cog:23.6,sog:0,created_at:"2023-01-08 09:09:10",updated_at:"2023-01-08 09:09:10"},{time:1673148604e3,id:"04d539ed-3c9f-49ed-aec5-3d4926391e7e",ship_id:1,terminal_time:"2023-01-08 03:30:04",lat:-6.101397,lng:106.90589,wind_speed:6.8,wind_direction:260.4,heading:359.7,distance:88555.36,depth:-2.6,cog:65.8,sog:0,created_at:"2023-01-08 09:15:33",updated_at:"2023-01-08 09:15:33"},{time:1673149504e3,id:"e5e010fd-95da-4dfb-a12f-ef9f733b8165",ship_id:1,terminal_time:"2023-01-08 03:45:04",lat:-6.101377,lng:106.905885,wind_speed:5.6,wind_direction:274.5,heading:359.6,distance:88555.36,depth:-2.6,cog:67.7,sog:0,created_at:"2023-01-08 09:10:57",updated_at:"2023-01-08 09:10:57"},{time:1673150404e3,id:"dcfe2cd6-711d-461f-90f7-4bf6c4a1b9ee",ship_id:1,terminal_time:"2023-01-08 04:00:04",lat:-6.101388,lng:106.905938,wind_speed:2.5,wind_direction:274.5,heading:359.5,distance:88555.36,depth:-2.6,cog:223,sog:.1,created_at:"2023-01-08 09:14:36",updated_at:"2023-01-08 09:14:36"},{time:1673151304e3,id:"ddf54501-6fbc-456e-bf5a-c79e016e9b00",ship_id:1,terminal_time:"2023-01-08 04:15:04",lat:-6.101403,lng:106.905913,wind_speed:6.4,wind_direction:280,heading:359.7,distance:88555.36,depth:-2.8,cog:188.7,sog:.1,created_at:"2023-01-08 09:21:25",updated_at:"2023-01-08 09:21:25"},{time:1673152204e3,id:"081423ac-f636-4f7a-9daf-5f4dab29c404",ship_id:1,terminal_time:"2023-01-08 04:30:04",lat:-6.101418,lng:106.90596,wind_speed:9.3,wind_direction:287.1,heading:0,distance:0,depth:-2.8,cog:159.5,sog:0,created_at:"2023-01-08 09:15:25",updated_at:"2023-01-08 09:15:25"},{time:1673153104e3,id:"c45710ce-5dc1-4757-ab7a-4d938442da15",ship_id:1,terminal_time:"2023-01-08 04:45:04",lat:-6.101403,lng:106.905892,wind_speed:8.1,wind_direction:274.5,heading:359.8,distance:88555.36,depth:-2.8,cog:125.5,sog:0,created_at:"2023-01-08 09:19:12",updated_at:"2023-01-08 09:19:12"},{time:1673154004e3,id:"15229013-0e45-4bf3-9949-1ea58fc0908a",ship_id:1,terminal_time:"2023-01-08 05:00:04",lat:-6.101338,lng:106.905882,wind_speed:9.1,wind_direction:259,heading:359.9,distance:88555.36,depth:-2.6,cog:136.1,sog:0,created_at:"2023-01-08 09:20:01",updated_at:"2023-01-08 09:20:01"},{time:1673154904e3,id:"d27c1b20-889b-4499-ba40-6e6c614178f8",ship_id:1,terminal_time:"2023-01-08 05:15:04",lat:-6.101348,lng:106.905915,wind_speed:10.1,wind_direction:257.5,heading:359.8,distance:88555.36,depth:-2.8,cog:151.6,sog:.1,created_at:"2023-01-08 09:23:27",updated_at:"2023-01-08 09:23:27"},{time:1673155804e3,id:"9a444a98-e7df-4f70-975d-85d5d62e290f",ship_id:1,terminal_time:"2023-01-08 05:30:04",lat:-6.101363,lng:106.905898,wind_speed:6.9,wind_direction:259,heading:359.7,distance:88555.36,depth:-2.8,cog:33.5,sog:0,created_at:"2023-01-08 09:21:23",updated_at:"2023-01-08 09:21:23"},{time:1673156704e3,id:"fc24c51c-214a-4d78-be5a-4c1c26802e09",ship_id:1,terminal_time:"2023-01-08 05:45:04",lat:-6.101373,lng:106.90589,wind_speed:9.9,wind_direction:257.5,heading:359.6,distance:88555.36,depth:-2.8,cog:325.1,sog:0,created_at:"2023-01-08 09:25:36",updated_at:"2023-01-08 09:25:36"},{time:1673157604e3,id:"32c80507-1d8e-4091-9311-50e25e285dae",ship_id:1,terminal_time:"2023-01-08 06:00:04",lat:-6.101387,lng:106.905902,wind_speed:13.9,wind_direction:257.5,heading:359.6,distance:88555.36,depth:-3,cog:329.3,sog:0,created_at:"2023-01-08 09:24:42",updated_at:"2023-01-08 09:24:42"},{time:1673158504e3,id:"ae9d8d04-f8b0-4358-bd9c-d9972e370315",ship_id:1,terminal_time:"2023-01-08 06:15:04",lat:-6.10138,lng:106.905895,wind_speed:6.8,wind_direction:257.5,heading:359.6,distance:88555.36,depth:-3,cog:248.9,sog:0,created_at:"2023-01-08 09:26:04",updated_at:"2023-01-08 09:26:04"},{time:1673159404e3,id:"c0502c55-c023-4042-9af3-bd285c098a35",ship_id:1,terminal_time:"2023-01-08 06:30:04",lat:-6.101373,lng:106.905888,wind_speed:14.1,wind_direction:270.9,heading:359.6,distance:88555.36,depth:-3,cog:292.9,sog:0,created_at:"2023-01-08 09:21:20",updated_at:"2023-01-08 09:21:20"},{time:1673160304e3,id:"034a249c-02ba-437a-8aac-456cab629385",ship_id:1,terminal_time:"2023-01-08 06:45:04",lat:-6.101378,lng:106.90591,wind_speed:11.4,wind_direction:257.5,heading:359.7,distance:88555.36,depth:-3.1,cog:80.9,sog:0,created_at:"2023-01-08 09:23:12",updated_at:"2023-01-08 09:23:12"},{time:1673161204e3,id:"54e8bfab-005b-4826-8206-a37b4decfd0b",ship_id:1,terminal_time:"2023-01-08 07:00:04",lat:-6.101373,lng:106.905887,wind_speed:8.5,wind_direction:257.5,heading:359.7,distance:88555.36,depth:-3.1,cog:80.9,sog:0,created_at:"2023-01-08 09:27:00",updated_at:"2023-01-08 09:27:00"},{time:1673162104e3,id:"a8f38c56-ba61-4de6-80d1-3ea034df630a",ship_id:1,terminal_time:"2023-01-08 07:15:04",lat:-6.101405,lng:106.90589,wind_speed:12.4,wind_direction:242.1,heading:359.7,distance:88555.36,depth:-3,cog:167.3,sog:0,created_at:"2023-01-08 09:31:10",updated_at:"2023-01-08 09:31:10"},{time:1673163004e3,id:"1d43c613-abc9-4209-bfb3-9d54ecc33748",ship_id:1,terminal_time:"2023-01-08 07:30:04",lat:-6.10138,lng:106.905852,wind_speed:15.5,wind_direction:229.4,heading:0,distance:0,depth:0,cog:4.1,sog:0,created_at:"2023-01-08 09:28:35",updated_at:"2023-01-08 09:28:35"},{time:1673163904e3,id:"58b7809e-b846-4fba-b046-e7a1c2f3f84c",ship_id:1,terminal_time:"2023-01-08 07:45:04",lat:-6.101412,lng:106.905907,wind_speed:6.6,wind_direction:245.6,heading:359.8,distance:88555.36,depth:-3.1,cog:145.5,sog:0,created_at:"2023-01-08 09:31:46",updated_at:"2023-01-08 09:31:46"},{time:1673164809e3,id:"4ef617d0-0adb-40ea-bad4-e57322f78fe8",ship_id:1,terminal_time:"2023-01-08 08:00:09",lat:-6.101433,lng:106.905895,wind_speed:7.9,wind_direction:292.8,heading:359.7,distance:88555.36,depth:-3.1,cog:145.5,sog:0,created_at:"2023-01-08 09:31:36",updated_at:"2023-01-08 09:31:36"},{time:1673165704e3,id:"384723ff-16ea-4a47-bd1b-987a84141b3e",ship_id:1,terminal_time:"2023-01-08 08:15:04",lat:-6.101402,lng:106.905893,wind_speed:9.7,wind_direction:247.7,heading:359.7,distance:88555.36,depth:-3.1,cog:145.5,sog:0,created_at:"2023-01-08 09:34:02",updated_at:"2023-01-08 09:34:02"},{time:1673166604e3,id:"4a0c6afb-a827-4d1b-b943-57faa3c5ccb7",ship_id:1,terminal_time:"2023-01-08 08:30:04",lat:-6.1014230000000005,lng:106.905875,wind_speed:6.8,wind_direction:257.5,heading:359.7,distance:88555.36,depth:-3.1,cog:242.5,sog:0,created_at:"2023-01-08 09:35:08",updated_at:"2023-01-08 09:35:08"},{time:1673167504e3,id:"4c434111-7470-469b-82a2-10a66585fbe7",ship_id:1,terminal_time:"2023-01-08 08:45:04",lat:-6.101393,lng:106.905873,wind_speed:9.7,wind_direction:259,heading:359.6,distance:88555.36,depth:-3.3,cog:73.3,sog:0,created_at:"2023-01-08 09:36:15",updated_at:"2023-01-08 09:36:15"},{time:1673168404e3,id:"64a1f0ab-872f-4c4a-8e98-84e8f7f2aa2b",ship_id:1,terminal_time:"2023-01-08 09:00:04",lat:-6.101383,lng:106.905898,wind_speed:8.3,wind_direction:267.4,heading:359.6,distance:88555.36,depth:-3.3,cog:91.6,sog:.1,created_at:"2023-01-08 09:37:22",updated_at:"2023-01-08 09:37:22"},{time:1673169304e3,id:"15eb000c-e49a-4288-b9ba-29120dd16bbc",ship_id:1,terminal_time:"2023-01-08 09:15:04",lat:-6.101392,lng:106.905832,wind_speed:13.6,wind_direction:315.8,heading:359.7,distance:88555.36,depth:-3.3,cog:104.3,sog:0,created_at:"2023-01-08 09:38:28",updated_at:"2023-01-08 09:38:28"},{time:1673170204e3,id:"5013bfeb-e3b7-40fe-956e-67d86ef062fc",ship_id:1,terminal_time:"2023-01-08 09:30:04",lat:-6.10143,lng:106.905883,wind_speed:10.1,wind_direction:291.4,heading:359.8,distance:88555.36,depth:-3.3,cog:111.5,sog:0,created_at:"2023-01-08 09:39:35",updated_at:"2023-01-08 09:39:35"},{time:1673171104e3,id:"c42441d4-6121-4fd5-a94e-40e8a5538f88",ship_id:1,terminal_time:"2023-01-08 09:45:04",lat:-6.101408,lng:106.9059,wind_speed:6.8,wind_direction:325.1,heading:0,distance:0,depth:-3.3,cog:111.5,sog:0,created_at:"2023-01-08 09:45:06",updated_at:"2023-01-08 09:45:06"},{time:1673172004e3,id:"b88f901e-4b17-4f4d-950a-3bbe7040bfe9",ship_id:1,terminal_time:"2023-01-08 10:00:04",lat:-6.101438,lng:106.905878,wind_speed:7.3,wind_direction:282.8,heading:359.8,distance:88555.36,depth:-3.3,cog:116.3,sog:0,created_at:"2023-01-08 10:00:07",updated_at:"2023-01-08 10:00:07"},{time:1673172904e3,id:"ebab5955-d934-4330-9ccd-5d8d1496b18c",ship_id:1,terminal_time:"2023-01-08 10:15:04",lat:-6.101392,lng:106.905872,wind_speed:11.4,wind_direction:335,heading:359.7,distance:88555.36,depth:-3.3,cog:269.6,sog:0,created_at:"2023-01-08 10:15:06",updated_at:"2023-01-08 10:15:06"},{time:1673173804e3,id:"9f29317b-07a0-4caf-b754-11930dd5bd44",ship_id:1,terminal_time:"2023-01-08 10:30:04",lat:-6.101372,lng:106.905888,wind_speed:6.4,wind_direction:332.1,heading:359.7,distance:88555.36,depth:-3.3,cog:157.9,sog:0,created_at:"2023-01-08 10:30:06",updated_at:"2023-01-08 10:30:06"},{time:1673174704e3,id:"962a2be6-5432-402b-9958-84252f281c30",ship_id:1,terminal_time:"2023-01-08 10:45:04",lat:-6.101405,lng:106.905885,wind_speed:10.3,wind_direction:336.4,heading:0,distance:0,depth:-3.3,cog:272.5,sog:0,created_at:"2023-01-08 10:45:05",updated_at:"2023-01-08 10:45:05"},{time:1673175604e3,id:"ce56291e-c8e3-440f-92e0-921395a84182",ship_id:1,terminal_time:"2023-01-08 11:00:04",lat:-6.10143,lng:106.905957,wind_speed:11.6,wind_direction:325.1,heading:0,distance:0,depth:-3.3,cog:104.1,sog:0,created_at:"2023-01-08 11:00:06",updated_at:"2023-01-08 11:00:06"},{time:1673176504e3,id:"b25e30f7-bd69-432d-af8c-a46b5423e161",ship_id:1,terminal_time:"2023-01-08 11:15:04",lat:-6.101388,lng:106.905873,wind_speed:7.9,wind_direction:332.1,heading:0,distance:0,depth:-3.3,cog:312.3,sog:0,created_at:"2023-01-08 11:15:06",updated_at:"2023-01-08 11:15:06"},{time:1673177404e3,id:"0ccfc4ba-378e-4ad6-a4db-6b35d30a1a23",ship_id:1,terminal_time:"2023-01-08 11:30:04",lat:-6.101405,lng:106.905895,wind_speed:7.9,wind_direction:319.5,heading:359.7,distance:88555.37,depth:-3.3,cog:83.1,sog:.1,created_at:"2023-01-08 11:30:06",updated_at:"2023-01-08 11:30:06"},{time:1673178304e3,id:"b458b825-fbb6-40f4-b251-c347a72a39ab",ship_id:1,terminal_time:"2023-01-08 11:45:04",lat:-6.101403,lng:106.905887,wind_speed:9.5,wind_direction:332.1,heading:0,distance:0,depth:-3.3,cog:75.4,sog:0,created_at:"2023-01-08 11:45:05",updated_at:"2023-01-08 11:45:05"},{time:1673179204e3,id:"25575159-9a0f-4a66-a7d0-20aea87d0feb",ship_id:1,terminal_time:"2023-01-08 12:00:04",lat:-6.101412,lng:106.905878,wind_speed:8.5,wind_direction:343.6,heading:359.6,distance:88555.37,depth:-3.3,cog:67,sog:0,created_at:"2023-01-08 12:00:06",updated_at:"2023-01-08 12:00:06"},{time:1673180104e3,id:"a3bdb7f9-22b7-4e38-b981-ff099e82bfb6",ship_id:1,terminal_time:"2023-01-08 12:15:04",lat:-6.101407,lng:106.90585,wind_speed:13.8,wind_direction:349,heading:359.6,distance:88555.37,depth:-3.3,cog:36.2,sog:0,created_at:"2023-01-09 08:01:28",updated_at:"2023-01-09 08:01:28"},{time:1673181004e3,id:"468f0650-9d89-4a66-a334-a4fac77e4728",ship_id:1,terminal_time:"2023-01-08 12:30:04",lat:-6.101405,lng:106.905903,wind_speed:19.4,wind_direction:281.5,heading:359.6,distance:88555.37,depth:-3.3,cog:282.7,sog:0,created_at:"2023-01-09 08:03:29",updated_at:"2023-01-09 08:03:29"},{time:1673181904e3,id:"03deb747-2062-4451-bd06-e9432e1f2596",ship_id:1,terminal_time:"2023-01-08 12:45:04",lat:-6.10138,lng:106.905892,wind_speed:14.5,wind_direction:287.1,heading:359.6,distance:88555.38,depth:-3.3,cog:308.6,sog:0,created_at:"2023-01-09 08:02:16",updated_at:"2023-01-09 08:02:16"},{time:1673182804e3,id:"d195359b-cc5d-4733-9a4a-c450f7ecdda8",ship_id:1,terminal_time:"2023-01-08 13:00:04",lat:-6.101337,lng:106.905855,wind_speed:12.2,wind_direction:291.4,heading:359.7,distance:88555.38,depth:-3.1,cog:137.7,sog:0,created_at:"2023-01-09 08:02:58",updated_at:"2023-01-09 08:02:58"},{time:1673183704e3,id:"46707f11-6637-4097-9f27-85c91102848f",ship_id:1,terminal_time:"2023-01-08 13:15:04",lat:-6.101385,lng:106.905878,wind_speed:11,wind_direction:281.5,heading:359.6,distance:88555.38,depth:-3.1,cog:153.4,sog:0,created_at:"2023-01-09 08:03:38",updated_at:"2023-01-09 08:03:38"},{time:1673184604e3,id:"44555a10-55f3-451d-8279-71fd68a98ddd",ship_id:1,terminal_time:"2023-01-08 13:30:04",lat:-6.101418,lng:106.905922,wind_speed:20,wind_direction:281.5,heading:359.7,distance:88555.38,depth:-3.1,cog:131.7,sog:0,created_at:"2023-01-09 08:01:25",updated_at:"2023-01-09 08:01:25"},{time:1673185504e3,id:"6f43d2f1-2e54-4989-a2b6-7b411249f2a8",ship_id:1,terminal_time:"2023-01-08 13:45:04",lat:-6.101397,lng:106.90586,wind_speed:15.7,wind_direction:298.3,heading:359.7,distance:88555.38,depth:-3.1,cog:51.2,sog:0,created_at:"2023-01-09 08:03:28",updated_at:"2023-01-09 08:03:28"},{time:1673186404e3,id:"e21e47e0-7761-45fc-aa87-dc06fb2b621c",ship_id:1,terminal_time:"2023-01-08 14:00:04",lat:-6.101392,lng:106.905875,wind_speed:9.5,wind_direction:297,heading:359.6,distance:88555.38,depth:-3,cog:80.4,sog:0,created_at:"2023-01-09 08:02:10",updated_at:"2023-01-09 08:02:10"},{time:1673187304e3,id:"dbf363e6-e9e5-4e72-95d5-fed707eab8c4",ship_id:1,terminal_time:"2023-01-08 14:15:04",lat:-6.101355,lng:106.905872,wind_speed:10.3,wind_direction:332.1,heading:359.8,distance:88555.38,depth:-2.8,cog:289.8,sog:0,created_at:"2023-01-09 08:04:34",updated_at:"2023-01-09 08:04:34"},{time:1673188204e3,id:"12b53920-e835-4c42-8ab7-ec8061a9ba5c",ship_id:1,terminal_time:"2023-01-08 14:30:04",lat:-6.101383,lng:106.90588,wind_speed:7.3,wind_direction:280,heading:359.8,distance:88555.38,depth:-2.8,cog:26.9,sog:0,created_at:"2023-01-09 08:03:54",updated_at:"2023-01-09 08:03:54"},{time:1673189104e3,id:"c5c563a3-fe51-4dab-bcae-351d28e5f4de",ship_id:1,terminal_time:"2023-01-08 14:45:04",lat:-6.101362,lng:106.905937,wind_speed:13.8,wind_direction:304,heading:359.7,distance:88555.39,depth:-2.8,cog:310.4,sog:.1,created_at:"2023-01-09 08:01:04",updated_at:"2023-01-09 08:01:04"},{time:1673190004e3,id:"3d7b3cbb-14a0-4a8f-93d0-9cf906bc7355",ship_id:1,terminal_time:"2023-01-08 15:00:04",lat:-6.101373,lng:106.905875,wind_speed:5.2,wind_direction:309.6,heading:359.7,distance:88555.4,depth:-2.8,cog:11.5,sog:0,created_at:"2023-01-09 08:03:22",updated_at:"2023-01-09 08:03:22"},{time:1673190904e3,id:"9bd54cb5-0df6-4220-852a-e9ff92994333",ship_id:1,terminal_time:"2023-01-08 15:15:04",lat:-6.10139,lng:106.9059,wind_speed:9.7,wind_direction:319.5,heading:359.7,distance:88555.4,depth:-2.8,cog:310.4,sog:0,created_at:"2023-01-09 08:01:20",updated_at:"2023-01-09 08:01:20"},{time:1673191804e3,id:"1039c335-c4fe-4407-9d86-0e0e6f3801d7",ship_id:1,terminal_time:"2023-01-08 15:30:04",lat:-6.101395,lng:106.905902,wind_speed:5,wind_direction:304,heading:359.7,distance:88555.4,depth:-2.6,cog:310.4,sog:0,created_at:"2023-01-09 08:03:22",updated_at:"2023-01-09 08:03:22"},{time:1673192704e3,id:"2a373c7d-78e5-475d-b34b-0236fd987dbb",ship_id:1,terminal_time:"2023-01-08 15:45:04",lat:-6.101373,lng:106.905892,wind_speed:8.1,wind_direction:246.3,heading:359.7,distance:88555.4,depth:-2.6,cog:310.4,sog:0,created_at:"2023-01-09 08:02:09",updated_at:"2023-01-09 08:02:09"},{time:1673193609e3,id:"27afb88f-711d-446a-80c1-5db6f4d652e8",ship_id:1,terminal_time:"2023-01-08 16:00:09",lat:-6.101383,lng:106.905923,wind_speed:16.7,wind_direction:267.4,heading:359.8,distance:88555.4,depth:-2.6,cog:274.8,sog:0,created_at:"2023-01-09 08:01:34",updated_at:"2023-01-09 08:01:34"},{time:1673194504e3,id:"7a688f79-a052-4162-98a4-93fbeec24b60",ship_id:1,terminal_time:"2023-01-08 16:15:04",lat:-6.101367,lng:106.90591,wind_speed:11.4,wind_direction:291.4,heading:359.6,distance:88555.41,depth:-2.6,cog:177.3,sog:.1,created_at:"2023-01-09 08:01:27",updated_at:"2023-01-09 08:01:27"},{time:1673195404e3,id:"1c77e367-adf9-4b24-9e28-1614417c0043",ship_id:1,terminal_time:"2023-01-08 16:30:04",lat:-6.101337,lng:106.90587,wind_speed:10.8,wind_direction:280,heading:359.6,distance:88555.42,depth:-2.6,cog:163.2,sog:0,created_at:"2023-01-09 08:02:53",updated_at:"2023-01-09 08:02:53"},{time:1673196304e3,id:"47c8015f-f5e4-44eb-af39-6631ab095c14",ship_id:1,terminal_time:"2023-01-08 16:45:04",lat:-6.101367,lng:106.905915,wind_speed:6.6,wind_direction:280,heading:359.8,distance:88555.42,depth:-2.6,cog:359.3,sog:0,created_at:"2023-01-09 08:01:48",updated_at:"2023-01-09 08:01:48"},{time:1673197204e3,id:"d0e28486-e7bc-4ac1-a4d8-0bbb6d72aee3",ship_id:1,terminal_time:"2023-01-08 17:00:04",lat:-6.101365,lng:106.905892,wind_speed:6.9,wind_direction:267.4,heading:359.8,distance:88555.42,depth:-2.6,cog:282.7,sog:0,created_at:"2023-01-09 08:05:29",updated_at:"2023-01-09 08:05:29"},{time:1673198104e3,id:"5791dc42-ed81-48a4-b540-b452a5633205",ship_id:1,terminal_time:"2023-01-08 17:15:04",lat:-6.101408,lng:106.905945,wind_speed:9.5,wind_direction:257.5,heading:0,distance:0,depth:-2.6,cog:300.4,sog:0,created_at:"2023-01-09 08:04:45",updated_at:"2023-01-09 08:04:45"},{time:1673199004e3,id:"603a0afa-1ca2-45d2-a9b6-0745a5e33b11",ship_id:1,terminal_time:"2023-01-08 17:30:04",lat:-6.10137,lng:106.905992,wind_speed:9.1,wind_direction:249.1,heading:359.5,distance:88555.42,depth:-2.5,cog:302.2,sog:0,created_at:"2023-01-09 08:03:51",updated_at:"2023-01-09 08:03:51"},{time:1673199904e3,id:"ab249c72-fe0b-4b61-aadb-60e506340e0a",ship_id:1,terminal_time:"2023-01-08 17:45:04",lat:-6.101405,lng:106.905933,wind_speed:8.5,wind_direction:247.7,heading:359.5,distance:88555.42,depth:-2.5,cog:346.1,sog:0,created_at:"2023-01-09 08:03:29",updated_at:"2023-01-09 08:03:29"},{time:1673200804e3,id:"ad719767-8da7-4530-af3a-e3d833d92178",ship_id:1,terminal_time:"2023-01-08 18:00:04",lat:-6.101377,lng:106.905882,wind_speed:10.4,wind_direction:247.7,heading:0,distance:0,depth:-2.5,cog:10.1,sog:0,created_at:"2023-01-09 08:01:03",updated_at:"2023-01-09 08:01:03"},{time:1673207354e3,id:"63c9d130-6bb7-4318-b5f2-675e7faf0e4c",ship_id:1,terminal_time:"2023-01-08 19:49:14",lat:-6.101343,lng:106.905863,wind_speed:7.9,wind_direction:246.3,heading:359.7,distance:88555.43,depth:-2.6,cog:159,sog:0,created_at:"2023-01-09 08:03:14",updated_at:"2023-01-09 08:03:14"},{time:1673208004e3,id:"3bf8de17-ebbb-4fcb-b854-a96a429acecb",ship_id:1,terminal_time:"2023-01-08 20:00:04",lat:-6.101333,lng:106.905857,wind_speed:9.9,wind_direction:235.1,heading:359.7,distance:88555.43,depth:-2.6,cog:83.4,sog:0,created_at:"2023-01-09 08:04:33",updated_at:"2023-01-09 08:04:33"},{time:1673208904e3,id:"fb4f8778-7bcb-40f3-956a-b79108ad31b2",ship_id:1,terminal_time:"2023-01-08 20:15:04",lat:-6.101393,lng:106.905902,wind_speed:7.5,wind_direction:252,heading:359.7,distance:88555.43,depth:-6,cog:131.2,sog:0,created_at:"2023-01-09 08:05:16",updated_at:"2023-01-09 08:05:16"},{time:1673209804e3,id:"5242adab-8959-40a5-8978-635cea013f84",ship_id:1,terminal_time:"2023-01-08 20:30:04",lat:-6.101357,lng:106.905868,wind_speed:5.6,wind_direction:246.3,heading:359.7,distance:88555.43,depth:-2.5,cog:274.3,sog:0,created_at:"2023-01-09 08:00:56",updated_at:"2023-01-09 08:00:56"},{time:1673210704e3,id:"0c83a2c4-2bcd-476e-ac3b-460d1b25f858",ship_id:1,terminal_time:"2023-01-08 20:45:04",lat:-6.101342,lng:106.905882,wind_speed:7.5,wind_direction:246.3,heading:359.7,distance:88555.43,depth:-2.6,cog:267.2,sog:0,created_at:"2023-01-09 08:02:36",updated_at:"2023-01-09 08:02:36"},{time:1673211604e3,id:"458708de-a317-4292-a57f-1117f5f9f56d",ship_id:1,terminal_time:"2023-01-08 21:00:04",lat:-6.101388,lng:106.905948,wind_speed:12.2,wind_direction:257.5,heading:359.8,distance:88555.43,depth:-2.6,cog:271.1,sog:0,created_at:"2023-01-09 08:05:06",updated_at:"2023-01-09 08:05:06"},{time:1673212504e3,id:"67504e3d-78c5-491b-ab2f-ead7b531eab7",ship_id:1,terminal_time:"2023-01-08 21:15:04",lat:-6.1014420000000005,lng:106.905875,wind_speed:9.5,wind_direction:257.5,heading:359.8,distance:88555.43,depth:-2.6,cog:273.1,sog:.1,created_at:"2023-01-09 08:03:54",updated_at:"2023-01-09 08:03:54"},{time:1673213404e3,id:"029c42f5-7b81-4393-94ab-d99385dd210e",ship_id:1,terminal_time:"2023-01-08 21:30:04",lat:-6.101397,lng:106.905873,wind_speed:9.1,wind_direction:280,heading:359.7,distance:88555.44,depth:-2.6,cog:278.6,sog:.1,created_at:"2023-01-09 08:05:28",updated_at:"2023-01-09 08:05:28"},{time:1673214304e3,id:"68b68fd8-c24d-4c82-8066-e3d469f5edbe",ship_id:1,terminal_time:"2023-01-08 21:45:04",lat:-6.101372,lng:106.905917,wind_speed:8.3,wind_direction:242.1,heading:359.8,distance:88555.44,depth:-6,cog:160.2,sog:0,created_at:"2023-01-09 08:05:13",updated_at:"2023-01-09 08:05:13"},{time:1673215204e3,id:"361ce47f-0c08-47bb-967f-d1db1b9a05c3",ship_id:1,terminal_time:"2023-01-08 22:00:04",lat:-6.10138,lng:106.905898,wind_speed:16.7,wind_direction:248.3,heading:359.6,distance:88555.44,depth:-2.6,cog:160.2,sog:0,created_at:"2023-01-09 08:05:04",updated_at:"2023-01-09 08:05:04"},{time:1673216104e3,id:"3ea2af9a-a3fc-420e-b179-53b02aa87e39",ship_id:1,terminal_time:"2023-01-08 22:15:04",lat:-6.10142,lng:106.90588,wind_speed:7.9,wind_direction:257.5,heading:359.6,distance:88555.44,depth:-6.1,cog:213.1,sog:0,created_at:"2023-01-09 08:05:49",updated_at:"2023-01-09 08:05:49"},{time:1673217004e3,id:"1cb11726-d0ad-4402-a975-0af78f5631b4",ship_id:1,terminal_time:"2023-01-08 22:30:04",lat:-6.101388,lng:106.905885,wind_speed:17.1,wind_direction:247.7,heading:359.8,distance:88555.44,depth:-6,cog:221.4,sog:0,created_at:"2023-01-09 08:06:08",updated_at:"2023-01-09 08:06:08"},{time:1673217904e3,id:"892a3800-b287-4c33-913e-0683528e0431",ship_id:1,terminal_time:"2023-01-08 22:45:04",lat:-6.101377,lng:106.905895,wind_speed:11.4,wind_direction:249.1,heading:359.7,distance:88555.44,depth:-2.6,cog:103.9,sog:0,created_at:"2023-01-09 08:06:00",updated_at:"2023-01-09 08:06:00"},{time:1673218804e3,id:"6f3b1990-857c-4d00-b25a-0434a0cc2c8d",ship_id:1,terminal_time:"2023-01-08 23:00:04",lat:-6.101413,lng:106.90589,wind_speed:10.4,wind_direction:257.5,heading:359.6,distance:88555.44,depth:-6.5,cog:131.5,sog:0,created_at:"2023-01-09 08:05:56",updated_at:"2023-01-09 08:05:56"},{time:1673219704e3,id:"f988100e-1c17-4430-ad7d-d42c5f9101cb",ship_id:1,terminal_time:"2023-01-08 23:15:04",lat:-6.101383,lng:106.905863,wind_speed:11.2,wind_direction:247.7,heading:359.6,distance:88555.44,depth:-6.3,cog:9.7,sog:0,created_at:"2023-01-09 08:06:57",updated_at:"2023-01-09 08:06:57"},{time:1673220604e3,id:"f9bfd7d8-0ed7-4e7c-9dd8-33793538967e",ship_id:1,terminal_time:"2023-01-08 23:30:04",lat:-6.101388,lng:106.905893,wind_speed:7.3,wind_direction:252,heading:359.7,distance:88555.44,depth:-6.3,cog:189.1,sog:.1,created_at:"2023-01-09 08:06:40",updated_at:"2023-01-09 08:06:40"},{time:1673221504e3,id:"d81f2408-511b-43f5-bc66-b9f8f3d84aea",ship_id:1,terminal_time:"2023-01-08 23:45:04",lat:-6.1014230000000005,lng:106.905862,wind_speed:11.2,wind_direction:246.3,heading:359.7,distance:88555.44,depth:-2.6,cog:195.3,sog:.1,created_at:"2023-01-09 08:06:41",updated_at:"2023-01-09 08:06:41"},{time:1673222404e3,id:"d1ae49e1-c912-4626-a700-c644a64c58ca",ship_id:1,terminal_time:"2023-01-09 00:00:04",lat:-6.101397,lng:106.905872,wind_speed:15.3,wind_direction:246.3,heading:359.8,distance:88555.44,depth:-6.5,cog:57.8,sog:0,created_at:"2023-01-09 08:06:43",updated_at:"2023-01-09 08:06:43"},{time:1673223301e3,id:"30c254de-ca32-4ae0-9bbe-50a124f42fb5",ship_id:1,terminal_time:"2023-01-09 00:15:01",lat:-6.101368,lng:106.905878,wind_speed:12,wind_direction:246.3,heading:359.8,distance:88555.44,depth:-6.1,cog:64.2,sog:0,created_at:"2023-01-09 08:07:06",updated_at:"2023-01-09 08:07:06"},{time:1673224201e3,id:"ce816a40-630c-48fa-abf2-50e2d743ecee",ship_id:1,terminal_time:"2023-01-09 00:30:01",lat:-6.101373,lng:106.905888,wind_speed:12.6,wind_direction:236.5,heading:359.8,distance:88555.44,depth:-2.8,cog:59.9,sog:0,created_at:"2023-01-09 08:07:38",updated_at:"2023-01-09 08:07:38"},{time:1673225101e3,id:"873c1631-7c9a-4a1d-b124-3879b28dd758",ship_id:1,terminal_time:"2023-01-09 00:45:01",lat:-6.101432,lng:106.905888,wind_speed:11.6,wind_direction:236.5,heading:359.8,distance:88555.44,depth:0,cog:222.4,sog:0,created_at:"2023-01-09 08:07:00",updated_at:"2023-01-09 08:07:00"},{time:1673226001e3,id:"53704def-9137-4944-8a3a-b36330fc1fb7",ship_id:1,terminal_time:"2023-01-09 01:00:01",lat:-6.1014420000000005,lng:106.905897,wind_speed:7.5,wind_direction:247.7,heading:359.7,distance:88555.44,depth:-6.1,cog:168.1,sog:0,created_at:"2023-01-09 08:06:44",updated_at:"2023-01-09 08:06:44"},{time:1673226901e3,id:"4c58ab98-4589-4979-82a3-2d5349e2d6d2",ship_id:1,terminal_time:"2023-01-09 01:15:01",lat:-6.101377,lng:106.905895,wind_speed:9.7,wind_direction:247.7,heading:359.6,distance:88555.44,depth:-6.3,cog:128.8,sog:0,created_at:"2023-01-09 08:07:55",updated_at:"2023-01-09 08:07:55"},{time:1673227801e3,id:"f53589c2-2628-4822-9efe-e9d5f6f97006",ship_id:1,terminal_time:"2023-01-09 01:30:01",lat:-6.101372,lng:106.905907,wind_speed:11,wind_direction:235.1,heading:359.7,distance:88555.44,depth:-2.8,cog:169.3,sog:0,created_at:"2023-01-09 08:07:52",updated_at:"2023-01-09 08:07:52"},{time:1673228701e3,id:"bbd3afac-671c-491d-9a53-a913b265f3a6",ship_id:1,terminal_time:"2023-01-09 01:45:01",lat:-6.101395,lng:106.905885,wind_speed:10.3,wind_direction:246.3,heading:359.8,distance:88555.44,depth:0,cog:336.2,sog:.1,created_at:"2023-01-09 08:07:54",updated_at:"2023-01-09 08:07:54"},{time:1673229626e3,id:"677d4da2-f2e4-4785-a282-e26977f5ff59",ship_id:1,terminal_time:"2023-01-09 02:00:26",lat:-6.101397,lng:106.905892,wind_speed:8.1,wind_direction:253.4,heading:359.8,distance:88555.46,depth:-6.3,cog:344.2,sog:.1,created_at:"2023-01-09 08:08:23",updated_at:"2023-01-09 08:08:23"},{time:1673230501e3,id:"6d6e995c-7f59-4690-9ba0-6bdde399168a",ship_id:1,terminal_time:"2023-01-09 02:15:01",lat:-6.10142,lng:106.90591,wind_speed:7.3,wind_direction:246.3,heading:359.7,distance:88555.47,depth:-2.8,cog:64.8,sog:0,created_at:"2023-01-09 08:08:12",updated_at:"2023-01-09 08:08:12"},{time:1673231401e3,id:"0be9f717-f25a-490d-bcae-34fa65d89a27",ship_id:1,terminal_time:"2023-01-09 02:30:01",lat:-6.1014,lng:106.905907,wind_speed:6.9,wind_direction:235.1,heading:359.6,distance:88555.48,depth:-2.8,cog:350.3,sog:0,created_at:"2023-01-09 08:08:21",updated_at:"2023-01-09 08:08:21"},{time:1673232301e3,id:"b89c57ee-02ec-4c81-a463-3ab63eea35d4",ship_id:1,terminal_time:"2023-01-09 02:45:01",lat:-6.10141,lng:106.905907,wind_speed:7.1,wind_direction:281.5,heading:359.7,distance:88555.49,depth:0,cog:340.6,sog:0,created_at:"2023-01-09 08:08:13",updated_at:"2023-01-09 08:08:13"},{time:1673233201e3,id:"a3fba678-1575-4c94-8040-8e2bb4f35c29",ship_id:1,terminal_time:"2023-01-09 03:00:01",lat:-6.101398,lng:106.905902,wind_speed:11,wind_direction:246.3,heading:359.6,distance:88555.49,depth:-6.6,cog:302,sog:0,created_at:"2023-01-09 08:09:06",updated_at:"2023-01-09 08:09:06"},{time:1673234101e3,id:"4d903123-c967-4aba-be64-4bfa45d2e9e2",ship_id:1,terminal_time:"2023-01-09 03:15:01",lat:-6.10139,lng:106.905878,wind_speed:7.7,wind_direction:259,heading:359.6,distance:88555.49,depth:-6.5,cog:314.3,sog:0,created_at:"2023-01-09 08:08:14",updated_at:"2023-01-09 08:08:14"},{time:1673235001e3,id:"1d4da80d-e1b4-46f3-b844-89cc8683bf40",ship_id:1,terminal_time:"2023-01-09 03:30:01",lat:-6.10141,lng:106.905928,wind_speed:6.2,wind_direction:247.7,heading:359.7,distance:88555.5,depth:0,cog:132.4,sog:0,created_at:"2023-01-09 08:08:53",updated_at:"2023-01-09 08:08:53"},{time:1673235901e3,id:"e71cde87-3b60-447e-b2e7-ba313276631d",ship_id:1,terminal_time:"2023-01-09 03:45:01",lat:-6.101413,lng:106.90591,wind_speed:7.7,wind_direction:252,heading:359.8,distance:88555.5,depth:0,cog:209.2,sog:0,created_at:"2023-01-09 08:08:23",updated_at:"2023-01-09 08:08:23"},{time:1673236801e3,id:"f5446243-0920-43f1-b55b-e1e7745911d7",ship_id:1,terminal_time:"2023-01-09 04:00:01",lat:-6.1013269999999995,lng:106.90594,wind_speed:7.1,wind_direction:257.5,heading:359.9,distance:88555.5,depth:-7.1,cog:206.1,sog:.1,created_at:"2023-01-09 08:08:58",updated_at:"2023-01-09 08:08:58"},{time:1673237701e3,id:"93eedeac-7e8c-4b16-8181-ccaa306bc5fd",ship_id:1,terminal_time:"2023-01-09 04:15:01",lat:-6.101417,lng:106.90591,wind_speed:8.1,wind_direction:264.5,heading:359.8,distance:88555.5,depth:-7,cog:278.5,sog:0,created_at:"2023-01-09 08:09:03",updated_at:"2023-01-09 08:09:03"},{time:1673238601e3,id:"5ea3a677-6e78-4773-a9e5-c6f4c365cfa1",ship_id:1,terminal_time:"2023-01-09 04:30:01",lat:-6.101412,lng:106.905892,wind_speed:9.5,wind_direction:249.1,heading:359.8,distance:88555.5,depth:-6.8,cog:161.2,sog:.1,created_at:"2023-01-09 08:09:01",updated_at:"2023-01-09 08:09:01"},{time:1673239501e3,id:"5c8c5a2a-ed74-4185-bef6-92c28a9fdf4e",ship_id:1,terminal_time:"2023-01-09 04:45:01",lat:-6.101433,lng:106.905898,wind_speed:6.9,wind_direction:246.3,heading:0,distance:0,depth:-3.1,cog:73.5,sog:0,created_at:"2023-01-09 08:08:43",updated_at:"2023-01-09 08:08:43"},{time:1673240401e3,id:"4c79c190-421c-4140-841f-2591d3cdafff",ship_id:1,terminal_time:"2023-01-09 05:00:01",lat:-6.10142,lng:106.905925,wind_speed:9.7,wind_direction:242.1,heading:359.8,distance:88555.5,depth:-3.1,cog:125.4,sog:0,created_at:"2023-01-09 08:09:52",updated_at:"2023-01-09 08:09:52"},{time:1673241301e3,id:"c259fb8e-9a36-4dfc-bc0a-68cd1a49a286",ship_id:1,terminal_time:"2023-01-09 05:15:01",lat:-6.101342,lng:106.905905,wind_speed:5.2,wind_direction:240.7,heading:359.8,distance:88555.5,depth:-7.1,cog:159.2,sog:0,created_at:"2023-01-09 08:10:04",updated_at:"2023-01-09 08:10:04"},{time:1673242201e3,id:"27226360-f285-47ad-94b4-61ad2013e144",ship_id:1,terminal_time:"2023-01-09 05:30:01",lat:-6.101395,lng:106.905882,wind_speed:6.4,wind_direction:242.1,heading:359.7,distance:88555.5,depth:-3.3,cog:250.3,sog:0,created_at:"2023-01-09 08:10:13",updated_at:"2023-01-09 08:10:13"},{time:1673243101e3,id:"2da1e4fe-f5f0-4895-b5fa-c4e50ec472d0",ship_id:1,terminal_time:"2023-01-09 05:45:01",lat:-6.101352,lng:106.905885,wind_speed:9.7,wind_direction:240.7,heading:359.7,distance:88555.5,depth:-3.5,cog:225.4,sog:0,created_at:"2023-01-09 08:10:15",updated_at:"2023-01-09 08:10:15"},{time:1673244001e3,id:"e101776c-0d25-4862-be01-60bdcd5c14e5",ship_id:1,terminal_time:"2023-01-09 06:00:01",lat:-6.101385,lng:106.905892,wind_speed:10.6,wind_direction:246.3,heading:359.6,distance:88555.5,depth:-3.5,cog:326.1,sog:0,created_at:"2023-01-09 08:10:03",updated_at:"2023-01-09 08:10:03"},{time:1673244901e3,id:"a9941a2b-e575-408e-a7bb-dacd988e6d96",ship_id:1,terminal_time:"2023-01-09 06:15:01",lat:-6.101383,lng:106.905903,wind_speed:7.1,wind_direction:247.7,heading:359.6,distance:88555.5,depth:-3.5,cog:256.6,sog:0,created_at:"2023-01-09 08:10:10",updated_at:"2023-01-09 08:10:10"},{time:1673245801e3,id:"a1187bf0-abe9-4353-82a3-d4fd442c22e3",ship_id:1,terminal_time:"2023-01-09 06:30:01",lat:-6.101395,lng:106.905883,wind_speed:7.7,wind_direction:247.7,heading:359.6,distance:88555.5,depth:-3.6,cog:215.4,sog:0,created_at:"2023-01-09 08:09:40",updated_at:"2023-01-09 08:09:40"},{time:1673246701e3,id:"c3d8f1fb-1911-4887-b3ce-949bd243f6c1",ship_id:1,terminal_time:"2023-01-09 06:45:01",lat:-6.101395,lng:106.90591,wind_speed:9.9,wind_direction:252,heading:359.8,distance:88555.5,depth:-3.8,cog:125.3,sog:0,created_at:"2023-01-09 08:10:36",updated_at:"2023-01-09 08:10:36"},{time:1673247601e3,id:"6d3fb6e4-4b62-422c-bd75-5562e48a058d",ship_id:1,terminal_time:"2023-01-09 07:00:01",lat:-6.101393,lng:106.905862,wind_speed:7.5,wind_direction:252,heading:359.9,distance:88555.5,depth:-3.8,cog:64.2,sog:0,created_at:"2023-01-09 08:10:33",updated_at:"2023-01-09 08:10:33"},{time:1673248501e3,id:"6c8d24c2-f12c-4698-a829-a0632f019df1",ship_id:1,terminal_time:"2023-01-09 07:15:01",lat:-6.101393,lng:106.905878,wind_speed:7.3,wind_direction:246.3,heading:359.7,distance:88555.5,depth:-4,cog:64.5,sog:0,created_at:"2023-01-09 08:10:33",updated_at:"2023-01-09 08:10:33"},{time:1673249401e3,id:"519acfef-d197-4cfa-afa7-4e6e5e4b8737",ship_id:1,terminal_time:"2023-01-09 07:30:01",lat:-6.101377,lng:106.905885,wind_speed:6.6,wind_direction:242.1,heading:359.7,distance:88555.5,depth:-4,cog:173.5,sog:0,created_at:"2023-01-09 08:10:41",updated_at:"2023-01-09 08:10:41"},{time:1673250301e3,id:"aa8fe1a7-57d9-445d-8f18-3f22b1a409c6",ship_id:1,terminal_time:"2023-01-09 07:45:01",lat:-6.101395,lng:106.905893,wind_speed:10.4,wind_direction:247.7,heading:0,distance:0,depth:-4,cog:173.5,sog:0,created_at:"2023-01-09 08:11:09",updated_at:"2023-01-09 08:11:09"},{time:1673251201e3,id:"5d87fb41-c0a5-49b5-aabc-e16448ec0db7",ship_id:1,terminal_time:"2023-01-09 08:00:01",lat:-6.101405,lng:106.905888,wind_speed:6,wind_direction:265.9,heading:359.7,distance:88555.5,depth:-4,cog:173.5,sog:0,created_at:"2023-01-09 08:10:51",updated_at:"2023-01-09 08:10:51"},{time:1673257766e3,id:"59f2dd21-3619-4d39-a699-a444c5f5039c",ship_id:1,terminal_time:"2023-01-09 09:49:26",lat:-6.10138,lng:106.905813,wind_speed:14.1,wind_direction:302.5,heading:359.8,distance:88555.5,depth:-4.1,cog:132.4,sog:0,created_at:"2023-01-10 08:00:06",updated_at:"2023-01-10 08:00:06"},{time:1673258401e3,id:"6b431693-2664-44b6-8518-5ab07bbf0c85",ship_id:1,terminal_time:"2023-01-09 10:00:01",lat:-6.101373,lng:106.9059,wind_speed:14.1,wind_direction:282.9,heading:359.8,distance:88555.5,depth:-4.1,cog:115.2,sog:0,created_at:"2023-01-10 08:02:29",updated_at:"2023-01-10 08:02:29"},{time:1673259301e3,id:"40fb792e-7a2e-4697-a25b-e79c2d2fdbc6",ship_id:1,terminal_time:"2023-01-09 10:15:01",lat:-6.10135,lng:106.905885,wind_speed:7.1,wind_direction:332.1,heading:359.9,distance:88555.5,depth:-4.3,cog:144.6,sog:0,created_at:"2023-01-10 08:01:40",updated_at:"2023-01-10 08:01:40"},{time:1673260201e3,id:"354963f0-7e7e-4ea0-97ae-5e69a9a932c9",ship_id:1,terminal_time:"2023-01-09 10:30:01",lat:-6.101405,lng:106.90586,wind_speed:12.6,wind_direction:292.8,heading:359.8,distance:88555.5,depth:-4.3,cog:105.8,sog:0,created_at:"2023-01-10 08:04:19",updated_at:"2023-01-10 08:04:19"},{time:1673261101e3,id:"5bbbf421-2adb-4fd3-81a0-b0cade6e5e67",ship_id:1,terminal_time:"2023-01-09 10:45:01",lat:-6.101395,lng:106.905892,wind_speed:9.5,wind_direction:297,heading:359.8,distance:88555.5,depth:-4.3,cog:214.9,sog:0,created_at:"2023-01-10 08:05:43",updated_at:"2023-01-10 08:05:43"},{time:1673262001e3,id:"630c5619-2b52-4cbb-93bf-85c73cae98ae",ship_id:1,terminal_time:"2023-01-09 11:00:01",lat:-6.101408,lng:106.905882,wind_speed:6.6,wind_direction:297,heading:0,distance:0,depth:-4.3,cog:99.6,sog:0,created_at:"2023-01-10 08:02:39",updated_at:"2023-01-10 08:02:39"},{time:1673262901e3,id:"b403636b-8619-4d42-9cb4-6c4166a1b9b3",ship_id:1,terminal_time:"2023-01-09 11:15:01",lat:-6.101393,lng:106.90587,wind_speed:5,wind_direction:311.5,heading:359.8,distance:88555.5,depth:-4.3,cog:93.5,sog:0,created_at:"2023-01-10 08:04:42",updated_at:"2023-01-10 08:04:42"},{time:1673263806e3,id:"5f165c7e-e6b7-44c1-a482-567e62bc4017",ship_id:1,terminal_time:"2023-01-09 11:30:06",lat:-6.1014,lng:106.905877,wind_speed:15.1,wind_direction:337.8,heading:359.8,distance:88555.51,depth:-4.1,cog:73.4,sog:0,created_at:"2023-01-10 08:02:10",updated_at:"2023-01-10 08:02:10"},{time:1673264701e3,id:"bd2a40ce-8f23-43e0-8272-8f201c185ec8",ship_id:1,terminal_time:"2023-01-09 11:45:01",lat:-6.101388,lng:106.905907,wind_speed:16.3,wind_direction:337.8,heading:359.9,distance:88555.51,depth:-4.1,cog:61.2,sog:0,created_at:"2023-01-10 08:05:49",updated_at:"2023-01-10 08:05:49"},{time:1673265601e3,id:"c24f89d3-7780-4ffc-a265-5b6d2f72f073",ship_id:1,terminal_time:"2023-01-09 12:00:01",lat:-6.1014,lng:106.905888,wind_speed:14.7,wind_direction:342,heading:359.8,distance:88555.51,depth:-4.1,cog:67.8,sog:0,created_at:"2023-01-10 08:03:23",updated_at:"2023-01-10 08:03:23"},{time:1673266501e3,id:"13982c0e-988a-46c5-bec8-355b5f7dc5ca",ship_id:1,terminal_time:"2023-01-09 12:15:01",lat:-6.101408,lng:106.905903,wind_speed:7.1,wind_direction:315.3,heading:359.8,distance:88555.51,depth:-4.1,cog:36.9,sog:0,created_at:"2023-01-10 08:02:34",updated_at:"2023-01-10 08:02:34"},{time:1673267401e3,id:"d0beec20-b06e-4fc7-ad00-6f35454bb257",ship_id:1,terminal_time:"2023-01-09 12:30:01",lat:-6.10138,lng:106.905855,wind_speed:11.2,wind_direction:337.8,heading:359.8,distance:88555.51,depth:-4.1,cog:37.8,sog:0,created_at:"2023-01-10 08:01:57",updated_at:"2023-01-10 08:01:57"},{time:1673268301e3,id:"98379784-93de-4f27-b326-467bfef4b682",ship_id:1,terminal_time:"2023-01-09 12:45:01",lat:-6.101353,lng:106.905848,wind_speed:12.6,wind_direction:337.8,heading:359.8,distance:88555.51,depth:-4.1,cog:90.6,sog:0,created_at:"2023-01-10 08:05:23",updated_at:"2023-01-10 08:05:23"},{time:1673269201e3,id:"05ff55cd-da21-40f7-83dd-131e0587880e",ship_id:1,terminal_time:"2023-01-09 13:00:01",lat:-6.101385,lng:106.905875,wind_speed:12.2,wind_direction:342,heading:359.7,distance:88555.51,depth:-4,cog:96.8,sog:.1,created_at:"2023-01-10 08:01:45",updated_at:"2023-01-10 08:01:45"},{time:1673270101e3,id:"f7cc3f27-2367-4a6d-a4c2-db1154e9e00f",ship_id:1,terminal_time:"2023-01-09 13:15:01",lat:-6.101383,lng:106.905865,wind_speed:14.5,wind_direction:337.8,heading:359.7,distance:88555.51,depth:-4,cog:150.1,sog:.1,created_at:"2023-01-10 08:03:50",updated_at:"2023-01-10 08:03:50"},{time:1673271001e3,id:"f662f7f2-d4d5-449f-873a-bcdfc3a00d51",ship_id:1,terminal_time:"2023-01-09 13:30:01",lat:-6.101357,lng:106.905865,wind_speed:12.8,wind_direction:337.8,heading:359.7,distance:88555.52,depth:-4,cog:321.4,sog:0,created_at:"2023-01-10 08:02:28",updated_at:"2023-01-10 08:02:28"},{time:1673271901e3,id:"89151d87-e6ce-4678-a3ef-8544ce5f573f",ship_id:1,terminal_time:"2023-01-09 13:45:01",lat:-6.101363,lng:106.905908,wind_speed:14.7,wind_direction:337.8,heading:359.6,distance:88555.52,depth:-4,cog:66.8,sog:0,created_at:"2023-01-10 08:04:30",updated_at:"2023-01-10 08:04:30"},{time:1673272801e3,id:"03f8f7d6-97b0-4dd5-be91-36f792a1a625",ship_id:1,terminal_time:"2023-01-09 14:00:01",lat:-6.101427,lng:106.905857,wind_speed:13,wind_direction:332.1,heading:.4,distance:88555.52,depth:-4,cog:287.6,sog:0,created_at:"2023-01-10 08:03:02",updated_at:"2023-01-10 08:03:02"},{time:1673273701e3,id:"a1f01e80-907b-4720-aaa7-aa073ffd06af",ship_id:1,terminal_time:"2023-01-09 14:15:01",lat:-6.095707,lng:106.89818,wind_speed:26.6,wind_direction:45,heading:276.6,distance:88556.26,depth:-11.3,cog:274.8,sog:6.6,created_at:"2023-01-10 08:01:52",updated_at:"2023-01-10 08:01:52"},{time:1673274601e3,id:"615a0d2a-2428-4c59-a170-a77f1278abfc",ship_id:1,terminal_time:"2023-01-09 14:30:01",lat:-6.079302,lng:106.881568,wind_speed:26.2,wind_direction:349,heading:355.1,distance:88557.85,depth:-10.8,cog:357.4,sog:7.3,created_at:"2023-01-10 08:01:54",updated_at:"2023-01-10 08:01:54"},{time:1673275501e3,id:"8a83141d-bf01-41b2-a27c-8b01697b30c7",ship_id:1,terminal_time:"2023-01-09 14:45:01",lat:-6.03759,lng:106.880487,wind_speed:28.9,wind_direction:0,heading:350.6,distance:88560.36,depth:-12.5,cog:353.9,sog:10.4,created_at:"2023-01-10 08:03:06",updated_at:"2023-01-10 08:03:06"},{time:1673276401e3,id:"f8617d50-8583-4cef-a0dd-29468fbc2d90",ship_id:1,terminal_time:"2023-01-09 15:00:01",lat:-5.98431,lng:106.873388,wind_speed:29.7,wind_direction:9.7,heading:330.3,distance:88563.54,depth:-16.6,cog:338.3,sog:12.5,created_at:"2023-01-10 08:03:19",updated_at:"2023-01-10 08:03:19"},{time:1673277301e3,id:"966ade39-66eb-4749-99b5-72528c7217e9",ship_id:1,terminal_time:"2023-01-09 15:15:01",lat:-5.961758,lng:106.82729,wind_speed:29.3,wind_direction:16.8,heading:312.6,distance:88566.7,depth:-19,cog:312.1,sog:13.2,created_at:"2023-01-10 08:02:20",updated_at:"2023-01-10 08:02:20"},{time:1673278201e3,id:"7531c730-0f9f-498f-85e9-d9704b5e56c3",ship_id:1,terminal_time:"2023-01-09 15:30:01",lat:-5.931025,lng:106.78072,wind_speed:28.1,wind_direction:21,heading:310.9,distance:88570,depth:-22.5,cog:312.1,sog:13.4,created_at:"2023-01-10 08:04:54",updated_at:"2023-01-10 08:04:54"},{time:1673279101e3,id:"0f5e09a8-fa21-4745-b847-90fe597eae7b",ship_id:1,terminal_time:"2023-01-09 15:45:01",lat:-14.161667,lng:116.66,wind_speed:27.2,wind_direction:32.3,heading:308,distance:88573.33,depth:-30.5,cog:0,sog:0,created_at:"2023-01-10 08:03:50",updated_at:"2023-01-10 08:03:50"},{time:1673280121e3,id:"b0c02cd1-d141-4cc5-b9f3-469c2154f3b2",ship_id:1,terminal_time:"2023-01-09 16:02:01",lat:-5.854772,lng:106.68859,wind_speed:23.7,wind_direction:33.6,heading:304.1,distance:88577.22,depth:-27.8,cog:305.1,sog:13.5,created_at:"2023-01-10 08:06:17",updated_at:"2023-01-10 08:06:17"},{time:1673280901e3,id:"60d837ed-22c2-4b7e-954a-8ed76765bb6b",ship_id:1,terminal_time:"2023-01-09 16:15:01",lat:-5.828417,lng:106.647598,wind_speed:19.2,wind_direction:54.9,heading:267.9,distance:88580.13,depth:-45.3,cog:273.5,sog:12.4,created_at:"2023-01-10 08:04:40",updated_at:"2023-01-10 08:04:40"},{time:1673281801e3,id:"5e868bf7-9f25-4361-9d84-88ccdcadc5bd",ship_id:1,terminal_time:"2023-01-09 16:30:01",lat:-5.833347,lng:106.590948,wind_speed:20.4,wind_direction:43.6,heading:263.3,distance:88583.55,depth:-70.6,cog:263.3,sog:13.8,created_at:"2023-01-10 08:03:21",updated_at:"2023-01-10 08:03:21"},{time:1673282701e3,id:"290d63d9-e0da-419c-880b-2ff176353be8",ship_id:1,terminal_time:"2023-01-09 16:45:01",lat:-5.83681,lng:106.533245,wind_speed:19.2,wind_direction:49.1,heading:269.3,distance:88586.99,depth:-83.3,cog:270,sog:13.8,created_at:"2023-01-10 08:04:36",updated_at:"2023-01-10 08:04:36"},{time:1673283601e3,id:"74437480-2eee-4b7d-bdec-bf2c3f57793e",ship_id:1,terminal_time:"2023-01-09 17:00:01",lat:-5.836503,lng:106.475305,wind_speed:20.4,wind_direction:49.1,heading:264.9,distance:88590.47,depth:-48.5,cog:266.8,sog:13.9,created_at:"2023-01-10 08:05:08",updated_at:"2023-01-10 08:05:08"},{time:1673284501e3,id:"a12b6836-7207-4ed4-b124-4d651273bb02",ship_id:1,terminal_time:"2023-01-09 17:15:01",lat:-5.845467,lng:106.417943,wind_speed:20.4,wind_direction:43.6,heading:267.7,distance:88593.93,depth:-51.6,cog:265.6,sog:14,created_at:"2023-01-10 08:04:19",updated_at:"2023-01-10 08:04:19"},{time:1673285401e3,id:"09588182-8517-4089-9f19-f6dfe3842699",ship_id:1,terminal_time:"2023-01-09 17:30:01",lat:-5.841642,lng:106.35981,wind_speed:21.3,wind_direction:33.6,heading:0,distance:0,depth:-27.1,cog:274.8,sog:14.1,created_at:"2023-01-10 08:05:40",updated_at:"2023-01-10 08:05:40"},{time:1673286301e3,id:"878bec49-a145-488f-ae6a-22e20f985adb",ship_id:1,terminal_time:"2023-01-09 17:45:01",lat:-5.838773,lng:106.300968,wind_speed:24.4,wind_direction:26.7,heading:269.9,distance:88600.96,depth:-32.6,cog:270.7,sog:14.2,created_at:"2023-01-10 08:04:41",updated_at:"2023-01-10 08:04:41"},{time:1673287201e3,id:"e479c84e-0867-465c-8999-5e588a85eea7",ship_id:1,terminal_time:"2023-01-09 18:00:01",lat:-5.837823,lng:106.239917,wind_speed:27.4,wind_direction:4.2,heading:270,distance:88604.52,depth:-23.8,cog:271.2,sog:14.3,created_at:"2023-01-10 08:05:14",updated_at:"2023-01-10 08:05:14"},{time:1673288101e3,id:"c65ffd03-8a74-4926-bed4-8610fa7e81a0",ship_id:1,terminal_time:"2023-01-09 18:15:01",lat:-5.838808,lng:106.181588,wind_speed:25,wind_direction:9.7,heading:264.9,distance:88608.11,depth:-28.1,cog:0,sog:0,created_at:"2023-01-10 08:06:48",updated_at:"2023-01-10 08:06:48"},{time:1673289001e3,id:"1c8548ab-cb0d-4bdb-9f57-195a3c362744",ship_id:1,terminal_time:"2023-01-09 18:30:01",lat:-5.841168,lng:106.120507,wind_speed:25,wind_direction:4.2,heading:268.9,distance:88611.69,depth:-38.3,cog:269.4,sog:14.3,created_at:"2023-01-10 08:06:38",updated_at:"2023-01-10 08:06:38"},{time:1673289901e3,id:"9205bfd4-683a-4325-8b29-103eb842219b",ship_id:1,terminal_time:"2023-01-09 18:45:01",lat:-5.8411,lng:106.061022,wind_speed:28.9,wind_direction:0,heading:269.1,distance:88615.22,depth:-50.3,cog:270.3,sog:14.2,created_at:"2023-01-10 08:06:30",updated_at:"2023-01-10 08:06:30"},{time:1673290801e3,id:"911bece6-7e5c-40f0-b0da-cf35b3eb7067",ship_id:1,terminal_time:"2023-01-09 19:00:01",lat:-5.854877,lng:106.006268,wind_speed:30.7,wind_direction:21,heading:225.6,distance:88618.76,depth:-74.5,cog:229.1,sog:14.3,created_at:"2023-01-10 08:07:24",updated_at:"2023-01-10 08:07:24"},{time:1673291701e3,id:"7fefd3ea-5a95-4eaf-a4ef-ec5bbb15390a",ship_id:1,terminal_time:"2023-01-09 19:15:01",lat:-5.897932,lng:105.964727,wind_speed:28.5,wind_direction:21,heading:224.8,distance:88622.34,depth:-37.1,cog:224.5,sog:14.2,created_at:"2023-01-10 08:07:04",updated_at:"2023-01-10 08:07:04"},{time:1673292601e3,id:"05a6f60e-0ee4-4d48-9f0c-6823f391ff6d",ship_id:1,terminal_time:"2023-01-09 19:30:01",lat:-5.94169,lng:105.92583,wind_speed:31.8,wind_direction:26.7,heading:221.9,distance:88625.93,depth:-38.1,cog:222.4,sog:13.9,created_at:"2023-01-10 08:05:52",updated_at:"2023-01-10 08:05:52"},{time:1673293501e3,id:"3582ee5f-9c1c-447c-a1c2-ad23d1fcdc4c",ship_id:1,terminal_time:"2023-01-09 19:45:01",lat:-5.985892,lng:105.888712,wind_speed:30.7,wind_direction:32.3,heading:215.3,distance:88629.38,depth:-50.8,cog:216.3,sog:14.2,created_at:"2023-01-10 08:05:36",updated_at:"2023-01-10 08:05:36"},{time:1673294401e3,id:"bae337b8-cf2c-4345-83f1-51a534c4756a",ship_id:1,terminal_time:"2023-01-09 20:00:01",lat:-6.007143,lng:105.844002,wind_speed:27.9,wind_direction:353.3,heading:291,distance:88632.81,depth:-84.1,cog:292.2,sog:13.7,created_at:"2023-01-10 08:08:12",updated_at:"2023-01-10 08:08:12"},{time:1673295301e3,id:"2bfe50aa-406d-420d-baba-3647f540a6db",ship_id:1,terminal_time:"2023-01-09 20:15:01",lat:-5.982978,lng:105.794872,wind_speed:28.5,wind_direction:0,heading:287.8,distance:88636.11,depth:-52,cog:293.4,sog:12.5,created_at:"2023-01-10 08:08:05",updated_at:"2023-01-10 08:08:05"},{time:1673296201e3,id:"226c6298-b20f-4d61-8d46-d20d9a16f764",ship_id:1,terminal_time:"2023-01-09 20:30:01",lat:-5.970388,lng:105.742705,wind_speed:31.8,wind_direction:4.2,heading:280,distance:88639.31,depth:-89.5,cog:282.8,sog:13.6,created_at:"2023-01-10 08:07:55",updated_at:"2023-01-10 08:07:55"},{time:1673297101e3,id:"0b3a3d1b-e2cd-412d-8949-052b468ac363",ship_id:1,terminal_time:"2023-01-09 20:45:01",lat:-5.952805,lng:105.689012,wind_speed:30.9,wind_direction:4.2,heading:288.7,distance:88642.69,depth:-66.1,cog:291,sog:13.4,created_at:"2023-01-10 08:06:29",updated_at:"2023-01-10 08:06:29"},{time:1673298001e3,id:"e5dc3b25-3498-4336-b51f-65360056bb47",ship_id:1,terminal_time:"2023-01-09 21:00:01",lat:-5.93262,lng:105.638005,wind_speed:32,wind_direction:4.2,heading:289,distance:88645.98,depth:-29.5,cog:291.5,sog:12.9,created_at:"2023-01-10 08:07:36",updated_at:"2023-01-10 08:07:36"},{time:1673298901e3,id:"97af2e02-a337-477c-b476-f8cc1f0f39bd",ship_id:1,terminal_time:"2023-01-09 21:15:01",lat:-5.918415,lng:105.586073,wind_speed:33,wind_direction:9.2,heading:274.4,distance:88649.16,depth:-20,cog:275.9,sog:12.5,created_at:"2023-01-10 08:06:55",updated_at:"2023-01-10 08:06:55"},{time:1673299801e3,id:"3f6e7fb8-8ed6-4139-af72-762e9a783f03",ship_id:1,terminal_time:"2023-01-09 21:30:01",lat:-5.913357,lng:105.534142,wind_speed:33.2,wind_direction:9.7,heading:272.1,distance:88652.27,depth:-36.3,cog:275.1,sog:12.2,created_at:"2023-01-10 08:06:51",updated_at:"2023-01-10 08:06:51"},{time:1673300701e3,id:"039c9a38-7354-41ae-a67f-1a28cc9ac563",ship_id:1,terminal_time:"2023-01-09 21:45:01",lat:-5.909802,lng:105.487677,wind_speed:31.6,wind_direction:4.2,heading:280.1,distance:88655.08,depth:-35.1,cog:281.9,sog:11.4,created_at:"2023-01-10 08:07:31",updated_at:"2023-01-10 08:07:31"},{time:1673301601e3,id:"c21c6af2-1b26-41e9-b6ef-1f8d76e84096",ship_id:1,terminal_time:"2023-01-09 22:00:01",lat:-5.902202,lng:105.43825,wind_speed:32.2,wind_direction:4.2,heading:0,distance:0,depth:-28.1,cog:278,sog:12.2,created_at:"2023-01-10 08:07:20",updated_at:"2023-01-10 08:07:20"},{time:1673302501e3,id:"6187beed-2f55-4f6c-ac4d-870ba4151a2b",ship_id:1,terminal_time:"2023-01-09 22:15:01",lat:-5.894857,lng:105.38688,wind_speed:33.6,wind_direction:7.5,heading:275.2,distance:88661.16,depth:-50.5,cog:279.6,sog:12.5,created_at:"2023-01-10 08:08:14",updated_at:"2023-01-10 08:08:14"},{time:1673303401e3,id:"d2860a82-a25f-4c3b-aaf3-db903c6c079d",ship_id:1,terminal_time:"2023-01-09 22:30:01",lat:-5.88575,lng:105.334428,wind_speed:37.7,wind_direction:4.2,heading:278.6,distance:88664.41,depth:-78.6,cog:282.5,sog:12.7,created_at:"2023-01-10 08:08:58",updated_at:"2023-01-10 08:08:58"},{time:1673304301e3,id:"bc8a41e1-d425-400a-afb9-2d64d783a252",ship_id:1,terminal_time:"2023-01-09 22:45:01",lat:-5.874368,lng:105.282648,wind_speed:34.4,wind_direction:9.7,heading:280.7,distance:88667.58,depth:-95.8,cog:284,sog:12.9,created_at:"2023-01-10 08:08:50",updated_at:"2023-01-10 08:08:50"},{time:1673305201e3,id:"2210ba63-e4e5-46bb-a238-f60a7ff5f63e",ship_id:1,terminal_time:"2023-01-09 23:00:01",lat:-5.862632,lng:105.230625,wind_speed:33.6,wind_direction:19,heading:281.1,distance:88670.78,depth:-105,cog:280.9,sog:12.6,created_at:"2023-01-10 08:08:39",updated_at:"2023-01-10 08:08:39"},{time:1673306101e3,id:"42f528f7-c57d-46a6-b362-95020790eb63",ship_id:1,terminal_time:"2023-01-09 23:15:01",lat:-5.850693,lng:105.178738,wind_speed:34.2,wind_direction:21,heading:283,distance:88673.97,depth:-120,cog:284.6,sog:12.8,created_at:"2023-01-10 08:09:21",updated_at:"2023-01-10 08:09:21"},{time:1673307001e3,id:"5e0ba177-15a5-4845-a33f-2b9be3696f90",ship_id:1,terminal_time:"2023-01-09 23:30:01",lat:-5.836418,lng:105.127365,wind_speed:37.3,wind_direction:16.8,heading:285.3,distance:88677.14,depth:-200,cog:290.4,sog:12.6,created_at:"2023-01-10 08:08:57",updated_at:"2023-01-10 08:08:57"},{time:1673307901e3,id:"74e77432-2815-4913-8e48-42a55e173eda",ship_id:1,terminal_time:"2023-01-09 23:45:01",lat:-5.821302,lng:105.076055,wind_speed:32.6,wind_direction:19.6,heading:285,distance:88680.34,depth:-206,cog:282.4,sog:12.7,created_at:"2023-01-10 08:08:36",updated_at:"2023-01-10 08:08:36"},{time:1673308801e3,id:"733111ca-d0a6-4cd2-a3c3-25a09999a0cc",ship_id:1,terminal_time:"2023-01-10 00:00:01",lat:-5.800392,lng:105.027445,wind_speed:28.7,wind_direction:9.7,heading:300.1,distance:88683.55,depth:-200.6,cog:302.4,sog:12.9,created_at:"2023-01-10 08:09:31",updated_at:"2023-01-10 08:09:31"},{time:1673309703e3,id:"f06e33ca-2719-4b1f-8f9d-3187c3f75fac",ship_id:1,terminal_time:"2023-01-10 00:15:03",lat:-5.7731770000000004,lng:104.980798,wind_speed:28.9,wind_direction:9.7,heading:297.3,distance:88686.7,depth:-202.3,cog:297,sog:12.5,created_at:"2023-01-10 08:10:07",updated_at:"2023-01-10 08:10:07"},{time:1673310603e3,id:"c856de4d-7236-4d94-9e85-c9fedbc48708",ship_id:1,terminal_time:"2023-01-10 00:30:03",lat:-5.747583,lng:104.93485,wind_speed:28.7,wind_direction:11.2,heading:296.8,distance:88689.82,depth:-198.3,cog:300,sog:12.6,created_at:"2023-01-10 08:10:05",updated_at:"2023-01-10 08:10:05"},{time:1673311503e3,id:"cd8a0d81-f531-4582-b2fb-e948ed042a0b",ship_id:1,terminal_time:"2023-01-10 00:45:03",lat:-5.720978,lng:104.889258,wind_speed:31.6,wind_direction:8.4,heading:298.9,distance:88692.97,depth:-77,cog:300.9,sog:12.5,created_at:"2023-01-10 08:09:46",updated_at:"2023-01-10 08:09:46"},{time:1673312403e3,id:"4dba530d-bc76-4355-ab28-1340d9ac5be7",ship_id:1,terminal_time:"2023-01-10 01:00:03",lat:-5.69468,lng:104.843363,wind_speed:27.2,wind_direction:11.2,heading:296.8,distance:88696.15,depth:-59.3,cog:299.2,sog:12.8,created_at:"2023-01-10 08:09:28",updated_at:"2023-01-10 08:09:28"},{time:1673313303e3,id:"325aec11-c392-479b-9d0d-41cbbd1feff8",ship_id:1,terminal_time:"2023-01-10 01:15:03",lat:-5.668635,lng:104.795995,wind_speed:25.4,wind_direction:16.8,heading:303.1,distance:88699.36,depth:-81.6,cog:305.2,sog:13.1,created_at:"2023-01-10 08:10:20",updated_at:"2023-01-10 08:10:20"},{time:1673314203e3,id:"b06943c5-9cd6-4fad-8ebe-f5449d7bffcc",ship_id:1,terminal_time:"2023-01-10 01:30:03",lat:-5.637213,lng:104.750302,wind_speed:25.4,wind_direction:16.8,heading:302.1,distance:88702.77,depth:-159.3,cog:302.6,sog:13.6,created_at:"2023-01-10 08:10:11",updated_at:"2023-01-10 08:10:11"},{time:1673315103e3,id:"9222b191-091c-4065-a00a-754b7a702ec9",ship_id:1,terminal_time:"2023-01-10 01:45:03",lat:-5.606022,lng:104.702637,wind_speed:24.1,wind_direction:12.5,heading:300.2,distance:88706.13,depth:-184.6,cog:302.6,sog:13.8,created_at:"2023-01-10 08:10:19",updated_at:"2023-01-10 08:10:19"},{time:1673316003e3,id:"352b8845-bef7-409c-a3e0-cf0aadac3054",ship_id:1,terminal_time:"2023-01-10 02:00:03",lat:-5.5799579999999995,lng:104.65319,wind_speed:21.1,wind_direction:16.8,heading:295.9,distance:88709.53,depth:-84.6,cog:296,sog:13.5,created_at:"2023-01-10 08:10:25",updated_at:"2023-01-10 08:10:25"},{time:1673316903e3,id:"329d6a2d-92b7-4284-a981-79ccaf315c9c",ship_id:1,terminal_time:"2023-01-10 02:15:03",lat:-5.562793,lng:104.609362,wind_speed:18.2,wind_direction:19.6,heading:300.2,distance:88712.38,depth:-42.6,cog:307.4,sog:8.5,created_at:"2023-01-10 08:10:25",updated_at:"2023-01-10 08:10:25"},{time:1673317803e3,id:"232ce1d3-f960-42b9-80f6-306f115e0844",ship_id:1,terminal_time:"2023-01-10 02:30:03",lat:-13.866667,lng:111.266667,wind_speed:15.9,wind_direction:19.6,heading:305.2,distance:88714.17,depth:-36,cog:0,sog:0,created_at:"2023-01-10 08:10:32",updated_at:"2023-01-10 08:10:32"},{time:1673318703e3,id:"06e72ee8-b924-4aca-b288-407b083f57f5",ship_id:1,terminal_time:"2023-01-10 02:45:03",lat:-5.5387,lng:104.573278,wind_speed:7.1,wind_direction:21,heading:333.4,distance:88715.01,depth:-31.3,cog:286.4,sog:.5,created_at:"2023-01-10 08:10:31",updated_at:"2023-01-10 08:10:31"},{time:1673319603e3,id:"96979015-3293-432b-acdb-18a40130c80d",ship_id:1,terminal_time:"2023-01-10 03:00:03",lat:-5.538557,lng:104.572997,wind_speed:4.8,wind_direction:11.2,heading:34,distance:88715.04,depth:-31,cog:104.3,sog:.1,created_at:"2023-01-10 08:10:58",updated_at:"2023-01-10 08:10:58"},{time:1673320503e3,id:"311160b5-f9c6-4799-ad43-d85555c84374",ship_id:1,terminal_time:"2023-01-10 03:15:03",lat:-5.538512,lng:104.573348,wind_speed:2.5,wind_direction:11.2,heading:322.4,distance:88715.04,depth:-31,cog:349.1,sog:.1,created_at:"2023-01-10 08:10:55",updated_at:"2023-01-10 08:10:55"},{time:1673321403e3,id:"73f5a73d-8652-4de0-a492-7e4d2da8a5e4",ship_id:1,terminal_time:"2023-01-10 03:30:03",lat:-5.538447,lng:104.573578,wind_speed:2.7,wind_direction:11.2,heading:311.9,distance:88715.05,depth:-31,cog:124.7,sog:0,created_at:"2023-01-10 08:11:31",updated_at:"2023-01-10 08:11:31"},{time:1673322303e3,id:"d0d88b43-dbf4-4712-b6e6-2ba40ee6cbe7",ship_id:1,terminal_time:"2023-01-10 03:45:03",lat:-5.5383569999999995,lng:104.573628,wind_speed:2.9,wind_direction:11.2,heading:306.3,distance:88715.06,depth:-31,cog:216.8,sog:.1,created_at:"2023-01-10 08:11:02",updated_at:"2023-01-10 08:11:02"},{time:1673323203e3,id:"108e11e3-a7fa-41b3-af81-0cca33e8ff4c",ship_id:1,terminal_time:"2023-01-10 04:00:03",lat:-5.538393,lng:104.573665,wind_speed:4.8,wind_direction:11.2,heading:306.8,distance:88715.07,depth:-31,cog:232.3,sog:0,created_at:"2023-01-10 08:11:43",updated_at:"2023-01-10 08:11:43"},{time:1673324103e3,id:"bd89b9b2-c51f-4cc4-8ef2-932d74a5a249",ship_id:1,terminal_time:"2023-01-10 04:15:03",lat:-5.538438,lng:104.573587,wind_speed:5,wind_direction:11.2,heading:312.8,distance:88715.08,depth:-31,cog:169,sog:.1,created_at:"2023-01-10 08:11:37",updated_at:"2023-01-10 08:11:37"},{time:1673325003e3,id:"78ae1344-a9e9-44ff-b1f4-0c24f28e8fd4",ship_id:1,terminal_time:"2023-01-10 04:30:03",lat:-5.538348,lng:104.5736,wind_speed:5.6,wind_direction:11.2,heading:310.3,distance:88715.08,depth:-31,cog:80.3,sog:0,created_at:"2023-01-10 08:11:34",updated_at:"2023-01-10 08:11:34"},{time:1673325903e3,id:"a3aed659-572b-4b7c-abbe-b6691c723542",ship_id:1,terminal_time:"2023-01-10 04:45:03",lat:-5.538425,lng:104.573628,wind_speed:5.4,wind_direction:11.2,heading:310.7,distance:88715.08,depth:-31,cog:249.5,sog:0,created_at:"2023-01-10 08:12:04",updated_at:"2023-01-10 08:12:04"},{time:1673326803e3,id:"8c399c42-218f-43da-b0aa-06ac26cd8f12",ship_id:1,terminal_time:"2023-01-10 05:00:03",lat:-5.538432,lng:104.573612,wind_speed:6,wind_direction:11.2,heading:311.6,distance:88715.09,depth:-31,cog:246.8,sog:0,created_at:"2023-01-10 08:12:42",updated_at:"2023-01-10 08:12:42"},{time:1673327703e3,id:"27a493f7-b14d-40e8-8f51-878ed652d553",ship_id:1,terminal_time:"2023-01-10 05:15:03",lat:-5.538348,lng:104.573678,wind_speed:7.9,wind_direction:11.2,heading:304.8,distance:88715.09,depth:-31,cog:251.7,sog:0,created_at:"2023-01-10 08:12:18",updated_at:"2023-01-10 08:12:18"},{time:1673328603e3,id:"f54bb566-292e-490c-883f-df6d70b3841b",ship_id:1,terminal_time:"2023-01-10 05:30:03",lat:-5.538438,lng:104.57369,wind_speed:6.2,wind_direction:11.2,heading:307.8,distance:88715.09,depth:-31.3,cog:246.1,sog:0,created_at:"2023-01-10 08:12:04",updated_at:"2023-01-10 08:12:04"},{time:1673329503e3,id:"31775419-f67f-4db4-a57d-40ae80fb1fee",ship_id:1,terminal_time:"2023-01-10 05:45:03",lat:-5.5385349999999995,lng:104.573568,wind_speed:7.7,wind_direction:11.2,heading:315.1,distance:88715.1,depth:-31.3,cog:246.9,sog:0,created_at:"2023-01-10 08:12:07",updated_at:"2023-01-10 08:12:07"},{time:1673330403e3,id:"2aa1b843-cd65-401d-ad7b-b8c474060a3b",ship_id:1,terminal_time:"2023-01-10 06:00:03",lat:-5.538448,lng:104.573675,wind_speed:6.9,wind_direction:11.2,heading:309.7,distance:88715.1,depth:-31.3,cog:337.6,sog:.1,created_at:"2023-01-10 08:12:18",updated_at:"2023-01-10 08:12:18"},{time:1673331303e3,id:"8f037bb3-2b98-4249-ae83-9bb727b265b0",ship_id:1,terminal_time:"2023-01-10 06:15:03",lat:-5.538453,lng:104.573677,wind_speed:6.6,wind_direction:11.2,heading:306.4,distance:88715.11,depth:-31.3,cog:223.5,sog:.1,created_at:"2023-01-10 08:13:02",updated_at:"2023-01-10 08:13:02"},{time:1673332203e3,id:"bb7e96d9-62c3-4ce3-b7bf-c5d7c72c9df1",ship_id:1,terminal_time:"2023-01-10 06:30:03",lat:-5.53864,lng:104.573363,wind_speed:8.3,wind_direction:11.2,heading:3,distance:88715.12,depth:-31.6,cog:0,sog:0,created_at:"2023-01-10 08:13:13",updated_at:"2023-01-10 08:13:13"},{time:1673333103e3,id:"cac4d244-d1fb-4d6a-92ac-bdbe7da18de9",ship_id:1,terminal_time:"2023-01-10 06:45:03",lat:-5.53888,lng:104.573258,wind_speed:7.5,wind_direction:11.2,heading:334.3,distance:88715.12,depth:-31.6,cog:96.5,sog:.1,created_at:"2023-01-10 08:12:49",updated_at:"2023-01-10 08:12:49"},{time:1673334003e3,id:"ef0d6a02-a51d-43d6-ae22-41c8f4263f47",ship_id:1,terminal_time:"2023-01-10 07:00:03",lat:-5.538878,lng:104.573242,wind_speed:6.2,wind_direction:11.2,heading:336.8,distance:88715.12,depth:-31.6,cog:86.3,sog:0,created_at:"2023-01-10 08:12:40",updated_at:"2023-01-10 08:12:40"},{time:1673334903e3,id:"c8300c89-faab-4152-8194-a46bb0b19e3a",ship_id:1,terminal_time:"2023-01-10 07:15:03",lat:-5.538762,lng:104.573413,wind_speed:4.6,wind_direction:11.2,heading:322.3,distance:88715.12,depth:-31.6,cog:358.1,sog:0,created_at:"2023-01-10 08:13:39",updated_at:"2023-01-10 08:13:39"},{time:1673335803e3,id:"5ef47cf2-3be4-4288-b43d-2dfb23367dbd",ship_id:1,terminal_time:"2023-01-10 07:30:03",lat:-5.538867,lng:104.573397,wind_speed:5,wind_direction:11.2,heading:326.8,distance:88715.12,depth:-31.6,cog:229,sog:0,created_at:"2023-01-10 08:13:25",updated_at:"2023-01-10 08:13:25"},{time:1673336703e3,id:"c28bf5e0-d94c-4f83-8bfd-8cd79550a629",ship_id:1,terminal_time:"2023-01-10 07:45:03",lat:-5.538897,lng:104.573083,wind_speed:5.4,wind_direction:11.2,heading:341.4,distance:88715.13,depth:-32,cog:251.6,sog:0,created_at:"2023-01-10 08:13:39",updated_at:"2023-01-10 08:13:39"},{time:1673337608e3,id:"8170db59-e578-4892-80c4-85355054b0d1",ship_id:1,terminal_time:"2023-01-10 08:00:08",lat:-5.538908,lng:104.572883,wind_speed:3.6,wind_direction:11.2,heading:351.4,distance:88715.14,depth:-32,cog:316.1,sog:0,created_at:"2023-01-10 08:13:38",updated_at:"2023-01-10 08:13:38"},{time:1673338503e3,id:"32200fd0-ad31-4afc-86c6-0eae8d39b303",ship_id:1,terminal_time:"2023-01-10 08:15:03",lat:-5.538917,lng:104.572915,wind_speed:3.8,wind_direction:11.2,heading:351.1,distance:88715.14,depth:-32,cog:324.3,sog:0,created_at:"2023-01-10 08:15:05",updated_at:"2023-01-10 08:15:05"},{time:1673339403e3,id:"c3f39b55-e63f-47d2-9aeb-e7a3c11e6b6c",ship_id:1,terminal_time:"2023-01-10 08:30:03",lat:-5.538923,lng:104.572508,wind_speed:2.7,wind_direction:11.2,heading:0,distance:0,depth:-32,cog:292.2,sog:.2,created_at:"2023-01-10 08:30:05",updated_at:"2023-01-10 08:30:05"},{time:1673340303e3,id:"0f1d7c32-e1b4-4223-813c-3bcb9ff99519",ship_id:1,terminal_time:"2023-01-10 08:45:03",lat:-5.538778,lng:104.5725,wind_speed:2.9,wind_direction:11.2,heading:13,distance:88715.16,depth:-33,cog:110.6,sog:.1,created_at:"2023-01-10 08:45:05",updated_at:"2023-01-10 08:45:05"},{time:1673341203e3,id:"514696b1-d5c1-4d56-ac70-c12912248928",ship_id:1,terminal_time:"2023-01-10 09:00:03",lat:-5.538873,lng:104.572512,wind_speed:2.1,wind_direction:11.2,heading:9.6,distance:88715.17,depth:-32,cog:61.8,sog:0,created_at:"2023-01-10 09:00:05",updated_at:"2023-01-10 09:00:05"},{time:1673342103e3,id:"bb13fd39-bf15-4e3f-9f37-7ba8e070e27b",ship_id:1,terminal_time:"2023-01-10 09:15:03",lat:-5.538902,lng:104.572612,wind_speed:.3,wind_direction:11.2,heading:1.6,distance:88715.18,depth:-32,cog:209.1,sog:0,created_at:"2023-01-10 09:15:06",updated_at:"2023-01-10 09:15:06"},{time:1673343003e3,id:"52799df0-4dda-42e4-ae26-5f9ecb2e1f35",ship_id:1,terminal_time:"2023-01-10 09:30:03",lat:-5.53877,lng:104.572458,wind_speed:.7,wind_direction:11.2,heading:13,distance:88715.19,depth:-31.6,cog:274.9,sog:0,created_at:"2023-01-10 09:30:04",updated_at:"2023-01-10 09:30:04"},{time:1673343903e3,id:"582eb540-8281-4f06-be77-4f020238e88e",ship_id:1,terminal_time:"2023-01-10 09:45:03",lat:-5.538838,lng:104.572397,wind_speed:.3,wind_direction:11.2,heading:17.9,distance:88715.2,depth:-32,cog:98.3,sog:0,created_at:"2023-01-10 09:45:04",updated_at:"2023-01-10 09:45:04"},{time:1673344803e3,id:"d018284e-96bc-40a5-afdf-706261c83173",ship_id:1,terminal_time:"2023-01-10 10:00:03",lat:-5.538725,lng:104.572233,wind_speed:1.7,wind_direction:11.2,heading:26,distance:88715.22,depth:-32,cog:289.9,sog:.2,created_at:"2023-01-10 10:00:05",updated_at:"2023-01-10 10:00:05"},{time:1673345703e3,id:"c7e76799-9152-4732-b4a8-78b81f78ecbb",ship_id:1,terminal_time:"2023-01-10 10:15:03",lat:-5.538707,lng:104.572228,wind_speed:1.5,wind_direction:11.2,heading:28.8,distance:88715.23,depth:-32,cog:295.6,sog:0,created_at:"2023-01-10 10:15:06",updated_at:"2023-01-10 10:15:06"},{time:1673346603e3,id:"5aa686e9-1f35-4d75-94e0-4b24e6575a96",ship_id:1,terminal_time:"2023-01-10 10:30:03",lat:-5.538782,lng:104.572288,wind_speed:2.1,wind_direction:11.2,heading:0,distance:0,depth:-32,cog:115,sog:0,created_at:"2023-01-10 10:30:06",updated_at:"2023-01-10 10:30:06"},{time:1673347503e3,id:"4980bff8-4764-4dad-81cb-0f47d3ebeddc",ship_id:1,terminal_time:"2023-01-10 10:45:03",lat:-5.538625,lng:104.572078,wind_speed:2.1,wind_direction:11.2,heading:0,distance:0,depth:-31.6,cog:306.6,sog:.1,created_at:"2023-01-11 08:19:01",updated_at:"2023-01-11 08:19:01"},{time:1673348403e3,id:"04b85d97-df61-4c7c-9ca5-fadbac1226ee",ship_id:1,terminal_time:"2023-01-10 11:00:03",lat:-5.538578,lng:104.572077,wind_speed:2.7,wind_direction:11.2,heading:40.3,distance:88715.28,depth:-33,cog:99.9,sog:.1,created_at:"2023-01-11 08:09:51",updated_at:"2023-01-11 08:09:51"},{time:1673349303e3,id:"a246a336-7d32-4004-9c36-0669444bfb5f",ship_id:1,terminal_time:"2023-01-10 11:15:03",lat:-5.538568,lng:104.57207,wind_speed:3.3,wind_direction:11.2,heading:0,distance:0,depth:-31.6,cog:307.3,sog:.1,created_at:"2023-01-11 08:59:53",updated_at:"2023-01-11 08:59:53"},{time:1673350203e3,id:"7a34bddb-396b-42bc-8b79-427c5236a76f",ship_id:1,terminal_time:"2023-01-10 11:30:03",lat:-5.538305,lng:104.57185,wind_speed:6.8,wind_direction:88.6,heading:59.8,distance:88715.33,depth:-31.6,cog:9.6,sog:.1,created_at:"2023-01-11 09:18:11",updated_at:"2023-01-11 09:18:11"},{time:1673351103e3,id:"d9220e3e-bbc0-4395-bf55-bf94ebcd524d",ship_id:1,terminal_time:"2023-01-10 11:45:03",lat:-5.537692,lng:104.571797,wind_speed:9.7,wind_direction:116.8,heading:95.5,distance:88715.36,depth:-31.6,cog:26,sog:.3,created_at:"2023-01-11 08:23:10",updated_at:"2023-01-11 08:23:10"},{time:1673352003e3,id:"8a8a13ef-e698-438c-930f-49ec0bb09f63",ship_id:1,terminal_time:"2023-01-10 12:00:03",lat:-5.537127,lng:104.571998,wind_speed:11.2,wind_direction:109.8,heading:122.7,distance:88715.36,depth:-31.6,cog:26.7,sog:.3,created_at:"2023-01-11 09:34:41",updated_at:"2023-01-11 09:34:41"},{time:1673352903e3,id:"229984b5-6b7d-4e00-9a08-4206488dca9d",ship_id:1,terminal_time:"2023-01-10 12:15:03",lat:-5.536328,lng:104.573425,wind_speed:14.9,wind_direction:56.3,heading:188.4,distance:88715.37,depth:-31,cog:121.6,sog:.5,created_at:"2023-01-11 08:16:13",updated_at:"2023-01-11 08:16:13"},{time:1673353803e3,id:"6a965009-1ee6-44b6-9d4a-a8749a1c4dd8",ship_id:1,terminal_time:"2023-01-10 12:30:03",lat:-5.536405,lng:104.573513,wind_speed:17.6,wind_direction:54.9,heading:199.6,distance:88715.39,depth:-31,cog:328,sog:.3,created_at:"2023-01-11 10:05:28",updated_at:"2023-01-11 10:05:28"},{time:1673354703e3,id:"13b5ce26-e32d-45b6-9906-297e9012334b",ship_id:1,terminal_time:"2023-01-10 12:45:03",lat:-5.536357,lng:104.573753,wind_speed:19.2,wind_direction:43.6,heading:197.7,distance:88715.4,depth:-30.6,cog:289.1,sog:.2,created_at:"2023-01-11 08:18:32",updated_at:"2023-01-11 08:18:32"},{time:1673355603e3,id:"ecda7f05-7d69-4f20-bcb7-310ce62047a6",ship_id:1,terminal_time:"2023-01-10 13:00:03",lat:-5.536677,lng:104.574085,wind_speed:20.4,wind_direction:43.6,heading:215.3,distance:88715.42,depth:-31,cog:95.7,sog:.1,created_at:"2023-01-11 08:16:09",updated_at:"2023-01-11 08:16:09"},{time:1673356503e3,id:"67d9e2e8-6850-45c7-a608-0f6f3750adf7",ship_id:1,terminal_time:"2023-01-10 13:15:03",lat:-5.536792,lng:104.574192,wind_speed:15.9,wind_direction:33.6,heading:225.5,distance:88715.43,depth:-31.3,cog:209.7,sog:.1,created_at:"2023-01-11 09:28:23",updated_at:"2023-01-11 09:28:23"},{time:1673357403e3,id:"7c6d8e6c-0652-4c08-9c17-13466996bfa9",ship_id:1,terminal_time:"2023-01-10 13:30:03",lat:-5.536822,lng:104.574207,wind_speed:14.1,wind_direction:32.3,heading:224.4,distance:88715.45,depth:-31,cog:109.6,sog:.1,created_at:"2023-01-11 08:01:23",updated_at:"2023-01-11 08:01:23"},{time:1673358303e3,id:"f71a5fe4-a992-470c-87d5-901a98539cd8",ship_id:1,terminal_time:"2023-01-10 13:45:03",lat:-5.536855,lng:104.574237,wind_speed:11.6,wind_direction:50.6,heading:220.9,distance:88715.47,depth:-31,cog:99.8,sog:.1,created_at:"2023-01-11 08:59:38",updated_at:"2023-01-11 08:59:38"},{time:1673359203e3,id:"bdb096b3-a7b1-479a-bef5-ea8f3b003506",ship_id:1,terminal_time:"2023-01-10 14:00:03",lat:-5.537295,lng:104.574445,wind_speed:15.5,wind_direction:21,heading:249.2,distance:88715.48,depth:-31,cog:132.1,sog:.1,created_at:"2023-01-11 08:44:42",updated_at:"2023-01-11 08:44:42"},{time:1673360103e3,id:"19bccdc4-4e82-4152-b765-cba9d3cdc2fb",ship_id:1,terminal_time:"2023-01-10 14:15:03",lat:-5.537357,lng:104.574448,wind_speed:20.9,wind_direction:15.4,heading:253.6,distance:88715.49,depth:-31,cog:25,sog:.1,created_at:"2023-01-11 09:05:09",updated_at:"2023-01-11 09:05:09"},{time:1673361003e3,id:"9545fd94-a3ad-4016-bbd4-072cc971b7b4",ship_id:1,terminal_time:"2023-01-10 14:30:03",lat:-5.537183,lng:104.574422,wind_speed:15.3,wind_direction:21,heading:243.8,distance:88715.51,depth:-31,cog:317.2,sog:.2,created_at:"2023-01-11 08:05:43",updated_at:"2023-01-11 08:05:43"},{time:1673361903e3,id:"775ad8f3-7486-4dda-8b7b-a41720291bd7",ship_id:1,terminal_time:"2023-01-10 14:45:03",lat:-5.537147,lng:104.574497,wind_speed:20,wind_direction:11.2,heading:243.4,distance:88715.53,depth:-31,cog:18.5,sog:.1,created_at:"2023-01-11 08:54:04",updated_at:"2023-01-11 08:54:04"},{time:1673362803e3,id:"83abeb04-acff-403c-9cc5-7fb61c8448d9",ship_id:1,terminal_time:"2023-01-10 15:00:03",lat:-5.537225,lng:104.574413,wind_speed:14.5,wind_direction:21,heading:243.4,distance:88715.56,depth:-31,cog:321.2,sog:.1,created_at:"2023-01-11 09:13:01",updated_at:"2023-01-11 09:13:01"},{time:1673363703e3,id:"acaa3bc0-f391-4ec9-8168-4d6ebc980f12",ship_id:1,terminal_time:"2023-01-10 15:15:03",lat:-5.537107,lng:104.574492,wind_speed:19,wind_direction:9.7,heading:243.3,distance:88715.58,depth:-31,cog:319.3,sog:.2,created_at:"2023-01-11 10:25:25",updated_at:"2023-01-11 10:25:25"},{time:1673364603e3,id:"83580a71-bc32-40ba-a819-59e1591bae49",ship_id:1,terminal_time:"2023-01-10 15:30:03",lat:-5.537295,lng:104.574417,wind_speed:18.8,wind_direction:26.7,heading:237.1,distance:88715.61,depth:-31,cog:72.7,sog:.2,created_at:"2023-01-11 08:24:04",updated_at:"2023-01-11 08:24:04"},{time:1673365503e3,id:"d107598f-b613-40ad-80e8-f021392d01a3",ship_id:1,terminal_time:"2023-01-10 15:45:03",lat:-5.53849,lng:104.561972,wind_speed:19.2,wind_direction:8.4,heading:266.7,distance:88716.39,depth:-35.6,cog:265.4,sog:2.8,created_at:"2023-01-11 09:19:29",updated_at:"2023-01-11 09:19:29"},{time:1673366403e3,id:"859441a4-aad6-4ebd-aa8e-4a8578c5526d",ship_id:1,terminal_time:"2023-01-10 16:00:03",lat:-5.541455,lng:104.560142,wind_speed:10.8,wind_direction:0,heading:260.5,distance:88716.58,depth:-41.3,cog:93.6,sog:.4,created_at:"2023-01-11 09:56:23",updated_at:"2023-01-11 09:56:23"},{time:1673367303e3,id:"28c5590a-1222-4129-b1f8-464f4a1ab33d",ship_id:1,terminal_time:"2023-01-10 16:15:03",lat:-5.542728,lng:104.560063,wind_speed:15.9,wind_direction:315.3,heading:0,distance:0,depth:-42,cog:203.9,sog:.3,created_at:"2023-01-11 08:16:55",updated_at:"2023-01-11 08:16:55"},{time:1673368203e3,id:"9331e12a-800b-44a4-8481-ef5423926243",ship_id:1,terminal_time:"2023-01-10 16:30:03",lat:-5.54335,lng:104.559467,wind_speed:14.7,wind_direction:336.4,heading:316.8,distance:88716.61,depth:-42,cog:326.5,sog:.1,created_at:"2023-01-11 09:02:06",updated_at:"2023-01-11 09:02:06"},{time:1673369413e3,id:"b6c2fdc4-0a36-412f-97b3-e19f5f1b754e",ship_id:1,terminal_time:"2023-01-10 16:50:13",lat:-5.54225,lng:104.560177,wind_speed:7.9,wind_direction:16.8,heading:280.8,distance:88716.63,depth:-41.6,cog:348.4,sog:.2,created_at:"2023-01-11 08:36:51",updated_at:"2023-01-11 08:36:51"},{time:1673370003e3,id:"88544c71-07ec-47a3-9425-83443bf1543f",ship_id:1,terminal_time:"2023-01-10 17:00:03",lat:-5.541955,lng:104.560087,wind_speed:12,wind_direction:9.7,heading:270.3,distance:88716.64,depth:-41.6,cog:5.6,sog:.2,created_at:"2023-01-11 09:17:54",updated_at:"2023-01-11 09:17:54"},{time:1673370903e3,id:"0439c29f-90b9-48cc-bec9-af020ee12223",ship_id:1,terminal_time:"2023-01-10 17:15:03",lat:-5.54169,lng:104.560058,wind_speed:8.1,wind_direction:32.3,heading:260.5,distance:88716.65,depth:-41.6,cog:309,sog:.2,created_at:"2023-01-11 10:17:44",updated_at:"2023-01-11 10:17:44"},{time:1673371803e3,id:"5d8047ae-778e-4dae-b543-c5d312c91b89",ship_id:1,terminal_time:"2023-01-10 17:30:03",lat:-5.541797,lng:104.560018,wind_speed:10.4,wind_direction:43.6,heading:258.3,distance:88716.67,depth:-42,cog:106.2,sog:.2,created_at:"2023-01-11 09:22:34",updated_at:"2023-01-11 09:22:34"},{time:1673372703e3,id:"90fec783-94f4-4620-879e-cfd5bf0f9b98",ship_id:1,terminal_time:"2023-01-10 17:45:03",lat:-5.542028,lng:104.560158,wind_speed:7.7,wind_direction:32.3,heading:273,distance:88716.67,depth:-41.6,cog:229.3,sog:.1,created_at:"2023-01-11 09:13:40",updated_at:"2023-01-11 09:13:40"},{time:1673373603e3,id:"925227d5-1685-4efc-8d4d-07ee45b665cb",ship_id:1,terminal_time:"2023-01-10 18:00:03",lat:-5.542407,lng:104.559988,wind_speed:4.6,wind_direction:49.1,heading:282.2,distance:88716.68,depth:-42,cog:194,sog:.1,created_at:"2023-01-11 09:36:51",updated_at:"2023-01-11 09:36:51"},{time:1673374503e3,id:"2c1746d2-52ed-4878-96e6-c5bcb5e15f57",ship_id:1,terminal_time:"2023-01-10 18:15:03",lat:-5.542953,lng:104.559968,wind_speed:4.8,wind_direction:45,heading:303.8,distance:88716.69,depth:-42.3,cog:184.6,sog:.1,created_at:"2023-01-11 09:53:35",updated_at:"2023-01-11 09:53:35"},{time:1673375403e3,id:"458bc847-49b8-4103-b441-5b85070c4a26",ship_id:1,terminal_time:"2023-01-10 18:30:03",lat:-5.54319,lng:104.559698,wind_speed:8.1,wind_direction:26.7,heading:317.6,distance:88716.71,depth:-42.3,cog:259,sog:.2,created_at:"2023-01-11 10:41:12",updated_at:"2023-01-11 10:41:12"},{time:1673376303e3,id:"7a04d24c-562e-4260-8524-122266d76b5d",ship_id:1,terminal_time:"2023-01-10 18:45:03",lat:-5.543392,lng:104.559572,wind_speed:6.8,wind_direction:353.3,heading:326.9,distance:88716.71,depth:-42.3,cog:198.2,sog:.1,created_at:"2023-01-11 10:01:54",updated_at:"2023-01-11 10:01:54"},{time:1673377203e3,id:"4914b017-1b9f-4f4b-a291-d9b6bf8ecccd",ship_id:1,terminal_time:"2023-01-10 19:00:03",lat:-5.54358,lng:104.559465,wind_speed:4.2,wind_direction:359,heading:335.6,distance:88716.71,depth:-42.6,cog:264.1,sog:.1,created_at:"2023-01-11 10:59:54",updated_at:"2023-01-11 10:59:54"},{time:1673378108e3,id:"b76818db-b6a8-430f-a64e-55aacb30bd1e",ship_id:1,terminal_time:"2023-01-10 19:15:08",lat:-5.54346,lng:104.559573,wind_speed:9.3,wind_direction:282.9,heading:336.1,distance:88716.71,depth:-42.6,cog:86,sog:.2,created_at:"2023-01-11 10:54:48",updated_at:"2023-01-11 10:54:48"},{time:1673379003e3,id:"b72a0185-3cac-4028-be33-d0d9cf496a5b",ship_id:1,terminal_time:"2023-01-10 19:30:03",lat:-5.5430150000000005,lng:104.559922,wind_speed:7.3,wind_direction:325.1,heading:311.5,distance:88716.72,depth:-42.3,cog:21.5,sog:.1,created_at:"2023-01-11 10:48:56",updated_at:"2023-01-11 10:48:56"},{time:1673379903e3,id:"00de7ba1-da7b-4f09-b03d-b1e05711ac14",ship_id:1,terminal_time:"2023-01-10 19:45:03",lat:-5.542545,lng:104.560115,wind_speed:7.9,wind_direction:354.6,heading:294.8,distance:88716.73,depth:-42.3,cog:19.6,sog:0,created_at:"2023-01-11 10:06:49",updated_at:"2023-01-11 10:06:49"},{time:1673380803e3,id:"bb4f09cd-d3ea-4bd7-8b43-631d7492bd52",ship_id:1,terminal_time:"2023-01-10 20:00:03",lat:-5.542382,lng:104.560208,wind_speed:12,wind_direction:347.6,heading:289,distance:88716.74,depth:-42.3,cog:354.6,sog:.1,created_at:"2023-01-11 10:02:10",updated_at:"2023-01-11 10:02:10"},{time:1673381703e3,id:"3214b99f-8371-483a-b938-aa3c97e21d86",ship_id:1,terminal_time:"2023-01-10 20:15:03",lat:-5.541937,lng:104.560167,wind_speed:10.4,wind_direction:359,heading:274,distance:88716.75,depth:-42.3,cog:354.7,sog:.1,created_at:"2023-01-11 10:43:38",updated_at:"2023-01-11 10:43:38"},{time:1673382603e3,id:"4ac048c2-864d-4e5c-b5d3-f9bf5206d98e",ship_id:1,terminal_time:"2023-01-10 20:30:03",lat:-5.541728,lng:104.560092,wind_speed:8.1,wind_direction:354.6,heading:267.6,distance:88716.75,depth:-42.3,cog:222.1,sog:0,created_at:"2023-01-11 11:15:05",updated_at:"2023-01-11 11:15:05"},{time:1673383503e3,id:"8149de7d-77d9-48e1-a53d-b6433e2f73d2",ship_id:1,terminal_time:"2023-01-10 20:45:03",lat:-5.541787,lng:104.56018,wind_speed:4.6,wind_direction:9.7,heading:265.9,distance:88716.76,depth:-42.3,cog:317,sog:.1,created_at:"2023-01-11 10:35:19",updated_at:"2023-01-11 10:35:19"},{time:1673384403e3,id:"2923b743-662d-4062-b187-ceeae60b90df",ship_id:1,terminal_time:"2023-01-10 21:00:03",lat:-5.541892,lng:104.55998,wind_speed:5.6,wind_direction:9.7,heading:268,distance:88716.78,depth:-42.3,cog:194,sog:.1,created_at:"2023-01-11 10:29:27",updated_at:"2023-01-11 10:29:27"},{time:1673385303e3,id:"6c1036d6-44a0-425b-8658-9db0c3ed493d",ship_id:1,terminal_time:"2023-01-10 21:15:03",lat:-5.542145,lng:104.56009,wind_speed:4,wind_direction:21,heading:277.4,distance:88716.79,depth:-42.6,cog:260.7,sog:.1,created_at:"2023-01-11 11:25:52",updated_at:"2023-01-11 11:25:52"},{time:1673386203e3,id:"6368e190-3bdc-4221-bff8-71d5bb0a3ca7",ship_id:1,terminal_time:"2023-01-10 21:30:03",lat:-5.542302,lng:104.560052,wind_speed:6.2,wind_direction:11.7,heading:285.8,distance:88716.79,depth:-42.6,cog:164.1,sog:0,created_at:"2023-01-11 11:21:34",updated_at:"2023-01-11 11:21:34"},{time:1673387103e3,id:"fc0088a3-893d-4fe4-bfe7-30679fbca91e",ship_id:1,terminal_time:"2023-01-10 21:45:03",lat:-5.542138,lng:104.560253,wind_speed:10.3,wind_direction:336.4,heading:286,distance:88716.8,depth:-42.3,cog:14.8,sog:.2,created_at:"2023-01-11 11:19:10",updated_at:"2023-01-11 11:19:10"},{time:1673388003e3,id:"71be65de-7a90-43dd-81c8-39b9fef2c290",ship_id:1,terminal_time:"2023-01-10 22:00:03",lat:-5.54161,lng:104.559828,wind_speed:2.7,wind_direction:336.4,heading:262.8,distance:88716.82,depth:-42,cog:266.4,sog:.1,created_at:"2023-01-11 10:57:14",updated_at:"2023-01-11 10:57:14"},{time:1673388908e3,id:"e42797d0-df06-4807-ab76-c37418dcfe02",ship_id:1,terminal_time:"2023-01-10 22:15:08",lat:-5.541503,lng:104.55974,wind_speed:6.6,wind_direction:336.4,heading:252.5,distance:88716.83,depth:-42,cog:14.8,sog:.1,created_at:"2023-01-11 11:11:30",updated_at:"2023-01-11 11:11:30"},{time:1673389803e3,id:"eee442cb-4b9b-47a6-9d4d-b678c812444b",ship_id:1,terminal_time:"2023-01-10 22:30:03",lat:-5.54109,lng:104.560015,wind_speed:12,wind_direction:16.8,heading:246.5,distance:88716.84,depth:-41.6,cog:347.3,sog:.1,created_at:"2023-01-11 11:10:12",updated_at:"2023-01-11 11:10:12"},{time:1673390703e3,id:"e4a937de-d12c-4530-90a5-f64aa8f75f72",ship_id:1,terminal_time:"2023-01-10 22:45:03",lat:-5.541293,lng:104.559667,wind_speed:2.7,wind_direction:43.6,heading:245.7,distance:88716.86,depth:-42,cog:209.6,sog:.1,created_at:"2023-01-11 11:04:22",updated_at:"2023-01-11 11:04:22"},{time:1673391698e3,id:"68a3ef72-960a-4387-8aa6-5b66611fe0a2",ship_id:1,terminal_time:"2023-01-10 23:01:38",lat:-5.541548,lng:104.559765,wind_speed:3.4,wind_direction:49.1,heading:0,distance:0,depth:-41.6,cog:134.3,sog:.1,created_at:"2023-01-11 11:39:16",updated_at:"2023-01-11 11:39:16"},{time:1673392503e3,id:"089eb567-2b29-41e9-9781-9030e190f220",ship_id:1,terminal_time:"2023-01-10 23:15:03",lat:-5.54197,lng:104.560077,wind_speed:4.2,wind_direction:56.3,heading:271.4,distance:88716.87,depth:-42,cog:164.7,sog:.2,created_at:"2023-01-11 11:30:13",updated_at:"2023-01-11 11:30:13"},{time:1673393403e3,id:"63129a87-03cc-4ede-ba2d-91ee71078d8a",ship_id:1,terminal_time:"2023-01-10 23:30:03",lat:-5.542198,lng:104.5601,wind_speed:2.3,wind_direction:43.5,heading:286,distance:88716.87,depth:-42,cog:207.2,sog:.1,created_at:"2023-01-11 11:43:42",updated_at:"2023-01-11 11:43:42"},{time:1673394303e3,id:"4aaecec9-7db3-489d-9e3f-9027a0451a1d",ship_id:1,terminal_time:"2023-01-10 23:45:03",lat:-5.542232,lng:104.56008,wind_speed:2.5,wind_direction:357.5,heading:289.4,distance:88716.87,depth:-42,cog:172.7,sog:.1,created_at:"2023-01-11 11:30:30",updated_at:"2023-01-11 11:30:30"},{time:1673395203e3,id:"5e443c1f-a779-458b-923d-d79b8bdb2950",ship_id:1,terminal_time:"2023-01-11 00:00:03",lat:-5.542575,lng:104.559993,wind_speed:4.2,wind_direction:49.1,heading:295.9,distance:88716.87,depth:-42,cog:178.8,sog:.1,created_at:"2023-01-11 11:20:30",updated_at:"2023-01-11 11:20:30"},{time:1673478415e3,id:"3a27a298-8266-41ea-83c2-1fa693ef93a8",ship_id:1,terminal_time:"2023-01-11 23:06:55",lat:-5.91961,lng:106.000188,wind_speed:15.1,wind_direction:201.2,heading:31.1,distance:88812.6,depth:-4,cog:306.2,sog:.1,created_at:"2023-01-12 08:00:07",updated_at:"2023-01-12 08:00:07"},{time:1673482021e3,id:"301c2657-23af-4610-8577-1267f195a1c7",ship_id:1,terminal_time:"2023-01-12 00:07:01",lat:-5.91961,lng:106.000188,wind_speed:15.1,wind_direction:201.2,heading:31.1,distance:88812.6,depth:-4,cog:306.2,sog:0,created_at:"2023-01-12 08:00:10",updated_at:"2023-01-12 08:00:10"},{time:1673482501e3,id:"ffe5c699-e3bc-4273-a0ff-33499003b397",ship_id:1,terminal_time:"2023-01-12 00:15:01",lat:-5.919605,lng:106.00021,wind_speed:12.8,wind_direction:212.5,heading:31.1,distance:88812.61,depth:-4,cog:295.9,sog:0,created_at:"2023-01-12 08:01:25",updated_at:"2023-01-12 08:01:25"},{time:1673483401e3,id:"95be2e54-e93e-4fe2-a470-028106f4827b",ship_id:1,terminal_time:"2023-01-12 00:30:01",lat:-5.919602,lng:106.000222,wind_speed:15.1,wind_direction:219.6,heading:31,distance:88812.61,depth:-4,cog:107.8,sog:0,created_at:"2023-01-12 08:00:38",updated_at:"2023-01-12 08:00:38"},{time:1673484301e3,id:"62eb058f-ab11-46fc-8990-a9da9a055cae",ship_id:1,terminal_time:"2023-01-12 00:45:01",lat:-5.91959,lng:106.00022,wind_speed:19.6,wind_direction:206.9,heading:31.2,distance:88812.61,depth:-4,cog:126.6,sog:0,created_at:"2023-01-12 08:02:17",updated_at:"2023-01-12 08:02:17"},{time:1673485201e3,id:"db170fcf-5c04-48b1-8b3e-1ea1a747de17",ship_id:1,terminal_time:"2023-01-12 01:00:01",lat:-5.919602,lng:106.000213,wind_speed:14.1,wind_direction:206.9,heading:31.2,distance:88812.61,depth:-3.6,cog:121.9,sog:0,created_at:"2023-01-12 08:03:00",updated_at:"2023-01-12 08:03:00"},{time:1673486101e3,id:"53202233-3f20-46fc-b124-4e5b880022cc",ship_id:1,terminal_time:"2023-01-12 01:15:01",lat:-5.919595,lng:106.00023,wind_speed:20.4,wind_direction:204,heading:31.2,distance:88812.61,depth:-3.6,cog:137,sog:.1,created_at:"2023-01-12 08:03:40",updated_at:"2023-01-12 08:03:40"},{time:1673487001e3,id:"f2ad03cf-9317-4535-884b-21401f965fa1",ship_id:1,terminal_time:"2023-01-12 01:30:01",lat:-5.91957,lng:106.000213,wind_speed:16.1,wind_direction:206.9,heading:31.6,distance:88812.62,depth:-3.6,cog:312.3,sog:0,created_at:"2023-01-12 08:01:18",updated_at:"2023-01-12 08:01:18"},{time:1673487901e3,id:"1717eafe-2674-4fab-ac02-c130433596ce",ship_id:1,terminal_time:"2023-01-12 01:45:01",lat:-5.919583,lng:106.000232,wind_speed:16.9,wind_direction:208.3,heading:31.3,distance:88812.62,depth:-3.6,cog:280.3,sog:.1,created_at:"2023-01-12 08:00:28",updated_at:"2023-01-12 08:00:28"},{time:1673488801e3,id:"a257ae15-7b7d-4982-9e0a-7d65c7724a0b",ship_id:1,terminal_time:"2023-01-12 02:00:01",lat:-5.919518,lng:106.000213,wind_speed:19.2,wind_direction:213.9,heading:30.9,distance:88812.62,depth:-3.6,cog:303.5,sog:0,created_at:"2023-01-12 08:02:13",updated_at:"2023-01-12 08:02:13"},{time:1673489701e3,id:"e16c56d6-2d75-447e-9552-8e9dc5c89d17",ship_id:1,terminal_time:"2023-01-12 02:15:01",lat:-5.919577,lng:106.000232,wind_speed:20,wind_direction:212.5,heading:31.1,distance:88812.63,depth:-3.6,cog:310.5,sog:.1,created_at:"2023-01-12 08:01:35",updated_at:"2023-01-12 08:01:35"},{time:1673490601e3,id:"f19c3f20-ab29-457b-939a-1b258e8f55ad",ship_id:1,terminal_time:"2023-01-12 02:30:01",lat:-5.919567,lng:106.000248,wind_speed:19,wind_direction:212.1,heading:31.2,distance:88812.64,depth:-3.3,cog:313.2,sog:.1,created_at:"2023-01-12 08:00:48",updated_at:"2023-01-12 08:00:48"},{time:1673491501e3,id:"36399975-75a1-4ae4-9944-fe85dc14f62b",ship_id:1,terminal_time:"2023-01-12 02:45:01",lat:-5.919593,lng:106.000235,wind_speed:14.9,wind_direction:202.7,heading:31.2,distance:88812.65,depth:-3.3,cog:331.5,sog:.1,created_at:"2023-01-12 08:02:40",updated_at:"2023-01-12 08:02:40"},{time:1673492401e3,id:"85c19f34-0992-4c6f-b7dc-db0b624a306b",ship_id:1,terminal_time:"2023-01-12 03:00:01",lat:-5.919592,lng:106.00023,wind_speed:17.6,wind_direction:209.2,heading:31.2,distance:88812.66,depth:-3.3,cog:99.6,sog:0,created_at:"2023-01-12 08:03:12",updated_at:"2023-01-12 08:03:12"},{time:1673493301e3,id:"c778fd18-b2e6-4009-9e52-6cb03b3fa5f9",ship_id:1,terminal_time:"2023-01-12 03:15:01",lat:-5.919595,lng:106.00021,wind_speed:18.4,wind_direction:206.9,heading:31.1,distance:88812.67,depth:-3.3,cog:304.7,sog:.1,created_at:"2023-01-12 08:03:47",updated_at:"2023-01-12 08:03:47"},{time:1673494201e3,id:"6475c752-084a-474b-83f3-ed822b2ccb81",ship_id:1,terminal_time:"2023-01-12 03:30:01",lat:-5.919612,lng:106.000213,wind_speed:17.6,wind_direction:213.9,heading:31,distance:88812.68,depth:-3.3,cog:294.5,sog:.1,created_at:"2023-01-12 08:01:24",updated_at:"2023-01-12 08:01:24"},{time:1673495101e3,id:"a56d58a7-c4ba-4709-923b-545fd0a68e23",ship_id:1,terminal_time:"2023-01-12 03:45:01",lat:-5.919602,lng:106.000232,wind_speed:17.4,wind_direction:201.2,heading:31.3,distance:88812.68,depth:-3.3,cog:257.4,sog:0,created_at:"2023-01-12 08:04:20",updated_at:"2023-01-12 08:04:20"},{time:1673496001e3,id:"cac79e4a-e15d-4f75-9273-d5e24645053e",ship_id:1,terminal_time:"2023-01-12 04:00:01",lat:-5.919602,lng:106.000252,wind_speed:15.3,wind_direction:213.9,heading:0,distance:0,depth:-3.3,cog:307.2,sog:.1,created_at:"2023-01-12 08:04:10",updated_at:"2023-01-12 08:04:10"},{time:1673496901e3,id:"3dfb8e71-93a9-4d4f-8965-013575f61a35",ship_id:1,terminal_time:"2023-01-12 04:15:01",lat:-5.919607,lng:106.000238,wind_speed:20.2,wind_direction:206.7,heading:31.3,distance:88812.68,depth:-3.3,cog:150.8,sog:.1,created_at:"2023-01-12 08:04:45",updated_at:"2023-01-12 08:04:45"},{time:1673497801e3,id:"0f7d7540-fe75-45e0-9a30-635c7128b620",ship_id:1,terminal_time:"2023-01-12 04:30:01",lat:-5.919607,lng:106.000257,wind_speed:15.9,wind_direction:206.9,heading:31,distance:88812.68,depth:-3.3,cog:149.1,sog:0,created_at:"2023-01-12 08:02:03",updated_at:"2023-01-12 08:02:03"},{time:1673498701e3,id:"f21a660b-dcfa-4b13-9856-215ab031fb29",ship_id:1,terminal_time:"2023-01-12 04:45:01",lat:-5.919532,lng:106.000253,wind_speed:18,wind_direction:206.9,heading:0,distance:0,depth:-3.3,cog:196,sog:0,created_at:"2023-01-12 08:03:57",updated_at:"2023-01-12 08:03:57"},{time:1673499601e3,id:"67284bea-ac4f-4fcb-be3d-67fb96501e12",ship_id:1,terminal_time:"2023-01-12 05:00:01",lat:-5.919563,lng:106.000252,wind_speed:12.8,wind_direction:206.9,heading:31.1,distance:88812.69,depth:-3.3,cog:313.2,sog:.1,created_at:"2023-01-12 08:02:05",updated_at:"2023-01-12 08:02:05"},{time:1673500501e3,id:"903255da-a46b-4560-be6f-54121a35e9d4",ship_id:1,terminal_time:"2023-01-12 05:15:01",lat:-5.919592,lng:106.00022,wind_speed:14.7,wind_direction:208.3,heading:31.2,distance:88812.69,depth:-3.3,cog:317.3,sog:0,created_at:"2023-01-12 08:01:18",updated_at:"2023-01-12 08:01:18"},{time:1673501401e3,id:"d15302d5-c880-455f-8e84-b63f78532405",ship_id:1,terminal_time:"2023-01-12 05:30:01",lat:-5.919553,lng:106.000257,wind_speed:14.1,wind_direction:206.9,heading:31.3,distance:88812.69,depth:-3.3,cog:85.3,sog:0,created_at:"2023-01-12 08:00:36",updated_at:"2023-01-12 08:00:36"},{time:1673502301e3,id:"6964957b-d44f-4ccd-9711-139c0f5321a6",ship_id:1,terminal_time:"2023-01-12 05:45:01",lat:-5.919598,lng:106.000232,wind_speed:12.4,wind_direction:213.9,heading:31,distance:88812.7,depth:-3.3,cog:71.8,sog:0,created_at:"2023-01-12 08:02:19",updated_at:"2023-01-12 08:02:19"},{time:1673503261e3,id:"9e325986-7d1b-4135-ba31-922a70ec7621",ship_id:1,terminal_time:"2023-01-12 06:01:01",lat:-5.919563,lng:106.000245,wind_speed:16.9,wind_direction:213.9,heading:31.1,distance:88812.7,depth:-3.3,cog:45.2,sog:0,created_at:"2023-01-12 08:04:33",updated_at:"2023-01-12 08:04:33"},{time:1673504101e3,id:"91e1667b-13ee-4042-b227-58b06be13ccd",ship_id:1,terminal_time:"2023-01-12 06:15:01",lat:-5.919573,lng:106.00022,wind_speed:6.6,wind_direction:213.9,heading:31.3,distance:88812.7,depth:-3.3,cog:144.5,sog:0,created_at:"2023-01-12 08:01:32",updated_at:"2023-01-12 08:01:32"},{time:1673505006e3,id:"8fbb2278-d875-4905-87a7-36e16bdc5d08",ship_id:1,terminal_time:"2023-01-12 06:30:06",lat:-5.919547,lng:106.00019,wind_speed:14.1,wind_direction:219.6,heading:31.1,distance:88812.7,depth:-3.3,cog:129.1,sog:0,created_at:"2023-01-12 08:03:24",updated_at:"2023-01-12 08:03:24"},{time:1673505901e3,id:"6dd47699-6d9e-4f4e-b03f-b3c7c179d628",ship_id:1,terminal_time:"2023-01-12 06:45:01",lat:-5.919567,lng:106.000218,wind_speed:11.2,wind_direction:206.9,heading:31.2,distance:88812.7,depth:-3.3,cog:302.6,sog:0,created_at:"2023-01-12 08:04:14",updated_at:"2023-01-12 08:04:14"},{time:1673506801e3,id:"e6b66228-a386-4585-8b24-beb353ada5df",ship_id:1,terminal_time:"2023-01-12 07:00:01",lat:-5.919573,lng:106.000242,wind_speed:13.8,wind_direction:212.5,heading:31.2,distance:88812.7,depth:-3.3,cog:130,sog:0,created_at:"2023-01-12 08:03:33",updated_at:"2023-01-12 08:03:33"},{time:1673507701e3,id:"87faa350-6df1-4360-a4a2-280d812558f8",ship_id:1,terminal_time:"2023-01-12 07:15:01",lat:-5.919583,lng:106.000195,wind_speed:11.2,wind_direction:201.2,heading:31.1,distance:88812.7,depth:-3.3,cog:122.9,sog:0,created_at:"2023-01-12 08:04:40",updated_at:"2023-01-12 08:04:40"},{time:1673508601e3,id:"9e3f7764-a732-42a0-94c3-1c0493a43105",ship_id:1,terminal_time:"2023-01-12 07:30:01",lat:-5.919588,lng:106.000215,wind_speed:11,wind_direction:223.8,heading:31.1,distance:88812.7,depth:-3.3,cog:125.7,sog:0,created_at:"2023-01-12 08:04:34",updated_at:"2023-01-12 08:04:34"},{time:1673509501e3,id:"c0d5821b-d4a0-469d-a793-634ffbcb381f",ship_id:1,terminal_time:"2023-01-12 07:45:01",lat:-5.919593,lng:106.000222,wind_speed:16.1,wind_direction:213.9,heading:31.1,distance:88812.7,depth:-3.3,cog:122.9,sog:0,created_at:"2023-01-12 08:03:50",updated_at:"2023-01-12 08:03:50"},{time:1673510406e3,id:"5bcbfbf1-6af1-45d4-9e4f-3f756ee3de58",ship_id:1,terminal_time:"2023-01-12 08:00:06",lat:-5.9196,lng:106.000238,wind_speed:10.8,wind_direction:215.4,heading:31,distance:88812.7,depth:-3.3,cog:117.8,sog:.1,created_at:"2023-01-12 08:04:56",updated_at:"2023-01-12 08:04:56"},{time:1673511301e3,id:"7d090cd0-aba9-42b6-bbe9-1f253ee7093b",ship_id:1,terminal_time:"2023-01-12 08:15:01",lat:-5.919602,lng:106.000217,wind_speed:12.2,wind_direction:223.8,heading:31.1,distance:88812.7,depth:-3.6,cog:92.7,sog:.1,created_at:"2023-01-12 08:15:05",updated_at:"2023-01-12 08:15:05"},{time:1673512201e3,id:"fc753b87-6977-4e80-b90b-05dc877e04c3",ship_id:1,terminal_time:"2023-01-12 08:30:01",lat:-5.919598,lng:106.000233,wind_speed:15.5,wind_direction:215.4,heading:31.1,distance:88812.71,depth:-3.6,cog:134.1,sog:0,created_at:"2023-01-12 08:30:04",updated_at:"2023-01-12 08:30:04"},{time:1673513101e3,id:"15468c4d-66ad-44c5-8692-70c97eca048f",ship_id:1,terminal_time:"2023-01-12 08:45:01",lat:-5.919635,lng:106.00023,wind_speed:13.8,wind_direction:235.1,heading:31.1,distance:88812.71,depth:-3.6,cog:105.9,sog:.1,created_at:"2023-01-12 08:45:04",updated_at:"2023-01-12 08:45:04"},{time:1673514001e3,id:"ebc3bf69-1d1f-495a-b4a4-9c32c0ed598d",ship_id:1,terminal_time:"2023-01-12 09:00:01",lat:-5.919602,lng:106.000208,wind_speed:15.5,wind_direction:212,heading:31.2,distance:88812.71,depth:-3.6,cog:112.4,sog:0,created_at:"2023-01-12 09:00:04",updated_at:"2023-01-12 09:00:04"},{time:1673514901e3,id:"545fefd0-b1bb-4e36-a7d3-c0c35e2dc06a",ship_id:1,terminal_time:"2023-01-12 09:15:01",lat:-5.919617,lng:106.000203,wind_speed:11.6,wind_direction:223.8,heading:31.33,distance:88812.71,depth:-3.6,cog:121.1,sog:0,created_at:"2023-01-12 09:15:04",updated_at:"2023-01-12 09:15:04"},{time:1673515801e3,id:"f45537e7-c24d-43d4-a111-c331f0185270",ship_id:1,terminal_time:"2023-01-12 09:30:01",lat:-5.919602,lng:106.000202,wind_speed:11.4,wind_direction:246.3,heading:31.3,distance:88812.71,depth:-3.6,cog:120.6,sog:0,created_at:"2023-01-12 09:30:05",updated_at:"2023-01-12 09:30:05"},{time:1673516706e3,id:"d927f6f3-c47e-4066-948b-8c47ce169ddd",ship_id:1,terminal_time:"2023-01-12 09:45:06",lat:-5.919607,lng:106.0002,wind_speed:11.8,wind_direction:246.3,heading:31.3,distance:88812.71,depth:-3.6,cog:281.2,sog:0,created_at:"2023-01-12 09:45:11",updated_at:"2023-01-12 09:45:11"},{time:1673517601e3,id:"6f2b17a6-fc9e-4272-b263-9372835e5cb7",ship_id:1,terminal_time:"2023-01-12 10:00:01",lat:-5.919583,lng:106.000217,wind_speed:13.2,wind_direction:235.1,heading:31.1,distance:88812.71,depth:-3.6,cog:122.7,sog:0,created_at:"2023-01-12 10:00:05",updated_at:"2023-01-12 10:00:05"},{time:1673518501e3,id:"8037d2bb-f96b-4bdc-8e1a-6cc0234defce",ship_id:1,terminal_time:"2023-01-12 10:15:01",lat:-5.919593,lng:106.000227,wind_speed:10.8,wind_direction:225.2,heading:31.2,distance:88812.71,depth:-3.6,cog:107.9,sog:0,created_at:"2023-01-12 10:15:05",updated_at:"2023-01-12 10:15:05"},{time:1673519401e3,id:"59efc70a-dfcf-475b-a578-d472d4b63f41",ship_id:1,terminal_time:"2023-01-12 10:30:01",lat:-5.91962,lng:106.000227,wind_speed:12.8,wind_direction:235.1,heading:0,distance:0,depth:-3.6,cog:127.3,sog:0,created_at:"2023-01-12 10:30:05",updated_at:"2023-01-12 10:30:05"},{time:1673520301e3,id:"14107e27-17a4-4f72-8bf5-b4ba6866475b",ship_id:1,terminal_time:"2023-01-12 10:45:01",lat:-5.919598,lng:106.000215,wind_speed:6.9,wind_direction:241.7,heading:31.2,distance:88812.72,depth:-3.6,cog:142.3,sog:0,created_at:"2023-01-12 10:45:05",updated_at:"2023-01-12 10:45:05"},{time:1673521201e3,id:"55f2910a-c9a9-400f-99ec-17d9ea4260ab",ship_id:1,terminal_time:"2023-01-12 11:00:01",lat:-5.919615,lng:106.000205,wind_speed:14.3,wind_direction:235.1,heading:31.2,distance:88812.72,depth:-3.6,cog:309,sog:0,created_at:"2023-01-12 11:00:05",updated_at:"2023-01-12 11:00:05"},{time:1673522101e3,id:"554cb944-60be-4c64-baf9-0244229277f5",ship_id:1,terminal_time:"2023-01-12 11:15:01",lat:-5.919627,lng:106.000208,wind_speed:12.4,wind_direction:237.5,heading:31,distance:88812.72,depth:-3.6,cog:63,sog:.1,created_at:"2023-01-12 11:15:05",updated_at:"2023-01-12 11:15:05"},{time:1673523001e3,id:"d0a7e914-9d36-4e3a-b078-429af76e139a",ship_id:1,terminal_time:"2023-01-12 11:30:01",lat:-5.919625,lng:106.000183,wind_speed:12.4,wind_direction:247.7,heading:31.3,distance:88812.74,depth:-3.6,cog:64.3,sog:.1,created_at:"2023-01-12 11:30:05",updated_at:"2023-01-12 11:30:05"},{time:1673523901e3,id:"3578112f-5993-44fc-9bcb-484ae892cb83",ship_id:1,terminal_time:"2023-01-12 11:45:01",lat:-5.91961,lng:106.00022,wind_speed:13.8,wind_direction:247.7,heading:31.2,distance:88812.75,depth:-3.6,cog:47.8,sog:.1,created_at:"2023-01-12 11:45:05",updated_at:"2023-01-12 11:45:05"},{time:1673524801e3,id:"63045459-e38d-4517-88ec-0e16f915455c",ship_id:1,terminal_time:"2023-01-12 12:00:01",lat:-5.919587,lng:106.000218,wind_speed:9.1,wind_direction:247.7,heading:31.1,distance:88812.76,depth:-3.6,cog:102.5,sog:.1,created_at:"2023-01-12 12:00:05",updated_at:"2023-01-12 12:00:05"},{time:1673525701e3,id:"8f235d26-eba0-4cf1-b387-1bbe467f5880",ship_id:1,terminal_time:"2023-01-12 12:15:01",lat:-5.919615,lng:106.000227,wind_speed:11.6,wind_direction:242.1,heading:31.1,distance:88812.77,depth:-3.6,cog:311.4,sog:0,created_at:"2023-01-12 12:15:02",updated_at:"2023-01-12 12:15:02"},{time:1673526601e3,id:"3a964569-c108-42ad-a009-fcbb362b6a7f",ship_id:1,terminal_time:"2023-01-12 12:30:01",lat:-5.91958,lng:106.000207,wind_speed:5.8,wind_direction:229.4,heading:31.2,distance:88812.77,depth:-3.3,cog:110.9,sog:.1,created_at:"2023-01-12 12:30:04",updated_at:"2023-01-12 12:30:04"},{time:1673527501e3,id:"6751b37a-cee9-487f-bb0f-011ea80d9cb4",ship_id:1,terminal_time:"2023-01-12 12:45:01",lat:-5.919628,lng:106.000247,wind_speed:7.9,wind_direction:206.9,heading:31.3,distance:88812.78,depth:-3.3,cog:293.2,sog:0,created_at:"2023-01-12 12:45:04",updated_at:"2023-01-12 12:45:04"},{time:1673528401e3,id:"9a2e95f6-e2a6-4136-a8a0-f05c56caf90e",ship_id:1,terminal_time:"2023-01-12 13:00:01",lat:-5.919595,lng:106.000223,wind_speed:9.7,wind_direction:223.8,heading:0,distance:0,depth:-3.3,cog:139,sog:.2,created_at:"2023-01-12 13:00:04",updated_at:"2023-01-12 13:00:04"},{time:1673529301e3,id:"7ecb61ef-4188-47ff-8bf4-6efd86f72928",ship_id:1,terminal_time:"2023-01-12 13:15:01",lat:-5.91958,lng:106.000175,wind_speed:7.3,wind_direction:237.9,heading:0,distance:0,depth:-3.3,cog:131.9,sog:0,created_at:"2023-01-12 13:15:04",updated_at:"2023-01-12 13:15:04"},{time:1673530201e3,id:"43466e7e-0a51-42ee-81ce-5bcb8067a0a0",ship_id:1,terminal_time:"2023-01-12 13:30:01",lat:-5.919583,lng:106.00021,wind_speed:8.7,wind_direction:219.6,heading:31.2,distance:88812.78,depth:-3.3,cog:114,sog:.1,created_at:"2023-01-12 13:30:04",updated_at:"2023-01-12 13:30:04"},{time:1673531101e3,id:"297a2025-c5ef-40bd-b16e-59dba6360dae",ship_id:1,terminal_time:"2023-01-12 13:45:01",lat:-5.919592,lng:106.000177,wind_speed:5.2,wind_direction:233.7,heading:31.1,distance:88812.78,depth:-3.3,cog:101.6,sog:0,created_at:"2023-01-12 13:45:04",updated_at:"2023-01-12 13:45:04"},{time:1673532001e3,id:"4d3b3fed-521a-4c4b-be34-bc1c12554aca",ship_id:1,terminal_time:"2023-01-12 14:00:01",lat:-5.919585,lng:106.000207,wind_speed:5.6,wind_direction:236.5,heading:31.3,distance:88812.79,depth:-3.3,cog:337.4,sog:0,created_at:"2023-01-12 14:00:04",updated_at:"2023-01-12 14:00:04"},{time:1673532901e3,id:"4d4f1774-36c0-419e-ba3a-b02fddf2626f",ship_id:1,terminal_time:"2023-01-12 14:15:01",lat:-5.919595,lng:106.000158,wind_speed:4.6,wind_direction:260.4,heading:31.2,distance:88812.79,depth:-3.3,cog:324.5,sog:0,created_at:"2023-01-12 14:15:04",updated_at:"2023-01-12 14:15:04"},{time:1673533801e3,id:"1698b5e0-d4ac-49ad-b810-49e9601d3853",ship_id:1,terminal_time:"2023-01-12 14:30:01",lat:-5.919583,lng:106.000225,wind_speed:4.6,wind_direction:256.1,heading:31.2,distance:88812.8,depth:-3.3,cog:322.1,sog:.1,created_at:"2023-01-12 14:30:04",updated_at:"2023-01-12 14:30:04"},{time:1673534701e3,id:"ad9fb6e4-5f14-4125-9e71-167e7c866606",ship_id:1,terminal_time:"2023-01-12 14:45:01",lat:-5.919595,lng:106.000203,wind_speed:6.8,wind_direction:233.7,heading:31.2,distance:88812.8,depth:-3,cog:95.3,sog:.1,created_at:"2023-01-12 14:45:04",updated_at:"2023-01-12 14:45:04"},{time:1673535601e3,id:"1fe7fc3b-36f4-404f-be9f-7b043d160fd3",ship_id:1,terminal_time:"2023-01-12 15:00:01",lat:-5.919605,lng:106.000208,wind_speed:8.3,wind_direction:252,heading:31.3,distance:88812.81,depth:-3,cog:332,sog:.1,created_at:"2023-01-12 15:00:05",updated_at:"2023-01-12 15:00:05"},{time:1673536501e3,id:"e70637eb-6415-42ce-9e73-20ef8a56d9b5",ship_id:1,terminal_time:"2023-01-12 15:15:01",lat:-5.919622,lng:106.000213,wind_speed:8.5,wind_direction:252,heading:31.5,distance:88812.81,depth:-3,cog:307.5,sog:0,created_at:"2023-01-12 15:15:05",updated_at:"2023-01-12 15:15:05"},{time:1673537401e3,id:"89cddc9c-a742-45c5-a8cb-95af58326154",ship_id:1,terminal_time:"2023-01-12 15:30:01",lat:-5.919613,lng:106.000245,wind_speed:6.4,wind_direction:247.7,heading:31.5,distance:88812.82,depth:-3,cog:180.8,sog:.1,created_at:"2023-01-12 15:30:05",updated_at:"2023-01-12 15:30:05"},{time:1673538301e3,id:"7eeb6682-f01b-4920-be65-5e0b691cda91",ship_id:1,terminal_time:"2023-01-12 15:45:01",lat:-5.918417,lng:105.999612,wind_speed:10.4,wind_direction:337.8,heading:291.7,distance:88812.88,depth:-3.3,cog:310.4,sog:2.1,created_at:"2023-01-12 15:45:05",updated_at:"2023-01-12 15:45:05"},{time:1673539201e3,id:"bca7ec47-e760-471e-bcd9-5a8aa2355046",ship_id:1,terminal_time:"2023-01-12 16:00:01",lat:-5.898973,lng:105.987732,wind_speed:18.2,wind_direction:324.5,heading:340.2,distance:88814.27,depth:-39,cog:332.8,sog:9.2,created_at:"2023-01-12 16:00:05",updated_at:"2023-01-12 16:00:05"},{time:1673540101e3,id:"6d1f8f41-c708-4913-9f3b-796181bd67ba",ship_id:1,terminal_time:"2023-01-12 16:15:01",lat:-5.868212,lng:106.003383,wind_speed:3.6,wind_direction:226.2,heading:60.3,distance:88816.54,depth:-55.6,cog:61.7,sog:11.4,created_at:"2023-01-12 16:15:02",updated_at:"2023-01-12 16:15:02"},{time:1673541001e3,id:"ffddd40d-2fb5-470b-935f-1f998984761a",ship_id:1,terminal_time:"2023-01-12 16:30:01",lat:-5.8487729999999996,lng:106.049228,wind_speed:5.8,wind_direction:157.5,heading:70.4,distance:88819.53,depth:-47,cog:70,sog:12.2,created_at:"2023-01-12 16:30:05",updated_at:"2023-01-12 16:30:05"},{time:1673541901e3,id:"225b2709-e620-4f1f-89f5-d761ea9a27f8",ship_id:1,terminal_time:"2023-01-12 16:45:01",lat:-5.834948,lng:106.097917,wind_speed:6.4,wind_direction:157.5,heading:80.2,distance:88822.55,depth:-31.6,cog:81.1,sog:12.2,created_at:"2023-01-12 16:45:05",updated_at:"2023-01-12 16:45:05"},{time:1673542801e3,id:"98589ed9-2a54-44e0-94d2-9b377e3c67c6",ship_id:1,terminal_time:"2023-01-12 17:00:01",lat:-5.832885,lng:106.14986,wind_speed:4,wind_direction:144.5,heading:99,distance:88825.66,depth:-28.6,cog:102.2,sog:12.8,created_at:"2023-01-12 17:00:05",updated_at:"2023-01-12 17:00:05"},{time:1673543701e3,id:"7fa7bf3b-acdb-4707-8e81-6860424af4b9",ship_id:1,terminal_time:"2023-01-12 17:15:01",lat:-5.838525,lng:106.20245,wind_speed:2.9,wind_direction:161.9,heading:89.2,distance:88828.85,depth:-22.6,cog:91.4,sog:12.7,created_at:"2023-01-12 17:15:05",updated_at:"2023-01-12 17:15:05"},{time:1673544601e3,id:"79865b86-826b-4cb0-bd95-1a88728a32ee",ship_id:1,terminal_time:"2023-01-12 17:30:01",lat:-5.839608,lng:106.25531,wind_speed:1.7,wind_direction:194.7,heading:88.8,distance:88831.98,depth:-23,cog:90.5,sog:12.7,created_at:"2023-01-12 17:30:03",updated_at:"2023-01-12 17:30:03"},{time:1673545501e3,id:"bcf27b90-6ee8-4dc4-91cd-4b5ab1188d9a",ship_id:1,terminal_time:"2023-01-12 17:45:01",lat:-5.83994,lng:106.30857,wind_speed:2.5,wind_direction:99.8,heading:89,distance:88835.27,depth:-31.6,cog:91.2,sog:13,created_at:"2023-01-12 17:45:03",updated_at:"2023-01-12 17:45:03"},{time:1673546401e3,id:"24294d87-37c8-401c-8120-3f6412ebbd31",ship_id:1,terminal_time:"2023-01-12 18:00:01",lat:-5.841293,lng:106.363258,wind_speed:3.6,wind_direction:54.9,heading:86.3,distance:88838.55,depth:-28.6,cog:88.1,sog:13.1,created_at:"2023-01-12 18:00:03",updated_at:"2023-01-12 18:00:03"},{time:1673547301e3,id:"1b983cb5-a7a5-4259-a3ed-68ba7093343e",ship_id:1,terminal_time:"2023-01-12 18:15:01",lat:-5.838722,lng:106.418933,wind_speed:7.3,wind_direction:56.3,heading:90.1,distance:88841.85,depth:-49.3,cog:90.8,sog:13.2,created_at:"2023-01-12 18:15:03",updated_at:"2023-01-12 18:15:03"},{time:1673548201e3,id:"15c3c6db-50aa-4a57-9238-2319a66b67aa",ship_id:1,terminal_time:"2023-01-12 18:30:01",lat:-5.83975,lng:106.47494,wind_speed:9.3,wind_direction:54.9,heading:89.9,distance:88845.21,depth:-45.6,cog:90.7,sog:13.5,created_at:"2023-01-13 08:01:29",updated_at:"2023-01-13 08:01:29"},{time:1673549101e3,id:"06e2801a-9747-4c80-9786-b47a946f07dd",ship_id:1,terminal_time:"2023-01-12 18:45:01",lat:-5.840233,lng:106.531412,wind_speed:9.9,wind_direction:65.2,heading:92.3,distance:88848.59,depth:-77.6,cog:94,sog:13.5,created_at:"2023-01-13 08:03:23",updated_at:"2023-01-13 08:03:23"},{time:1673550001e3,id:"69056518-ad05-4299-9844-8cdfaed1b01c",ship_id:1,terminal_time:"2023-01-12 19:00:01",lat:-5.837537,lng:106.585833,wind_speed:10.4,wind_direction:16.8,heading:77.9,distance:88851.84,depth:-70.6,cog:78.2,sog:13,created_at:"2023-01-13 08:02:35",updated_at:"2023-01-13 08:02:35"},{time:1673550901e3,id:"17bc32d5-5b7b-4c30-b1df-b7e55e45806b",ship_id:1,terminal_time:"2023-01-12 19:15:01",lat:-5.830312,lng:106.640343,wind_speed:13,wind_direction:21,heading:87.4,distance:88855.12,depth:-39,cog:86.4,sog:13.2,created_at:"2023-01-13 08:04:26",updated_at:"2023-01-13 08:04:26"},{time:1673551801e3,id:"f7476f04-656a-4e72-8e6c-57b0d831c5f5",ship_id:1,terminal_time:"2023-01-12 19:30:01",lat:-5.853542,lng:106.689242,wind_speed:13.2,wind_direction:21,heading:126.5,distance:88858.39,depth:-27,cog:128.5,sog:13.2,created_at:"2023-01-13 08:05:16",updated_at:"2023-01-13 08:05:16"},{time:1673552701e3,id:"88b9ecc4-9964-43d8-b6a4-aed13a07495c",ship_id:1,terminal_time:"2023-01-12 19:45:01",lat:-5.889747,lng:106.731723,wind_speed:18,wind_direction:12.5,heading:129.7,distance:88861.73,depth:-29,cog:131.9,sog:13.4,created_at:"2023-01-13 08:02:30",updated_at:"2023-01-13 08:02:30"},{time:1673553601e3,id:"26848018-c9ac-4503-838d-ae857206e20b",ship_id:1,terminal_time:"2023-01-12 20:00:01",lat:-5.927122,lng:106.772935,wind_speed:18.8,wind_direction:7.9,heading:130.5,distance:88865.07,depth:-21.6,cog:132.8,sog:13.3,created_at:"2023-01-13 08:01:15",updated_at:"2023-01-13 08:01:15"},{time:1673554501e3,id:"2e692d80-82f5-4549-91d5-8a2ed3fb2e12",ship_id:1,terminal_time:"2023-01-12 20:15:01",lat:-5.960285,lng:106.81634,wind_speed:17.4,wind_direction:9.7,heading:112.2,distance:88868.34,depth:-17.3,cog:114.9,sog:13.1,created_at:"2023-01-13 08:03:01",updated_at:"2023-01-13 08:03:01"},{time:1673555401e3,id:"aca95c12-4858-4cf9-94d3-a4f8e4de5aef",ship_id:1,terminal_time:"2023-01-12 20:30:01",lat:-5.983137,lng:106.859937,wind_speed:11.8,wind_direction:0,heading:130.3,distance:88871.33,depth:-15.3,cog:131.8,sog:9.7,created_at:"2023-01-13 08:02:21",updated_at:"2023-01-13 08:02:21"},{time:1673556301e3,id:"8b09c8fe-2ea4-494c-a5fb-dd2a24bf7270",ship_id:1,terminal_time:"2023-01-12 20:45:01",lat:-6.000398,lng:106.883002,wind_speed:7.9,wind_direction:1.4,heading:115.3,distance:88873.1,depth:-13.6,cog:118.2,sog:4.3,created_at:"2023-01-13 08:00:56",updated_at:"2023-01-13 08:00:56"},{time:1673557201e3,id:"284ce5ee-e703-4d6d-b114-c1df32919fd1",ship_id:1,terminal_time:"2023-01-12 21:00:01",lat:-6.00611,lng:106.893912,wind_speed:6,wind_direction:349,heading:106.4,distance:88873.88,depth:-13,cog:142.3,sog:.3,created_at:"2023-01-13 08:02:49",updated_at:"2023-01-13 08:02:49"},{time:1673558101e3,id:"45ad13f2-7559-4927-89c6-6f3c198a88b2",ship_id:1,terminal_time:"2023-01-12 21:15:01",lat:-6.007525,lng:106.893923,wind_speed:6.6,wind_direction:12.5,heading:3,distance:88873.88,depth:-13,cog:126.7,sog:.2,created_at:"2023-01-13 08:02:41",updated_at:"2023-01-13 08:02:41"},{time:1673559001e3,id:"a4a1e14d-14ab-43f6-9535-4fa2a9d49ae4",ship_id:1,terminal_time:"2023-01-12 21:30:01",lat:-6.00759,lng:106.894172,wind_speed:5.4,wind_direction:30.9,heading:25.3,distance:88873.89,depth:-13,cog:173.5,sog:.1,created_at:"2023-01-13 08:02:21",updated_at:"2023-01-13 08:02:21"},{time:1673559901e3,id:"02e22b70-2f1d-4ec5-be13-4924c441d425",ship_id:1,terminal_time:"2023-01-12 21:45:01",lat:-6.007575,lng:106.894195,wind_speed:7.3,wind_direction:32.3,heading:25.6,distance:88873.9,depth:-12.6,cog:225,sog:.1,created_at:"2023-01-13 08:03:11",updated_at:"2023-01-13 08:03:11"},{time:1673560801e3,id:"714b40ab-6959-4c7d-89d9-dbb4bb70e57c",ship_id:1,terminal_time:"2023-01-12 22:00:01",lat:-6.007612,lng:106.894137,wind_speed:5.8,wind_direction:33.6,heading:25,distance:88873.9,depth:-12.6,cog:168.2,sog:0,created_at:"2023-01-13 08:02:28",updated_at:"2023-01-13 08:02:28"},{time:1673561701e3,id:"8076bd11-03d4-4552-b96d-89e5d0255292",ship_id:1,terminal_time:"2023-01-12 22:15:01",lat:-6.007583,lng:106.894055,wind_speed:7.3,wind_direction:43.6,heading:29.2,distance:88873.9,depth:-13,cog:316.5,sog:.1,created_at:"2023-01-13 08:02:17",updated_at:"2023-01-13 08:02:17"},{time:1673562601e3,id:"d34040f5-d539-420c-bb97-d96c16081c94",ship_id:1,terminal_time:"2023-01-12 22:30:01",lat:-6.007425,lng:106.89391,wind_speed:5.6,wind_direction:43.6,heading:44.4,distance:88873.9,depth:-13,cog:126.5,sog:.1,created_at:"2023-01-13 08:03:38",updated_at:"2023-01-13 08:03:38"},{time:1673563501e3,id:"564f8c5e-2634-4ec9-9f48-e0af89ff5564",ship_id:1,terminal_time:"2023-01-12 22:45:01",lat:-6.007598,lng:106.894127,wind_speed:4.6,wind_direction:43.6,heading:27.2,distance:88873.9,depth:-13,cog:34.5,sog:0,created_at:"2023-01-13 08:04:15",updated_at:"2023-01-13 08:04:15"},{time:1673564401e3,id:"4926d7e4-dbc0-4a31-8d0a-6a052ff27bc0",ship_id:1,terminal_time:"2023-01-12 23:00:01",lat:-6.007682,lng:106.894268,wind_speed:5.6,wind_direction:43.6,heading:0,distance:0,depth:-13,cog:155.9,sog:0,created_at:"2023-01-13 08:03:58",updated_at:"2023-01-13 08:03:58"},{time:1673565301e3,id:"433693fd-81e1-4395-a29d-8eb5bb82c236",ship_id:1,terminal_time:"2023-01-12 23:15:01",lat:-6.007708,lng:106.894337,wind_speed:4.8,wind_direction:43.6,heading:14.8,distance:88873.9,depth:-13,cog:189.5,sog:0,created_at:"2023-01-13 08:03:48",updated_at:"2023-01-13 08:03:48"},{time:1673566201e3,id:"3bd7e61b-1373-4345-867a-dfe285746a32",ship_id:1,terminal_time:"2023-01-12 23:30:01",lat:-6.007645,lng:106.894262,wind_speed:3.4,wind_direction:43.6,heading:19.3,distance:88873.9,depth:-13,cog:200.6,sog:.1,created_at:"2023-01-13 08:05:28",updated_at:"2023-01-13 08:05:28"},{time:1673567101e3,id:"09b7824a-9980-4c9d-bf99-87e65e80069b",ship_id:1,terminal_time:"2023-01-12 23:45:01",lat:-6.007677,lng:106.8943,wind_speed:2.1,wind_direction:43.6,heading:16.6,distance:88873.9,depth:-13,cog:44.7,sog:0,created_at:"2023-01-13 08:04:21",updated_at:"2023-01-13 08:04:21"},{time:1673568001e3,id:"b38d3696-7f77-459c-863f-91445f63f3e9",ship_id:1,terminal_time:"2023-01-13 00:00:01",lat:-6.007713,lng:106.894375,wind_speed:3.1,wind_direction:43.6,heading:15.4,distance:88873.9,depth:-13,cog:108.7,sog:.1,created_at:"2023-01-13 08:01:36",updated_at:"2023-01-13 08:01:36"},{time:1673568903e3,id:"b55f2d04-80e5-45c3-8479-13897d8db096",ship_id:1,terminal_time:"2023-01-13 00:15:03",lat:-6.007727,lng:106.894435,wind_speed:2.7,wind_direction:43.6,heading:11.8,distance:88873.9,depth:-13,cog:68.7,sog:0,created_at:"2023-01-13 08:03:55",updated_at:"2023-01-13 08:03:55"},{time:1673570168e3,id:"bc973d32-96ff-4d4b-83fa-fdc69ab666a4",ship_id:1,terminal_time:"2023-01-13 00:36:08",lat:-6.00772,lng:106.894325,wind_speed:2.7,wind_direction:43.6,heading:17.2,distance:88873.9,depth:-13,cog:224.5,sog:0,created_at:"2023-01-13 08:01:47",updated_at:"2023-01-13 08:01:47"},{time:1673570703e3,id:"51065554-9c2a-4ead-9c62-cdd44d475009",ship_id:1,terminal_time:"2023-01-13 00:45:03",lat:-6.007642,lng:106.894265,wind_speed:3.3,wind_direction:43.6,heading:20.1,distance:88873.9,depth:-13,cog:237,sog:0,created_at:"2023-01-13 08:02:52",updated_at:"2023-01-13 08:02:52"},{time:1673571603e3,id:"f1dbff35-e7f7-4963-a643-80e87b251c8c",ship_id:1,terminal_time:"2023-01-13 01:00:03",lat:-6.0076,lng:106.894155,wind_speed:4.2,wind_direction:43.6,heading:25.4,distance:88873.91,depth:-13,cog:177.2,sog:0,created_at:"2023-01-13 08:05:07",updated_at:"2023-01-13 08:05:07"},{time:1673572503e3,id:"606bf160-10bf-4454-95c1-6abb21d4a9a8",ship_id:1,terminal_time:"2023-01-13 01:15:03",lat:-6.007512,lng:106.894067,wind_speed:4,wind_direction:43.6,heading:33,distance:88873.91,depth:-13,cog:204.5,sog:0,created_at:"2023-01-13 08:04:55",updated_at:"2023-01-13 08:04:55"},{time:1673573403e3,id:"46a99db5-3b12-4141-949d-a7f4f69451c9",ship_id:1,terminal_time:"2023-01-13 01:30:03",lat:-6.007512,lng:106.894075,wind_speed:1.7,wind_direction:43.6,heading:34.6,distance:88873.91,depth:-13,cog:110.9,sog:.1,created_at:"2023-01-13 08:04:51",updated_at:"2023-01-13 08:04:51"},{time:1673574303e3,id:"ab8768f7-f2c0-4c28-ba76-68c4d848ee1b",ship_id:1,terminal_time:"2023-01-13 01:45:03",lat:-6.0075,lng:106.894193,wind_speed:1.9,wind_direction:43.6,heading:32.2,distance:88873.91,depth:-13,cog:300.5,sog:.1,created_at:"2023-01-13 08:04:26",updated_at:"2023-01-13 08:04:26"},{time:1673575203e3,id:"6a14e9fa-b7ad-4ec4-9f66-fa4f814c54af",ship_id:1,terminal_time:"2023-01-13 02:00:03",lat:-6.007582,lng:106.894147,wind_speed:2.5,wind_direction:43.6,heading:29.3,distance:88873.92,depth:-13,cog:319.4,sog:0,created_at:"2023-01-13 08:05:13",updated_at:"2023-01-13 08:05:13"},{time:1673576103e3,id:"456740b7-62b5-4f33-b4c0-1dc7d824d0bb",ship_id:1,terminal_time:"2023-01-13 02:15:03",lat:-6.007527,lng:106.8941,wind_speed:2.7,wind_direction:43.6,heading:32.7,distance:88873.92,depth:-13.3,cog:336.3,sog:0,created_at:"2023-01-13 08:05:57",updated_at:"2023-01-13 08:05:57"},{time:1673577003e3,id:"9f03eb81-f440-4e94-a55f-ab45fcc7b6c0",ship_id:1,terminal_time:"2023-01-13 02:30:03",lat:-6.007453,lng:106.894015,wind_speed:2.5,wind_direction:43.6,heading:39.1,distance:88873.93,depth:-13.3,cog:345.7,sog:.1,created_at:"2023-01-13 08:05:39",updated_at:"2023-01-13 08:05:39"},{time:1673577903e3,id:"e4f82def-000e-40af-915a-fa2b0c177b50",ship_id:1,terminal_time:"2023-01-13 02:45:03",lat:-6.007433,lng:106.893978,wind_speed:2.3,wind_direction:43.6,heading:0,distance:0,depth:-13,cog:303.2,sog:0,created_at:"2023-01-13 08:06:18",updated_at:"2023-01-13 08:06:18"},{time:1673578803e3,id:"54b75262-94fb-4782-987c-ccbefeebec92",ship_id:1,terminal_time:"2023-01-13 03:00:03",lat:-6.00737,lng:106.893908,wind_speed:3.3,wind_direction:43.6,heading:0,distance:0,depth:-13,cog:348.7,sog:0,created_at:"2023-01-13 08:06:12",updated_at:"2023-01-13 08:06:12"},{time:1673579703e3,id:"fa539bb4-a28e-469c-9a4e-9a3d0c486050",ship_id:1,terminal_time:"2023-01-13 03:15:03",lat:-6.007335,lng:106.893948,wind_speed:2.7,wind_direction:45,heading:49.7,distance:88873.94,depth:-13.3,cog:137.5,sog:.1,created_at:"2023-01-13 08:06:05",updated_at:"2023-01-13 08:06:05"},{time:1673580603e3,id:"539a72f1-ac08-46d9-b981-d2b0ad986548",ship_id:1,terminal_time:"2023-01-13 03:30:03",lat:-6.007343,lng:106.893923,wind_speed:2.3,wind_direction:45,heading:46.6,distance:88873.94,depth:-13,cog:284,sog:.1,created_at:"2023-01-13 08:05:52",updated_at:"2023-01-13 08:05:52"},{time:1673581503e3,id:"4df156c5-a460-4977-8551-b187446e5412",ship_id:1,terminal_time:"2023-01-13 03:45:03",lat:-6.007297,lng:106.893842,wind_speed:3.4,wind_direction:45,heading:47.7,distance:88873.94,depth:-13,cog:168.1,sog:0,created_at:"2023-01-13 08:05:54",updated_at:"2023-01-13 08:05:54"},{time:1673582403e3,id:"a403298f-42d3-4529-b018-1af317d27868",ship_id:1,terminal_time:"2023-01-13 04:00:03",lat:-6.007198,lng:106.893723,wind_speed:2.5,wind_direction:45,heading:56.1,distance:88873.94,depth:-13.3,cog:178.4,sog:0,created_at:"2023-01-13 08:07:16",updated_at:"2023-01-13 08:07:16"},{time:1673583303e3,id:"dd731f40-8d09-4757-827b-9d4f1d4651e1",ship_id:1,terminal_time:"2023-01-13 04:15:03",lat:-6.007137,lng:106.893783,wind_speed:2.7,wind_direction:45,heading:58.1,distance:88873.94,depth:-13,cog:161.9,sog:0,created_at:"2023-01-13 08:07:09",updated_at:"2023-01-13 08:07:09"},{time:1673584203e3,id:"4108b2ac-c7e2-49e9-bef8-1aeb96d7d1da",ship_id:1,terminal_time:"2023-01-13 04:30:03",lat:-6.007167,lng:106.893807,wind_speed:2.5,wind_direction:45,heading:59.3,distance:88873.94,depth:-13,cog:52.2,sog:0,created_at:"2023-01-13 08:06:59",updated_at:"2023-01-13 08:06:59"},{time:1673585108e3,id:"cc3220d1-e43b-4f9e-8a0e-2f416fff3d82",ship_id:1,terminal_time:"2023-01-13 04:45:08",lat:-6.0070879999999995,lng:106.893705,wind_speed:2.3,wind_direction:45,heading:60.4,distance:88873.94,depth:-13,cog:336.7,sog:.1,created_at:"2023-01-13 08:06:48",updated_at:"2023-01-13 08:06:48"},{time:1673586003e3,id:"82f940ea-8953-425e-86b3-7899a04cc3d8",ship_id:1,terminal_time:"2023-01-13 05:00:03",lat:-6.006982,lng:106.893693,wind_speed:1.9,wind_direction:45,heading:0,distance:0,depth:-13.3,cog:265.2,sog:0,created_at:"2023-01-13 08:07:32",updated_at:"2023-01-13 08:07:32"},{time:1673586903e3,id:"ad2c1c63-d614-4095-8d40-e96424f5a6d7",ship_id:1,terminal_time:"2023-01-13 05:15:03",lat:-6.007068,lng:106.893725,wind_speed:.9,wind_direction:45,heading:61.6,distance:88873.94,depth:-13.3,cog:232.5,sog:.1,created_at:"2023-01-13 08:07:16",updated_at:"2023-01-13 08:07:16"},{time:1673587803e3,id:"e44c9ea1-fe7c-4076-8e00-c146f79d9ff1",ship_id:1,terminal_time:"2023-01-13 05:30:03",lat:-6.007113,lng:106.8937,wind_speed:.7,wind_direction:45,heading:57.9,distance:88873.94,depth:-13.3,cog:273.7,sog:0,created_at:"2023-01-13 08:07:16",updated_at:"2023-01-13 08:07:16"},{time:1673588703e3,id:"11fabb10-51d2-4b18-8c3e-8d5f30e0c604",ship_id:1,terminal_time:"2023-01-13 05:45:03",lat:-6.00707,lng:106.893708,wind_speed:0,wind_direction:45,heading:59.9,distance:88873.94,depth:-13,cog:179.4,sog:.1,created_at:"2023-01-13 08:07:45",updated_at:"2023-01-13 08:07:45"},{time:1673589603e3,id:"3d8e63b1-ef49-4faa-8668-2064fc7691b9",ship_id:1,terminal_time:"2023-01-13 06:00:03",lat:-6.007005,lng:106.893697,wind_speed:1.7,wind_direction:45,heading:61,distance:88873.94,depth:-13,cog:224.6,sog:0,created_at:"2023-01-13 08:08:35",updated_at:"2023-01-13 08:08:35"},{time:1673590503e3,id:"abedede7-fcef-4a6a-821c-96caff5b51dd",ship_id:1,terminal_time:"2023-01-13 06:15:03",lat:-6.007067,lng:106.893657,wind_speed:1.7,wind_direction:45,heading:56.4,distance:88873.94,depth:-13.3,cog:299.4,sog:0,created_at:"2023-01-13 08:08:07",updated_at:"2023-01-13 08:08:07"},{time:1673591403e3,id:"b51194a8-99a4-4d32-83a4-d5fbfaaa4d2b",ship_id:1,terminal_time:"2023-01-13 06:30:03",lat:-6.006965,lng:106.893667,wind_speed:2.1,wind_direction:45,heading:62.6,distance:88873.94,depth:-13.3,cog:139.2,sog:0,created_at:"2023-01-13 08:08:23",updated_at:"2023-01-13 08:08:23"},{time:1673592518e3,id:"b209dcbe-8749-41d2-b84b-c1258b5ab981",ship_id:1,terminal_time:"2023-01-13 06:48:38",lat:-6.006987,lng:106.893667,wind_speed:2.3,wind_direction:45,heading:66.4,distance:88873.94,depth:-13.3,cog:318.9,sog:0,created_at:"2023-01-13 08:08:09",updated_at:"2023-01-13 08:08:09"},{time:1673593203e3,id:"32347284-3eae-468f-bee0-b65b0ec6fc1e",ship_id:1,terminal_time:"2023-01-13 07:00:03",lat:-6.007023,lng:106.893678,wind_speed:2.7,wind_direction:45,heading:62.5,distance:88873.95,depth:-13.3,cog:111.2,sog:0,created_at:"2023-01-13 08:07:41",updated_at:"2023-01-13 08:07:41"},{time:1673594103e3,id:"d96b7d8b-3fd1-4062-a8fb-81b177ca4b7e",ship_id:1,terminal_time:"2023-01-13 07:15:03",lat:-6.007138,lng:106.89375,wind_speed:2.5,wind_direction:45,heading:62.4,distance:88873.95,depth:-13.3,cog:176.1,sog:0,created_at:"2023-01-13 08:08:24",updated_at:"2023-01-13 08:08:24"},{time:1673595003e3,id:"fb3aea68-d3b4-4a82-8246-b492385b9b9b",ship_id:1,terminal_time:"2023-01-13 07:30:03",lat:-6.006977,lng:106.893747,wind_speed:2.7,wind_direction:45,heading:66.3,distance:88873.95,depth:-13.3,cog:176.1,sog:0,created_at:"2023-01-13 08:08:37",updated_at:"2023-01-13 08:08:37"},{time:1673595903e3,id:"4b32822b-aad7-4b21-b989-0f1651010609",ship_id:1,terminal_time:"2023-01-13 07:45:03",lat:-6.00699,lng:106.89368,wind_speed:2.3,wind_direction:45,heading:68.2,distance:88873.95,depth:-13.3,cog:194.5,sog:0,created_at:"2023-01-13 08:08:55",updated_at:"2023-01-13 08:08:55"},{time:1673596808e3,id:"5e31ea31-de98-4291-b5ed-bc79c4642d2e",ship_id:1,terminal_time:"2023-01-13 08:00:08",lat:-6.006908,lng:106.89369,wind_speed:2.1,wind_direction:45,heading:72.3,distance:88873.95,depth:-13.3,cog:194.5,sog:0,created_at:"2023-01-13 08:08:48",updated_at:"2023-01-13 08:08:48"},{time:1673597703e3,id:"1f625245-9ea7-4f96-9bf2-627e75f1ea29",ship_id:1,terminal_time:"2023-01-13 08:15:03",lat:-6.006837,lng:106.893615,wind_speed:2.3,wind_direction:45,heading:0,distance:0,depth:-13.3,cog:3.7,sog:0,created_at:"2023-01-13 08:15:07",updated_at:"2023-01-13 08:15:07"},{time:1673598603e3,id:"f2ecdf0b-2cd9-40ce-ad89-0a8d73cad5c1",ship_id:1,terminal_time:"2023-01-13 08:30:03",lat:-6.006838,lng:106.893623,wind_speed:2.1,wind_direction:45,heading:75,distance:88873.95,depth:-13.3,cog:135.5,sog:0,created_at:"2023-01-13 08:30:07",updated_at:"2023-01-13 08:30:07"},{time:1673599503e3,id:"8327765d-9bf8-4fc4-8584-95359d3bbbb0",ship_id:1,terminal_time:"2023-01-13 08:45:03",lat:-6.006812,lng:106.893627,wind_speed:3.4,wind_direction:45,heading:75.5,distance:88873.95,depth:-13.3,cog:89.4,sog:0,created_at:"2023-01-13 08:45:04",updated_at:"2023-01-13 08:45:04"},{time:1673600403e3,id:"f5eb5331-437b-4c35-a486-84a8fa9d5644",ship_id:1,terminal_time:"2023-01-13 09:00:03",lat:-6.006815,lng:106.893662,wind_speed:3.6,wind_direction:45,heading:75.4,distance:88873.96,depth:-13.3,cog:94.9,sog:0,created_at:"2023-01-13 09:00:05",updated_at:"2023-01-13 09:00:05"},{time:1673601303e3,id:"2a247c20-bd73-4d19-8dab-7a2254a80a62",ship_id:1,terminal_time:"2023-01-13 09:15:03",lat:-6.006802,lng:106.893608,wind_speed:5.2,wind_direction:45,heading:75.8,distance:88873.96,depth:-13.3,cog:92.2,sog:0,created_at:"2023-01-13 09:15:05",updated_at:"2023-01-13 09:15:05"},{time:1673602203e3,id:"6153d12f-d552-4ab9-bba7-9e250f663945",ship_id:1,terminal_time:"2023-01-13 09:30:03",lat:-6.006802,lng:106.893643,wind_speed:4.2,wind_direction:45,heading:76.9,distance:88873.96,depth:-13.3,cog:141.9,sog:0,created_at:"2023-01-13 09:30:06",updated_at:"2023-01-13 09:30:06"},{time:1673603103e3,id:"2f1058ed-c8da-4364-aab6-dc9645e1fde8",ship_id:1,terminal_time:"2023-01-13 09:45:03",lat:-6.006837,lng:106.893597,wind_speed:3.8,wind_direction:45,heading:72.8,distance:88873.96,depth:-13.3,cog:110.7,sog:0,created_at:"2023-01-13 09:45:06",updated_at:"2023-01-13 09:45:06"},{time:1673604003e3,id:"cc41dd89-f978-4edf-9ada-4667dbff60ce",ship_id:1,terminal_time:"2023-01-13 10:00:03",lat:-6.00683,lng:106.893597,wind_speed:3.6,wind_direction:45,heading:72.1,distance:88873.96,depth:-13.3,cog:135.3,sog:0,created_at:"2023-01-13 10:00:06",updated_at:"2023-01-13 10:00:06"},{time:1673604903e3,id:"396bffaa-c79e-49d7-bdf1-f426896bb87c",ship_id:1,terminal_time:"2023-01-13 10:15:03",lat:-6.00688,lng:106.89365,wind_speed:3.1,wind_direction:45,heading:70.9,distance:88873.96,depth:-13.3,cog:180.2,sog:.1,created_at:"2023-01-13 10:15:07",updated_at:"2023-01-13 10:15:07"},{time:1673605803e3,id:"d946fc22-50aa-4fcd-bd7c-b44f44547a46",ship_id:1,terminal_time:"2023-01-13 10:30:03",lat:-6.007095,lng:106.89367,wind_speed:3.3,wind_direction:45,heading:58.8,distance:88873.96,depth:-13.3,cog:157.1,sog:0,created_at:"2023-01-13 10:30:04",updated_at:"2023-01-13 10:30:04"},{time:1673606703e3,id:"580132f9-3c14-4d3c-9b66-d0ff9ec812f0",ship_id:1,terminal_time:"2023-01-13 10:45:03",lat:-6.007132,lng:106.893745,wind_speed:5.4,wind_direction:26.7,heading:53.2,distance:88873.96,depth:-13.3,cog:144.9,sog:0,created_at:"2023-01-13 10:45:05",updated_at:"2023-01-13 10:45:05"},{time:1673607603e3,id:"2a0785ea-942c-42cd-ad88-e982f8495a39",ship_id:1,terminal_time:"2023-01-13 11:00:03",lat:-6.007203,lng:106.893752,wind_speed:4.2,wind_direction:26.7,heading:0,distance:0,depth:-13.3,cog:260.4,sog:0,created_at:"2023-01-13 11:00:05",updated_at:"2023-01-13 11:00:05"},{time:1673608503e3,id:"b1840bc7-7b81-44b4-a120-b50cb7ed9631",ship_id:1,terminal_time:"2023-01-13 11:15:03",lat:-6.007423,lng:106.893847,wind_speed:5.6,wind_direction:26.7,heading:39,distance:88873.97,depth:-13.6,cog:90.2,sog:.1,created_at:"2023-01-13 11:15:05",updated_at:"2023-01-13 11:15:05"},{time:1673609403e3,id:"257a0ae0-3c67-4484-900c-ee1149e2541d",ship_id:1,terminal_time:"2023-01-13 11:30:03",lat:-6.007583,lng:106.89401,wind_speed:5,wind_direction:26.7,heading:27.7,distance:88873.98,depth:-13.3,cog:110.5,sog:.1,created_at:"2023-01-13 11:30:06",updated_at:"2023-01-13 11:30:06"},{time:1673610303e3,id:"0e80a0e4-2c6c-441f-8364-26416a9ce1dd",ship_id:1,terminal_time:"2023-01-13 11:45:03",lat:-6.0076730000000005,lng:106.89419,wind_speed:7.3,wind_direction:26.7,heading:18.3,distance:88873.99,depth:-13.3,cog:93.9,sog:0,created_at:"2023-01-13 11:45:06",updated_at:"2023-01-13 11:45:06"},{time:1673611203e3,id:"11866d32-1040-4bdb-b7bf-190db9704e3c",ship_id:1,terminal_time:"2023-01-13 12:00:03",lat:-6.00775,lng:106.894325,wind_speed:7.1,wind_direction:26.7,heading:13.3,distance:88873.99,depth:-13.3,cog:102.4,sog:0,created_at:"2023-01-13 12:00:07",updated_at:"2023-01-13 12:00:07"}],JN={components:{MapboxMap:Mx,MapboxNavigationControl:Ax},data(){return{map:null,current:[],items:[],potition:!1}},methods:{async loaded(){let e=this,t={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}},r={type:"FeatureCollection",features:[]};KN.forEach((d,m)=>{this.current&&this.calcCrow(this.current[1],this.current[0],d.lat,d.lng)>20||(t.geometry.coordinates.push([d.lng,d.lat]),r.features.push({type:"Feature",properties:{cog:d.cog,sog:d.sog,time:d.terminal_time,lat:d.lat,lng:d.lng,heading:d.heading},geometry:{type:"Point",coordinates:[d.lng,d.lat]}}),this.current=[d.lng,d.lat],this.items.push(d))}),this.map.addSource("route",{type:"geojson",data:t}),this.map.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3B4EF5","line-width":1.5,"line-dasharray":[3,3]}}),e.map.addSource("points",{type:"geojson",data:r}),e.map.addLayer({id:"points",type:"circle",source:"points",paint:{"circle-radius":4,"circle-color":"#3B4EF5"}});const l=new Sl.Popup({closeButton:!1,closeOnClick:!1});this.map.on("click","points",d=>{let m=d.features[0].properties;this.positionShip(m)}),this.map.on("mouseenter","points",d=>{e.map.getCanvas().style.cursor="pointer";const m=d.features[0].geometry.coordinates.slice(),n=`<b>Lat : ${d.features[0].properties.lat} | Lng: ${d.features[0].properties.lng}</b> at ${d.features[0].properties.sog} <b>kn</b> / ${d.features[0].properties.cog}&deg;<br>time: <b>${d.features[0].properties.time}</b>`;for(;Math.abs(d.lngLat.lng-m[0])>180;)m[0]+=d.lngLat.lng>m[0]?360:-360;l.setLngLat(m).setHTML(n).addTo(e.map)}),this.map.on("mouseleave","points",()=>{e.map.getCanvas().style.cursor="",l.remove()}),this.map.loadImage(kx,(d,m)=>{if(d)throw d;e.map.addImage("ship-icon",m)});let c=this.items[this.items.length-1];this.positionShip({heading:c.heading,lng:c.lng,lat:c.lat})},toPotition(e){this.positionShip(e)},positionShip(e){this.potition&&(this.map.removeLayer("ship-point"),this.map.removeSource("ship-point")),this.map.addSource("ship-point",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:{scale:1,heading:e.heading}}]}}),this.map.addLayer({id:"ship-point",type:"symbol",source:"ship-point",layout:{"icon-image":"ship-icon","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-size":.3,"icon-rotate":{property:"heading",stops:[[-360,-360],[0,0],[360,360]]},"icon-rotation-alignment":"map"}}),this.potition=!0},pointerLocation(e){let t=e.lngLat.wrap();this.$refs.pointerInfo.innerHTML=`<span> ${t.lat.toFixed(5)}</span><span> ${t.lng.toFixed(5)}</span>`},calcCrow(n,t,T,l){var c=6371,d=this.toRad(T-n),m=this.toRad(l-t),n=this.toRad(n),T=this.toRad(T),V=Math.sin(d/2)*Math.sin(d/2)+Math.sin(m/2)*Math.sin(m/2)*Math.cos(n)*Math.cos(T),Q=2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V)),z=c*Q;return z},toRad(e){return e*Math.PI/180}}},QN={class:"row g-0"},eF={class:"col-9"},tF={class:"position-relative"},iF={class:"pointer-info",ref:"pointerInfo"},nF={class:"col-3"},rF=id('<header class="navbar navbar-expand-md navbar-dark bg-primary d-print-none"><div class="container-xl"><ul class="navbar-nav"><li class="nav-item"><a href="#" class="nav-link"><span class="nav-link-icon d-md-none d-lg-inline-block"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 6l16 0"></path><path d="M4 12l16 0"></path><path d="M4 18l16 0"></path></svg></span></a></li><li class="nav-item"><a href="#" class="nav-link"><span class="nav-link-icon d-md-none d-lg-inline-block"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sailboat" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M2 20a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1"></path><path d="M4 18l-1 -3h18l-1 3"></path><path d="M11 12h7l-7 -9v9"></path><path d="M8 7l-2 5"></path></svg></span> Voyage </a></li></ul></div></header>',1),sF={class:"information"},oF={class:"histories"},aF={class:"table card-table table-vcenter text-nowrap datatable table-fixed text-small"},lF=mt("thead",null,[mt("tr",null,[mt("th",null,"Time"),mt("th",null,"Lon"),mt("th",null,"Lat"),mt("th",null,"Speed")])],-1),cF=["onClick"];function hF(e,t,r,l,c,d){const m=ar("MapboxNavigationControl"),n=ar("MapboxMap");return ki(),Fi("div",QN,[mt("div",eF,[mt("div",tF,[mt("div",iF,null,512),Ji(n,{onMbCreated:t[0]||(t[0]=T=>c.map=T),onMbLoad:d.loaded,onMbMousemove:d.pointerLocation,style:{height:"calc(100vh - 128px)",width:"100%"},"access-token":"pk.eyJ1Ijoia3JvbmljayIsImEiOiJjaWxyZGZwcHQwOHRidWxrbnd0OTB0cDBzIn0.u2R3NY5PnevWH3cHRk6TWQ","map-style":"mapbox://styles/mapbox/navigation-day-v1",center:[105.987732,-5.898973],zoom:7},{default:js(()=>[Ji(m,{position:"bottom-right"})]),_:1},8,["onMbLoad","onMbMousemove","center"])])]),mt("div",nF,[rF,mt("div",sF,[mt("div",oF,[mt("table",aF,[lF,mt("tbody",null,[(ki(!0),Fi(Pr,null,pa(c.items,T=>(ki(),Fi("tr",{key:T.id,onClick:V=>d.toPotition(T),class:"pointer"},[mt("td",null,Bn(e.$filters.dateformat(T.terminal_time)),1),mt("td",null,Bn(e.$filters.str_limit(T.lng,7))+"°",1),mt("td",null,Bn(e.$filters.str_limit(T.lat,6))+"°",1),mt("td",null,Bn(T.sog),1)],8,cF))),128))])])])])])])}const dF=Zr(JN,[["render",hF]]),uF={components:{MapboxMap:Mx,MapboxNavigationControl:Ax},props:{fleet:Object},data(){return{map:null,current:[],timer:null,popup:new Sl.Popup({closeButton:!0,closeOnClick:!1}),histories:[]}},mounted(){this.map.loadImage(kx,(e,t)=>{if(e)throw e;this.map.addImage("ship-icon",t)})},methods:{tracks(e){console.log(e)},setHistory(e){this.histories=e;let t=this;this.current.length>0&&this.map.getLayer("route")!=="undefined"&&this.map.getLayer("points")!=="undefined"&&(this.map.removeLayer("route"),this.map.removeSource("route"),this.map.removeLayer("points"),this.map.removeSource("points"));let r={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}},l={type:"FeatureCollection",features:[]};this.histories.forEach((n,T)=>{r.geometry.coordinates.push([n.lng,n.lat]),l.features.push({type:"Feature",properties:{cog:n.cog,sog:n.sog,time:n.terminal_time,lat:n.lat,lng:n.lng,heading:n.heading},geometry:{type:"Point",coordinates:[n.lng,n.lat]}}),this.current=[n.lng,n.lat]}),this.map.addSource("route",{type:"geojson",data:r}),this.map.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3B4EF5","line-width":1.5,"line-dasharray":[3,3]}}),this.map.addSource("points",{type:"geojson",data:l}),this.map.addLayer({id:"points",type:"circle",source:"points",paint:{"circle-radius":4,"circle-color":"#3B4EF5"}});const c=new Sl.Popup({closeButton:!1,closeOnClick:!1});this.map.on("click","points",n=>{let T=n.features[0].properties;this.positionShip(T)}),this.map.on("mouseenter","points",n=>{t.map.getCanvas().style.cursor="pointer";const T=n.features[0].geometry.coordinates.slice(),V=`<b>Lat : ${n.features[0].properties.lat} | Lng: ${n.features[0].properties.lng}</b> at ${n.features[0].properties.sog} <b>kn</b> / ${n.features[0].properties.cog}&deg;<br>time: <b>${n.features[0].properties.time}</b>`;for(;Math.abs(n.lngLat.lng-T[0])>180;)T[0]+=n.lngLat.lng>T[0]?360:-360;c.setLngLat(T).setHTML(V).addTo(t.map)}),this.map.on("mouseleave","points",()=>{t.map.getCanvas().style.cursor="",c.remove()});let d=this.histories[this.histories.length-1],m=Object.assign({},{id:this.fleet.id,name:this.fleet.name,image:this.fleet.image,navigation:d});this.positionShip(m)},pointerLocation(e){let t=e.lngLat.wrap();this.$refs.pointerInfo.innerHTML=`<span> ${t.lat.toFixed(5)}</span><span> ${t.lng.toFixed(5)}</span>`},loaded(){this.positionShip(this.fleet)},toPotition(e){let t=Object.assign({},{id:this.fleet.id,name:this.fleet.name,image:this.fleet.image,navigation:e});this.positionShip(t)},positionShip(e){if(!e.navigation)return;typeof this.map.getLayer("ship-position")<"u"&&this.map.removeLayer("ship-position").removeSource("ship-points"),this.map.addSource("ship-points",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e.navigation.lng,e.navigation.lat]},properties:{scale:1,id:e.id,heading:e.navigation.heading,name:e.name,image:e.image,sog:e.navigation.sog,cog:e.navigation.cog,last_update:xm(e.navigation.terminal_time)}}]}}),this.map.addLayer({id:"ship-position",type:"symbol",source:"ship-points",layout:{"icon-image":"ship-icon","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-size":.3,"icon-rotate":{property:"heading",stops:[[-360,-360],[0,0],[360,360]]},"icon-rotation-alignment":"map"}}),this.popup.remove();const r=`<b>${e.name} [ID]</b> at ${e.navigation.sog} <b>kn</b> / ${e.navigation.cog}&deg;<br>last update: <b>${xm(e.navigation.updated_at)}</b>`;this.popup.setLngLat([e.navigation.lng,e.navigation.lat]).setHTML(r).addTo(this.map)}}},pF={class:"position-relative p-3 overflow-hidden"},fF={class:"pointer-info",ref:"pointerInfo"};function mF(e,t,r,l,c,d){const m=ar("map-voyage"),n=ar("MapboxNavigationControl"),T=ar("MapboxMap");return ki(),Fi("div",pF,[Ji(m,{fleet:r.fleet,onHistory:d.setHistory,onSelected:d.toPotition},null,8,["fleet","onHistory","onSelected"]),mt("div",fF,null,512),Ji(T,{onMbCreated:t[0]||(t[0]=V=>c.map=V),onMbLoad:d.loaded,onMbMousemove:d.pointerLocation,style:{height:"450px",width:"100%"},"access-token":"pk.eyJ1Ijoia3JvbmljayIsImEiOiJjaWxyZGZwcHQwOHRidWxrbnd0OTB0cDBzIn0.u2R3NY5PnevWH3cHRk6TWQ","map-style":"mapbox://styles/mapbox/navigation-day-v1",center:[r.fleet.navigation.lng,r.fleet.navigation.lat],zoom:7},{default:js(()=>[Ji(n,{position:"bottom-right"})]),_:1},8,["onMbLoad","onMbMousemove","center"])])}const gF=Zr(uF,[["render",mF]]),_F={props:{fleet:Object},data(){return{display:!1,params:{from:null,to:null,interval:900},histories:[]}},methods:{async fetchData(){this.histories=[],(await axios.get(`/api/fleet/${this.fleet.id}/nav/histories`,{params:this.params}).then(t=>t.data)).forEach(t=>{t.lat==0&&t.lng==0||this.histories.push(t)}),this.$emit("history",this.histories)},toggleText(){this.display=!this.display},selected(e){this.$emit("selected",e)}}},yF={class:"voyage-section p-3"},vF={key:0,class:"card voyage-card"},xF={class:"card-header justify-content-between"},bF=["src"],wF=mt("h5",{class:"fw-normal m-0"},"Voyage",-1),TF={class:"card-body"},SF=mt("ul",{class:"nav nav-pills nav-justified mb-3",id:"pills-tab",role:"tablist"},[mt("li",{class:"nav-item",role:"presentation"},[mt("button",{class:"nav-link justify-content-center active",id:"pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#pills-profile",type:"button",role:"tab","aria-controls":"pills-profile","aria-selected":"false"},"TRACK")]),mt("li",{class:"nav-item",role:"presentation"},[mt("button",{class:"nav-link justify-content-center",id:"pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#pills-home",type:"button",role:"tab","aria-controls":"pills-home","aria-selected":"true"},"INFO")])],-1),EF={class:"tab-content",id:"pills-tabContent"},CF={class:"tab-pane fade show active",id:"pills-profile",role:"tabpanel","aria-labelledby":"pills-profile-tab"},MF={class:"mb-4"},AF={class:"form-group mb-3"},kF=mt("label",{for:"startDateInput"},"Start Date",-1),PF={class:"form-group mb-3"},DF=mt("label",{for:"endDateInput"},"End Date",-1),IF=mt("h6",{class:"text-primary"},"GENERATE REPORT",-1),LF={class:"table text-sm"},OF=mt("thead",null,[mt("tr",null,[mt("th",{scope:"col"},"Time"),mt("th",{scope:"col"},"Lon"),mt("th",{scope:"col"},"Lat"),mt("th",{scope:"col"},"Speed")])],-1),RF=["onClick"],BF={scope:"row"},zF=mt("div",{class:"tab-pane fade",id:"pills-home",role:"tabpanel","aria-labelledby":"pills-home-tab"},null,-1),NF=["src"];function FF(e,t,r,l,c,d){return ki(),Fi("div",yF,[c.display?(ki(),Fi("div",vF,[mt("div",xF,[mt("button",{onClick:t[0]||(t[0]=m=>d.toggleText()),class:"btn btn-link bg-transparent p-0"},[mt("img",{src:"/img/icons/close-fill.png",alt:""},null,8,bF)]),wF]),mt("div",TF,[SF,mt("div",EF,[mt("div",CF,[mt("div",MF,[mt("div",AF,[kF,Pa(mt("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=m=>c.params.from=m),class:"form-control",id:"startDateInput"},null,512),[[Jd,c.params.from]])]),mt("div",PF,[DF,Pa(mt("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=m=>c.params.to=m),class:"form-control",id:"endDateInput"},null,512),[[Jd,c.params.to]])]),mt("button",{onClick:t[3]||(t[3]=(...m)=>d.fetchData&&d.fetchData(...m)),class:"btn btn-outline-primary w-100"},"SHOW")]),IF,mt("table",LF,[OF,mt("tbody",null,[(ki(!0),Fi(Pr,null,pa(c.histories,m=>(ki(),Fi("tr",{onClick:n=>d.selected(m),key:m.id},[mt("td",BF,Bn(e.$filters.dateformat(m.terminal_time,"DD/MM/YY HH:mm")),1),mt("td",null,Bn(m.lng.toFixed(2))+"°",1),mt("td",null,Bn(m.lat.toFixed(2))+"°",1),mt("td",null,Bn(m.sog),1)],8,RF))),128))])])]),zF])])])):yr("",!0),mt("button",{onClick:t[4]||(t[4]=m=>d.toggleText()),class:"btn btn-light btn-open"},[mt("img",{src:"/img/icons/location-circle.png",alt:""},null,8,NF),gh(" Show fleet Track ")])])}const jF=Zr(_F,[["render",FF]]),UF={},GF={class:"ships-cctv"},VF=id('<div class="card" data-v-3e327a0d><div class="card-header" data-v-3e327a0d><div class="card-title" data-v-3e327a0d><div data-v-3e327a0d>Bridge</div></div><div class="card-status" data-v-3e327a0d><a href="#" data-v-3e327a0d><img src="img/icons/fullscreen.png" alt="" data-v-3e327a0d> Fullscreen </a><a href="#" data-v-3e327a0d> Esc to exit </a></div></div><div class="card-body" data-v-3e327a0d><img src="img/image-1.png" alt="" class="w-100" data-v-3e327a0d></div></div>',1),$F=[VF];function HF(e,t,r,l,c,d){return ki(),Fi("div",GF,$F)}const WF=Zr(UF,[["render",HF],["__scopeId","data-v-3e327a0d"]]),YF={components:{"x-search":cA,"x-notification":hA,"x-records":dA,"x-navigation":uA,"x-camera":pA,"x-parameter":fA,"x-cctv":WF,MapboxMap:Mx,MapboxNavigationControl:Ax},data(){return{map:null,current:[],timer:null,fleets:[],zoom:3,center:[118,0],popup:null}},mounted(){this.timer=setInterval(()=>{this.loaded()},15*1e3),this.map.loadImage(kx,(e,t)=>{if(e)throw e;this.map.addImage("ship",t)}),this.popup=new Sl.Popup({closeButton:!0,closeOnClick:!1})},methods:{async loaded(){let{data:e}=await axios.get("/api/fleets");this.fleets=e,e.forEach(t=>{this.positionShip(t)})},findFleet(e){if(!e.navigation)return;let t=e.id;this.popup.remove();const r=`<a class="no-style" href="/fleet/${t}"><b>${e.name} [ID]</b> at ${e.navigation.sog} <b>kn</b> / ${e.navigation.cog}&deg;<br>last update: <b>${xm(e.navigation.updated_at)}</b></a>`;this.popup.setLngLat([e.navigation.lng,e.navigation.lat]).setHTML(r).addTo(this.map),this.center=[e.navigation.lng,e.navigation.lat],this.zoom=5},pointerLocation(e){let t=e.lngLat.wrap();this.$refs.pointerInfo.innerHTML=`<span> ${t.lat.toFixed(5)}</span><span> ${t.lng.toFixed(5)}</span>`},positionShip(e){if(!e.navigation)return;let t=this;typeof this.map.getLayer(`ship-positions-${e.id}`)<"u"&&this.map.removeLayer(`ship-positions-${e.id}`).removeSource(`ship-positions-${e.id}`),this.map.addSource(`ship-positions-${e.id}`,{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e.navigation.lng,e.navigation.lat]},properties:{scale:1,id:e.id,heading:e.navigation.heading,name:e.name,image:e.image,sog:e.navigation.sog,cog:e.navigation.cog,last_update:xm(e.navigation.updated_at)}}]}}),this.map.addLayer({id:`ship-positions-${e.id}`,type:"symbol",source:`ship-positions-${e.id}`,layout:{"icon-image":"ship","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-size":.3,"icon-rotate":{property:"heading",stops:[[-360,-360],[0,0],[360,360]]},"icon-rotation-alignment":"map"}});const l=new Sl.Popup({closeButton:!1,closeOnClick:!1});this.map.on("click",`ship-positions-${e.id}`,c=>{let d=c.features[0].properties.id;location.href=`/fleet/${d}`}),this.map.on("mouseenter",`ship-positions-${e.id}`,c=>{t.map.getCanvas().style.cursor="pointer";const d=c.features[0].geometry.coordinates.slice(),m=`<b>${c.features[0].properties.name} [ID]</b> at ${c.features[0].properties.sog} <b>kn</b> / ${c.features[0].properties.cog}&deg;<br>last update: <b>${c.features[0].properties.last_update}</b>`;for(;Math.abs(c.lngLat.lng-d[0])>180;)d[0]+=c.lngLat.lng>d[0]?360:-360;l.setLngLat(d).setHTML(m).addTo(t.map)}),this.map.on("mouseleave",`ship-positions-${e.id}`,()=>{t.map.getCanvas().style.cursor="",l.remove()})}}},XF={class:"position-relative"};function qF(e,t,r,l,c,d){const m=ar("x-records"),n=ar("x-navigation"),T=ar("x-camera"),V=ar("x-notification"),Q=ar("x-parameter"),z=ar("x-cctv"),W=ar("MapboxNavigationControl"),K=ar("MapboxMap");return ki(),Fi("div",XF,[Ji(m),Ji(n),Ji(T),Ji(V),Ji(Q),Ji(z),Ji(K,{onMbCreated:t[0]||(t[0]=I=>c.map=I),onMbLoad:d.loaded,onMbMousemove:d.pointerLocation,style:{height:"calc(100vh - 0px)",width:"100%"},"access-token":"pk.eyJ1Ijoia3JvbmljayIsImEiOiJjaWxyZGZwcHQwOHRidWxrbnd0OTB0cDBzIn0.u2R3NY5PnevWH3cHRk6TWQ","map-style":"mapbox://styles/mapbox/navigation-day-v1",center:c.center,zoom:c.zoom},{default:js(()=>[Ji(W,{position:"bottom-right"})]),_:1},8,["onMbLoad","onMbMousemove","center","zoom"])])}const ZF=Zr(YF,[["render",qF]]);function E5(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function IT(e={},t={}){Object.keys(t).forEach(r=>{typeof e[r]>"u"?e[r]=t[r]:E5(t[r])&&E5(e[r])&&Object.keys(t[r]).length>0&&IT(e[r],t[r])})}const gA={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function $f(){const e=typeof document<"u"?document:{};return IT(e,gA),e}const KF={document:gA,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function dc(){const e=typeof window<"u"?window:{};return IT(e,KF),e}function JF(e){const t=e;Object.keys(t).forEach(r=>{try{t[r]=null}catch{}try{delete t[r]}catch{}})}function Gw(e,t=0){return setTimeout(e,t)}function Pv(){return Date.now()}function QF(e){const t=dc();let r;return t.getComputedStyle&&(r=t.getComputedStyle(e,null)),!r&&e.currentStyle&&(r=e.currentStyle),r||(r=e.style),r}function ej(e,t="x"){const r=dc();let l,c,d;const m=QF(e);return r.WebKitCSSMatrix?(c=m.transform||m.webkitTransform,c.split(",").length>6&&(c=c.split(", ").map(n=>n.replace(",",".")).join(", ")),d=new r.WebKitCSSMatrix(c==="none"?"":c)):(d=m.MozTransform||m.OTransform||m.MsTransform||m.msTransform||m.transform||m.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),l=d.toString().split(",")),t==="x"&&(r.WebKitCSSMatrix?c=d.m41:l.length===16?c=parseFloat(l[12]):c=parseFloat(l[4])),t==="y"&&(r.WebKitCSSMatrix?c=d.m42:l.length===16?c=parseFloat(l[13]):c=parseFloat(l[5])),c||0}function zy(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function tj(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function nc(...e){const t=Object(e[0]),r=["__proto__","constructor","prototype"];for(let l=1;l<e.length;l+=1){const c=e[l];if(c!=null&&!tj(c)){const d=Object.keys(Object(c)).filter(m=>r.indexOf(m)<0);for(let m=0,n=d.length;m<n;m+=1){const T=d[m],V=Object.getOwnPropertyDescriptor(c,T);V!==void 0&&V.enumerable&&(zy(t[T])&&zy(c[T])?c[T].__swiper__?t[T]=c[T]:nc(t[T],c[T]):!zy(t[T])&&zy(c[T])?(t[T]={},c[T].__swiper__?t[T]=c[T]:nc(t[T],c[T])):t[T]=c[T])}}}return t}function Ny(e,t,r){e.style.setProperty(t,r)}function _A({swiper:e,targetPosition:t,side:r}){const l=dc(),c=-e.translate;let d=null,m;const n=e.params.speed;e.wrapperEl.style.scrollSnapType="none",l.cancelAnimationFrame(e.cssModeFrameID);const T=t>c?"next":"prev",V=(z,W)=>T==="next"&&z>=W||T==="prev"&&z<=W,Q=()=>{m=new Date().getTime(),d===null&&(d=m);const z=Math.max(Math.min((m-d)/n,1),0),W=.5-Math.cos(z*Math.PI)/2;let K=c+W*(t-c);if(V(K,t)&&(K=t),e.wrapperEl.scrollTo({[r]:K}),V(K,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:K})}),l.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=l.requestAnimationFrame(Q)};Q()}function Jh(e,t=""){return[...e.children].filter(r=>r.matches(t))}function LT(e,t=[]){const r=document.createElement(e);return r.classList.add(...Array.isArray(t)?t:[t]),r}function ij(e,t){const r=[];for(;e.previousElementSibling;){const l=e.previousElementSibling;t?l.matches(t)&&r.push(l):r.push(l),e=l}return r}function nj(e,t){const r=[];for(;e.nextElementSibling;){const l=e.nextElementSibling;t?l.matches(t)&&r.push(l):r.push(l),e=l}return r}function Zu(e,t){return dc().getComputedStyle(e,null).getPropertyValue(t)}function Vw(e){let t=e,r;if(t){for(r=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(r+=1);return r}}function rj(e,t){const r=[];let l=e.parentElement;for(;l;)t?l.matches(t)&&r.push(l):r.push(l),l=l.parentElement;return r}function C5(e,t,r){const l=dc();return r?e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(l.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(l.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom")):e.offsetWidth}let Wb;function sj(){const e=dc(),t=$f();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function yA(){return Wb||(Wb=sj()),Wb}let Yb;function oj({userAgent:e}={}){const t=yA(),r=dc(),l=r.navigator.platform,c=e||r.navigator.userAgent,d={ios:!1,android:!1},m=r.screen.width,n=r.screen.height,T=c.match(/(Android);?[\s\/]+([\d.]+)?/);let V=c.match(/(iPad).*OS\s([\d_]+)/);const Q=c.match(/(iPod)(.*OS\s([\d_]+))?/),z=!V&&c.match(/(iPhone\sOS|iOS)\s([\d_]+)/),W=l==="Win32";let K=l==="MacIntel";const I=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!V&&K&&t.touch&&I.indexOf(`${m}x${n}`)>=0&&(V=c.match(/(Version)\/([\d.]+)/),V||(V=[0,1,"13_0_0"]),K=!1),T&&!W&&(d.os="android",d.android=!0),(V||z||Q)&&(d.os="ios",d.ios=!0),d}function aj(e={}){return Yb||(Yb=oj(e)),Yb}let Xb;function lj(){const e=dc();let t=!1;function r(){const l=e.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(r()){const l=String(e.navigator.userAgent);if(l.includes("Version/")){const[c,d]=l.split("Version/")[1].split(" ")[0].split(".").map(m=>Number(m));t=c<16||c===16&&d<2}}return{isSafari:t||r(),needPerspectiveFix:t,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function cj(){return Xb||(Xb=lj()),Xb}function hj({swiper:e,on:t,emit:r}){const l=dc();let c=null,d=null;const m=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},n=()=>{!e||e.destroyed||!e.initialized||(c=new ResizeObserver(Q=>{d=l.requestAnimationFrame(()=>{const{width:z,height:W}=e;let K=z,I=W;Q.forEach(({contentBoxSize:O,contentRect:$,target:M})=>{M&&M!==e.el||(K=$?$.width:(O[0]||O).inlineSize,I=$?$.height:(O[0]||O).blockSize)}),(K!==z||I!==W)&&m()})}),c.observe(e.el))},T=()=>{d&&l.cancelAnimationFrame(d),c&&c.unobserve&&e.el&&(c.unobserve(e.el),c=null)},V=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof l.ResizeObserver<"u"){n();return}l.addEventListener("resize",m),l.addEventListener("orientationchange",V)}),t("destroy",()=>{T(),l.removeEventListener("resize",m),l.removeEventListener("orientationchange",V)})}function dj({swiper:e,extendParams:t,on:r,emit:l}){const c=[],d=dc(),m=(V,Q={})=>{const z=d.MutationObserver||d.WebkitMutationObserver,W=new z(K=>{if(e.__preventObserver__)return;if(K.length===1){l("observerUpdate",K[0]);return}const I=function(){l("observerUpdate",K[0])};d.requestAnimationFrame?d.requestAnimationFrame(I):d.setTimeout(I,0)});W.observe(V,{attributes:typeof Q.attributes>"u"?!0:Q.attributes,childList:typeof Q.childList>"u"?!0:Q.childList,characterData:typeof Q.characterData>"u"?!0:Q.characterData}),c.push(W)},n=()=>{if(e.params.observer){if(e.params.observeParents){const V=rj(e.el);for(let Q=0;Q<V.length;Q+=1)m(V[Q])}m(e.el,{childList:e.params.observeSlideChildren}),m(e.wrapperEl,{attributes:!1})}},T=()=>{c.forEach(V=>{V.disconnect()}),c.splice(0,c.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",n),r("destroy",T)}const uj={on(e,t,r){const l=this;if(!l.eventsListeners||l.destroyed||typeof t!="function")return l;const c=r?"unshift":"push";return e.split(" ").forEach(d=>{l.eventsListeners[d]||(l.eventsListeners[d]=[]),l.eventsListeners[d][c](t)}),l},once(e,t,r){const l=this;if(!l.eventsListeners||l.destroyed||typeof t!="function")return l;function c(...d){l.off(e,c),c.__emitterProxy&&delete c.__emitterProxy,t.apply(l,d)}return c.__emitterProxy=t,l.on(e,c,r)},onAny(e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const l=t?"unshift":"push";return r.eventsAnyListeners.indexOf(e)<0&&r.eventsAnyListeners[l](e),r},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const r=t.eventsAnyListeners.indexOf(e);return r>=0&&t.eventsAnyListeners.splice(r,1),t},off(e,t){const r=this;return!r.eventsListeners||r.destroyed||!r.eventsListeners||e.split(" ").forEach(l=>{typeof t>"u"?r.eventsListeners[l]=[]:r.eventsListeners[l]&&r.eventsListeners[l].forEach((c,d)=>{(c===t||c.__emitterProxy&&c.__emitterProxy===t)&&r.eventsListeners[l].splice(d,1)})}),r},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let r,l,c;return typeof e[0]=="string"||Array.isArray(e[0])?(r=e[0],l=e.slice(1,e.length),c=t):(r=e[0].events,l=e[0].data,c=e[0].context||t),l.unshift(c),(Array.isArray(r)?r:r.split(" ")).forEach(m=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(n=>{n.apply(c,[m,...l])}),t.eventsListeners&&t.eventsListeners[m]&&t.eventsListeners[m].forEach(n=>{n.apply(c,l)})}),t}};function pj(){const e=this;let t,r;const l=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=l.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?r=e.params.height:r=l.clientHeight,!(t===0&&e.isHorizontal()||r===0&&e.isVertical())&&(t=t-parseInt(Zu(l,"padding-left")||0,10)-parseInt(Zu(l,"padding-right")||0,10),r=r-parseInt(Zu(l,"padding-top")||0,10)-parseInt(Zu(l,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(r)&&(r=0),Object.assign(e,{width:t,height:r,size:e.isHorizontal()?t:r}))}function fj(){const e=this;function t(H){return e.isHorizontal()?H:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[H]}function r(H,E){return parseFloat(H.getPropertyValue(t(E))||0)}const l=e.params,{wrapperEl:c,slidesEl:d,size:m,rtlTranslate:n,wrongRTL:T}=e,V=e.virtual&&l.virtual.enabled,Q=V?e.virtual.slides.length:e.slides.length,z=Jh(d,`.${e.params.slideClass}, swiper-slide`),W=V?e.virtual.slides.length:z.length;let K=[];const I=[],O=[];let $=l.slidesOffsetBefore;typeof $=="function"&&($=l.slidesOffsetBefore.call(e));let M=l.slidesOffsetAfter;typeof M=="function"&&(M=l.slidesOffsetAfter.call(e));const S=e.snapGrid.length,k=e.slidesGrid.length;let G=l.spaceBetween,U=-$,C=0,ie=0;if(typeof m>"u")return;typeof G=="string"&&G.indexOf("%")>=0?G=parseFloat(G.replace("%",""))/100*m:typeof G=="string"&&(G=parseFloat(G)),e.virtualSize=-G,z.forEach(H=>{n?H.style.marginLeft="":H.style.marginRight="",H.style.marginBottom="",H.style.marginTop=""}),l.centeredSlides&&l.cssMode&&(Ny(c,"--swiper-centered-offset-before",""),Ny(c,"--swiper-centered-offset-after",""));const J=l.grid&&l.grid.rows>1&&e.grid;J&&e.grid.initSlides(W);let N;const F=l.slidesPerView==="auto"&&l.breakpoints&&Object.keys(l.breakpoints).filter(H=>typeof l.breakpoints[H].slidesPerView<"u").length>0;for(let H=0;H<W;H+=1){N=0;let E;if(z[H]&&(E=z[H]),J&&e.grid.updateSlide(H,E,W,t),!(z[H]&&Zu(E,"display")==="none")){if(l.slidesPerView==="auto"){F&&(z[H].style[t("width")]="");const L=getComputedStyle(E),f=E.style.transform,y=E.style.webkitTransform;if(f&&(E.style.transform="none"),y&&(E.style.webkitTransform="none"),l.roundLengths)N=e.isHorizontal()?C5(E,"width",!0):C5(E,"height",!0);else{const b=r(L,"width"),D=r(L,"padding-left"),X=r(L,"padding-right"),te=r(L,"margin-left"),q=r(L,"margin-right"),ce=L.getPropertyValue("box-sizing");if(ce&&ce==="border-box")N=b+te+q;else{const{clientWidth:fe,offsetWidth:we}=E;N=b+D+X+te+q+(we-fe)}}f&&(E.style.transform=f),y&&(E.style.webkitTransform=y),l.roundLengths&&(N=Math.floor(N))}else N=(m-(l.slidesPerView-1)*G)/l.slidesPerView,l.roundLengths&&(N=Math.floor(N)),z[H]&&(z[H].style[t("width")]=`${N}px`);z[H]&&(z[H].swiperSlideSize=N),O.push(N),l.centeredSlides?(U=U+N/2+C/2+G,C===0&&H!==0&&(U=U-m/2-G),H===0&&(U=U-m/2-G),Math.abs(U)<1/1e3&&(U=0),l.roundLengths&&(U=Math.floor(U)),ie%l.slidesPerGroup===0&&K.push(U),I.push(U)):(l.roundLengths&&(U=Math.floor(U)),(ie-Math.min(e.params.slidesPerGroupSkip,ie))%e.params.slidesPerGroup===0&&K.push(U),I.push(U),U=U+N+G),e.virtualSize+=N+G,C=N,ie+=1}}if(e.virtualSize=Math.max(e.virtualSize,m)+M,n&&T&&(l.effect==="slide"||l.effect==="coverflow")&&(c.style.width=`${e.virtualSize+G}px`),l.setWrapperSize&&(c.style[t("width")]=`${e.virtualSize+G}px`),J&&e.grid.updateWrapperSize(N,K,t),!l.centeredSlides){const H=[];for(let E=0;E<K.length;E+=1){let L=K[E];l.roundLengths&&(L=Math.floor(L)),K[E]<=e.virtualSize-m&&H.push(L)}K=H,Math.floor(e.virtualSize-m)-Math.floor(K[K.length-1])>1&&K.push(e.virtualSize-m)}if(V&&l.loop){const H=O[0]+G;if(l.slidesPerGroup>1){const E=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/l.slidesPerGroup),L=H*l.slidesPerGroup;for(let f=0;f<E;f+=1)K.push(K[K.length-1]+L)}for(let E=0;E<e.virtual.slidesBefore+e.virtual.slidesAfter;E+=1)l.slidesPerGroup===1&&K.push(K[K.length-1]+H),I.push(I[I.length-1]+H),e.virtualSize+=H}if(K.length===0&&(K=[0]),G!==0){const H=e.isHorizontal()&&n?"marginLeft":t("marginRight");z.filter((E,L)=>!l.cssMode||l.loop?!0:L!==z.length-1).forEach(E=>{E.style[H]=`${G}px`})}if(l.centeredSlides&&l.centeredSlidesBounds){let H=0;O.forEach(L=>{H+=L+(G||0)}),H-=G;const E=H-m;K=K.map(L=>L<0?-$:L>E?E+M:L)}if(l.centerInsufficientSlides){let H=0;if(O.forEach(E=>{H+=E+(G||0)}),H-=G,H<m){const E=(m-H)/2;K.forEach((L,f)=>{K[f]=L-E}),I.forEach((L,f)=>{I[f]=L+E})}}if(Object.assign(e,{slides:z,snapGrid:K,slidesGrid:I,slidesSizesGrid:O}),l.centeredSlides&&l.cssMode&&!l.centeredSlidesBounds){Ny(c,"--swiper-centered-offset-before",`${-K[0]}px`),Ny(c,"--swiper-centered-offset-after",`${e.size/2-O[O.length-1]/2}px`);const H=-e.snapGrid[0],E=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(L=>L+H),e.slidesGrid=e.slidesGrid.map(L=>L+E)}if(W!==Q&&e.emit("slidesLengthChange"),K.length!==S&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),I.length!==k&&e.emit("slidesGridLengthChange"),l.watchSlidesProgress&&e.updateSlidesOffset(),!V&&!l.cssMode&&(l.effect==="slide"||l.effect==="fade")){const H=`${l.containerModifierClass}backface-hidden`,E=e.el.classList.contains(H);W<=l.maxBackfaceHiddenSlides?E||e.el.classList.add(H):E&&e.el.classList.remove(H)}}function mj(e){const t=this,r=[],l=t.virtual&&t.params.virtual.enabled;let c=0,d;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const m=n=>l?t.slides[t.getSlideIndexByData(n)]:t.slides[n];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(n=>{r.push(n)});else for(d=0;d<Math.ceil(t.params.slidesPerView);d+=1){const n=t.activeIndex+d;if(n>t.slides.length&&!l)break;r.push(m(n))}else r.push(m(t.activeIndex));for(d=0;d<r.length;d+=1)if(typeof r[d]<"u"){const n=r[d].offsetHeight;c=n>c?n:c}(c||c===0)&&(t.wrapperEl.style.height=`${c}px`)}function gj(){const e=this,t=e.slides,r=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let l=0;l<t.length;l+=1)t[l].swiperSlideOffset=(e.isHorizontal()?t[l].offsetLeft:t[l].offsetTop)-r-e.cssOverflowAdjustment()}function _j(e=this&&this.translate||0){const t=this,r=t.params,{slides:l,rtlTranslate:c,snapGrid:d}=t;if(l.length===0)return;typeof l[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let m=-e;c&&(m=e),l.forEach(T=>{T.classList.remove(r.slideVisibleClass)}),t.visibleSlidesIndexes=[],t.visibleSlides=[];let n=r.spaceBetween;typeof n=="string"&&n.indexOf("%")>=0?n=parseFloat(n.replace("%",""))/100*t.size:typeof n=="string"&&(n=parseFloat(n));for(let T=0;T<l.length;T+=1){const V=l[T];let Q=V.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(Q-=l[0].swiperSlideOffset);const z=(m+(r.centeredSlides?t.minTranslate():0)-Q)/(V.swiperSlideSize+n),W=(m-d[0]+(r.centeredSlides?t.minTranslate():0)-Q)/(V.swiperSlideSize+n),K=-(m-Q),I=K+t.slidesSizesGrid[T];(K>=0&&K<t.size-1||I>1&&I<=t.size||K<=0&&I>=t.size)&&(t.visibleSlides.push(V),t.visibleSlidesIndexes.push(T),l[T].classList.add(r.slideVisibleClass)),V.progress=c?-z:z,V.originalProgress=c?-W:W}}function yj(e){const t=this;if(typeof e>"u"){const Q=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*Q||0}const r=t.params,l=t.maxTranslate()-t.minTranslate();let{progress:c,isBeginning:d,isEnd:m,progressLoop:n}=t;const T=d,V=m;if(l===0)c=0,d=!0,m=!0;else{c=(e-t.minTranslate())/l;const Q=Math.abs(e-t.minTranslate())<1,z=Math.abs(e-t.maxTranslate())<1;d=Q||c<=0,m=z||c>=1,Q&&(c=0),z&&(c=1)}if(r.loop){const Q=t.getSlideIndexByData(0),z=t.getSlideIndexByData(t.slides.length-1),W=t.slidesGrid[Q],K=t.slidesGrid[z],I=t.slidesGrid[t.slidesGrid.length-1],O=Math.abs(e);O>=W?n=(O-W)/I:n=(O+I-K)/I,n>1&&(n-=1)}Object.assign(t,{progress:c,progressLoop:n,isBeginning:d,isEnd:m}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),d&&!T&&t.emit("reachBeginning toEdge"),m&&!V&&t.emit("reachEnd toEdge"),(T&&!d||V&&!m)&&t.emit("fromEdge"),t.emit("progress",c)}function vj(){const e=this,{slides:t,params:r,slidesEl:l,activeIndex:c}=e,d=e.virtual&&r.virtual.enabled,m=T=>Jh(l,`.${r.slideClass}${T}, swiper-slide${T}`)[0];t.forEach(T=>{T.classList.remove(r.slideActiveClass,r.slideNextClass,r.slidePrevClass)});let n;if(d)if(r.loop){let T=c-e.virtual.slidesBefore;T<0&&(T=e.virtual.slides.length+T),T>=e.virtual.slides.length&&(T-=e.virtual.slides.length),n=m(`[data-swiper-slide-index="${T}"]`)}else n=m(`[data-swiper-slide-index="${c}"]`);else n=t[c];if(n){n.classList.add(r.slideActiveClass);let T=nj(n,`.${r.slideClass}, swiper-slide`)[0];r.loop&&!T&&(T=t[0]),T&&T.classList.add(r.slideNextClass);let V=ij(n,`.${r.slideClass}, swiper-slide`)[0];r.loop&&!V===0&&(V=t[t.length-1]),V&&V.classList.add(r.slidePrevClass)}e.emitSlidesClasses()}const Jy=(e,t)=>{if(!e||e.destroyed||!e.params)return;const r=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,l=t.closest(r());if(l){const c=l.querySelector(`.${e.params.lazyPreloaderClass}`);c&&c.remove()}},M5=(e,t)=>{if(!e.slides[t])return;const r=e.slides[t].querySelector('[loading="lazy"]');r&&r.removeAttribute("loading")},$w=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const r=e.slides.length;if(!r||!t||t<0)return;t=Math.min(t,r);const l=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),c=e.activeIndex,d=c+l-1;if(e.params.rewind)for(let m=c-t;m<=d+t;m+=1){const n=(m%r+r)%r;n!==c&&n>d&&M5(e,n)}else for(let m=Math.max(d-t,0);m<=Math.min(d+t,r-1);m+=1)m!==c&&m>d&&M5(e,m)};function xj(e){const{slidesGrid:t,params:r}=e,l=e.rtlTranslate?e.translate:-e.translate;let c;for(let d=0;d<t.length;d+=1)typeof t[d+1]<"u"?l>=t[d]&&l<t[d+1]-(t[d+1]-t[d])/2?c=d:l>=t[d]&&l<t[d+1]&&(c=d+1):l>=t[d]&&(c=d);return r.normalizeSlideIndex&&(c<0||typeof c>"u")&&(c=0),c}function bj(e){const t=this,r=t.rtlTranslate?t.translate:-t.translate,{snapGrid:l,params:c,activeIndex:d,realIndex:m,snapIndex:n}=t;let T=e,V;const Q=W=>{let K=W-t.virtual.slidesBefore;return K<0&&(K=t.virtual.slides.length+K),K>=t.virtual.slides.length&&(K-=t.virtual.slides.length),K};if(typeof T>"u"&&(T=xj(t)),l.indexOf(r)>=0)V=l.indexOf(r);else{const W=Math.min(c.slidesPerGroupSkip,T);V=W+Math.floor((T-W)/c.slidesPerGroup)}if(V>=l.length&&(V=l.length-1),T===d){V!==n&&(t.snapIndex=V,t.emit("snapIndexChange")),t.params.loop&&t.virtual&&t.params.virtual.enabled&&(t.realIndex=Q(T));return}let z;t.virtual&&c.virtual.enabled&&c.loop?z=Q(T):t.slides[T]?z=parseInt(t.slides[T].getAttribute("data-swiper-slide-index")||T,10):z=T,Object.assign(t,{previousSnapIndex:n,snapIndex:V,previousRealIndex:m,realIndex:z,previousIndex:d,activeIndex:T}),t.initialized&&$w(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),m!==z&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function wj(e){const t=this,r=t.params,l=e.closest(`.${r.slideClass}, swiper-slide`);let c=!1,d;if(l){for(let m=0;m<t.slides.length;m+=1)if(t.slides[m]===l){c=!0,d=m;break}}if(l&&c)t.clickedSlide=l,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(l.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=d;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const Tj={updateSize:pj,updateSlides:fj,updateAutoHeight:mj,updateSlidesOffset:gj,updateSlidesProgress:_j,updateProgress:yj,updateSlidesClasses:vj,updateActiveIndex:bj,updateClickedSlide:wj};function Sj(e=this.isHorizontal()?"x":"y"){const t=this,{params:r,rtlTranslate:l,translate:c,wrapperEl:d}=t;if(r.virtualTranslate)return l?-c:c;if(r.cssMode)return c;let m=ej(d,e);return m+=t.cssOverflowAdjustment(),l&&(m=-m),m||0}function Ej(e,t){const r=this,{rtlTranslate:l,params:c,wrapperEl:d,progress:m}=r;let n=0,T=0;const V=0;r.isHorizontal()?n=l?-e:e:T=e,c.roundLengths&&(n=Math.floor(n),T=Math.floor(T)),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?n:T,c.cssMode?d[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-n:-T:c.virtualTranslate||(r.isHorizontal()?n-=r.cssOverflowAdjustment():T-=r.cssOverflowAdjustment(),d.style.transform=`translate3d(${n}px, ${T}px, ${V}px)`);let Q;const z=r.maxTranslate()-r.minTranslate();z===0?Q=0:Q=(e-r.minTranslate())/z,Q!==m&&r.updateProgress(e),r.emit("setTranslate",r.translate,t)}function Cj(){return-this.snapGrid[0]}function Mj(){return-this.snapGrid[this.snapGrid.length-1]}function Aj(e=0,t=this.params.speed,r=!0,l=!0,c){const d=this,{params:m,wrapperEl:n}=d;if(d.animating&&m.preventInteractionOnTransition)return!1;const T=d.minTranslate(),V=d.maxTranslate();let Q;if(l&&e>T?Q=T:l&&e<V?Q=V:Q=e,d.updateProgress(Q),m.cssMode){const z=d.isHorizontal();if(t===0)n[z?"scrollLeft":"scrollTop"]=-Q;else{if(!d.support.smoothScroll)return _A({swiper:d,targetPosition:-Q,side:z?"left":"top"}),!0;n.scrollTo({[z?"left":"top"]:-Q,behavior:"smooth"})}return!0}return t===0?(d.setTransition(0),d.setTranslate(Q),r&&(d.emit("beforeTransitionStart",t,c),d.emit("transitionEnd"))):(d.setTransition(t),d.setTranslate(Q),r&&(d.emit("beforeTransitionStart",t,c),d.emit("transitionStart")),d.animating||(d.animating=!0,d.onTranslateToWrapperTransitionEnd||(d.onTranslateToWrapperTransitionEnd=function(W){!d||d.destroyed||W.target===this&&(d.wrapperEl.removeEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.onTranslateToWrapperTransitionEnd=null,delete d.onTranslateToWrapperTransitionEnd,r&&d.emit("transitionEnd"))}),d.wrapperEl.addEventListener("transitionend",d.onTranslateToWrapperTransitionEnd))),!0}const kj={getTranslate:Sj,setTranslate:Ej,minTranslate:Cj,maxTranslate:Mj,translateTo:Aj};function Pj(e,t){const r=this;r.params.cssMode||(r.wrapperEl.style.transitionDuration=`${e}ms`),r.emit("setTransition",e,t)}function vA({swiper:e,runCallbacks:t,direction:r,step:l}){const{activeIndex:c,previousIndex:d}=e;let m=r;if(m||(c>d?m="next":c<d?m="prev":m="reset"),e.emit(`transition${l}`),t&&c!==d){if(m==="reset"){e.emit(`slideResetTransition${l}`);return}e.emit(`slideChangeTransition${l}`),m==="next"?e.emit(`slideNextTransition${l}`):e.emit(`slidePrevTransition${l}`)}}function Dj(e=!0,t){const r=this,{params:l}=r;l.cssMode||(l.autoHeight&&r.updateAutoHeight(),vA({swiper:r,runCallbacks:e,direction:t,step:"Start"}))}function Ij(e=!0,t){const r=this,{params:l}=r;r.animating=!1,!l.cssMode&&(r.setTransition(0),vA({swiper:r,runCallbacks:e,direction:t,step:"End"}))}const Lj={setTransition:Pj,transitionStart:Dj,transitionEnd:Ij};function Oj(e=0,t=this.params.speed,r=!0,l,c){typeof e=="string"&&(e=parseInt(e,10));const d=this;let m=e;m<0&&(m=0);const{params:n,snapGrid:T,slidesGrid:V,previousIndex:Q,activeIndex:z,rtlTranslate:W,wrapperEl:K,enabled:I}=d;if(d.animating&&n.preventInteractionOnTransition||!I&&!l&&!c)return!1;const O=Math.min(d.params.slidesPerGroupSkip,m);let $=O+Math.floor((m-O)/d.params.slidesPerGroup);$>=T.length&&($=T.length-1);const M=-T[$];if(n.normalizeSlideIndex)for(let k=0;k<V.length;k+=1){const G=-Math.floor(M*100),U=Math.floor(V[k]*100),C=Math.floor(V[k+1]*100);typeof V[k+1]<"u"?G>=U&&G<C-(C-U)/2?m=k:G>=U&&G<C&&(m=k+1):G>=U&&(m=k)}if(d.initialized&&m!==z&&(!d.allowSlideNext&&M<d.translate&&M<d.minTranslate()||!d.allowSlidePrev&&M>d.translate&&M>d.maxTranslate()&&(z||0)!==m))return!1;m!==(Q||0)&&r&&d.emit("beforeSlideChangeStart"),d.updateProgress(M);let S;if(m>z?S="next":m<z?S="prev":S="reset",W&&-M===d.translate||!W&&M===d.translate)return d.updateActiveIndex(m),n.autoHeight&&d.updateAutoHeight(),d.updateSlidesClasses(),n.effect!=="slide"&&d.setTranslate(M),S!=="reset"&&(d.transitionStart(r,S),d.transitionEnd(r,S)),!1;if(n.cssMode){const k=d.isHorizontal(),G=W?M:-M;if(t===0){const U=d.virtual&&d.params.virtual.enabled;U&&(d.wrapperEl.style.scrollSnapType="none",d._immediateVirtual=!0),U&&!d._cssModeVirtualInitialSet&&d.params.initialSlide>0?(d._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{K[k?"scrollLeft":"scrollTop"]=G})):K[k?"scrollLeft":"scrollTop"]=G,U&&requestAnimationFrame(()=>{d.wrapperEl.style.scrollSnapType="",d._immediateVirtual=!1})}else{if(!d.support.smoothScroll)return _A({swiper:d,targetPosition:G,side:k?"left":"top"}),!0;K.scrollTo({[k?"left":"top"]:G,behavior:"smooth"})}return!0}return d.setTransition(t),d.setTranslate(M),d.updateActiveIndex(m),d.updateSlidesClasses(),d.emit("beforeTransitionStart",t,l),d.transitionStart(r,S),t===0?d.transitionEnd(r,S):d.animating||(d.animating=!0,d.onSlideToWrapperTransitionEnd||(d.onSlideToWrapperTransitionEnd=function(G){!d||d.destroyed||G.target===this&&(d.wrapperEl.removeEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.onSlideToWrapperTransitionEnd=null,delete d.onSlideToWrapperTransitionEnd,d.transitionEnd(r,S))}),d.wrapperEl.addEventListener("transitionend",d.onSlideToWrapperTransitionEnd)),!0}function Rj(e=0,t=this.params.speed,r=!0,l){typeof e=="string"&&(e=parseInt(e,10));const c=this;let d=e;return c.params.loop&&(c.virtual&&c.params.virtual.enabled?d=d+c.virtual.slidesBefore:d=c.getSlideIndexByData(d)),c.slideTo(d,t,r,l)}function Bj(e=this.params.speed,t=!0,r){const l=this,{enabled:c,params:d,animating:m}=l;if(!c)return l;let n=d.slidesPerGroup;d.slidesPerView==="auto"&&d.slidesPerGroup===1&&d.slidesPerGroupAuto&&(n=Math.max(l.slidesPerViewDynamic("current",!0),1));const T=l.activeIndex<d.slidesPerGroupSkip?1:n,V=l.virtual&&d.virtual.enabled;if(d.loop){if(m&&!V&&d.loopPreventsSliding)return!1;l.loopFix({direction:"next"}),l._clientLeft=l.wrapperEl.clientLeft}return d.rewind&&l.isEnd?l.slideTo(0,e,t,r):l.slideTo(l.activeIndex+T,e,t,r)}function zj(e=this.params.speed,t=!0,r){const l=this,{params:c,snapGrid:d,slidesGrid:m,rtlTranslate:n,enabled:T,animating:V}=l;if(!T)return l;const Q=l.virtual&&c.virtual.enabled;if(c.loop){if(V&&!Q&&c.loopPreventsSliding)return!1;l.loopFix({direction:"prev"}),l._clientLeft=l.wrapperEl.clientLeft}const z=n?l.translate:-l.translate;function W(M){return M<0?-Math.floor(Math.abs(M)):Math.floor(M)}const K=W(z),I=d.map(M=>W(M));let O=d[I.indexOf(K)-1];if(typeof O>"u"&&c.cssMode){let M;d.forEach((S,k)=>{K>=S&&(M=k)}),typeof M<"u"&&(O=d[M>0?M-1:M])}let $=0;if(typeof O<"u"&&($=m.indexOf(O),$<0&&($=l.activeIndex-1),c.slidesPerView==="auto"&&c.slidesPerGroup===1&&c.slidesPerGroupAuto&&($=$-l.slidesPerViewDynamic("previous",!0)+1,$=Math.max($,0))),c.rewind&&l.isBeginning){const M=l.params.virtual&&l.params.virtual.enabled&&l.virtual?l.virtual.slides.length-1:l.slides.length-1;return l.slideTo(M,e,t,r)}return l.slideTo($,e,t,r)}function Nj(e=this.params.speed,t=!0,r){const l=this;return l.slideTo(l.activeIndex,e,t,r)}function Fj(e=this.params.speed,t=!0,r,l=.5){const c=this;let d=c.activeIndex;const m=Math.min(c.params.slidesPerGroupSkip,d),n=m+Math.floor((d-m)/c.params.slidesPerGroup),T=c.rtlTranslate?c.translate:-c.translate;if(T>=c.snapGrid[n]){const V=c.snapGrid[n],Q=c.snapGrid[n+1];T-V>(Q-V)*l&&(d+=c.params.slidesPerGroup)}else{const V=c.snapGrid[n-1],Q=c.snapGrid[n];T-V<=(Q-V)*l&&(d-=c.params.slidesPerGroup)}return d=Math.max(d,0),d=Math.min(d,c.slidesGrid.length-1),c.slideTo(d,e,t,r)}function jj(){const e=this,{params:t,slidesEl:r}=e,l=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let c=e.clickedIndex,d;const m=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;d=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?c<e.loopedSlides-l/2||c>e.slides.length-e.loopedSlides+l/2?(e.loopFix(),c=e.getSlideIndex(Jh(r,`${m}[data-swiper-slide-index="${d}"]`)[0]),Gw(()=>{e.slideTo(c)})):e.slideTo(c):c>e.slides.length-l?(e.loopFix(),c=e.getSlideIndex(Jh(r,`${m}[data-swiper-slide-index="${d}"]`)[0]),Gw(()=>{e.slideTo(c)})):e.slideTo(c)}else e.slideTo(c)}const Uj={slideTo:Oj,slideToLoop:Rj,slideNext:Bj,slidePrev:zj,slideReset:Nj,slideToClosest:Fj,slideToClickedSlide:jj};function Gj(e){const t=this,{params:r,slidesEl:l}=t;if(!r.loop||t.virtual&&t.params.virtual.enabled)return;Jh(l,`.${r.slideClass}, swiper-slide`).forEach((d,m)=>{d.setAttribute("data-swiper-slide-index",m)}),t.loopFix({slideRealIndex:e,direction:r.centeredSlides?void 0:"next"})}function Vj({slideRealIndex:e,slideTo:t=!0,direction:r,setTranslate:l,activeSlideIndex:c,byController:d,byMousewheel:m}={}){const n=this;if(!n.params.loop)return;n.emit("beforeLoopFix");const{slides:T,allowSlidePrev:V,allowSlideNext:Q,slidesEl:z,params:W}=n;if(n.allowSlidePrev=!0,n.allowSlideNext=!0,n.virtual&&W.virtual.enabled){t&&(!W.centeredSlides&&n.snapIndex===0?n.slideTo(n.virtual.slides.length,0,!1,!0):W.centeredSlides&&n.snapIndex<W.slidesPerView?n.slideTo(n.virtual.slides.length+n.snapIndex,0,!1,!0):n.snapIndex===n.snapGrid.length-1&&n.slideTo(n.virtual.slidesBefore,0,!1,!0)),n.allowSlidePrev=V,n.allowSlideNext=Q,n.emit("loopFix");return}const K=W.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(W.slidesPerView,10));let I=W.loopedSlides||K;I%W.slidesPerGroup!==0&&(I+=W.slidesPerGroup-I%W.slidesPerGroup),n.loopedSlides=I;const O=[],$=[];let M=n.activeIndex;typeof c>"u"?c=n.getSlideIndex(n.slides.filter(C=>C.classList.contains(W.slideActiveClass))[0]):M=c;const S=r==="next"||!r,k=r==="prev"||!r;let G=0,U=0;if(c<I){G=Math.max(I-c,W.slidesPerGroup);for(let C=0;C<I-c;C+=1){const ie=C-Math.floor(C/T.length)*T.length;O.push(T.length-ie-1)}}else if(c>n.slides.length-I*2){U=Math.max(c-(n.slides.length-I*2),W.slidesPerGroup);for(let C=0;C<U;C+=1){const ie=C-Math.floor(C/T.length)*T.length;$.push(ie)}}if(k&&O.forEach(C=>{n.slides[C].swiperLoopMoveDOM=!0,z.prepend(n.slides[C]),n.slides[C].swiperLoopMoveDOM=!1}),S&&$.forEach(C=>{n.slides[C].swiperLoopMoveDOM=!0,z.append(n.slides[C]),n.slides[C].swiperLoopMoveDOM=!1}),n.recalcSlides(),W.slidesPerView==="auto"&&n.updateSlides(),W.watchSlidesProgress&&n.updateSlidesOffset(),t){if(O.length>0&&k)if(typeof e>"u"){const C=n.slidesGrid[M],J=n.slidesGrid[M+G]-C;m?n.setTranslate(n.translate-J):(n.slideTo(M+G,0,!1,!0),l&&(n.touches[n.isHorizontal()?"startX":"startY"]+=J))}else l&&n.slideToLoop(e,0,!1,!0);else if($.length>0&&S)if(typeof e>"u"){const C=n.slidesGrid[M],J=n.slidesGrid[M-U]-C;m?n.setTranslate(n.translate-J):(n.slideTo(M-U,0,!1,!0),l&&(n.touches[n.isHorizontal()?"startX":"startY"]+=J))}else n.slideToLoop(e,0,!1,!0)}if(n.allowSlidePrev=V,n.allowSlideNext=Q,n.controller&&n.controller.control&&!d){const C={slideRealIndex:e,slideTo:!1,direction:r,setTranslate:l,activeSlideIndex:c,byController:!0};Array.isArray(n.controller.control)?n.controller.control.forEach(ie=>{!ie.destroyed&&ie.params.loop&&ie.loopFix(C)}):n.controller.control instanceof n.constructor&&n.controller.control.params.loop&&n.controller.control.loopFix(C)}n.emit("loopFix")}function $j(){const e=this,{params:t,slidesEl:r}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const l=[];e.slides.forEach(c=>{const d=typeof c.swiperSlideIndex>"u"?c.getAttribute("data-swiper-slide-index")*1:c.swiperSlideIndex;l[d]=c}),e.slides.forEach(c=>{c.removeAttribute("data-swiper-slide-index")}),l.forEach(c=>{r.append(c)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}const Hj={loopCreate:Gj,loopFix:Vj,loopDestroy:$j};function Wj(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const r=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),r.style.cursor="move",r.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function Yj(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}const Xj={setGrabCursor:Wj,unsetGrabCursor:Yj};function qj(e,t=this){function r(l){if(!l||l===$f()||l===dc())return null;l.assignedSlot&&(l=l.assignedSlot);const c=l.closest(e);return!c&&!l.getRootNode?null:c||r(l.getRootNode().host)}return r(t)}function Zj(e){const t=this,r=$f(),l=dc(),c=t.touchEventsData;c.evCache.push(e);const{params:d,touches:m,enabled:n}=t;if(!n||!d.simulateTouch&&e.pointerType==="mouse"||t.animating&&d.preventInteractionOnTransition)return;!t.animating&&d.cssMode&&d.loop&&t.loopFix();let T=e;T.originalEvent&&(T=T.originalEvent);let V=T.target;if(d.touchEventsTarget==="wrapper"&&!t.wrapperEl.contains(V)||"which"in T&&T.which===3||"button"in T&&T.button>0||c.isTouched&&c.isMoved)return;const Q=!!d.noSwipingClass&&d.noSwipingClass!=="",z=e.composedPath?e.composedPath():e.path;Q&&T.target&&T.target.shadowRoot&&z&&(V=z[0]);const W=d.noSwipingSelector?d.noSwipingSelector:`.${d.noSwipingClass}`,K=!!(T.target&&T.target.shadowRoot);if(d.noSwiping&&(K?qj(W,V):V.closest(W))){t.allowClick=!0;return}if(d.swipeHandler&&!V.closest(d.swipeHandler))return;m.currentX=T.pageX,m.currentY=T.pageY;const I=m.currentX,O=m.currentY,$=d.edgeSwipeDetection||d.iOSEdgeSwipeDetection,M=d.edgeSwipeThreshold||d.iOSEdgeSwipeThreshold;if($&&(I<=M||I>=l.innerWidth-M))if($==="prevent")e.preventDefault();else return;Object.assign(c,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),m.startX=I,m.startY=O,c.touchStartTime=Pv(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,d.threshold>0&&(c.allowThresholdMove=!1);let S=!0;V.matches(c.focusableElements)&&(S=!1,V.nodeName==="SELECT"&&(c.isTouched=!1)),r.activeElement&&r.activeElement.matches(c.focusableElements)&&r.activeElement!==V&&r.activeElement.blur();const k=S&&t.allowTouchMove&&d.touchStartPreventDefault;(d.touchStartForcePreventDefault||k)&&!V.isContentEditable&&T.preventDefault(),t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!d.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",T)}function Kj(e){const t=$f(),r=this,l=r.touchEventsData,{params:c,touches:d,rtlTranslate:m,enabled:n}=r;if(!n||!c.simulateTouch&&e.pointerType==="mouse")return;let T=e;if(T.originalEvent&&(T=T.originalEvent),!l.isTouched){l.startMoving&&l.isScrolling&&r.emit("touchMoveOpposite",T);return}const V=l.evCache.findIndex(C=>C.pointerId===T.pointerId);V>=0&&(l.evCache[V]=T);const Q=l.evCache.length>1?l.evCache[0]:T,z=Q.pageX,W=Q.pageY;if(T.preventedByNestedSwiper){d.startX=z,d.startY=W;return}if(!r.allowTouchMove){T.target.matches(l.focusableElements)||(r.allowClick=!1),l.isTouched&&(Object.assign(d,{startX:z,startY:W,prevX:r.touches.currentX,prevY:r.touches.currentY,currentX:z,currentY:W}),l.touchStartTime=Pv());return}if(c.touchReleaseOnEdges&&!c.loop){if(r.isVertical()){if(W<d.startY&&r.translate<=r.maxTranslate()||W>d.startY&&r.translate>=r.minTranslate()){l.isTouched=!1,l.isMoved=!1;return}}else if(z<d.startX&&r.translate<=r.maxTranslate()||z>d.startX&&r.translate>=r.minTranslate())return}if(t.activeElement&&T.target===t.activeElement&&T.target.matches(l.focusableElements)){l.isMoved=!0,r.allowClick=!1;return}if(l.allowTouchCallbacks&&r.emit("touchMove",T),T.targetTouches&&T.targetTouches.length>1)return;d.currentX=z,d.currentY=W;const K=d.currentX-d.startX,I=d.currentY-d.startY;if(r.params.threshold&&Math.sqrt(K**2+I**2)<r.params.threshold)return;if(typeof l.isScrolling>"u"){let C;r.isHorizontal()&&d.currentY===d.startY||r.isVertical()&&d.currentX===d.startX?l.isScrolling=!1:K*K+I*I>=25&&(C=Math.atan2(Math.abs(I),Math.abs(K))*180/Math.PI,l.isScrolling=r.isHorizontal()?C>c.touchAngle:90-C>c.touchAngle)}if(l.isScrolling&&r.emit("touchMoveOpposite",T),typeof l.startMoving>"u"&&(d.currentX!==d.startX||d.currentY!==d.startY)&&(l.startMoving=!0),l.isScrolling||r.zoom&&r.params.zoom&&r.params.zoom.enabled&&l.evCache.length>1){l.isTouched=!1;return}if(!l.startMoving)return;r.allowClick=!1,!c.cssMode&&T.cancelable&&T.preventDefault(),c.touchMoveStopPropagation&&!c.nested&&T.stopPropagation();let O=r.isHorizontal()?K:I,$=r.isHorizontal()?d.currentX-d.previousX:d.currentY-d.previousY;c.oneWayMovement&&(O=Math.abs(O)*(m?1:-1),$=Math.abs($)*(m?1:-1)),d.diff=O,O*=c.touchRatio,m&&(O=-O,$=-$);const M=r.touchesDirection;r.swipeDirection=O>0?"prev":"next",r.touchesDirection=$>0?"prev":"next";const S=r.params.loop&&!c.cssMode;if(!l.isMoved){if(S&&r.loopFix({direction:r.swipeDirection}),l.startTranslate=r.getTranslate(),r.setTransition(0),r.animating){const C=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});r.wrapperEl.dispatchEvent(C)}l.allowMomentumBounce=!1,c.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",T)}let k;l.isMoved&&M!==r.touchesDirection&&S&&Math.abs(O)>=1&&(r.loopFix({direction:r.swipeDirection,setTranslate:!0}),k=!0),r.emit("sliderMove",T),l.isMoved=!0,l.currentTranslate=O+l.startTranslate;let G=!0,U=c.resistanceRatio;if(c.touchReleaseOnEdges&&(U=0),O>0?(S&&!k&&l.currentTranslate>(c.centeredSlides?r.minTranslate()-r.size/2:r.minTranslate())&&r.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),l.currentTranslate>r.minTranslate()&&(G=!1,c.resistance&&(l.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+l.startTranslate+O)**U))):O<0&&(S&&!k&&l.currentTranslate<(c.centeredSlides?r.maxTranslate()+r.size/2:r.maxTranslate())&&r.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:r.slides.length-(c.slidesPerView==="auto"?r.slidesPerViewDynamic():Math.ceil(parseFloat(c.slidesPerView,10)))}),l.currentTranslate<r.maxTranslate()&&(G=!1,c.resistance&&(l.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-l.startTranslate-O)**U))),G&&(T.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&l.currentTranslate<l.startTranslate&&(l.currentTranslate=l.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&l.currentTranslate>l.startTranslate&&(l.currentTranslate=l.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(l.currentTranslate=l.startTranslate),c.threshold>0)if(Math.abs(O)>c.threshold||l.allowThresholdMove){if(!l.allowThresholdMove){l.allowThresholdMove=!0,d.startX=d.currentX,d.startY=d.currentY,l.currentTranslate=l.startTranslate,d.diff=r.isHorizontal()?d.currentX-d.startX:d.currentY-d.startY;return}}else{l.currentTranslate=l.startTranslate;return}!c.followFinger||c.cssMode||((c.freeMode&&c.freeMode.enabled&&r.freeMode||c.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),r.params.freeMode&&c.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(l.currentTranslate),r.setTranslate(l.currentTranslate))}function Jj(e){const t=this,r=t.touchEventsData,l=r.evCache.findIndex(k=>k.pointerId===e.pointerId);if(l>=0&&r.evCache.splice(l,1),["pointercancel","pointerout","pointerleave"].includes(e.type)&&!(e.type==="pointercancel"&&(t.browser.isSafari||t.browser.isWebView)))return;const{params:c,touches:d,rtlTranslate:m,slidesGrid:n,enabled:T}=t;if(!T||!c.simulateTouch&&e.pointerType==="mouse")return;let V=e;if(V.originalEvent&&(V=V.originalEvent),r.allowTouchCallbacks&&t.emit("touchEnd",V),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&c.grabCursor&&t.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}c.grabCursor&&r.isMoved&&r.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const Q=Pv(),z=Q-r.touchStartTime;if(t.allowClick){const k=V.path||V.composedPath&&V.composedPath();t.updateClickedSlide(k&&k[0]||V.target),t.emit("tap click",V),z<300&&Q-r.lastClickTime<300&&t.emit("doubleTap doubleClick",V)}if(r.lastClickTime=Pv(),Gw(()=>{t.destroyed||(t.allowClick=!0)}),!r.isTouched||!r.isMoved||!t.swipeDirection||d.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;let W;if(c.followFinger?W=m?t.translate:-t.translate:W=-r.currentTranslate,c.cssMode)return;if(t.params.freeMode&&c.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:W});return}let K=0,I=t.slidesSizesGrid[0];for(let k=0;k<n.length;k+=k<c.slidesPerGroupSkip?1:c.slidesPerGroup){const G=k<c.slidesPerGroupSkip-1?1:c.slidesPerGroup;typeof n[k+G]<"u"?W>=n[k]&&W<n[k+G]&&(K=k,I=n[k+G]-n[k]):W>=n[k]&&(K=k,I=n[n.length-1]-n[n.length-2])}let O=null,$=null;c.rewind&&(t.isBeginning?$=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(O=0));const M=(W-n[K])/I,S=K<c.slidesPerGroupSkip-1?1:c.slidesPerGroup;if(z>c.longSwipesMs){if(!c.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(M>=c.longSwipesRatio?t.slideTo(c.rewind&&t.isEnd?O:K+S):t.slideTo(K)),t.swipeDirection==="prev"&&(M>1-c.longSwipesRatio?t.slideTo(K+S):$!==null&&M<0&&Math.abs(M)>c.longSwipesRatio?t.slideTo($):t.slideTo(K))}else{if(!c.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(V.target===t.navigation.nextEl||V.target===t.navigation.prevEl)?V.target===t.navigation.nextEl?t.slideTo(K+S):t.slideTo(K):(t.swipeDirection==="next"&&t.slideTo(O!==null?O:K+S),t.swipeDirection==="prev"&&t.slideTo($!==null?$:K))}}function A5(){const e=this,{params:t,el:r}=e;if(r&&r.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:l,allowSlidePrev:c,snapGrid:d}=e,m=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const n=m&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!n?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!m?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=c,e.allowSlideNext=l,e.params.watchOverflow&&d!==e.snapGrid&&e.checkOverflow()}function Qj(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function eU(){const e=this,{wrapperEl:t,rtlTranslate:r,enabled:l}=e;if(!l)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let c;const d=e.maxTranslate()-e.minTranslate();d===0?c=0:c=(e.translate-e.minTranslate())/d,c!==e.progress&&e.updateProgress(r?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function tU(e){const t=this;Jy(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}let k5=!1;function iU(){}const xA=(e,t)=>{const r=$f(),{params:l,el:c,wrapperEl:d,device:m}=e,n=!!l.nested,T=t==="on"?"addEventListener":"removeEventListener",V=t;c[T]("pointerdown",e.onTouchStart,{passive:!1}),r[T]("pointermove",e.onTouchMove,{passive:!1,capture:n}),r[T]("pointerup",e.onTouchEnd,{passive:!0}),r[T]("pointercancel",e.onTouchEnd,{passive:!0}),r[T]("pointerout",e.onTouchEnd,{passive:!0}),r[T]("pointerleave",e.onTouchEnd,{passive:!0}),(l.preventClicks||l.preventClicksPropagation)&&c[T]("click",e.onClick,!0),l.cssMode&&d[T]("scroll",e.onScroll),l.updateOnWindowResize?e[V](m.ios||m.android?"resize orientationchange observerUpdate":"resize observerUpdate",A5,!0):e[V]("observerUpdate",A5,!0),c[T]("load",e.onLoad,{capture:!0})};function nU(){const e=this,t=$f(),{params:r}=e;e.onTouchStart=Zj.bind(e),e.onTouchMove=Kj.bind(e),e.onTouchEnd=Jj.bind(e),r.cssMode&&(e.onScroll=eU.bind(e)),e.onClick=Qj.bind(e),e.onLoad=tU.bind(e),k5||(t.addEventListener("touchstart",iU),k5=!0),xA(e,"on")}function rU(){xA(this,"off")}const sU={attachEvents:nU,detachEvents:rU},P5=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function oU(){const e=this,{realIndex:t,initialized:r,params:l,el:c}=e,d=l.breakpoints;if(!d||d&&Object.keys(d).length===0)return;const m=e.getBreakpoint(d,e.params.breakpointsBase,e.el);if(!m||e.currentBreakpoint===m)return;const T=(m in d?d[m]:void 0)||e.originalParams,V=P5(e,l),Q=P5(e,T),z=l.enabled;V&&!Q?(c.classList.remove(`${l.containerModifierClass}grid`,`${l.containerModifierClass}grid-column`),e.emitContainerClasses()):!V&&Q&&(c.classList.add(`${l.containerModifierClass}grid`),(T.grid.fill&&T.grid.fill==="column"||!T.grid.fill&&l.grid.fill==="column")&&c.classList.add(`${l.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(O=>{const $=l[O]&&l[O].enabled,M=T[O]&&T[O].enabled;$&&!M&&e[O].disable(),!$&&M&&e[O].enable()});const W=T.direction&&T.direction!==l.direction,K=l.loop&&(T.slidesPerView!==l.slidesPerView||W);W&&r&&e.changeDirection(),nc(e.params,T);const I=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),z&&!I?e.disable():!z&&I&&e.enable(),e.currentBreakpoint=m,e.emit("_beforeBreakpoint",T),K&&r&&(e.loopDestroy(),e.loopCreate(t),e.updateSlides()),e.emit("breakpoint",T)}function aU(e,t="window",r){if(!e||t==="container"&&!r)return;let l=!1;const c=dc(),d=t==="window"?c.innerHeight:r.clientHeight,m=Object.keys(e).map(n=>{if(typeof n=="string"&&n.indexOf("@")===0){const T=parseFloat(n.substr(1));return{value:d*T,point:n}}return{value:n,point:n}});m.sort((n,T)=>parseInt(n.value,10)-parseInt(T.value,10));for(let n=0;n<m.length;n+=1){const{point:T,value:V}=m[n];t==="window"?c.matchMedia(`(min-width: ${V}px)`).matches&&(l=T):V<=r.clientWidth&&(l=T)}return l||"max"}const lU={setBreakpoint:oU,getBreakpoint:aU};function cU(e,t){const r=[];return e.forEach(l=>{typeof l=="object"?Object.keys(l).forEach(c=>{l[c]&&r.push(t+c)}):typeof l=="string"&&r.push(t+l)}),r}function hU(){const e=this,{classNames:t,params:r,rtl:l,el:c,device:d}=e,m=cU(["initialized",r.direction,{"free-mode":e.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:l},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&r.grid.fill==="column"},{android:d.android},{ios:d.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides},{"watch-progress":r.watchSlidesProgress}],r.containerModifierClass);t.push(...m),c.classList.add(...t),e.emitContainerClasses()}function dU(){const e=this,{el:t,classNames:r}=e;t.classList.remove(...r),e.emitContainerClasses()}const uU={addClasses:hU,removeClasses:dU};function pU(){const e=this,{isLocked:t,params:r}=e,{slidesOffsetBefore:l}=r;if(l){const c=e.slides.length-1,d=e.slidesGrid[c]+e.slidesSizesGrid[c]+l*2;e.isLocked=e.size>d}else e.isLocked=e.snapGrid.length===1;r.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),r.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const fU={checkOverflow:pU},D5={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function mU(e,t){return function(l={}){const c=Object.keys(l)[0],d=l[c];if(typeof d!="object"||d===null){nc(t,l);return}if(["navigation","pagination","scrollbar"].indexOf(c)>=0&&e[c]===!0&&(e[c]={auto:!0}),!(c in e&&"enabled"in d)){nc(t,l);return}e[c]===!0&&(e[c]={enabled:!0}),typeof e[c]=="object"&&!("enabled"in e[c])&&(e[c].enabled=!0),e[c]||(e[c]={enabled:!1}),nc(t,l)}}const qb={eventsEmitter:uj,update:Tj,translate:kj,transition:Lj,slide:Uj,loop:Hj,grabCursor:Xj,events:sU,breakpoints:lU,checkOverflow:fU,classes:uU},Zb={};let ic=class{constructor(...t){let r,l;t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?l=t[0]:[r,l]=t,l||(l={}),l=nc({},l),r&&!l.el&&(l.el=r);const c=$f();if(l.el&&typeof l.el=="string"&&c.querySelectorAll(l.el).length>1){const T=[];return c.querySelectorAll(l.el).forEach(V=>{const Q=nc({},l,{el:V});T.push(new ic(Q))}),T}const d=this;d.__swiper__=!0,d.support=yA(),d.device=aj({userAgent:l.userAgent}),d.browser=cj(),d.eventsListeners={},d.eventsAnyListeners=[],d.modules=[...d.__modules__],l.modules&&Array.isArray(l.modules)&&d.modules.push(...l.modules);const m={};d.modules.forEach(T=>{T({params:l,swiper:d,extendParams:mU(l,m),on:d.on.bind(d),once:d.once.bind(d),off:d.off.bind(d),emit:d.emit.bind(d)})});const n=nc({},D5,m);return d.params=nc({},n,Zb,l),d.originalParams=nc({},d.params),d.passedParams=nc({},l),d.params&&d.params.on&&Object.keys(d.params.on).forEach(T=>{d.on(T,d.params.on[T])}),d.params&&d.params.onAny&&d.onAny(d.params.onAny),Object.assign(d,{enabled:d.params.enabled,el:r,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return d.params.direction==="horizontal"},isVertical(){return d.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:d.params.allowSlideNext,allowSlidePrev:d.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:d.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:d.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),d.emit("_swiper"),d.params.init&&d.init(),d}getSlideIndex(t){const{slidesEl:r,params:l}=this,c=Jh(r,`.${l.slideClass}, swiper-slide`),d=Vw(c[0]);return Vw(t)-d}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter(r=>r.getAttribute("data-swiper-slide-index")*1===t)[0])}recalcSlides(){const t=this,{slidesEl:r,params:l}=t;t.slides=Jh(r,`.${l.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,r){const l=this;t=Math.min(Math.max(t,0),1);const c=l.minTranslate(),m=(l.maxTranslate()-c)*t+c;l.translateTo(m,typeof r>"u"?0:r),l.updateActiveIndex(),l.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const r=t.el.className.split(" ").filter(l=>l.indexOf("swiper")===0||l.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",r.join(" "))}getSlideClasses(t){const r=this;return r.destroyed?"":t.className.split(" ").filter(l=>l.indexOf("swiper-slide")===0||l.indexOf(r.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const r=[];t.slides.forEach(l=>{const c=t.getSlideClasses(l);r.push({slideEl:l,classNames:c}),t.emit("_slideClass",l,c)}),t.emit("_slideClasses",r)}slidesPerViewDynamic(t="current",r=!1){const l=this,{params:c,slides:d,slidesGrid:m,slidesSizesGrid:n,size:T,activeIndex:V}=l;let Q=1;if(c.centeredSlides){let z=d[V].swiperSlideSize,W;for(let K=V+1;K<d.length;K+=1)d[K]&&!W&&(z+=d[K].swiperSlideSize,Q+=1,z>T&&(W=!0));for(let K=V-1;K>=0;K-=1)d[K]&&!W&&(z+=d[K].swiperSlideSize,Q+=1,z>T&&(W=!0))}else if(t==="current")for(let z=V+1;z<d.length;z+=1)(r?m[z]+n[z]-m[V]<T:m[z]-m[V]<T)&&(Q+=1);else for(let z=V-1;z>=0;z-=1)m[V]-m[z]<T&&(Q+=1);return Q}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:r,params:l}=t;l.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(m=>{m.complete&&Jy(t,m)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function c(){const m=t.rtlTranslate?t.translate*-1:t.translate,n=Math.min(Math.max(m,t.maxTranslate()),t.minTranslate());t.setTranslate(n),t.updateActiveIndex(),t.updateSlidesClasses()}let d;if(t.params.freeMode&&t.params.freeMode.enabled)c(),t.params.autoHeight&&t.updateAutoHeight();else{if((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides){const m=t.virtual&&t.params.virtual.enabled?t.virtual.slides:t.slides;d=t.slideTo(m.length-1,0,!1,!0)}else d=t.slideTo(t.activeIndex,0,!1,!0);d||c()}l.watchOverflow&&r!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,r=!0){const l=this,c=l.params.direction;return t||(t=c==="horizontal"?"vertical":"horizontal"),t===c||t!=="horizontal"&&t!=="vertical"||(l.el.classList.remove(`${l.params.containerModifierClass}${c}`),l.el.classList.add(`${l.params.containerModifierClass}${t}`),l.emitContainerClasses(),l.params.direction=t,l.slides.forEach(d=>{t==="vertical"?d.style.width="":d.style.height=""}),l.emit("changeDirection"),r&&l.update()),l}changeLanguageDirection(t){const r=this;r.rtl&&t==="rtl"||!r.rtl&&t==="ltr"||(r.rtl=t==="rtl",r.rtlTranslate=r.params.direction==="horizontal"&&r.rtl,r.rtl?(r.el.classList.add(`${r.params.containerModifierClass}rtl`),r.el.dir="rtl"):(r.el.classList.remove(`${r.params.containerModifierClass}rtl`),r.el.dir="ltr"),r.update())}mount(t){const r=this;if(r.mounted)return!0;let l=t||r.params.el;if(typeof l=="string"&&(l=document.querySelector(l)),!l)return!1;l.swiper=r,l.shadowEl&&(r.isElement=!0);const c=()=>`.${(r.params.wrapperClass||"").trim().split(" ").join(".")}`;let m=(()=>l&&l.shadowRoot&&l.shadowRoot.querySelector?l.shadowRoot.querySelector(c()):Jh(l,c())[0])();return!m&&r.params.createElements&&(m=LT("div",r.params.wrapperClass),l.append(m),Jh(l,`.${r.params.slideClass}`).forEach(n=>{m.append(n)})),Object.assign(r,{el:l,wrapperEl:m,slidesEl:r.isElement?l:m,mounted:!0,rtl:l.dir.toLowerCase()==="rtl"||Zu(l,"direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(l.dir.toLowerCase()==="rtl"||Zu(l,"direction")==="rtl"),wrongRTL:Zu(m,"display")==="-webkit-box"}),!0}init(t){const r=this;return r.initialized||r.mount(t)===!1||(r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.loop&&r.virtual&&r.params.virtual.enabled?r.slideTo(r.params.initialSlide+r.virtual.slidesBefore,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.params.loop&&r.loopCreate(),r.attachEvents(),[...r.el.querySelectorAll('[loading="lazy"]')].forEach(c=>{c.complete?Jy(r,c):c.addEventListener("load",d=>{Jy(r,d.target)})}),$w(r),r.initialized=!0,$w(r),r.emit("init"),r.emit("afterInit")),r}destroy(t=!0,r=!0){const l=this,{params:c,el:d,wrapperEl:m,slides:n}=l;return typeof l.params>"u"||l.destroyed||(l.emit("beforeDestroy"),l.initialized=!1,l.detachEvents(),c.loop&&l.loopDestroy(),r&&(l.removeClasses(),d.removeAttribute("style"),m.removeAttribute("style"),n&&n.length&&n.forEach(T=>{T.classList.remove(c.slideVisibleClass,c.slideActiveClass,c.slideNextClass,c.slidePrevClass),T.removeAttribute("style"),T.removeAttribute("data-swiper-slide-index")})),l.emit("destroy"),Object.keys(l.eventsListeners).forEach(T=>{l.off(T)}),t!==!1&&(l.el.swiper=null,JF(l)),l.destroyed=!0),null}static extendDefaults(t){nc(Zb,t)}static get extendedDefaults(){return Zb}static get defaults(){return D5}static installModule(t){ic.prototype.__modules__||(ic.prototype.__modules__=[]);const r=ic.prototype.__modules__;typeof t=="function"&&r.indexOf(t)<0&&r.push(t)}static use(t){return Array.isArray(t)?(t.forEach(r=>ic.installModule(r)),ic):(ic.installModule(t),ic)}};Object.keys(qb).forEach(e=>{Object.keys(qb[e]).forEach(t=>{ic.prototype[t]=qb[e][t]})});ic.use([hj,dj]);function gU(e,t,r,l){return e.params.createElements&&Object.keys(l).forEach(c=>{if(!r[c]&&r.auto===!0){let d=Jh(e.el,`.${l[c]}`)[0];d||(d=LT("div",l[c]),d.className=l[c],e.el.append(d)),r[c]=d,t[c]=d}}),r}function _U({swiper:e,extendParams:t,on:r,emit:l}){t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const c=I=>(Array.isArray(I)||(I=[I].filter(O=>!!O)),I);function d(I){let O;return I&&typeof I=="string"&&e.isElement&&(O=e.el.shadowRoot.querySelector(I),O)?O:(I&&(typeof I=="string"&&(O=[...document.querySelectorAll(I)]),e.params.uniqueNavElements&&typeof I=="string"&&O.length>1&&e.el.querySelectorAll(I).length===1&&(O=e.el.querySelector(I))),I&&!O?I:O)}function m(I,O){const $=e.params.navigation;I=c(I),I.forEach(M=>{M&&(M.classList[O?"add":"remove"](...$.disabledClass.split(" ")),M.tagName==="BUTTON"&&(M.disabled=O),e.params.watchOverflow&&e.enabled&&M.classList[e.isLocked?"add":"remove"]($.lockClass))})}function n(){const{nextEl:I,prevEl:O}=e.navigation;if(e.params.loop){m(O,!1),m(I,!1);return}m(O,e.isBeginning&&!e.params.rewind),m(I,e.isEnd&&!e.params.rewind)}function T(I){I.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),l("navigationPrev"))}function V(I){I.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),l("navigationNext"))}function Q(){const I=e.params.navigation;if(e.params.navigation=gU(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(I.nextEl||I.prevEl))return;let O=d(I.nextEl),$=d(I.prevEl);Object.assign(e.navigation,{nextEl:O,prevEl:$}),O=c(O),$=c($);const M=(S,k)=>{S&&S.addEventListener("click",k==="next"?V:T),!e.enabled&&S&&S.classList.add(...I.lockClass.split(" "))};O.forEach(S=>M(S,"next")),$.forEach(S=>M(S,"prev"))}function z(){let{nextEl:I,prevEl:O}=e.navigation;I=c(I),O=c(O);const $=(M,S)=>{M.removeEventListener("click",S==="next"?V:T),M.classList.remove(...e.params.navigation.disabledClass.split(" "))};I.forEach(M=>$(M,"next")),O.forEach(M=>$(M,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?K():(Q(),n())}),r("toEdge fromEdge lock unlock",()=>{n()}),r("destroy",()=>{z()}),r("enable disable",()=>{let{nextEl:I,prevEl:O}=e.navigation;I=c(I),O=c(O),[...I,...O].filter($=>!!$).forEach($=>$.classList[e.enabled?"remove":"add"](e.params.navigation.lockClass))}),r("click",(I,O)=>{let{nextEl:$,prevEl:M}=e.navigation;$=c($),M=c(M);const S=O.target;if(e.params.navigation.hideOnClick&&!M.includes(S)&&!$.includes(S)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===S||e.pagination.el.contains(S)))return;let k;$.length?k=$[0].classList.contains(e.params.navigation.hiddenClass):M.length&&(k=M[0].classList.contains(e.params.navigation.hiddenClass)),l(k===!0?"navigationShow":"navigationHide"),[...$,...M].filter(G=>!!G).forEach(G=>G.classList.toggle(e.params.navigation.hiddenClass))}});const W=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),Q(),n()},K=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),z()};Object.assign(e.navigation,{enable:W,disable:K,update:n,init:Q,destroy:z})}function Kb(e=""){return`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function yU({swiper:e,extendParams:t,on:r}){t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let l=null;function c(L){const f=l;f.length!==0&&(f.innerHTML="",f.innerHTML=L)}const d=L=>(Array.isArray(L)||(L=[L].filter(f=>!!f)),L);function m(L=16){const f=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(L).replace(/x/g,f)}function n(L){L=d(L),L.forEach(f=>{f.setAttribute("tabIndex","0")})}function T(L){L=d(L),L.forEach(f=>{f.setAttribute("tabIndex","-1")})}function V(L,f){L=d(L),L.forEach(y=>{y.setAttribute("role",f)})}function Q(L,f){L=d(L),L.forEach(y=>{y.setAttribute("aria-roledescription",f)})}function z(L,f){L=d(L),L.forEach(y=>{y.setAttribute("aria-controls",f)})}function W(L,f){L=d(L),L.forEach(y=>{y.setAttribute("aria-label",f)})}function K(L,f){L=d(L),L.forEach(y=>{y.setAttribute("id",f)})}function I(L,f){L=d(L),L.forEach(y=>{y.setAttribute("aria-live",f)})}function O(L){L=d(L),L.forEach(f=>{f.setAttribute("aria-disabled",!0)})}function $(L){L=d(L),L.forEach(f=>{f.setAttribute("aria-disabled",!1)})}function M(L){if(L.keyCode!==13&&L.keyCode!==32)return;const f=e.params.a11y,y=L.target;e.pagination&&e.pagination.el&&(y===e.pagination.el||e.pagination.el.contains(L.target))&&!L.target.matches(Kb(e.params.pagination.bulletClass))||(e.navigation&&e.navigation.nextEl&&y===e.navigation.nextEl&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?c(f.lastSlideMessage):c(f.nextSlideMessage)),e.navigation&&e.navigation.prevEl&&y===e.navigation.prevEl&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?c(f.firstSlideMessage):c(f.prevSlideMessage)),e.pagination&&y.matches(Kb(e.params.pagination.bulletClass))&&y.click())}function S(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:L,prevEl:f}=e.navigation;f&&(e.isBeginning?(O(f),T(f)):($(f),n(f))),L&&(e.isEnd?(O(L),T(L)):($(L),n(L)))}function k(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function G(){return k()&&e.params.pagination.clickable}function U(){const L=e.params.a11y;k()&&e.pagination.bullets.forEach(f=>{e.params.pagination.clickable&&(n(f),e.params.pagination.renderBullet||(V(f,"button"),W(f,L.paginationBulletMessage.replace(/\{\{index\}\}/,Vw(f)+1)))),f.matches(Kb(e.params.pagination.bulletActiveClass))?f.setAttribute("aria-current","true"):f.removeAttribute("aria-current")})}const C=(L,f,y)=>{n(L),L.tagName!=="BUTTON"&&(V(L,"button"),L.addEventListener("keydown",M)),W(L,y),z(L,f)},ie=()=>{e.a11y.clicked=!0},J=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},N=L=>{if(e.a11y.clicked)return;const f=L.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!f||!e.slides.includes(f))return;const y=e.slides.indexOf(f)===e.activeIndex,b=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(f);y||b||L.sourceCapabilities&&L.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,e.slideTo(e.slides.indexOf(f),0))},F=()=>{const L=e.params.a11y;L.itemRoleDescriptionMessage&&Q(e.slides,L.itemRoleDescriptionMessage),L.slideRole&&V(e.slides,L.slideRole);const f=e.slides.length;L.slideLabelMessage&&e.slides.forEach((y,b)=>{const D=e.params.loop?parseInt(y.getAttribute("data-swiper-slide-index"),10):b,X=L.slideLabelMessage.replace(/\{\{index\}\}/,D+1).replace(/\{\{slidesLength\}\}/,f);W(y,X)})},H=()=>{const L=e.params.a11y;e.isElement?e.el.shadowEl.append(l):e.el.append(l);const f=e.el;L.containerRoleDescriptionMessage&&Q(f,L.containerRoleDescriptionMessage),L.containerMessage&&W(f,L.containerMessage);const y=e.wrapperEl,b=L.id||y.getAttribute("id")||`swiper-wrapper-${m(16)}`,D=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";K(y,b),I(y,D),F();let{nextEl:X,prevEl:te}=e.navigation?e.navigation:{};X=d(X),te=d(te),X&&X.forEach(q=>C(q,b,L.nextSlideMessage)),te&&te.forEach(q=>C(q,b,L.prevSlideMessage)),G()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(ce=>{ce.addEventListener("keydown",M)}),e.el.addEventListener("focus",N,!0),e.el.addEventListener("pointerdown",ie,!0),e.el.addEventListener("pointerup",J,!0)};function E(){l&&l.remove();let{nextEl:L,prevEl:f}=e.navigation?e.navigation:{};L=d(L),f=d(f),L&&L.forEach(y=>y.removeEventListener("keydown",M)),f&&f.forEach(y=>y.removeEventListener("keydown",M)),G()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(b=>{b.removeEventListener("keydown",M)}),e.el.removeEventListener("focus",N,!0),e.el.removeEventListener("pointerdown",ie,!0),e.el.removeEventListener("pointerup",J,!0)}r("beforeInit",()=>{l=LT("span",e.params.a11y.notificationClass),l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true")}),r("afterInit",()=>{e.params.a11y.enabled&&H()}),r("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&F()}),r("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&S()}),r("paginationUpdate",()=>{e.params.a11y.enabled&&U()}),r("destroy",()=>{e.params.a11y.enabled&&E()})}function Of(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function Ku(e,t){const r=["__proto__","constructor","prototype"];Object.keys(t).filter(l=>r.indexOf(l)<0).forEach(l=>{typeof e[l]>"u"?e[l]=t[l]:Of(t[l])&&Of(e[l])&&Object.keys(t[l]).length>0?t[l].__swiper__?e[l]=t[l]:Ku(e[l],t[l]):e[l]=t[l]})}function bA(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function wA(e={}){return e.pagination&&typeof e.pagination.el>"u"}function TA(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function SA(e=""){const t=e.split(" ").map(l=>l.trim()).filter(l=>!!l),r=[];return t.forEach(l=>{r.indexOf(l)<0&&r.push(l)}),r.join(" ")}function vU(e=""){return e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}const EA=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function I5(e={},t=!0){const r={on:{}},l={},c={};Ku(r,ic.defaults),Ku(r,ic.extendedDefaults),r._emitClasses=!0,r.init=!1;const d={},m=EA.map(T=>T.replace(/_/,"")),n=Object.assign({},e);return Object.keys(n).forEach(T=>{typeof e[T]>"u"||(m.indexOf(T)>=0?Of(e[T])?(r[T]={},c[T]={},Ku(r[T],e[T]),Ku(c[T],e[T])):(r[T]=e[T],c[T]=e[T]):T.search(/on[A-Z]/)===0&&typeof e[T]=="function"?t?l[`${T[2].toLowerCase()}${T.substr(3)}`]=e[T]:r.on[`${T[2].toLowerCase()}${T.substr(3)}`]=e[T]:d[T]=e[T])}),["navigation","pagination","scrollbar"].forEach(T=>{r[T]===!0&&(r[T]={}),r[T]===!1&&delete r[T]}),{params:r,passedParams:c,rest:d,events:l}}function xU({el:e,nextEl:t,prevEl:r,paginationEl:l,scrollbarEl:c,swiper:d},m){bA(m)&&t&&r&&(d.params.navigation.nextEl=t,d.originalParams.navigation.nextEl=t,d.params.navigation.prevEl=r,d.originalParams.navigation.prevEl=r),wA(m)&&l&&(d.params.pagination.el=l,d.originalParams.pagination.el=l),TA(m)&&c&&(d.params.scrollbar.el=c,d.originalParams.scrollbar.el=c),d.init(e)}function bU(e,t,r,l,c){const d=[];if(!t)return d;const m=T=>{d.indexOf(T)<0&&d.push(T)};if(r&&l){const T=l.map(c),V=r.map(c);T.join("")!==V.join("")&&m("children"),l.length!==r.length&&m("children")}return EA.filter(T=>T[0]==="_").map(T=>T.replace(/_/,"")).forEach(T=>{if(T in e&&T in t)if(Of(e[T])&&Of(t[T])){const V=Object.keys(e[T]),Q=Object.keys(t[T]);V.length!==Q.length?m(T):(V.forEach(z=>{e[T][z]!==t[T][z]&&m(T)}),Q.forEach(z=>{e[T][z]!==t[T][z]&&m(T)}))}else e[T]!==t[T]&&m(T)}),d}function Jb(e,t,r){e===void 0&&(e={});const l=[],c={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},d=(m,n)=>{Array.isArray(m)&&m.forEach(T=>{const V=typeof T.type=="symbol";n==="default"&&(n="container-end"),V&&T.children?d(T.children,n):T.type&&(T.type.name==="SwiperSlide"||T.type.name==="AsyncComponentWrapper")?l.push(T):c[n]&&c[n].push(T)})};return Object.keys(e).forEach(m=>{if(typeof e[m]!="function")return;const n=e[m]();d(n,m)}),r.value=t.value,t.value=l,{slides:l,slots:c}}function wU({swiper:e,slides:t,passedParams:r,changedParams:l,nextEl:c,prevEl:d,scrollbarEl:m,paginationEl:n}){const T=l.filter(J=>J!=="children"&&J!=="direction"&&J!=="wrapperClass"),{params:V,pagination:Q,navigation:z,scrollbar:W,virtual:K,thumbs:I}=e;let O,$,M,S,k,G,U,C;l.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&V.thumbs&&!V.thumbs.swiper&&(O=!0),l.includes("controller")&&r.controller&&r.controller.control&&V.controller&&!V.controller.control&&($=!0),l.includes("pagination")&&r.pagination&&(r.pagination.el||n)&&(V.pagination||V.pagination===!1)&&Q&&!Q.el&&(M=!0),l.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||m)&&(V.scrollbar||V.scrollbar===!1)&&W&&!W.el&&(S=!0),l.includes("navigation")&&r.navigation&&(r.navigation.prevEl||d)&&(r.navigation.nextEl||c)&&(V.navigation||V.navigation===!1)&&z&&!z.prevEl&&!z.nextEl&&(k=!0);const ie=J=>{e[J]&&(e[J].destroy(),J==="navigation"?(e.isElement&&(e[J].prevEl.remove(),e[J].nextEl.remove()),V[J].prevEl=void 0,V[J].nextEl=void 0,e[J].prevEl=void 0,e[J].nextEl=void 0):(e.isElement&&e[J].el.remove(),V[J].el=void 0,e[J].el=void 0))};l.includes("loop")&&e.isElement&&(V.loop&&!r.loop?G=!0:!V.loop&&r.loop?U=!0:C=!0),T.forEach(J=>{if(Of(V[J])&&Of(r[J]))Ku(V[J],r[J]),(J==="navigation"||J==="pagination"||J==="scrollbar")&&"enabled"in r[J]&&!r[J].enabled&&ie(J);else{const N=r[J];(N===!0||N===!1)&&(J==="navigation"||J==="pagination"||J==="scrollbar")?N===!1&&ie(J):V[J]=r[J]}}),T.includes("controller")&&!$&&e.controller&&e.controller.control&&V.controller&&V.controller.control&&(e.controller.control=V.controller.control),l.includes("children")&&t&&K&&V.virtual.enabled&&(K.slides=t,K.update(!0)),l.includes("children")&&t&&V.loop&&(C=!0),O&&I.init()&&I.update(!0),$&&(e.controller.control=V.controller.control),M&&(e.isElement&&(!n||typeof n=="string")&&(n=document.createElement("div"),n.classList.add("swiper-pagination"),e.el.shadowEl.appendChild(n)),n&&(V.pagination.el=n),Q.init(),Q.render(),Q.update()),S&&(e.isElement&&(!m||typeof m=="string")&&(m=document.createElement("div"),m.classList.add("swiper-scrollbar"),e.el.shadowEl.appendChild(m)),m&&(V.scrollbar.el=m),W.init(),W.updateSize(),W.setTranslate()),k&&(e.isElement&&((!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-button-next"),e.el.shadowEl.appendChild(c)),(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-button-prev"),e.el.shadowEl.appendChild(d))),c&&(V.navigation.nextEl=c),d&&(V.navigation.prevEl=d),z.init(),z.update()),l.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),l.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),l.includes("direction")&&e.changeDirection(r.direction,!1),(G||C)&&e.loopDestroy(),(U||C)&&e.loopCreate(),e.update()}function TU(e,t,r){if(!r)return null;const l=Q=>{let z=Q;return Q<0?z=t.length+Q:z>=t.length&&(z=z-t.length),z},c=e.value.isHorizontal()?{[e.value.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`},{from:d,to:m}=r,n=e.value.params.loop?-t.length:0,T=e.value.params.loop?t.length*2:t.length,V=[];for(let Q=n;Q<T;Q+=1)Q>=d&&Q<=m&&V.push(t[l(Q)]);return V.map(Q=>(Q.props||(Q.props={}),Q.props.style||(Q.props.style={}),Q.props.swiperRef=e,Q.props.style=c,xl(Q.type,{...Q.props},Q.children)))}const SU=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},EU={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(e,t){let{slots:r,emit:l}=t;const{tag:c,wrapperTag:d}=e,m=Zs("swiper"),n=Zs(null),T=Zs(!1),V=Zs(!1),Q=Zs(null),z=Zs(null),W=Zs(null),K={value:[]},I={value:[]},O=Zs(null),$=Zs(null),M=Zs(null),S=Zs(null),{params:k,passedParams:G}=I5(e,!1);Jb(r,K,I),W.value=G,I.value=K.value;const U=()=>{Jb(r,K,I),T.value=!0};k.onAny=function(J){for(var N=arguments.length,F=new Array(N>1?N-1:0),H=1;H<N;H++)F[H-1]=arguments[H];l(J,...F)},Object.assign(k.on,{_beforeBreakpoint:U,_containerClasses(J,N){m.value=N}});const C={...k};if(delete C.wrapperClass,z.value=new ic(C),z.value.virtual&&z.value.params.virtual.enabled){z.value.virtual.slides=K.value;const J={cache:!1,slides:K.value,renderExternal:N=>{n.value=N},renderExternalUpdate:!1};Ku(z.value.params.virtual,J),Ku(z.value.originalParams.virtual,J)}jf(()=>{!V.value&&z.value&&(z.value.emitSlidesClasses(),V.value=!0);const{passedParams:J}=I5(e,!1),N=bU(J,W.value,K.value,I.value,F=>F.props&&F.props.key);W.value=J,(N.length||T.value)&&z.value&&!z.value.destroyed&&wU({swiper:z.value,slides:K.value,passedParams:J,changedParams:N,nextEl:O.value,prevEl:$.value,scrollbarEl:S.value,paginationEl:M.value}),T.value=!1}),Cm("swiper",z),Uc(n,()=>{Em(()=>{SU(z.value)})}),td(()=>{Q.value&&(xU({el:Q.value,nextEl:O.value,prevEl:$.value,paginationEl:M.value,scrollbarEl:S.value,swiper:z.value},k),l("swiper",z.value))}),Uf(()=>{z.value&&!z.value.destroyed&&z.value.destroy(!0,!1)});function ie(J){return k.virtual?TU(z,J,n.value):(J.forEach((N,F)=>{N.props||(N.props={}),N.props.swiperRef=z,N.props.swiperSlideIndex=F}),J)}return()=>{const{slides:J,slots:N}=Jb(r,K,I);return xl(c,{ref:Q,class:SA(m.value)},[N["container-start"],xl(d,{class:vU(k.wrapperClass)},[N["wrapper-start"],ie(J),N["wrapper-end"]]),bA(e)&&[xl("div",{ref:$,class:"swiper-button-prev"}),xl("div",{ref:O,class:"swiper-button-next"})],TA(e)&&xl("div",{ref:S,class:"swiper-scrollbar"}),wA(e)&&xl("div",{ref:M,class:"swiper-pagination"}),N["container-end"]])}}},CU={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(e,t){let{slots:r}=t,l=!1;const{swiperRef:c}=e,d=Zs(null),m=Zs("swiper-slide"),n=Zs(!1);function T(z,W,K){W===d.value&&(m.value=K)}td(()=>{!c||!c.value||(c.value.on("_slideClass",T),l=!0)}),ix(()=>{l||!c||!c.value||(c.value.on("_slideClass",T),l=!0)}),jf(()=>{!d.value||!c||!c.value||(typeof e.swiperSlideIndex<"u"&&(d.value.swiperSlideIndex=e.swiperSlideIndex),c.value.destroyed&&m.value!=="swiper-slide"&&(m.value="swiper-slide"))}),Uf(()=>{!c||!c.value||c.value.off("_slideClass",T)});const V=Mm(()=>({isActive:m.value.indexOf("swiper-slide-active")>=0,isVisible:m.value.indexOf("swiper-slide-visible")>=0,isPrev:m.value.indexOf("swiper-slide-prev")>=0,isNext:m.value.indexOf("swiper-slide-next")>=0}));Cm("swiperSlide",V);const Q=()=>{n.value=!0};return()=>xl(e.tag,{class:SA(`${m.value}`),ref:d,"data-swiper-slide-index":typeof e.virtualIndex>"u"&&c&&c.value&&c.value.params.loop?e.swiperSlideIndex:e.virtualIndex,onLoadCapture:Q},e.zoom?xl("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof e.zoom=="number"?e.zoom:void 0},[r.default&&r.default(V.value),e.lazy&&!n.value&&xl("div",{class:"swiper-lazy-preloader"})]):[r.default&&r.default(V.value),e.lazy&&!n.value&&xl("div",{class:"swiper-lazy-preloader"})])}},MU={props:{fleet:Object,active:String},components:{Swiper:EU,SwiperSlide:CU},setup(){return{auto:!0,onSwiper:r=>{},onSlideChange:()=>{},modules:[_U,yU]}}},AU={class:"swiper-button-prev"},kU=["src"],PU=["href"],DU=["href"],IU=["href"],LU=["href"],OU=["href"],RU=["href"],BU=["href"],zU=["href"],NU=["href"],FU=["href"],jU=["href"],UU={class:"swiper-button-next"},GU=["src"];function VU(e,t,r,l,c,d){const m=ar("swiper-slide"),n=ar("swiper");return ki(),fh(n,{"slides-per-view":"auto","space-between":0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},onSwiper:l.onSwiper,onSlideChange:l.onSlideChange},{default:js(()=>[mt("div",AU,[mt("img",{src:"/img/icons/chevron-prev.png",alt:""},null,8,kU)]),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}`,class:Us(["submenu-item",{active:r.active=="info"}])},"NAVIGASI",10,PU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/engine`,class:Us(["submenu-item",{active:r.active=="engine"}])},"ENGINE",10,DU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/cargo`,class:Us(["submenu-item",{active:r.active=="cargo"}])},"CARGO",10,IU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/bunker`,class:Us(["submenu-item",{active:r.active=="bunker"}])},"BUNKER TANK",10,LU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/balast`,class:Us(["submenu-item",{active:r.active=="balast"}])},"BALAST TANK",10,OU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/diagnotics`,class:Us(["submenu-item",{active:r.active=="diagnotics"}])},"DIAGNOSTICS",10,RU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/alarms`,class:Us(["submenu-item",{active:r.active=="alarms"}])},"ALARM",10,BU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/emision`,class:Us(["submenu-item",{active:r.active=="emision"}])},"EMISION REPORT",10,zU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/docs`,class:Us(["submenu-item",{active:r.active=="docs"}])},"DOCUMENTS",10,NU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/reports`,class:Us(["submenu-item",{active:r.active=="reports"}])},"REPORTS",10,FU)]),_:1}),Ji(m,null,{default:js(()=>[mt("a",{href:`/fleet/${r.fleet.id}/charter`,class:Us(["submenu-item",{active:r.active=="charter"}])},"CHARTER",10,jU)]),_:1}),mt("div",UU,[mt("img",{src:"/img/icons/chevron-next.png",alt:""},null,8,GU)])]),_:1},8,["navigation","onSwiper","onSlideChange"])}const $U=Zr(MU,[["render",VU]]);var pp={},HU={get exports(){return pp},set exports(e){pp=e}},Dv={},WU={get exports(){return Dv},set exports(e){Dv=e}},L5;function CA(){return L5||(L5=1,function(e){(function(t,r){e.exports?(r.default=r,e.exports=t.document?r(t):r):(t.Highcharts&&t.Highcharts.error(16,!0),t.Highcharts=r(t))})(typeof window<"u"?window:Oo,function(t){function r(c,d,m,n){c.hasOwnProperty(d)||(c[d]=n.apply(null,m),typeof CustomEvent=="function"&&t.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:d,module:c[d]}})))}var l={};return r(l,"Core/Globals.js",[],function(){var c;return function(d){d.SVG_NS="http://www.w3.org/2000/svg",d.product="Highcharts",d.version="11.0.1",d.win=typeof t<"u"?t:{},d.doc=d.win.document,d.svg=d.doc&&d.doc.createElementNS&&!!d.doc.createElementNS(d.SVG_NS,"svg").createSVGRect,d.userAgent=d.win.navigator&&d.win.navigator.userAgent||"",d.isChrome=d.userAgent.indexOf("Chrome")!==-1,d.isFirefox=d.userAgent.indexOf("Firefox")!==-1,d.isMS=/(edge|msie|trident)/i.test(d.userAgent)&&!d.win.opera,d.isSafari=!d.isChrome&&d.userAgent.indexOf("Safari")!==-1,d.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(d.userAgent),d.isWebKit=d.userAgent.indexOf("AppleWebKit")!==-1,d.deg2rad=2*Math.PI/360,d.hasBidiBug=d.isFirefox&&4>parseInt(d.userAgent.split("Firefox/")[1],10),d.hasTouch=!!d.win.TouchEvent,d.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],d.noop=function(){},d.supportsPassiveEvents=function(){let m=!1;if(!d.isMS){const n=Object.defineProperty({},"passive",{get:function(){m=!0}});d.win.addEventListener&&d.win.removeEventListener&&(d.win.addEventListener("testPassive",d.noop,n),d.win.removeEventListener("testPassive",d.noop,n))}return m}(),d.charts=[],d.dateFormats={},d.seriesTypes={},d.symbolSizes={},d.chartCount=0}(c||(c={})),c}),r(l,"Core/Utilities.js",[l["Core/Globals.js"]],function(c){function d(y,b,D,X){const te=b?"Highcharts error":"Highcharts warning";y===32&&(y=`${te}: Deprecated member`);const q=K(y);let ce=q?`${te} #${y}: www.highcharts.com/errors/${y}/`:y.toString();if(typeof X<"u"){let fe="";q&&(ce+="?"),C(X,function(we,Z){fe+=`
 - ${Z}: ${we}`,q&&(ce+=encodeURI(Z)+"="+encodeURI(we))}),ce+=fe}J(c,"displayError",{chart:D,code:y,message:ce,params:X},function(){if(b)throw Error(ce);H.console&&d.messages.indexOf(ce)===-1&&console.warn(ce)}),d.messages.push(ce)}function m(y,b){const D={};return C(y,function(X,te){Q(y[te],!0)&&!y.nodeType&&b[te]?(X=m(y[te],b[te]),Object.keys(X).length&&(D[te]=X)):(Q(y[te])||y[te]!==b[te]||te in y&&!(te in b))&&(D[te]=y[te])}),D}function n(y,b){return parseInt(y,b||10)}function T(y){return typeof y=="string"}function V(y){return y=Object.prototype.toString.call(y),y==="[object Array]"||y==="[object Array Iterator]"}function Q(y,b){return!!y&&typeof y=="object"&&(!b||!V(y))}function z(y){return Q(y)&&typeof y.nodeType=="number"}function W(y){const b=y&&y.constructor;return!(!Q(y,!0)||z(y)||!b||!b.name||b.name==="Object")}function K(y){return typeof y=="number"&&!isNaN(y)&&1/0>y&&-1/0<y}function I(y){return typeof y<"u"&&y!==null}function O(y,b,D){const X=T(b)&&!I(D);let te;const q=(ce,fe)=>{I(ce)?y.setAttribute(fe,ce):X?(te=y.getAttribute(fe))||fe!=="class"||(te=y.getAttribute(fe+"Name")):y.removeAttribute(fe)};return T(b)?q(D,b):C(b,q),te}function $(y,b){let D;y||(y={});for(D in b)y[D]=b[D];return y}function M(){const y=arguments,b=y.length;for(let D=0;D<b;D++){const X=y[D];if(typeof X<"u"&&X!==null)return X}}function S(y,b){c.isMS&&!c.svg&&b&&I(b.opacity)&&(b.filter=`alpha(opacity=${100*b.opacity})`),$(y.style,b)}function k(y){return Math.pow(10,Math.floor(Math.log(y)/Math.LN10))}function G(y,b){return 1e14<y?y:parseFloat(y.toPrecision(b||14))}function U(y,b,D){let X;return b==="width"?(b=Math.min(y.offsetWidth,y.scrollWidth),D=y.getBoundingClientRect&&y.getBoundingClientRect().width,D<b&&D>=b-1&&(b=Math.floor(D)),Math.max(0,b-(U(y,"padding-left",!0)||0)-(U(y,"padding-right",!0)||0))):b==="height"?Math.max(0,Math.min(y.offsetHeight,y.scrollHeight)-(U(y,"padding-top",!0)||0)-(U(y,"padding-bottom",!0)||0)):((y=H.getComputedStyle(y,void 0))&&(X=y.getPropertyValue(b),M(D,b!=="opacity")&&(X=n(X))),X)}function C(y,b,D){for(const X in y)Object.hasOwnProperty.call(y,X)&&b.call(D||y[X],y[X],X,y)}function ie(y,b,D){function X(ce,fe){const we=y.removeEventListener;we&&we.call(y,ce,fe,!1)}function te(ce){let fe,we;y.nodeName&&(b?(fe={},fe[b]=!0):fe=ce,C(fe,function(Z,se){if(ce[se])for(we=ce[se].length;we--;)X(se,ce[se][we].fn)}))}var q=typeof y=="function"&&y.prototype||y;if(Object.hasOwnProperty.call(q,"hcEvents")){const ce=q.hcEvents;b?(q=ce[b]||[],D?(ce[b]=q.filter(function(fe){return D!==fe.fn}),X(b,D)):(te(ce),ce[b]=[])):(te(ce),delete q.hcEvents)}}function J(y,b,D,X){if(D=D||{},F.createEvent&&(y.dispatchEvent||y.fireEvent&&y!==c)){var te=F.createEvent("Events");te.initEvent(b,!0,!0),D=$(te,D),y.dispatchEvent?y.dispatchEvent(D):y.fireEvent(b,D)}else if(y.hcEvents){D.target||$(D,{preventDefault:function(){D.defaultPrevented=!0},target:y,type:b}),te=[];let q=y,ce=!1;for(;q.hcEvents;)Object.hasOwnProperty.call(q,"hcEvents")&&q.hcEvents[b]&&(te.length&&(ce=!0),te.unshift.apply(te,q.hcEvents[b])),q=Object.getPrototypeOf(q);ce&&te.sort((fe,we)=>fe.order-we.order),te.forEach(fe=>{fe.fn.call(y,D)===!1&&D.preventDefault()})}X&&!D.defaultPrevented&&X.call(y,D)}const{charts:N,doc:F,win:H}=c;(d||(d={})).messages=[],Math.easeInOutSine=function(y){return-.5*(Math.cos(Math.PI*y)-1)};var E=Array.prototype.find?function(y,b){return y.find(b)}:function(y,b){let D;const X=y.length;for(D=0;D<X;D++)if(b(y[D],D))return y[D]};C({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(y,b){c[b]=function(D){return d(32,!1,void 0,{[`Highcharts.${b}`]:`use Array.${y}`}),Array.prototype[y].apply(D,[].slice.call(arguments,1))}});let L;const f=function(){const y=Math.random().toString(36).substring(2,9)+"-";let b=0;return function(){return"highcharts-"+(L?"":y)+b++}}();return H.jQuery&&(H.jQuery.fn.highcharts=function(){const y=[].slice.call(arguments);if(this[0])return y[0]?(new c[T(y[0])?y.shift():"Chart"](this[0],y[0],y[1]),this):N[O(this[0],"data-highcharts-chart")]}),E={addEvent:function(y,b,D,X={}){var te=typeof y=="function"&&y.prototype||y;Object.hasOwnProperty.call(te,"hcEvents")||(te.hcEvents={}),te=te.hcEvents,c.Point&&y instanceof c.Point&&y.series&&y.series.chart&&(y.series.chart.runTrackerClick=!0);const q=y.addEventListener;return q&&q.call(y,b,D,c.supportsPassiveEvents?{passive:X.passive===void 0?b.indexOf("touch")!==-1:X.passive,capture:!1}:!1),te[b]||(te[b]=[]),te[b].push({fn:D,order:typeof X.order=="number"?X.order:1/0}),te[b].sort((ce,fe)=>ce.order-fe.order),function(){ie(y,b,D)}},arrayMax:function(y){let b=y.length,D=y[0];for(;b--;)y[b]>D&&(D=y[b]);return D},arrayMin:function(y){let b=y.length,D=y[0];for(;b--;)y[b]<D&&(D=y[b]);return D},attr:O,clamp:function(y,b,D){return y>b?y<D?y:D:b},cleanRecursively:m,clearTimeout:function(y){I(y)&&clearTimeout(y)},correctFloat:G,createElement:function(y,b,D,X,te){return y=F.createElement(y),b&&$(y,b),te&&S(y,{padding:"0",border:"none",margin:"0"}),D&&S(y,D),X&&X.appendChild(y),y},css:S,defined:I,destroyObjectProperties:function(y,b){C(y,function(D,X){D&&D!==b&&D.destroy&&D.destroy(),delete y[X]})},discardElement:function(y){y&&y.parentElement&&y.parentElement.removeChild(y)},erase:function(y,b){let D=y.length;for(;D--;)if(y[D]===b){y.splice(D,1);break}},error:d,extend:$,extendClass:function(y,b){const D=function(){};return D.prototype=new y,$(D.prototype,b),D},find:E,fireEvent:J,getMagnitude:k,getNestedProperty:function(y,b){for(y=y.split(".");y.length&&I(b);){const D=y.shift();if(typeof D>"u"||D==="__proto__"||(b=b[D],!I(b)||typeof b=="function"||typeof b.nodeType=="number"||b===H))return}return b},getStyle:U,inArray:function(y,b,D){return d(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),b.indexOf(y,D)},isArray:V,isClass:W,isDOMElement:z,isFunction:function(y){return typeof y=="function"},isNumber:K,isObject:Q,isString:T,keys:function(y){return d(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(y)},merge:function(){let y,b=arguments,D={};const X=function(q,ce){return typeof q!="object"&&(q={}),C(ce,function(fe,we){we!=="__proto__"&&we!=="constructor"&&(!Q(fe,!0)||W(fe)||z(fe)?q[we]=ce[we]:q[we]=X(q[we]||{},fe))}),q};b[0]===!0&&(D=b[1],b=Array.prototype.slice.call(b,2));const te=b.length;for(y=0;y<te;y++)D=X(D,b[y]);return D},normalizeTickInterval:function(y,b,D,X,te){let q=y;D=M(D,k(y));const ce=y/D;for(b||(b=te?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],X===!1&&(D===1?b=b.filter(function(fe){return fe%1===0}):.1>=D&&(b=[1/D]))),X=0;X<b.length&&(q=b[X],!(te&&q*D>=y||!te&&ce<=(b[X]+(b[X+1]||b[X]))/2));X++);return q=G(q*D,-Math.round(Math.log(.001)/Math.LN10))},objectEach:C,offset:function(y){const b=F.documentElement;return y=y.parentElement||y.parentNode?y.getBoundingClientRect():{top:0,left:0,width:0,height:0},{top:y.top+(H.pageYOffset||b.scrollTop)-(b.clientTop||0),left:y.left+(H.pageXOffset||b.scrollLeft)-(b.clientLeft||0),width:y.width,height:y.height}},pad:function(y,b,D){return Array((b||2)+1-String(y).replace("-","").length).join(D||"0")+y},pick:M,pInt:n,pushUnique:function(y,b){return 0>y.indexOf(b)&&!!y.push(b)},relativeLength:function(y,b,D){return/%$/.test(y)?b*parseFloat(y)/100+(D||0):parseFloat(y)},removeEvent:ie,splat:function(y){return V(y)?y:[y]},stableSort:function(y,b){const D=y.length;let X,te;for(te=0;te<D;te++)y[te].safeI=te;for(y.sort(function(q,ce){return X=b(q,ce),X===0?q.safeI-ce.safeI:X}),te=0;te<D;te++)delete y[te].safeI},syncTimeout:function(y,b,D){return 0<b?setTimeout(y,b,D):(y.call(0,D),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:f,useSerialIds:function(y){return L=M(y,L)},wrap:function(y,b,D){const X=y[b];y[b]=function(){const te=arguments,q=this;return D.apply(this,[function(){return X.apply(q,arguments.length?arguments:te)}].concat([].slice.call(arguments)))}}},E}),r(l,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}},reflow:!0,type:"line",zoomBySingleTouch:!1,zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),r(l,"Core/Color/Color.js",[l["Core/Globals.js"],l["Core/Utilities.js"]],function(c,d){const{isNumber:m,merge:n,pInt:T}=d;class V{static parse(z){return z?new V(z):V.None}constructor(z){this.rgba=[NaN,NaN,NaN,NaN],this.input=z;const W=c.Color;if(W&&W!==V)return new W(z);this.init(z)}init(z){let W,K;if(typeof z=="object"&&typeof z.stops<"u")this.stops=z.stops.map($=>new V($[1]));else if(typeof z=="string"){if(this.input=z=V.names[z.toLowerCase()]||z,z.charAt(0)==="#"){var I=z.length,O=parseInt(z.substr(1),16);I===7?W=[(O&16711680)>>16,(O&65280)>>8,O&255,1]:I===4&&(W=[(O&3840)>>4|(O&3840)>>8,(O&240)>>4|O&240,(O&15)<<4|O&15,1])}if(!W)for(O=V.parsers.length;O--&&!W;)K=V.parsers[O],(I=K.regex.exec(z))&&(W=K.parse(I))}W&&(this.rgba=W)}get(z){const W=this.input,K=this.rgba;if(typeof W=="object"&&typeof this.stops<"u"){const I=n(W);return I.stops=[].slice.call(I.stops),this.stops.forEach((O,$)=>{I.stops[$]=[I.stops[$][0],O.get(z)]}),I}return K&&m(K[0])?z==="rgb"||!z&&K[3]===1?"rgb("+K[0]+","+K[1]+","+K[2]+")":z==="a"?`${K[3]}`:"rgba("+K.join(",")+")":W}brighten(z){const W=this.rgba;if(this.stops)this.stops.forEach(function(K){K.brighten(z)});else if(m(z)&&z!==0)for(let K=0;3>K;K++)W[K]+=T(255*z),0>W[K]&&(W[K]=0),255<W[K]&&(W[K]=255);return this}setOpacity(z){return this.rgba[3]=z,this}tweenTo(z,W){const K=this.rgba,I=z.rgba;return!m(K[0])||!m(I[0])?z.input||"none":(z=I[3]!==1||K[3]!==1,(z?"rgba(":"rgb(")+Math.round(I[0]+(K[0]-I[0])*(1-W))+","+Math.round(I[1]+(K[1]-I[1])*(1-W))+","+Math.round(I[2]+(K[2]-I[2])*(1-W))+(z?","+(I[3]+(K[3]-I[3])*(1-W)):"")+")")}}return V.names={white:"#ffffff",black:"#000000"},V.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(Q){return[T(Q[1]),T(Q[2]),T(Q[3]),parseFloat(Q[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(Q){return[T(Q[1]),T(Q[2]),T(Q[3]),1]}}],V.None=new V(""),V}),r(l,"Core/Color/Palettes.js",[],function(){return{colors:"#2caffe #544fc5 #00e272 #fe6a35 #6b8abc #d568fb #2ee0ca #fa4b42 #feb56a #91e8e1".split(" ")}}),r(l,"Core/Time.js",[l["Core/Globals.js"],l["Core/Utilities.js"]],function(c,d){const{win:m}=c,{defined:n,error:T,extend:V,isObject:Q,merge:z,objectEach:W,pad:K,pick:I,splat:O,timeUnits:$}=d,M=c.isSafari&&m.Intl&&m.Intl.DateTimeFormat.prototype.formatRange,S=c.isSafari&&m.Intl&&!m.Intl.DateTimeFormat.prototype.formatRange;class k{constructor(U){this.options={},this.variableTimezone=this.useUTC=!1,this.Date=m.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(U)}get(U,C){if(this.variableTimezone||this.timezoneOffset){const ie=C.getTime(),J=ie-this.getTimezoneOffset(C);return C.setTime(J),U=C["getUTC"+U](),C.setTime(ie),U}return this.useUTC?C["getUTC"+U]():C["get"+U]()}set(U,C,ie){if(this.variableTimezone||this.timezoneOffset){if(U==="Milliseconds"||U==="Seconds"||U==="Minutes"&&this.getTimezoneOffset(C)%36e5===0)return C["setUTC"+U](ie);var J=this.getTimezoneOffset(C);return J=C.getTime()-J,C.setTime(J),C["setUTC"+U](ie),U=this.getTimezoneOffset(C),J=C.getTime()+U,C.setTime(J)}return this.useUTC||M&&U==="FullYear"?C["setUTC"+U](ie):C["set"+U](ie)}update(U={}){const C=I(U.useUTC,!0);this.options=U=z(!0,this.options,U),this.Date=U.Date||m.Date||Date,this.timezoneOffset=(this.useUTC=C)&&U.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=C&&!(!U.getTimezoneOffset&&!U.timezone)}makeTime(U,C,ie,J,N,F){let H,E,L;return this.useUTC?(H=this.Date.UTC.apply(0,arguments),E=this.getTimezoneOffset(H),H+=E,L=this.getTimezoneOffset(H),E!==L?H+=L-E:E-36e5!==this.getTimezoneOffset(H-36e5)||S||(H-=36e5)):H=new this.Date(U,C,I(ie,1),I(J,0),I(N,0),I(F,0)).getTime(),H}timezoneOffsetFunction(){const U=this,C=this.options,ie=C.getTimezoneOffset,J=C.moment||m.moment;if(!this.useUTC)return function(N){return 6e4*new Date(N.toString()).getTimezoneOffset()};if(C.timezone){if(J)return function(N){return 6e4*-J.tz(N,C.timezone).utcOffset()};T(25)}return this.useUTC&&ie?function(N){return 6e4*ie(N.valueOf())}:function(){return 6e4*(U.timezoneOffset||0)}}dateFormat(U,C,ie){if(!n(C)||isNaN(C))return c.defaultOptions.lang&&c.defaultOptions.lang.invalidDate||"";U=I(U,"%Y-%m-%d %H:%M:%S");const J=this;var N=new this.Date(C);const F=this.get("Hours",N),H=this.get("Day",N),E=this.get("Date",N),L=this.get("Month",N),f=this.get("FullYear",N),y=c.defaultOptions.lang,b=y&&y.weekdays,D=y&&y.shortWeekdays;return N=V({a:D?D[H]:b[H].substr(0,3),A:b[H],d:K(E),e:K(E,2," "),w:H,b:y.shortMonths[L],B:y.months[L],m:K(L+1),o:L+1,y:f.toString().substr(2,2),Y:f,H:K(F),k:F,I:K(F%12||12),l:F%12||12,M:K(this.get("Minutes",N)),p:12>F?"AM":"PM",P:12>F?"am":"pm",S:K(N.getSeconds()),L:K(Math.floor(C%1e3),3)},c.dateFormats),W(N,function(X,te){for(;U.indexOf("%"+te)!==-1;)U=U.replace("%"+te,typeof X=="function"?X.call(J,C):X)}),ie?U.substr(0,1).toUpperCase()+U.substr(1):U}resolveDTLFormat(U){return Q(U,!0)?U:(U=O(U),{main:U[0],from:U[1],to:U[2]})}getTimeTicks(U,C,ie,J){const N=this,F=[],H={};var E=new N.Date(C);const L=U.unitRange,f=U.count||1;let y;if(J=I(J,1),n(C)){if(N.set("Milliseconds",E,L>=$.second?0:f*Math.floor(N.get("Milliseconds",E)/f)),L>=$.second&&N.set("Seconds",E,L>=$.minute?0:f*Math.floor(N.get("Seconds",E)/f)),L>=$.minute&&N.set("Minutes",E,L>=$.hour?0:f*Math.floor(N.get("Minutes",E)/f)),L>=$.hour&&N.set("Hours",E,L>=$.day?0:f*Math.floor(N.get("Hours",E)/f)),L>=$.day&&N.set("Date",E,L>=$.month?1:Math.max(1,f*Math.floor(N.get("Date",E)/f))),L>=$.month){N.set("Month",E,L>=$.year?0:f*Math.floor(N.get("Month",E)/f));var b=N.get("FullYear",E)}L>=$.year&&N.set("FullYear",E,b-b%f),L===$.week&&(b=N.get("Day",E),N.set("Date",E,N.get("Date",E)-b+J+(b<J?-7:0))),b=N.get("FullYear",E),J=N.get("Month",E);const D=N.get("Date",E),X=N.get("Hours",E);for(C=E.getTime(),!N.variableTimezone&&N.useUTC||!n(ie)||(y=ie-C>4*$.month||N.getTimezoneOffset(C)!==N.getTimezoneOffset(ie)),C=E.getTime(),E=1;C<ie;)F.push(C),C=L===$.year?N.makeTime(b+E*f,0):L===$.month?N.makeTime(b,J+E*f):!y||L!==$.day&&L!==$.week?y&&L===$.hour&&1<f?N.makeTime(b,J,D,X+E*f):C+L*f:N.makeTime(b,J,D+E*f*(L===$.day?1:7)),E++;F.push(C),L<=$.hour&&1e4>F.length&&F.forEach(function(te){te%18e5===0&&N.dateFormat("%H%M%S%L",te)==="000000000"&&(H[te]="day")})}return F.info=V(U,{higherRanks:H,totalRange:L*f}),F}getDateFormat(U,C,ie,J){const N=this.dateFormat("%m-%d %H:%M:%S.%L",C),F={millisecond:15,second:12,minute:9,hour:6,day:3};let H,E="millisecond";for(H in $){if(U===$.week&&+this.dateFormat("%w",C)===ie&&N.substr(6)==="00:00:00.000"){H="week";break}if($[H]>U){H=E;break}if(F[H]&&N.substr(F[H])!=="01-01 00:00:00.000".substr(F[H]))break;H!=="week"&&(E=H)}return this.resolveDTLFormat(J[H]).main}}return k}),r(l,"Core/Defaults.js",[l["Core/Chart/ChartDefaults.js"],l["Core/Color/Color.js"],l["Core/Globals.js"],l["Core/Color/Palettes.js"],l["Core/Time.js"],l["Core/Utilities.js"]],function(c,d,m,n,T,V){const{isTouchDevice:Q,svg:z}=m,{merge:W}=V,K={colors:n.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:c,title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},caption:{margin:15,text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:z,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:Q?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};K.chart.styledMode=!1;const I=new T(K.time);return c={defaultOptions:K,defaultTime:I,getOptions:function(){return K},setOptions:function(O){return W(!0,K,O),(O.time||O.global)&&(m.time?m.time.update(W(K.global,K.time,O.global,O.time)):m.time=I),K}},c}),r(l,"Core/Animation/Fx.js",[l["Core/Color/Color.js"],l["Core/Globals.js"],l["Core/Utilities.js"]],function(c,d,m){const{parse:n}=c,{win:T}=d,{isNumber:V,objectEach:Q}=m;class z{constructor(K,I,O){this.pos=NaN,this.options=I,this.elem=K,this.prop=O}dSetter(){var K=this.paths;const I=K&&K[0];K=K&&K[1];const O=this.now||0;let $=[];if(O!==1&&I&&K)if(I.length===K.length&&1>O)for(let M=0;M<K.length;M++){const S=I[M],k=K[M],G=[];for(let U=0;U<k.length;U++){const C=S[U],ie=k[U];V(C)&&V(ie)&&(k[0]!=="A"||U!==4&&U!==5)?G[U]=C+O*(ie-C):G[U]=ie}$.push(G)}else $=K;else $=this.toD||[];this.elem.attr("d",$,void 0,!0)}update(){const K=this.elem,I=this.prop,O=this.now,$=this.options.step;this[I+"Setter"]?this[I+"Setter"]():K.attr?K.element&&K.attr(I,O,null,!0):K.style[I]=O+this.unit,$&&$.call(K,O,this)}run(K,I,O){const $=this,M=$.options,S=function(U){return S.stopped?!1:$.step(U)},k=T.requestAnimationFrame||function(U){setTimeout(U,13)},G=function(){for(let U=0;U<z.timers.length;U++)z.timers[U]()||z.timers.splice(U--,1);z.timers.length&&k(G)};K!==I||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=K,this.end=I,this.unit=O,this.now=this.start,this.pos=0,S.elem=this.elem,S.prop=this.prop,S()&&z.timers.push(S)===1&&k(G)):(delete M.curAnim[this.prop],M.complete&&Object.keys(M.curAnim).length===0&&M.complete.call(this.elem))}step(K){const I=+new Date,O=this.options,$=this.elem,M=O.complete,S=O.duration,k=O.curAnim;let G;return $.attr&&!$.element?K=!1:K||I>=S+this.startTime?(this.now=this.end,this.pos=1,this.update(),G=k[this.prop]=!0,Q(k,function(U){U!==!0&&(G=!1)}),G&&M&&M.call($),K=!1):(this.pos=O.easing((I-this.startTime)/S),this.now=this.start+(this.end-this.start)*this.pos,this.update(),K=!0),K}initPath(K,I,O){function $(N,F){for(;N.length<ie;){var H=N[0];const E=F[ie-N.length];E&&H[0]==="M"&&(N[0]=E[0]==="C"?["C",H[1],H[2],H[1],H[2],H[1],H[2]]:["L",H[1],H[2]]),N.unshift(H),G&&(H=N.pop(),N.push(N[N.length-1],H))}}function M(N,F){for(;N.length<ie;)if(F=N[Math.floor(N.length/U)-1].slice(),F[0]==="C"&&(F[1]=F[5],F[2]=F[6]),G){const H=N[Math.floor(N.length/U)].slice();N.splice(N.length/2,0,F,H)}else N.push(F)}const S=K.startX,k=K.endX;O=O.slice();const G=K.isArea,U=G?2:1;let C,ie,J;if(I=I&&I.slice(),!I)return[O,O];if(S&&k&&k.length){for(K=0;K<S.length;K++)if(S[K]===k[0]){C=K;break}else if(S[0]===k[k.length-S.length+K]){C=K,J=!0;break}else if(S[S.length-1]===k[k.length-S.length+K]){C=S.length-K;break}typeof C>"u"&&(I=[])}return I.length&&V(C)&&(ie=O.length+C*U,J?($(I,O),M(O,I)):($(O,I),M(I,O))),[I,O]}fillSetter(){z.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}}return z.timers=[],z}),r(l,"Core/Animation/AnimationUtilities.js",[l["Core/Animation/Fx.js"],l["Core/Utilities.js"]],function(c,d){function m($){return W($)?K({duration:500,defer:0},$):{duration:$?500:0,defer:0}}function n($,M){let S=c.timers.length;for(;S--;)c.timers[S].elem!==$||M&&M!==c.timers[S].prop||(c.timers[S].stopped=!0)}const{defined:T,getStyle:V,isArray:Q,isNumber:z,isObject:W,merge:K,objectEach:I,pick:O}=d;return{animate:function($,M,S){let k,G="",U,C,ie;W(S)||(ie=arguments,S={duration:ie[2],easing:ie[3],complete:ie[4]}),z(S.duration)||(S.duration=400),S.easing=typeof S.easing=="function"?S.easing:Math[S.easing]||Math.easeInOutSine,S.curAnim=K(M),I(M,function(J,N){n($,N),C=new c($,S,N),U=void 0,N==="d"&&Q(M.d)?(C.paths=C.initPath($,$.pathArray,M.d),C.toD=M.d,k=0,U=1):$.attr?k=$.attr(N):(k=parseFloat(V($,N))||0,N!=="opacity"&&(G="px")),U||(U=J),typeof U=="string"&&U.match("px")&&(U=U.replace(/px/g,"")),C.run(k,U,G)})},animObject:m,getDeferredAnimation:function($,M,S){const k=m(M);let G=0,U=0;return(S?[S]:$.series).forEach(C=>{C=m(C.options.animation),G=M&&T(M.defer)?k.defer:Math.max(G,C.duration+C.defer),U=Math.min(k.duration,C.duration)}),$.renderer.forExport&&(G=0),{defer:Math.max(0,G-U),duration:Math.min(G,U)}},setAnimation:function($,M){M.renderer.globalAnimation=O($,M.options.chart.animation,!0)},stop:n}}),r(l,"Core/Renderer/HTML/AST.js",[l["Core/Globals.js"],l["Core/Utilities.js"]],function(c,d){const{SVG_NS:m,win:n}=c,{attr:T,createElement:V,css:Q,error:z,isFunction:W,isString:K,objectEach:I,splat:O}=d;({trustedTypes:d}=n);const $=d&&W(d.createPolicy)&&d.createPolicy("highcharts",{createHTML:G=>G});d=$?$.createHTML(""):"";try{var M=!!new DOMParser().parseFromString(d,"text/html")}catch{M=!1}const S=M;class k{static filterUserAttributes(U){return I(U,(C,ie)=>{let J=!0;k.allowedAttributes.indexOf(ie)===-1&&(J=!1),["background","dynsrc","href","lowsrc","src"].indexOf(ie)!==-1&&(J=K(C)&&k.allowedReferences.some(N=>C.indexOf(N)===0)),J||(z(33,!1,void 0,{"Invalid attribute in config":`${ie}`}),delete U[ie]),K(C)&&U[ie]&&(U[ie]=C.replace(/</g,"&lt;"))}),U}static parseStyle(U){return U.split(";").reduce((C,ie)=>{ie=ie.split(":").map(N=>N.trim());const J=ie.shift();return J&&ie.length&&(C[J.replace(/-([a-z])/g,N=>N[1].toUpperCase())]=ie.join(":")),C},{})}static setElementHTML(U,C){U.innerHTML=k.emptyHTML,C&&new k(C).addToDOM(U)}constructor(U){this.nodes=typeof U=="string"?this.parseMarkup(U):U}addToDOM(U){function C(ie,J){let N;return O(ie).forEach(function(F){var H=F.tagName;const E=F.textContent?c.doc.createTextNode(F.textContent):void 0,L=k.bypassHTMLFiltering;let f;if(H)if(H==="#text")f=E;else if(k.allowedTags.indexOf(H)!==-1||L){H=c.doc.createElementNS(H==="svg"?m:J.namespaceURI||m,H);const y=F.attributes||{};I(F,function(b,D){D!=="tagName"&&D!=="attributes"&&D!=="children"&&D!=="style"&&D!=="textContent"&&(y[D]=b)}),T(H,L?y:k.filterUserAttributes(y)),F.style&&Q(H,F.style),E&&H.appendChild(E),C(F.children||[],H),f=H}else z(33,!1,void 0,{"Invalid tagName in config":H});f&&J.appendChild(f),N=f}),N}return C(this.nodes,U)}parseMarkup(U){const C=[];if(U=U.trim().replace(/ style=(["'])/g," data-style=$1"),S)U=new DOMParser().parseFromString($?$.createHTML(U):U,"text/html");else{const J=V("div");J.innerHTML=U,U={body:J}}const ie=(J,N)=>{var F=J.nodeName.toLowerCase();const H={tagName:F};if(F==="#text"&&(H.textContent=J.textContent||""),F=J.attributes){const E={};[].forEach.call(F,L=>{L.name==="data-style"?H.style=k.parseStyle(L.value):E[L.name]=L.value}),H.attributes=E}if(J.childNodes.length){const E=[];[].forEach.call(J.childNodes,L=>{ie(L,E)}),E.length&&(H.children=E)}N.push(H)};return[].forEach.call(U.body.childNodes,J=>ie(J,C)),C}}return k.allowedAttributes="alt aria-controls aria-describedby aria-expanded aria-haspopup aria-hidden aria-label aria-labelledby aria-live aria-pressed aria-readonly aria-roledescription aria-selected class clip-path color colspan cx cy d dx dy disabled fill flood-color flood-opacity height href id in markerHeight markerWidth offset opacity orient padding paddingLeft paddingRight patternUnits r refX refY role scope slope src startOffset stdDeviation stroke stroke-linecap stroke-width style tableValues result rowspan summary target tabindex text-align text-anchor textAnchor textLength title type valign width x x1 x2 xlink:href y y1 y2 zIndex".split(" "),k.allowedReferences="https:// http:// mailto: / ../ ./ #".split(" "),k.allowedTags="a abbr b br button caption circle clipPath code dd defs div dl dt em feComponentTransfer feDropShadow feFuncA feFuncB feFuncG feFuncR feGaussianBlur feOffset feMerge feMergeNode filter h1 h2 h3 h4 h5 h6 hr i img li linearGradient marker ol p path pattern pre rect small span stop strong style sub sup svg table text textPath thead title tbody tspan td th tr u ul #text".split(" "),k.emptyHTML=d,k.bypassHTMLFiltering=!1,k}),r(l,"Core/FormatUtilities.js",[l["Core/Defaults.js"],l["Core/Utilities.js"]],function(c,d){function m(K,I,O,$){K=+K||0,I=+I;const M=n.lang;var S=(K.toString().split(".")[1]||"").split("e")[0].length;const k=K.toString().split("e"),G=I;if(I===-1)I=Math.min(S,20);else if(!Q(I))I=2;else if(I&&k[1]&&0>k[1]){var U=I+ +k[1];0<=U?(k[0]=(+k[0]).toExponential(U).split("e")[0],I=U):(k[0]=k[0].split(".")[0]||0,K=20>I?(k[0]*Math.pow(10,k[1])).toFixed(I):0,k[1]=0)}U=(Math.abs(k[1]?k[0]:K)+Math.pow(10,-Math.max(I,S)-1)).toFixed(I),S=String(W(U));const C=3<S.length?S.length%3:0;return O=z(O,M.decimalPoint),$=z($,M.thousandsSep),K=(0>K?"-":"")+(C?S.substr(0,C)+$:""),K=0>+k[1]&&!G?"0":K+S.substr(C).replace(/(\d{3})(?=\d)/g,"$1"+$),I&&(K+=O+U.slice(-I)),k[1]&&+K!=0&&(K+="e"+k[1]),K}const{defaultOptions:n,defaultTime:T}=c,{getNestedProperty:V,isNumber:Q,pick:z,pInt:W}=d;return{dateFormat:function(K,I,O){return T.dateFormat(K,I,O)},format:function(K,I,O){var $="{";let M=!1,S;const k=/f$/,G=/\.([0-9])/,U=n.lang,C=O&&O.time||T;O=O&&O.numberFormatter||m;const ie=[];for(;K&&(S=K.indexOf($),S!==-1);){var J=K.slice(0,S);if(M){if(J=J.split(":"),$=V(J.shift()||"",I),J.length&&typeof $=="number")if(J=J.join(":"),k.test(J)){const N=parseInt((J.match(G)||["","-1"])[1],10);$!==null&&($=O($,N,U.decimalPoint,-1<J.indexOf(",")?U.thousandsSep:""))}else $=C.dateFormat(J,$);ie.push($)}else ie.push(J);K=K.slice(S+1),$=(M=!M)?"}":"{"}return ie.push(K),ie.join("")},numberFormat:m}}),r(l,"Core/Renderer/RendererUtilities.js",[l["Core/Utilities.js"]],function(c){const{clamp:d,pick:m,stableSort:n}=c;var T;return function(V){function Q(z,W,K){const I=z;var O=I.reducedLen||W,$=(C,ie)=>(ie.rank||0)-(C.rank||0);const M=(C,ie)=>C.target-ie.target;let S,k=!0,G=[],U=0;for(S=z.length;S--;)U+=z[S].size;if(U>O){for(n(z,$),U=S=0;U<=O;)U+=z[S].size,S++;G=z.splice(S-1,z.length)}for(n(z,M),z=z.map(C=>({size:C.size,targets:[C.target],align:m(C.align,.5)}));k;){for(S=z.length;S--;)O=z[S],$=(Math.min.apply(0,O.targets)+Math.max.apply(0,O.targets))/2,O.pos=d($-O.size*O.align,0,W-O.size);for(S=z.length,k=!1;S--;)0<S&&z[S-1].pos+z[S-1].size>z[S].pos&&(z[S-1].size+=z[S].size,z[S-1].targets=z[S-1].targets.concat(z[S].targets),z[S-1].align=.5,z[S-1].pos+z[S-1].size>W&&(z[S-1].pos=W-z[S-1].size),z.splice(S,1),k=!0)}return I.push.apply(I,G),S=0,z.some(C=>{let ie=0;return(C.targets||[]).some(()=>(I[S].pos=C.pos+ie,typeof K<"u"&&Math.abs(I[S].pos-I[S].target)>K?(I.slice(0,S+1).forEach(J=>delete J.pos),I.reducedLen=(I.reducedLen||W)-.1*W,I.reducedLen>.1*W&&Q(I,W,K),!0):(ie+=I[S].size,S++,!1)))}),n(I,M),I}V.distribute=Q}(T||(T={})),T}),r(l,"Core/Renderer/SVG/SVGElement.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/Color/Color.js"],l["Core/Globals.js"],l["Core/Utilities.js"]],function(c,d,m,n){const{animate:T,animObject:V,stop:Q}=c,{deg2rad:z,doc:W,svg:K,SVG_NS:I,win:O}=m,{addEvent:$,attr:M,createElement:S,css:k,defined:G,erase:U,extend:C,fireEvent:ie,isArray:J,isFunction:N,isObject:F,isString:H,merge:E,objectEach:L,pick:f,pInt:y,syncTimeout:b,uniqueKey:D}=n;class X{constructor(){this.element=void 0,this.onEvents={},this.opacity=1,this.renderer=void 0,this.SVG_NS=I}_defaultGetter(q){return q=f(this[q+"Value"],this[q],this.element?this.element.getAttribute(q):null,0),/^[\-0-9\.]+$/.test(q)&&(q=parseFloat(q)),q}_defaultSetter(q,ce,fe){fe.setAttribute(ce,q)}add(q){const ce=this.renderer,fe=this.element;let we;return q&&(this.parentGroup=q),typeof this.textStr<"u"&&this.element.nodeName==="text"&&ce.buildText(this),this.added=!0,(!q||q.handleZ||this.zIndex)&&(we=this.zIndexSetter()),we||(q?q.element:ce.box).appendChild(fe),this.onAdd&&this.onAdd(),this}addClass(q,ce){const fe=ce?"":this.attr("class")||"";return q=(q||"").split(/ /g).reduce(function(we,Z){return fe.indexOf(Z)===-1&&we.push(Z),we},fe?[fe]:[]).join(" "),q!==fe&&this.attr("class",q),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(q,ce,fe){const we={};var Z=this.renderer,se=Z.alignedObjects,ue;let ye,Pe;q?(this.alignOptions=q,this.alignByTranslate=ce,(!fe||H(fe))&&(this.alignTo=ue=fe||"renderer",U(se,this),se.push(this),fe=void 0)):(q=this.alignOptions,ce=this.alignByTranslate,ue=this.alignTo),fe=f(fe,Z[ue],ue==="scrollablePlotBox"?Z.plotBox:void 0,Z),ue=q.align;const ae=q.verticalAlign;return Z=(fe.x||0)+(q.x||0),se=(fe.y||0)+(q.y||0),ue==="right"?ye=1:ue==="center"&&(ye=2),ye&&(Z+=(fe.width-(q.width||0))/ye),we[ce?"translateX":"x"]=Math.round(Z),ae==="bottom"?Pe=1:ae==="middle"&&(Pe=2),Pe&&(se+=(fe.height-(q.height||0))/Pe),we[ce?"translateY":"y"]=Math.round(se),this[this.placed?"animate":"attr"](we),this.placed=!0,this.alignAttr=we,this}alignSetter(q){const ce={left:"start",center:"middle",right:"end"};ce[q]&&(this.alignValue=q,this.element.setAttribute("text-anchor",ce[q]))}animate(q,ce,fe){const we=V(f(ce,this.renderer.globalAnimation,!0));return ce=we.defer,W.hidden&&(we.duration=0),we.duration!==0?(fe&&(we.complete=fe),b(()=>{this.element&&T(this,q,we)},ce)):(this.attr(q,void 0,fe||we.complete),L(q,function(Z,se){we.step&&we.step.call(this,Z,{prop:se,pos:1,elem:this})},this)),this}applyTextOutline(q){const ce=this.element;q.indexOf("contrast")!==-1&&(q=q.replace(/contrast/g,this.renderer.getContrast(ce.style.fill)));var fe=q.split(" ");if(q=fe[fe.length-1],(fe=fe[0])&&fe!=="none"&&m.svg){this.fakeTS=!0,fe=fe.replace(/(^[\d\.]+)(.*?)$/g,function(se,ue,ye){return 2*Number(ue)+ye}),this.removeTextOutline();const we=W.createElementNS(I,"tspan");M(we,{class:"highcharts-text-outline",fill:q,stroke:q,"stroke-width":fe,"stroke-linejoin":"round"}),q=ce.querySelector("textPath")||ce,[].forEach.call(q.childNodes,se=>{const ue=se.cloneNode(!0);ue.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(ye=>ue.removeAttribute(ye)),we.appendChild(ue)});let Z=0;[].forEach.call(q.querySelectorAll("text tspan"),se=>{Z+=Number(se.getAttribute("dy"))}),fe=W.createElementNS(I,"tspan"),fe.textContent="​",M(fe,{x:Number(ce.getAttribute("x")),dy:-Z}),we.appendChild(fe),q.insertBefore(we,q.firstChild)}}attr(q,ce,fe,we){const Z=this.element,se=X.symbolCustomAttribs;let ue,ye,Pe=this,ae,xe;return typeof q=="string"&&typeof ce<"u"&&(ue=q,q={},q[ue]=ce),typeof q=="string"?Pe=(this[q+"Getter"]||this._defaultGetter).call(this,q,Z):(L(q,function(ve,le){ae=!1,we||Q(this,le),this.symbolName&&se.indexOf(le)!==-1&&(ye||(this.symbolAttr(q),ye=!0),ae=!0),!this.rotation||le!=="x"&&le!=="y"||(this.doTransform=!0),ae||(xe=this[le+"Setter"]||this._defaultSetter,xe.call(this,ve,le,Z))},this),this.afterSetters()),fe&&fe.call(this),Pe}clip(q){return this.attr("clip-path",q?"url("+this.renderer.url+"#"+q.id+")":"none")}crisp(q,ce){ce=ce||q.strokeWidth||0;const fe=Math.round(ce)%2/2;return q.x=Math.floor(q.x||this.x||0)+fe,q.y=Math.floor(q.y||this.y||0)+fe,q.width=Math.floor((q.width||this.width||0)-2*fe),q.height=Math.floor((q.height||this.height||0)-2*fe),G(q.strokeWidth)&&(q.strokeWidth=ce),q}complexColor(q,ce,fe){const we=this.renderer;let Z,se,ue,ye,Pe,ae,xe,ve,le,me,be=[],Le;ie(this.renderer,"complexColor",{args:arguments},function(){if(q.radialGradient?se="radialGradient":q.linearGradient&&(se="linearGradient"),se){if(ue=q[se],Pe=we.gradients,ae=q.stops,le=fe.radialReference,J(ue)&&(q[se]=ue={x1:ue[0],y1:ue[1],x2:ue[2],y2:ue[3],gradientUnits:"userSpaceOnUse"}),se==="radialGradient"&&le&&!G(ue.gradientUnits)&&(ye=ue,ue=E(ue,we.getRadialAttr(le,ye),{gradientUnits:"userSpaceOnUse"})),L(ue,function(De,Ne){Ne!=="id"&&be.push(Ne,De)}),L(ae,function(De){be.push(De)}),be=be.join(","),Pe[be])me=Pe[be].attr("id");else{ue.id=me=D();const De=Pe[be]=we.createElement(se).attr(ue).add(we.defs);De.radAttr=ye,De.stops=[],ae.forEach(function(Ne){Ne[1].indexOf("rgba")===0?(Z=d.parse(Ne[1]),xe=Z.get("rgb"),ve=Z.get("a")):(xe=Ne[1],ve=1),Ne=we.createElement("stop").attr({offset:Ne[0],"stop-color":xe,"stop-opacity":ve}).add(De),De.stops.push(Ne)})}Le="url("+we.url+"#"+me+")",fe.setAttribute(ce,Le),fe.gradient=be,q.toString=function(){return Le}}})}css(q){const ce=this.styles,fe={},we=this.element;let Z,se=!ce;if(q.color&&(q.fill=q.color),ce&&L(q,function(ue,ye){ce&&ce[ye]!==ue&&(fe[ye]=ue,se=!0)}),se){ce&&(q=C(ce,fe)),q.width===null||q.width==="auto"?delete this.textWidth:we.nodeName.toLowerCase()==="text"&&q.width&&(Z=this.textWidth=y(q.width)),this.styles=q,Z&&!K&&this.renderer.forExport&&delete q.width;const ue=E(q);we.namespaceURI===this.SVG_NS&&["textOutline","textOverflow","width"].forEach(ye=>ue&&delete ue[ye]),k(we,ue)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),q.textOutline&&this.applyTextOutline(q.textOutline)),this}dashstyleSetter(q){let ce=this["stroke-width"];if(ce==="inherit"&&(ce=1),q=q&&q.toLowerCase()){const fe=q.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(q=fe.length;q--;)fe[q]=""+y(fe[q])*f(ce,NaN);q=fe.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",q)}}destroy(){const q=this;var ce=q.element||{};const fe=q.renderer;var we=ce.ownerSVGElement;let Z=ce.nodeName==="SPAN"&&q.parentGroup||void 0;if(ce.onclick=ce.onmouseout=ce.onmouseover=ce.onmousemove=ce.point=null,Q(q),q.clipPath&&we){const se=q.clipPath;[].forEach.call(we.querySelectorAll("[clip-path],[CLIP-PATH]"),function(ue){-1<ue.getAttribute("clip-path").indexOf(se.element.id)&&ue.removeAttribute("clip-path")}),q.clipPath=se.destroy()}if(q.stops){for(we=0;we<q.stops.length;we++)q.stops[we].destroy();q.stops.length=0,q.stops=void 0}for(q.safeRemoveChild(ce);Z&&Z.div&&Z.div.childNodes.length===0;)ce=Z.parentGroup,q.safeRemoveChild(Z.div),delete Z.div,Z=ce;q.alignTo&&U(fe.alignedObjects,q),L(q,function(se,ue){q[ue]&&q[ue].parentGroup===q&&q[ue].destroy&&q[ue].destroy(),delete q[ue]})}dSetter(q,ce,fe){J(q)&&(typeof q[0]=="string"&&(q=this.renderer.pathToSegments(q)),this.pathArray=q,q=q.reduce((we,Z,se)=>Z&&Z.join?(se?we+" ":"")+Z.join(" "):(Z||"").toString(),"")),/(NaN| {2}|^$)/.test(q)&&(q="M 0 0"),this[ce]!==q&&(fe.setAttribute(ce,q),this[ce]=q)}fadeOut(q){const ce=this;ce.animate({opacity:0},{duration:f(q,150),complete:function(){ce.hide()}})}fillSetter(q,ce,fe){typeof q=="string"?fe.setAttribute(ce,q):q&&this.complexColor(q,ce,fe)}getBBox(q,ce){const{alignValue:fe,element:we,renderer:Z,styles:se,textStr:ue}=this,{cache:ye,cacheKeys:Pe}=Z;var ae=we.namespaceURI===this.SVG_NS;ce=f(ce,this.rotation,0);var xe=Z.styledMode?we&&X.prototype.getStyle.call(we,"font-size"):se&&se.fontSize;let ve,le;if(G(ue)&&(le=ue.toString(),le.indexOf("<")===-1&&(le=le.replace(/[0-9]/g,"0")),le+=["",Z.rootFontSize,xe,ce,this.textWidth,fe,se&&se.textOverflow,se&&se.fontWeight].join()),le&&!q&&(ve=ye[le]),!ve){if(ae||Z.forExport){try{var me=this.fakeTS&&function(st){const it=we.querySelector(".highcharts-text-outline");it&&k(it,{display:st})};N(me)&&me("none"),ve=we.getBBox?C({},we.getBBox()):{width:we.offsetWidth,height:we.offsetHeight,x:0,y:0},N(me)&&me("")}catch{}(!ve||0>ve.width)&&(ve={x:0,y:0,width:0,height:0})}else ve=this.htmlGetBBox();if(me=ve.width,q=ve.height,ae&&(ve.height=q={"11px,17":14,"13px,20":16}[`${xe||""},${Math.round(q)}`]||q),ce){ae=Number(we.getAttribute("y")||0)-ve.y,xe={right:1,center:.5}[fe||0]||0;var be=ce*z,Le=(ce-90)*z,De=me*Math.cos(be);ce=me*Math.sin(be);var Ne=Math.cos(Le);be=Math.sin(Le),me=ve.x+xe*(me-De)+ae*Ne,Le=me+De,Ne=Le-q*Ne,De=Ne-De,ae=ve.y+ae-xe*ce+ae*be,xe=ae+ce,q=xe-q*be,ce=q-ce,ve.x=Math.min(me,Le,Ne,De),ve.y=Math.min(ae,xe,q,ce),ve.width=Math.max(me,Le,Ne,De)-ve.x,ve.height=Math.max(ae,xe,q,ce)-ve.y}}if(le&&(ue===""||0<ve.height)){for(;250<Pe.length;)delete ye[Pe.shift()];ye[le]||Pe.push(le),ye[le]=ve}return ve}getStyle(q){return O.getComputedStyle(this.element||this,"").getPropertyValue(q)}hasClass(q){return(""+this.attr("class")).split(" ").indexOf(q)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}init(q,ce){this.element=ce==="span"?S(ce):W.createElementNS(this.SVG_NS,ce),this.renderer=q,ie(this,"afterInit")}on(q,ce){const{onEvents:fe}=this;return fe[q]&&fe[q](),fe[q]=$(this.element,q,ce),this}opacitySetter(q,ce,fe){this.opacity=q=Number(Number(q).toFixed(3)),fe.setAttribute(ce,q)}removeClass(q){return this.attr("class",(""+this.attr("class")).replace(H(q)?new RegExp(`(^| )${q}( |$)`):q," ").replace(/ +/g," ").trim())}removeTextOutline(){const q=this.element.querySelector("tspan.highcharts-text-outline");q&&this.safeRemoveChild(q)}safeRemoveChild(q){const ce=q.parentNode;ce&&ce.removeChild(q)}setRadialReference(q){const ce=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=q,ce&&ce.radAttr&&ce.animate(this.renderer.getRadialAttr(q,ce.radAttr)),this}setTextPath(q,ce){ce=E(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},ce);const fe=this.renderer.url,we=this.text||this,Z=we.textPath,{attributes:se,enabled:ue}=ce;return q=q||Z&&Z.path,Z&&Z.undo(),q&&ue?(ce=$(we,"afterModifyTree",ye=>{if(q&&ue){let ae=q.attr("id");ae||q.attr("id",ae=D());var Pe={x:0,y:0};G(se.dx)&&(Pe.dx=se.dx,delete se.dx),G(se.dy)&&(Pe.dy=se.dy,delete se.dy),we.attr(Pe),this.attr({transform:""}),this.box&&(this.box=this.box.destroy()),Pe=ye.nodes.slice(0),ye.nodes.length=0,ye.nodes[0]={tagName:"textPath",attributes:C(se,{"text-anchor":se.textAnchor,href:`${fe}#${ae}`}),children:Pe}}}),we.textPath={path:q,undo:ce}):(we.attr({dx:0,dy:0}),delete we.textPath),this.added&&(we.textCache="",this.renderer.buildText(we)),this}shadow(q){var ce;const{renderer:fe}=this,we=E(((ce=this.parentGroup)===null||ce===void 0?void 0:ce.rotation)===90?{offsetX:-1,offsetY:-1}:{},F(q)?q:{});return ce=fe.shadowDefinition(we),this.attr({filter:q?`url(${fe.url}#${ce})`:"none"})}show(q=!0){return this.attr({visibility:q?"inherit":"visible"})}"stroke-widthSetter"(q,ce,fe){this[ce]=q,fe.setAttribute(ce,q)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;const q=this.getStyle("stroke-width");let ce=0,fe;return q.indexOf("px")===q.length-2?ce=y(q):q!==""&&(fe=W.createElementNS(I,"rect"),M(fe,{width:q,"stroke-width":0}),this.element.parentNode.appendChild(fe),ce=fe.getBBox().width,fe.parentNode.removeChild(fe)),ce}symbolAttr(q){const ce=this;X.symbolCustomAttribs.forEach(function(fe){ce[fe]=f(q[fe],ce[fe])}),ce.attr({d:ce.renderer.symbols[ce.symbolName](ce.x,ce.y,ce.width,ce.height,ce)})}textSetter(q){q!==this.textStr&&(delete this.textPxLength,this.textStr=q,this.added&&this.renderer.buildText(this))}titleSetter(q){const ce=this.element,fe=ce.getElementsByTagName("title")[0]||W.createElementNS(this.SVG_NS,"title");ce.insertBefore?ce.insertBefore(fe,ce.firstChild):ce.appendChild(fe),fe.textContent=String(f(q,"")).replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){const q=this.element;return q.parentNode.appendChild(q),this}translate(q,ce){return this.attr({translateX:q,translateY:ce})}updateTransform(){const{element:q,matrix:ce,rotation:fe=0,scaleX:we,scaleY:Z,translateX:se=0,translateY:ue=0}=this,ye=["translate("+se+","+ue+")"];G(ce)&&ye.push("matrix("+ce.join(",")+")"),fe&&ye.push("rotate("+fe+" "+f(this.rotationOriginX,q.getAttribute("x"),0)+" "+f(this.rotationOriginY,q.getAttribute("y")||0)+")"),(G(we)||G(Z))&&ye.push("scale("+f(we,1)+" "+f(Z,1)+")"),ye.length&&!(this.text||this).textPath&&q.setAttribute("transform",ye.join(" "))}visibilitySetter(q,ce,fe){q==="inherit"?fe.removeAttribute(ce):this[ce]!==q&&fe.setAttribute(ce,q),this[ce]=q}xGetter(q){return this.element.nodeName==="circle"&&(q==="x"?q="cx":q==="y"&&(q="cy")),this._defaultGetter(q)}zIndexSetter(q,ce){var fe=this.renderer,we=this.parentGroup;const Z=(we||fe).element||fe.box,se=this.element;fe=Z===fe.box;let ue=!1,ye;var Pe=this.added;let ae;if(G(q)?(se.setAttribute("data-z-index",q),q=+q,this[ce]===q&&(Pe=!1)):G(this[ce])&&se.removeAttribute("data-z-index"),this[ce]=q,Pe){for((q=this.zIndex)&&we&&(we.handleZ=!0),ce=Z.childNodes,ae=ce.length-1;0<=ae&&!ue;ae--)we=ce[ae],Pe=we.getAttribute("data-z-index"),ye=!G(Pe),we!==se&&(0>q&&ye&&!fe&&!ae?(Z.insertBefore(se,ce[ae]),ue=!0):(y(Pe)<=q||ye&&(!G(q)||0<=q))&&(Z.insertBefore(se,ce[ae+1]),ue=!0));ue||(Z.insertBefore(se,ce[fe?3:0]),ue=!0)}return ue}}return X.symbolCustomAttribs="anchorX anchorY clockwise end height innerR r start width x y".split(" "),X.prototype.strokeSetter=X.prototype.fillSetter,X.prototype.yGetter=X.prototype.xGetter,X.prototype.matrixSetter=X.prototype.rotationOriginXSetter=X.prototype.rotationOriginYSetter=X.prototype.rotationSetter=X.prototype.scaleXSetter=X.prototype.scaleYSetter=X.prototype.translateXSetter=X.prototype.translateYSetter=X.prototype.verticalAlignSetter=function(te,q){this[q]=te,this.doTransform=!0},X}),r(l,"Core/Renderer/RendererRegistry.js",[l["Core/Globals.js"]],function(c){var d;return function(m){m.rendererTypes={};let n;m.getRendererType=function(T=n){return m.rendererTypes[T]||m.rendererTypes[n]},m.registerRendererType=function(T,V,Q){m.rendererTypes[T]=V,(!n||Q)&&(n=T,c.Renderer=V)}}(d||(d={})),d}),r(l,"Core/Renderer/SVG/SVGLabel.js",[l["Core/Renderer/SVG/SVGElement.js"],l["Core/Utilities.js"]],function(c,d){const{defined:m,extend:n,isNumber:T,merge:V,pick:Q,removeEvent:z}=d;class W extends c{constructor(I,O,$,M,S,k,G,U,C,ie){super(),this.paddingRightSetter=this.paddingLeftSetter=this.paddingSetter,this.init(I,"g"),this.textStr=O,this.x=$,this.y=M,this.anchorX=k,this.anchorY=G,this.baseline=C,this.className=ie,this.addClass(ie==="button"?"highcharts-no-tooltip":"highcharts-label"),ie&&this.addClass("highcharts-"+ie),this.text=I.text(void 0,0,0,U).attr({zIndex:1});let J;typeof S=="string"&&((J=/^url\((.*?)\)$/.test(S))||this.renderer.symbols[S])&&(this.symbolKey=S),this.bBox=W.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=I.styledMode||J,this.deferredAttr={},this.alignFactor=0}alignSetter(I){I={left:0,center:.5,right:1}[I],I!==this.alignFactor&&(this.alignFactor=I,this.bBox&&T(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(I,O){this.anchorX=I,this.boxAttr(O,Math.round(I)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(I,O){this.anchorY=I,this.boxAttr(O,I-this.ySetting)}boxAttr(I,O){this.box?this.box.attr(I,O):this.deferredAttr[I]=O}css(I){if(I){const O={};I=V(I),W.textProps.forEach($=>{typeof I[$]<"u"&&(O[$]=I[$],delete I[$])}),this.text.css(O),"fontSize"in O||"fontWeight"in O?this.updateTextPadding():("width"in O||"textOverflow"in O)&&this.updateBoxSize()}return c.prototype.css.call(this,I)}destroy(){z(this.element,"mouseenter"),z(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),c.prototype.destroy.call(this)}fillSetter(I,O){I&&(this.needsBox=!0),this.fill=I,this.boxAttr(O,I)}getBBox(){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();const I=this.padding,O=Q(this.paddingLeft,I);return{width:this.width,height:this.height,x:this.bBox.x-O,y:this.bBox.y-I}}getCrispAdjust(){return this.renderer.styledMode&&this.box?this.box.strokeWidth()%2/2:(this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(I){this.heightSetting=I}onAdd(){this.text.add(this),this.attr({text:Q(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&m(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(I,O){T(I)?I!==this[O]&&(this[O]=I,this.updateTextPadding()):this[O]=void 0}rSetter(I,O){this.boxAttr(O,I)}strokeSetter(I,O){this.stroke=I,this.boxAttr(O,I)}"stroke-widthSetter"(I,O){I&&(this.needsBox=!0),this["stroke-width"]=I,this.boxAttr(O,I)}"text-alignSetter"(I){this.textAlign=I}textSetter(I){typeof I<"u"&&this.text.attr({text:I}),this.updateTextPadding()}updateBoxSize(){var I=this.text;const O={},$=this.padding,M=this.bBox=T(this.widthSetting)&&T(this.heightSetting)&&!this.textAlign||!m(I.textStr)?W.emptyBBox:I.getBBox();this.width=this.getPaddedWidth(),this.height=(this.heightSetting||M.height||0)+2*$;const S=this.renderer.fontMetrics(I);this.baselineOffset=$+Math.min((this.text.firstLineMetrics||S).b,M.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-S.h)/2),this.needsBox&&!I.textPath&&(this.box||(I=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect(),I.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),I.add(this)),I=this.getCrispAdjust(),O.x=I,O.y=(this.baseline?-this.baselineOffset:0)+I,O.width=Math.round(this.width),O.height=Math.round(this.height),this.box.attr(n(O,this.deferredAttr)),this.deferredAttr={})}updateTextPadding(){const I=this.text;if(!I.textPath){this.updateBoxSize();const O=this.baseline?0:this.baselineOffset;let $=Q(this.paddingLeft,this.padding);m(this.widthSetting)&&this.bBox&&(this.textAlign==="center"||this.textAlign==="right")&&($+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),($!==I.x||O!==I.y)&&(I.attr("x",$),I.hasBoxWidthChanged&&(this.bBox=I.getBBox(!0)),typeof O<"u"&&I.attr("y",O)),I.x=$,I.y=O}}widthSetter(I){this.widthSetting=T(I)?I:void 0}getPaddedWidth(){var I=this.padding;const O=Q(this.paddingLeft,I);return I=Q(this.paddingRight,I),(this.widthSetting||this.bBox.width||0)+O+I}xSetter(I){this.x=I,this.alignFactor&&(I-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(I),this.attr("translateX",this.xSetting)}ySetter(I){this.ySetting=this.y=Math.round(I),this.attr("translateY",this.ySetting)}}return W.emptyBBox={width:0,height:0,x:0,y:0},W.textProps="color direction fontFamily fontSize fontStyle fontWeight lineHeight textAlign textDecoration textOutline textOverflow whiteSpace width".split(" "),W}),r(l,"Core/Renderer/SVG/Symbols.js",[l["Core/Utilities.js"]],function(c){function d(z,W,K,I,O){const $=[];if(O){const M=O.start||0,S=Q(O.r,K);K=Q(O.r,I||K),I=(O.end||0)-.001;const k=O.innerR,G=Q(O.open,.001>Math.abs((O.end||0)-M-2*Math.PI)),U=Math.cos(M),C=Math.sin(M),ie=Math.cos(I),J=Math.sin(I),N=Q(O.longArc,.001>I-M-Math.PI?0:1);let F=["A",S,K,0,N,Q(O.clockwise,1),z+S*ie,W+K*J];F.params={start:M,end:I,cx:z,cy:W},$.push(["M",z+S*U,W+K*C],F),T(k)&&(F=["A",k,k,0,N,T(O.clockwise)?1-O.clockwise:0,z+k*U,W+k*C],F.params={start:I,end:M,cx:z,cy:W},$.push(G?["M",z+k*ie,W+k*J]:["L",z+k*ie,W+k*J],F)),G||$.push(["Z"])}return $}function m(z,W,K,I,O){return O&&O.r?n(z,W,K,I,O):[["M",z,W],["L",z+K,W],["L",z+K,W+I],["L",z,W+I],["Z"]]}function n(z,W,K,I,O){return O=(O==null?void 0:O.r)||0,[["M",z+O,W],["L",z+K-O,W],["A",O,O,0,0,1,z+K,W+O],["L",z+K,W+I-O],["A",O,O,0,0,1,z+K-O,W+I],["L",z+O,W+I],["A",O,O,0,0,1,z,W+I-O],["L",z,W+O],["A",O,O,0,0,1,z+O,W],["Z"]]}const{defined:T,isNumber:V,pick:Q}=c;return{arc:d,callout:function(z,W,K,I,O){const $=Math.min(O&&O.r||0,K,I),M=$+6,S=O&&O.anchorX;O=O&&O.anchorY||0;const k=n(z,W,K,I,{r:$});return V(S)&&(z+S>=K?O>W+M&&O<W+I-M?k.splice(3,1,["L",z+K,O-6],["L",z+K+6,O],["L",z+K,O+6],["L",z+K,W+I-$]):k.splice(3,1,["L",z+K,I/2],["L",S,O],["L",z+K,I/2],["L",z+K,W+I-$]):0>=z+S?O>W+M&&O<W+I-M?k.splice(7,1,["L",z,O+6],["L",z-6,O],["L",z,O-6],["L",z,W+$]):k.splice(7,1,["L",z,I/2],["L",S,O],["L",z,I/2],["L",z,W+$]):O&&O>I&&S>z+M&&S<z+K-M?k.splice(5,1,["L",S+6,W+I],["L",S,W+I+6],["L",S-6,W+I],["L",z+$,W+I]):O&&0>O&&S>z+M&&S<z+K-M&&k.splice(1,1,["L",S-6,W],["L",S,W-6],["L",S+6,W],["L",K-$,W])),k},circle:function(z,W,K,I){return d(z+K/2,W+I/2,K/2,I/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(z,W,K,I){return[["M",z+K/2,W],["L",z+K,W+I/2],["L",z+K/2,W+I],["L",z,W+I/2],["Z"]]},rect:m,roundedRect:n,square:m,triangle:function(z,W,K,I){return[["M",z+K/2,W],["L",z+K,W+I],["L",z,W+I],["Z"]]},"triangle-down":function(z,W,K,I){return[["M",z,W],["L",z+K,W],["L",z+K/2,W+I],["Z"]]}}}),r(l,"Core/Renderer/SVG/TextBuilder.js",[l["Core/Renderer/HTML/AST.js"],l["Core/Globals.js"],l["Core/Utilities.js"]],function(c,d,m){const{doc:n,SVG_NS:T,win:V}=d,{attr:Q,extend:z,fireEvent:W,isString:K,objectEach:I,pick:O}=m;class ${constructor(S){const k=S.styles;this.renderer=S.renderer,this.svgElement=S,this.width=S.textWidth,this.textLineHeight=k&&k.lineHeight,this.textOutline=k&&k.textOutline,this.ellipsis=!(!k||k.textOverflow!=="ellipsis"),this.noWrap=!(!k||k.whiteSpace!=="nowrap")}buildSVG(){const S=this.svgElement,k=S.element;var G=S.renderer,U=O(S.textStr,"").toString();const C=U.indexOf("<")!==-1,ie=k.childNodes;G=!S.added&&G.box;const J=/<br.*?>/g;var N=[U,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,S.getStyle("font-size"),this.width].join();if(N!==S.textCache){for(S.textCache=N,delete S.actualWidth,N=ie.length;N--;)k.removeChild(ie[N]);C||this.ellipsis||this.width||S.textPath||U.indexOf(" ")!==-1&&(!this.noWrap||J.test(U))?U!==""&&(G&&G.appendChild(k),U=new c(U),this.modifyTree(U.nodes),U.addToDOM(k),this.modifyDOM(),this.ellipsis&&(k.textContent||"").indexOf("…")!==-1&&S.attr("title",this.unescapeEntities(S.textStr||"",["&lt;","&gt;"])),G&&G.removeChild(k)):k.appendChild(n.createTextNode(this.unescapeEntities(U))),K(this.textOutline)&&S.applyTextOutline&&S.applyTextOutline(this.textOutline)}}modifyDOM(){const S=this.svgElement,k=Q(S.element,"x");S.firstLineMetrics=void 0;let G;for(;(G=S.element.firstChild)&&/^[\s\u200B]*$/.test(G.textContent||" ");)S.element.removeChild(G);[].forEach.call(S.element.querySelectorAll("tspan.highcharts-br"),(J,N)=>{J.nextSibling&&J.previousSibling&&(N===0&&J.previousSibling.nodeType===1&&(S.firstLineMetrics=S.renderer.fontMetrics(J.previousSibling)),Q(J,{dy:this.getLineHeight(J.nextSibling),x:k}))});const U=this.width||0;if(U){var C=(J,N)=>{var F=J.textContent||"";const H=F.replace(/([^\^])-/g,"$1- ").split(" ");var E=!this.noWrap&&(1<H.length||1<S.element.childNodes.length);const L=this.getLineHeight(N);let f=0,y=S.actualWidth;if(this.ellipsis)F&&this.truncate(J,F,void 0,0,Math.max(0,U-.8*L),(b,D)=>b.substring(0,D)+"…");else if(E){for(F=[],E=[];N.firstChild&&N.firstChild!==J;)E.push(N.firstChild),N.removeChild(N.firstChild);for(;H.length;)H.length&&!this.noWrap&&0<f&&(F.push(J.textContent||""),J.textContent=H.join(" ").replace(/- /g,"-")),this.truncate(J,void 0,H,f===0&&y||0,U,(b,D)=>H.slice(0,D).join(" ").replace(/- /g,"-")),y=S.actualWidth,f++;E.forEach(b=>{N.insertBefore(b,J)}),F.forEach(b=>{N.insertBefore(n.createTextNode(b),J),b=n.createElementNS(T,"tspan"),b.textContent="​",Q(b,{dy:L,x:k}),N.insertBefore(b,J)})}},ie=J=>{[].slice.call(J.childNodes).forEach(N=>{N.nodeType===V.Node.TEXT_NODE?C(N,J):(N.className.baseVal.indexOf("highcharts-br")!==-1&&(S.actualWidth=0),ie(N))})};ie(S.element)}}getLineHeight(S){return S=S.nodeType===V.Node.TEXT_NODE?S.parentElement:S,this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(S||this.svgElement.element).h}modifyTree(S){const k=(G,U)=>{const{attributes:C={},children:ie,style:J={},tagName:N}=G,F=this.renderer.styledMode;N==="b"||N==="strong"?F?C.class="highcharts-strong":J.fontWeight="bold":(N==="i"||N==="em")&&(F?C.class="highcharts-emphasized":J.fontStyle="italic"),J&&J.color&&(J.fill=J.color),N==="br"?(C.class="highcharts-br",G.textContent="​",(U=S[U+1])&&U.textContent&&(U.textContent=U.textContent.replace(/^ +/gm,""))):N==="a"&&ie&&ie.some(H=>H.tagName==="#text")&&(G.children=[{children:ie,tagName:"tspan"}]),N!=="#text"&&N!=="a"&&(G.tagName="tspan"),z(G,{attributes:C,style:J}),ie&&ie.filter(H=>H.tagName!=="#text").forEach(k)};S.forEach(k),W(this.svgElement,"afterModifyTree",{nodes:S})}truncate(S,k,G,U,C,ie){const J=this.svgElement,{rotation:N}=J,F=[];let H=G?1:0,E=(k||G||"").length,L=E,f,y;const b=function(D,X){if(D=X||D,(X=S.parentNode)&&typeof F[D]>"u"&&X.getSubStringLength)try{F[D]=U+X.getSubStringLength(0,G?D+1:D)}catch{}return F[D]};if(J.rotation=0,y=b(S.textContent.length),U+y>C){for(;H<=E;)L=Math.ceil((H+E)/2),G&&(f=ie(G,L)),y=b(L,f&&f.length-1),H===E?H=E+1:y>C?E=L-1:H=L;E===0?S.textContent="":k&&E===k.length-1||(S.textContent=f||ie(k||G,L))}G&&G.splice(0,L),J.actualWidth=y,J.rotation=N}unescapeEntities(S,k){return I(this.renderer.escapes,function(G,U){k&&k.indexOf(G)!==-1||(S=S.toString().replace(new RegExp(G,"g"),U))}),S}}return $}),r(l,"Core/Renderer/SVG/SVGRenderer.js",[l["Core/Renderer/HTML/AST.js"],l["Core/Color/Color.js"],l["Core/Globals.js"],l["Core/Renderer/RendererRegistry.js"],l["Core/Renderer/SVG/SVGElement.js"],l["Core/Renderer/SVG/SVGLabel.js"],l["Core/Renderer/SVG/Symbols.js"],l["Core/Renderer/SVG/TextBuilder.js"],l["Core/Utilities.js"]],function(c,d,m,n,T,V,Q,z,W){const{charts:K,deg2rad:I,doc:O,isFirefox:$,isMS:M,isWebKit:S,noop:k,SVG_NS:G,symbolSizes:U,win:C}=m,{addEvent:ie,attr:J,createElement:N,css:F,defined:H,destroyObjectProperties:E,extend:L,isArray:f,isNumber:y,isObject:b,isString:D,merge:X,pick:te,pInt:q,uniqueKey:ce}=W;let fe;class we{constructor(se,ue,ye,Pe,ae,xe,ve){this.width=this.url=this.style=this.imgCount=this.height=this.gradients=this.globalAnimation=this.defs=this.chartIndex=this.cacheKeys=this.cache=this.boxWrapper=this.box=this.alignedObjects=void 0,this.init(se,ue,ye,Pe,ae,xe,ve)}init(se,ue,ye,Pe,ae,xe,ve){const le=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),me=le.element;ve||le.css(this.getStyle(Pe)),se.appendChild(me),J(se,"dir","ltr"),se.innerHTML.indexOf("xmlns")===-1&&J(me,"xmlns",this.SVG_NS),this.box=me,this.boxWrapper=le,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(O.createTextNode("Created with Highcharts 11.0.1")),this.defs=this.createElement("defs").add(),this.allowHTML=xe,this.forExport=ae,this.styledMode=ve,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=le.getStyle("font-size"),this.setSize(ue,ye,!1);let be;$&&se.getBoundingClientRect&&(ue=function(){F(se,{left:0,top:0}),be=se.getBoundingClientRect(),F(se,{left:Math.ceil(be.left)-be.left+"px",top:Math.ceil(be.top)-be.top+"px"})},ue(),this.unSubPixelFix=ie(C,"resize",ue))}definition(se){return new c([se]).addToDOM(this.defs.element)}getReferenceURL(){if(($||S)&&O.getElementsByTagName("base").length){if(!H(fe)){var se=ce();se=new c([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:se},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${se})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(O.body),F(se,{position:"fixed",top:0,left:0,zIndex:9e5});const ue=O.elementFromPoint(6,6);fe=(ue&&ue.id)==="hitme",O.body.removeChild(se)}if(fe)return C.location.href.split("#")[0].replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20")}return""}getStyle(se){return this.style=L({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},se)}setStyle(se){this.boxWrapper.css(this.getStyle(se))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){const se=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),E(this.gradients||{}),this.gradients=null,this.defs=se.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null}createElement(se){const ue=new this.Element;return ue.init(this,se),ue}getRadialAttr(se,ue){return{cx:se[0]-se[2]/2+(ue.cx||0)*se[2],cy:se[1]-se[2]/2+(ue.cy||0)*se[2],r:(ue.r||0)*se[2]}}shadowDefinition(se){const ue=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(se).map(Pe=>se[Pe])].join("-").replace(/[^a-z0-9\-]/g,""),ye=X({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},se);return this.defs.element.querySelector(`#${ue}`)||this.definition({tagName:"filter",attributes:{id:ue},children:[{tagName:"feDropShadow",attributes:{dx:ye.offsetX,dy:ye.offsetY,"flood-color":ye.color,"flood-opacity":Math.min(5*ye.opacity,1),stdDeviation:ye.width/2}}]}),ue}buildText(se){new z(se).buildSVG()}getContrast(se){return se=d.parse(se).rgba.map(ue=>(ue/=255,.03928>=ue?ue/12.92:Math.pow((ue+.055)/1.055,2.4))),se=.2126*se[0]+.7152*se[1]+.0722*se[2],1.05/(se+.05)>(se+.05)/.05?"#FFFFFF":"#000000"}button(se,ue,ye,Pe,ae={},xe,ve,le,me,be){const Le=this.label(se,ue,ye,me,void 0,void 0,be,void 0,"button"),De=this.styledMode;se=ae.states||{};let Ne=0;ae=X(ae),delete ae.states;const st=X({color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},ae.style);delete ae.style;let it=c.filterUserAttributes(ae);Le.attr(X({padding:8,r:2},it));let ht,ke,Be;return De||(it=X({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1},it),xe=X(it,{fill:"#e6e6e6"},c.filterUserAttributes(xe||se.hover||{})),ht=xe.style,delete xe.style,ve=X(it,{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},c.filterUserAttributes(ve||se.select||{})),ke=ve.style,delete ve.style,le=X(it,{style:{color:"#cccccc"}},c.filterUserAttributes(le||se.disabled||{})),Be=le.style,delete le.style),ie(Le.element,M?"mouseover":"mouseenter",function(){Ne!==3&&Le.setState(1)}),ie(Le.element,M?"mouseout":"mouseleave",function(){Ne!==3&&Le.setState(Ne)}),Le.setState=function(Ue){Ue!==1&&(Le.state=Ne=Ue),Le.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][Ue||0]),De||(Le.attr([it,xe,ve,le][Ue||0]),Ue=[st,ht,ke,Be][Ue||0],b(Ue)&&Le.css(Ue))},De||(Le.attr(it).css(L({cursor:"default"},st)),be&&Le.text.css({pointerEvents:"none"})),Le.on("touchstart",Ue=>Ue.stopPropagation()).on("click",function(Ue){Ne!==3&&Pe.call(Le,Ue)})}crispLine(se,ue,ye="round"){const Pe=se[0],ae=se[1];return H(Pe[1])&&Pe[1]===ae[1]&&(Pe[1]=ae[1]=Math[ye](Pe[1])-ue%2/2),H(Pe[2])&&Pe[2]===ae[2]&&(Pe[2]=ae[2]=Math[ye](Pe[2])+ue%2/2),se}path(se){const ue=this.styledMode?{}:{fill:"none"};return f(se)?ue.d=se:b(se)&&L(ue,se),this.createElement("path").attr(ue)}circle(se,ue,ye){return se=b(se)?se:typeof se>"u"?{}:{x:se,y:ue,r:ye},ue=this.createElement("circle"),ue.xSetter=ue.ySetter=function(Pe,ae,xe){xe.setAttribute("c"+ae,Pe)},ue.attr(se)}arc(se,ue,ye,Pe,ae,xe){return b(se)?(Pe=se,ue=Pe.y,ye=Pe.r,se=Pe.x):Pe={innerR:Pe,start:ae,end:xe},se=this.symbol("arc",se,ue,ye,ye,Pe),se.r=ye,se}rect(se,ue,ye,Pe,ae,xe){se=b(se)?se:typeof se>"u"?{}:{x:se,y:ue,r:ae,width:Math.max(ye||0,0),height:Math.max(Pe||0,0)};const ve=this.createElement("rect");return this.styledMode||(typeof xe<"u"&&(se["stroke-width"]=xe,L(se,ve.crisp(se))),se.fill="none"),ve.rSetter=function(le,me,be){ve.r=le,J(be,{rx:le,ry:le})},ve.rGetter=function(){return ve.r||0},ve.attr(se)}roundedRect(se){return this.symbol("roundedRect").attr(se)}setSize(se,ue,ye){this.width=se,this.height=ue,this.boxWrapper.animate({width:se,height:ue},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:te(ye,!0)?void 0:0}),this.alignElements()}g(se){const ue=this.createElement("g");return se?ue.attr({class:"highcharts-"+se}):ue}image(se,ue,ye,Pe,ae,xe){const ve={preserveAspectRatio:"none"},le=function(be,Le){be.setAttributeNS?be.setAttributeNS("http://www.w3.org/1999/xlink","href",Le):be.setAttribute("hc-svg-href",Le)};y(ue)&&(ve.x=ue),y(ye)&&(ve.y=ye),y(Pe)&&(ve.width=Pe),y(ae)&&(ve.height=ae);const me=this.createElement("image").attr(ve);return ue=function(be){le(me.element,se),xe.call(me,be)},xe?(le(me.element,"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),ye=new C.Image,ie(ye,"load",ue),ye.src=se,ye.complete&&ue({})):le(me.element,se),me}symbol(se,ue,ye,Pe,ae,xe){const ve=this,le=/^url\((.*?)\)$/,me=le.test(se),be=!me&&(this.symbols[se]?se:"circle"),Le=be&&this.symbols[be];let De,Ne,st,it;if(Le)typeof ue=="number"&&(Ne=Le.call(this.symbols,Math.round(ue||0),Math.round(ye||0),Pe||0,ae||0,xe)),De=this.path(Ne),ve.styledMode||De.attr("fill","none"),L(De,{symbolName:be||void 0,x:ue,y:ye,width:Pe,height:ae}),xe&&L(De,xe);else if(me){st=se.match(le)[1];const ht=De=this.image(st);ht.imgwidth=te(xe&&xe.width,U[st]&&U[st].width),ht.imgheight=te(xe&&xe.height,U[st]&&U[st].height),it=ke=>ke.attr({width:ke.width,height:ke.height}),["width","height"].forEach(function(ke){ht[ke+"Setter"]=function(Be,Ue){this[Ue]=Be;const{alignByTranslate:We,element:nt,width:wt,height:Ut,imgwidth:Vt,imgheight:yi}=this;if(Be=this["img"+Ue],H(Be)){let ri=1;xe&&xe.backgroundSize==="within"&&wt&&Ut?(ri=Math.min(wt/Vt,Ut/yi),J(nt,{width:Math.round(Vt*ri),height:Math.round(yi*ri)})):nt&&nt.setAttribute(Ue,Be),We||this.translate(((wt||0)-Vt*ri)/2,((Ut||0)-yi*ri)/2)}}}),H(ue)&&ht.attr({x:ue,y:ye}),ht.isImg=!0,H(ht.imgwidth)&&H(ht.imgheight)?it(ht):(ht.attr({width:0,height:0}),N("img",{onload:function(){const ke=K[ve.chartIndex];this.width===0&&(F(this,{position:"absolute",top:"-999em"}),O.body.appendChild(this)),U[st]={width:this.width,height:this.height},ht.imgwidth=this.width,ht.imgheight=this.height,ht.element&&it(ht),this.parentNode&&this.parentNode.removeChild(this),ve.imgCount--,!ve.imgCount&&ke&&!ke.hasLoaded&&ke.onload()},src:st}),this.imgCount++)}return De}clipRect(se,ue,ye,Pe){const ae=ce()+"-",xe=this.createElement("clipPath").attr({id:ae}).add(this.defs);return se=this.rect(se,ue,ye,Pe,0).add(xe),se.id=ae,se.clipPath=xe,se.count=0,se}text(se,ue,ye,Pe){const ae={};return Pe&&(this.allowHTML||!this.forExport)?this.html(se,ue,ye):(ae.x=Math.round(ue||0),ye&&(ae.y=Math.round(ye)),H(se)&&(ae.text=se),se=this.createElement("text").attr(ae),(!Pe||this.forExport&&!this.allowHTML)&&(se.xSetter=function(xe,ve,le){const me=le.getElementsByTagName("tspan"),be=le.getAttribute(ve);for(let Le=0,De;Le<me.length;Le++)De=me[Le],De.getAttribute(ve)===be&&De.setAttribute(ve,xe);le.setAttribute(ve,xe)}),se)}fontMetrics(se){se=q(T.prototype.getStyle.call(se,"font-size")||0);const ue=24>se?se+3:Math.round(1.2*se);return{h:ue,b:Math.round(.8*ue),f:se}}rotCorr(se,ue,ye){let Pe=se;return ue&&ye&&(Pe=Math.max(Pe*Math.cos(ue*I),4)),{x:-se/3*Math.sin(ue*I),y:Pe}}pathToSegments(se){const ue=[],ye=[],Pe={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let ae=0;ae<se.length;ae++)D(ye[0])&&y(se[ae])&&ye.length===Pe[ye[0].toUpperCase()]&&se.splice(ae,0,ye[0].replace("M","L").replace("m","l")),typeof se[ae]=="string"&&(ye.length&&ue.push(ye.slice(0)),ye.length=0),ye.push(se[ae]);return ue.push(ye.slice(0)),ue}label(se,ue,ye,Pe,ae,xe,ve,le,me){return new V(this,se,ue,ye,Pe,ae,xe,ve,le,me)}alignElements(){this.alignedObjects.forEach(se=>se.align())}}return L(we.prototype,{Element:T,SVG_NS:G,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:Q,draw:k}),n.registerRendererType("svg",we,!0),we}),r(l,"Core/Renderer/HTML/HTMLElement.js",[l["Core/Globals.js"],l["Core/Renderer/SVG/SVGElement.js"],l["Core/Utilities.js"]],function(c,d,m){const{isFirefox:n,isMS:T,isWebKit:V,win:Q}=c,{css:z,defined:W,extend:K,pick:I,pInt:O}=m,$=[];class M extends d{static compose(k){if(m.pushUnique($,k)){const G=M.prototype,U=k.prototype;U.getSpanCorrection=G.getSpanCorrection,U.htmlCss=G.htmlCss,U.htmlGetBBox=G.htmlGetBBox,U.htmlUpdateTransform=G.htmlUpdateTransform,U.setSpanRotation=G.setSpanRotation}return k}getSpanCorrection(k,G,U){this.xCorr=-k*U,this.yCorr=-G}htmlCss(k){const G=this.element.tagName==="SPAN"&&k&&"width"in k,U=I(G&&k.width,void 0);let C;return G&&(delete k.width,this.textWidth=U,C=!0),k&&k.textOverflow==="ellipsis"&&(k.whiteSpace="nowrap",k.overflow="hidden"),this.styles=K(this.styles,k),z(this.element,k),C&&this.htmlUpdateTransform(),this}htmlGetBBox(){const k=this.element;return{x:k.offsetLeft,y:k.offsetTop,width:k.offsetWidth,height:k.offsetHeight}}htmlUpdateTransform(){if(this.added){var k=this.renderer,G=this.element,U=this.x||0,C=this.y||0,ie=this.textAlign||"left",J={left:0,center:.5,right:1}[ie],N=this.styles,F=N&&N.whiteSpace;if(z(G,{marginLeft:this.translateX||0,marginTop:this.translateY||0}),G.tagName==="SPAN"){N=this.rotation;const E=this.textWidth&&O(this.textWidth),L=[N,ie,G.innerHTML,this.textWidth,this.textAlign].join();let f=!1;if(E!==this.oldTextWidth){if(this.textPxLength)var H=this.textPxLength;else z(G,{width:"",whiteSpace:F||"nowrap"}),H=G.offsetWidth;(E>this.oldTextWidth||H>E)&&(/[ \-]/.test(G.textContent||G.innerText)||G.style.textOverflow==="ellipsis")&&(z(G,{width:H>E||N?E+"px":"auto",display:"block",whiteSpace:F||"normal"}),this.oldTextWidth=E,f=!0)}this.hasBoxWidthChanged=f,L!==this.cTT&&(k=k.fontMetrics(G).b,!W(N)||N===(this.oldRotation||0)&&ie===this.oldAlign||this.setSpanRotation(N,J,k),this.getSpanCorrection(!W(N)&&this.textPxLength||G.offsetWidth,k,J,N,ie)),z(G,{left:U+(this.xCorr||0)+"px",top:C+(this.yCorr||0)+"px"}),this.cTT=L,this.oldRotation=N,this.oldAlign=ie}}else this.alignOnAdd=!0}setSpanRotation(k,G,U){const C={},ie=T&&!/Edge/.test(Q.navigator.userAgent)?"-ms-transform":V?"-webkit-transform":n?"MozTransform":Q.opera?"-o-transform":void 0;ie&&(C[ie]=C.transform="rotate("+k+"deg)",C[ie+(n?"Origin":"-origin")]=C.transformOrigin=100*G+"% "+U+"px",z(this.element,C))}}return M}),r(l,"Core/Renderer/HTML/HTMLRenderer.js",[l["Core/Renderer/HTML/AST.js"],l["Core/Renderer/SVG/SVGElement.js"],l["Core/Renderer/SVG/SVGRenderer.js"],l["Core/Utilities.js"]],function(c,d,m,n){const{attr:T,createElement:V,extend:Q,pick:z}=n,W=[];class K extends m{static compose(O){return n.pushUnique(W,O)&&(O.prototype.html=K.prototype.html),O}html(O,$,M){const S=this.createElement("span"),k=S.element,G=S.renderer,U=function(C,ie){["opacity","visibility"].forEach(function(J){C[J+"Setter"]=function(N,F,H){const E=C.div?C.div.style:ie;d.prototype[J+"Setter"].call(this,N,F,H),E&&(E[F]=N)}}),C.addedSetters=!0};return S.textSetter=function(C){C!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,c.setElementHTML(this.element,z(C,"")),this.textStr=C,S.doTransform=!0)},U(S,S.element.style),S.xSetter=S.ySetter=S.alignSetter=S.rotationSetter=function(C,ie){ie==="align"?S.alignValue=S.textAlign=C:S[ie]=C,S.doTransform=!0},S.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)},S.attr({text:O,x:Math.round($),y:Math.round(M)}).css({position:"absolute"}),G.styledMode||S.css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),k.style.whiteSpace="nowrap",S.css=S.htmlCss,S.add=function(C){const ie=G.box.parentNode,J=[];let N;if(this.parentGroup=C){if(N=C.div,!N){for(;C;)J.push(C),C=C.parentGroup;J.reverse().forEach(function(F){function H(y,b){F[b]=y,b==="translateX"?f.left=y+"px":f.top=y+"px",F.doTransform=!0}const E=T(F.element,"class"),L=F.styles||{};N=F.div=F.div||V("div",E?{className:E}:void 0,{position:"absolute",left:(F.translateX||0)+"px",top:(F.translateY||0)+"px",display:F.display,opacity:F.opacity,visibility:F.visibility},N||ie);const f=N.style;Q(F,{classSetter:function(y){return function(b){this.element.setAttribute("class",b),y.className=b}}(N),css:function(y){return S.css.call(F,y),["cursor","pointerEvents"].forEach(b=>{y[b]&&(f[b]=y[b])}),F},on:function(){return J[0].div&&S.on.apply({element:J[0].div,onEvents:F.onEvents},arguments),F},translateXSetter:H,translateYSetter:H}),F.addedSetters||U(F),F.css(L)})}}else N=ie;return N.appendChild(k),S.added=!0,S.alignOnAdd&&S.htmlUpdateTransform(),S},S}}return K}),r(l,"Core/Axis/AxisDefaults.js",[],function(){var c;return function(d){d.defaultXAxisOptions={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotation:void 0,autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",padding:5,reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,opposite:!1,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",rotation:0,useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},type:"linear",uniqueNames:!0,visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},d.defaultYAxisOptions={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){const{numberFormatter:m}=this.axis.chart;return m(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},d.defaultLeftAxisOptions={title:{rotation:270}},d.defaultRightAxisOptions={title:{rotation:90}},d.defaultBottomAxisOptions={labels:{autoRotation:[-45]},margin:15,title:{rotation:0}},d.defaultTopAxisOptions={labels:{autoRotation:[-45]},margin:15,title:{rotation:0}}}(c||(c={})),c}),r(l,"Core/Foundation.js",[l["Core/Utilities.js"]],function(c){const{addEvent:d,isFunction:m,objectEach:n,removeEvent:T}=c;var V;return function(Q){Q.registerEventOptions=function(z,W){z.eventOptions=z.eventOptions||{},n(W.events,function(K,I){z.eventOptions[I]!==K&&(z.eventOptions[I]&&(T(z,I,z.eventOptions[I]),delete z.eventOptions[I]),m(K)&&(z.eventOptions[I]=K,d(z,I,K,{order:0})))})}}(V||(V={})),V}),r(l,"Core/Axis/Tick.js",[l["Core/FormatUtilities.js"],l["Core/Globals.js"],l["Core/Utilities.js"]],function(c,d,m){const{deg2rad:n}=d,{clamp:T,correctFloat:V,defined:Q,destroyObjectProperties:z,extend:W,fireEvent:K,isNumber:I,merge:O,objectEach:$,pick:M}=m;class S{constructor(G,U,C,ie,J){this.isNewLabel=this.isNew=!0,this.axis=G,this.pos=U,this.type=C||"",this.parameters=J||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,K(this,"init"),C||ie||this.addLabel()}addLabel(){const G=this,U=G.axis;var C=U.options;const ie=U.chart;var J=U.categories;const N=U.logarithmic,F=U.names,H=G.pos,E=M(G.options&&G.options.labels,C.labels);var L=U.tickPositions;const f=H===L[0],y=H===L[L.length-1],b=(!E.step||E.step===1)&&U.tickInterval===1;L=L.info;let D=G.label,X,te,q;J=this.parameters.category||(J?M(J[H],F[H],H):H),N&&I(J)&&(J=V(N.lin2log(J))),U.dateTime&&(L?(te=ie.time.resolveDTLFormat(C.dateTimeLabelFormats[!C.grid&&L.higherRanks[H]||L.unitName]),X=te.main):I(J)&&(X=U.dateTime.getXDateFormat(J,C.dateTimeLabelFormats||{}))),G.isFirst=f,G.isLast=y;const ce={axis:U,chart:ie,dateTimeLabelFormat:X,isFirst:f,isLast:y,pos:H,tick:G,tickPositionInfo:L,value:J};K(this,"labelFormat",ce);const fe=Z=>E.formatter?E.formatter.call(Z,Z):E.format?(Z.text=U.defaultLabelFormatter.call(Z,Z),c.format(E.format,Z,ie)):U.defaultLabelFormatter.call(Z,Z);C=fe.call(ce,ce);const we=te&&te.list;G.shortenLabel=we?function(){for(q=0;q<we.length;q++)if(W(ce,{dateTimeLabelFormat:we[q]}),D.attr({text:fe.call(ce,ce)}),D.getBBox().width<U.getSlotWidth(G)-2*E.padding)return;D.attr({text:""})}:void 0,b&&U._addedPlotLB&&G.moveLabel(C,E),Q(D)||G.movedLabel?D&&D.textStr!==C&&!b&&(!D.textWidth||E.style.width||D.styles.width||D.css({width:null}),D.attr({text:C}),D.textPxLength=D.getBBox().width):(G.label=D=G.createLabel({x:0,y:0},C,E),G.rotation=0)}createLabel(G,U,C){const ie=this.axis,J=ie.chart;return(G=Q(U)&&C.enabled?J.renderer.text(U,G.x,G.y,C.useHTML).add(ie.labelGroup):null)&&(J.styledMode||G.css(O(C.style)),G.textPxLength=G.getBBox().width),G}destroy(){z(this,this.axis)}getPosition(G,U,C,ie){const J=this.axis,N=J.chart,F=ie&&N.oldChartHeight||N.chartHeight;return G={x:G?V(J.translate(U+C,void 0,void 0,ie)+J.transB):J.left+J.offset+(J.opposite?(ie&&N.oldChartWidth||N.chartWidth)-J.right-J.left:0),y:G?F-J.bottom+J.offset-(J.opposite?J.height:0):V(F-J.translate(U+C,void 0,void 0,ie)-J.transB)},G.y=T(G.y,-1e5,1e5),K(this,"afterGetPosition",{pos:G}),G}getLabelPosition(G,U,C,ie,J,N,F,H){const E=this.axis,L=E.transA,f=E.isLinked&&E.linkedParent?E.linkedParent.reversed:E.reversed,y=E.staggerLines,b=E.tickRotCorr||{x:0,y:0},D=ie||E.reserveSpaceDefault?0:-E.labelOffset*(E.labelAlign==="center"?.5:1),X=J.distance,te={};return C=E.side===0?C.rotation?-X:-C.getBBox().height:E.side===2?b.y+X:Math.cos(C.rotation*n)*(b.y-C.getBBox(!1,0).height/2),Q(J.y)&&(C=E.side===0&&E.horiz?J.y+C:J.y),G=G+M(J.x,[0,1,0,-1][E.side]*X)+D+b.x-(N&&ie?N*L*(f?-1:1):0),U=U+C-(N&&!ie?N*L*(f?1:-1):0),y&&(ie=F/(H||1)%y,E.opposite&&(ie=y-ie-1),U+=E.labelOffset/y*ie),te.x=G,te.y=Math.round(U),K(this,"afterGetLabelPosition",{pos:te,tickmarkOffset:N,index:F}),te}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(G,U,C,ie,J,N){return N.crispLine([["M",G,U],["L",G+(J?0:-C),U+(J?C:0)]],ie)}handleOverflow(G){const U=this.axis,C=U.options.labels,ie=G.x;var J=U.chart.chartWidth,N=U.chart.spacing;const F=M(U.labelLeft,Math.min(U.pos,N[3]));N=M(U.labelRight,Math.max(U.isRadial?0:U.pos+U.len,J-N[1]));const H=this.label,E=this.rotation,L={left:0,center:.5,right:1}[U.labelAlign||H.attr("align")],f=H.getBBox().width,y=U.getSlotWidth(this),b={};let D=y,X=1,te;E||C.overflow!=="justify"?0>E&&ie-L*f<F?te=Math.round(ie/Math.cos(E*n)-F):0<E&&ie+L*f>N&&(te=Math.round((J-ie)/Math.cos(E*n))):(J=ie+(1-L)*f,ie-L*f<F?D=G.x+D*(1-L)-F:J>N&&(D=N-G.x+D*L,X=-1),D=Math.min(y,D),D<y&&U.labelAlign==="center"&&(G.x+=X*(y-D-L*(y-Math.min(f,D)))),(f>D||U.autoRotation&&(H.styles||{}).width)&&(te=D)),te&&(this.shortenLabel?this.shortenLabel():(b.width=Math.floor(te)+"px",(C.style||{}).textOverflow||(b.textOverflow="ellipsis"),H.css(b)))}moveLabel(G,U){const C=this;var ie=C.label;const J=C.axis;let N=!1;ie&&ie.textStr===G?(C.movedLabel=ie,N=!0,delete C.label):$(J.ticks,function(F){N||F.isNew||F===C||!F.label||F.label.textStr!==G||(C.movedLabel=F.label,N=!0,F.labelPos=C.movedLabel.xy,delete F.label)}),N||!C.labelPos&&!ie||(ie=C.labelPos||ie.xy,C.movedLabel=C.createLabel(ie,G,U),C.movedLabel&&C.movedLabel.attr({opacity:0}))}render(G,U,C){var ie=this.axis,J=ie.horiz,N=this.pos,F=M(this.tickmarkOffset,ie.tickmarkOffset);N=this.getPosition(J,N,F,U),F=N.x;const H=N.y;ie=J&&F===ie.pos+ie.len||!J&&H===ie.pos?-1:1,J=M(C,this.label&&this.label.newOpacity,1),C=M(C,1),this.isActive=!0,this.renderGridLine(U,C,ie),this.renderMark(N,C,ie),this.renderLabel(N,U,J,G),this.isNew=!1,K(this,"afterRender")}renderGridLine(G,U,C){const ie=this.axis,J=ie.options,N={},F=this.pos,H=this.type,E=M(this.tickmarkOffset,ie.tickmarkOffset),L=ie.chart.renderer;let f=this.gridLine,y=J.gridLineWidth,b=J.gridLineColor,D=J.gridLineDashStyle;this.type==="minor"&&(y=J.minorGridLineWidth,b=J.minorGridLineColor,D=J.minorGridLineDashStyle),f||(ie.chart.styledMode||(N.stroke=b,N["stroke-width"]=y||0,N.dashstyle=D),H||(N.zIndex=1),G&&(U=0),this.gridLine=f=L.path().attr(N).addClass("highcharts-"+(H?H+"-":"")+"grid-line").add(ie.gridGroup)),f&&(C=ie.getPlotLinePath({value:F+E,lineWidth:f.strokeWidth()*C,force:"pass",old:G,acrossPanes:!1}))&&f[G||this.isNew?"attr":"animate"]({d:C,opacity:U})}renderMark(G,U,C){const ie=this.axis;var J=ie.options;const N=ie.chart.renderer,F=this.type,H=ie.tickSize(F?F+"Tick":"tick"),E=G.x;G=G.y;const L=M(J[F!=="minor"?"tickWidth":"minorTickWidth"],!F&&ie.isXAxis?1:0);J=J[F!=="minor"?"tickColor":"minorTickColor"];let f=this.mark;const y=!f;H&&(ie.opposite&&(H[0]=-H[0]),f||(this.mark=f=N.path().addClass("highcharts-"+(F?F+"-":"")+"tick").add(ie.axisGroup),ie.chart.styledMode||f.attr({stroke:J,"stroke-width":L})),f[y?"attr":"animate"]({d:this.getMarkPath(E,G,H[0],f.strokeWidth()*C,ie.horiz,N),opacity:U}))}renderLabel(G,U,C,ie){var J=this.axis;const N=J.horiz,F=J.options,H=this.label,E=F.labels,L=E.step;J=M(this.tickmarkOffset,J.tickmarkOffset);const f=G.x;G=G.y;let y=!0;H&&I(f)&&(H.xy=G=this.getLabelPosition(f,G,H,N,E,J,ie,L),this.isFirst&&!this.isLast&&!F.showFirstLabel||this.isLast&&!this.isFirst&&!F.showLastLabel?y=!1:!N||E.step||E.rotation||U||C===0||this.handleOverflow(G),L&&ie%L&&(y=!1),y&&I(G.y)?(G.opacity=C,H[this.isNewLabel?"attr":"animate"](G).show(!0),this.isNewLabel=!1):(H.hide(),this.isNewLabel=!0))}replaceMovedLabel(){const G=this.label,U=this.axis;G&&!this.isNew&&(G.animate({opacity:0},void 0,G.destroy),delete this.label),U.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}return S}),r(l,"Core/Axis/Axis.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/Axis/AxisDefaults.js"],l["Core/Color/Color.js"],l["Core/Defaults.js"],l["Core/Foundation.js"],l["Core/Globals.js"],l["Core/Axis/Tick.js"],l["Core/Utilities.js"]],function(c,d,m,n,T,V,Q,z){const{animObject:W}=c,{defaultOptions:K}=n,{registerEventOptions:I}=T,{deg2rad:O}=V,{arrayMax:$,arrayMin:M,clamp:S,correctFloat:k,defined:G,destroyObjectProperties:U,erase:C,error:ie,extend:J,fireEvent:N,isArray:F,isNumber:H,isString:E,merge:L,normalizeTickInterval:f,objectEach:y,pick:b,relativeLength:D,removeEvent:X,splat:te,syncTimeout:q}=z,ce=(we,Z)=>f(Z,void 0,void 0,b(we.options.allowDecimals,.5>Z||we.tickAmount!==void 0),!!we.tickAmount);class fe{constructor(Z,se){this.zoomEnabled=this.width=this.visible=this.userOptions=this.translationSlope=this.transB=this.transA=this.top=this.ticks=this.tickRotCorr=this.tickPositions=this.tickmarkOffset=this.tickInterval=this.tickAmount=this.side=this.series=this.right=this.positiveValuesOnly=this.pos=this.pointRangePadding=this.pointRange=this.plotLinesAndBandsGroups=this.plotLinesAndBands=this.paddedTicks=this.overlap=this.options=this.offset=this.names=this.minPixelPadding=this.minorTicks=this.minorTickInterval=this.min=this.maxLabelLength=this.max=this.len=this.left=this.labelFormatter=this.labelEdge=this.isLinked=this.height=this.hasVisibleSeries=this.hasNames=this.eventOptions=this.coll=this.closestPointRange=this.chart=this.bottom=this.alternateBands=void 0,this.init(Z,se)}init(Z,se){const ue=se.isX;this.chart=Z,this.horiz=Z.inverted&&!this.isZAxis?!ue:ue,this.isXAxis=ue,this.coll=this.coll||(ue?"xAxis":"yAxis"),N(this,"init",{userOptions:se}),this.opposite=b(se.opposite,this.opposite),this.side=b(se.side,this.side,this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(se);const ye=this.options,Pe=ye.labels,ae=ye.type;this.userOptions=se,this.minPixelPadding=0,this.reversed=b(ye.reversed,this.reversed),this.visible=ye.visible,this.zoomEnabled=ye.zoomEnabled,this.hasNames=ae==="category"||ye.categories===!0,this.categories=ye.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=G(ye.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=ye.minRange||ye.maxZoom,this.range=ye.range,this.offset=ye.offset||0,this.min=this.max=null,se=b(ye.crosshair,te(Z.options.tooltip.crosshairs)[ue?0:1]),this.crosshair=se===!0?{}:se,Z.axes.indexOf(this)===-1&&(ue?Z.axes.splice(Z.xAxis.length,0,this):Z.axes.push(this),Z[this.coll].push(this)),this.series=this.series||[],Z.inverted&&!this.isZAxis&&ue&&typeof this.reversed>"u"&&(this.reversed=!0),this.labelRotation=H(Pe.rotation)?Pe.rotation:void 0,I(this,ye),N(this,"afterInit")}setOptions(Z){this.options=L(d.defaultXAxisOptions,this.coll==="yAxis"&&d.defaultYAxisOptions,[d.defaultTopAxisOptions,d.defaultRightAxisOptions,d.defaultBottomAxisOptions,d.defaultLeftAxisOptions][this.side],L(K[this.coll],Z)),N(this,"afterSetOptions",{userOptions:Z})}defaultLabelFormatter(Z){var se=this.axis;({numberFormatter:Z}=this.chart);const ue=H(this.value)?this.value:NaN,ye=se.chart.time,Pe=this.dateTimeLabelFormat;var ae=K.lang;const xe=ae.numericSymbols;ae=ae.numericSymbolMagnitude||1e3;const ve=se.logarithmic?Math.abs(ue):se.tickInterval;let le=xe&&xe.length,me;if(se.categories)me=`${this.value}`;else if(Pe)me=ye.dateFormat(Pe,ue);else if(le&&1e3<=ve)for(;le--&&typeof me>"u";)se=Math.pow(ae,le+1),ve>=se&&10*ue%se===0&&xe[le]!==null&&ue!==0&&(me=Z(ue/se,-1)+xe[le]);return typeof me>"u"&&(me=1e4<=Math.abs(ue)?Z(ue,-1):Z(ue,-1,void 0,"")),me}getSeriesExtremes(){const Z=this,se=Z.chart;let ue;N(this,"getSeriesExtremes",null,function(){Z.hasVisibleSeries=!1,Z.dataMin=Z.dataMax=Z.threshold=null,Z.softThreshold=!Z.isXAxis,Z.series.forEach(function(ye){if(ye.visible||!se.options.chart.ignoreHiddenSeries){var Pe=ye.options;let ae=Pe.threshold,xe,ve;Z.hasVisibleSeries=!0,Z.positiveValuesOnly&&0>=ae&&(ae=null),Z.isXAxis?(Pe=ye.xData)&&Pe.length&&(Pe=Z.logarithmic?Pe.filter(le=>0<le):Pe,ue=ye.getXExtremes(Pe),xe=ue.min,ve=ue.max,H(xe)||xe instanceof Date||(Pe=Pe.filter(H),ue=ye.getXExtremes(Pe),xe=ue.min,ve=ue.max),Pe.length&&(Z.dataMin=Math.min(b(Z.dataMin,xe),xe),Z.dataMax=Math.max(b(Z.dataMax,ve),ve))):(ye=ye.applyExtremes(),H(ye.dataMin)&&(xe=ye.dataMin,Z.dataMin=Math.min(b(Z.dataMin,xe),xe)),H(ye.dataMax)&&(ve=ye.dataMax,Z.dataMax=Math.max(b(Z.dataMax,ve),ve)),G(ae)&&(Z.threshold=ae),(!Pe.softThreshold||Z.positiveValuesOnly)&&(Z.softThreshold=!1))}})}),N(this,"afterGetSeriesExtremes")}translate(Z,se,ue,ye,Pe,ae){const xe=this.linkedParent||this,ve=ye&&xe.old?xe.old.min:xe.min;if(!H(ve))return NaN;const le=xe.minPixelPadding;Pe=(xe.isOrdinal||xe.brokenAxis&&xe.brokenAxis.hasBreaks||xe.logarithmic&&Pe)&&xe.lin2val;let me=1,be=0;return ye=ye&&xe.old?xe.old.transA:xe.transA,ye||(ye=xe.transA),ue&&(me*=-1,be=xe.len),xe.reversed&&(me*=-1,be-=me*(xe.sector||xe.len)),se?(ae=(Z*me+be-le)/ye+ve,Pe&&(ae=xe.lin2val(ae))):(Pe&&(Z=xe.val2lin(Z)),Z=me*(Z-ve)*ye,ae=(xe.isRadial?Z:k(Z))+be+me*le+(H(ae)?ye*ae:0)),ae}toPixels(Z,se){return this.translate(Z,!1,!this.horiz,void 0,!0)+(se?0:this.pos)}toValue(Z,se){return this.translate(Z-(se?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(Z){function se(Ue,We,nt){return Ne!=="pass"&&(Ue<We||Ue>nt)&&(Ne?Ue=S(Ue,We,nt):Be=!0),Ue}const ue=this,ye=ue.chart,Pe=ue.left,ae=ue.top,xe=Z.old,ve=Z.value,le=Z.lineWidth,me=xe&&ye.oldChartHeight||ye.chartHeight,be=xe&&ye.oldChartWidth||ye.chartWidth,Le=ue.transB;let De=Z.translatedValue,Ne=Z.force,st,it,ht,ke,Be;return Z={value:ve,lineWidth:le,old:xe,force:Ne,acrossPanes:Z.acrossPanes,translatedValue:De},N(this,"getPlotLinePath",Z,function(Ue){De=b(De,ue.translate(ve,void 0,void 0,xe)),De=S(De,-1e5,1e5),st=ht=Math.round(De+Le),it=ke=Math.round(me-De-Le),H(De)?ue.horiz?(it=ae,ke=me-ue.bottom,st=ht=se(st,Pe,Pe+ue.width)):(st=Pe,ht=be-ue.right,it=ke=se(it,ae,ae+ue.height)):(Be=!0,Ne=!1),Ue.path=Be&&!Ne?null:ye.renderer.crispLine([["M",st,it],["L",ht,ke]],le||1)}),Z.path}getLinearTickPositions(Z,se,ue){const ye=k(Math.floor(se/Z)*Z);ue=k(Math.ceil(ue/Z)*Z);const Pe=[];let ae,xe;if(k(ye+Z)===ye&&(xe=20),this.single)return[se];for(se=ye;se<=ue&&(Pe.push(se),se=k(se+Z,xe),se!==ae);)ae=se;return Pe}getMinorTickInterval(){const Z=this.options;return Z.minorTicks===!0?b(Z.minorTickInterval,"auto"):Z.minorTicks===!1?null:Z.minorTickInterval}getMinorTickPositions(){var Z=this.options;const se=this.tickPositions,ue=this.minorTickInterval;var ye=this.pointRangePadding||0;const Pe=this.min-ye;ye=this.max+ye;const ae=ye-Pe;let xe=[];if(ae&&ae/ue<this.len/3){const ve=this.logarithmic;if(ve)this.paddedTicks.forEach(function(le,me,be){me&&xe.push.apply(xe,ve.getLogTickPositions(ue,be[me-1],be[me],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")xe=xe.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(ue),Pe,ye,Z.startOfWeek));else for(Z=Pe+(se[0]-Pe)%ue;Z<=ye&&Z!==xe[0];Z+=ue)xe.push(Z)}return xe.length!==0&&this.trimTicks(xe),xe}adjustForMinRange(){const Z=this.options,se=this.logarithmic;let ue=this.min;var ye=this.max;let Pe,ae=0,xe,ve,le,me,be;if(this.isXAxis&&typeof this.minRange>"u"&&!se&&(G(Z.min)||G(Z.max)||G(Z.floor)||G(Z.ceiling)?this.minRange=null:(this.series.forEach(function(De){if(le=De.xData,me=De.xIncrement?1:le.length-1,1<le.length)for(xe=me;0<xe;xe--)ve=le[xe]-le[xe-1],(!ae||ve<ae)&&(ae=ve)}),this.minRange=Math.min(5*ae,this.dataMax-this.dataMin))),ye-ue<this.minRange){Pe=this.dataMax-this.dataMin>=this.minRange,be=this.minRange;var Le=(be-ye+ue)/2;Le=[ue-Le,b(Z.min,ue-Le)],Pe&&(Le[2]=this.logarithmic?this.logarithmic.log2lin(this.dataMin):this.dataMin),ue=$(Le),ye=[ue+be,b(Z.max,ue+be)],Pe&&(ye[2]=se?se.log2lin(this.dataMax):this.dataMax),ye=M(ye),ye-ue<be&&(Le[0]=ye-be,Le[1]=b(Z.min,ye-be),ue=$(Le))}this.min=ue,this.max=ye}getClosest(){let Z;return this.categories?Z=1:this.series.forEach(function(se){const ue=se.closestPointRange,ye=se.visible||!se.chart.options.chart.ignoreHiddenSeries;!se.noSharedTooltip&&G(ue)&&ye&&(Z=G(Z)?Math.min(Z,ue):ue)}),Z}nameToX(Z){const se=F(this.options.categories),ue=se?this.categories:this.names;let ye=Z.options.x,Pe;return Z.series.requireSorting=!1,G(ye)||(ye=this.options.uniqueNames&&ue?se?ue.indexOf(Z.name):b(ue.keys[Z.name],-1):Z.series.autoIncrement()),ye===-1?!se&&ue&&(Pe=ue.length):Pe=ye,typeof Pe<"u"?(this.names[Pe]=Z.name,this.names.keys[Z.name]=Pe):Z.x&&(Pe=Z.x),Pe}updateNames(){const Z=this,se=this.names;0<se.length&&(Object.keys(se.keys).forEach(function(ue){delete se.keys[ue]}),se.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(function(ue){ue.xIncrement=null,(!ue.points||ue.isDirtyData)&&(Z.max=Math.max(Z.max,ue.xData.length-1),ue.processData(),ue.generatePoints()),ue.data.forEach(function(ye,Pe){let ae;ye&&ye.options&&typeof ye.name<"u"&&(ae=Z.nameToX(ye),typeof ae<"u"&&ae!==ye.x&&(ye.x=ae,ue.xData[Pe]=ae))})}))}setAxisTranslation(){const Z=this,se=Z.max-Z.min;var ue=Z.linkedParent;const ye=!!Z.categories,Pe=Z.isXAxis;let ae=Z.axisPointRange||0,xe,ve=0,le=0,me=Z.transA;(Pe||ye||ae)&&(xe=Z.getClosest(),ue?(ve=ue.minPointOffset,le=ue.pointRangePadding):Z.series.forEach(function(be){const Le=ye?1:Pe?b(be.options.pointRange,xe,0):Z.axisPointRange||0,De=be.options.pointPlacement;ae=Math.max(ae,Le),(!Z.single||ye)&&(be=be.is("xrange")?!Pe:Pe,ve=Math.max(ve,be&&E(De)?0:Le/2),le=Math.max(le,be&&De==="on"?0:Le))}),ue=Z.ordinal&&Z.ordinal.slope&&xe?Z.ordinal.slope/xe:1,Z.minPointOffset=ve*=ue,Z.pointRangePadding=le*=ue,Z.pointRange=Math.min(ae,Z.single&&ye?1:se),Pe&&(Z.closestPointRange=xe)),Z.translationSlope=Z.transA=me=Z.staticScale||Z.len/(se+le||1),Z.transB=Z.horiz?Z.left:Z.bottom,Z.minPixelPadding=me*ve,N(this,"afterSetAxisTranslation")}minFromRange(){return this.max-this.range}setTickInterval(Z){var se=this.chart;const ue=this.logarithmic,ye=this.options,Pe=this.isXAxis,ae=this.isLinked,xe=ye.tickPixelInterval,ve=this.categories,le=this.softThreshold;let me=ye.maxPadding,be=ye.minPadding,Le=H(ye.tickInterval)&&0<=ye.tickInterval?ye.tickInterval:void 0,De=H(this.threshold)?this.threshold:null,Ne,st,it;if(this.dateTime||ve||ae||this.getTickAmount(),st=b(this.userMin,ye.min),it=b(this.userMax,ye.max),ae){this.linkedParent=se[this.coll][ye.linkedTo];var ht=this.linkedParent.getExtremes();this.min=b(ht.min,ht.dataMin),this.max=b(ht.max,ht.dataMax),ye.type!==this.linkedParent.options.type&&ie(11,1,se)}else le&&G(De)&&(this.dataMin>=De?(ht=De,be=0):this.dataMax<=De&&(Ne=De,me=0)),this.min=b(st,ht,this.dataMin),this.max=b(it,Ne,this.dataMax);if(ue&&(this.positiveValuesOnly&&!Z&&0>=Math.min(this.min,b(this.dataMin,this.min))&&ie(10,1,se),this.min=k(ue.log2lin(this.min),16),this.max=k(ue.log2lin(this.max),16)),this.range&&G(this.max)&&(this.userMin=this.min=st=Math.max(this.dataMin,this.minFromRange()),this.userMax=it=this.max,this.range=null),N(this,"foundExtremes"),this.beforePadding&&this.beforePadding(),this.adjustForMinRange(),!(ve||this.axisPointRange||this.stacking&&this.stacking.usePercentage||ae)&&G(this.min)&&G(this.max)&&(se=this.max-this.min)&&(!G(st)&&be&&(this.min-=se*be),!G(it)&&me&&(this.max+=se*me)),H(this.userMin)||(H(ye.softMin)&&ye.softMin<this.min&&(this.min=st=ye.softMin),H(ye.floor)&&(this.min=Math.max(this.min,ye.floor))),H(this.userMax)||(H(ye.softMax)&&ye.softMax>this.max&&(this.max=it=ye.softMax),H(ye.ceiling)&&(this.max=Math.min(this.max,ye.ceiling))),le&&G(this.dataMin)&&(De=De||0,!G(st)&&this.min<De&&this.dataMin>=De?this.min=this.options.minRange?Math.min(De,this.max-this.minRange):De:!G(it)&&this.max>De&&this.dataMax<=De&&(this.max=this.options.minRange?Math.max(De,this.min+this.minRange):De)),H(this.min)&&H(this.max)&&!this.chart.polar&&this.min>this.max&&(G(this.options.min)?this.max=this.min:G(this.options.max)&&(this.min=this.max)),this.tickInterval=this.min===this.max||typeof this.min>"u"||typeof this.max>"u"?1:ae&&this.linkedParent&&!Le&&xe===this.linkedParent.options.tickPixelInterval?Le=this.linkedParent.tickInterval:b(Le,this.tickAmount?(this.max-this.min)/Math.max(this.tickAmount-1,1):void 0,ve?1:(this.max-this.min)*xe/Math.max(this.len,xe)),Pe&&!Z){const ke=this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max);this.series.forEach(function(Be){Be.forceCrop=Be.forceCropping&&Be.forceCropping(),Be.processData(ke)}),N(this,"postProcessData",{hasExtremesChanged:ke})}this.setAxisTranslation(),N(this,"initialAxisTranslation"),this.pointRange&&!Le&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval)),Z=b(ye.minTickInterval,this.dateTime&&!this.series.some(ke=>ke.noSharedTooltip)?this.closestPointRange:0),!Le&&this.tickInterval<Z&&(this.tickInterval=Z),this.dateTime||this.logarithmic||Le||(this.tickInterval=ce(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){var Z=this.options;const se=Z.tickPositions,ue=Z.tickPositioner;var ye=this.getMinorTickInterval(),Pe=this.hasVerticalPanning(),ae=this.coll==="colorAxis";const xe=(ae||!Pe)&&Z.startOnTick;Pe=(ae||!Pe)&&Z.endOnTick,ae=[];let ve;if(this.tickmarkOffset=this.categories&&Z.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.minorTickInterval=ye==="auto"&&this.tickInterval?this.tickInterval/Z.minorTicksPerMajor:ye,this.single=this.min===this.max&&G(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||Z.allowDecimals!==!1),se)ae=se.slice();else if(H(this.min)&&H(this.max)){if(this.ordinal&&this.ordinal.positions||!((this.max-this.min)/this.tickInterval>Math.max(2*this.len,200)))if(this.dateTime)ae=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,Z.units),this.min,this.max,Z.startOfWeek,this.ordinal&&this.ordinal.positions,this.closestPointRange,!0);else if(this.logarithmic)ae=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else for(ye=Z=this.tickInterval;ye<=2*Z&&(ae=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&ae.length>this.tickAmount);)this.tickInterval=ce(this,ye*=1.1);else ae=[this.min,this.max],ie(19,!1,this.chart);ae.length>this.len&&(ae=[ae[0],ae[ae.length-1]],ae[0]===ae[1]&&(ae.length=1)),ue&&(this.tickPositions=ae,(ve=ue.apply(this,[this.min,this.max]))&&(ae=ve))}this.tickPositions=ae,this.paddedTicks=ae.slice(0),this.trimTicks(ae,xe,Pe),!this.isLinked&&H(this.min)&&H(this.max)&&(this.single&&2>ae.length&&!this.categories&&!this.series.some(le=>le.is("heatmap")&&le.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),se||ve||this.adjustTickAmount()),N(this,"afterSetTickPositions")}trimTicks(Z,se,ue){const ye=Z[0],Pe=Z[Z.length-1],ae=!this.isOrdinal&&this.minPointOffset||0;if(N(this,"trimTicks"),!this.isLinked){if(se&&ye!==-1/0)this.min=ye;else for(;this.min-ae>Z[0];)Z.shift();if(ue)this.max=Pe;else for(;this.max+ae<Z[Z.length-1];)Z.pop();Z.length===0&&G(ye)&&!this.options.tickPositions&&Z.push((Pe+ye)/2)}}alignToOthers(){const Z=this,se=[this],ue=Z.options,ye=this.coll==="yAxis"&&this.chart.options.chart.alignThresholds,Pe=[];let ae;if(Z.thresholdAlignment=void 0,(this.chart.options.chart.alignTicks!==!1&&ue.alignTicks||ye)&&ue.startOnTick!==!1&&ue.endOnTick!==!1&&!Z.logarithmic){const xe=le=>{const{horiz:me,options:be}=le;return[me?be.left:be.top,be.width,be.height,be.pane].join()},ve=xe(this);this.chart[this.coll].forEach(function(le){const{series:me}=le;me.length&&me.some(be=>be.visible)&&le!==Z&&xe(le)===ve&&(ae=!0,se.push(le))})}if(ae&&ye){se.forEach(ve=>{ve=ve.getThresholdAlignment(Z),H(ve)&&Pe.push(ve)});const xe=1<Pe.length?Pe.reduce((ve,le)=>ve+le,0)/Pe.length:void 0;se.forEach(ve=>{ve.thresholdAlignment=xe})}return ae}getThresholdAlignment(Z){if((!H(this.dataMin)||this!==Z&&this.series.some(se=>se.isDirty||se.isDirtyData))&&this.getSeriesExtremes(),H(this.threshold))return Z=S((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1),this.options.reversed&&(Z=1-Z),Z}getTickAmount(){const Z=this.options,se=Z.tickPixelInterval;let ue=Z.tickAmount;!G(Z.tickInterval)&&!ue&&this.len<se&&!this.isRadial&&!this.logarithmic&&Z.startOnTick&&Z.endOnTick&&(ue=2),!ue&&this.alignToOthers()&&(ue=Math.ceil(this.len/se)+1),4>ue&&(this.finalTickAmt=ue,ue=5),this.tickAmount=ue}adjustTickAmount(){const Z=this,{finalTickAmt:se,max:ue,min:ye,options:Pe,tickPositions:ae,tickAmount:xe,thresholdAlignment:ve}=Z,le=ae&&ae.length;var me=b(Z.threshold,Z.softThreshold?0:null),be=Z.tickInterval;let Le;if(H(ve)&&(Le=.5>ve?Math.ceil(ve*(xe-1)):Math.floor(ve*(xe-1)),Pe.reversed&&(Le=xe-1-Le)),Z.hasData()&&H(ye)&&H(ue)){const De=()=>{Z.transA*=(le-1)/(xe-1),Z.min=Pe.startOnTick?ae[0]:Math.min(ye,ae[0]),Z.max=Pe.endOnTick?ae[ae.length-1]:Math.max(ue,ae[ae.length-1])};if(H(Le)&&H(Z.threshold)){for(;ae[Le]!==me||ae.length!==xe||ae[0]>ye||ae[ae.length-1]<ue;){for(ae.length=0,ae.push(Z.threshold);ae.length<xe;)ae[Le]===void 0||ae[Le]>Z.threshold?ae.unshift(k(ae[0]-be)):ae.push(k(ae[ae.length-1]+be));if(be>8*Z.tickInterval)break;be*=2}De()}else if(le<xe){for(;ae.length<xe;)ae.length%2||ye===me?ae.push(k(ae[ae.length-1]+be)):ae.unshift(k(ae[0]-be));De()}if(G(se)){for(be=me=ae.length;be--;)(se===3&&be%2===1||2>=se&&0<be&&be<me-1)&&ae.splice(be,1);Z.finalTickAmt=void 0}}}setScale(){let Z=!1,se=!1;this.series.forEach(function(ye){Z=Z||ye.isDirtyData||ye.isDirty,se=se||ye.xAxis&&ye.xAxis.isDirty||!1}),this.setAxisSize();const ue=this.len!==(this.old&&this.old.len);ue||Z||se||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(this.stacking&&(this.stacking.resetStacks(),this.stacking.buildStacks()),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),this.isDirty||(this.isDirty=ue||this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max))):this.stacking&&this.stacking.cleanStacks(),Z&&this.panningState&&(this.panningState.isDirty=!0),N(this,"afterSetScale")}setExtremes(Z,se,ue,ye,Pe){const ae=this,xe=ae.chart;ue=b(ue,!0),ae.series.forEach(function(ve){delete ve.kdTree}),Pe=J(Pe,{min:Z,max:se}),N(ae,"setExtremes",Pe,function(){ae.userMin=Z,ae.userMax=se,ae.eventArgs=Pe,ue&&xe.redraw(ye)})}zoom(Z,se){const ue=this,ye=this.dataMin,Pe=this.dataMax,ae=this.options,xe=Math.min(ye,b(ae.min,ye)),ve=Math.max(Pe,b(ae.max,Pe));return Z={newMin:Z,newMax:se},N(this,"zoom",Z,function(le){let me=le.newMin,be=le.newMax;(me!==ue.min||be!==ue.max)&&(ue.allowZoomOutside||(G(ye)&&(me<xe&&(me=xe),me>ve&&(me=ve)),G(Pe)&&(be<xe&&(be=xe),be>ve&&(be=ve))),ue.displayBtn=typeof me<"u"||typeof be<"u",ue.setExtremes(me,be,!1,void 0,{trigger:"zoom"})),le.zoomed=!0}),Z.zoomed}setAxisSize(){const Z=this.chart;var se=this.options;const ue=se.offsets||[0,0,0,0],ye=this.horiz,Pe=this.width=Math.round(D(b(se.width,Z.plotWidth-ue[3]+ue[1]),Z.plotWidth)),ae=this.height=Math.round(D(b(se.height,Z.plotHeight-ue[0]+ue[2]),Z.plotHeight)),xe=this.top=Math.round(D(b(se.top,Z.plotTop+ue[0]),Z.plotHeight,Z.plotTop));se=this.left=Math.round(D(b(se.left,Z.plotLeft+ue[3]),Z.plotWidth,Z.plotLeft)),this.bottom=Z.chartHeight-ae-xe,this.right=Z.chartWidth-Pe-se,this.len=Math.max(ye?Pe:ae,0),this.pos=ye?se:xe}getExtremes(){const Z=this.logarithmic;return{min:Z?k(Z.lin2log(this.min)):this.min,max:Z?k(Z.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(Z){var se=this.logarithmic;const ue=se?se.lin2log(this.min):this.min;return se=se?se.lin2log(this.max):this.max,Z===null||Z===-1/0?Z=ue:Z===1/0?Z=se:ue>Z?Z=ue:se<Z&&(Z=se),this.translate(Z,0,1,0,1)}autoLabelAlign(Z){const se=(b(Z,0)-90*this.side+720)%360;return Z={align:"center"},N(this,"autoLabelAlign",Z,function(ue){15<se&&165>se?ue.align="right":195<se&&345>se&&(ue.align="left")}),Z.align}tickSize(Z){const se=this.options,ue=b(se[Z==="tick"?"tickWidth":"minorTickWidth"],Z==="tick"&&this.isXAxis&&!this.categories?1:0);let ye=se[Z==="tick"?"tickLength":"minorTickLength"],Pe;return ue&&ye&&(se[Z+"Position"]==="inside"&&(ye=-ye),Pe=[ye,ue]),Z={tickSize:Pe},N(this,"afterTickSize",Z),Z.tickSize}labelMetrics(){const Z=this.chart.renderer;var se=this.ticks;return se=se[Object.keys(se)[0]]||{},this.chart.renderer.fontMetrics(se.label||se.movedLabel||Z.box)}unsquish(){const Z=this.options.labels;var se=this.horiz;const ue=this.tickInterval,ye=this.len/(((this.categories?1:0)+this.max-this.min)/ue),Pe=Z.rotation,ae=.75*this.labelMetrics().h,xe=Math.max(this.max-this.min,0),ve=function(De){let Ne=De/(ye||1);return Ne=1<Ne?Math.ceil(Ne):1,Ne*ue>xe&&De!==1/0&&ye!==1/0&&xe&&(Ne=Math.ceil(xe/ue)),k(Ne*ue)};let le=ue,me,be=Number.MAX_VALUE,Le;if(se){if(Z.staggerLines||(H(Pe)?Le=[Pe]:ye<Z.autoRotationLimit&&(Le=Z.autoRotation)),Le){let De;for(const Ne of Le)(Ne===Pe||Ne&&-90<=Ne&&90>=Ne)&&(se=ve(Math.abs(ae/Math.sin(O*Ne))),De=se+Math.abs(Ne/360),De<be&&(be=De,me=Ne,le=se))}}else le=ve(ae);return this.autoRotation=Le,this.labelRotation=b(me,H(Pe)?Pe:0),Z.step?ue:le}getSlotWidth(Z){const se=this.chart,ue=this.horiz,ye=this.options.labels,Pe=Math.max(this.tickPositions.length-(this.categories?0:1),1),ae=se.margin[3];if(Z&&H(Z.slotWidth))return Z.slotWidth;if(ue&&2>ye.step)return ye.rotation?0:(this.staggerLines||1)*this.len/Pe;if(!ue){if(Z=ye.style.width,Z!==void 0)return parseInt(String(Z),10);if(ae)return ae-se.spacing[3]}return .33*se.chartWidth}renderUnsquish(){const Z=this.chart,se=Z.renderer,ue=this.tickPositions,ye=this.ticks,Pe=this.options.labels,ae=Pe.style,xe=this.horiz,ve=this.getSlotWidth();var le=Math.max(1,Math.round(ve-2*Pe.padding));const me={},be=this.labelMetrics(),Le=ae.textOverflow;let De,Ne,st=0;if(E(Pe.rotation)||(me.rotation=Pe.rotation||0),ue.forEach(function(ht){ht=ye[ht],ht.movedLabel&&ht.replaceMovedLabel(),ht&&ht.label&&ht.label.textPxLength>st&&(st=ht.label.textPxLength)}),this.maxLabelLength=st,this.autoRotation)st>le&&st>be.h?me.rotation=this.labelRotation:this.labelRotation=0;else if(ve&&(De=le,!Le))for(Ne="clip",le=ue.length;!xe&&le--;){var it=ue[le];(it=ye[it].label)&&(it.styles&&it.styles.textOverflow==="ellipsis"?it.css({textOverflow:"clip"}):it.textPxLength>ve&&it.css({width:ve+"px"}),it.getBBox().height>this.len/ue.length-(be.h-be.f)&&(it.specificTextOverflow="ellipsis"))}me.rotation&&(De=st>.5*Z.chartHeight?.33*Z.chartHeight:st,Le||(Ne="ellipsis")),(this.labelAlign=Pe.align||this.autoLabelAlign(this.labelRotation))&&(me.align=this.labelAlign),ue.forEach(function(ht){const ke=(ht=ye[ht])&&ht.label,Be=ae.width,Ue={};ke&&(ke.attr(me),ht.shortenLabel?ht.shortenLabel():De&&!Be&&ae.whiteSpace!=="nowrap"&&(De<ke.textPxLength||ke.element.tagName==="SPAN")?(Ue.width=De+"px",Le||(Ue.textOverflow=ke.specificTextOverflow||Ne),ke.css(Ue)):ke.styles&&ke.styles.width&&!Ue.width&&!Be&&ke.css({width:null}),delete ke.specificTextOverflow,ht.rotation=me.rotation)},this),this.tickRotCorr=se.rotCorr(be.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(Z){return Z.hasData()})||this.options.showEmpty&&G(this.min)&&G(this.max)}addTitle(Z){const se=this.chart.renderer,ue=this.horiz,ye=this.opposite,Pe=this.options.title,ae=this.chart.styledMode;let xe;this.axisTitle||((xe=Pe.textAlign)||(xe=(ue?{low:"left",middle:"center",high:"right"}:{low:ye?"right":"left",middle:"center",high:ye?"left":"right"})[Pe.align]),this.axisTitle=se.text(Pe.text||"",0,0,Pe.useHTML).attr({zIndex:7,rotation:Pe.rotation,align:xe}).addClass("highcharts-axis-title"),ae||this.axisTitle.css(L(Pe.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),ae||Pe.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[Z?"show":"hide"](Z)}generateTick(Z){const se=this.ticks;se[Z]?se[Z].addLabel():se[Z]=new Q(this,Z)}getOffset(){const Z=this,{chart:se,horiz:ue,options:ye,side:Pe,ticks:ae,tickPositions:xe,coll:ve,axisParent:le}=Z,me=se.renderer,be=se.inverted&&!Z.isZAxis?[1,0,3,2][Pe]:Pe;var Le=Z.hasData();const De=ye.title;var Ne=ye.labels;const st=H(ye.crossing);var it=se.axisOffset;const ht=se.clipOffset,ke=[-1,1,1,-1][Pe],Be=ye.className;let Ue,We=0,nt;var wt=0;let Ut=0;if(Z.showAxis=Ue=Le||ye.showEmpty,Z.staggerLines=Z.horiz&&Ne.staggerLines||void 0,!Z.axisGroup){const Vt=(yi,ri,Mi)=>me.g(yi).attr({zIndex:Mi}).addClass(`highcharts-${ve.toLowerCase()}${ri} `+(this.isRadial?`highcharts-radial-axis${ri} `:"")+(Be||"")).add(le);Z.gridGroup=Vt("grid","-grid",ye.gridZIndex),Z.axisGroup=Vt("axis","",ye.zIndex),Z.labelGroup=Vt("axis-labels","-labels",Ne.zIndex)}Le||Z.isLinked?(xe.forEach(function(Vt){Z.generateTick(Vt)}),Z.renderUnsquish(),Z.reserveSpaceDefault=Pe===0||Pe===2||{1:"left",3:"right"}[Pe]===Z.labelAlign,b(Ne.reserveSpace,st?!1:null,Z.labelAlign==="center"?!0:null,Z.reserveSpaceDefault)&&xe.forEach(function(Vt){Ut=Math.max(ae[Vt].getLabelSize(),Ut)}),Z.staggerLines&&(Ut*=Z.staggerLines),Z.labelOffset=Ut*(Z.opposite?-1:1)):y(ae,function(Vt,yi){Vt.destroy(),delete ae[yi]}),De&&De.text&&De.enabled!==!1&&(Z.addTitle(Ue),Ue&&!st&&De.reserveSpace!==!1&&(Z.titleOffset=We=Z.axisTitle.getBBox()[ue?"height":"width"],nt=De.offset,wt=G(nt)?0:b(De.margin,ue?5:10))),Z.renderLine(),Z.offset=ke*b(ye.offset,it[Pe]?it[Pe]+(ye.margin||0):0),Z.tickRotCorr=Z.tickRotCorr||{x:0,y:0},Le=Pe===0?-Z.labelMetrics().h:Pe===2?Z.tickRotCorr.y:0,wt=Math.abs(Ut)+wt,Ut&&(wt=wt-Le+ke*(ue?b(Ne.y,Z.tickRotCorr.y+ke*Ne.distance):b(Ne.x,ke*Ne.distance))),Z.axisTitleMargin=b(nt,wt),Z.getMaxLabelDimensions&&(Z.maxLabelDimensions=Z.getMaxLabelDimensions(ae,xe)),ve!=="colorAxis"&&(Ne=this.tickSize("tick"),it[Pe]=Math.max(it[Pe],(Z.axisTitleMargin||0)+We+ke*Z.offset,wt,xe&&xe.length&&Ne?Ne[0]+ke*Z.offset:0),it=!Z.axisLine||ye.offset?0:2*Math.floor(Z.axisLine.strokeWidth()/2),ht[be]=Math.max(ht[be],it)),N(this,"afterGetOffset")}getLinePath(Z){const se=this.chart,ue=this.opposite;var ye=this.offset;const Pe=this.horiz,ae=this.left+(ue?this.width:0)+ye;return ye=se.chartHeight-this.bottom-(ue?this.height:0)+ye,ue&&(Z*=-1),se.renderer.crispLine([["M",Pe?this.left:ae,Pe?ye:this.top],["L",Pe?se.chartWidth-this.right:ae,Pe?ye:se.chartHeight-this.bottom]],Z)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(Z){var se=this.horiz,ue=this.left;const ye=this.top;var Pe=this.len;const ae=this.options.title,xe=se?ue:ye,ve=this.opposite,le=this.offset,me=ae.x,be=ae.y,Le=this.chart.renderer.fontMetrics(Z);return Z=Z?Math.max(Z.getBBox(!1,0).height-Le.h-1,0):0,Pe={low:xe+(se?0:Pe),middle:xe+Pe/2,high:xe+(se?Pe:0)}[ae.align],ue=(se?ye+this.height:ue)+(se?1:-1)*(ve?-1:1)*(this.axisTitleMargin||0)+[-Z,Z,Le.f,-Z][this.side],se={x:se?Pe+me:ue+(ve?this.width:0)+le+me,y:se?ue+be-(ve?this.height:0)+le:Pe+be},N(this,"afterGetTitlePosition",{titlePosition:se}),se}renderMinorTick(Z,se){const ue=this.minorTicks;ue[Z]||(ue[Z]=new Q(this,Z,"minor")),se&&ue[Z].isNew&&ue[Z].render(null,!0),ue[Z].render(null,!1,1)}renderTick(Z,se,ue){const ye=this.ticks;(!this.isLinked||Z>=this.min&&Z<=this.max||this.grid&&this.grid.isColumn)&&(ye[Z]||(ye[Z]=new Q(this,Z)),ue&&ye[Z].isNew&&ye[Z].render(se,!0,-1),ye[Z].render(se))}render(){const Z=this,se=Z.chart,ue=Z.logarithmic,ye=Z.options,Pe=Z.isLinked,ae=Z.tickPositions,xe=Z.axisTitle,ve=Z.ticks,le=Z.minorTicks,me=Z.alternateBands,be=ye.stackLabels,Le=ye.alternateGridColor,De=ye.crossing,Ne=Z.tickmarkOffset,st=Z.axisLine,it=Z.showAxis,ht=W(se.renderer.globalAnimation);let ke,Be;if(Z.labelEdge.length=0,Z.overlap=!1,[ve,le,me].forEach(function(Ue){y(Ue,function(We){We.isActive=!1})}),H(De)){const Ue=this.isXAxis?se.yAxis[0]:se.xAxis[0],We=[1,-1,-1,1][this.side];Ue&&(this.offset=We*Ue.toPixels(De,!0))}if(Z.hasData()||Pe){const Ue=Z.chart.hasRendered&&Z.old&&H(Z.old.min);Z.minorTickInterval&&!Z.categories&&Z.getMinorTickPositions().forEach(function(We){Z.renderMinorTick(We,Ue)}),ae.length&&(ae.forEach(function(We,nt){Z.renderTick(We,nt,Ue)}),Ne&&(Z.min===0||Z.single)&&(ve[-1]||(ve[-1]=new Q(Z,-1,null,!0)),ve[-1].render(-1))),Le&&ae.forEach(function(We,nt){Be=typeof ae[nt+1]<"u"?ae[nt+1]+Ne:Z.max-Ne,nt%2===0&&We<Z.max&&Be<=Z.max+(se.polar?-Ne:Ne)&&(me[We]||(me[We]=new V.PlotLineOrBand(Z)),ke=We+Ne,me[We].options={from:ue?ue.lin2log(ke):ke,to:ue?ue.lin2log(Be):Be,color:Le,className:"highcharts-alternate-grid"},me[We].render(),me[We].isActive=!0)}),Z._addedPlotLB||(Z._addedPlotLB=!0,(ye.plotLines||[]).concat(ye.plotBands||[]).forEach(function(We){Z.addPlotBandOrLine(We)}))}[ve,le,me].forEach(function(Ue){const We=[],nt=ht.duration;y(Ue,function(wt,Ut){wt.isActive||(wt.render(Ut,!1,0),wt.isActive=!1,We.push(Ut))}),q(function(){let wt=We.length;for(;wt--;)Ue[We[wt]]&&!Ue[We[wt]].isActive&&(Ue[We[wt]].destroy(),delete Ue[We[wt]])},Ue!==me&&se.hasRendered&&nt?nt:0)}),st&&(st[st.isPlaced?"animate":"attr"]({d:this.getLinePath(st.strokeWidth())}),st.isPlaced=!0,st[it?"show":"hide"](it)),xe&&it&&(xe[xe.isNew?"attr":"animate"](Z.getTitlePosition(xe)),xe.isNew=!1),be&&be.enabled&&Z.stacking&&Z.stacking.renderStackTotals(),Z.old={len:Z.len,max:Z.max,min:Z.min,transA:Z.transA,userMax:Z.userMax,userMin:Z.userMin},Z.isDirty=!1,N(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(Z){Z.render()})),this.series.forEach(function(Z){Z.isDirty=!0})}getKeepProps(){return this.keepProps||fe.keepProps}destroy(Z){const se=this,ue=se.plotLinesAndBands,ye=this.eventOptions;if(N(this,"destroy",{keepEvents:Z}),Z||X(se),[se.ticks,se.minorTicks,se.alternateBands].forEach(function(Pe){U(Pe)}),ue)for(Z=ue.length;Z--;)ue[Z].destroy();"axisLine axisTitle axisGroup gridGroup labelGroup cross scrollbar".split(" ").forEach(function(Pe){se[Pe]&&(se[Pe]=se[Pe].destroy())});for(const Pe in se.plotLinesAndBandsGroups)se.plotLinesAndBandsGroups[Pe]=se.plotLinesAndBandsGroups[Pe].destroy();y(se,function(Pe,ae){se.getKeepProps().indexOf(ae)===-1&&delete se[ae]}),this.eventOptions=ye}drawCrosshair(Z,se){const ue=this.crosshair;var ye=b(ue&&ue.snap,!0);const Pe=this.chart;let ae,xe=this.cross;if(N(this,"drawCrosshair",{e:Z,point:se}),Z||(Z=this.cross&&this.cross.e),ue&&(G(se)||!ye)!==!1){if(ye?G(se)&&(ae=b(this.coll!=="colorAxis"?se.crosshairPos:null,this.isXAxis?se.plotX:this.len-se.plotY)):ae=Z&&(this.horiz?Z.chartX-this.pos:this.len-Z.chartY+this.pos),G(ae)){var ve={value:se&&(this.isXAxis?se.x:b(se.stackY,se.y)),translatedValue:ae};Pe.polar&&J(ve,{isCrosshair:!0,chartX:Z&&Z.chartX,chartY:Z&&Z.chartY,point:se}),ve=this.getPlotLinePath(ve)||null}if(!G(ve)){this.hideCrosshair();return}ye=this.categories&&!this.isRadial,xe||(this.cross=xe=Pe.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(ye?"category ":"thin ")+(ue.className||"")).attr({zIndex:b(ue.zIndex,2)}).add(),Pe.styledMode||(xe.attr({stroke:ue.color||(ye?m.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":b(ue.width,1)}).css({"pointer-events":"none"}),ue.dashStyle&&xe.attr({dashstyle:ue.dashStyle}))),xe.show().attr({d:ve}),ye&&!ue.width&&xe.attr({"stroke-width":this.transA}),this.cross.e=Z}else this.hideCrosshair();N(this,"afterDrawCrosshair",{e:Z,point:se})}hideCrosshair(){this.cross&&this.cross.hide(),N(this,"afterHideCrosshair")}hasVerticalPanning(){const Z=this.chart.options.chart.panning;return!!(Z&&Z.enabled&&/y/.test(Z.type))}update(Z,se){const ue=this.chart;Z=L(this.userOptions,Z),this.destroy(!0),this.init(ue,Z),ue.isDirtyBox=!0,b(se,!0)&&ue.redraw()}remove(Z){const se=this.chart,ue=this.coll,ye=this.series;let Pe=ye.length;for(;Pe--;)ye[Pe]&&ye[Pe].remove(!1);C(se.axes,this),C(se[ue],this),se[ue].forEach(function(ae,xe){ae.options.index=ae.userOptions.index=xe}),this.destroy(),se.isDirtyBox=!0,b(Z,!0)&&se.redraw()}setTitle(Z,se){this.update({title:Z},se)}setCategories(Z,se){this.update({categories:Z},se)}}return fe.defaultOptions=d.defaultXAxisOptions,fe.keepProps="extKey hcEvents names series userMax userMin".split(" "),fe}),r(l,"Core/Axis/DateTimeAxis.js",[l["Core/Utilities.js"]],function(c){const{addEvent:d,getMagnitude:m,normalizeTickInterval:n,timeUnits:T}=c;var V;return function(Q){function z(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function W(O){O.userOptions.type!=="datetime"?this.dateTime=void 0:this.dateTime||(this.dateTime=new I(this))}const K=[];Q.compose=function(O){return c.pushUnique(K,O)&&(O.keepProps.push("dateTime"),O.prototype.getTimeTicks=z,d(O,"init",W)),O};class I{constructor($){this.axis=$}normalizeTimeTickInterval($,M){const S=M||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];M=S[S.length-1];let k=T[M[0]],G=M[1],U;for(U=0;U<S.length&&(M=S[U],k=T[M[0]],G=M[1],!(S[U+1]&&$<=(k*G[G.length-1]+T[S[U+1][0]])/2));U++);return k===T.year&&$<5*k&&(G=[1,2,5]),$=n($/k,G,M[0]==="year"?Math.max(m($/k),1):1),{unitRange:k,count:$,unitName:M[0]}}getXDateFormat($,M){const{axis:S}=this,k=S.chart.time;return S.closestPointRange?k.getDateFormat(S.closestPointRange,$,S.options.startOfWeek,M)||k.resolveDTLFormat(M.year).main:k.resolveDTLFormat(M.day).main}}Q.Additions=I}(V||(V={})),V}),r(l,"Core/Axis/LogarithmicAxis.js",[l["Core/Utilities.js"]],function(c){const{addEvent:d,normalizeTickInterval:m,pick:n}=c;var T;return function(V){function Q(I){let O=this.logarithmic;I.userOptions.type!=="logarithmic"?this.logarithmic=void 0:O||(this.logarithmic=new K(this))}function z(){const I=this.logarithmic;I&&(this.lin2val=function(O){return I.lin2log(O)},this.val2lin=function(O){return I.log2lin(O)})}const W=[];V.compose=function(I){return c.pushUnique(W,I)&&(I.keepProps.push("logarithmic"),d(I,"init",Q),d(I,"afterInit",z)),I};class K{constructor(O){this.axis=O}getLogTickPositions(O,$,M,S){const k=this.axis;var G=k.len,U=k.options;let C=[];if(S||(this.minorAutoInterval=void 0),.5<=O)O=Math.round(O),C=k.getLinearTickPositions(O,$,M);else if(.08<=O){U=Math.floor($);let ie,J,N,F,H;for(G=.3<O?[1,2,4]:.15<O?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];U<M+1&&!H;U++)for(J=G.length,ie=0;ie<J&&!H;ie++)N=this.log2lin(this.lin2log(U)*G[ie]),N>$&&(!S||F<=M)&&typeof F<"u"&&C.push(F),F>M&&(H=!0),F=N}else $=this.lin2log($),M=this.lin2log(M),O=S?k.getMinorTickInterval():U.tickInterval,O=n(O==="auto"?null:O,this.minorAutoInterval,U.tickPixelInterval/(S?5:1)*(M-$)/((S?G/k.tickPositions.length:G)||1)),O=m(O),C=k.getLinearTickPositions(O,$,M).map(this.log2lin),S||(this.minorAutoInterval=O/5);return S||(k.tickInterval=O),C}lin2log(O){return Math.pow(10,O)}log2lin(O){return Math.log(O)/Math.LN10}}V.Additions=K}(T||(T={})),T}),r(l,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[l["Core/Utilities.js"]],function(c){const{erase:d,extend:m,isNumber:n}=c;var T;return function(V){function Q(k){return this.addPlotBandOrLine(k,"plotBands")}function z(k,G){const U=this.userOptions;let C=new S(this,k);if(this.visible&&(C=C.render()),C){if(this._addedPlotLB||(this._addedPlotLB=!0,(U.plotLines||[]).concat(U.plotBands||[]).forEach(ie=>{this.addPlotBandOrLine(ie)})),G){const ie=U[G]||[];ie.push(k),U[G]=ie}this.plotLinesAndBands.push(C)}return C}function W(k){return this.addPlotBandOrLine(k,"plotLines")}function K(k,G,U=this.options){const C=this.getPlotLinePath({value:G,force:!0,acrossPanes:U.acrossPanes}),ie=[],J=this.horiz;G=!n(this.min)||!n(this.max)||k<this.min&&G<this.min||k>this.max&&G>this.max,k=this.getPlotLinePath({value:k,force:!0,acrossPanes:U.acrossPanes}),U=1;let N;if(k&&C)for(G&&(N=k.toString()===C.toString(),U=0),G=0;G<k.length;G+=2){const F=k[G],H=k[G+1],E=C[G],L=C[G+1];F[0]!=="M"&&F[0]!=="L"||H[0]!=="M"&&H[0]!=="L"||E[0]!=="M"&&E[0]!=="L"||L[0]!=="M"&&L[0]!=="L"||(J&&E[1]===F[1]?(E[1]+=U,L[1]+=U):J||E[2]!==F[2]||(E[2]+=U,L[2]+=U),ie.push(["M",F[1],F[2]],["L",H[1],H[2]],["L",L[1],L[2]],["L",E[1],E[2]],["Z"])),ie.isFlat=N}return ie}function I(k){this.removePlotBandOrLine(k)}function O(k){const G=this.plotLinesAndBands,U=this.options,C=this.userOptions;if(G){let ie=G.length;for(;ie--;)G[ie].id===k&&G[ie].destroy();[U.plotLines||[],C.plotLines||[],U.plotBands||[],C.plotBands||[]].forEach(function(J){for(ie=J.length;ie--;)(J[ie]||{}).id===k&&d(J,J[ie])})}}function $(k){this.removePlotBandOrLine(k)}const M=[];let S;V.compose=function(k,G){return S||(S=k),c.pushUnique(M,G)&&m(G.prototype,{addPlotBand:Q,addPlotLine:W,addPlotBandOrLine:z,getPlotBandPath:K,removePlotBand:I,removePlotLine:$,removePlotBandOrLine:O}),G}}(T||(T={})),T}),r(l,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[l["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],l["Core/Utilities.js"]],function(c,d){const{arrayMax:m,arrayMin:n,defined:T,destroyObjectProperties:V,erase:Q,fireEvent:z,merge:W,objectEach:K,pick:I}=d;class O{static compose(M){return c.compose(O,M)}constructor(M,S){this.axis=M,S&&(this.options=S,this.id=S.id)}render(){z(this,"render");const M=this,S=M.axis,k=S.horiz;var G=S.logarithmic;const U=M.options,C=U.color,ie=I(U.zIndex,0),J=U.events,N={},F=S.chart.renderer;let H=U.label,E=M.label,L=U.to,f=U.from,y=U.value,b=M.svgElem;var D=[];const X=T(f)&&T(L);D=T(y);const te=!b,q={class:"highcharts-plot-"+(X?"band ":"line ")+(U.className||"")};let ce=X?"bands":"lines";if(G&&(f=G.log2lin(f),L=G.log2lin(L),y=G.log2lin(y)),S.chart.styledMode||(D?(q.stroke=C||"#999999",q["stroke-width"]=I(U.width,1),U.dashStyle&&(q.dashstyle=U.dashStyle)):X&&(q.fill=C||"#e6e9ff",U.borderWidth&&(q.stroke=U.borderColor,q["stroke-width"]=U.borderWidth))),N.zIndex=ie,ce+="-"+ie,(G=S.plotLinesAndBandsGroups[ce])||(S.plotLinesAndBandsGroups[ce]=G=F.g("plot-"+ce).attr(N).add()),te&&(M.svgElem=b=F.path().attr(q).add(G)),D)D=S.getPlotLinePath({value:y,lineWidth:b.strokeWidth(),acrossPanes:U.acrossPanes});else if(X)D=S.getPlotBandPath(f,L,U);else return;return!M.eventsAdded&&J&&(K(J,function(fe,we){b.on(we,function(Z){J[we].apply(M,[Z])})}),M.eventsAdded=!0),(te||!b.d)&&D&&D.length?b.attr({d:D}):b&&(D?(b.show(),b.animate({d:D})):b.d&&(b.hide(),E&&(M.label=E=E.destroy()))),H&&(T(H.text)||T(H.formatter))&&D&&D.length&&0<S.width&&0<S.height&&!D.isFlat?(H=W({align:k&&X&&"center",x:k?!X&&4:10,verticalAlign:!k&&X&&"middle",y:k?X?16:10:X?6:-4,rotation:k&&!X&&90},H),this.renderLabel(H,D,X,ie)):E&&E.hide(),M}renderLabel(M,S,k,G){const U=this.axis;var C=U.chart.renderer;let ie=this.label;ie||(this.label=ie=C.text(this.getLabelText(M),0,0,M.useHTML).attr({align:M.textAlign||M.align,rotation:M.rotation,class:"highcharts-plot-"+(k?"band":"line")+"-label "+(M.className||""),zIndex:G}).add(),U.chart.styledMode||ie.css(W({fontSize:"0.8em",textOverflow:"ellipsis"},M.style))),G=S.xBounds||[S[0][1],S[1][1],k?S[2][1]:S[0][1]],S=S.yBounds||[S[0][2],S[1][2],k?S[2][2]:S[0][2]],k=n(G),C=n(S),ie.align(M,!1,{x:k,y:C,width:m(G)-k,height:m(S)-C}),ie.alignValue&&ie.alignValue!=="left"||(M=M.clip?U.width:U.chart.chartWidth,ie.css({width:(ie.rotation===90?U.height-(ie.alignAttr.y-U.top):M-(ie.alignAttr.x-U.left))+"px"})),ie.show(!0)}getLabelText(M){return T(M.formatter)?M.formatter.call(this):M.text}destroy(){Q(this.axis.plotLinesAndBands,this),delete this.axis,V(this)}}return O}),r(l,"Core/Tooltip.js",[l["Core/FormatUtilities.js"],l["Core/Globals.js"],l["Core/Renderer/RendererUtilities.js"],l["Core/Renderer/RendererRegistry.js"],l["Core/Utilities.js"]],function(c,d,m,n,T){const{format:V}=c,{doc:Q,isSafari:z}=d,{distribute:W}=m,{addEvent:K,clamp:I,css:O,discardElement:$,extend:M,fireEvent:S,isArray:k,isNumber:G,isString:U,merge:C,pick:ie,splat:J,syncTimeout:N}=T;class F{constructor(E,L){this.allowShared=!0,this.container=void 0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.now={},this.options={},this.outside=!1,this.chart=E,this.init(E,L)}bodyFormatter(E){return E.map(function(L){const f=L.series.tooltipOptions;return(f[(L.point.formatPrefix||"point")+"Formatter"]||L.point.tooltipFormatter).call(L.point,f[(L.point.formatPrefix||"point")+"Format"]||"")})}cleanSplit(E){this.chart.series.forEach(function(L){const f=L&&L.tt;f&&(!f.isActive||E?L.tt=f.destroy():f.isActive=!1)})}defaultFormatter(E){const L=this.points||J(this);let f;return f=[E.tooltipFooterHeaderFormatter(L[0])],f=f.concat(E.bodyFormatter(L)),f.push(E.tooltipFooterHeaderFormatter(L[0],!0)),f}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),$(this.container)),T.clearTimeout(this.hideTimer),T.clearTimeout(this.tooltipTimeout)}getAnchor(E,L){var f=this.chart;const y=f.pointer,b=f.inverted,D=f.plotTop;if(f=f.plotLeft,E=J(E),E[0].series&&E[0].series.yAxis&&!E[0].series.yAxis.options.reversedStacks&&(E=E.slice().reverse()),this.followPointer&&L)typeof L.chartX>"u"&&(L=y.normalize(L)),E=[L.chartX-f,L.chartY-D];else if(E[0].tooltipPos)E=E[0].tooltipPos;else{let X=0,te=0;E.forEach(function(q){(q=q.pos(!0))&&(X+=q[0],te+=q[1])}),X/=E.length,te/=E.length,this.shared&&1<E.length&&L&&(b?X=L.chartX:te=L.chartY),E=[X-f,te-D]}return E.map(Math.round)}getClassName(E,L,f){const y=E.series,b=y.options;return[this.options.className,"highcharts-label",f&&"highcharts-tooltip-header",L?"highcharts-tooltip-box":"highcharts-tooltip",!f&&"highcharts-color-"+ie(E.colorIndex,y.colorIndex),b&&b.className].filter(U).join(" ")}getLabel(){const E=this,L=this.chart.styledMode,f=this.options,y=this.split&&this.allowShared,b=f.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none");let D,X=this.chart.renderer;if(this.label){var te=!this.label.hasClass("highcharts-label");(!y&&te||y&&!te)&&this.destroy()}if(!this.label){if(this.outside){te=this.chart.options.chart.style;const q=n.getRendererType();this.container=D=d.doc.createElement("div"),D.className="highcharts-tooltip-container",O(D,{position:"absolute",top:"1px",pointerEvents:b,zIndex:Math.max(this.options.style.zIndex||0,(te&&te.zIndex||0)+3)}),d.doc.body.appendChild(D),this.renderer=X=new q(D,0,0,te,void 0,void 0,X.styledMode)}if(y?this.label=X.g("tooltip"):(this.label=X.label("",0,0,f.shape,void 0,void 0,f.useHTML,void 0,"tooltip").attr({padding:f.padding,r:f.borderRadius}),L||this.label.attr({fill:f.backgroundColor,"stroke-width":f.borderWidth||0}).css(f.style).css({pointerEvents:b})),E.outside){const q=this.label,{xSetter:ce,ySetter:fe}=q;q.xSetter=function(we){ce.call(q,E.distance),D.style.left=we+"px"},q.ySetter=function(we){fe.call(q,E.distance),D.style.top=we+"px"}}this.label.attr({zIndex:8}).shadow(f.shadow).add()}return this.label}getPlayingField(){const{body:E,documentElement:L}=Q,{chart:f,distance:y,outside:b}=this;return{width:b?Math.max(E.scrollWidth,L.scrollWidth,E.offsetWidth,L.offsetWidth,L.clientWidth)-2*y:f.chartWidth,height:b?Math.max(E.scrollHeight,L.scrollHeight,E.offsetHeight,L.offsetHeight,L.clientHeight):f.chartHeight}}getPosition(E,L,f){const y=this.chart,b=this.distance,D={},X=y.inverted&&f.h||0,te=this.outside;var q=this.getPlayingField();const ce=q.width,fe=q.height,we=y.pointer.getChartPosition();q=le=>{const me=le==="x";return[le,me?ce:fe,me?E:L].concat(te?[me?E*we.scaleX:L*we.scaleY,me?we.left-b+(f.plotX+y.plotLeft)*we.scaleX:we.top-b+(f.plotY+y.plotTop)*we.scaleY,0,me?ce:fe]:[me?E:L,me?f.plotX+y.plotLeft:f.plotY+y.plotTop,me?y.plotLeft:y.plotTop,me?y.plotLeft+y.plotWidth:y.plotTop+y.plotHeight])};let Z=q("y"),se=q("x"),ue;q=!!f.negative,!y.polar&&y.hoverSeries&&y.hoverSeries.yAxis&&y.hoverSeries.yAxis.reversed&&(q=!q);const ye=!this.followPointer&&ie(f.ttBelow,!y.inverted===q),Pe=function(le,me,be,Le,De,Ne,st){const it=te?le==="y"?b*we.scaleY:b*we.scaleX:b,ht=(be-Le)/2,ke=Le<De-b,Be=De+b+Le<me,Ue=De-it-be+ht;if(De=De+it-ht,ye&&Be)D[le]=De;else if(!ye&&ke)D[le]=Ue;else if(ke)D[le]=Math.min(st-Le,0>Ue-X?Ue:Ue-X);else if(Be)D[le]=Math.max(Ne,De+X+be>me?De:De+X);else return!1},ae=function(le,me,be,Le,De){let Ne;return De<b||De>me-b?Ne=!1:D[le]=De<be/2?1:De>me-Le/2?me-Le-2:De-be/2,Ne},xe=function(le){const me=Z;Z=se,se=me,ue=le},ve=function(){Pe.apply(0,Z)!==!1?ae.apply(0,se)!==!1||ue||(xe(!0),ve()):ue?D.x=D.y=0:(xe(!0),ve())};return(y.inverted||1<this.len)&&xe(),ve(),D}hide(E){const L=this;T.clearTimeout(this.hideTimer),E=ie(E,this.options.hideDelay),this.isHidden||(this.hideTimer=N(function(){L.getLabel().fadeOut(E&&void 0),L.isHidden=!0},E))}init(E,L){this.chart=E,this.options=L,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=L.split&&!E.inverted&&!E.polar,this.shared=L.shared||this.split,this.outside=ie(L.outside,!(!E.scrollablePixelsX&&!E.scrollablePixelsY))}shouldStickOnContact(E){return!(this.followPointer||!this.options.stickOnContact||E&&!this.chart.pointer.inClass(E.target,"highcharts-tooltip"))}move(E,L,f,y){const b=this,D=b.now,X=b.options.animation!==!1&&!b.isHidden&&(1<Math.abs(E-D.x)||1<Math.abs(L-D.y)),te=b.followPointer||1<b.len;M(D,{x:X?(2*D.x+E)/3:E,y:X?(D.y+L)/2:L,anchorX:te?void 0:X?(2*D.anchorX+f)/3:f,anchorY:te?void 0:X?(D.anchorY+y)/2:y}),b.getLabel().attr(D),b.drawTracker(),X&&(T.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){b&&b.move(E,L,f,y)},32))}refresh(E,L){const f=this.chart,y=this.options,b=f.pointer,D=J(E),X=D[0],te=[];var q=y.formatter||this.defaultFormatter,ce=this.shared;const fe=f.styledMode;let we={};if(y.enabled&&X.series){T.clearTimeout(this.hideTimer),this.allowShared=!(!k(E)&&E.series&&E.series.noSharedTooltip),this.followPointer=!this.split&&X.series.tooltipOptions.followPointer,E=this.getAnchor(E,L);var Z=E[0],se=E[1];if(ce&&this.allowShared?(b.applyInactiveState(D),D.forEach(function(ue){ue.setState("hover"),te.push(ue.getLabelConfig())}),we={x:X.category,y:X.y},we.points=te):we=X.getLabelConfig(),this.len=te.length,q=q.call(we,this),ce=X.series,this.distance=ie(ce.tooltipOptions.distance,16),q===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(q,D);else{let ue=Z,ye=se;if(L&&b.isDirectTouch&&(ue=L.chartX-f.plotLeft,ye=L.chartY-f.plotTop),f.polar||ce.options.clip===!1||D.some(Pe=>b.isDirectTouch||Pe.series.shouldShowTooltip(ue,ye)))L=this.getLabel(),y.style.width&&!fe||L.css({width:(this.outside?this.getPlayingField():f.spacingBox).width+"px"}),L.attr({text:q&&q.join?q.join(""):q}),L.addClass(this.getClassName(X),!0),fe||L.attr({stroke:y.borderColor||X.color||ce.color||"#666666"}),this.updatePosition({plotX:Z,plotY:se,negative:X.negative,ttBelow:X.ttBelow,h:E[2]||0});else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}S(this,"refresh")}}renderSplit(E,L){function f(nt,wt,Ut,Vt,yi=!0){return Ut?(wt=be?0:it,nt=I(nt-Vt/2,ve.left,ve.right-Vt-(y.outside?Le:0))):(wt-=Ne,nt=yi?nt-Vt-Pe:nt+Pe,nt=I(nt,yi?nt:ve.left,ve.right)),{x:nt,y:wt}}const y=this,{chart:b,chart:{chartWidth:D,chartHeight:X,plotHeight:te,plotLeft:q,plotTop:ce,pointer:fe,scrollablePixelsY:we=0,scrollablePixelsX:Z,scrollingContainer:{scrollLeft:se,scrollTop:ue}={scrollLeft:0,scrollTop:0},styledMode:ye},distance:Pe,options:ae,options:{positioner:xe}}=y,ve=y.outside&&typeof Z!="number"?Q.documentElement.getBoundingClientRect():{left:se,right:se+D,top:ue,bottom:ue+X},le=y.getLabel(),me=this.renderer||b.renderer,be=!(!b.xAxis[0]||!b.xAxis[0].opposite),{left:Le,top:De}=fe.getChartPosition();let Ne=ce+ue,st=0,it=te-we;U(E)&&(E=[!1,E]),E=E.slice(0,L.length+1).reduce(function(nt,wt,Ut){if(wt!==!1&&wt!==""){Ut=L[Ut-1]||{isHeader:!0,plotX:L[0].plotX,plotY:te,series:{}};const zi=Ut.isHeader;var Vt=zi?y:Ut.series,yi;{var ri=Ut;wt=wt.toString();var Mi=Vt.tt;const{isHeader:_n,series:wn}=ri;Mi||(Mi={padding:ae.padding,r:ae.borderRadius},ye||(Mi.fill=ae.backgroundColor,Mi["stroke-width"]=(yi=ae.borderWidth)!==null&&yi!==void 0?yi:1),Mi=me.label("",0,0,ae[_n?"headerShape":"shape"],void 0,void 0,ae.useHTML).addClass(y.getClassName(ri,!0,_n)).attr(Mi).add(le)),Mi.isActive=!0,Mi.attr({text:wt}),ye||Mi.css(ae.style).attr({stroke:ae.borderColor||ri.color||wn.color||"#333333"}),yi=Mi}yi=Vt.tt=yi,ri=yi.getBBox(),Vt=ri.width+yi.strokeWidth(),zi&&(st=ri.height,it+=st,be&&(Ne-=st));{const{isHeader:_n,plotX:wn=0,plotY:Yn=0,series:Ts}=Ut;if(_n){wt=q+wn;var $i=ce+te/2}else{const{xAxis:ur,yAxis:Dr}=Ts;wt=ur.pos+I(wn,-Pe,ur.len+Pe),Ts.shouldShowTooltip(0,Dr.pos-ce+Yn,{ignoreX:!0})&&($i=Dr.pos+Yn)}wt=I(wt,ve.left-Pe,ve.right+Pe),$i={anchorX:wt,anchorY:$i}}const{anchorX:qi,anchorY:Oi}=$i;typeof Oi=="number"?($i=ri.height+1,ri=xe?xe.call(y,Vt,$i,Ut):f(qi,Oi,zi,Vt),nt.push({align:xe?0:void 0,anchorX:qi,anchorY:Oi,boxWidth:Vt,point:Ut,rank:ie(ri.rank,zi?1:0),size:$i,target:ri.y,tt:yi,x:ri.x})):yi.isActive=!1}return nt},[]),!xe&&E.some(nt=>{var{outside:wt}=y;return wt=(wt?Le:0)+nt.anchorX,wt<ve.left&&wt+nt.boxWidth<ve.right?!0:wt<Le-ve.left+nt.boxWidth&&ve.right-wt>wt})&&(E=E.map(nt=>{const{x:wt,y:Ut}=f(nt.anchorX,nt.anchorY,nt.point.isHeader,nt.boxWidth,!1);return M(nt,{target:Ut,x:wt})})),y.cleanSplit(),W(E,it);var ht=Le,ke=Le;E.forEach(function(nt){const{x:wt,boxWidth:Ut,isHeader:Vt}=nt;Vt||(y.outside&&Le+wt<ht&&(ht=Le+wt),!Vt&&y.outside&&ht+Ut>ke&&(ke=Le+wt))}),E.forEach(function(nt){const{x:wt,anchorX:Ut,anchorY:Vt,pos:yi,point:{isHeader:ri}}=nt,Mi={visibility:typeof yi>"u"?"hidden":"inherit",x:wt,y:(yi||0)+Ne,anchorX:Ut,anchorY:Vt};if(y.outside&&wt<Ut){const $i=Le-ht;0<$i&&(ri||(Mi.x=wt+$i,Mi.anchorX=Ut+$i),ri&&(Mi.x=(ke-ht)/2,Mi.anchorX=Ut+$i))}nt.tt.attr(Mi)});const{container:Be,outside:Ue,renderer:We}=y;if(Ue&&Be&&We){const{width:nt,height:wt,x:Ut,y:Vt}=le.getBBox();We.setSize(nt+Ut,wt+Vt,!1),Be.style.left=ht+"px",Be.style.top=De+"px"}z&&le.attr({opacity:le.opacity===1?.999:1})}drawTracker(){if(this.shouldStickOnContact()){var E=this.chart,L=this.label,f=this.shared?E.hoverPoints:E.hoverPoint;if(L&&f){var y={x:0,y:0,width:0,height:0};f=this.getAnchor(f);var b=L.getBBox();f[0]+=E.plotLeft-L.translateX,f[1]+=E.plotTop-L.translateY,y.x=Math.min(0,f[0]),y.y=Math.min(0,f[1]),y.width=0>f[0]?Math.max(Math.abs(f[0]),b.width-f[0]):Math.max(Math.abs(f[0]),b.width),y.height=0>f[1]?Math.max(Math.abs(f[1]),b.height-Math.abs(f[1])):Math.max(Math.abs(f[1]),b.height),this.tracker?this.tracker.attr(y):(this.tracker=L.renderer.rect(y).addClass("highcharts-tracker").add(L),E.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}}else this.tracker&&(this.tracker=this.tracker.destroy())}styledModeFormat(E){return E.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter(E,L){const f=E.series,y=f.tooltipOptions;var b=f.xAxis;const D=b&&b.dateTime;b={isFooter:L,labelConfig:E};let X=y.xDateFormat,te=y[L?"footerFormat":"headerFormat"];return S(this,"headerFormatter",b,function(q){D&&!X&&G(E.key)&&(X=D.getXDateFormat(E.key,y.dateTimeLabelFormats)),D&&X&&(E.point&&E.point.tooltipDateKeys||["key"]).forEach(function(ce){te=te.replace("{point."+ce+"}","{point."+ce+":"+X+"}")}),f.chart.styledMode&&(te=this.styledModeFormat(te)),q.text=V(te,{point:E,series:f},this.chart)}),b.text}update(E){this.destroy(),C(!0,this.chart.options.tooltip.userOptions,E),this.init(this.chart,C(!0,this.options,E))}updatePosition(E){const{chart:L,distance:f,options:y}=this;var b=L.pointer;const D=this.getLabel(),{left:X,top:te,scaleX:q,scaleY:ce}=b.getChartPosition();b=(y.positioner||this.getPosition).call(this,D.width,D.height,E);let fe=(E.plotX||0)+L.plotLeft;E=(E.plotY||0)+L.plotTop;let we;this.outside&&(y.positioner&&(b.x+=X-f,b.y+=te-f),we=(y.borderWidth||0)+2*f,this.renderer.setSize(D.width+we,D.height+we,!1),(q!==1||ce!==1)&&(O(this.container,{transform:`scale(${q}, ${ce})`}),fe*=q,E*=ce),fe+=X-b.x,E+=te-b.y),this.move(Math.round(b.x),Math.round(b.y||0),fe,E)}}return function(H){const E=[];H.compose=function(L){T.pushUnique(E,L)&&K(L,"afterInit",function(){const f=this.chart;f.options.tooltip&&(f.tooltip=new H(f,f.options.tooltip))})}}(F||(F={})),F}),r(l,"Core/Series/Point.js",[l["Core/Renderer/HTML/AST.js"],l["Core/Animation/AnimationUtilities.js"],l["Core/Defaults.js"],l["Core/FormatUtilities.js"],l["Core/Utilities.js"]],function(c,d,m,n,T){const{animObject:V}=d,{defaultOptions:Q}=m,{format:z}=n,{addEvent:W,defined:K,erase:I,extend:O,fireEvent:$,getNestedProperty:M,isArray:S,isFunction:k,isNumber:G,isObject:U,merge:C,objectEach:ie,pick:J,syncTimeout:N,removeEvent:F,uniqueKey:H}=T;class E{constructor(){this.category=void 0,this.destroyed=!1,this.formatPrefix="point",this.id=void 0,this.isNull=!1,this.percentage=this.options=this.name=void 0,this.selected=!1,this.total=this.shapeArgs=this.series=void 0,this.visible=!0,this.x=void 0}animateBeforeDestroy(){const f=this,y={x:f.startXPos,opacity:0},b=f.getGraphicalProps();b.singular.forEach(function(D){f[D]=f[D].animate(D==="dataLabel"?{x:f[D].startXPos,y:f[D].startYPos,opacity:0}:y)}),b.plural.forEach(function(D){f[D].forEach(function(X){X.element&&X.animate(O({x:f.startXPos},X.startYPos?{x:X.startXPos,y:X.startYPos}:{}))})})}applyOptions(f,y){const b=this.series,D=b.options.pointValKey||b.pointValKey;return f=E.prototype.optionsToObject.call(this,f),O(this,f),this.options=this.options?O(this.options,f):f,f.group&&delete this.group,f.dataLabels&&delete this.dataLabels,D&&(this.y=E.prototype.getNestedProperty.call(this,D)),this.formatPrefix=(this.isNull=this.isValid&&!this.isValid())?"null":"point",this.selected&&(this.state="select"),"name"in this&&typeof y>"u"&&b.xAxis&&b.xAxis.hasNames&&(this.x=b.xAxis.nameToX(this)),typeof this.x>"u"&&b?this.x=typeof y>"u"?b.autoIncrement():y:G(f.x)&&b.options.relativeXValue&&(this.x=b.autoIncrement(f.x)),this}destroy(){if(!this.destroyed){const y=this;var f=y.series;const b=f.chart;f=f.options.dataSorting;const D=b.hoverPoints,X=V(y.series.chart.renderer.globalAnimation),te=()=>{(y.graphic||y.graphics||y.dataLabel||y.dataLabels)&&(F(y),y.destroyElements());for(const q in y)delete y[q]};y.legendItem&&b.legend.destroyItem(y),D&&(y.setState(),I(D,y),D.length||(b.hoverPoints=null)),y===b.hoverPoint&&y.onMouseOut(),f&&f.enabled?(this.animateBeforeDestroy(),N(te,X.duration)):te(),b.pointCount--}this.destroyed=!0}destroyElements(f){const y=this;f=y.getGraphicalProps(f),f.singular.forEach(function(b){y[b]=y[b].destroy()}),f.plural.forEach(function(b){y[b].forEach(function(D){D&&D.element&&D.destroy()}),delete y[b]})}firePointEvent(f,y,b){const D=this,X=this.series.options;(X.point.events[f]||D.options&&D.options.events&&D.options.events[f])&&D.importEvents(),f==="click"&&X.allowPointSelect&&(b=function(te){D.select&&D.select(null,te.ctrlKey||te.metaKey||te.shiftKey)}),$(D,f,y,b)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(typeof this.colorIndex<"u"?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(f){const y=this,b=[],D={singular:[],plural:[]};let X,te;for(f=f||{graphic:1,dataLabel:1},f.graphic&&b.push("graphic"),f.dataLabel&&b.push("dataLabel","dataLabelPath","dataLabelUpper","connector"),te=b.length;te--;)X=b[te],y[X]&&D.singular.push(X);return["graphic","dataLabel","connector"].forEach(function(q){const ce=q+"s";f[q]&&y[ce]&&D.plural.push(ce)}),D}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty(f){if(f)return f.indexOf("custom.")===0?M(f,this.options):this[f]}getZone(){var f=this.series;const y=f.zones;f=f.zoneAxis||"y";let b,D=0;for(b=y[D];this[f]>=b.value;)b=y[++D];return this.nonZonedColor||(this.nonZonedColor=this.color),this.color=b&&b.color&&!this.options.color?b.color:this.nonZonedColor,b}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}init(f,y,b){return this.series=f,this.applyOptions(y,b),this.id=K(this.id)?this.id:H(),this.resolveColor(),f.chart.pointCount++,$(this,"afterInit"),this}isValid(){return this.x!==null&&G(this.y)}optionsToObject(f){var y=this.series;const b=y.options.keys,D=b||y.pointArrayMap||["y"],X=D.length;let te={},q=0,ce=0;if(G(f)||f===null)te[D[0]]=f;else if(S(f))for(!b&&f.length>X&&(y=typeof f[0],y==="string"?te.name=f[0]:y==="number"&&(te.x=f[0]),q++);ce<X;)b&&typeof f[q]>"u"||(0<D[ce].indexOf(".")?E.prototype.setNestedProperty(te,f[q],D[ce]):te[D[ce]]=f[q]),q++,ce++;else typeof f=="object"&&(te=f,f.dataLabels&&(y._hasPointLabels=!0),f.marker&&(y._hasPointMarkers=!0));return te}pos(f,y=this.plotY){if(!this.destroyed){const{plotX:b,series:D}=this,{chart:X,xAxis:te,yAxis:q}=D;let ce=0,fe=0;if(G(b)&&G(y))return f&&(ce=te?te.pos:X.plotLeft,fe=q?q.pos:X.plotTop),X.inverted&&te&&q?[q.len-y+fe,te.len-b+ce]:[b+ce,y+fe]}}resolveColor(){const f=this.series;var y=f.chart.styledMode;let b;var D=f.chart.options.chart.colorCount;delete this.nonZonedColor,f.options.colorByPoint?(y||(D=f.options.colors||f.chart.options.colors,b=D[f.colorCounter],D=D.length),y=f.colorCounter,f.colorCounter++,f.colorCounter===D&&(f.colorCounter=0)):(y||(b=f.color),y=f.colorIndex),this.colorIndex=J(this.options.colorIndex,y),this.color=J(this.options.color,b)}setNestedProperty(f,y,b){return b.split(".").reduce(function(D,X,te,q){return D[X]=q.length-1===te?y:U(D[X],!0)?D[X]:{},D[X]},f),f}shouldDraw(){return!this.isNull}tooltipFormatter(f){const y=this.series,b=y.tooltipOptions,D=J(b.valueDecimals,""),X=b.valuePrefix||"",te=b.valueSuffix||"";return y.chart.styledMode&&(f=y.chart.tooltip.styledModeFormat(f)),(y.pointArrayMap||["y"]).forEach(function(q){q="{point."+q,(X||te)&&(f=f.replace(RegExp(q+"}","g"),X+q+"}"+te)),f=f.replace(RegExp(q+"}","g"),q+":,."+D+"f}")}),z(f,{point:this,series:this.series},y.chart)}update(f,y,b,D){function X(){te.applyOptions(f);var se=ce&&te.hasMockGraphic;se=te.y===null?!se:se,ce&&se&&(te.graphic=ce.destroy(),delete te.hasMockGraphic),U(f,!0)&&(ce&&ce.element&&f&&f.marker&&typeof f.marker.symbol<"u"&&(te.graphic=ce.destroy()),f&&f.dataLabels&&te.dataLabel&&(te.dataLabel=te.dataLabel.destroy()),te.connector&&(te.connector=te.connector.destroy())),Z=te.index,q.updateParallelArrays(te,Z),we.data[Z]=U(we.data[Z],!0)||U(f,!0)?te.options:J(f,we.data[Z]),q.isDirty=q.isDirtyData=!0,!q.fixedBox&&q.hasCartesianSeries&&(fe.isDirtyBox=!0),we.legendType==="point"&&(fe.isDirtyLegend=!0),y&&fe.redraw(b)}const te=this,q=te.series,ce=te.graphic,fe=q.chart,we=q.options;let Z;y=J(y,!0),D===!1?X():te.firePointEvent("update",{options:f},X)}remove(f,y){this.series.removePoint(this.series.data.indexOf(this),f,y)}select(f,y){const b=this,D=b.series,X=D.chart;this.selectedStaging=f=J(f,!b.selected),b.firePointEvent(f?"select":"unselect",{accumulate:y},function(){b.selected=b.options.selected=f,D.options.data[D.data.indexOf(b)]=b.options,b.setState(f&&"select"),y||X.getSelectedPoints().forEach(function(te){const q=te.series;te.selected&&te!==b&&(te.selected=te.options.selected=!1,q.options.data[q.data.indexOf(te)]=te.options,te.setState(X.hoverPoints&&q.options.inactiveOtherPoints?"inactive":""),te.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(f){const y=this.series.chart,b=y.pointer;f=f?b.normalize(f):b.getChartCoordinatesFromPoint(this,y.inverted),b.runPointActions(f,this)}onMouseOut(){const f=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(f.hoverPoints||[]).forEach(function(y){y.setState()}),f.hoverPoints=f.hoverPoint=null}importEvents(){if(!this.hasImportedEvents){const f=this,y=C(f.series.options.point,f.options).events;f.events=y,ie(y,function(b,D){k(b)&&W(f,D,b)}),this.hasImportedEvents=!0}}setState(f,y){const b=this.series;var D=this.state,X=b.options.states[f||"normal"]||{},te=Q.plotOptions[b.type].marker&&b.options.marker;const q=te&&te.enabled===!1,ce=te&&te.states&&te.states[f||"normal"]||{},fe=ce.enabled===!1,we=this.marker||{},Z=b.chart,se=te&&b.markerAttribs;let ue=b.halo;var ye;let Pe;var ae=b.stateMarkerGraphic;if(f=f||"",!(f===this.state&&!y||this.selected&&f!=="select"||X.enabled===!1||f&&(fe||q&&ce.enabled===!1)||f&&we.states&&we.states[f]&&we.states[f].enabled===!1)){if(this.state=f,se&&(ye=b.markerAttribs(this,f)),this.graphic&&!this.hasMockGraphic){if(D&&this.graphic.removeClass("highcharts-point-"+D),f&&this.graphic.addClass("highcharts-point-"+f),!Z.styledMode){D=b.pointAttribs(this,f),Pe=J(Z.options.chart.animation,X.animation);const xe=D.opacity;b.options.inactiveOtherPoints&&G(xe)&&((this.dataLabels||[]).forEach(function(ve){ve&&!ve.hasClass("highcharts-data-label-hidden")&&ve.animate({opacity:xe},Pe)}),this.connector&&this.connector.animate({opacity:xe},Pe)),this.graphic.animate(D,Pe)}ye&&this.graphic.animate(ye,J(Z.options.chart.animation,ce.animation,te.animation)),ae&&ae.hide()}else f&&ce&&(te=we.symbol||b.symbol,ae&&ae.currentSymbol!==te&&(ae=ae.destroy()),ye&&(ae?ae[y?"animate":"attr"]({x:ye.x,y:ye.y}):te&&(b.stateMarkerGraphic=ae=Z.renderer.symbol(te,ye.x,ye.y,ye.width,ye.height).add(b.markerGroup),ae.currentSymbol=te)),!Z.styledMode&&ae&&this.state!=="inactive"&&ae.attr(b.pointAttribs(this,f))),ae&&(ae[f&&this.isInside?"show":"hide"](),ae.element.point=this,ae.addClass(this.getClassName(),!0));X=X.halo,ye=(ae=this.graphic||ae)&&ae.visibility||"inherit",X&&X.size&&ae&&ye!=="hidden"&&!this.isCluster?(ue||(b.halo=ue=Z.renderer.path().add(ae.parentGroup)),ue.show()[y?"animate":"attr"]({d:this.haloPath(X.size)}),ue.attr({class:"highcharts-halo highcharts-color-"+J(this.colorIndex,b.colorIndex)+(this.className?" "+this.className:""),visibility:ye,zIndex:-1}),ue.point=this,Z.styledMode||ue.attr(O({fill:this.color||b.color,"fill-opacity":X.opacity},c.filterUserAttributes(X.attributes||{})))):ue&&ue.point&&ue.point.haloPath&&ue.animate({d:ue.point.haloPath(0)},null,ue.hide),$(this,"afterSetState",{state:f})}}haloPath(f){const y=this.pos();return y?this.series.chart.renderer.symbols.circle(Math.floor(y[0])-f,y[1]-f,2*f,2*f):[]}}return E}),r(l,"Core/Pointer.js",[l["Core/Color/Color.js"],l["Core/Globals.js"],l["Core/Utilities.js"]],function(c,d,m){const{parse:n}=c,{charts:T,noop:V}=d,{addEvent:Q,attr:z,css:W,defined:K,extend:I,find:O,fireEvent:$,isNumber:M,isObject:S,objectEach:k,offset:G,pick:U,splat:C}=m;class ie{constructor(N,F){this.lastValidTouch={},this.pinchDown=[],this.runChartClick=!1,this.eventsToUnbind=[],this.chart=N,this.hasDragged=!1,this.options=F,this.init(N,F)}applyInactiveState(N){let F=[],H;(N||[]).forEach(function(E){H=E.series,F.push(H),H.linkedParent&&F.push(H.linkedParent),H.linkedSeries&&(F=F.concat(H.linkedSeries)),H.navigatorSeries&&F.push(H.navigatorSeries)}),this.chart.series.forEach(function(E){F.indexOf(E)===-1?E.setState("inactive",!0):E.options.inactiveOtherPoints&&E.setAllPointsToState("inactive")})}destroy(){const N=this;this.eventsToUnbind.forEach(F=>F()),this.eventsToUnbind=[],d.chartCount||(ie.unbindDocumentMouseUp&&(ie.unbindDocumentMouseUp=ie.unbindDocumentMouseUp()),ie.unbindDocumentTouchEnd&&(ie.unbindDocumentTouchEnd=ie.unbindDocumentTouchEnd())),clearInterval(N.tooltipTimeout),k(N,function(F,H){N[H]=void 0})}getSelectionMarkerAttrs(N,F){const H={args:{chartX:N,chartY:F},attrs:{},shapeType:"rect"};return $(this,"getSelectionMarkerAttrs",H,E=>{const{chart:L,mouseDownX:f=0,mouseDownY:y=0,zoomHor:b,zoomVert:D}=this;E=E.attrs;let X;E.x=L.plotLeft,E.y=L.plotTop,E.width=b?1:L.plotWidth,E.height=D?1:L.plotHeight,b&&(X=N-f,E.width=Math.abs(X),E.x=(0<X?0:X)+f),D&&(X=F-y,E.height=Math.abs(X),E.y=(0<X?0:X)+y)}),H}drag(N){const F=this.chart,H=F.options.chart;var E=F.plotLeft;const L=F.plotTop,f=F.plotWidth,y=F.plotHeight,b=this.mouseDownX||0,D=this.mouseDownY||0,X=S(H.panning)?H.panning&&H.panning.enabled:H.panning,te=H.panKey&&N[H.panKey+"Key"];let q=N.chartX,ce=N.chartY,fe=this.selectionMarker;if((!fe||!fe.touch)&&(q<E?q=E:q>E+f&&(q=E+f),ce<L?ce=L:ce>L+y&&(ce=L+y),this.hasDragged=Math.sqrt(Math.pow(b-q,2)+Math.pow(D-ce,2)),10<this.hasDragged)){E=F.isInsidePlot(b-E,D-L,{visiblePlotOnly:!0});const{shapeType:we,attrs:Z}=this.getSelectionMarkerAttrs(q,ce);!F.hasCartesianSeries&&!F.mapView||!this.zoomX&&!this.zoomY||!E||te||fe||(this.selectionMarker=fe=F.renderer[we](),fe.attr({class:"highcharts-selection-marker",zIndex:7}).add(),F.styledMode||fe.attr({fill:H.selectionMarkerFill||n("#334eff").setOpacity(.25).get()})),fe&&fe.attr(Z),E&&!fe&&X&&F.pan(N,H.panning)}}dragStart(N){const F=this.chart;F.mouseIsDown=N.type,F.cancelClick=!1,F.mouseDownX=this.mouseDownX=N.chartX,F.mouseDownY=this.mouseDownY=N.chartY}getSelectionBox(N){const F={args:{marker:N},result:{}};return $(this,"getSelectionBox",F,H=>{H.result={x:N.attr?+N.attr("x"):N.x,y:N.attr?+N.attr("y"):N.y,width:N.attr?N.attr("width"):N.width,height:N.attr?N.attr("height"):N.height}}),F.result}drop(N){const F=this,H=this.chart,E=this.hasPinched;if(this.selectionMarker){const{x:L,y:f,width:y,height:b}=this.getSelectionBox(this.selectionMarker),D={originalEvent:N,xAxis:[],yAxis:[],x:L,y:f,width:y,height:b};let X=!!H.mapView;(this.hasDragged||E)&&(H.axes.forEach(function(te){if(te.zoomEnabled&&K(te.min)&&(E||F[{xAxis:"zoomX",yAxis:"zoomY"}[te.coll]])&&M(L)&&M(f)&&M(y)&&M(b)){var q=te.horiz;const ce=N.type==="touchend"?te.minPixelPadding:0,fe=te.toValue((q?L:f)+ce);q=te.toValue((q?L+y:f+b)-ce),D[te.coll].push({axis:te,min:Math.min(fe,q),max:Math.max(fe,q)}),X=!0}}),X&&$(H,"selection",D,function(te){H.zoom(I(te,E?{animation:!1}:null))})),M(H.index)&&(this.selectionMarker=this.selectionMarker.destroy()),E&&this.scaleGroups()}H&&M(H.index)&&(W(H.container,{cursor:H._cursor}),H.cancelClick=10<this.hasDragged,H.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])}findNearestKDPoint(N,F,H){let E;return N.forEach(function(L){var f=!(L.noSharedTooltip&&F)&&0>L.options.findNearestPointBy.indexOf("y");if(L=L.searchPoint(H,f),(f=S(L,!0)&&L.series)&&!(f=!S(E,!0))){{f=E.distX-L.distX;const y=E.dist-L.dist,b=(L.series.group&&L.series.group.zIndex)-(E.series.group&&E.series.group.zIndex);f=f!==0&&F?f:y!==0?y:b!==0?b:E.series.index>L.series.index?-1:1}f=0<f}f&&(E=L)}),E}getChartCoordinatesFromPoint(N,F){var H=N.series;const E=H.xAxis;H=H.yAxis;const L=N.shapeArgs;if(E&&H){let f=U(N.clientX,N.plotX),y=N.plotY||0;return N.isNode&&L&&M(L.x)&&M(L.y)&&(f=L.x,y=L.y),F?{chartX:H.len+H.pos-y,chartY:E.len+E.pos-f}:{chartX:f+E.pos,chartY:y+H.pos}}if(L&&L.x&&L.y)return{chartX:L.x,chartY:L.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;var{container:N}=this.chart;const F=G(N);this.chartPosition={left:F.left,top:F.top,scaleX:1,scaleY:1};const H=N.offsetWidth;return N=N.offsetHeight,2<H&&2<N&&(this.chartPosition.scaleX=F.width/H,this.chartPosition.scaleY=F.height/N),this.chartPosition}getCoordinates(N){const F={xAxis:[],yAxis:[]};return this.chart.axes.forEach(function(H){F[H.isXAxis?"xAxis":"yAxis"].push({axis:H,value:H.toValue(N[H.horiz?"chartX":"chartY"])})}),F}getHoverData(N,F,H,E,L,f){const y=[];E=!(!E||!N);const b=function(q){return q.visible&&!(!L&&q.directTouch)&&U(q.options.enableMouseTracking,!0)};let D,X={chartX:f?f.chartX:void 0,chartY:f?f.chartY:void 0,shared:L};$(this,"beforeGetHoverData",X),D=F&&!F.stickyTracking?[F]:H.filter(q=>q.stickyTracking&&(X.filter||b)(q));const te=E||!f?N:this.findNearestKDPoint(D,L,f);return F=te&&te.series,te&&(L&&!F.noSharedTooltip?(D=H.filter(function(q){return X.filter?X.filter(q):b(q)&&!q.noSharedTooltip}),D.forEach(function(q){let ce=O(q.points,function(fe){return fe.x===te.x&&!fe.isNull});S(ce)&&(q.boosted&&q.boost&&(ce=q.boost.getPoint(ce)),y.push(ce))})):y.push(te)),X={hoverPoint:te},$(this,"afterGetHoverData",X),{hoverPoint:X.hoverPoint,hoverSeries:F,hoverPoints:y}}getPointFromEvent(N){N=N.target;let F;for(;N&&!F;)F=N.point,N=N.parentNode;return F}onTrackerMouseOut(N){N=N.relatedTarget;const F=this.chart.hoverSeries;this.isDirectTouch=!1,!F||!N||F.stickyTracking||this.inClass(N,"highcharts-tooltip")||this.inClass(N,"highcharts-series-"+F.index)&&this.inClass(N,"highcharts-tracker")||F.onMouseOut()}inClass(N,F){let H;for(;N;){if(H=z(N,"class")){if(H.indexOf(F)!==-1)return!0;if(H.indexOf("highcharts-container")!==-1)return!1}N=N.parentElement}}init(N,F){this.options=F,this.chart=N,this.runChartClick=!(!F.chart.events||!F.chart.events.click),this.pinchDown=[],this.lastValidTouch={},this.setDOMEvents(),$(this,"afterInit")}normalize(N,F){var H=N.touches,E=H?H.length?H.item(0):U(H.changedTouches,N.changedTouches)[0]:N;return F||(F=this.getChartPosition()),H=E.pageX-F.left,E=E.pageY-F.top,H/=F.scaleX,E/=F.scaleY,I(N,{chartX:Math.round(H),chartY:Math.round(E)})}onContainerClick(N){const F=this.chart,H=F.hoverPoint;N=this.normalize(N);const E=F.plotLeft,L=F.plotTop;F.cancelClick||(H&&this.inClass(N.target,"highcharts-tracker")?($(H.series,"click",I(N,{point:H})),F.hoverPoint&&H.firePointEvent("click",N)):(I(N,this.getCoordinates(N)),F.isInsidePlot(N.chartX-E,N.chartY-L,{visiblePlotOnly:!0})&&$(F,"click",N)))}onContainerMouseDown(N){const F=((N.buttons||N.button)&1)===1;N=this.normalize(N),d.isFirefox&&N.button!==0&&this.onContainerMouseMove(N),(typeof N.button>"u"||F)&&(this.zoomOption(N),F&&N.preventDefault&&N.preventDefault(),this.dragStart(N))}onContainerMouseLeave(N){const F=T[U(ie.hoverChartIndex,-1)];N=this.normalize(N),F&&N.relatedTarget&&!this.inClass(N.relatedTarget,"highcharts-tooltip")&&(F.pointer.reset(),F.pointer.chartPosition=void 0)}onContainerMouseEnter(N){delete this.chartPosition}onContainerMouseMove(N){const F=this.chart,H=F.tooltip;N=this.normalize(N),this.setHoverChartIndex(),(F.mouseIsDown==="mousedown"||this.touchSelect(N))&&this.drag(N),F.openMenu||!this.inClass(N.target,"highcharts-tracker")&&!F.isInsidePlot(N.chartX-F.plotLeft,N.chartY-F.plotTop,{visiblePlotOnly:!0})||H&&H.shouldStickOnContact(N)||(this.inClass(N.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(N))}onDocumentTouchEnd(N){const F=T[U(ie.hoverChartIndex,-1)];F&&F.pointer.drop(N)}onContainerTouchMove(N){this.touchSelect(N)?this.onContainerMouseMove(N):this.touch(N)}onContainerTouchStart(N){this.touchSelect(N)?this.onContainerMouseDown(N):(this.zoomOption(N),this.touch(N,!0))}onDocumentMouseMove(N){const F=this.chart,H=F.tooltip,E=this.chartPosition;N=this.normalize(N,E),!E||F.isInsidePlot(N.chartX-F.plotLeft,N.chartY-F.plotTop,{visiblePlotOnly:!0})||H&&H.shouldStickOnContact(N)||this.inClass(N.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(N){const F=T[U(ie.hoverChartIndex,-1)];F&&F.pointer.drop(N)}pinch(N){const F=this,H=F.chart,E=F.pinchDown,L=N.touches||[],f=L.length,y=F.lastValidTouch,b=F.hasZoom,D={},X=f===1&&(F.inClass(N.target,"highcharts-tracker")&&H.runTrackerClick||F.runChartClick),te={};var q=F.chart.tooltip;q=f===1&&U(q&&q.options.followTouchMove,!0);let ce=F.selectionMarker;1<f?F.initiated=!0:q&&(F.initiated=!1),b&&F.initiated&&!X&&N.cancelable!==!1&&N.preventDefault(),[].map.call(L,function(fe){return F.normalize(fe)}),N.type==="touchstart"?([].forEach.call(L,function(fe,we){E[we]={chartX:fe.chartX,chartY:fe.chartY}}),y.x=[E[0].chartX,E[1]&&E[1].chartX],y.y=[E[0].chartY,E[1]&&E[1].chartY],H.axes.forEach(function(fe){if(fe.zoomEnabled){const we=H.bounds[fe.horiz?"h":"v"],Z=fe.minPixelPadding,se=fe.toPixels(Math.min(U(fe.options.min,fe.dataMin),fe.dataMin)),ue=fe.toPixels(Math.max(U(fe.options.max,fe.dataMax),fe.dataMax)),ye=Math.max(se,ue);we.min=Math.min(fe.pos,Math.min(se,ue)-Z),we.max=Math.max(fe.pos+fe.len,ye+Z)}}),F.res=!0):q?this.runPointActions(F.normalize(N)):E.length&&($(H,"touchpan",{originalEvent:N},()=>{ce||(F.selectionMarker=ce=I({destroy:V,touch:!0},H.plotBox)),F.pinchTranslate(E,L,D,ce,te,y),F.hasPinched=b,F.scaleGroups(D,te)}),F.res&&(F.res=!1,this.reset(!1,0)))}pinchTranslate(N,F,H,E,L,f){this.zoomHor&&this.pinchTranslateDirection(!0,N,F,H,E,L,f),this.zoomVert&&this.pinchTranslateDirection(!1,N,F,H,E,L,f)}pinchTranslateDirection(N,F,H,E,L,f,y,b){const D=this.chart,X=N?"x":"y",te=N?"X":"Y",q="chart"+te,ce=N?"width":"height",fe=D["plot"+(N?"Left":"Top")],we=D.inverted,Z=D.bounds[N?"h":"v"],se=F.length===1,ue=F[0][q],ye=!se&&F[1][q];F=function(){typeof le=="number"&&20<Math.abs(ue-ye)&&(xe=b||Math.abs(ve-le)/Math.abs(ue-ye)),ae=(fe-ve)/xe+ue,Pe=D["plot"+(N?"Width":"Height")]/xe};let Pe,ae,xe=b||1,ve=H[0][q],le=!se&&H[1][q],me;F(),H=ae,H<Z.min?(H=Z.min,me=!0):H+Pe>Z.max&&(H=Z.max-Pe,me=!0),me?(ve-=.8*(ve-y[X][0]),typeof le=="number"&&(le-=.8*(le-y[X][1])),F()):y[X]=[ve,le],we||(f[X]=ae-fe,f[ce]=Pe),f=we?1/xe:xe,L[ce]=Pe,L[X]=H,E[we?N?"scaleY":"scaleX":"scale"+te]=xe,E["translate"+te]=f*fe+(ve-f*ue)}reset(N,F){const H=this.chart,E=H.hoverSeries,L=H.hoverPoint,f=H.hoverPoints,y=H.tooltip,b=y&&y.shared?f:L;N&&b&&C(b).forEach(function(D){D.series.isCartesian&&typeof D.plotX>"u"&&(N=!1)}),N?y&&b&&C(b).length&&(y.refresh(b),y.shared&&f?f.forEach(function(D){D.setState(D.state,!0),D.series.isCartesian&&(D.series.xAxis.crosshair&&D.series.xAxis.drawCrosshair(null,D),D.series.yAxis.crosshair&&D.series.yAxis.drawCrosshair(null,D))}):L&&(L.setState(L.state,!0),H.axes.forEach(function(D){D.crosshair&&L.series[D.coll]===D&&D.drawCrosshair(null,L)}))):(L&&L.onMouseOut(),f&&f.forEach(function(D){D.setState()}),E&&E.onMouseOut(),y&&y.hide(F),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),H.axes.forEach(function(D){D.hideCrosshair()}),this.hoverX=H.hoverPoints=H.hoverPoint=null)}runPointActions(N,F,H){const E=this.chart,L=E.tooltip&&E.tooltip.options.enabled?E.tooltip:void 0,f=L?L.shared:!1;let y=F||E.hoverPoint,b=y&&y.series||E.hoverSeries;F=this.getHoverData(y,b,E.series,(!N||N.type!=="touchmove")&&(!!F||b&&b.directTouch&&this.isDirectTouch),f,N),y=F.hoverPoint,b=F.hoverSeries;const D=F.hoverPoints;F=b&&b.tooltipOptions.followPointer&&!b.tooltipOptions.split;const X=f&&b&&!b.noSharedTooltip;if(y&&(H||y!==E.hoverPoint||L&&L.isHidden)){if((E.hoverPoints||[]).forEach(function(te){D.indexOf(te)===-1&&te.setState()}),E.hoverSeries!==b&&b.onMouseOver(),this.applyInactiveState(D),(D||[]).forEach(function(te){te.setState("hover")}),E.hoverPoint&&E.hoverPoint.firePointEvent("mouseOut"),!y.series)return;E.hoverPoints=D,E.hoverPoint=y,y.firePointEvent("mouseOver",void 0,()=>{L&&y&&L.refresh(X?D:y,N)})}else F&&L&&!L.isHidden&&(H=L.getAnchor([{}],N),E.isInsidePlot(H[0],H[1],{visiblePlotOnly:!0})&&L.updatePosition({plotX:H[0],plotY:H[1]}));this.unDocMouseMove||(this.unDocMouseMove=Q(E.container.ownerDocument,"mousemove",function(te){const q=T[ie.hoverChartIndex];q&&q.pointer.onDocumentMouseMove(te)}),this.eventsToUnbind.push(this.unDocMouseMove)),E.axes.forEach(function(te){const q=U((te.crosshair||{}).snap,!0);let ce;q&&((ce=E.hoverPoint)&&ce.series[te.coll]===te||(ce=O(D,fe=>fe.series&&fe.series[te.coll]===te))),ce||!q?te.drawCrosshair(N,ce):te.hideCrosshair()})}scaleGroups(N,F){const H=this.chart;H.series.forEach(function(E){const L=N||E.getPlotBox();E.group&&(E.xAxis&&E.xAxis.zoomEnabled||H.mapView)&&(E.group.attr(L),E.markerGroup&&(E.markerGroup.attr(L),E.markerGroup.clip(F?H.clipRect:null)),E.dataLabelsGroup&&E.dataLabelsGroup.attr(L))}),H.clipRect.attr(F||H.clipBox)}setDOMEvents(){const N=this.chart.container,F=N.ownerDocument;N.onmousedown=this.onContainerMouseDown.bind(this),N.onmousemove=this.onContainerMouseMove.bind(this),N.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(Q(N,"mouseenter",this.onContainerMouseEnter.bind(this))),this.eventsToUnbind.push(Q(N,"mouseleave",this.onContainerMouseLeave.bind(this))),ie.unbindDocumentMouseUp||(ie.unbindDocumentMouseUp=Q(F,"mouseup",this.onDocumentMouseUp.bind(this)));let H=this.chart.renderTo.parentElement;for(;H&&H.tagName!=="BODY";)this.eventsToUnbind.push(Q(H,"scroll",()=>{delete this.chartPosition})),H=H.parentElement;d.hasTouch&&(this.eventsToUnbind.push(Q(N,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1})),this.eventsToUnbind.push(Q(N,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),ie.unbindDocumentTouchEnd||(ie.unbindDocumentTouchEnd=Q(F,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})))}setHoverChartIndex(){const N=this.chart,F=d.charts[U(ie.hoverChartIndex,-1)];F&&F!==N&&F.pointer.onContainerMouseLeave({relatedTarget:N.container}),F&&F.mouseIsDown||(ie.hoverChartIndex=N.index)}touch(N,F){const H=this.chart;let E;this.setHoverChartIndex(),N.touches.length===1?(N=this.normalize(N),H.isInsidePlot(N.chartX-H.plotLeft,N.chartY-H.plotTop,{visiblePlotOnly:!0})&&!H.openMenu?(F&&this.runPointActions(N),N.type==="touchmove"&&(F=this.pinchDown,E=F[0]?4<=Math.sqrt(Math.pow(F[0].chartX-N.chartX,2)+Math.pow(F[0].chartY-N.chartY,2)):!1),U(E,!0)&&this.pinch(N)):F&&this.reset()):N.touches.length===2&&this.pinch(N)}touchSelect(N){return!(!this.chart.options.chart.zooming.singleTouch||!N.touches||N.touches.length!==1)}zoomOption(N){var F=this.chart,H=F.options.chart;F=F.inverted;let E=H.zooming.type||"";/touch/.test(N.type)&&(E=U(H.zooming.pinchType,E)),this.zoomX=N=/x/.test(E),this.zoomY=H=/y/.test(E),this.zoomHor=N&&!F||H&&F,this.zoomVert=H&&!F||N&&F,this.hasZoom=N||H}}return function(J){const N=[],F=[];J.compose=function(H){m.pushUnique(F,H)&&Q(H,"beforeRender",function(){this.pointer=new J(this,this.options)})},J.dissolve=function(){for(let H=0,E=N.length;H<E;++H)N[H]();N.length=0}}(ie||(ie={})),ie}),r(l,"Core/Legend/Legend.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/FormatUtilities.js"],l["Core/Globals.js"],l["Core/Series/Point.js"],l["Core/Renderer/RendererUtilities.js"],l["Core/Utilities.js"]],function(c,d,m,n,T,V){const{animObject:Q,setAnimation:z}=c,{format:W}=d,{marginNames:K}=m,{distribute:I}=T,{addEvent:O,createElement:$,css:M,defined:S,discardElement:k,find:G,fireEvent:U,isNumber:C,merge:ie,pick:J,relativeLength:N,stableSort:F,syncTimeout:H}=V;class E{constructor(f,y){this.allItems=[],this.contentGroup=this.box=void 0,this.display=!1,this.group=void 0,this.offsetWidth=this.maxLegendWidth=this.maxItemWidth=this.legendWidth=this.legendHeight=this.lastLineHeight=this.lastItemY=this.itemY=this.itemX=this.itemMarginTop=this.itemMarginBottom=this.itemHeight=this.initialItemY=0,this.options=void 0,this.padding=0,this.pages=[],this.proximate=!1,this.scrollGroup=void 0,this.widthOption=this.totalItemWidth=this.titleHeight=this.symbolWidth=this.symbolHeight=0,this.chart=f,this.init(f,y)}init(f,y){this.chart=f,this.setOptions(y),y.enabled&&(this.render(),O(this.chart,"endResize",function(){this.legend.positionCheckboxes()}),O(this.chart,"render",()=>{this.proximate&&(this.proximatePositions(),this.positionItems())}))}setOptions(f){const y=J(f.padding,8);this.options=f,this.chart.styledMode||(this.itemStyle=f.itemStyle,this.itemHiddenStyle=ie(this.itemStyle,f.itemHiddenStyle)),this.itemMarginTop=f.itemMarginTop,this.itemMarginBottom=f.itemMarginBottom,this.padding=y,this.initialItemY=y-5,this.symbolWidth=J(f.symbolWidth,16),this.pages=[],this.proximate=f.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(f,y){const b=this.chart;this.setOptions(ie(!0,this.options,f)),this.destroy(),b.isDirtyLegend=b.isDirtyBox=!0,J(y,!0)&&b.redraw(),U(this,"afterUpdate")}colorizeItem(f,y){const{group:b,label:D,line:X,symbol:te}=f.legendItem||{};if(b&&b[y?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){var q=this.options;const ce=this.itemHiddenStyle.color;q=y?q.itemStyle.color:ce;const fe=y&&f.color||ce,we=f.options&&f.options.marker;let Z={fill:fe};D&&D.css({fill:q}),X&&X.attr({stroke:fe}),te&&(we&&te.isMarker&&(Z=f.pointAttribs(),y||(Z.stroke=Z.fill=ce)),te.attr(Z))}U(this,"afterColorizeItem",{item:f,visible:y})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(f){const{group:y,x:b=0,y:D=0}=f.legendItem||{};var X=this.options,te=X.symbolPadding;const q=!X.rtl;X=f.checkbox,y&&y.element&&(te={translateX:q?b:this.legendWidth-b-2*te-4,translateY:D},y[S(y.translateY)?"animate":"attr"](te,void 0,()=>{U(this,"afterPositionItem",{item:f})})),X&&(X.x=b,X.y=D)}destroyItem(f){const y=f.checkbox,b=f.legendItem||{};for(const D of["group","label","line","symbol"])b[D]&&(b[D]=b[D].destroy());y&&k(y),f.legendItem=void 0}destroy(){for(const f of this.getAllItems())this.destroyItem(f);for(const f of"clipRect up down pager nav box title group".split(" "))this[f]&&(this[f]=this[f].destroy());this.display=null}positionCheckboxes(){const f=this.group&&this.group.alignAttr,y=this.clipHeight||this.legendHeight,b=this.titleHeight;let D;f&&(D=f.translateY,this.allItems.forEach(function(X){const te=X.checkbox;let q;te&&(q=D+b+te.y+(this.scrollOffset||0)+3,M(te,{left:f.translateX+X.checkboxOffset+te.x-20+"px",top:q+"px",display:this.proximate||q>D-6&&q<D+y-6?"":"none"}))},this))}renderTitle(){var f=this.options;const y=this.padding,b=f.title;let D=0;b.text&&(this.title||(this.title=this.chart.renderer.label(b.text,y-3,y-4,void 0,void 0,void 0,f.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(b.style),this.title.add(this.group)),b.width||this.title.css({width:this.maxLegendWidth+"px"}),f=this.title.getBBox(),D=f.height,this.offsetWidth=f.width,this.contentGroup.attr({translateY:D})),this.titleHeight=D}setText(f){const y=this.options;f.legendItem.label.attr({text:y.labelFormat?W(y.labelFormat,f,this.chart):y.labelFormatter.call(f)})}renderItem(f){const y=f.legendItem=f.legendItem||{};var b=this.chart,D=b.renderer;const X=this.options,te=this.symbolWidth,q=X.symbolPadding||0,ce=this.itemStyle,fe=this.itemHiddenStyle,we=X.layout==="horizontal"?J(X.itemDistance,20):0,Z=!X.rtl,se=!f.series,ue=!se&&f.series.drawLegendSymbol?f.series:f;var ye=ue.options;const Pe=this.createCheckboxForItem&&ye&&ye.showCheckbox,ae=X.useHTML,xe=f.options.className;let ve=y.label;ye=te+q+we+(Pe?20:0),ve||(y.group=D.g("legend-item").addClass("highcharts-"+ue.type+"-series highcharts-color-"+f.colorIndex+(xe?" "+xe:"")+(se?" highcharts-series-"+f.index:"")).attr({zIndex:1}).add(this.scrollGroup),y.label=ve=D.text("",Z?te+q:-q,this.baseline||0,ae),b.styledMode||ve.css(ie(f.visible?ce:fe)),ve.attr({align:Z?"left":"right",zIndex:2}).add(y.group),this.baseline||(this.fontMetrics=D.fontMetrics(ve),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,ve.attr("y",this.baseline),this.symbolHeight=J(X.symbolHeight,this.fontMetrics.f),X.squareSymbol&&(this.symbolWidth=J(X.symbolWidth,Math.max(this.symbolHeight,16)),ye=this.symbolWidth+q+we+(Pe?20:0),Z&&ve.attr("x",this.symbolWidth+q))),ue.drawLegendSymbol(this,f),this.setItemEvents&&this.setItemEvents(f,ve,ae)),Pe&&!f.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(f),this.colorizeItem(f,f.visible),!b.styledMode&&ce.width||ve.css({width:(X.itemWidth||this.widthOption||b.spacingBox.width)-ye+"px"}),this.setText(f),b=ve.getBBox(),D=this.fontMetrics&&this.fontMetrics.h||0,f.itemWidth=f.checkboxOffset=X.itemWidth||y.labelWidth||b.width+ye,this.maxItemWidth=Math.max(this.maxItemWidth,f.itemWidth),this.totalItemWidth+=f.itemWidth,this.itemHeight=f.itemHeight=Math.round(y.labelHeight||(b.height>1.5*D?b.height:D))}layoutItem(f){var y=this.options;const b=this.padding,D=y.layout==="horizontal",X=f.itemHeight,te=this.itemMarginBottom,q=this.itemMarginTop,ce=D?J(y.itemDistance,20):0,fe=this.maxLegendWidth;y=y.alignColumns&&this.totalItemWidth>fe?this.maxItemWidth:f.itemWidth;const we=f.legendItem||{};D&&this.itemX-b+y>fe&&(this.itemX=b,this.lastLineHeight&&(this.itemY+=q+this.lastLineHeight+te),this.lastLineHeight=0),this.lastItemY=q+this.itemY+te,this.lastLineHeight=Math.max(X,this.lastLineHeight),we.x=this.itemX,we.y=this.itemY,D?this.itemX+=y:(this.itemY+=q+X+te,this.lastLineHeight=X),this.offsetWidth=this.widthOption||Math.max((D?this.itemX-b-(f.checkbox?0:ce):y)+b,this.offsetWidth)}getAllItems(){let f=[];return this.chart.series.forEach(function(y){const b=y&&y.options;y&&J(b.showInLegend,S(b.linkedTo)?!1:void 0,!0)&&(f=f.concat((y.legendItem||{}).labels||(b.legendType==="point"?y.data:y)))}),U(this,"afterGetAllItems",{allItems:f}),f}getAlignment(){const f=this.options;return this.proximate?f.align.charAt(0)+"tv":f.floating?"":f.align.charAt(0)+f.verticalAlign.charAt(0)+f.layout.charAt(0)}adjustMargins(f,y){const b=this.chart,D=this.options,X=this.getAlignment();X&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(te,q){te.test(X)&&!S(f[q])&&(b[K[q]]=Math.max(b[K[q]],b.legend[(q+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][q]*D[q%2?"x":"y"]+J(D.margin,12)+y[q]+(b.titleOffset[q]||0)))})}proximatePositions(){const f=this.chart,y=[],b=this.options.align==="left";this.allItems.forEach(function(X){var te,q=b;let ce;X.yAxis&&(X.xAxis.options.reversed&&(q=!q),X.points&&(te=G(q?X.points:X.points.slice(0).reverse(),function(fe){return C(fe.plotY)})),q=this.itemMarginTop+X.legendItem.label.getBBox().height+this.itemMarginBottom,ce=X.yAxis.top-f.plotTop,X.visible?(te=te?te.plotY:X.yAxis.height,te+=ce-.3*q):te=ce+X.yAxis.height,y.push({target:te,size:q,item:X}))},this);let D;for(const X of I(y,f.plotHeight))D=X.item.legendItem||{},C(X.pos)&&(D.y=f.plotTop-f.spacing[0]+X.pos)}render(){const f=this.chart,y=f.renderer,b=this.options,D=this.padding;var X=this.getAllItems();let te,q=this.group,ce=this.box;this.itemX=D,this.itemY=this.initialItemY,this.lastItemY=this.offsetWidth=0,this.widthOption=N(b.width,f.spacingBox.width-D);var fe=f.spacingBox.width-2*D-b.x;-1<["rm","lm"].indexOf(this.getAlignment().substring(0,2))&&(fe/=2),this.maxLegendWidth=this.widthOption||fe,q||(this.group=q=y.g("legend").addClass(b.className||"").attr({zIndex:7}).add(),this.contentGroup=y.g().attr({zIndex:1}).add(q),this.scrollGroup=y.g().add(this.contentGroup)),this.renderTitle(),F(X,(we,Z)=>(we.options&&we.options.legendIndex||0)-(Z.options&&Z.options.legendIndex||0)),b.reversed&&X.reverse(),this.allItems=X,this.display=fe=!!X.length,this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0,X.forEach(this.renderItem,this),X.forEach(this.layoutItem,this),X=(this.widthOption||this.offsetWidth)+D,te=this.lastItemY+this.lastLineHeight+this.titleHeight,te=this.handleOverflow(te),te+=D,ce||(this.box=ce=y.rect().addClass("highcharts-legend-box").attr({r:b.borderRadius}).add(q)),f.styledMode||ce.attr({stroke:b.borderColor,"stroke-width":b.borderWidth||0,fill:b.backgroundColor||"none"}).shadow(b.shadow),0<X&&0<te&&ce[ce.placed?"animate":"attr"](ce.crisp.call({},{x:0,y:0,width:X,height:te},ce.strokeWidth())),q[fe?"show":"hide"](),f.styledMode&&q.getStyle("display")==="none"&&(X=te=0),this.legendWidth=X,this.legendHeight=te,fe&&this.align(),this.proximate||this.positionItems(),U(this,"afterRender")}align(f=this.chart.spacingBox){const y=this.chart,b=this.options;let D=f.y;/(lth|ct|rth)/.test(this.getAlignment())&&0<y.titleOffset[0]?D+=y.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&0<y.titleOffset[2]&&(D-=y.titleOffset[2]),D!==f.y&&(f=ie(f,{y:D})),y.hasRendered||(this.group.placed=!1),this.group.align(ie(b,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":b.verticalAlign}),!0,f)}handleOverflow(f){const y=this,b=this.chart,D=b.renderer,X=this.options;var te=X.y;const q=X.verticalAlign==="top",ce=this.padding,fe=X.maxHeight,we=X.navigation,Z=J(we.animation,!0),se=we.arrowSize||12,ue=this.pages,ye=this.allItems,Pe=function(Le){typeof Le=="number"?be.attr({height:Le}):be&&(y.clipRect=be.destroy(),y.contentGroup.clip()),y.contentGroup.div&&(y.contentGroup.div.style.clip=Le?"rect("+ce+"px,9999px,"+(ce+Le)+"px,0)":"auto")},ae=function(Le){return y[Le]=D.circle(0,0,1.3*se).translate(se/2,se/2).add(me),b.styledMode||y[Le].attr("fill","rgba(0,0,0,0.0001)"),y[Le]};let xe,ve,le;te=b.spacingBox.height+(q?-te:te)-ce;let me=this.nav,be=this.clipRect;return X.layout!=="horizontal"||X.verticalAlign==="middle"||X.floating||(te/=2),fe&&(te=Math.min(te,fe)),ue.length=0,f&&0<te&&f>te&&we.enabled!==!1?(this.clipHeight=xe=Math.max(te-20-this.titleHeight-ce,0),this.currentPage=J(this.currentPage,1),this.fullHeight=f,ye.forEach((Le,De)=>{le=Le.legendItem||{},Le=le.y||0;const Ne=Math.round(le.label.getBBox().height);let st=ue.length;(!st||Le-ue[st-1]>xe&&(ve||Le)!==ue[st-1])&&(ue.push(ve||Le),st++),le.pageIx=st-1,ve&&((ye[De-1].legendItem||{}).pageIx=st-1),De===ye.length-1&&Le+Ne-ue[st-1]>xe&&Le>ue[st-1]&&(ue.push(Le),le.pageIx=st),Le!==ve&&(ve=Le)}),be||(be=y.clipRect=D.clipRect(0,ce-2,9999,0),y.contentGroup.clip(be)),Pe(xe),me||(this.nav=me=D.g().attr({zIndex:1}).add(this.group),this.up=D.symbol("triangle",0,0,se,se).add(me),ae("upTracker").on("click",function(){y.scroll(-1,Z)}),this.pager=D.text("",15,10).addClass("highcharts-legend-navigation"),!b.styledMode&&we.style&&this.pager.css(we.style),this.pager.add(me),this.down=D.symbol("triangle-down",0,0,se,se).add(me),ae("downTracker").on("click",function(){y.scroll(1,Z)})),y.scroll(0),f=te):me&&(Pe(),this.nav=me.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),f}scroll(f,y){const b=this.chart,D=this.pages,X=D.length,te=this.clipHeight,q=this.options.navigation,ce=this.pager,fe=this.padding;let we=this.currentPage+f;we>X&&(we=X),0<we&&(typeof y<"u"&&z(y,b),this.nav.attr({translateX:fe,translateY:te+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(Z){Z.attr({class:we===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),ce.attr({text:we+"/"+X}),[this.down,this.downTracker].forEach(function(Z){Z.attr({x:18+this.pager.getBBox().width,class:we===X?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),b.styledMode||(this.up.attr({fill:we===1?q.inactiveColor:q.activeColor}),this.upTracker.css({cursor:we===1?"default":"pointer"}),this.down.attr({fill:we===X?q.inactiveColor:q.activeColor}),this.downTracker.css({cursor:we===X?"default":"pointer"})),this.scrollOffset=-D[we-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=we,this.positionCheckboxes(),f=Q(J(y,b.renderer.globalAnimation,!0)),H(()=>{U(this,"afterScroll",{currentPage:we})},f.duration))}setItemEvents(f,y,b){const D=this,X=f.legendItem||{},te=D.chart.renderer.boxWrapper,q=f instanceof n,ce="highcharts-legend-"+(q?"point":"series")+"-active",fe=D.chart.styledMode;b=b?[y,X.symbol]:[X.group];const we=Z=>{D.allItems.forEach(se=>{f!==se&&[se].concat(se.linkedSeries||[]).forEach(ue=>{ue.setState(Z,!q)})})};for(const Z of b)Z&&Z.on("mouseover",function(){f.visible&&we("inactive"),f.setState("hover"),f.visible&&te.addClass(ce),fe||y.css(D.options.itemHoverStyle)}).on("mouseout",function(){D.chart.styledMode||y.css(ie(f.visible?D.itemStyle:D.itemHiddenStyle)),we(""),te.removeClass(ce),f.setState()}).on("click",function(se){const ue=function(){f.setVisible&&f.setVisible(),we(f.visible?"inactive":"")};te.removeClass(ce),se={browserEvent:se},f.firePointEvent?f.firePointEvent("legendItemClick",se,ue):U(f,"legendItemClick",se,ue)})}createCheckboxForItem(f){f.checkbox=$("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:f.selected,defaultChecked:f.selected},this.options.itemCheckboxStyle,this.chart.container),O(f.checkbox,"click",function(y){U(f.series||f,"checkboxClick",{checked:y.target.checked,item:f},function(){f.select()})})}}return function(L){const f=[];L.compose=function(y){V.pushUnique(f,y)&&O(y,"beforeMargins",function(){this.legend=new L(this,this.options.legend)})}}(E||(E={})),E}),r(l,"Core/Series/SeriesRegistry.js",[l["Core/Globals.js"],l["Core/Defaults.js"],l["Core/Series/Point.js"],l["Core/Utilities.js"]],function(c,d,m,n){const{defaultOptions:T}=d,{extendClass:V,merge:Q}=n;var z;return function(W){function K(I,O){const $=T.plotOptions||{},M=O.defaultOptions,S=O.prototype;S.type=I,S.pointClass||(S.pointClass=m),M&&($[I]=M),W.seriesTypes[I]=O}W.seriesTypes=c.seriesTypes,W.registerSeriesType=K,W.seriesType=function(I,O,$,M,S){const k=T.plotOptions||{};return O=O||"",k[I]=Q(k[O],$),K(I,V(W.seriesTypes[O]||function(){},M)),W.seriesTypes[I].prototype.type=I,S&&(W.seriesTypes[I].prototype.pointClass=V(m,S)),W.seriesTypes[I]}}(z||(z={})),z}),r(l,"Core/Chart/Chart.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/Axis/Axis.js"],l["Core/Defaults.js"],l["Core/FormatUtilities.js"],l["Core/Foundation.js"],l["Core/Globals.js"],l["Core/Renderer/RendererRegistry.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Renderer/SVG/SVGRenderer.js"],l["Core/Time.js"],l["Core/Utilities.js"],l["Core/Renderer/HTML/AST.js"]],function(c,d,m,n,T,V,Q,z,W,K,I,O){const{animate:$,animObject:M,setAnimation:S}=c,{defaultOptions:k,defaultTime:G}=m,{numberFormat:U}=n,{registerEventOptions:C}=T,{charts:ie,doc:J,marginNames:N,svg:F,win:H}=V,{seriesTypes:E}=z,{addEvent:L,attr:f,cleanRecursively:y,createElement:b,css:D,defined:X,discardElement:te,erase:q,error:ce,extend:fe,find:we,fireEvent:Z,getStyle:se,isArray:ue,isNumber:ye,isObject:Pe,isString:ae,merge:xe,objectEach:ve,pick:le,pInt:me,relativeLength:be,removeEvent:Le,splat:De,syncTimeout:Ne,uniqueKey:st}=I;class it{static chart(ke,Be,Ue){return new it(ke,Be,Ue)}constructor(ke,Be,Ue){this.series=this.renderTo=this.renderer=this.pointer=this.pointCount=this.plotWidth=this.plotTop=this.plotLeft=this.plotHeight=this.plotBox=this.options=this.numberFormatter=this.margin=this.labelCollectors=this.isResizing=this.index=this.eventOptions=this.container=this.colorCounter=this.clipBox=this.chartWidth=this.chartHeight=this.bounds=this.axisOffset=this.axes=void 0,this.sharedClips={},this.yAxis=this.xAxis=this.userOptions=this.titleOffset=this.time=this.symbolCounter=this.spacingBox=this.spacing=void 0,this.getArgs(ke,Be,Ue)}getArgs(ke,Be,Ue){ae(ke)||ke.nodeName?(this.renderTo=ke,this.init(Be,Ue)):this.init(ke,Be)}init(ke,Be){const Ue=ke.plotOptions||{};Z(this,"init",{args:arguments},function(){const We=xe(k,ke),nt=We.chart;ve(We.plotOptions,function(Ut,Vt){Pe(Ut)&&(Ut.tooltip=Ue[Vt]&&xe(Ue[Vt].tooltip)||void 0)}),We.tooltip.userOptions=ke.chart&&ke.chart.forExport&&ke.tooltip.userOptions||ke.tooltip,this.userOptions=ke,this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.labelCollectors=[],this.callback=Be,this.isResizing=0;const wt=nt.zooming=nt.zooming||{};ke.chart&&!ke.chart.zooming&&(wt.resetButton=nt.resetZoomButton),wt.key=le(wt.key,nt.zoomKey),wt.pinchType=le(wt.pinchType,nt.pinchType),wt.singleTouch=le(wt.singleTouch,nt.zoomBySingleTouch),wt.type=le(wt.type,nt.zoomType),this.options=We,this.axes=[],this.series=[],this.time=ke.time&&Object.keys(ke.time).length?new K(ke.time):V.time,this.numberFormatter=nt.numberFormatter||U,this.styledMode=nt.styledMode,this.hasCartesianSeries=nt.showAxes,this.index=ie.length,ie.push(this),V.chartCount++,C(this,nt),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,Z(this,"afterInit"),this.firstRender()})}initSeries(ke){var Be=this.options.chart;Be=ke.type||Be.type;const Ue=E[Be];return Ue||ce(17,!0,this,{missingModuleFor:Be}),Be=new Ue,typeof Be.init=="function"&&Be.init(this,ke),Be}setSeriesData(){this.getSeriesOrderByLinks().forEach(function(ke){ke.points||ke.data||!ke.enabledDataSorting||ke.setData(ke.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(ke,Be){return ke.linkedSeries.length||Be.linkedSeries.length?Be.linkedSeries.length-ke.linkedSeries.length:0})}orderSeries(ke){const Be=this.series;for(let Ue=ke||0,We=Be.length;Ue<We;++Ue)Be[Ue]&&(Be[Ue].index=Ue,Be[Ue].name=Be[Ue].getName())}isInsidePlot(ke,Be,Ue={}){const{inverted:We,plotBox:nt,plotLeft:wt,plotTop:Ut,scrollablePlotBox:Vt}=this;var yi=0;let ri=0;Ue.visiblePlotOnly&&this.scrollingContainer&&({scrollLeft:yi,scrollTop:ri}=this.scrollingContainer);const Mi=Ue.series,$i=Ue.visiblePlotOnly&&Vt||nt;var zi=Ue.inverted?Be:ke;if(Be=Ue.inverted?ke:Be,ke={x:zi,y:Be,isInsidePlot:!0,options:Ue},!Ue.ignoreX){const qi=Mi&&(We&&!this.polar?Mi.yAxis:Mi.xAxis)||{pos:wt,len:1/0};zi=Ue.paneCoordinates?qi.pos+zi:wt+zi,zi>=Math.max(yi+wt,qi.pos)&&zi<=Math.min(yi+wt+$i.width,qi.pos+qi.len)||(ke.isInsidePlot=!1)}return!Ue.ignoreY&&ke.isInsidePlot&&(yi=!We&&Ue.axis&&!Ue.axis.isXAxis&&Ue.axis||Mi&&(We?Mi.xAxis:Mi.yAxis)||{pos:Ut,len:1/0},Ue=Ue.paneCoordinates?yi.pos+Be:Ut+Be,Ue>=Math.max(ri+Ut,yi.pos)&&Ue<=Math.min(ri+Ut+$i.height,yi.pos+yi.len)||(ke.isInsidePlot=!1)),Z(this,"afterIsInsidePlot",ke),ke.isInsidePlot}redraw(ke){Z(this,"beforeRedraw");const Be=this.hasCartesianSeries?this.axes:this.colorAxis||[],Ue=this.series,We=this.pointer,nt=this.legend,wt=this.userOptions.legend,Ut=this.renderer,Vt=Ut.isHidden(),yi=[];let ri,Mi,$i=this.isDirtyBox,zi=this.isDirtyLegend,qi;for(Ut.rootFontSize=Ut.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),S(this.hasRendered?ke:!1,this),Vt&&this.temporaryDisplay(),this.layOutTitles(),ke=Ue.length;ke--;)if(qi=Ue[ke],(qi.options.stacking||qi.options.centerInCategory)&&(Mi=!0,qi.isDirty)){ri=!0;break}if(ri)for(ke=Ue.length;ke--;)qi=Ue[ke],qi.options.stacking&&(qi.isDirty=!0);Ue.forEach(function(Oi){Oi.isDirty&&(Oi.options.legendType==="point"?(typeof Oi.updateTotals=="function"&&Oi.updateTotals(),zi=!0):wt&&(wt.labelFormatter||wt.labelFormat)&&(zi=!0)),Oi.isDirtyData&&Z(Oi,"updatedData")}),zi&&nt&&nt.options.enabled&&(nt.render(),this.isDirtyLegend=!1),Mi&&this.getStacks(),Be.forEach(function(Oi){Oi.updateNames(),Oi.setScale()}),this.getMargins(),Be.forEach(function(Oi){Oi.isDirty&&($i=!0)}),Be.forEach(function(Oi){const _n=Oi.min+","+Oi.max;Oi.extKey!==_n&&(Oi.extKey=_n,yi.push(function(){Z(Oi,"afterSetExtremes",fe(Oi.eventArgs,Oi.getExtremes())),delete Oi.eventArgs})),($i||Mi)&&Oi.redraw()}),$i&&this.drawChartBox(),Z(this,"predraw"),Ue.forEach(function(Oi){($i||Oi.isDirty)&&Oi.visible&&Oi.redraw(),Oi.isDirtyData=!1}),We&&We.reset(!0),Ut.draw(),Z(this,"redraw"),Z(this,"render"),Vt&&this.temporaryDisplay(!0),yi.forEach(function(Oi){Oi.call()})}get(ke){function Be(nt){return nt.id===ke||nt.options&&nt.options.id===ke}const Ue=this.series;let We=we(this.axes,Be)||we(this.series,Be);for(let nt=0;!We&&nt<Ue.length;nt++)We=we(Ue[nt].points||[],Be);return We}getAxes(){const ke=this;var Be=this.options;const Ue=Be.xAxis=De(Be.xAxis||{});Be=Be.yAxis=De(Be.yAxis||{}),Z(this,"getAxes"),Ue.forEach(function(We,nt){We.index=nt,We.isX=!0}),Be.forEach(function(We,nt){We.index=nt}),Ue.concat(Be).forEach(function(We){new d(ke,We)}),Z(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce((ke,Be)=>(Be.getPointsCollection().forEach(Ue=>{le(Ue.selectedStaging,Ue.selected)&&ke.push(Ue)}),ke),[])}getSelectedSeries(){return this.series.filter(function(ke){return ke.selected})}setTitle(ke,Be,Ue){this.applyDescription("title",ke),this.applyDescription("subtitle",Be),this.applyDescription("caption",void 0),this.layOutTitles(Ue)}applyDescription(ke,Be){const Ue=this;var We=ke==="title"?{color:"#333333",fontSize:this.options.isStock?"1em":"1.2em",fontWeight:"bold"}:{color:"#666666",fontSize:"0.8em"};We=this.options[ke]=xe(!this.styledMode&&{style:We},this.options[ke],Be);let nt=this[ke];nt&&Be&&(this[ke]=nt=nt.destroy()),We&&!nt&&(nt=this.renderer.text(We.text,0,0,We.useHTML).attr({align:We.align,class:"highcharts-"+ke,zIndex:We.zIndex||4}).add(),nt.update=function(wt){Ue[{title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"}[ke]](wt)},this.styledMode||nt.css(We.style),this[ke]=nt)}layOutTitles(ke){const Be=[0,0,0],Ue=this.renderer,We=this.spacingBox;["title","subtitle","caption"].forEach(function(wt){const Ut=this[wt],Vt=this.options[wt],yi=Vt.verticalAlign||"top";if(wt=wt==="title"?yi==="top"?-3:0:yi==="top"?Be[0]+2:0,Ut){Ut.css({width:(Vt.width||We.width+(Vt.widthAdjust||0))+"px"});const ri=Ue.fontMetrics(Ut).b,Mi=Math.round(Ut.getBBox(Vt.useHTML).height);Ut.align(fe({y:yi==="bottom"?ri:wt+ri,height:Mi},Vt),!1,"spacingBox"),Vt.floating||(yi==="top"?Be[0]=Math.ceil(Be[0]+Mi):yi==="bottom"&&(Be[2]=Math.ceil(Be[2]+Mi)))}},this),Be[0]&&(this.options.title.verticalAlign||"top")==="top"&&(Be[0]+=this.options.title.margin),Be[2]&&this.options.caption.verticalAlign==="bottom"&&(Be[2]+=this.options.caption.margin);const nt=!this.titleOffset||this.titleOffset.join(",")!==Be.join(",");this.titleOffset=Be,Z(this,"afterLayOutTitles"),!this.isDirtyBox&&nt&&(this.isDirtyBox=this.isDirtyLegend=nt,this.hasRendered&&le(ke,!0)&&this.isDirtyBox&&this.redraw())}getContainerBox(){return{width:se(this.renderTo,"width",!0)||0,height:se(this.renderTo,"height",!0)||0}}getChartSize(){var ke=this.options.chart;const Be=ke.width;ke=ke.height;const Ue=this.getContainerBox();this.chartWidth=Math.max(0,Be||Ue.width||600),this.chartHeight=Math.max(0,be(ke,this.chartWidth)||(1<Ue.height?Ue.height:400)),this.containerBox=Ue}temporaryDisplay(ke){let Be=this.renderTo;if(ke)for(;Be&&Be.style;)Be.hcOrigStyle&&(D(Be,Be.hcOrigStyle),delete Be.hcOrigStyle),Be.hcOrigDetached&&(J.body.removeChild(Be),Be.hcOrigDetached=!1),Be=Be.parentNode;else for(;Be&&Be.style&&(J.body.contains(Be)||Be.parentNode||(Be.hcOrigDetached=!0,J.body.appendChild(Be)),(se(Be,"display",!1)==="none"||Be.hcOricDetached)&&(Be.hcOrigStyle={display:Be.style.display,height:Be.style.height,overflow:Be.style.overflow},ke={display:"block",overflow:"hidden"},Be!==this.renderTo&&(ke.height=0),D(Be,ke),Be.offsetWidth||Be.style.setProperty("display","block","important")),Be=Be.parentNode,Be!==J.body););}setClassName(ke){this.container.className="highcharts-container "+(ke||"")}getContainer(){const ke=this.options,Be=ke.chart;var Ue=st();let We,nt=this.renderTo;nt||(this.renderTo=nt=Be.renderTo),ae(nt)&&(this.renderTo=nt=J.getElementById(nt)),nt||ce(13,!0,this);var wt=me(f(nt,"data-highcharts-chart"));ye(wt)&&ie[wt]&&ie[wt].hasRendered&&ie[wt].destroy(),f(nt,"data-highcharts-chart",this.index),nt.innerHTML=O.emptyHTML,Be.skipClone||nt.offsetWidth||this.temporaryDisplay(),this.getChartSize(),wt=this.chartWidth;const Ut=this.chartHeight;if(D(nt,{overflow:"hidden"}),this.styledMode||(We=fe({position:"relative",overflow:"hidden",width:wt+"px",height:Ut+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none"},Be.style||{})),this.container=Ue=b("div",{id:Ue},We,nt),this._cursor=Ue.style.cursor,this.renderer=new(Be.renderer||!F?Q.getRendererType(Be.renderer):W)(Ue,wt,Ut,void 0,Be.forExport,ke.exporting&&ke.exporting.allowHTML,this.styledMode),this.containerBox=this.getContainerBox(),S(void 0,this),this.setClassName(Be.className),this.styledMode)for(const Vt in ke.defs)this.renderer.definition(ke.defs[Vt]);else this.renderer.setStyle(Be.style);this.renderer.chartIndex=this.index,Z(this,"afterGetContainer")}getMargins(ke){const{spacing:Be,margin:Ue,titleOffset:We}=this;this.resetMargins(),We[0]&&!X(Ue[0])&&(this.plotTop=Math.max(this.plotTop,We[0]+Be[0])),We[2]&&!X(Ue[2])&&(this.marginBottom=Math.max(this.marginBottom,We[2]+Be[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(Ue,Be),Z(this,"getMargins"),ke||this.getAxisMargins()}getAxisMargins(){const ke=this,Be=ke.axisOffset=[0,0,0,0],Ue=ke.colorAxis,We=ke.margin,nt=function(wt){wt.forEach(function(Ut){Ut.visible&&Ut.getOffset()})};ke.hasCartesianSeries?nt(ke.axes):Ue&&Ue.length&&nt(Ue),N.forEach(function(wt,Ut){X(We[Ut])||(ke[wt]+=Be[Ut])}),ke.setChartSize()}reflow(ke){const Be=this;var Ue=Be.options.chart;Ue=X(Ue.width)&&X(Ue.height);const We=Be.containerBox,nt=Be.getContainerBox();delete Be.pointer.chartPosition,!Ue&&!Be.isPrinting&&We&&nt.width&&((nt.width!==We.width||nt.height!==We.height)&&(I.clearTimeout(Be.reflowTimeout),Be.reflowTimeout=Ne(function(){Be.container&&Be.setSize(void 0,void 0,!1)},ke?100:0)),Be.containerBox=nt)}setReflow(){const ke=this;var Be=Ue=>{var We;!((We=ke.options)===null||We===void 0)&&We.chart.reflow&&ke.hasLoaded&&ke.reflow(Ue)};typeof ResizeObserver=="function"?new ResizeObserver(Be).observe(ke.renderTo):(Be=L(H,"resize",Be),L(this,"destroy",Be))}setSize(ke,Be,Ue){const We=this,nt=We.renderer;We.isResizing+=1,S(Ue,We),Ue=nt.globalAnimation,We.oldChartHeight=We.chartHeight,We.oldChartWidth=We.chartWidth,typeof ke<"u"&&(We.options.chart.width=ke),typeof Be<"u"&&(We.options.chart.height=Be),We.getChartSize(),We.styledMode||(Ue?$:D)(We.container,{width:We.chartWidth+"px",height:We.chartHeight+"px"},Ue),We.setChartSize(!0),nt.setSize(We.chartWidth,We.chartHeight,Ue),We.axes.forEach(function(wt){wt.isDirty=!0,wt.setScale()}),We.isDirtyLegend=!0,We.isDirtyBox=!0,We.layOutTitles(),We.getMargins(),We.redraw(Ue),We.oldChartHeight=null,Z(We,"resize"),Ne(function(){We&&Z(We,"endResize",null,function(){--We.isResizing})},M(Ue).duration)}setChartSize(ke){var Be=this.inverted;const Ue=this.renderer;var We=this.chartWidth,nt=this.chartHeight;const wt=this.options.chart,Ut=this.spacing,Vt=this.clipOffset;let yi,ri,Mi,$i;this.plotLeft=yi=Math.round(this.plotLeft),this.plotTop=ri=Math.round(this.plotTop),this.plotWidth=Mi=Math.max(0,Math.round(We-yi-this.marginRight)),this.plotHeight=$i=Math.max(0,Math.round(nt-ri-this.marginBottom)),this.plotSizeX=Be?$i:Mi,this.plotSizeY=Be?Mi:$i,this.plotBorderWidth=wt.plotBorderWidth||0,this.spacingBox=Ue.spacingBox={x:Ut[3],y:Ut[0],width:We-Ut[3]-Ut[1],height:nt-Ut[0]-Ut[2]},this.plotBox=Ue.plotBox={x:yi,y:ri,width:Mi,height:$i},Be=2*Math.floor(this.plotBorderWidth/2),We=Math.ceil(Math.max(Be,Vt[3])/2),nt=Math.ceil(Math.max(Be,Vt[0])/2),this.clipBox={x:We,y:nt,width:Math.floor(this.plotSizeX-Math.max(Be,Vt[1])/2-We),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(Be,Vt[2])/2-nt))},ke||(this.axes.forEach(function(zi){zi.setAxisSize(),zi.setAxisTranslation()}),Ue.alignElements()),Z(this,"afterSetChartSize",{skipAxes:ke})}resetMargins(){Z(this,"resetMargins");const ke=this,Be=ke.options.chart;["margin","spacing"].forEach(function(Ue){const We=Be[Ue],nt=Pe(We)?We:[We,We,We,We];["Top","Right","Bottom","Left"].forEach(function(wt,Ut){ke[Ue][Ut]=le(Be[Ue+wt],nt[Ut])})}),N.forEach(function(Ue,We){ke[Ue]=le(ke.margin[We],ke.spacing[We])}),ke.axisOffset=[0,0,0,0],ke.clipOffset=[0,0,0,0]}drawChartBox(){const ke=this.options.chart,Be=this.renderer,Ue=this.chartWidth,We=this.chartHeight,nt=this.styledMode,wt=this.plotBGImage;var Ut=ke.backgroundColor;const Vt=ke.plotBackgroundColor,yi=ke.plotBackgroundImage,ri=this.plotLeft,Mi=this.plotTop,$i=this.plotWidth,zi=this.plotHeight,qi=this.plotBox,Oi=this.clipRect,_n=this.clipBox;let wn=this.chartBackground,Yn=this.plotBackground,Ts=this.plotBorder,ur,Dr,Ir="animate";wn||(this.chartBackground=wn=Be.rect().addClass("highcharts-background").add(),Ir="attr"),nt?ur=Dr=wn.strokeWidth():(ur=ke.borderWidth||0,Dr=ur+(ke.shadow?8:0),Ut={fill:Ut||"none"},(ur||wn["stroke-width"])&&(Ut.stroke=ke.borderColor,Ut["stroke-width"]=ur),wn.attr(Ut).shadow(ke.shadow)),wn[Ir]({x:Dr/2,y:Dr/2,width:Ue-Dr-ur%2,height:We-Dr-ur%2,r:ke.borderRadius}),Ir="animate",Yn||(Ir="attr",this.plotBackground=Yn=Be.rect().addClass("highcharts-plot-background").add()),Yn[Ir](qi),nt||(Yn.attr({fill:Vt||"none"}).shadow(ke.plotShadow),yi&&(wt?(yi!==wt.attr("href")&&wt.attr("href",yi),wt.animate(qi)):this.plotBGImage=Be.image(yi,ri,Mi,$i,zi).add())),Oi?Oi.animate({width:_n.width,height:_n.height}):this.clipRect=Be.clipRect(_n),Ir="animate",Ts||(Ir="attr",this.plotBorder=Ts=Be.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),nt||Ts.attr({stroke:ke.plotBorderColor,"stroke-width":ke.plotBorderWidth||0,fill:"none"}),Ts[Ir](Ts.crisp({x:ri,y:Mi,width:$i,height:zi},-Ts.strokeWidth())),this.isDirtyBox=!1,Z(this,"afterDrawChartBox")}propFromSeries(){const ke=this,Be=ke.options.chart,Ue=ke.options.series;let We,nt,wt;["inverted","angular","polar"].forEach(function(Ut){for(nt=E[Be.type],wt=Be[Ut]||nt&&nt.prototype[Ut],We=Ue&&Ue.length;!wt&&We--;)(nt=E[Ue[We].type])&&nt.prototype[Ut]&&(wt=!0);ke[Ut]=wt})}linkSeries(ke){const Be=this,Ue=Be.series;Ue.forEach(function(We){We.linkedSeries.length=0}),Ue.forEach(function(We){let nt=We.options.linkedTo;ae(nt)&&(nt=nt===":previous"?Be.series[We.index-1]:Be.get(nt))&&nt.linkedParent!==We&&(nt.linkedSeries.push(We),We.linkedParent=nt,nt.enabledDataSorting&&We.setDataSortingOptions(),We.visible=le(We.options.visible,nt.options.visible,We.visible))}),Z(this,"afterLinkSeries",{isUpdating:ke})}renderSeries(){this.series.forEach(function(ke){ke.translate(),ke.render()})}render(){const ke=this.axes,Be=this.colorAxis,Ue=this.renderer,We=function(ri){ri.forEach(function(Mi){Mi.visible&&Mi.render()})};let nt=0;this.setTitle(),Z(this,"beforeMargins"),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize();const wt=this.plotWidth;ke.some(function(ri){if(ri.horiz&&ri.visible&&ri.options.labels.enabled&&ri.series.length)return nt=21,!0});const Ut=this.plotHeight=Math.max(this.plotHeight-nt,0);ke.forEach(function(ri){ri.setScale()}),this.getAxisMargins();const Vt=1.1<wt/this.plotWidth,yi=1.05<Ut/this.plotHeight;(Vt||yi)&&(ke.forEach(function(ri){(ri.horiz&&Vt||!ri.horiz&&yi)&&ri.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries?We(ke):Be&&Be.length&&We(Be),this.seriesGroup||(this.seriesGroup=Ue.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(ke){const Be=this,Ue=xe(!0,this.options.credits,ke);Ue.enabled&&!this.credits&&(this.credits=this.renderer.text(Ue.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){Ue.href&&(H.location.href=Ue.href)}).attr({align:Ue.position.align,zIndex:8}),Be.styledMode||this.credits.css(Ue.style),this.credits.add().align(Ue.position),this.credits.update=function(We){Be.credits=Be.credits.destroy(),Be.addCredits(We)})}destroy(){const ke=this,Be=ke.axes,Ue=ke.series,We=ke.container,nt=We&&We.parentNode;let wt;for(Z(ke,"destroy"),ke.renderer.forExport?q(ie,ke):ie[ke.index]=void 0,V.chartCount--,ke.renderTo.removeAttribute("data-highcharts-chart"),Le(ke),wt=Be.length;wt--;)Be[wt]=Be[wt].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),wt=Ue.length;wt--;)Ue[wt]=Ue[wt].destroy();"title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" ").forEach(function(Ut){const Vt=ke[Ut];Vt&&Vt.destroy&&(ke[Ut]=Vt.destroy())}),We&&(We.innerHTML=O.emptyHTML,Le(We),nt&&te(We)),ve(ke,function(Ut,Vt){delete ke[Vt]})}firstRender(){const ke=this,Be=ke.options;ke.getContainer(),ke.resetMargins(),ke.setChartSize(),ke.propFromSeries(),ke.getAxes(),(ue(Be.series)?Be.series:[]).forEach(function(Ue){ke.initSeries(Ue)}),ke.linkSeries(),ke.setSeriesData(),Z(ke,"beforeRender"),ke.render(),ke.pointer.getChartPosition(),!ke.renderer.imgCount&&!ke.hasLoaded&&ke.onload(),ke.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(ke){ke&&typeof this.index<"u"&&ke.apply(this,[this])},this),Z(this,"load"),Z(this,"render"),X(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){const{options:ke,title:Be}=this;ke&&!this.accessibility&&(this.renderer.boxWrapper.attr({role:"img","aria-label":(Be&&Be.element.textContent||"").replace(/</g,"&lt;")}),ke.accessibility&&ke.accessibility.enabled===!1||ce('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(ke,Be,Ue){const We=this;let nt;return ke&&(Be=le(Be,!0),Z(We,"addSeries",{options:ke},function(){nt=We.initSeries(ke),We.isDirtyLegend=!0,We.linkSeries(),nt.enabledDataSorting&&nt.setData(ke.data,!1),Z(We,"afterAddSeries",{series:nt}),Be&&We.redraw(Ue)})),nt}addAxis(ke,Be,Ue,We){return this.createAxis(Be?"xAxis":"yAxis",{axis:ke,redraw:Ue,animation:We})}addColorAxis(ke,Be,Ue){return this.createAxis("colorAxis",{axis:ke,redraw:Be,animation:Ue})}createAxis(ke,Be){return ke=new d(this,xe(Be.axis,{index:this[ke].length,isX:ke==="xAxis"})),le(Be.redraw,!0)&&this.redraw(Be.animation),ke}showLoading(ke){const Be=this,Ue=Be.options,We=Ue.loading,nt=function(){wt&&D(wt,{left:Be.plotLeft+"px",top:Be.plotTop+"px",width:Be.plotWidth+"px",height:Be.plotHeight+"px"})};let wt=Be.loadingDiv,Ut=Be.loadingSpan;wt||(Be.loadingDiv=wt=b("div",{className:"highcharts-loading highcharts-loading-hidden"},null,Be.container)),Ut||(Be.loadingSpan=Ut=b("span",{className:"highcharts-loading-inner"},null,wt),L(Be,"redraw",nt)),wt.className="highcharts-loading",O.setElementHTML(Ut,le(ke,Ue.lang.loading,"")),Be.styledMode||(D(wt,fe(We.style,{zIndex:10})),D(Ut,We.labelStyle),Be.loadingShown||(D(wt,{opacity:0,display:""}),$(wt,{opacity:We.style.opacity||.5},{duration:We.showDuration||0}))),Be.loadingShown=!0,nt()}hideLoading(){const ke=this.options,Be=this.loadingDiv;Be&&(Be.className="highcharts-loading highcharts-loading-hidden",this.styledMode||$(Be,{opacity:0},{duration:ke.loading.hideDuration||100,complete:function(){D(Be,{display:"none"})}})),this.loadingShown=!1}update(ke,Be,Ue,We){const nt=this,wt={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},Ut=ke.isResponsiveOptions,Vt=[];let yi,ri;Z(nt,"update",{options:ke}),Ut||nt.setResponsive(!1,!0),ke=y(ke,nt.options),nt.userOptions=xe(nt.userOptions,ke);var Mi=ke.chart;if(Mi){if(xe(!0,nt.options.chart,Mi),"className"in Mi&&nt.setClassName(Mi.className),"inverted"in Mi||"polar"in Mi||"type"in Mi){nt.propFromSeries();var $i=!0}"alignTicks"in Mi&&($i=!0),"events"in Mi&&C(this,Mi),ve(Mi,function(zi,qi){nt.propsRequireUpdateSeries.indexOf("chart."+qi)!==-1&&(yi=!0),nt.propsRequireDirtyBox.indexOf(qi)!==-1&&(nt.isDirtyBox=!0),nt.propsRequireReflow.indexOf(qi)!==-1&&(Ut?nt.isDirtyBox=!0:ri=!0)}),!nt.styledMode&&Mi.style&&nt.renderer.setStyle(nt.options.chart.style||{})}!nt.styledMode&&ke.colors&&(this.options.colors=ke.colors),ke.time&&(this.time===G&&(this.time=new K(ke.time)),xe(!0,nt.options.time,ke.time)),ve(ke,function(zi,qi){nt[qi]&&typeof nt[qi].update=="function"?nt[qi].update(zi,!1):typeof nt[wt[qi]]=="function"?nt[wt[qi]](zi):qi!=="colors"&&nt.collectionsWithUpdate.indexOf(qi)===-1&&xe(!0,nt.options[qi],ke[qi]),qi!=="chart"&&nt.propsRequireUpdateSeries.indexOf(qi)!==-1&&(yi=!0)}),this.collectionsWithUpdate.forEach(function(zi){let qi;ke[zi]&&(qi=[],nt[zi].forEach(function(Oi,_n){Oi.options.isInternal||qi.push(le(Oi.options.index,_n))}),De(ke[zi]).forEach(function(Oi,_n){const wn=X(Oi.id);let Yn;wn&&(Yn=nt.get(Oi.id)),!Yn&&nt[zi]&&(Yn=nt[zi][qi?qi[_n]:_n])&&wn&&X(Yn.options.id)&&(Yn=void 0),Yn&&Yn.coll===zi&&(Yn.update(Oi,!1),Ue&&(Yn.touched=!0)),!Yn&&Ue&&nt.collectionsWithInit[zi]&&(nt.collectionsWithInit[zi][0].apply(nt,[Oi].concat(nt.collectionsWithInit[zi][1]||[]).concat([!1])).touched=!0)}),Ue&&nt[zi].forEach(function(Oi){Oi.touched||Oi.options.isInternal?delete Oi.touched:Vt.push(Oi)}))}),Vt.forEach(function(zi){zi.chart&&zi.remove&&zi.remove(!1)}),$i&&nt.axes.forEach(function(zi){zi.update({},!1)}),yi&&nt.getSeriesOrderByLinks().forEach(function(zi){zi.chart&&zi.update({},!1)},this),$i=Mi&&Mi.width,Mi=Mi&&(ae(Mi.height)?be(Mi.height,$i||nt.chartWidth):Mi.height),ri||ye($i)&&$i!==nt.chartWidth||ye(Mi)&&Mi!==nt.chartHeight?nt.setSize($i,Mi,We):le(Be,!0)&&nt.redraw(We),Z(nt,"afterUpdate",{options:ke,redraw:Be,animation:We})}setSubtitle(ke,Be){this.applyDescription("subtitle",ke),this.layOutTitles(Be)}setCaption(ke,Be){this.applyDescription("caption",ke),this.layOutTitles(Be)}showResetZoom(){function ke(){Be.zoomOut()}const Be=this,Ue=k.lang,We=Be.options.chart.zooming.resetButton,nt=We.theme,wt=We.relativeTo==="chart"||We.relativeTo==="spacingBox"?null:"scrollablePlotBox";Z(this,"beforeShowResetZoom",null,function(){Be.resetZoomButton=Be.renderer.button(Ue.resetZoom,null,null,ke,nt).attr({align:We.position.align,title:Ue.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(We.position,!1,wt)}),Z(this,"afterShowResetZoom")}zoomOut(){Z(this,"selection",{resetSelection:!0},this.zoom)}zoom(ke){const Be=this,Ue=Be.pointer;let We=!1,nt;!ke||ke.resetSelection?(Be.axes.forEach(function(Ut){nt=Ut.zoom()}),Ue.initiated=!1):ke.xAxis.concat(ke.yAxis).forEach(function(Ut){const Vt=Ut.axis;(Ue[Vt.isXAxis?"zoomX":"zoomY"]&&X(Ue.mouseDownX)&&X(Ue.mouseDownY)&&Be.isInsidePlot(Ue.mouseDownX-Be.plotLeft,Ue.mouseDownY-Be.plotTop,{axis:Vt})||!X(Be.inverted?Ue.mouseDownX:Ue.mouseDownY))&&(nt=Vt.zoom(Ut.min,Ut.max),Vt.displayBtn&&(We=!0))});const wt=Be.resetZoomButton;We&&!wt?Be.showResetZoom():!We&&Pe(wt)&&(Be.resetZoomButton=wt.destroy()),nt&&Be.redraw(le(Be.options.chart.animation,ke&&ke.animation,100>Be.pointCount))}pan(ke,Be){const Ue=this,We=Ue.hoverPoints;Be=typeof Be=="object"?Be:{enabled:Be,type:"x"};const nt=Ue.options.chart;nt&&nt.panning&&(nt.panning=Be);const wt=Be.type;let Ut;Z(this,"pan",{originalEvent:ke},function(){We&&We.forEach(function(ri){ri.setState()});let Vt=Ue.xAxis;wt==="xy"?Vt=Vt.concat(Ue.yAxis):wt==="y"&&(Vt=Ue.yAxis);const yi={};Vt.forEach(function(ri){if(ri.options.panningEnabled&&!ri.options.isInternal){var Mi=ri.horiz,$i=ke[Mi?"chartX":"chartY"];Mi=Mi?"mouseDownX":"mouseDownY";var zi=Ue[Mi],qi=ri.minPointOffset||0,Oi=ri.reversed&&!Ue.inverted||!ri.reversed&&Ue.inverted?-1:1,_n=ri.getExtremes(),wn=ri.toValue(zi-$i,!0)+qi*Oi,Yn=ri.toValue(zi+ri.len-$i,!0)-(qi*Oi||ri.isXAxis&&ri.pointRangePadding||0),Ts=Yn<wn;Oi=ri.hasVerticalPanning(),zi=Ts?Yn:wn,wn=Ts?wn:Yn;var ur=ri.panningState;!Oi||ri.isXAxis||ur&&!ur.isDirty||ri.series.forEach(function(Dr){var Ir=Dr.getProcessedData(!0);Ir=Dr.getExtremes(Ir.yData,!0),ur||(ur={startMin:Number.MAX_VALUE,startMax:-Number.MAX_VALUE}),ye(Ir.dataMin)&&ye(Ir.dataMax)&&(ur.startMin=Math.min(le(Dr.options.threshold,1/0),Ir.dataMin,ur.startMin),ur.startMax=Math.max(le(Dr.options.threshold,-1/0),Ir.dataMax,ur.startMax))}),Oi=Math.min(le(ur&&ur.startMin,_n.dataMin),qi?_n.min:ri.toValue(ri.toPixels(_n.min)-ri.minPixelPadding)),Yn=Math.max(le(ur&&ur.startMax,_n.dataMax),qi?_n.max:ri.toValue(ri.toPixels(_n.max)+ri.minPixelPadding)),ri.panningState=ur,ri.isOrdinal||(qi=Oi-zi,0<qi&&(wn+=qi,zi=Oi),qi=wn-Yn,0<qi&&(wn=Yn,zi-=qi),ri.series.length&&zi!==_n.min&&wn!==_n.max&&zi>=Oi&&wn<=Yn&&(ri.setExtremes(zi,wn,!1,!1,{trigger:"pan"}),!Ue.resetZoomButton&&zi!==Oi&&wn!==Yn&&wt.match("y")&&(Ue.showResetZoom(),ri.displayBtn=!1),Ut=!0),yi[Mi]=$i)}}),ve(yi,(ri,Mi)=>{Ue[Mi]=ri}),Ut&&Ue.redraw(!1),D(Ue.container,{cursor:"move"})})}}return fe(it.prototype,{callbacks:[],collectionsWithInit:{xAxis:[it.prototype.addAxis,[!0]],yAxis:[it.prototype.addAxis,[!1]],series:[it.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:"backgroundColor borderColor borderWidth borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireReflow:"margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip".split(" ")}),it}),r(l,"Core/Legend/LegendSymbol.js",[l["Core/Utilities.js"]],function(c){const{extend:d,merge:m,pick:n}=c;var T;return function(V){V.lineMarker=function(Q,z){z=this.legendItem=this.legendItem||{};var W=this.options;const K=Q.symbolWidth,I=Q.symbolHeight,O=I/2,$=this.chart.renderer,M=z.group;Q=Q.baseline-Math.round(.3*Q.fontMetrics.b);let S={},k=W.marker,G=0;this.chart.styledMode||(S={"stroke-width":Math.min(W.lineWidth||0,24)},W.dashStyle?S.dashstyle=W.dashStyle:W.linecap!=="square"&&(S["stroke-linecap"]="round")),z.line=$.path().addClass("highcharts-graph").attr(S).add(M),S["stroke-linecap"]&&(G=Math.min(z.line.strokeWidth(),K)/2),K&&z.line.attr({d:[["M",G,Q],["L",K-G,Q]]}),k&&k.enabled!==!1&&K&&(W=Math.min(n(k.radius,O),O),this.symbol.indexOf("url")===0&&(k=m(k,{width:I,height:I}),W=0),z.symbol=z=$.symbol(this.symbol,K/2-W,Q-W,2*W,2*W,d({context:"legend"},k)).addClass("highcharts-point").add(M),z.isMarker=!0)},V.rectangle=function(Q,z){z=z.legendItem||{};const W=Q.symbolHeight,K=Q.options.squareSymbol;z.symbol=this.chart.renderer.rect(K?(Q.symbolWidth-W)/2:0,Q.baseline-W+1,K?W:Q.symbolWidth,W,n(Q.options.symbolRadius,W/2)).addClass("highcharts-point").attr({zIndex:3}).add(z.group)}}(T||(T={})),T}),r(l,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:1,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){const{numberFormatter:c}=this.series.chart;return typeof this.y!="number"?"":c(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),r(l,"Core/Series/Series.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/Defaults.js"],l["Core/Foundation.js"],l["Core/Globals.js"],l["Core/Legend/LegendSymbol.js"],l["Core/Series/Point.js"],l["Core/Series/SeriesDefaults.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Renderer/SVG/SVGElement.js"],l["Core/Utilities.js"]],function(c,d,m,n,T,V,Q,z,W,K){const{animObject:I,setAnimation:O}=c,{defaultOptions:$}=d,{registerEventOptions:M}=m,{hasTouch:S,svg:k,win:G}=n,{seriesTypes:U}=z,{arrayMax:C,arrayMin:ie,clamp:J,cleanRecursively:N,correctFloat:F,defined:H,erase:E,error:L,extend:f,find:y,fireEvent:b,getNestedProperty:D,isArray:X,isNumber:te,isString:q,merge:ce,objectEach:fe,pick:we,removeEvent:Z,splat:se,syncTimeout:ue}=K;class ye{constructor(){this.zones=this.yAxis=this.xAxis=this.userOptions=this.tooltipOptions=this.processedYData=this.processedXData=this.points=this.options=this.linkedSeries=this.index=this.eventsToUnbind=this.eventOptions=this.data=this.chart=this._i=void 0}init(ae,xe){b(this,"init",{options:xe});const ve=this,le=ae.series;this.eventsToUnbind=[],ve.chart=ae,ve.options=ve.setOptions(xe),xe=ve.options,ve.linkedSeries=[],ve.bindAxes(),f(ve,{name:xe.name,state:"",visible:xe.visible!==!1,selected:xe.selected===!0}),M(this,xe);const me=xe.events;(me&&me.click||xe.point&&xe.point.events&&xe.point.events.click||xe.allowPointSelect)&&(ae.runTrackerClick=!0),ve.getColor(),ve.getSymbol(),ve.parallelArrays.forEach(function(Le){ve[Le+"Data"]||(ve[Le+"Data"]=[])}),ve.isCartesian&&(ae.hasCartesianSeries=!0);let be;le.length&&(be=le[le.length-1]),ve._i=we(be&&be._i,-1)+1,ve.opacity=ve.options.opacity,ae.orderSeries(this.insert(le)),xe.dataSorting&&xe.dataSorting.enabled?ve.setDataSortingOptions():ve.points||ve.data||ve.setData(xe.data,!1),b(this,"afterInit")}is(ae){return U[ae]&&this instanceof U[ae]}insert(ae){const xe=this.options.index;let ve;if(te(xe)){for(ve=ae.length;ve--;)if(xe>=we(ae[ve].options.index,ae[ve]._i)){ae.splice(ve+1,0,this);break}ve===-1&&ae.unshift(this),ve+=1}else ae.push(this);return we(ve,ae.length-1)}bindAxes(){const ae=this,xe=ae.options,ve=ae.chart;let le;b(this,"bindAxes",null,function(){(ae.axisTypes||[]).forEach(function(me){let be=0;ve[me].forEach(function(Le){le=Le.options,(xe[me]===be&&!le.isInternal||typeof xe[me]<"u"&&xe[me]===le.id||typeof xe[me]>"u"&&le.index===0)&&(ae.insert(Le.series),ae[me]=Le,Le.isDirty=!0),le.isInternal||be++}),ae[me]||ae.optionalAxis===me||L(18,!0,ve)})}),b(this,"afterBindAxes")}updateParallelArrays(ae,xe,ve){const le=ae.series,me=te(xe)?function(be){const Le=be==="y"&&le.toYData?le.toYData(ae):ae[be];le[be+"Data"][xe]=Le}:function(be){Array.prototype[xe].apply(le[be+"Data"],ve)};le.parallelArrays.forEach(me)}hasData(){return this.visible&&typeof this.dataMax<"u"&&typeof this.dataMin<"u"||this.visible&&this.yData&&0<this.yData.length}autoIncrement(ae){var xe=this.options;const ve=xe.pointIntervalUnit,le=xe.relativeXValue,me=this.chart.time;let be=this.xIncrement,Le;return be=we(be,xe.pointStart,0),this.pointInterval=Le=we(this.pointInterval,xe.pointInterval,1),le&&te(ae)&&(Le*=ae),ve&&(xe=new me.Date(be),ve==="day"?me.set("Date",xe,me.get("Date",xe)+Le):ve==="month"?me.set("Month",xe,me.get("Month",xe)+Le):ve==="year"&&me.set("FullYear",xe,me.get("FullYear",xe)+Le),Le=xe.getTime()-be),le&&te(ae)?be+Le:(this.xIncrement=be+Le,be)}setDataSortingOptions(){const ae=this.options;f(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),H(ae.pointRange)||(ae.pointRange=1)}setOptions(ae){var xe=this.chart,ve=xe.options,le=ve.plotOptions,me=xe.userOptions||{};ae=ce(ae),xe=xe.styledMode;const be={plotOptions:le,userOptions:ae};b(this,"setOptions",be);const Le=be.plotOptions[this.type],De=me.plotOptions||{};return this.userOptions=be.userOptions,me=ce(Le,le.series,me.plotOptions&&me.plotOptions[this.type],ae),this.tooltipOptions=ce($.tooltip,$.plotOptions.series&&$.plotOptions.series.tooltip,$.plotOptions[this.type].tooltip,ve.tooltip.userOptions,le.series&&le.series.tooltip,le[this.type].tooltip,ae.tooltip),this.stickyTracking=we(ae.stickyTracking,De[this.type]&&De[this.type].stickyTracking,De.series&&De.series.stickyTracking,this.tooltipOptions.shared&&!this.noSharedTooltip?!0:me.stickyTracking),Le.marker===null&&delete me.marker,this.zoneAxis=me.zoneAxis,le=this.zones=(me.zones||[]).slice(),!me.negativeColor&&!me.negativeFillColor||me.zones||(ve={value:me[this.zoneAxis+"Threshold"]||me.threshold||0,className:"highcharts-negative"},xe||(ve.color=me.negativeColor,ve.fillColor=me.negativeFillColor),le.push(ve)),le.length&&H(le[le.length-1].value)&&le.push(xe?{}:{color:this.color,fillColor:this.fillColor}),b(this,"afterSetOptions",{options:me}),me}getName(){return we(this.options.name,"Series "+(this.index+1))}getCyclic(ae,xe,ve){const le=this.chart,me=this.userOptions,be=ae+"Index",Le=ae+"Counter",De=ve?ve.length:we(le.options.chart[ae+"Count"],le[ae+"Count"]);if(!xe){var Ne=we(me[be],me["_"+be]);H(Ne)||(le.series.length||(le[Le]=0),me["_"+be]=Ne=le[Le]%De,le[Le]+=1),ve&&(xe=ve[Ne])}typeof Ne<"u"&&(this[be]=Ne),this[ae]=xe}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||$.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)}findPointIndex(ae,xe){const ve=ae.id,le=ae.x,me=this.points;var be=this.options.dataSorting,Le;let De,Ne;if(ve)be=this.chart.get(ve),be instanceof V&&(Le=be);else if((this.linkedParent||this.enabledDataSorting||this.options.relativeXValue)&&(Le=st=>!st.touched&&st.index===ae.index,be&&be.matchByName?Le=st=>!st.touched&&st.name===ae.name:this.options.relativeXValue&&(Le=st=>!st.touched&&st.options.x===ae.x),Le=y(me,Le),!Le))return;return Le&&(Ne=Le&&Le.index,typeof Ne<"u"&&(De=!0)),typeof Ne>"u"&&te(le)&&(Ne=this.xData.indexOf(le,xe)),Ne!==-1&&typeof Ne<"u"&&this.cropped&&(Ne=Ne>=this.cropStart?Ne-this.cropStart:Ne),!De&&te(Ne)&&me[Ne]&&me[Ne].touched&&(Ne=void 0),Ne}updateData(ae,xe){const ve=this.options,le=ve.dataSorting,me=this.points,be=[],Le=this.requireSorting,De=ae.length===me.length;let Ne,st,it,ht=!0;if(this.xIncrement=null,ae.forEach(function(ke,Be){var Ue=H(ke)&&this.pointClass.prototype.optionsToObject.call({series:this},ke)||{};const We=Ue.x;Ue.id||te(We)?(Ue=this.findPointIndex(Ue,it),Ue===-1||typeof Ue>"u"?be.push(ke):me[Ue]&&ke!==ve.data[Ue]?(me[Ue].update(ke,!1,null,!1),me[Ue].touched=!0,Le&&(it=Ue+1)):me[Ue]&&(me[Ue].touched=!0),(!De||Be!==Ue||le&&le.enabled||this.hasDerivedData)&&(Ne=!0)):be.push(ke)},this),Ne)for(ae=me.length;ae--;)(st=me[ae])&&!st.touched&&st.remove&&st.remove(!1,xe);else!De||le&&le.enabled?ht=!1:(ae.forEach(function(ke,Be){ke===me[Be].y||me[Be].destroyed||me[Be].update(ke,!1,null,!1)}),be.length=0);return me.forEach(function(ke){ke&&(ke.touched=!1)}),ht?(be.forEach(function(ke){this.addPoint(ke,!1,null,null,!1)},this),this.xIncrement===null&&this.xData&&this.xData.length&&(this.xIncrement=C(this.xData),this.autoIncrement()),!0):!1}setData(ae,xe=!0,ve,le){var me;const be=this,Le=be.points,De=Le&&Le.length||0,Ne=be.options,st=be.chart,it=Ne.dataSorting,ht=be.xAxis,ke=Ne.turboThreshold,Be=this.xData,Ue=this.yData;var We=be.pointArrayMap;We=We&&We.length;const nt=Ne.keys;let wt,Ut=0,Vt=1,yi=null;if(!st.options.chart.allowMutatingData){Ne.data&&delete be.options.data,be.userOptions.data&&delete be.userOptions.data;var ri=ce(!0,ae)}if(ae=ri||ae||[],ri=ae.length,it&&it.enabled&&(ae=this.sortData(ae)),st.options.chart.allowMutatingData&&le!==!1&&ri&&De&&!be.cropped&&!be.hasGroupedData&&be.visible&&!be.boosted&&(wt=this.updateData(ae,ve)),!wt){if(be.xIncrement=null,be.colorCounter=0,this.parallelArrays.forEach(function(Mi){be[Mi+"Data"].length=0}),ke&&ri>ke)if(yi=be.getFirstValidPoint(ae),te(yi))for(ve=0;ve<ri;ve++)Be[ve]=this.autoIncrement(),Ue[ve]=ae[ve];else if(X(yi))if(We)if(yi.length===We)for(ve=0;ve<ri;ve++)Be[ve]=this.autoIncrement(),Ue[ve]=ae[ve];else for(ve=0;ve<ri;ve++)le=ae[ve],Be[ve]=le[0],Ue[ve]=le.slice(1,We+1);else if(nt&&(Ut=nt.indexOf("x"),Vt=nt.indexOf("y"),Ut=0<=Ut?Ut:0,Vt=0<=Vt?Vt:1),yi.length===1&&(Vt=0),Ut===Vt)for(ve=0;ve<ri;ve++)Be[ve]=this.autoIncrement(),Ue[ve]=ae[ve][Vt];else for(ve=0;ve<ri;ve++)le=ae[ve],Be[ve]=le[Ut],Ue[ve]=le[Vt];else L(12,!1,st);else for(ve=0;ve<ri;ve++)le={series:be},be.pointClass.prototype.applyOptions.apply(le,[ae[ve]]),be.updateParallelArrays(le,ve);for(Ue&&q(Ue[0])&&L(14,!0,st),be.data=[],be.options.data=be.userOptions.data=ae,ve=De;ve--;)(me=Le[ve])===null||me===void 0||me.destroy();ht&&(ht.minRange=ht.userMinRange),be.isDirty=st.isDirtyBox=!0,be.isDirtyData=!!Le,ve=!1}Ne.legendType==="point"&&(this.processData(),this.generatePoints()),xe&&st.redraw(ve)}sortData(ae){const xe=this,ve=xe.options.dataSorting.sortKey||"y",le=function(me,be){return H(be)&&me.pointClass.prototype.optionsToObject.call({series:me},be)||{}};return ae.forEach(function(me,be){ae[be]=le(xe,me),ae[be].index=be},this),ae.concat().sort((me,be)=>(me=D(ve,me),be=D(ve,be),be<me?-1:be>me?1:0)).forEach(function(me,be){me.x=be},this),xe.linkedSeries&&xe.linkedSeries.forEach(function(me){const be=me.options,Le=be.data;be.dataSorting&&be.dataSorting.enabled||!Le||(Le.forEach(function(De,Ne){Le[Ne]=le(me,De),ae[Ne]&&(Le[Ne].x=ae[Ne].x,Le[Ne].index=Ne)}),me.setData(Le,!1))}),ae}getProcessedData(ae){var xe=this.xAxis,ve=this.options,le=ve.cropThreshold;const me=ae||this.getExtremesFromAll||ve.getExtremesFromAll,be=this.isCartesian;ae=xe&&xe.val2lin,ve=!(!xe||!xe.logarithmic);let Le=0,De,Ne,st,it=this.xData,ht=this.yData,ke=this.requireSorting;var Be=!1;const Ue=it.length;if(xe&&(Be=xe.getExtremes(),Ne=Be.min,st=Be.max,Be=!(!xe.categories||xe.names.length)),be&&this.sorted&&!me&&(!le||Ue>le||this.forceCrop)){if(it[Ue-1]<Ne||it[0]>st)it=[],ht=[];else if(this.yData&&(it[0]<Ne||it[Ue-1]>st)){var We=this.cropData(this.xData,this.yData,Ne,st);it=We.xData,ht=We.yData,Le=We.start,We=!0}}for(le=it.length||1;--le;)xe=ve?ae(it[le])-ae(it[le-1]):it[le]-it[le-1],0<xe&&(typeof De>"u"||xe<De)?De=xe:0>xe&&ke&&!Be&&(L(15,!1,this.chart),ke=!1);return{xData:it,yData:ht,cropped:We,cropStart:Le,closestPointRange:De}}processData(ae){const xe=this.xAxis;if(this.isCartesian&&!this.isDirty&&!xe.isDirty&&!this.yAxis.isDirty&&!ae)return!1;ae=this.getProcessedData(),this.cropped=ae.cropped,this.cropStart=ae.cropStart,this.processedXData=ae.xData,this.processedYData=ae.yData,this.closestPointRange=this.basePointRange=ae.closestPointRange,b(this,"afterProcessData")}cropData(ae,xe,ve,le,me){const be=ae.length;let Le,De=0,Ne=be;for(me=we(me,this.cropShoulder),Le=0;Le<be;Le++)if(ae[Le]>=ve){De=Math.max(0,Le-me);break}for(ve=Le;ve<be;ve++)if(ae[ve]>le){Ne=ve+me;break}return{xData:ae.slice(De,Ne),yData:xe.slice(De,Ne),start:De,end:Ne}}generatePoints(){var ae=this.options;const xe=this.processedData||ae.data,ve=this.processedXData,le=this.processedYData,me=this.pointClass,be=ve.length,Le=this.cropStart||0,De=this.hasGroupedData,Ne=ae.keys,st=[];ae=ae.dataGrouping&&ae.dataGrouping.groupAll?Le:0;let it,ht,ke,Be=this.data;if(!Be&&!De){var Ue=[];Ue.length=xe.length,Be=this.data=Ue}for(Ne&&De&&(this.options.keys=!1),ke=0;ke<be;ke++)Ue=Le+ke,De?(ht=new me().init(this,[ve[ke]].concat(se(le[ke]))),ht.dataGroup=this.groupMap[ae+ke],ht.dataGroup.options&&(ht.options=ht.dataGroup.options,f(ht,ht.dataGroup.options),delete ht.dataLabels)):(ht=Be[Ue])||typeof xe[Ue]>"u"||(Be[Ue]=ht=new me().init(this,xe[Ue],ve[ke])),ht&&(ht.index=De?ae+ke:Ue,st[ke]=ht);if(this.options.keys=Ne,Be&&(be!==(it=Be.length)||De))for(ke=0;ke<it;ke++)ke!==Le||De||(ke+=be),Be[ke]&&(Be[ke].destroyElements(),Be[ke].plotX=void 0);this.data=Be,this.points=st,b(this,"afterGeneratePoints")}getXExtremes(ae){return{min:ie(ae),max:C(ae)}}getExtremes(ae,xe){const ve=this.xAxis;var le=this.yAxis;const me=this.processedXData||this.xData,be=[],Le=this.requireSorting?this.cropShoulder:0;le=le?le.positiveValuesOnly:!1;let De,Ne=0,st=0,it=0;ae=ae||this.stackedYData||this.processedYData||[];const ht=ae.length;if(ve){var ke=ve.getExtremes();Ne=ke.min,st=ke.max}for(De=0;De<ht;De++){var Be=me[De];ke=ae[De];var Ue=(te(ke)||X(ke))&&(ke.length||0<ke||!le);if(Be=xe||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!ve||(me[De+Le]||Be)>=Ne&&(me[De-Le]||Be)<=st,Ue&&Be)if(Ue=ke.length)for(;Ue--;)te(ke[Ue])&&(be[it++]=ke[Ue]);else be[it++]=ke}return ae={activeYData:be,dataMin:ie(be),dataMax:C(be)},b(this,"afterGetExtremes",{dataExtremes:ae}),ae}applyExtremes(){const ae=this.getExtremes();return this.dataMin=ae.dataMin,this.dataMax=ae.dataMax,ae}getFirstValidPoint(ae){const xe=ae.length;let ve=0,le=null;for(;le===null&&ve<xe;)le=ae[ve],ve++;return le}translate(){var ae;this.processedXData||this.processData(),this.generatePoints();const xe=this.options,ve=xe.stacking,le=this.xAxis,me=le.categories,be=this.enabledDataSorting,Le=this.yAxis,De=this.points,Ne=De.length,st=this.pointPlacementToXValue(),it=!!st,ht=xe.threshold,ke=xe.startFromThreshold?ht:0,Be=this.zoneAxis||"y";let Ue,We,nt,wt,Ut=Number.MAX_VALUE;for(Ue=0;Ue<Ne;Ue++){const Vt=De[Ue],yi=Vt.x;let ri,Mi,$i=Vt.y,zi=Vt.low;const qi=ve&&((ae=Le.stacking)===null||ae===void 0?void 0:ae.stacks[(this.negStacks&&$i<(ke?0:ht)?"-":"")+this.stackKey]);We=le.translate(yi,!1,!1,!1,!0,st),Vt.plotX=te(We)?F(J(We,-1e5,1e5)):void 0,ve&&this.visible&&qi&&qi[yi]&&(wt=this.getStackIndicator(wt,yi,this.index),!Vt.isNull&&wt.key&&(ri=qi[yi],Mi=ri.points[wt.key]),ri&&X(Mi)&&(zi=Mi[0],$i=Mi[1],zi===ke&&wt.key===qi[yi].base&&(zi=we(te(ht)?ht:Le.min)),Le.positiveValuesOnly&&H(zi)&&0>=zi&&(zi=void 0),Vt.total=Vt.stackTotal=we(ri.total),Vt.percentage=H(Vt.y)&&ri.total?Vt.y/ri.total*100:void 0,Vt.stackY=$i,this.irregularWidths||ri.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),Vt.yBottom=H(zi)?J(Le.translate(zi,!1,!0,!1,!0),-1e5,1e5):void 0,this.dataModify&&($i=this.dataModify.modifyValue($i,Ue));let Oi;te($i)&&Vt.plotX!==void 0&&(Oi=Le.translate($i,!1,!0,!1,!0),Oi=te(Oi)?J(Oi,-1e5,1e5):void 0),Vt.plotY=Oi,Vt.isInside=this.isPointInside(Vt),Vt.clientX=it?F(le.translate(yi,!1,!1,!1,!0,st)):We,Vt.negative=Vt[Be]<(xe[Be+"Threshold"]||ht||0),Vt.category=we(me&&me[Vt.x],Vt.x),Vt.isNull||Vt.visible===!1||(typeof nt<"u"&&(Ut=Math.min(Ut,Math.abs(We-nt))),nt=We),Vt.zone=this.zones.length?Vt.getZone():void 0,!Vt.graphic&&this.group&&be&&(Vt.isNew=!0)}this.closestPointRangePx=Ut,b(this,"afterTranslate")}getValidPoints(ae,xe,ve){const le=this.chart;return(ae||this.points||[]).filter(function(me){const{plotX:be,plotY:Le}=me;return!ve&&(me.isNull||!te(Le))||xe&&!le.isInsidePlot(be,Le,{inverted:le.inverted})?!1:me.visible!==!1})}getClipBox(){const{chart:ae,xAxis:xe,yAxis:ve}=this,le=ce(ae.clipBox);return xe&&xe.len!==ae.plotSizeX&&(le.width=xe.len),ve&&ve.len!==ae.plotSizeY&&(le.height=ve.len),le}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0)}setClip(){const{chart:ae,group:xe,markerGroup:ve}=this,le=ae.sharedClips,me=ae.renderer,be=this.getClipBox(),Le=this.getSharedClipKey();let De=le[Le];De?De.animate(be):le[Le]=De=me.clipRect(be),xe&&xe.clip(this.options.clip===!1?void 0:De),ve&&ve.clip()}animate(ae){const{chart:xe,group:ve,markerGroup:le}=this,me=xe.inverted;var be=I(this.options.animation),Le=[this.getSharedClipKey(),be.duration,be.easing,be.defer].join();let De=xe.sharedClips[Le],Ne=xe.sharedClips[Le+"m"];if(ae&&ve)be=this.getClipBox(),De?De.attr("height",be.height):(be.width=0,me&&(be.x=xe.plotHeight),De=xe.renderer.clipRect(be),xe.sharedClips[Le]=De,Ne=xe.renderer.clipRect({x:-99,y:-99,width:me?xe.plotWidth+199:99,height:me?99:xe.plotHeight+199}),xe.sharedClips[Le+"m"]=Ne),ve.clip(De),le&&le.clip(Ne);else if(De&&!De.hasClass("highcharts-animating")){Le=this.getClipBox();const st=be.step;le&&le.element.childNodes.length&&(be.step=function(it,ht){st&&st.apply(ht,arguments),ht.prop==="width"&&Ne&&Ne.element&&Ne.attr(me?"height":"width",it+99)}),De.addClass("highcharts-animating").animate(Le,be)}}afterAnimate(){this.setClip(),fe(this.chart.sharedClips,(ae,xe,ve)=>{ae&&!this.chart.container.querySelector(`[clip-path="url(#${ae.id})"]`)&&(ae.destroy(),delete ve[xe])}),this.finishedAnimating=!0,b(this,"afterAnimate")}drawPoints(ae=this.points){const xe=this.chart,ve=xe.styledMode,{colorAxis:le,options:me}=this,be=me.marker,Le=this[this.specialGroup||"markerGroup"],De=this.xAxis,Ne=we(be.enabled,!De||De.isRadial?!0:null,this.closestPointRangePx>=be.enabledThreshold*be.radius);let st,it,ht,ke,Be,Ue;if(be.enabled!==!1||this._hasPointMarkers)for(st=0;st<ae.length;st++){it=ae[st],ke=(ht=it.graphic)?"animate":"attr";var We=it.marker||{};if(Be=!!it.marker,(Ne&&typeof We.enabled>"u"||We.enabled)&&!it.isNull&&it.visible!==!1){const nt=we(We.symbol,this.symbol,"rect");Ue=this.markerAttribs(it,it.selected&&"select"),this.enabledDataSorting&&(it.startXPos=De.reversed?-(Ue.width||0):De.width);const wt=it.isInside!==!1;!ht&&wt&&(0<(Ue.width||0)||it.hasImage)&&(it.graphic=ht=xe.renderer.symbol(nt,Ue.x,Ue.y,Ue.width,Ue.height,Be?We:be).add(Le),this.enabledDataSorting&&xe.hasRendered&&(ht.attr({x:it.startXPos}),ke="animate")),ht&&ke==="animate"&&ht[wt?"show":"hide"](wt).animate(Ue),ht&&(We=this.pointAttribs(it,ve||!it.selected?void 0:"select"),ve?le&&ht.css({fill:We.fill}):ht[ke](We)),ht&&ht.addClass(it.getClassName(),!0)}else ht&&(it.graphic=ht.destroy())}}markerAttribs(ae,xe){const ve=this.options;var le=ve.marker;const me=ae.marker||{},be=me.symbol||le.symbol,Le={};let De=we(me.radius,le&&le.radius);return xe&&(le=le.states[xe],xe=me.states&&me.states[xe],De=we(xe&&xe.radius,le&&le.radius,De&&De+(le&&le.radiusPlus||0))),ae.hasImage=be&&be.indexOf("url")===0,ae.hasImage&&(De=0),ae=ae.pos(),te(De)&&ae&&(Le.x=ae[0]-De,Le.y=ae[1]-De,ve.crisp&&(Le.x=Math.floor(Le.x))),De&&(Le.width=Le.height=2*De),Le}pointAttribs(ae,xe){var ve=this.options.marker,le=ae&&ae.options;const me=le&&le.marker||{};var be=le&&le.color,Le=ae&&ae.color;const De=ae&&ae.zone&&ae.zone.color;let Ne=this.color;return ae=we(me.lineWidth,ve.lineWidth),le=1,Ne=be||De||Le||Ne,be=me.fillColor||ve.fillColor||Ne,Le=me.lineColor||ve.lineColor||Ne,xe=xe||"normal",ve=ve.states[xe]||{},xe=me.states&&me.states[xe]||{},ae=we(xe.lineWidth,ve.lineWidth,ae+we(xe.lineWidthPlus,ve.lineWidthPlus,0)),be=xe.fillColor||ve.fillColor||be,Le=xe.lineColor||ve.lineColor||Le,le=we(xe.opacity,ve.opacity,le),{stroke:Le,"stroke-width":ae,fill:be,opacity:le}}destroy(ae){const xe=this,ve=xe.chart,le=/AppleWebKit\/533/.test(G.navigator.userAgent),me=xe.data||[];let be,Le,De,Ne;for(b(xe,"destroy",{keepEventsForUpdate:ae}),this.removeEvents(ae),(xe.axisTypes||[]).forEach(function(st){(Ne=xe[st])&&Ne.series&&(E(Ne.series,xe),Ne.isDirty=Ne.forceRedraw=!0)}),xe.legendItem&&xe.chart.legend.destroyItem(xe),Le=me.length;Le--;)(De=me[Le])&&De.destroy&&De.destroy();xe.clips&&xe.clips.forEach(st=>st.destroy()),K.clearTimeout(xe.animationTimeout),fe(xe,function(st,it){st instanceof W&&!st.survive&&(be=le&&it==="group"?"hide":"destroy",st[be]())}),ve.hoverSeries===xe&&(ve.hoverSeries=void 0),E(ve.series,xe),ve.orderSeries(),fe(xe,function(st,it){ae&&it==="hcEvents"||delete xe[it]})}applyZones(){const ae=this,xe=this.chart,ve=xe.renderer,le=this.zones,me=this.clips||[],be=this.graph,Le=this.area,De=Math.max(xe.plotWidth,xe.plotHeight),Ne=this[(this.zoneAxis||"y")+"Axis"],st=xe.inverted;let it,ht,ke,Be,Ue,We,nt,wt,Ut,Vt,yi,ri=!1;le.length&&(be||Le)&&Ne&&typeof Ne.min<"u"?(Ue=Ne.reversed,We=Ne.horiz,be&&!this.showLine&&be.hide(),Le&&Le.hide(),Be=Ne.getExtremes(),le.forEach(function(Mi,$i){it=Ue?We?xe.plotWidth:0:We?0:Ne.toPixels(Be.min)||0,it=J(we(ht,it),0,De),ht=J(Math.round(Ne.toPixels(we(Mi.value,Be.max),!0)||0),0,De),ri&&(it=ht=Ne.toPixels(Be.max)),nt=Math.abs(it-ht),wt=Math.min(it,ht),Ut=Math.max(it,ht),Ne.isXAxis?(ke={x:st?Ut:wt,y:0,width:nt,height:De},We||(ke.x=xe.plotHeight-ke.x)):(ke={x:0,y:st?Ut:wt,width:De,height:nt},We&&(ke.y=xe.plotWidth-ke.y)),me[$i]?me[$i].animate(ke):me[$i]=ve.clipRect(ke),Vt=ae["zone-area-"+$i],yi=ae["zone-graph-"+$i],be&&yi&&yi.clip(me[$i]),Le&&Vt&&Vt.clip(me[$i]),ri=Mi.value>Be.max,ae.resetZones&&ht===0&&(ht=void 0)}),this.clips=me):ae.visible&&(be&&be.show(),Le&&Le.show())}plotGroup(ae,xe,ve,le,me){let be=this[ae];const Le=!be;return ve={visibility:ve,zIndex:le||.1},typeof this.opacity>"u"||this.chart.styledMode||this.state==="inactive"||(ve.opacity=this.opacity),Le&&(this[ae]=be=this.chart.renderer.g().add(me)),be.addClass("highcharts-"+xe+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(H(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(be.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),be.attr(ve)[Le?"attr":"animate"](this.getPlotBox(xe)),be}getPlotBox(ae){let xe=this.xAxis,ve=this.yAxis;const le=this.chart;return ae=le.inverted&&!le.polar&&xe&&this.invertible!==!1&&ae==="series",le.inverted&&(xe=ve,ve=this.xAxis),{translateX:xe?xe.left:le.plotLeft,translateY:ve?ve.top:le.plotTop,rotation:ae?90:0,rotationOriginX:ae?(xe.len-ve.len)/2:0,rotationOriginY:ae?(xe.len+ve.len)/2:0,scaleX:ae?-1:1,scaleY:1}}removeEvents(ae){ae||Z(this),this.eventsToUnbind.length&&(this.eventsToUnbind.forEach(function(xe){xe()}),this.eventsToUnbind.length=0)}render(){const ae=this;var xe=ae.chart;const ve=ae.options,le=I(ve.animation),me=ae.visible?"inherit":"hidden",be=ve.zIndex,Le=ae.hasRendered;xe=xe.seriesGroup;let De=ae.finishedAnimating?0:le.duration;b(this,"render"),ae.plotGroup("group","series",me,be,xe),ae.markerGroup=ae.plotGroup("markerGroup","markers",me,be,xe),ve.clip!==!1&&ae.setClip(),ae.animate&&De&&ae.animate(!0),ae.drawGraph&&(ae.drawGraph(),ae.applyZones()),ae.visible&&ae.drawPoints(),ae.drawDataLabels&&ae.drawDataLabels(),ae.redrawPoints&&ae.redrawPoints(),ae.drawTracker&&ae.options.enableMouseTracking!==!1&&ae.drawTracker(),ae.animate&&De&&ae.animate(),Le||(De&&le.defer&&(De+=le.defer),ae.animationTimeout=ue(function(){ae.afterAnimate()},De||0)),ae.isDirty=!1,ae.hasRendered=!0,b(ae,"afterRender")}redraw(){const ae=this.isDirty||this.isDirtyData;this.translate(),this.render(),ae&&delete this.kdTree}searchPoint(ae,xe){const ve=this.xAxis,le=this.yAxis,me=this.chart.inverted;return this.searchKDTree({clientX:me?ve.len-ae.chartY+ve.pos:ae.chartX-ve.pos,plotY:me?le.len-ae.chartX+le.pos:ae.chartY-le.pos},xe,ae)}buildKDTree(ae){function xe(me,be,Le){var De=me&&me.length;let Ne;if(De)return Ne=ve.kdAxisArray[be%Le],me.sort(function(st,it){return st[Ne]-it[Ne]}),De=Math.floor(De/2),{point:me[De],left:xe(me.slice(0,De),be+1,Le),right:xe(me.slice(De+1),be+1,Le)}}this.buildingKdTree=!0;const ve=this,le=-1<ve.options.findNearestPointBy.indexOf("y")?2:1;delete ve.kdTree,ue(function(){ve.kdTree=xe(ve.getValidPoints(null,!ve.directTouch),le,le),ve.buildingKdTree=!1},ve.options.kdNow||ae&&ae.type==="touchstart"?0:1)}searchKDTree(ae,xe,ve){function le(Ne,st,it,ht){const ke=st.point;var Be=me.kdAxisArray[it%ht];let Ue=ke;var We=H(Ne[be])&&H(ke[be])?Math.pow(Ne[be]-ke[be],2):null,nt=H(Ne[Le])&&H(ke[Le])?Math.pow(Ne[Le]-ke[Le],2):null;return nt=(We||0)+(nt||0),ke.dist=H(nt)?Math.sqrt(nt):Number.MAX_VALUE,ke.distX=H(We)?Math.sqrt(We):Number.MAX_VALUE,Be=Ne[Be]-ke[Be],nt=0>Be?"left":"right",We=0>Be?"right":"left",st[nt]&&(nt=le(Ne,st[nt],it+1,ht),Ue=nt[De]<Ue[De]?nt:ke),st[We]&&Math.sqrt(Be*Be)<Ue[De]&&(Ne=le(Ne,st[We],it+1,ht),Ue=Ne[De]<Ue[De]?Ne:Ue),Ue}const me=this,be=this.kdAxisArray[0],Le=this.kdAxisArray[1],De=xe?"distX":"dist";if(xe=-1<me.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(ve),this.kdTree)return le(ae,this.kdTree,xe,xe)}pointPlacementToXValue(){const{options:{pointPlacement:ae,pointRange:xe},xAxis:ve}=this;let le=ae;return le==="between"&&(le=ve.reversed?-.5:.5),te(le)?le*(xe||ve.pointRange):0}isPointInside(ae){const{chart:xe,xAxis:ve,yAxis:le}=this;return typeof ae.plotY<"u"&&typeof ae.plotX<"u"&&0<=ae.plotY&&ae.plotY<=(le?le.len:xe.plotHeight)&&0<=ae.plotX&&ae.plotX<=(ve?ve.len:xe.plotWidth)}drawTracker(){const ae=this,xe=ae.options,ve=xe.trackByArea,le=[].concat(ve?ae.areaPath:ae.graphPath),me=ae.chart,be=me.pointer,Le=me.renderer,De=me.options.tooltip.snap,Ne=ae.tracker,st=function(ht){me.hoverSeries!==ae&&ae.onMouseOver()},it="rgba(192,192,192,"+(k?1e-4:.002)+")";Ne?Ne.attr({d:le}):ae.graph&&(ae.tracker=Le.path(le).attr({visibility:ae.visible?"inherit":"hidden",zIndex:2}).addClass(ve?"highcharts-tracker-area":"highcharts-tracker-line").add(ae.group),me.styledMode||ae.tracker.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:it,fill:ve?it:"none","stroke-width":ae.graph.strokeWidth()+(ve?0:2*De)}),[ae.tracker,ae.markerGroup,ae.dataLabelsGroup].forEach(function(ht){ht&&(ht.addClass("highcharts-tracker").on("mouseover",st).on("mouseout",function(ke){be.onTrackerMouseOut(ke)}),xe.cursor&&!me.styledMode&&ht.css({cursor:xe.cursor}),S)&&ht.on("touchstart",st)})),b(this,"afterDrawTracker")}addPoint(ae,xe,ve,le,me){const be=this.options,Le=this.data,De=this.chart;var Ne=this.xAxis;Ne=Ne&&Ne.hasNames&&Ne.names;const st=be.data,it=this.xData;let ht,ke;xe=we(xe,!0);const Be={series:this};this.pointClass.prototype.applyOptions.apply(Be,[ae]);const Ue=Be.x;if(ke=it.length,this.requireSorting&&Ue<it[ke-1])for(ht=!0;ke&&it[ke-1]>Ue;)ke--;this.updateParallelArrays(Be,"splice",[ke,0,0]),this.updateParallelArrays(Be,ke),Ne&&Be.name&&(Ne[Ue]=Be.name),st.splice(ke,0,ae),(ht||this.processedData)&&(this.data.splice(ke,0,null),this.processData()),be.legendType==="point"&&this.generatePoints(),ve&&(Le[0]&&Le[0].remove?Le[0].remove(!1):(Le.shift(),this.updateParallelArrays(Be,"shift"),st.shift())),me!==!1&&b(this,"addPoint",{point:Be}),this.isDirtyData=this.isDirty=!0,xe&&De.redraw(le)}removePoint(ae,xe,ve){const le=this,me=le.data,be=me[ae],Le=le.points,De=le.chart,Ne=function(){Le&&Le.length===me.length&&Le.splice(ae,1),me.splice(ae,1),le.options.data.splice(ae,1),le.updateParallelArrays(be||{series:le},"splice",[ae,1]),be&&be.destroy(),le.isDirty=!0,le.isDirtyData=!0,xe&&De.redraw()};O(ve,De),xe=we(xe,!0),be?be.firePointEvent("remove",null,Ne):Ne()}remove(ae,xe,ve,le){function me(){be.destroy(le),Le.isDirtyLegend=Le.isDirtyBox=!0,Le.linkSeries(le),we(ae,!0)&&Le.redraw(xe)}const be=this,Le=be.chart;ve!==!1?b(be,"remove",null,me):me()}update(ae,xe){ae=N(ae,this.userOptions),b(this,"update",{options:ae});const ve=this,le=ve.chart;var me=ve.userOptions;const be=ve.initialType||ve.type;var Le=le.options.plotOptions;const De=U[be].prototype;var Ne=ve.finishedAnimating&&{animation:!1};const st={};let it,ht=["eventOptions","navigatorSeries","baseSeries"],ke=ae.type||me.type||le.options.chart.type;const Be=!(this.hasDerivedData||ke&&ke!==this.type||typeof ae.pointStart<"u"||typeof ae.pointInterval<"u"||typeof ae.relativeXValue<"u"||ae.joinBy||ae.mapData||ve.hasOptionChanged("dataGrouping")||ve.hasOptionChanged("pointStart")||ve.hasOptionChanged("pointInterval")||ve.hasOptionChanged("pointIntervalUnit")||ve.hasOptionChanged("keys"));if(ke=ke||be,Be&&(ht.push("data","isDirtyData","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","_hasPointLabels","clips","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX"),ae.visible!==!1&&ht.push("area","graph"),ve.parallelArrays.forEach(function(Ue){ht.push(Ue+"Data")}),ae.data&&(ae.dataSorting&&f(ve.options.dataSorting,ae.dataSorting),this.setData(ae.data,!1))),ae=ce(me,Ne,{index:typeof me.index>"u"?ve.index:me.index,pointStart:we(Le&&Le.series&&Le.series.pointStart,me.pointStart,ve.xData[0])},!Be&&{data:ve.options.data},ae),Be&&ae.data&&(ae.data=ve.options.data),ht=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(ht),ht.forEach(function(Ue){ht[Ue]=ve[Ue],delete ve[Ue]}),Le=!1,U[ke]){if(Le=ke!==ve.type,ve.remove(!1,!1,!1,!0),Le)if(Object.setPrototypeOf)Object.setPrototypeOf(ve,U[ke].prototype);else{Ne=Object.hasOwnProperty.call(ve,"hcEvents")&&ve.hcEvents;for(it in De)ve[it]=void 0;f(ve,U[ke].prototype),Ne?ve.hcEvents=Ne:delete ve.hcEvents}}else L(17,!0,le,{missingModuleFor:ke});if(ht.forEach(function(Ue){ve[Ue]=ht[Ue]}),ve.init(le,ae),Be&&this.points){if(ae=ve.options,ae.visible===!1)st.graphic=1,st.dataLabel=1;else if(!ve._hasPointLabels){const{marker:Ue,dataLabels:We}=ae;me=me.marker||{},!Ue||Ue.enabled!==!1&&me.symbol===Ue.symbol&&me.height===Ue.height&&me.width===Ue.width||(st.graphic=1),We&&We.enabled===!1&&(st.dataLabel=1)}for(const Ue of this.points)Ue&&Ue.series&&(Ue.resolveColor(),Object.keys(st).length&&Ue.destroyElements(st),ae.showInLegend===!1&&Ue.legendItem&&le.legend.destroyItem(Ue))}ve.initialType=be,le.linkSeries(),Le&&ve.linkedSeries.length&&(ve.isDirtyData=!0),b(this,"afterUpdate"),we(xe,!0)&&le.redraw(Be?void 0:!1)}setName(ae){this.name=this.options.name=this.userOptions.name=ae,this.chart.isDirtyLegend=!0}hasOptionChanged(ae){const xe=this.options[ae],ve=this.chart.options.plotOptions,le=this.userOptions[ae];return le?xe!==le:xe!==we(ve&&ve[this.type]&&ve[this.type][ae],ve&&ve.series&&ve.series[ae],xe)}onMouseOver(){const ae=this.chart,xe=ae.hoverSeries;ae.pointer.setHoverChartIndex(),xe&&xe!==this&&xe.onMouseOut(),this.options.events.mouseOver&&b(this,"mouseOver"),this.setState("hover"),ae.hoverSeries=this}onMouseOut(){const ae=this.options,xe=this.chart,ve=xe.tooltip,le=xe.hoverPoint;xe.hoverSeries=null,le&&le.onMouseOut(),this&&ae.events.mouseOut&&b(this,"mouseOut"),!ve||this.stickyTracking||ve.shared&&!this.noSharedTooltip||ve.hide(),xe.series.forEach(function(me){me.setState("",!0)})}setState(ae,xe){const ve=this;var le=ve.options;const me=ve.graph,be=le.inactiveOtherPoints,Le=le.states,De=we(Le[ae||"normal"]&&Le[ae||"normal"].animation,ve.chart.options.chart.animation);let Ne=le.lineWidth,st=0,it=le.opacity;if(ae=ae||"",ve.state!==ae&&([ve.group,ve.markerGroup,ve.dataLabelsGroup].forEach(function(ht){ht&&(ve.state&&ht.removeClass("highcharts-series-"+ve.state),ae&&ht.addClass("highcharts-series-"+ae))}),ve.state=ae,!ve.chart.styledMode)){if(Le[ae]&&Le[ae].enabled===!1)return;if(ae&&(Ne=Le[ae].lineWidth||Ne+(Le[ae].lineWidthPlus||0),it=we(Le[ae].opacity,it)),me&&!me.dashstyle&&te(Ne))for(le={"stroke-width":Ne},me.animate(le,De);ve["zone-graph-"+st];)ve["zone-graph-"+st].animate(le,De),st+=1;be||[ve.group,ve.markerGroup,ve.dataLabelsGroup,ve.labelBySeries].forEach(function(ht){ht&&ht.animate({opacity:it},De)})}xe&&be&&ve.points&&ve.setAllPointsToState(ae||void 0)}setAllPointsToState(ae){this.points.forEach(function(xe){xe.setState&&xe.setState(ae)})}setVisible(ae,xe){const ve=this,le=ve.chart,me=le.options.chart.ignoreHiddenSeries,be=ve.visible,Le=(ve.visible=ae=ve.options.visible=ve.userOptions.visible=typeof ae>"u"?!be:ae)?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(function(De){ve[De]&&ve[De][Le]()}),(le.hoverSeries===ve||(le.hoverPoint&&le.hoverPoint.series)===ve)&&ve.onMouseOut(),ve.legendItem&&le.legend.colorizeItem(ve,ae),ve.isDirty=!0,ve.options.stacking&&le.series.forEach(function(De){De.options.stacking&&De.visible&&(De.isDirty=!0)}),ve.linkedSeries.forEach(function(De){De.setVisible(ae,!1)}),me&&(le.isDirtyBox=!0),b(ve,Le),xe!==!1&&le.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(ae){this.selected=ae=this.options.selected=typeof ae>"u"?!this.selected:ae,this.checkbox&&(this.checkbox.checked=ae),b(this,ae?"select":"unselect")}shouldShowTooltip(ae,xe,ve={}){return ve.series=this,ve.visiblePlotOnly=!0,this.chart.isInsidePlot(ae,xe,ve)}drawLegendSymbol(ae,xe){var ve;(ve=T[this.options.legendSymbol||"rectangle"])===null||ve===void 0||ve.call(this,ae,xe)}}return ye.defaultOptions=Q,ye.types=z.seriesTypes,ye.registerType=z.registerSeriesType,f(ye.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,cropShoulder:1,directTouch:!1,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:V,requireSorting:!0,sorted:!0}),z.series=ye,ye}),r(l,"Extensions/ScrollablePlotArea.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/Axis/Axis.js"],l["Core/Chart/Chart.js"],l["Core/Series/Series.js"],l["Core/Renderer/RendererRegistry.js"],l["Core/Utilities.js"]],function(c,d,m,n,T,V){const{stop:Q}=c,{addEvent:z,createElement:W,defined:K,merge:I,pick:O}=V;z(m,"afterSetChartSize",function($){var M=this.options.chart.scrollablePlotArea,S=M&&M.minWidth;M=M&&M.minHeight;let k;this.renderer.forExport||(S?(this.scrollablePixelsX=S=Math.max(0,S-this.chartWidth))&&(this.scrollablePlotBox=this.renderer.scrollablePlotBox=I(this.plotBox),this.plotBox.width=this.plotWidth+=S,this.inverted?this.clipBox.height+=S:this.clipBox.width+=S,k={1:{name:"right",value:S}}):M&&(this.scrollablePixelsY=S=Math.max(0,M-this.chartHeight),K(S)&&(this.scrollablePlotBox=this.renderer.scrollablePlotBox=I(this.plotBox),this.plotBox.height=this.plotHeight+=S,this.inverted?this.clipBox.width+=S:this.clipBox.height+=S,k={2:{name:"bottom",value:S}})),k&&!$.skipAxes&&this.axes.forEach(function(G){k[G.side]?G.getPlotLinePath=function(){let U=k[G.side].name,C=this[U],ie;return this[U]=C-k[G.side].value,ie=d.prototype.getPlotLinePath.apply(this,arguments),this[U]=C,ie}:(G.setAxisSize(),G.setAxisTranslation())}))}),z(m,"render",function(){this.scrollablePixelsX||this.scrollablePixelsY?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()}),m.prototype.setUpScrolling=function(){const $={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};this.scrollablePixelsX&&($.overflowX="auto"),this.scrollablePixelsY&&($.overflowY="auto"),this.scrollingParent=W("div",{className:"highcharts-scrolling-parent"},{position:"relative"},this.renderTo),this.scrollingContainer=W("div",{className:"highcharts-scrolling"},$,this.scrollingParent);let M;z(this.scrollingContainer,"scroll",()=>{this.pointer&&(delete this.pointer.chartPosition,this.hoverPoint&&(M=this.hoverPoint),this.pointer.runPointActions(void 0,M,!0))}),this.innerContainer=W("div",{className:"highcharts-inner-container"},null,this.scrollingContainer),this.innerContainer.appendChild(this.container),this.setUpScrolling=null},m.prototype.moveFixedElements=function(){let $=this.container,M=this.fixedRenderer,S=".highcharts-breadcrumbs-group .highcharts-contextbutton .highcharts-credits .highcharts-legend .highcharts-legend-checkbox .highcharts-navigator-series .highcharts-navigator-xaxis .highcharts-navigator-yaxis .highcharts-navigator .highcharts-reset-zoom .highcharts-drillup-button .highcharts-scrollbar .highcharts-subtitle .highcharts-title".split(" "),k;this.scrollablePixelsX&&!this.inverted?k=".highcharts-yaxis":this.scrollablePixelsX&&this.inverted||this.scrollablePixelsY&&!this.inverted?k=".highcharts-xaxis":this.scrollablePixelsY&&this.inverted&&(k=".highcharts-yaxis"),k&&S.push(`${k}:not(.highcharts-radial-axis)`,`${k}-labels:not(.highcharts-radial-axis-labels)`),S.forEach(function(G){[].forEach.call($.querySelectorAll(G),function(U){(U.namespaceURI===M.SVG_NS?M.box:M.box.parentNode).appendChild(U),U.style.pointerEvents="auto"})})},m.prototype.applyFixed=function(){var $=!this.fixedDiv,M=this.options.chart,S=M.scrollablePlotArea,k=T.getRendererType();$?(this.fixedDiv=W("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(M.style&&M.style.zIndex||0)+2,top:0},null,!0),this.scrollingContainer&&this.scrollingContainer.parentNode.insertBefore(this.fixedDiv,this.scrollingContainer),this.renderTo.style.overflow="visible",this.fixedRenderer=M=new k(this.fixedDiv,this.chartWidth,this.chartHeight,this.options.chart.style),this.scrollableMask=M.path().attr({fill:this.options.chart.backgroundColor||"#fff","fill-opacity":O(S.opacity,.85),zIndex:-1}).addClass("highcharts-scrollable-mask").add(),z(this,"afterShowResetZoom",this.moveFixedElements),z(this,"afterApplyDrilldown",this.moveFixedElements),z(this,"afterLayOutTitles",this.moveFixedElements)):this.fixedRenderer.setSize(this.chartWidth,this.chartHeight),(this.scrollableDirty||$)&&(this.scrollableDirty=!1,this.moveFixedElements()),M=this.chartWidth+(this.scrollablePixelsX||0),k=this.chartHeight+(this.scrollablePixelsY||0),Q(this.container),this.container.style.width=M+"px",this.container.style.height=k+"px",this.renderer.boxWrapper.attr({width:M,height:k,viewBox:[0,0,M,k].join(" ")}),this.chartBackground.attr({width:M,height:k}),this.scrollingContainer.style.height=this.chartHeight+"px",$&&(S.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixelsX*S.scrollPositionX),S.scrollPositionY&&(this.scrollingContainer.scrollTop=this.scrollablePixelsY*S.scrollPositionY)),k=this.axisOffset,$=this.plotTop-k[0]-1,S=this.plotLeft-k[3]-1,M=this.plotTop+this.plotHeight+k[2]+1,k=this.plotLeft+this.plotWidth+k[1]+1;let G=this.plotLeft+this.plotWidth-(this.scrollablePixelsX||0),U=this.plotTop+this.plotHeight-(this.scrollablePixelsY||0);$=this.scrollablePixelsX?[["M",0,$],["L",this.plotLeft-1,$],["L",this.plotLeft-1,M],["L",0,M],["Z"],["M",G,$],["L",this.chartWidth,$],["L",this.chartWidth,M],["L",G,M],["Z"]]:this.scrollablePixelsY?[["M",S,0],["L",S,this.plotTop-1],["L",k,this.plotTop-1],["L",k,0],["Z"],["M",S,U],["L",S,this.chartHeight],["L",k,this.chartHeight],["L",k,U],["Z"]]:[["M",0,0]],this.redrawTrigger!=="adjustHeight"&&this.scrollableMask.attr({d:$})},z(d,"afterInit",function(){this.chart.scrollableDirty=!0}),z(n,"show",function(){this.chart.scrollableDirty=!0})}),r(l,"Core/Axis/Stacking/StackItem.js",[l["Core/FormatUtilities.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d,m){const{format:n}=c,{series:T}=d,{destroyObjectProperties:V,fireEvent:Q,isNumber:z,pick:W}=m;class K{constructor(O,$,M,S,k){const G=O.chart.inverted,U=O.reversed;this.axis=O,O=this.isNegative=!!M!=!!U,this.options=$=$||{},this.x=S,this.cumulative=this.total=null,this.points={},this.hasValidPoints=!1,this.stack=k,this.rightCliff=this.leftCliff=0,this.alignOptions={align:$.align||(G?O?"left":"right":"center"),verticalAlign:$.verticalAlign||(G?"middle":O?"bottom":"top"),y:$.y,x:$.x},this.textAlign=$.textAlign||(G?O?"right":"left":"center")}destroy(){V(this,this.axis)}render(O){const $=this.axis.chart,M=this.options;var S=M.format;S=S?n(S,this,$):M.formatter.call(this),this.label?this.label.attr({text:S,visibility:"hidden"}):(this.label=$.renderer.label(S,null,void 0,M.shape,void 0,void 0,M.useHTML,!1,"stack-labels"),S={r:M.borderRadius||0,text:S,padding:W(M.padding,5),visibility:"hidden"},$.styledMode||(S.fill=M.backgroundColor,S.stroke=M.borderColor,S["stroke-width"]=M.borderWidth,this.label.css(M.style||{})),this.label.attr(S),this.label.added||this.label.add(O)),this.label.labelrank=$.plotSizeY,Q(this,"afterRender")}setOffset(O,$,M,S,k,G){const{alignOptions:U,axis:C,label:ie,options:J,textAlign:N}=this,F=C.chart;M=this.getStackBox({xOffset:O,width:$,boxBottom:M,boxTop:S,defaultX:k,xAxis:G});var{verticalAlign:H}=U;if(ie&&M){S=ie.getBBox(),k=ie.padding,G=W(J.overflow,"justify")==="justify",U.x=J.x||0,U.y=J.y||0;const{x:E,y:L}=this.adjustStackPosition({labelBox:S,verticalAlign:H,textAlign:N});M.x-=E,M.y-=L,ie.align(U,!1,M),(H=F.isInsidePlot(ie.alignAttr.x+U.x+E,ie.alignAttr.y+U.y+L))||(G=!1),G&&T.prototype.justifyDataLabel.call(C,ie,U,ie.alignAttr,S,M),ie.attr({x:ie.alignAttr.x,y:ie.alignAttr.y,rotation:J.rotation,rotationOriginX:S.width/2,rotationOriginY:S.height/2}),W(!G&&J.crop,!0)&&(H=z(ie.x)&&z(ie.y)&&F.isInsidePlot(ie.x-k+ie.width,ie.y)&&F.isInsidePlot(ie.x+k,ie.y)),ie[H?"show":"hide"]()}Q(this,"afterSetOffset",{xOffset:O,width:$})}adjustStackPosition({labelBox:O,verticalAlign:$,textAlign:M}){const S={bottom:0,middle:1,top:2,right:1,center:0,left:-1};return{x:O.width/2+O.width/2*S[M],y:O.height/2*S[$]}}getStackBox(O){var $=this.axis;const M=$.chart,{boxTop:S,defaultX:k,xOffset:G,width:U,boxBottom:C}=O;var ie=$.stacking.usePercentage?100:W(S,this.total,0);ie=$.toPixels(ie),O=O.xAxis||M.xAxis[0];const J=W(k,O.translate(this.x))+G;$=$.toPixels(C||z($.min)&&$.logarithmic&&$.logarithmic.lin2log($.min)||0),$=Math.abs(ie-$);const N=this.isNegative;return M.inverted?{x:(N?ie:ie-$)-M.plotLeft,y:O.height-J-U,width:$,height:U}:{x:J+O.transB-M.plotLeft,y:(N?ie-$:ie)-M.plotTop,width:U,height:$}}}return K}),r(l,"Core/Axis/Stacking/StackingAxis.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/Axis/Axis.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Axis/Stacking/StackItem.js"],l["Core/Utilities.js"]],function(c,d,m,n,T){function V(){const f=this,y=f.inverted;f.yAxis.forEach(b=>{b.stacking&&b.stacking.stacks&&b.hasVisibleSeries&&(b.stacking.oldStacks=b.stacking.stacks)}),f.series.forEach(b=>{const D=b.xAxis&&b.xAxis.options||{};!b.options.stacking||b.visible!==!0&&f.options.chart.ignoreHiddenSeries!==!1||(b.stackKey=[b.type,H(b.options.stack,""),y?D.top:D.left,y?D.height:D.width].join())})}function Q(){const f=this.stacking;if(f){var y=f.stacks;F(y,function(b,D){C(b),y[D]=null}),f&&f.stackTotalGroup&&f.stackTotalGroup.destroy()}}function z(){this.coll!=="yAxis"||this.stacking||(this.stacking=new E(this))}function W(f,y,b,D){return!U(f)||f.x!==y||D&&f.stackKey!==D?f={x:y,index:0,key:D,stackKey:D}:f.index++,f.key=[b,y,f.index].join(),f}function K(){const f=this,y=f.stackKey,b=f.yAxis.stacking.stacks,D=f.processedXData,X=f[f.options.stacking+"Stacker"];let te;X&&[y,"-"+y].forEach(q=>{let ce=D.length,fe;for(;ce--;){var we=D[ce];te=f.getStackIndicator(te,we,f.index,q),(fe=(we=b[q]&&b[q][we])&&we.points[te.key])&&X.call(f,fe,we,ce)}})}function I(f,y,b){y=y.total?100/y.total:0,f[0]=G(f[0]*y),f[1]=G(f[1]*y),this.stackedYData[b]=f[1]}function O(){const f=this.yAxis.stacking;this.options.centerInCategory&&(this.is("column")||this.is("columnrange"))&&!this.options.stacking&&1<this.chart.series.length?S.setStackedPoints.call(this,"group"):f&&F(f.stacks,(y,b)=>{b.slice(-5)==="group"&&(F(y,D=>D.destroy()),delete f.stacks[b])})}function $(f){var y=this.chart;const b=f||this.options.stacking;if(b&&(this.visible===!0||y.options.chart.ignoreHiddenSeries===!1)){var D=this.processedXData,X=this.processedYData,te=[],q=X.length,ce=this.options,fe=ce.threshold,we=H(ce.startFromThreshold&&fe,0);ce=ce.stack,f=f?`${this.type},${b}`:this.stackKey;var Z="-"+f,se=this.negStacks;y=b==="group"?y.yAxis[0]:this.yAxis;var ue=y.stacking.stacks,ye=y.stacking.oldStacks,Pe,ae;for(y.stacking.stacksTouched+=1,ae=0;ae<q;ae++){var xe=D[ae],ve=X[ae],le=this.getStackIndicator(le,xe,this.index),me=le.key,be=(Pe=se&&ve<(we?0:fe))?Z:f;ue[be]||(ue[be]={}),ue[be][xe]||(ye[be]&&ye[be][xe]?(ue[be][xe]=ye[be][xe],ue[be][xe].total=null):ue[be][xe]=new n(y,y.options.stackLabels,!!Pe,xe,ce)),be=ue[be][xe],ve!==null?(be.points[me]=be.points[this.index]=[H(be.cumulative,we)],U(be.cumulative)||(be.base=me),be.touched=y.stacking.stacksTouched,0<le.index&&this.singleStacks===!1&&(be.points[me][0]=be.points[this.index+","+xe+",0"][0])):be.points[me]=be.points[this.index]=null,b==="percent"?(Pe=Pe?f:Z,se&&ue[Pe]&&ue[Pe][xe]?(Pe=ue[Pe][xe],be.total=Pe.total=Math.max(Pe.total,be.total)+Math.abs(ve)||0):be.total=G(be.total+(Math.abs(ve)||0))):b==="group"?(J(ve)&&(ve=ve[0]),ve!==null&&(be.total=(be.total||0)+1)):be.total=G(be.total+(ve||0)),be.cumulative=b==="group"?(be.total||1)-1:G(H(be.cumulative,we)+(ve||0)),ve!==null&&(be.points[me].push(be.cumulative),te[ae]=be.cumulative,be.hasValidPoints=!0)}b==="percent"&&(y.stacking.usePercentage=!0),b!=="group"&&(this.stackedYData=te),y.stacking.oldStacks={}}}const{getDeferredAnimation:M}=c,{series:{prototype:S}}=m,{addEvent:k,correctFloat:G,defined:U,destroyObjectProperties:C,fireEvent:ie,isArray:J,isNumber:N,objectEach:F,pick:H}=T;class E{constructor(y){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=y}buildStacks(){const y=this.axis,b=y.series,D=y.options.reversedStacks,X=b.length;let te,q;for(this.usePercentage=!1,q=X;q--;)te=b[D?q:X-q-1],te.setStackedPoints(),te.setGroupedPoints();for(q=0;q<X;q++)b[q].modifyStacks();ie(y,"afterBuildStacks")}cleanStacks(){let y;this.oldStacks&&(y=this.stacks=this.oldStacks),F(y,function(b){F(b,function(D){D.cumulative=D.total})})}resetStacks(){F(this.stacks,y=>{F(y,(b,D)=>{N(b.touched)&&b.touched<this.stacksTouched?(b.destroy(),delete y[D]):(b.total=null,b.cumulative=null)})})}renderStackTotals(){var y=this.axis;const b=y.chart,D=b.renderer,X=this.stacks;y=M(b,y.options.stackLabels&&y.options.stackLabels.animation||!1);const te=this.stackTotalGroup=this.stackTotalGroup||D.g("stack-labels").attr({zIndex:6,opacity:0}).add();te.translate(b.plotLeft,b.plotTop),F(X,function(q){F(q,function(ce){ce.render(te)})}),te.animate({opacity:1},y)}}var L;return function(f){const y=[];f.compose=function(b,D,X){T.pushUnique(y,b)&&(k(b,"init",z),k(b,"destroy",Q)),T.pushUnique(y,D)&&(D.prototype.getStacks=V),T.pushUnique(y,X)&&(b=X.prototype,b.getStackIndicator=W,b.modifyStacks=K,b.percentStacker=I,b.setGroupedPoints=O,b.setStackedPoints=$)}}(L||(L={})),L}),r(l,"Series/Line/LineSeries.js",[l["Core/Series/Series.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d,m){const{defined:n,merge:T}=m;class V extends c{constructor(){super(...arguments),this.points=this.options=this.data=void 0}drawGraph(){const z=this,W=this.options,K=(this.gappedPath||this.getGraphPath).call(this),I=this.chart.styledMode;let O=[["graph","highcharts-graph"]];I||O[0].push(W.lineColor||this.color||"#cccccc",W.dashStyle),O=z.getZonesGraphs(O),O.forEach(function($,M){var S=$[0];let k=z[S];const G=k?"animate":"attr";k?(k.endX=z.preventGraphAnimation?null:K.xMap,k.animate({d:K})):K.length&&(z[S]=k=z.chart.renderer.path(K).addClass($[1]).attr({zIndex:1}).add(z.group)),k&&!I&&(S={stroke:$[2],"stroke-width":W.lineWidth||0,fill:z.fillGraph&&z.color||"none"},$[3]?S.dashstyle=$[3]:W.linecap!=="square"&&(S["stroke-linecap"]=S["stroke-linejoin"]="round"),k[G](S).shadow(2>M&&W.shadow)),k&&(k.startX=K.xMap,k.isArea=K.isArea)})}getGraphPath(z,W,K){const I=this,O=I.options,$=[],M=[];let S,k=O.step;z=z||I.points;const G=z.reversed;return G&&z.reverse(),(k={right:1,center:2}[k]||k&&3)&&G&&(k=4-k),z=this.getValidPoints(z,!1,!(O.connectNulls&&!W&&!K)),z.forEach(function(U,C){const ie=U.plotX,J=U.plotY,N=z[C-1],F=U.isNull||typeof J!="number";(U.leftCliff||N&&N.rightCliff)&&!K&&(S=!0),F&&!n(W)&&0<C?S=!O.connectNulls:F&&!W?S=!0:(C===0||S?C=[["M",U.plotX,U.plotY]]:I.getPointSpline?C=[I.getPointSpline(z,U,C)]:k?(C=k===1?[["L",N.plotX,J]]:k===2?[["L",(N.plotX+ie)/2,N.plotY],["L",(N.plotX+ie)/2,J]]:[["L",ie,N.plotY]],C.push(["L",ie,J])):C=[["L",ie,J]],M.push(U.x),k&&(M.push(U.x),k===2&&M.push(U.x)),$.push.apply($,C),S=!1)}),$.xMap=M,I.graphPath=$}getZonesGraphs(z){return this.zones.forEach(function(W,K){K=["zone-graph-"+K,"highcharts-graph highcharts-zone-graph-"+K+" "+(W.className||"")],this.chart.styledMode||K.push(W.color||this.color,W.dashStyle||this.options.dashStyle),z.push(K)},this),z}}return V.defaultOptions=T(c.defaultOptions,{legendSymbol:"lineMarker"}),d.registerSeriesType("line",V),V}),r(l,"Series/Area/AreaSeries.js",[l["Core/Color/Color.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d,m){const{parse:n}=c,{seriesTypes:{line:T}}=d,{extend:V,merge:Q,objectEach:z,pick:W}=m;class K extends T{constructor(){super(...arguments),this.points=this.options=this.data=void 0}drawGraph(){this.areaPath=[],super.drawGraph.apply(this);const O=this,$=this.areaPath,M=this.options,S=[["area","highcharts-area",this.color,M.fillColor]];this.zones.forEach(function(k,G){S.push(["zone-area-"+G,"highcharts-area highcharts-zone-area-"+G+" "+k.className,k.color||O.color,k.fillColor||M.fillColor])}),S.forEach(function(k){const G=k[0],U={};let C=O[G];const ie=C?"animate":"attr";C?(C.endX=O.preventGraphAnimation?null:$.xMap,C.animate({d:$})):(U.zIndex=0,C=O[G]=O.chart.renderer.path($).addClass(k[1]).add(O.group),C.isArea=!0),O.chart.styledMode||(U.fill=W(k[3],n(k[2]).setOpacity(W(M.fillOpacity,.75)).get())),C[ie](U),C.startX=$.xMap,C.shiftUnit=M.step?2:1})}getGraphPath(O){var $=T.prototype.getGraphPath,M=this.options;const S=M.stacking,k=this.yAxis,G=[],U=[],C=this.index,ie=k.stacking.stacks[this.stackKey],J=M.threshold,N=Math.round(k.getThreshold(M.threshold));M=W(M.connectNulls,S==="percent");var F=function(f,y,b){var D=O[f];f=S&&ie[D.x].points[C];const X=D[b+"Null"]||0;b=D[b+"Cliff"]||0;let te,q;D=!0,b||X?(te=(X?f[0]:f[1])+b,q=f[0]+b,D=!!X):!S&&O[y]&&O[y].isNull&&(te=q=J),typeof te<"u"&&(U.push({plotX:H,plotY:te===null?N:k.getThreshold(te),isNull:D,isCliff:!0}),G.push({plotX:H,plotY:q===null?N:k.getThreshold(q),doCurve:!1}))};let H;O=O||this.points,S&&(O=this.getStackPoints(O));for(let f=0,y=O.length;f<y;++f){S||(O[f].leftCliff=O[f].rightCliff=O[f].leftNull=O[f].rightNull=void 0);var E=O[f].isNull;H=W(O[f].rectPlotX,O[f].plotX);var L=S?W(O[f].yBottom,N):N;(!E||M)&&(M||F(f,f-1,"left"),E&&!S&&M||(U.push(O[f]),G.push({x:f,plotX:H,plotY:L})),M||F(f,f+1,"right"))}return F=$.call(this,U,!0,!0),G.reversed=!0,E=$.call(this,G,!0,!0),(L=E[0])&&L[0]==="M"&&(E[0]=["L",L[1],L[2]]),E=F.concat(E),E.length&&E.push(["Z"]),$=$.call(this,U,!1,M),E.xMap=F.xMap,this.areaPath=E,$}getStackPoints(O){const $=this,M=[],S=[],k=this.xAxis,G=this.yAxis,U=G.stacking.stacks[this.stackKey],C={},ie=G.series,J=ie.length,N=G.options.reversedStacks?1:-1,F=ie.indexOf($);if(O=O||this.points,this.options.stacking){for(let E=0;E<O.length;E++)O[E].leftNull=O[E].rightNull=void 0,C[O[E].x]=O[E];z(U,function(E,L){E.total!==null&&S.push(L)}),S.sort(function(E,L){return E-L});const H=ie.map(E=>E.visible);S.forEach(function(E,L){let f=0,y,b;if(C[E]&&!C[E].isNull)M.push(C[E]),[-1,1].forEach(function(D){const X=D===1?"rightNull":"leftNull",te=U[S[L+D]];let q=0;if(te){let ce=F;for(;0<=ce&&ce<J;){const fe=ie[ce].index;y=te.points[fe],y||(fe===$.index?C[E][X]=!0:H[ce]&&(b=U[E].points[fe])&&(q-=b[1]-b[0])),ce+=N}}C[E][D===1?"rightCliff":"leftCliff"]=q});else{let D=F;for(;0<=D&&D<J;){if(y=U[E].points[ie[D].index]){f=y[1];break}D+=N}f=W(f,0),f=G.translate(f,0,1,0,1),M.push({isNull:!0,plotX:k.translate(E,0,0,0,1),x:E,plotY:f,yBottom:f})}})}return M}}return K.defaultOptions=Q(T.defaultOptions,{threshold:0,legendSymbol:"rectangle"}),V(K.prototype,{singleStacks:!1}),d.registerSeriesType("area",K),K}),r(l,"Series/Spline/SplineSeries.js",[l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d){const{line:m}=c.seriesTypes,{merge:n,pick:T}=d;class V extends m{constructor(){super(...arguments),this.points=this.options=this.data=void 0}getPointSpline(z,W,K){const I=W.plotX||0,O=W.plotY||0,$=z[K-1];K=z[K+1];let M,S,k;if($&&!$.isNull&&$.doCurve!==!1&&!W.isCliff&&K&&!K.isNull&&K.doCurve!==!1&&!W.isCliff){z=$.plotY||0;var G=K.plotX||0;K=K.plotY||0;let U=0;M=(1.5*I+($.plotX||0))/2.5,S=(1.5*O+z)/2.5,G=(1.5*I+G)/2.5,k=(1.5*O+K)/2.5,G!==M&&(U=(k-S)*(G-I)/(G-M)+O-k),S+=U,k+=U,S>z&&S>O?(S=Math.max(z,O),k=2*O-S):S<z&&S<O&&(S=Math.min(z,O),k=2*O-S),k>K&&k>O?(k=Math.max(K,O),S=2*O-k):k<K&&k<O&&(k=Math.min(K,O),S=2*O-k),W.rightContX=G,W.rightContY=k}return W=["C",T($.rightContX,$.plotX,0),T($.rightContY,$.plotY,0),T(M,I,0),T(S,O,0),I,O],$.rightContX=$.rightContY=void 0,W}}return V.defaultOptions=n(m.defaultOptions),c.registerSeriesType("spline",V),V}),r(l,"Series/AreaSpline/AreaSplineSeries.js",[l["Series/Spline/SplineSeries.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d,m){const{area:n,area:{prototype:T}}=d.seriesTypes,{extend:V,merge:Q}=m;class z extends c{constructor(){super(...arguments),this.options=this.points=this.data=void 0}}return z.defaultOptions=Q(c.defaultOptions,n.defaultOptions),V(z.prototype,{getGraphPath:T.getGraphPath,getStackPoints:T.getStackPoints,drawGraph:T.drawGraph}),d.registerSeriesType("areaspline",z),z}),r(l,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),r(l,"Series/Column/ColumnSeries.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/Color/Color.js"],l["Series/Column/ColumnSeriesDefaults.js"],l["Core/Globals.js"],l["Core/Series/Series.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d,m,n,T,V,Q){const{animObject:z}=c,{parse:W}=d,{hasTouch:K,noop:I}=n,{clamp:O,defined:$,extend:M,fireEvent:S,isArray:k,isNumber:G,merge:U,pick:C,objectEach:ie}=Q;class J extends T{constructor(){super(...arguments),this.points=this.options=this.group=this.data=this.borderWidth=void 0}animate(F){const H=this,E=this.yAxis,L=E.pos,f=H.options,y=this.chart.inverted,b={},D=y?"translateX":"translateY";let X;F?(b.scaleY=.001,F=O(E.toPixels(f.threshold),L,L+E.len),y?b.translateX=F-E.len:b.translateY=F,H.clipBox&&H.setClip(),H.group.attr(b)):(X=Number(H.group.attr(D)),H.group.animate({scaleY:1},M(z(H.options.animation),{step:function(te,q){H.group&&(b[D]=X+q.pos*(L-X),H.group.attr(b))}})))}init(F,H){super.init.apply(this,arguments);const E=this;F=E.chart,F.hasRendered&&F.series.forEach(function(L){L.type===E.type&&(L.isDirty=!0)})}getColumnMetrics(){const F=this;var H=F.options;const E=F.xAxis,L=F.yAxis;var f=E.options.reversedStacks;f=E.reversed&&!f||!E.reversed&&f;const y={};let b,D=0;H.grouping===!1?D=1:F.chart.series.forEach(function(ce){const fe=ce.yAxis,we=ce.options;let Z;ce.type!==F.type||!ce.visible&&F.chart.options.chart.ignoreHiddenSeries||L.len!==fe.len||L.pos!==fe.pos||(we.stacking&&we.stacking!=="group"?(b=ce.stackKey,typeof y[b]>"u"&&(y[b]=D++),Z=y[b]):we.grouping!==!1&&(Z=D++),ce.columnIndex=Z)});const X=Math.min(Math.abs(E.transA)*(E.ordinal&&E.ordinal.slope||H.pointRange||E.closestPointRange||E.tickInterval||1),E.len),te=X*H.groupPadding,q=(X-2*te)/(D||1);return H=Math.min(H.maxPointWidth||E.len,C(H.pointWidth,q*(1-2*H.pointPadding))),F.columnMetrics={width:H,offset:(q-H)/2+(te+((F.columnIndex||0)+(f?1:0))*q-X/2)*(f?-1:1),paddedWidth:q,columnCount:D},F.columnMetrics}crispCol(F,H,E,L){var f=this.borderWidth,y=-(f%2?.5:0);return f=f%2?.5:1,this.options.crisp&&(E=Math.round(F+E)+y,F=Math.round(F)+y,E-=F),L=Math.round(H+L)+f,y=.5>=Math.abs(H)&&.5<L,H=Math.round(H)+f,L-=H,y&&L&&(--H,L+=1),{x:F,y:H,width:E,height:L}}adjustForMissingColumns(F,H,E,L){const f=this.options.stacking;if(!E.isNull&&1<L.columnCount){const y=this.yAxis.options.reversedStacks;let b=0,D=y?0:-L.columnCount;ie(this.yAxis.stacking&&this.yAxis.stacking.stacks,X=>{if(typeof E.x=="number"){const te=X[E.x.toString()];te&&(X=te.points[this.index],f?(X&&(b=D),te.hasValidPoints&&(y?D++:D--)):k(X)&&(X=Object.keys(te.points).filter(q=>!q.match(",")&&te.points[q]&&1<te.points[q].length).map(parseFloat).sort((q,ce)=>ce-q),b=X.indexOf(this.index),D=X.length))}}),F=(E.plotX||0)+((D-1)*L.paddedWidth+H)/2-H-b*L.paddedWidth}return F}translate(){const F=this,H=F.chart,E=F.options;var L=F.dense=2>F.closestPointRange*F.xAxis.transA;L=F.borderWidth=C(E.borderWidth,L?0:1);const f=F.xAxis,y=F.yAxis,b=E.threshold,D=C(E.minPointLength,5),X=F.getColumnMetrics(),te=X.width,q=F.pointXOffset=X.offset,ce=F.dataMin,fe=F.dataMax;let we=F.barW=Math.max(te,1+2*L),Z=F.translatedThreshold=y.getThreshold(b);H.inverted&&(Z-=.5),E.pointPadding&&(we=Math.ceil(we)),T.prototype.translate.apply(F),F.points.forEach(function(se){const ue=C(se.yBottom,Z);var ye=999+Math.abs(ue),Pe=se.plotX||0;ye=O(se.plotY,-ye,y.len+ye);let ae=Math.min(ye,ue),xe=Math.max(ye,ue)-ae,ve=te,le=Pe+q,me=we;D&&Math.abs(xe)<D&&(xe=D,Pe=!y.reversed&&!se.negative||y.reversed&&se.negative,G(b)&&G(fe)&&se.y===b&&fe<=b&&(y.min||0)<b&&(ce!==fe||(y.max||0)<=b)&&(Pe=!Pe),ae=Math.abs(ae-Z)>D?ue-D:Z-(Pe?D:0)),$(se.options.pointWidth)&&(ve=me=Math.ceil(se.options.pointWidth),le-=Math.round((ve-te)/2)),E.centerInCategory&&(le=F.adjustForMissingColumns(le,ve,se,X)),se.barX=le,se.pointWidth=ve,se.tooltipPos=H.inverted?[O(y.len+y.pos-H.plotLeft-ye,y.pos-H.plotLeft,y.len+y.pos-H.plotLeft),f.len+f.pos-H.plotTop-le-me/2,xe]:[f.left-H.plotLeft+le+me/2,O(ye+y.pos-H.plotTop,y.pos-H.plotTop,y.len+y.pos-H.plotTop),xe],se.shapeType=F.pointClass.prototype.shapeType||"roundedRect",se.shapeArgs=F.crispCol(le,se.isNull?Z:ae,me,se.isNull?0:xe)}),S(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(F,H){const E=this.options;var L=this.pointAttrToOptions||{},f=L.stroke||"borderColor";const y=L["stroke-width"]||"borderWidth";let b,D=F&&F.color||this.color,X=F&&F[f]||E[f]||D;L=F&&F.options.dashStyle||E.dashStyle;let te=F&&F[y]||E[y]||this[y]||0,q=C(F&&F.opacity,E.opacity,1);return F&&this.zones.length&&(b=F.getZone(),D=F.options.color||b&&(b.color||F.nonZonedColor)||this.color,b&&(X=b.borderColor||X,L=b.dashStyle||L,te=b.borderWidth||te)),H&&F&&(F=U(E.states[H],F.options.states&&F.options.states[H]||{}),H=F.brightness,D=F.color||typeof H<"u"&&W(D).brighten(F.brightness).get()||D,X=F[f]||X,te=F[y]||te,L=F.dashStyle||L,q=C(F.opacity,q)),f={fill:D,stroke:X,"stroke-width":te,opacity:q},L&&(f.dashstyle=L),f}drawPoints(F=this.points){const H=this,E=this.chart,L=H.options,f=E.renderer,y=L.animationLimit||250;let b;F.forEach(function(D){let X=D.graphic,te=!!X,q=X&&E.pointCount<y?"animate":"attr";G(D.plotY)&&D.y!==null?(b=D.shapeArgs,X&&D.hasNewShapeType()&&(X=X.destroy()),H.enabledDataSorting&&(D.startXPos=H.xAxis.reversed?-(b&&b.width||0):H.xAxis.width),X||(D.graphic=X=f[D.shapeType](b).add(D.group||H.group))&&H.enabledDataSorting&&E.hasRendered&&E.pointCount<y&&(X.attr({x:D.startXPos}),te=!0,q="animate"),X&&te&&X[q](U(b)),E.styledMode||X[q](H.pointAttribs(D,D.selected&&"select")).shadow(D.allowShadow!==!1&&L.shadow),X&&(X.addClass(D.getClassName(),!0),X.attr({visibility:D.visible?"inherit":"hidden"}))):X&&(D.graphic=X.destroy())})}drawTracker(F=this.points){const H=this,E=H.chart,L=E.pointer,f=function(b){const D=L.getPointFromEvent(b);typeof D<"u"&&(L.isDirectTouch=!0,D.onMouseOver(b))};let y;F.forEach(function(b){y=k(b.dataLabels)?b.dataLabels:b.dataLabel?[b.dataLabel]:[],b.graphic&&(b.graphic.element.point=b),y.forEach(function(D){D.div?D.div.point=b:D.element.point=b})}),H._hasTracking||(H.trackerGroups.forEach(function(b){H[b]&&(H[b].addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(D){L.onTrackerMouseOut(D)}),K&&H[b].on("touchstart",f),!E.styledMode&&H.options.cursor&&H[b].css({cursor:H.options.cursor}))}),H._hasTracking=!0),S(this,"afterDrawTracker")}remove(){const F=this,H=F.chart;H.hasRendered&&H.series.forEach(function(E){E.type===F.type&&(E.isDirty=!0)}),T.prototype.remove.apply(F,arguments)}}return J.defaultOptions=U(T.defaultOptions,m),M(J.prototype,{cropShoulder:0,directTouch:!0,getSymbol:I,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),V.registerSeriesType("column",J),J}),r(l,"Core/Series/DataLabel.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/FormatUtilities.js"],l["Core/Utilities.js"]],function(c,d,m){const{getDeferredAnimation:n}=c,{format:T}=d,{defined:V,extend:Q,fireEvent:z,isArray:W,isString:K,merge:I,objectEach:O,pick:$,splat:M}=m;var S;return function(k){function G(L,f,y,b,D){const X=this.chart;var te=this.isCartesian&&X.inverted;const q=this.enabledDataSorting;var ce=L.plotX,fe=L.plotY;const we=y.rotation;var Z=y.align;fe=V(ce)&&V(fe)&&X.isInsidePlot(ce,Math.round(fe),{inverted:te,paneCoordinates:!0,series:this});let se=$(y.overflow,q?"none":"justify")==="justify";if(te=this.visible&&L.visible!==!1&&V(ce)&&(L.series.forceDL||q&&!se||fe||$(y.inside,!!this.options.stacking)&&b&&X.isInsidePlot(ce,te?b.x+1:b.y+b.height-1,{inverted:te,paneCoordinates:!0,series:this})),ce=L.pos(),te&&ce){we&&f.attr({align:Z}),Z=f.getBBox(!0);var ue=[0,0],ye=X.renderer.fontMetrics(f).b;if(b=Q({x:ce[0],y:Math.round(ce[1]),width:0,height:0},b),Q(y,{width:Z.width,height:Z.height}),we?(se=!1,ue=X.renderer.rotCorr(ye,we),ye={x:b.x+(y.x||0)+b.width/2+ue.x,y:b.y+(y.y||0)+{top:0,middle:.5,bottom:1}[y.verticalAlign]*b.height},ue=[Z.x-Number(f.attr("x")),Z.y-Number(f.attr("y"))],q&&this.xAxis&&!se&&this.setDataLabelStartPos(L,f,D,fe,ye),f[D?"attr":"animate"](ye)):(q&&this.xAxis&&!se&&this.setDataLabelStartPos(L,f,D,fe,b),f.align(y,void 0,b),ye=f.alignAttr),se&&0<=b.height)this.justifyDataLabel(f,y,ye,Z,b,D);else if($(y.crop,!0)){let{x:Pe,y:ae}=ye;Pe+=ue[0],ae+=ue[1],te=X.isInsidePlot(Pe,ae,{paneCoordinates:!0,series:this})&&X.isInsidePlot(Pe+Z.width,ae+Z.height,{paneCoordinates:!0,series:this})}y.shape&&!we&&f[D?"attr":"animate"]({anchorX:ce[0],anchorY:ce[1]})}D&&q&&(f.placed=!1),te||q&&!se?f.show():(f.hide(),f.placed=!1)}function U(L,f){var y=f.filter;return y?(f=y.operator,L=L[y.property],y=y.value,f===">"&&L>y||f==="<"&&L<y||f===">="&&L>=y||f==="<="&&L<=y||f==="=="&&L==y||f==="==="&&L===y):!0}function C(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function ie(L){const f=this.hasRendered||0,y=this.initDataLabelsGroup().attr({opacity:+f});return!f&&y&&(this.visible&&y.show(),this.options.animation?y.animate({opacity:1},L):y.attr({opacity:1})),y}function J(L=this.points){const f=this,y=f.chart,b=f.options,D=y.renderer,{backgroundColor:X,plotBackgroundColor:te}=y.options.chart,q=D.getContrast(K(te)&&te||K(X)&&X||"#000000");let ce=b.dataLabels,fe,we;var Z=M(ce)[0];const se=Z.animation;Z=Z.defer?n(y,se,f):{defer:0,duration:0},ce=F(F(y.options.plotOptions&&y.options.plotOptions.series&&y.options.plotOptions.series.dataLabels,y.options.plotOptions&&y.options.plotOptions[f.type]&&y.options.plotOptions[f.type].dataLabels),ce),z(this,"drawDataLabels"),(W(ce)||ce.enabled||f._hasPointLabels)&&(we=this.initDataLabels(Z),L.forEach(ue=>{fe=M(F(ce,ue.dlOptions||ue.options&&ue.options.dataLabels)),fe.forEach((ye,Pe)=>{const ae=ye.enabled&&(!ue.isNull||ue.dataLabelOnNull)&&U(ue,ye),xe=ue.connectors?ue.connectors[Pe]:ue.connector;let ve,le,me=ue.dataLabels?ue.dataLabels[Pe]:ue.dataLabel,be=!me;const Le=$(ye.distance,ue.labelDistance);if(ae){var De=ue.getLabelConfig(),Ne=$(ye[ue.formatPrefix+"Format"],ye.format);if(De=V(Ne)?T(Ne,De,y):(ye[ue.formatPrefix+"Formatter"]||ye.formatter).call(De,ye),Ne=ye.style,ve=ye.rotation,y.styledMode||(Ne.color=$(ye.color,Ne.color,f.color,"#000000"),Ne.color==="contrast"?(ue.contrastColor=D.getContrast(ue.color||f.color),Ne.color=!V(Le)&&ye.inside||0>Le||b.stacking?ue.contrastColor:q):delete ue.contrastColor,b.cursor&&(Ne.cursor=b.cursor)),le={r:ye.borderRadius||0,rotation:ve,padding:ye.padding,zIndex:1},!y.styledMode){const{backgroundColor:st,borderColor:it}=ye;le.fill=st==="auto"?ue.color:st,le.stroke=it==="auto"?ue.color:it,le["stroke-width"]=ye.borderWidth}O(le,function(st,it){typeof st>"u"&&delete le[it]})}!me||ae&&V(De)&&!!me.div==!!ye.useHTML&&(me.rotation&&ye.rotation||me.rotation===ye.rotation)||(be=!0,ue.dataLabel=me=ue.dataLabel&&ue.dataLabel.destroy(),ue.dataLabels&&(ue.dataLabels.length===1?delete ue.dataLabels:delete ue.dataLabels[Pe]),Pe||delete ue.dataLabel,xe&&(ue.connector=ue.connector.destroy(),ue.connectors&&(ue.connectors.length===1?delete ue.connectors:delete ue.connectors[Pe]))),ae&&V(De)?(me?le.text=De:(ue.dataLabels=ue.dataLabels||[],me=ue.dataLabels[Pe]=ve?D.text(De,0,0,ye.useHTML).addClass("highcharts-data-label"):D.label(De,0,0,ye.shape,null,null,ye.useHTML,null,"data-label"),Pe||(ue.dataLabel=me),me.addClass(" highcharts-data-label-color-"+ue.colorIndex+" "+(ye.className||"")+(ye.useHTML?" highcharts-tracker":""))),me.options=ye,me.attr(le),y.styledMode||me.css(Ne).shadow(ye.shadow),(Pe=ye[ue.formatPrefix+"TextPath"]||ye.textPath)&&!ye.useHTML&&(me.setTextPath(ue.getDataLabelPath&&ue.getDataLabelPath(me)||ue.graphic,Pe),ue.dataLabelPath&&!Pe.enabled&&(ue.dataLabelPath=ue.dataLabelPath.destroy())),me.added||me.add(we),f.alignDataLabel(ue,me,ye,null,be)):me&&me.hide()})})),z(this,"afterDrawDataLabels")}function N(L,f,y,b,D,X){const te=this.chart,q=f.align,ce=f.verticalAlign,fe=L.box?0:L.padding||0;let{x:we=0,y:Z=0}=f,se,ue;return se=(y.x||0)+fe,0>se&&(q==="right"&&0<=we?(f.align="left",f.inside=!0):we-=se,ue=!0),se=(y.x||0)+b.width-fe,se>te.plotWidth&&(q==="left"&&0>=we?(f.align="right",f.inside=!0):we+=te.plotWidth-se,ue=!0),se=y.y+fe,0>se&&(ce==="bottom"&&0<=Z?(f.verticalAlign="top",f.inside=!0):Z-=se,ue=!0),se=(y.y||0)+b.height-fe,se>te.plotHeight&&(ce==="top"&&0>=Z?(f.verticalAlign="bottom",f.inside=!0):Z+=te.plotHeight-se,ue=!0),ue&&(f.x=we,f.y=Z,L.placed=!X,L.align(f,void 0,D)),ue}function F(L,f){let y=[],b;if(W(L)&&!W(f))y=L.map(function(D){return I(D,f)});else if(W(f)&&!W(L))y=f.map(function(D){return I(L,D)});else if(W(L)||W(f))for(b=Math.max(L.length,f.length);b--;)y[b]=I(L[b],f[b]);else y=I(L,f);return y}function H(L,f,y,b,D){const X=this.chart,te=X.inverted,q=this.xAxis,ce=q.reversed,fe=te?f.height/2:f.width/2;L=(L=L.pointWidth)?L/2:0,f.startXPos=te?D.x:ce?-fe-L:q.width-fe+L,f.startYPos=te?ce?this.yAxis.height-fe+L:-fe-L:D.y,b?f.visibility==="hidden"&&(f.show(),f.attr({opacity:0}).animate({opacity:1})):f.attr({opacity:1}).animate({opacity:0},void 0,f.hide),X.hasRendered&&(y&&f.attr({x:f.startXPos,y:f.startYPos}),f.placed=!0)}const E=[];k.compose=function(L){m.pushUnique(E,L)&&(L=L.prototype,L.initDataLabelsGroup=C,L.initDataLabels=ie,L.alignDataLabel=G,L.drawDataLabels=J,L.justifyDataLabel=N,L.setDataLabelStartPos=H)}}(S||(S={})),S}),r(l,"Series/Column/ColumnDataLabel.js",[l["Core/Series/DataLabel.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d,m){const{series:n}=d,{merge:T,pick:V}=m;var Q;return function(z){function W(I,O,$,M,S){let k=this.chart.inverted;var G=I.series;let U=(G.xAxis?G.xAxis.len:this.chart.plotSizeX)||0;G=(G.yAxis?G.yAxis.len:this.chart.plotSizeY)||0;var C=I.dlBox||I.shapeArgs;let ie=V(I.below,I.plotY>V(this.translatedThreshold,G)),J=V($.inside,!!this.options.stacking);C&&(M=T(C),0>M.y&&(M.height+=M.y,M.y=0),C=M.y+M.height-G,0<C&&C<M.height&&(M.height-=C),k&&(M={x:G-M.y-M.height,y:U-M.x-M.width,width:M.height,height:M.width}),J||(k?(M.x+=ie?0:M.width,M.width=0):(M.y+=ie?M.height:0,M.height=0))),$.align=V($.align,!k||J?"center":ie?"right":"left"),$.verticalAlign=V($.verticalAlign,k||J?"middle":ie?"top":"bottom"),n.prototype.alignDataLabel.call(this,I,O,$,M,S),$.inside&&I.contrastColor&&O.css({color:I.contrastColor})}const K=[];z.compose=function(I){c.compose(n),m.pushUnique(K,I)&&(I.prototype.alignDataLabel=W)}}(Q||(Q={})),Q}),r(l,"Series/Bar/BarSeries.js",[l["Series/Column/ColumnSeries.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d,m){const{extend:n,merge:T}=m;class V extends c{constructor(){super(...arguments),this.points=this.options=this.data=void 0}}return V.defaultOptions=T(c.defaultOptions,{}),n(V.prototype,{inverted:!0}),d.registerSeriesType("bar",V),V}),r(l,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),r(l,"Series/Scatter/ScatterSeries.js",[l["Series/Scatter/ScatterSeriesDefaults.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d,m){const{column:n,line:T}=d.seriesTypes,{addEvent:V,extend:Q,merge:z}=m;class W extends T{constructor(){super(...arguments),this.points=this.options=this.data=void 0}applyJitter(){const I=this,O=this.options.jitter,$=this.points.length;O&&this.points.forEach(function(M,S){["x","y"].forEach(function(k,G){let U="plot"+k.toUpperCase(),C,ie;if(O[k]&&!M.isNull){var J=I[k+"Axis"];ie=O[k]*J.transA,J&&!J.isLog&&(C=Math.max(0,M[U]-ie),J=Math.min(J.len,M[U]+ie),G=1e4*Math.sin(S+G*$),G-=Math.floor(G),M[U]=C+(J-C)*G,k==="x"&&(M.clientX=M.plotX))}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return W.defaultOptions=z(T.defaultOptions,c),Q(W.prototype,{drawTracker:n.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1}),V(W,"afterTranslate",function(){this.applyJitter()}),d.registerSeriesType("scatter",W),W}),r(l,"Series/CenteredUtilities.js",[l["Core/Globals.js"],l["Core/Series/Series.js"],l["Core/Utilities.js"]],function(c,d,m){const{deg2rad:n}=c,{fireEvent:T,isNumber:V,pick:Q,relativeLength:z}=m;var W;return function(K){K.getCenter=function(){var I=this.options,O=this.chart;const $=2*(I.slicedOffset||0),M=O.plotWidth-2*$,S=O.plotHeight-2*$;var k=I.center;const G=Math.min(M,S),U=I.thickness;var C=I.size;let ie=I.innerSize||0;for(typeof C=="string"&&(C=parseFloat(C)),typeof ie=="string"&&(ie=parseFloat(ie)),I=[Q(k[0],"50%"),Q(k[1],"50%"),Q(C&&0>C?void 0:I.size,"100%"),Q(ie&&0>ie?void 0:I.innerSize||0,"0%")],!O.angular||this instanceof d||(I[3]=0),k=0;4>k;++k)C=I[k],O=2>k||k===2&&/%$/.test(C),I[k]=z(C,[M,S,G,I[2]][k])+(O?$:0);return I[3]>I[2]&&(I[3]=I[2]),V(U)&&2*U<I[2]&&0<U&&(I[3]=I[2]-2*U),T(this,"afterGetCenter",{positions:I}),I},K.getStartAndEndRadians=function(I,O){return I=V(I)?I:0,O=V(O)&&O>I&&360>O-I?O:I+360,{start:n*(I+-90),end:n*(O+-90)}}}(W||(W={})),W}),r(l,"Series/Pie/PiePoint.js",[l["Core/Animation/AnimationUtilities.js"],l["Core/Series/Point.js"],l["Core/Utilities.js"]],function(c,d,m){const{setAnimation:n}=c,{addEvent:T,defined:V,extend:Q,isNumber:z,pick:W,relativeLength:K}=m;class I extends d{constructor(){super(...arguments),this.series=this.options=this.labelDistance=void 0}getConnectorPath(){const $=this.labelPosition,M=this.series.options.dataLabels,S=this.connectorShapes;let k=M.connectorShape;return S[k]&&(k=S[k]),k.call(this,{x:$.computed.x,y:$.computed.y,alignment:$.alignment},$.connectorPosition,M)}getTranslate(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}}haloPath($){const M=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(M.x,M.y,M.r+$,M.r+$,{innerR:M.r-1,start:M.start,end:M.end,borderRadius:M.borderRadius})}init(){super.init.apply(this,arguments),this.name=W(this.name,"Slice");const $=M=>{this.slice(M.type==="select")};return T(this,"select",$),T(this,"unselect",$),this}isValid(){return z(this.y)&&0<=this.y}setVisible($,M){const S=this.series,k=S.chart,G=S.options.ignoreHiddenPoint;M=W(M,G),$!==this.visible&&(this.visible=this.options.visible=$=typeof $>"u"?!this.visible:$,S.options.data[S.data.indexOf(this)]=this.options,["graphic","dataLabel","connector"].forEach(U=>{this[U]&&this[U][$?"show":"hide"]($)}),this.legendItem&&k.legend.colorizeItem(this,$),$||this.state!=="hover"||this.setState(""),G&&(S.isDirty=!0),M&&k.redraw())}slice($,M,S){const k=this.series;n(S,k.chart),W(M,!0),this.sliced=this.options.sliced=V($)?$:!this.sliced,k.options.data[k.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return Q(I.prototype,{connectorShapes:{fixedOffset:function(O,$,M){const S=$.breakAt;return $=$.touchingSliceAt,[["M",O.x,O.y],M.softConnector?["C",O.x+(O.alignment==="left"?-5:5),O.y,2*S.x-$.x,2*S.y-$.y,S.x,S.y]:["L",S.x,S.y],["L",$.x,$.y]]},straight:function(O,$){return $=$.touchingSliceAt,[["M",O.x,O.y],["L",$.x,$.y]]},crookedLine:function(O,$,M){const{breakAt:S,touchingSliceAt:k}=$;({series:$}=this);const[G,U,C]=$.center,ie=C/2,J=$.chart.plotWidth,N=$.chart.plotLeft;$=O.alignment==="left";const{x:F,y:H}=O;return M.crookDistance?(O=K(M.crookDistance,1),O=$?G+ie+(J+N-G-ie)*(1-O):N+(G-ie)*O):O=G+(U-H)*Math.tan((this.angle||0)-Math.PI/2),M=[["M",F,H]],($?O<=F&&O>=S.x:O>=F&&O<=S.x)&&M.push(["L",O,H]),M.push(["L",S.x,S.y],["L",k.x,k.y]),M}}}),I}),r(l,"Series/Pie/PieSeriesDefaults.js",[],function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{allowOverlap:!0,connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),r(l,"Series/Pie/PieSeries.js",[l["Series/CenteredUtilities.js"],l["Series/Column/ColumnSeries.js"],l["Core/Globals.js"],l["Series/Pie/PiePoint.js"],l["Series/Pie/PieSeriesDefaults.js"],l["Core/Series/Series.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Renderer/SVG/Symbols.js"],l["Core/Utilities.js"]],function(c,d,m,n,T,V,Q,z,W){const{getStartAndEndRadians:K}=c;({noop:m}=m);const{clamp:I,extend:O,fireEvent:$,merge:M,pick:S,relativeLength:k}=W;class G extends V{constructor(){super(...arguments),this.points=this.options=this.maxLabelDistance=this.data=this.center=void 0}animate(C){const ie=this,J=ie.points,N=ie.startAngleRad;C||J.forEach(function(F){const H=F.graphic,E=F.shapeArgs;H&&E&&(H.attr({r:S(F.startR,ie.center&&ie.center[3]/2),start:N,end:N}),H.animate({r:E.r,start:E.start,end:E.end},ie.options.animation))})}drawEmpty(){const C=this.startAngleRad,ie=this.endAngleRad,J=this.options;let N,F;this.total===0&&this.center?(N=this.center[0],F=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(N,F,this.center[1]/2,0,C,ie).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:z.arc(N,F,this.center[2]/2,0,{start:C,end:ie,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":J.borderWidth,fill:J.fillColor||"none",stroke:J.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){const C=this.chart.renderer;this.points.forEach(function(ie){ie.graphic&&ie.hasNewShapeType()&&(ie.graphic=ie.graphic.destroy()),ie.graphic||(ie.graphic=C[ie.shapeType](ie.shapeArgs).add(ie.series.group),ie.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(C,ie,J){const N=this.center,F=this.radii?this.radii[J.index]||0:N[2]/2;return C=Math.asin(I((C-N[1])/(F+J.labelDistance),-1,1)),N[0]+(ie?-1:1)*Math.cos(C)*(F+J.labelDistance)+(0<J.labelDistance?(ie?-1:1)*this.options.dataLabels.padding:0)}hasData(){return!!this.processedXData.length}redrawPoints(){const C=this,ie=C.chart;let J,N,F,H;this.drawEmpty(),C.group&&!ie.styledMode&&C.group.shadow(C.options.shadow),C.points.forEach(function(E){const L={};N=E.graphic,!E.isNull&&N?(H=E.shapeArgs,J=E.getTranslate(),ie.styledMode||(F=C.pointAttribs(E,E.selected&&"select")),E.delayedRendering?(N.setRadialReference(C.center).attr(H).attr(J),ie.styledMode||N.attr(F).attr({"stroke-linejoin":"round"}),E.delayedRendering=!1):(N.setRadialReference(C.center),ie.styledMode||M(!0,L,F),M(!0,L,H,J),N.animate(L)),N.attr({visibility:E.visible?"inherit":"hidden"}),N.addClass(E.getClassName(),!0)):N&&(E.graphic=N.destroy())})}sortByAngle(C,ie){C.sort(function(J,N){return typeof J.angle<"u"&&(N.angle-J.angle)*ie})}translate(C){$(this,"translate"),this.generatePoints();var ie=this.options;const J=ie.slicedOffset,N=J+(ie.borderWidth||0);var F=K(ie.startAngle,ie.endAngle);const H=this.startAngleRad=F.start;F=(this.endAngleRad=F.end)-H;const E=this.points,L=ie.dataLabels.distance;ie=ie.ignoreHiddenPoint;const f=E.length;let y,b,D,X=0;for(C||(this.center=C=this.getCenter()),b=0;b<f;b++){D=E[b];var te=H+X*F;!D.isValid()||ie&&!D.visible||(X+=D.percentage/100);var q=H+X*F,ce={x:C[0],y:C[1],r:C[2]/2,innerR:C[3]/2,start:Math.round(1e3*te)/1e3,end:Math.round(1e3*q)/1e3};D.shapeType="arc",D.shapeArgs=ce,D.labelDistance=S(D.options.dataLabels&&D.options.dataLabels.distance,L),D.labelDistance=k(D.labelDistance,ce.r),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,D.labelDistance),q=(q+te)/2,q>1.5*Math.PI?q-=2*Math.PI:q<-Math.PI/2&&(q+=2*Math.PI),D.slicedTranslation={translateX:Math.round(Math.cos(q)*J),translateY:Math.round(Math.sin(q)*J)},ce=Math.cos(q)*C[2]/2,y=Math.sin(q)*C[2]/2,D.tooltipPos=[C[0]+.7*ce,C[1]+.7*y],D.half=q<-Math.PI/2||q>Math.PI/2?1:0,D.angle=q,te=Math.min(N,D.labelDistance/5),D.labelPosition={natural:{x:C[0]+ce+Math.cos(q)*D.labelDistance,y:C[1]+y+Math.sin(q)*D.labelDistance},computed:{},alignment:0>D.labelDistance?"center":D.half?"right":"left",connectorPosition:{breakAt:{x:C[0]+ce+Math.cos(q)*te,y:C[1]+y+Math.sin(q)*te},touchingSliceAt:{x:C[0]+ce,y:C[1]+y}}}}$(this,"afterTranslate")}updateTotals(){const C=this.points,ie=C.length,J=this.options.ignoreHiddenPoint;let N,F,H=0;for(N=0;N<ie;N++)F=C[N],!F.isValid()||J&&!F.visible||(H+=F.y);for(this.total=H,N=0;N<ie;N++)F=C[N],F.percentage=0<H&&(F.visible||!J)?F.y/H*100:0,F.total=H}}return G.defaultOptions=M(V.defaultOptions,T),O(G.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:d.prototype.drawTracker,getCenter:c.getCenter,getSymbol:m,isCartesian:!1,noSharedTooltip:!0,pointAttribs:d.prototype.pointAttribs,pointClass:n,requireSorting:!1,searchPoint:m,trackerGroups:["group","dataLabelsGroup"]}),Q.registerSeriesType("pie",G),G}),r(l,"Series/Pie/PieDataLabel.js",[l["Core/Series/DataLabel.js"],l["Core/Globals.js"],l["Core/Renderer/RendererUtilities.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Utilities.js"]],function(c,d,m,n,T){const{noop:V}=d,{distribute:Q}=m,{series:z}=n,{arrayMax:W,clamp:K,defined:I,merge:O,pick:$,relativeLength:M}=T;var S;return function(k){function G(){const N=this,F=N.data,H=N.chart,E=N.options.dataLabels||{},L=E.connectorPadding,f=H.plotWidth,y=H.plotHeight,b=H.plotLeft,D=Math.round(H.chartWidth/3),X=N.center,te=X[2]/2,q=X[1],ce=[[],[]],fe=[0,0,0,0],we=N.dataLabelPositioners;let Z,se,ue,ye,Pe,ae,xe,ve,le,me,be,Le;N.visible&&(E.enabled||N._hasPointLabels)&&(F.forEach(function(De){De.dataLabel&&De.visible&&De.dataLabel.shortened&&(De.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),De.dataLabel.shortened=!1)}),z.prototype.drawDataLabels.apply(N),F.forEach(function(De){De.dataLabel&&(De.visible?(ce[De.half].push(De),De.dataLabel._pos=null,!I(E.style.width)&&!I(De.options.dataLabels&&De.options.dataLabels.style&&De.options.dataLabels.style.width)&&De.dataLabel.getBBox().width>D&&(De.dataLabel.css({width:Math.round(.7*D)+"px"}),De.dataLabel.shortened=!0)):(De.dataLabel=De.dataLabel.destroy(),De.dataLabels&&De.dataLabels.length===1&&delete De.dataLabels))}),ce.forEach((De,Ne)=>{const st=De.length,it=[];let ht,ke=0;if(st){if(N.sortByAngle(De,Ne-.5),0<N.maxLabelDistance){var Be=Math.max(0,q-te-N.maxLabelDistance);ht=Math.min(q+te+N.maxLabelDistance,H.plotHeight),De.forEach(function(Ue){0<Ue.labelDistance&&Ue.dataLabel&&(Ue.top=Math.max(0,q-te-Ue.labelDistance),Ue.bottom=Math.min(q+te+Ue.labelDistance,H.plotHeight),ke=Ue.dataLabel.getBBox().height||21,Ue.distributeBox={target:Ue.labelPosition.natural.y-Ue.top+ke/2,size:ke,rank:Ue.y},it.push(Ue.distributeBox))}),Be=ht+ke-Be,Q(it,Be,Be/5)}for(be=0;be<st;be++){if(Z=De[be],ae=Z.labelPosition,ye=Z.dataLabel,me=Z.visible===!1?"hidden":"inherit",le=Be=ae.natural.y,it&&I(Z.distributeBox)&&(typeof Z.distributeBox.pos>"u"?me="hidden":(xe=Z.distributeBox.size,le=we.radialDistributionY(Z))),delete Z.positionIndex,E.justify)ve=we.justify(Z,te,X);else switch(E.alignTo){case"connectors":ve=we.alignToConnectors(De,Ne,f,b);break;case"plotEdges":ve=we.alignToPlotEdges(ye,Ne,f,b);break;default:ve=we.radialDistributionX(N,Z,le,Be)}ye._attr={visibility:me,align:ae.alignment},Le=Z.options.dataLabels||{},ye._pos={x:ve+$(Le.x,E.x)+({left:L,right:-L}[ae.alignment]||0),y:le+$(Le.y,E.y)-ye.getBBox().height/2},ae&&(ae.computed.x=ve,ae.computed.y=le),$(E.crop,!0)&&(Pe=ye.getBBox().width,Be=null,ve-Pe<L&&Ne===1?(Be=Math.round(Pe-ve+L),fe[3]=Math.max(Be,fe[3])):ve+Pe>f-L&&Ne===0&&(Be=Math.round(ve+Pe-f+L),fe[1]=Math.max(Be,fe[1])),0>le-xe/2?fe[0]=Math.max(Math.round(-le+xe/2),fe[0]):le+xe/2>y&&(fe[2]=Math.max(Math.round(le+xe/2-y),fe[2])),ye.sideOverflow=Be)}}}),W(fe)===0||this.verifyDataLabelOverflow(fe))&&(this.placeDataLabels(),this.points.forEach(function(De){if(Le=O(E,De.options.dataLabels),se=$(Le.connectorWidth,1)){let Ne;ue=De.connector,(ye=De.dataLabel)&&ye._pos&&De.visible&&0<De.labelDistance?(me=ye._attr.visibility,(Ne=!ue)&&(De.connector=ue=H.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+De.colorIndex+(De.className?" "+De.className:"")).add(N.dataLabelsGroup),H.styledMode||ue.attr({"stroke-width":se,stroke:Le.connectorColor||De.color||"#666666"})),ue[Ne?"attr":"animate"]({d:De.getConnectorPath()}),ue.attr("visibility",me)):ue&&(De.connector=ue.destroy())}}))}function U(){this.points.forEach(function(N){let F=N.dataLabel,H;F&&N.visible&&((H=F._pos)?(F.sideOverflow&&(F._attr.width=Math.max(F.getBBox().width-F.sideOverflow,0),F.css({width:F._attr.width+"px",textOverflow:(this.options.dataLabels.style||{}).textOverflow||"ellipsis"}),F.shortened=!0),F.attr(F._attr),F[F.moved?"animate":"attr"](H),F.moved=!0):F&&F.attr({y:-9999})),delete N.distributeBox},this)}function C(N){let F=this.center,H=this.options,E=H.center,L=H.minSize||80,f,y=H.size!==null;return y||(E[0]!==null?f=Math.max(F[2]-Math.max(N[1],N[3]),L):(f=Math.max(F[2]-N[1]-N[3],L),F[0]+=(N[3]-N[1])/2),E[1]!==null?f=K(f,L,F[2]-Math.max(N[0],N[2])):(f=K(f,L,F[2]-N[0]-N[2]),F[1]+=(N[0]-N[2])/2),f<F[2]?(F[2]=f,F[3]=Math.min(H.thickness?Math.max(0,f-2*H.thickness):Math.max(0,M(H.innerSize||0,f)),f),this.translate(F),this.drawDataLabels&&this.drawDataLabels()):y=!0),y}const ie=[],J={radialDistributionY:function(N){return N.top+N.distributeBox.pos},radialDistributionX:function(N,F,H,E){return N.getX(H<F.top+2||H>F.bottom-2?E:H,F.half,F)},justify:function(N,F,H){return H[0]+(N.half?-1:1)*(F+N.labelDistance)},alignToPlotEdges:function(N,F,H,E){return N=N.getBBox().width,F?N+E:H-N-E},alignToConnectors:function(N,F,H,E){let L=0,f;return N.forEach(function(y){f=y.dataLabel.getBBox().width,f>L&&(L=f)}),F?L+E:H-L-E}};k.compose=function(N){c.compose(z),T.pushUnique(ie,N)&&(N=N.prototype,N.dataLabelPositioners=J,N.alignDataLabel=V,N.drawDataLabels=G,N.placeDataLabels=U,N.verifyDataLabelOverflow=C)}}(S||(S={})),S}),r(l,"Extensions/OverlappingDataLabels.js",[l["Core/Chart/Chart.js"],l["Core/Utilities.js"]],function(c,d){function m(K,I){let O,$=!1;return K&&(O=K.newOpacity,K.oldOpacity!==O&&(K.alignAttr&&K.placed?(K[O?"removeClass":"addClass"]("highcharts-data-label-hidden"),$=!0,K.alignAttr.opacity=O,K[K.isOld?"animate":"attr"](K.alignAttr,null,function(){I.styledMode||K.css({pointerEvents:O?"auto":"none"})}),T(I,"afterHideOverlappingLabel")):K.attr({opacity:O})),K.isOld=!0),$}const{addEvent:n,fireEvent:T,isArray:V,isNumber:Q,objectEach:z,pick:W}=d;n(c,"render",function(){let K=this,I=[];(this.labelCollectors||[]).forEach(function(O){I=I.concat(O())}),(this.yAxis||[]).forEach(function(O){O.stacking&&O.options.stackLabels&&!O.options.stackLabels.allowOverlap&&z(O.stacking.stacks,function($){z($,function(M){M.label&&I.push(M.label)})})}),(this.series||[]).forEach(function(O){var $=O.options.dataLabels;O.visible&&($.enabled!==!1||O._hasPointLabels)&&($=M=>M.forEach(S=>{S.visible&&(V(S.dataLabels)?S.dataLabels:S.dataLabel?[S.dataLabel]:[]).forEach(function(k){const G=k.options;k.labelrank=W(G.labelrank,S.labelrank,S.shapeArgs&&S.shapeArgs.height),G.allowOverlap?(k.oldOpacity=k.opacity,k.newOpacity=1,m(k,K)):I.push(k)})}),$(O.nodes||[]),$(O.points))}),this.hideOverlappingLabels(I)}),c.prototype.hideOverlappingLabels=function(K){let I=this,O=K.length,$=I.renderer;var M;let S,k,G,U,C=!1;var ie=function(J){let N,F;var H;let E=J.box?0:J.padding||0,L=H=0,f,y;if(J&&(!J.alignAttr||J.placed))return N=J.alignAttr||{x:J.attr("x"),y:J.attr("y")},F=J.parentGroup,J.width||(H=J.getBBox(),J.width=H.width,J.height=H.height,H=$.fontMetrics(J.element).h),f=J.width-2*E,(y={left:"0",center:"0.5",right:"1"}[J.alignValue])?L=+y*f:Q(J.x)&&Math.round(J.x)!==J.translateX&&(L=J.x-J.translateX),{x:N.x+(F.translateX||0)+E-(L||0),y:N.y+(F.translateY||0)+E-H,width:J.width-2*E,height:J.height-2*E}};for(S=0;S<O;S++)(M=K[S])&&(M.oldOpacity=M.opacity,M.newOpacity=1,M.absoluteBox=ie(M));for(K.sort(function(J,N){return(N.labelrank||0)-(J.labelrank||0)}),S=0;S<O;S++)for(G=(ie=K[S])&&ie.absoluteBox,M=S+1;M<O;++M)U=(k=K[M])&&k.absoluteBox,!G||!U||ie===k||ie.newOpacity===0||k.newOpacity===0||ie.visibility==="hidden"||k.visibility==="hidden"||U.x>=G.x+G.width||U.x+U.width<=G.x||U.y>=G.y+G.height||U.y+U.height<=G.y||((ie.labelrank<k.labelrank?ie:k).newOpacity=0);K.forEach(function(J){m(J,I)&&(C=!0)}),C&&T(I,"afterHideAllOverlappingLabels")}}),r(l,"Extensions/BorderRadius.js",[l["Core/Defaults.js"],l["Core/Series/Series.js"],l["Core/Series/SeriesRegistry.js"],l["Core/Renderer/SVG/SVGElement.js"],l["Core/Renderer/SVG/SVGRenderer.js"],l["Core/Utilities.js"]],function(c,d,m,n,T,V){const{defaultOptions:Q}=c;({seriesTypes:c}=m);const{addEvent:z,extend:W,isObject:K,merge:I,relativeLength:O}=V,$={radius:0,scope:"stack",where:void 0},M=(S,k)=>(K(S)||(S={radius:S||0}),I($,k,S));if(n.symbolCustomAttribs.indexOf("borderRadius")===-1){n.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY");const S=T.prototype.symbols.arc;T.prototype.symbols.arc=function(G,U,C,ie,J={}){G=S(G,U,C,ie,J);const{innerR:N=0,r:F=C,start:H=0,end:E=0}=J;if(J.open||!J.borderRadius)return G;for(C=E-H,U=Math.sin(C/2),J=Math.max(Math.min(O(J.borderRadius||0,F-N),(F-N)/2,F*U/(1+U)),0),C=Math.min(J,C/Math.PI*2*N),U=G.length-1;U--;){let te,q,ce;ie=G;var L=U,f=1<U?C:J,y=ie[L],b=ie[L+1];if(b[0]==="Z"&&(b=ie[0]),y[0]!=="M"&&y[0]!=="L"||b[0]!=="A"?y[0]!=="A"||b[0]!=="M"&&b[0]!=="L"||(ce=b,q=y):(ce=y,q=b,te=!0),ce&&q&&q.params){y=q[1];var D=q[5];b=q.params;const{start:fe,end:we,cx:Z,cy:se}=b;var X=D?y-f:y+f;const ue=X?Math.asin(f/X):0;D=D?ue:-ue,X*=Math.cos(ue),te?(b.start=fe+D,ce[1]=Z+X*Math.cos(fe),ce[2]=se+X*Math.sin(fe),ie.splice(L+1,0,["A",f,f,0,0,1,Z+y*Math.cos(b.start),se+y*Math.sin(b.start)])):(b.end=we-D,q[6]=Z+y*Math.cos(b.end),q[7]=se+y*Math.sin(b.end),ie.splice(L+1,0,["A",f,f,0,0,1,Z+X*Math.cos(we),se+X*Math.sin(we)])),q[4]=Math.abs(b.end-b.start)<Math.PI?0:1}}return G};const k=T.prototype.symbols.roundedRect;T.prototype.symbols.roundedRect=function(G,U,C,ie,J={}){const N=k(G,U,C,ie,J),{r:F=0,brBoxHeight:H=ie,brBoxY:E=U}=J;var L=U-E,f=E+H-(U+ie);J=-.1<L-F?0:F;const y=-.1<f-F?0:F;var b=Math.max(J&&L,0);const D=Math.max(y&&f,0);f=[G+J,U],L=[G+C-J,U];const X=[G+C,U+J],te=[G+C,U+ie-y],q=[G+C-y,U+ie],ce=[G+y,U+ie],fe=[G,U+ie-y],we=[G,U+J];if(b){const Z=Math.sqrt(Math.pow(J,2)-Math.pow(J-b,2));f[0]-=Z,L[0]+=Z,X[1]=we[1]=U+J-b}return ie<J-b&&(b=Math.sqrt(Math.pow(J,2)-Math.pow(J-b-ie,2)),X[0]=te[0]=G+C-J+b,q[0]=Math.min(X[0],q[0]),ce[0]=Math.max(te[0],ce[0]),fe[0]=we[0]=G+J-b,X[1]=we[1]=U+ie),D&&(b=Math.sqrt(Math.pow(y,2)-Math.pow(y-D,2)),q[0]+=b,ce[0]-=b,te[1]=fe[1]=U+ie-y+D),ie<y-D&&(ie=Math.sqrt(Math.pow(y,2)-Math.pow(y-D-ie,2)),X[0]=te[0]=G+C-y+ie,L[0]=Math.min(X[0],L[0]),f[0]=Math.max(te[0],f[0]),fe[0]=we[0]=G+y-ie,te[1]=fe[1]=U),N.length=0,N.push(["M",...f],["L",...L],["A",J,J,0,0,1,...X],["L",...te],["A",y,y,0,0,1,...q],["L",...ce],["A",y,y,0,0,1,...fe],["L",...we],["A",J,J,0,0,1,...f],["Z"]),N},z(c.pie,"afterTranslate",function(){const G=M(this.options.borderRadius);for(const U of this.points){const C=U.shapeArgs;C&&(C.borderRadius=O(G.radius,(C.r||0)-(C.innerR||0)))}}),z(d,"afterColumnTranslate",function(){var G,U;if(this.options.borderRadius&&(!this.chart.is3d||!this.chart.is3d())){const{options:N,yAxis:F}=this,H=N.stacking==="percent";var C=(U=(G=Q.plotOptions)===null||G===void 0?void 0:G[this.type])===null||U===void 0?void 0:U.borderRadius;G=M(N.borderRadius,K(C)?C:{}),U=F.options.reversed;for(const E of this.points)if({shapeArgs:C}=E,E.shapeType==="roundedRect"&&C){const{width:L=0,height:f=0,y=0}=C;var ie=y,J=f;G.scope==="stack"&&E.stackTotal&&(ie=F.translate(H?100:E.stackTotal,!1,!0,!1,!0),J=F.translate(N.threshold||0,!1,!0,!1,!0),J=this.crispCol(0,Math.min(ie,J),0,Math.abs(ie-J)),ie=J.y,J=J.height);const b=(E.negative?-1:1)*(U?-1:1)===-1;let D=G.where;!D&&this.is("waterfall")&&Math.abs((E.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(D="all"),D||(D="end");const X=Math.min(O(G.radius,L),L/2,D==="all"?f/2:1/0)||0;D==="end"&&(b&&(ie-=X),J+=X),W(C,{brBoxHeight:J,brBoxY:ie,r:X})}}},{order:9})}return d={optionsToObject:M},d}),r(l,"Core/Responsive.js",[l["Core/Utilities.js"]],function(c){const{extend:d,find:m,isArray:n,isObject:T,merge:V,objectEach:Q,pick:z,splat:W,uniqueKey:K}=c;var I;return function(O){function $(G){function U(J,N,F,H){let E;Q(J,function(L,f){if(!H&&-1<C.collectionsWithUpdate.indexOf(f)&&N[f])for(L=W(L),F[f]=[],E=0;E<Math.max(L.length,N[f].length);E++)N[f][E]&&(L[E]===void 0?F[f][E]=N[f][E]:(F[f][E]={},U(L[E],N[f][E],F[f][E],H+1)));else T(L)?(F[f]=n(L)?[]:{},U(L,N[f]||{},F[f],H+1)):F[f]=typeof N[f]>"u"?null:N[f]})}const C=this,ie={};return U(G,this.options,ie,0),ie}function M(G,U){const C=G.condition;(C.callback||function(){return this.chartWidth<=z(C.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=z(C.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=z(C.minWidth,0)&&this.chartHeight>=z(C.minHeight,0)}).call(this)&&U.push(G._id)}function S(G,U){const C=this.options.responsive;var ie=this.currentResponsive;let J=[];!U&&C&&C.rules&&C.rules.forEach(N=>{typeof N._id>"u"&&(N._id=K()),this.matchResponsiveRule(N,J)},this),U=V(...J.map(N=>m((C||{}).rules||[],F=>F._id===N)).map(N=>N&&N.chartOptions)),U.isResponsiveOptions=!0,J=J.toString()||void 0,J!==(ie&&ie.ruleIds)&&(ie&&this.update(ie.undoOptions,G,!0),J?(ie=this.currentOptions(U),ie.isResponsiveOptions=!0,this.currentResponsive={ruleIds:J,mergedOptions:U,undoOptions:ie},this.update(U,G,!0)):this.currentResponsive=void 0)}const k=[];O.compose=function(G){return c.pushUnique(k,G)&&d(G.prototype,{currentOptions:$,matchResponsiveRule:M,setResponsive:S}),G}}(I||(I={})),I}),r(l,"masters/highcharts.src.js",[l["Core/Globals.js"],l["Core/Utilities.js"],l["Core/Defaults.js"],l["Core/Animation/Fx.js"],l["Core/Animation/AnimationUtilities.js"],l["Core/Renderer/HTML/AST.js"],l["Core/FormatUtilities.js"],l["Core/Renderer/RendererUtilities.js"],l["Core/Renderer/SVG/SVGElement.js"],l["Core/Renderer/SVG/SVGRenderer.js"],l["Core/Renderer/HTML/HTMLElement.js"],l["Core/Renderer/HTML/HTMLRenderer.js"],l["Core/Axis/Axis.js"],l["Core/Axis/DateTimeAxis.js"],l["Core/Axis/LogarithmicAxis.js"],l["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],l["Core/Axis/Tick.js"],l["Core/Tooltip.js"],l["Core/Series/Point.js"],l["Core/Pointer.js"],l["Core/Legend/Legend.js"],l["Core/Chart/Chart.js"],l["Core/Axis/Stacking/StackingAxis.js"],l["Core/Axis/Stacking/StackItem.js"],l["Core/Series/Series.js"],l["Core/Series/SeriesRegistry.js"],l["Series/Column/ColumnSeries.js"],l["Series/Column/ColumnDataLabel.js"],l["Series/Pie/PieSeries.js"],l["Series/Pie/PieDataLabel.js"],l["Core/Series/DataLabel.js"],l["Core/Responsive.js"],l["Core/Color/Color.js"],l["Core/Time.js"]],function(c,d,m,n,T,V,Q,z,W,K,I,O,$,M,S,k,G,U,C,ie,J,N,F,H,E,L,f,y,b,D,X,te,q,ce){return c.animate=T.animate,c.animObject=T.animObject,c.getDeferredAnimation=T.getDeferredAnimation,c.setAnimation=T.setAnimation,c.stop=T.stop,c.timers=n.timers,c.AST=V,c.Axis=$,c.Chart=N,c.chart=N.chart,c.Fx=n,c.Legend=J,c.PlotLineOrBand=k,c.Point=C,c.Pointer=ie,c.Series=E,c.StackItem=H,c.SVGElement=W,c.SVGRenderer=K,c.Tick=G,c.Time=ce,c.Tooltip=U,c.Color=q,c.color=q.parse,O.compose(K),I.compose(W),ie.compose(N),J.compose(N),c.defaultOptions=m.defaultOptions,c.getOptions=m.getOptions,c.time=m.defaultTime,c.setOptions=m.setOptions,c.dateFormat=Q.dateFormat,c.format=Q.format,c.numberFormat=Q.numberFormat,c.addEvent=d.addEvent,c.arrayMax=d.arrayMax,c.arrayMin=d.arrayMin,c.attr=d.attr,c.clearTimeout=d.clearTimeout,c.correctFloat=d.correctFloat,c.createElement=d.createElement,c.css=d.css,c.defined=d.defined,c.destroyObjectProperties=d.destroyObjectProperties,c.discardElement=d.discardElement,c.distribute=z.distribute,c.erase=d.erase,c.error=d.error,c.extend=d.extend,c.extendClass=d.extendClass,c.find=d.find,c.fireEvent=d.fireEvent,c.getMagnitude=d.getMagnitude,c.getStyle=d.getStyle,c.inArray=d.inArray,c.isArray=d.isArray,c.isClass=d.isClass,c.isDOMElement=d.isDOMElement,c.isFunction=d.isFunction,c.isNumber=d.isNumber,c.isObject=d.isObject,c.isString=d.isString,c.keys=d.keys,c.merge=d.merge,c.normalizeTickInterval=d.normalizeTickInterval,c.objectEach=d.objectEach,c.offset=d.offset,c.pad=d.pad,c.pick=d.pick,c.pInt=d.pInt,c.relativeLength=d.relativeLength,c.removeEvent=d.removeEvent,c.seriesType=L.seriesType,c.splat=d.splat,c.stableSort=d.stableSort,c.syncTimeout=d.syncTimeout,c.timeUnits=d.timeUnits,c.uniqueKey=d.uniqueKey,c.useSerialIds=d.useSerialIds,c.wrap=d.wrap,y.compose(f),X.compose(E),M.compose($),S.compose($),D.compose(b),k.compose($),te.compose(N),F.compose($,N,E),U.compose(ie),c}),l["masters/highcharts.src.js"]._modules=l,l["masters/highcharts.src.js"]})}(WU)),Dv}const YU=O5(vI);(function(e,t){(function(r,l){e.exports=l(CA(),YU)})(window,function(r,l){return m={},c.m=d=[function(n,T){n.exports=r},function(n,T){n.exports=l},function(n,Q,V){V.r(Q),V.d(Q,"Chart",function(){return G}),V.d(Q,"default",function(){return U});var Q=V(0),z=V.n(Q);function W(C,ie){return function J(N,F,H){function E(L,f){!z.a.isObject(L,!H)||z.a.isClass(L)||z.a.isDOMElement(L)?N[f]=F[f]:N[f]=J(N[f]||z.a.isArray(L)?[]:{},L,H)}return z.a.isArray(F)?F.forEach(E):z.a.objectEach(F,E),N}({},C,ie)}var K=V(1);function I(C){return function(ie){if(Array.isArray(ie))return O(ie)}(C)||function(ie){if(typeof Symbol<"u"&&ie[Symbol.iterator]!=null||ie["@@iterator"]!=null)return Array.from(ie)}(C)||function(ie,J){if(ie){if(typeof ie=="string")return O(ie,J);var N=Object.prototype.toString.call(ie).slice(8,-1);return(N=N==="Object"&&ie.constructor?ie.constructor.name:N)==="Map"||N==="Set"?Array.from(ie):N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?O(ie,J):void 0}}(C)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O(C,ie){(ie==null||ie>C.length)&&(ie=C.length);for(var J=0,N=new Array(ie);J<ie;J++)N[J]=C[J];return N}function $(C,ie){var J,N=Object.keys(C);return Object.getOwnPropertySymbols&&(J=Object.getOwnPropertySymbols(C),ie&&(J=J.filter(function(F){return Object.getOwnPropertyDescriptor(C,F).enumerable})),N.push.apply(N,J)),N}function M(C){for(var ie=1;ie<arguments.length;ie++){var J=arguments[ie]!=null?arguments[ie]:{};ie%2?$(Object(J),!0).forEach(function(N){var F,H;F=C,N=J[H=N],H in F?Object.defineProperty(F,H,{value:N,enumerable:!0,configurable:!0,writable:!0}):F[H]=N}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(J)):$(Object(J)).forEach(function(N){Object.defineProperty(C,N,Object.getOwnPropertyDescriptor(J,N))})}return C}function S(){this.chart&&this.chart.destroy()}var k=function(C,ie){return ie=ie.split(".")[0]<3?{render:function(J){return J("div",{ref:"chart"})},beforeDestroy:S}:{render:function(){return Object(K.h)("div",{ref:"chart"})},beforeUnmount:S},M({template:'<div ref="chart"></div>',props:{constructorType:{type:String,default:"chart"},options:{type:Object,required:!0},callback:Function,updateArgs:{type:Array,default:function(){return[!0,!0]}},highcharts:{type:Object},deepCopyOnUpdate:{type:Boolean,default:!0}},watch:{options:{handler:function(J){var N;(N=this.chart).update.apply(N,[W(J,this.deepCopyOnUpdate)].concat(I(this.updateArgs)))},deep:!0}},mounted:function(){var J=this.highcharts||C;this.options&&J[this.constructorType]?this.chart=J[this.constructorType](this.$refs.chart,W(this.options,!0),this.callback||null):this.options?console.warn("'".concat(this.constructorType,"' constructor-type is incorrect. Sometimes this error is caused by the fact, that the corresponding module wasn't imported.")):console.warn('The "options" parameter was not passed.')}},ie)},G=k(z.a,K.version||V.n(K).a.version);function U(C){var ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};C.component(ie.tagName||"highcharts",k(ie.highcharts||z.a,C.version))}}],c.c=m,c.d=function(n,T,V){c.o(n,T)||Object.defineProperty(n,T,{enumerable:!0,get:V})},c.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},c.t=function(n,T){if(1&T&&(n=c(n)),8&T||4&T&&typeof n=="object"&&n&&n.__esModule)return n;var V=Object.create(null);if(c.r(V),Object.defineProperty(V,"default",{enumerable:!0,value:n}),2&T&&typeof n!="string")for(var Q in n)c.d(V,Q,function(z){return n[z]}.bind(null,Q));return V},c.n=function(n){var T=n&&n.__esModule?function(){return n.default}:function(){return n};return c.d(T,"a",T),T},c.o=function(n,T){return Object.prototype.hasOwnProperty.call(n,T)},c.p="",c(c.s=2);function c(n){if(m[n])return m[n].exports;var T=m[n]={i:n,l:!1,exports:{}};return d[n].call(T.exports,T,T.exports,c),T.l=!0,T.exports}var d,m})})(HU);var XU=CA();const Bc=FA(XU);var Hw={},qU={get exports(){return Hw},set exports(e){Hw=e}};(function(e){(function(t){e.exports?(t.default=t,e.exports=t):t(typeof Highcharts<"u"?Highcharts:void 0)})(function(t){function r(l,c,d,m){l.hasOwnProperty(c)||(l[c]=m.apply(null,d),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:c,module:l[c]}})))}t=t?t._modules:{},r(t,"Extensions/Pane.js",[t["Core/Chart/Chart.js"],t["Series/CenteredUtilities.js"],t["Core/Globals.js"],t["Core/Pointer.js"],t["Core/Utilities.js"]],function(l,c,d,m,n){function T(M,S,k,G,U){let C=!0;const ie=k[0],J=k[1],N=Math.sqrt(Math.pow(M-ie,2)+Math.pow(S-J,2));return z(G)&&z(U)&&(M=Math.atan2(Q(S-J,8),Q(M-ie,8)),U!==G&&(C=G>U?M>=G&&M<=Math.PI||M<=U&&M>=-Math.PI:M>=G&&M<=Q(U,8))),N<=Math.ceil(k[2]/2)&&C}const{addEvent:V,correctFloat:Q,defined:z,extend:W,merge:K,pick:I,splat:O}=n;l.prototype.collectionsWithUpdate.push("pane");class ${constructor(S,k){this.options=this.chart=this.center=this.background=void 0,this.coll="pane",this.defaultOptions={center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},this.defaultBackgroundOptions={shape:"circle",borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"},this.init(S,k)}init(S,k){this.chart=k,this.background=[],k.pane.push(this),this.setOptions(S)}setOptions(S){this.options=K(this.defaultOptions,this.chart.angular?{background:{}}:void 0,S)}render(){var S=this.options;let k=this.options.background;var G=this.chart.renderer;if(this.group||(this.group=G.g("pane-group").attr({zIndex:S.zIndex||0}).add()),this.updateCenter(),k)for(k=O(k),S=Math.max(k.length,this.background.length||0),G=0;G<S;G++)k[G]&&this.axis?this.renderBackground(K(this.defaultBackgroundOptions,k[G]),G):this.background[G]&&(this.background[G]=this.background[G].destroy(),this.background.splice(G,1))}renderBackground(S,k){let G="animate",U={class:"highcharts-pane "+(S.className||"")};this.chart.styledMode||W(U,{fill:S.backgroundColor,stroke:S.borderColor,"stroke-width":S.borderWidth}),this.background[k]||(this.background[k]=this.chart.renderer.path().add(this.group),G="attr"),this.background[k][G]({d:this.axis.getPlotBandPath(S.from,S.to,S)}).attr(U)}updateCenter(S){this.center=(S||this.axis||{}).center=c.getCenter.call(this)}update(S,k){K(!0,this.options,S),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(G){G.pane===this&&(G.pane=null,G.update({},k))},this)}}return l.prototype.getHoverPane=function(M){const S=this;let k;return M&&S.pane.forEach(G=>{T(M.chartX-S.plotLeft,M.chartY-S.plotTop,G.center)&&(k=G)}),k},V(l,"afterIsInsidePlot",function(M){this.polar&&(M.options.inverted&&([M.x,M.y]=[M.y,M.x]),M.isInsidePlot=this.pane.some(S=>T(M.x,M.y,S.center,S.axis&&S.axis.normalizedStartAngleRad,S.axis&&S.axis.normalizedEndAngleRad)))}),V(m,"beforeGetHoverData",function(M){const S=this.chart;S.polar?(S.hoverPane=S.getHoverPane(M),M.filter=function(k){return k.visible&&!(!M.shared&&k.directTouch)&&I(k.options.enableMouseTracking,!0)&&(!S.hoverPane||k.xAxis.pane===S.hoverPane)}):S.hoverPane=void 0}),V(m,"afterGetHoverData",function(M){const S=this.chart;M.hoverPoint&&M.hoverPoint.plotX&&M.hoverPoint.plotY&&S.hoverPane&&!T(M.hoverPoint.plotX,M.hoverPoint.plotY,S.hoverPane.center)&&(M.hoverPoint=void 0)}),d.Pane=$,d.Pane}),r(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c){const{area:{prototype:{pointClass:d,pointClass:{prototype:m}}}}=l.seriesTypes,{defined:n,isNumber:T}=c;class V extends d{constructor(){super(...arguments),this.series=this.plotX=this.options=this.low=this.high=void 0}setState(){const z=this.state,W=this.series,K=W.chart.polar;n(this.plotHigh)||(this.plotHigh=W.yAxis.toPixels(this.high,!0)),n(this.plotLow)||(this.plotLow=this.plotY=W.yAxis.toPixels(this.low,!0)),W.stateMarkerGraphic&&(W.lowerStateMarkerGraphic=W.stateMarkerGraphic,W.stateMarkerGraphic=W.upperStateMarkerGraphic),this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,K&&T(this.plotHighX)&&(this.plotX=this.plotHighX),m.setState.apply(this,arguments),this.state=z,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],K&&T(this.plotLowX)&&(this.plotX=this.plotLowX),W.stateMarkerGraphic&&(W.upperStateMarkerGraphic=W.stateMarkerGraphic,W.stateMarkerGraphic=W.lowerStateMarkerGraphic,W.lowerStateMarkerGraphic=void 0),m.setState.apply(this,arguments)}haloPath(){const z=this.series.chart.polar;let W=[];return this.plotY=this.plotLow,z&&T(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(W=m.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,z&&T(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(W=W.concat(m.haloPath.apply(this,arguments))),W}isValid(){return T(this.low)&&T(this.high)}}return V}),r(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m){({noop:c}=c);const{area:n,area:{prototype:T},column:{prototype:V}}=d.seriesTypes,{addEvent:Q,defined:z,extend:W,isArray:K,isNumber:I,pick:O,merge:$}=m;class M extends n{constructor(){super(...arguments),this.xAxis=this.lowerStateMarkerGraphic=this.points=this.options=this.data=void 0}toYData(k){return[k.low,k.high]}highToXY(k){const G=this.chart,U=this.xAxis.postTranslate(k.rectPlotX||0,this.yAxis.len-(k.plotHigh||0));k.plotHighX=U.x-G.plotLeft,k.plotHigh=U.y-G.plotTop,k.plotLowX=k.plotX}getGraphPath(k){var G=[],U=[];const C=T.getGraphPath;var ie=this.options;const J=this.chart.polar,N=J&&ie.connectEnds!==!1,F=ie.connectNulls;let H,E,L,f=ie.step;for(k=k||this.points,H=k.length;H--;){E=k[H];const y=J?{plotX:E.rectPlotX,plotY:E.yBottom,doCurve:!1}:{plotX:E.plotX,plotY:E.plotY,doCurve:!1};E.isNull||N||F||k[H+1]&&!k[H+1].isNull||U.push(y),L={polarPlotY:E.polarPlotY,rectPlotX:E.rectPlotX,yBottom:E.yBottom,plotX:O(E.plotHighX,E.plotX),plotY:E.plotHigh,isNull:E.isNull},U.push(L),G.push(L),E.isNull||N||F||k[H-1]&&!k[H-1].isNull||U.push(y)}return k=C.call(this,k),f&&(f===!0&&(f="left"),ie.step={left:"right",center:"center",right:"left"}[f]),G=C.call(this,G),U=C.call(this,U),ie.step=f,ie=[].concat(k,G),!this.chart.polar&&U[0]&&U[0][0]==="M"&&(U[0]=["L",U[0][1],U[0][2]]),this.graphPath=ie,this.areaPath=k.concat(U),ie.isArea=!0,ie.xMap=k.xMap,this.areaPath.xMap=k.xMap,ie}drawDataLabels(){const k=this.points,G=k.length,U=[],C=this.options.dataLabels,ie=this.chart.inverted;let J,N,F,H,E;if(C){if(K(C)?(H=C[0]||{enabled:!1},E=C[1]||{enabled:!1}):(H=W({},C),H.x=C.xHigh,H.y=C.yHigh,E=W({},C),E.x=C.xLow,E.y=C.yLow),H.enabled||this._hasPointLabels){for(J=G;J--;)if(N=k[J]){const{plotHigh:L=0,plotLow:f=0}=N;F=H.inside?L<f:L>f,N.y=N.high,N._plotY=N.plotY,N.plotY=L,U[J]=N.dataLabel,N.dataLabel=N.dataLabelUpper,N.below=F,ie?H.align||(H.align=F?"right":"left"):H.verticalAlign||(H.verticalAlign=F?"top":"bottom")}for(this.options.dataLabels=H,T.drawDataLabels&&T.drawDataLabels.apply(this,arguments),J=G;J--;)(N=k[J])&&(N.dataLabelUpper=N.dataLabel,N.dataLabel=U[J],delete N.dataLabels,N.y=N.low,N.plotY=N._plotY)}if(E.enabled||this._hasPointLabels){for(J=G;J--;)if(N=k[J]){const{plotHigh:L=0,plotLow:f=0}=N;F=E.inside?L<f:L>f,N.below=!F,ie?E.align||(E.align=F?"left":"right"):E.verticalAlign||(E.verticalAlign=F?"bottom":"top")}this.options.dataLabels=E,T.drawDataLabels&&T.drawDataLabels.apply(this,arguments)}if(H.enabled)for(J=G;J--;)(N=k[J])&&(N.dataLabels=[N.dataLabelUpper,N.dataLabel].filter(function(L){return!!L}));this.options.dataLabels=C}}alignDataLabel(){V.alignDataLabel.apply(this,arguments)}drawPoints(){const k=this.points.length;let G,U;for(T.drawPoints.apply(this,arguments),G=0;G<k;)U=this.points[G],U.graphics=U.graphics||[],U.origProps={plotY:U.plotY,plotX:U.plotX,isInside:U.isInside,negative:U.negative,zone:U.zone,y:U.y},(U.graphic||U.graphics[0])&&(U.graphics[0]=U.graphic),U.graphic=U.graphics[1],U.plotY=U.plotHigh,z(U.plotHighX)&&(U.plotX=U.plotHighX),U.y=O(U.high,U.origProps.y),U.negative=U.y<(this.options.threshold||0),this.zones.length&&(U.zone=U.getZone()),this.chart.polar||(U.isInside=U.isTopInside=typeof U.plotY<"u"&&0<=U.plotY&&U.plotY<=this.yAxis.len&&0<=U.plotX&&U.plotX<=this.xAxis.len),G++;for(T.drawPoints.apply(this,arguments),G=0;G<k;)U=this.points[G],U.graphics=U.graphics||[],(U.graphic||U.graphics[1])&&(U.graphics[1]=U.graphic),U.graphic=U.graphics[0],U.origProps&&(W(U,U.origProps),delete U.origProps),G++}}return M.defaultOptions=$(n.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),Q(M,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(S=>{const k=S.high,G=S.plotY;S.isNull?S.plotY=void 0:(S.plotLow=G,S.plotHigh=I(k)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(k):k,!1,!0,void 0,!0):void 0,this.dataModify&&(S.yBottom=S.plotHigh))})},{order:0}),Q(M,"afterTranslate",function(){this.points.forEach(S=>{if(this.chart.polar)this.highToXY(S),S.plotLow=S.plotY,S.tooltipPos=[((S.plotHighX||0)+(S.plotLowX||0))/2,((S.plotHigh||0)+(S.plotLow||0))/2];else{const k=S.pos(!1,S.plotLow),G=S.pos(!1,S.plotHigh);k&&G&&(k[0]=(k[0]+G[0])/2,k[1]=(k[1]+G[1])/2),S.tooltipPos=k}})},{order:3}),W(M.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:l,pointValKey:"low",setStackedPoints:c}),d.registerSeriesType("arearange",M),M}),r(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d){const{spline:{prototype:m}}=c.seriesTypes,{merge:n,extend:T}=d;class V extends l{constructor(){super(...arguments),this.points=this.data=this.options=void 0}}return V.defaultOptions=n(l.defaultOptions),T(V.prototype,{getPointSpline:m.getPointSpline}),c.registerSeriesType("areasplinerange",V),V}),r(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m){({noop:c}=c);const{extend:n,merge:T,pick:V}=m;class Q extends l{constructor(){super(...arguments),this.points=this.options=this.data=void 0}pointAttribs(){return{}}translate(){const W=this.yAxis,K=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(I){K.forEach(function(O){I[O]!==null&&(I[O+"Plot"]=W.translate(I[O],0,1,0,1))}),I.plotHigh=I.highPlot})}drawPoints(){let W=this,K=W.options,I=W.chart,O=I.renderer,$,M,S,k,G,U,C=0,ie,J,N,F,H=W.doQuartiles!==!1,E,L=W.options.whiskerLength;W.points.forEach(function(f){var y=f.graphic;let b=y?"animate":"attr",D=f.shapeArgs,X={},te={},q={},ce={},fe=f.color||W.color;typeof f.plotY<"u"&&(ie=Math.round(D.width),J=Math.floor(D.x),N=J+ie,F=Math.round(ie/2),$=Math.floor(H?f.q1Plot:f.lowPlot),M=Math.floor(H?f.q3Plot:f.lowPlot),S=Math.floor(f.highPlot),k=Math.floor(f.lowPlot),y||(f.graphic=y=O.g("point").add(W.group),f.stem=O.path().addClass("highcharts-boxplot-stem").add(y),L&&(f.whiskers=O.path().addClass("highcharts-boxplot-whisker").add(y)),H&&(f.box=O.path(void 0).addClass("highcharts-boxplot-box").add(y)),f.medianShape=O.path(void 0).addClass("highcharts-boxplot-median").add(y)),I.styledMode||(te.stroke=f.stemColor||K.stemColor||fe,te["stroke-width"]=V(f.stemWidth,K.stemWidth,K.lineWidth),te.dashstyle=f.stemDashStyle||K.stemDashStyle||K.dashStyle,f.stem.attr(te),L&&(q.stroke=f.whiskerColor||K.whiskerColor||fe,q["stroke-width"]=V(f.whiskerWidth,K.whiskerWidth,K.lineWidth),q.dashstyle=f.whiskerDashStyle||K.whiskerDashStyle||K.dashStyle,f.whiskers.attr(q)),H&&(X.fill=f.fillColor||K.fillColor||fe,X.stroke=K.lineColor||fe,X["stroke-width"]=K.lineWidth||0,X.dashstyle=f.boxDashStyle||K.boxDashStyle||K.dashStyle,f.box.attr(X)),ce.stroke=f.medianColor||K.medianColor||fe,ce["stroke-width"]=V(f.medianWidth,K.medianWidth,K.lineWidth),ce.dashstyle=f.medianDashStyle||K.medianDashStyle||K.dashStyle,f.medianShape.attr(ce)),U=f.stem.strokeWidth()%2/2,C=J+F+U,y=[["M",C,M],["L",C,S],["M",C,$],["L",C,k]],f.stem[b]({d:y}),H&&(U=f.box.strokeWidth()%2/2,$=Math.floor($)+U,M=Math.floor(M)+U,J+=U,N+=U,y=[["M",J,M],["L",J,$],["L",N,$],["L",N,M],["L",J,M],["Z"]],f.box[b]({d:y})),L&&(U=f.whiskers.strokeWidth()%2/2,S+=U,k+=U,E=/%$/.test(L)?F*parseFloat(L)/100:L/2,y=[["M",C-E,S],["L",C+E,S],["M",C-E,k],["L",C+E,k]],f.whiskers[b]({d:y})),G=Math.round(f.medianPlot),U=f.medianShape.strokeWidth()%2/2,G+=U,y=[["M",J,G],["L",N,G]],f.medianShape[b]({d:y}))})}toYData(W){return[W.low,W.q1,W.median,W.q3,W.high]}}return Q.defaultOptions=T(l.defaultOptions,{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}),n(Q.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:c,setStackedPoints:c}),d.registerSeriesType("boxplot",Q),Q}),r(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.7em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),r(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(l,c,d,m){const{parse:n}=l,{noop:T}=d,{arrayMax:V,arrayMin:Q,isNumber:z,merge:W,pick:K,stableSort:I}=m;class O{constructor(M,S){this.options=this.symbols=this.visible=this.selected=this.ranges=this.movementX=this.maxLabel=this.legend=this.chart=void 0,this.setState=T,this.init(M,S)}init(M,S){this.options=M,this.visible=!0,this.chart=S.chart,this.legend=S}addToLegend(M){M.splice(this.options.legendIndex,0,this)}drawLegendSymbol(M){const S=K(M.options.itemDistance,20),k=this.legendItem||{},G=this.options;var U=G.ranges,C=G.connectorDistance;if(U&&U.length&&z(U[0].value)){I(U,function(J,N){return N.value-J.value}),this.ranges=U,this.setOptions(),this.render(),M=this.getMaxLabelSize();var ie=this.ranges[0].radius;U=2*ie,C=C-ie+M.width,C=0<C?C:0,this.maxLabel=M,this.movementX=G.labels.align==="left"?C:0,k.labelWidth=U+C+S,k.labelHeight=U+M.height/2}else M.options.bubbleLegend.autoRanges=!0}setOptions(){const M=this.ranges,S=this.options,k=this.chart.series[S.seriesIndex],G=this.legend.baseline,U={zIndex:S.zIndex,"stroke-width":S.borderWidth},C={zIndex:S.zIndex,"stroke-width":S.connectorWidth},ie={align:this.legend.options.rtl||S.labels.align==="left"?"right":"left",zIndex:S.zIndex},J=k.options.marker.fillOpacity,N=this.chart.styledMode;M.forEach(function(F,H){N||(U.stroke=K(F.borderColor,S.borderColor,k.color),U.fill=K(F.color,S.color,J!==1?n(k.color).setOpacity(J).get("rgba"):k.color),C.stroke=K(F.connectorColor,S.connectorColor,k.color)),M[H].radius=this.getRangeRadius(F.value),M[H]=W(M[H],{center:M[0].radius-M[H].radius+G}),N||W(!0,M[H],{bubbleAttribs:W(U),connectorAttribs:W(C),labelAttribs:ie})},this)}getRangeRadius(M){const S=this.options;return this.chart.series[this.options.seriesIndex].getRadius.call(this,S.ranges[S.ranges.length-1].value,S.ranges[0].value,S.minSize,S.maxSize,M)}render(){const M=this.legendItem||{},S=this.chart.renderer,k=this.options.zThreshold;this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),M.symbol=S.g("bubble-legend"),M.label=S.g("bubble-legend-item"),M.symbol.translateX=0,M.symbol.translateY=0,M.symbol.add(M.label),M.label.add(M.group);for(const G of this.ranges)G.value>=k&&this.renderRange(G);this.hideOverlappingLabels()}renderRange(M){var S=this.options;const k=S.labels;var G=this.chart;const U=G.series[S.seriesIndex],C=G.renderer,ie=this.symbols;G=ie.labels;const J=M.center,N=Math.abs(M.radius);var F=S.connectorDistance||0;const H=k.align,E=S.connectorWidth,L=this.ranges[0].radius||0,f=J-N-S.borderWidth/2+E/2,y=C.styledMode;F=this.legend.options.rtl||H==="left"?-F:F,H==="center"&&(F=0,S.connectorDistance=0,M.labelAttribs.align="center"),ie.bubbleItems.push(C.circle(L,J+((f%1?1:.5)-(E%2?0:.5)),N).attr(y?{}:M.bubbleAttribs).addClass((y?"highcharts-color-"+U.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(S.className||"")).add(this.legendItem.symbol)),ie.connectors.push(C.path(C.crispLine([["M",L,f],["L",L+F,f]],S.connectorWidth)).attr(y?{}:M.connectorAttribs).addClass((y?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(S.connectorClassName||"")).add(this.legendItem.symbol)),M=C.text(this.formatLabel(M)).attr(y?{}:M.labelAttribs).css(y?{}:k.style).addClass("highcharts-bubble-legend-labels "+(S.labels.className||"")).add(this.legendItem.symbol),S={x:L+F+S.labels.x,y:f+S.labels.y+.4*M.getBBox().height},M.attr(S),G.push(M),M.placed=!0,M.alignAttr=S}getMaxLabelSize(){let M,S;return this.symbols.labels.forEach(function(k){S=k.getBBox(!0),M=M?S.width>M.width?S:M:S}),M||{}}formatLabel(M){var S=this.options;const k=S.labels.formatter;S=S.labels.format;const{numberFormatter:G}=this.chart;return S?c.format(S,M):k?k.call(M):G(M.value,1)}hideOverlappingLabels(){const M=this.chart,S=this.symbols;!this.options.labels.allowOverlap&&S&&(M.hideOverlappingLabels(S.labels),S.labels.forEach(function(k,G){k.newOpacity?k.newOpacity!==k.oldOpacity&&S.connectors[G].show():S.connectors[G].hide()}))}getRanges(){const M=this.legend.bubbleLegend,S=M.options.ranges;let k,G,U=Number.MAX_VALUE,C=-Number.MAX_VALUE;return M.chart.series.forEach(function(ie){ie.isBubble&&!ie.ignoreSeries&&(G=ie.zData.filter(z),G.length&&(U=K(ie.options.zMin,Math.min(U,Math.max(Q(G),ie.options.displayNegative===!1?ie.options.zThreshold:-Number.MAX_VALUE))),C=K(ie.options.zMax,Math.max(C,V(G)))))}),k=U===C?[{value:C}]:[{value:U},{value:(U+C)/2},{value:C,autoRanges:!0}],S.length&&S[0].radius&&k.reverse(),k.forEach(function(ie,J){S&&S[J]&&(k[J]=W(S[J],ie))}),k}predictBubbleSizes(){var M=this.chart,S=M.legend.options,k=S.floating;const G=(S=S.layout==="horizontal")?M.legend.lastLineHeight:0,U=M.plotSizeX,C=M.plotSizeY;var ie=M.series[this.options.seriesIndex],J=ie.getPxExtremes();M=Math.ceil(J.minPxSize),J=Math.ceil(J.maxPxSize);const N=Math.min(C,U);return ie=ie.options.maxSize,k||!/%$/.test(ie)?k=J:(ie=parseFloat(ie),k=(N+G)*ie/100/(ie/100+1),(S&&C-k>=U||!S&&U-k>=C)&&(k=J)),[M,Math.ceil(k)]}updateRanges(M,S){const k=this.legend.options.bubbleLegend;k.minSize=M,k.maxSize=S,k.ranges=this.getRanges()}correctSizes(){const M=this.legend,S=this.chart.series[this.options.seriesIndex].getPxExtremes();1<Math.abs(Math.ceil(S.maxPxSize)-this.options.maxSize)&&(this.updateRanges(this.options.minSize,S.maxPxSize),M.render())}}return O}),r(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(l,c,d,m){function n(S,k,G){const U=this.legend;var C=0<=T(this);let ie,J;U&&U.options.enabled&&U.bubbleLegend&&U.options.bubbleLegend.autoRanges&&C?(ie=U.bubbleLegend.options,C=U.bubbleLegend.predictBubbleSizes(),U.bubbleLegend.updateRanges(C[0],C[1]),ie.placed||(U.group.placed=!1,U.allItems.forEach(N=>{J=N.legendItem||{},J.group&&(J.group.translateY=null)})),U.render(),this.getMargins(),this.axes.forEach(function(N){N.visible&&N.render(),ie.placed||(N.setScale(),N.updateNames(),O(N.ticks,function(F){F.isNew=!0,F.isNewLabel=!0}))}),ie.placed=!0,this.getMargins(),S.call(this,k,G),U.bubbleLegend.correctSizes(),W(U,V(U))):(S.call(this,k,G),U&&U.options.enabled&&U.bubbleLegend&&(U.render(),W(U,V(U))))}function T(S){S=S.series;let k=0;for(;k<S.length;){if(S[k]&&S[k].isBubble&&S[k].visible&&S[k].zData.length)return k;k++}return-1}function V(S){S=S.allItems;const k=[],G=S.length;let U,C,ie=0;for(C=0;C<G;C++){var J=S[C].legendItem||{};if(U=(S[C+1]||{}).legendItem||{},J.labelHeight&&(S[C].itemHeight=J.labelHeight),S[C]===S[G-1]||J.y!==U.y){for(k.push({height:0}),J=k[k.length-1],ie;ie<=C;ie++)S[ie].itemHeight>J.height&&(J.height=S[ie].itemHeight);J.step=C}}return k}function Q(S){const k=this.bubbleLegend,G=this.options,U=G.bubbleLegend,C=T(this.chart);k&&k.ranges&&k.ranges.length&&(U.ranges.length&&(U.autoRanges=!!U.ranges[0].autoRanges),this.destroyItem(k)),0<=C&&G.enabled&&U.enabled&&(U.seriesIndex=C,this.bubbleLegend=new c(U,this),this.bubbleLegend.addToLegend(S.allItems))}function z(S){if(S.defaultPrevented)return!1;var k=this.chart;S=this.visible;const G=this.chart.legend;G&&G.bubbleLegend&&(this.visible=!S,this.ignoreSeries=S,k=0<=T(k),G.bubbleLegend.visible!==k&&(G.update({bubbleLegend:{enabled:k}}),G.bubbleLegend.visible=k),this.visible=S)}function W(S,k){const G=S.options.rtl;let U,C,ie,J,N=0;S.allItems.forEach((F,H)=>{J=F.legendItem||{},J.group&&(U=J.group.translateX||0,C=J.y||0,((ie=F.movementX)||G&&F.ranges)&&(ie=G?U-F.options.maxSize/2:U+ie,J.group.attr({translateX:ie})),H>k[N].step&&N++,J.group.attr({translateY:Math.round(C+k[N].height/2)}),J.y=C+k[N].height/2)})}const{setOptions:K}=d,{addEvent:I,objectEach:O,wrap:$}=m,M=[];return{compose:function(S,k,G){m.pushUnique(M,S)&&(K({legend:{bubbleLegend:l}}),$(S.prototype,"drawChartBox",n)),m.pushUnique(M,k)&&I(k,"afterGetAllItems",Q),m.pushUnique(M,G)&&I(G,"legendItemClick",z)}}}),r(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d){({seriesTypes:{scatter:{prototype:{pointClass:c}}}}=c),{extend:d}=d;class m extends c{constructor(){super(...arguments),this.series=this.options=void 0}haloPath(T){return l.prototype.haloPath.call(this,T===0?0:(this.marker&&this.marker.radius||0)+T)}}return d(m.prototype,{ttBelow:!1}),m}),r(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T){function V(){const J=this.len,N=this.chart,F=this.isXAxis,H=F?"xData":"yData",E=this.min,L=this.max-E;let f=0,y=J,b=J/L,D;this.series.forEach(X=>{if(X.bubblePadding&&(X.visible||!N.options.chart.ignoreHiddenSeries)){D=this.allowZoomOutside=!0;const te=X[H];if(F&&((X.onPoint||X).getRadii(0,0,X),X.onPoint&&(X.radii=X.onPoint.radii)),0<L){let q=te.length;for(;q--;)if(k(te[q])&&this.dataMin<=te[q]&&te[q]<=this.max){const ce=X.radii&&X.radii[q]||0;f=Math.min((te[q]-E)*b-ce,f),y=Math.max((te[q]-E)*b+ce,y)}}}}),D&&0<L&&!this.logarithmic&&(y-=J,b*=(J+Math.max(0,f)-Math.min(y,J))/J,[["min","userMin",f],["max","userMax",y]].forEach(X=>{typeof U(this.options[X[0]],this[X[1]])>"u"&&(this[X[0]]+=X[2]/b)}))}const{parse:Q}=d;({noop:d}=m);const{series:z,seriesTypes:{column:{prototype:W},scatter:K}}=n,{addEvent:I,arrayMax:O,arrayMin:$,clamp:M,extend:S,isNumber:k,merge:G,pick:U}=T,C=[];class ie extends K{constructor(){super(...arguments),this.zData=this.yData=this.radii=this.points=this.options=this.minPxSize=this.maxPxSize=this.data=void 0}static compose(N,F,H,E){l.compose(F,H,E),T.pushUnique(C,N)&&(N.prototype.beforePadding=V)}animate(N){!N&&this.points.length<this.options.animationLimit&&this.points.forEach(function(F){const{graphic:H}=F;H&&H.width&&(this.hasRendered||H.attr({x:F.plotX,y:F.plotY,width:1,height:1}),H.animate(this.markerAttribs(F),this.options.animation))},this)}getRadii(){const N=this.zData,F=this.yData,H=[];let E,L,f,y=this.chart.bubbleZExtremes;const{minPxSize:b,maxPxSize:D}=this.getPxExtremes();if(!y){let X=Number.MAX_VALUE,te=-Number.MAX_VALUE,q;this.chart.series.forEach(ce=>{ce.bubblePadding&&(ce.visible||!this.chart.options.chart.ignoreHiddenSeries)&&(ce=(ce.onPoint||ce).getZExtremes())&&(X=Math.min(U(X,ce.zMin),ce.zMin),te=Math.max(U(te,ce.zMax),ce.zMax),q=!0)}),q?(y={zMin:X,zMax:te},this.chart.bubbleZExtremes=y):y={zMin:0,zMax:0}}for(L=0,E=N.length;L<E;L++)f=N[L],H.push(this.getRadius(y.zMin,y.zMax,b,D,f,F&&F[L]));this.radii=H}getRadius(N,F,H,E,L,f){const y=this.options,b=y.sizeBy!=="width",D=y.zThreshold;let X=F-N,te=.5;if(f===null||L===null)return null;if(k(L)){if(y.sizeByAbsoluteValue&&(L=Math.abs(L-D),X=Math.max(F-D,Math.abs(N-D)),N=0),L<N)return H/2-1;0<X&&(te=(L-N)/X)}return b&&0<=te&&(te=Math.sqrt(te)),Math.ceil(H+te*(E-H))/2}hasData(){return!!this.processedXData.length}pointAttribs(N,F){const H=this.options.marker.fillOpacity;return N=z.prototype.pointAttribs.call(this,N,F),H!==1&&(N.fill=Q(N.fill).setOpacity(H).get("rgba")),N}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){const{data:N,radii:F}=this,{minPxSize:H}=this.getPxExtremes();let E=N.length;for(;E--;){const L=N[E],f=F?F[E]:0;k(f)&&f>=H/2?(L.marker=S(L.marker,{radius:f,width:2*f,height:2*f}),L.dlBox={x:L.plotX-f,y:L.plotY-f,width:2*f,height:2*f}):(L.shapeArgs=L.plotY=L.dlBox=void 0,L.isInside=!1)}}getPxExtremes(){const N=Math.min(this.chart.plotWidth,this.chart.plotHeight);var F=E=>{let L;return typeof E=="string"&&(L=/%$/.test(E),E=parseInt(E,10)),L?N*E/100:E};const H=F(U(this.options.minSize,8));return F=Math.max(F(U(this.options.maxSize,"20%")),H),{minPxSize:H,maxPxSize:F}}getZExtremes(){var N=this.options;const F=(this.zData||[]).filter(k);if(F.length){const H=U(N.zMin,M($(F),N.displayNegative===!1?N.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE));if(N=U(N.zMax,O(F)),k(H)&&k(N))return{zMin:H,zMax:N}}}}return ie.defaultOptions=G(K.defaultOptions,{dataLabels:{formatter:function(){const{numberFormatter:J}=this.series.chart,{z:N}=this.point;return k(N)?J(N,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),S(ie.prototype,{alignDataLabel:W.alignDataLabel,applyZones:d,bubblePadding:!0,buildKDTree:d,directTouch:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:c,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),I(ie,"updatedData",J=>{delete J.target.chart.bubbleZExtremes}),I(ie,"remove",J=>{delete J.target.chart.bubbleZExtremes}),n.registerSeriesType("bubble",ie),ie}),r(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c){const{seriesTypes:{column:{prototype:{pointClass:{prototype:d}}},arearange:{prototype:{pointClass:m}}}}=l,{extend:n,isNumber:T}=c;class V extends m{constructor(){super(...arguments),this.series=this.options=void 0}isValid(){return T(this.low)}}return n(V.prototype,{setState:d.setState}),V}),r(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m){({noop:c}=c);const{seriesTypes:{arearange:n,column:T,column:{prototype:V}}}=d,{addEvent:Q,clamp:z,extend:W,isNumber:K,merge:I,pick:O}=m;class $ extends n{setOptions(){return I(!0,arguments[0],{stacking:void 0}),n.prototype.setOptions.apply(this,arguments)}translate(){return V.translate.apply(this)}pointAttribs(){return V.pointAttribs.apply(this,arguments)}translate3dPoints(){return V.translate3dPoints.apply(this,arguments)}translate3dShapes(){return V.translate3dShapes.apply(this,arguments)}}return $.defaultOptions=I(T.defaultOptions,n.defaultOptions,{borderRadius:{where:"all"},pointRange:null,marker:null,states:{hover:{halo:!1}}}),Q($,"afterColumnTranslate",function(){const M=this.yAxis,S=this.xAxis,k=S.startAngleRad,G=this.chart,U=this.xAxis.isRadial,C=Math.max(G.chartWidth,G.chartHeight)+999;let ie,J,N,F;this.points.forEach(H=>{const E=H.shapeArgs||{},L=this.options.minPointLength,f=H.plotY,y=M.translate(H.high,0,1,0,1);if(K(y)&&K(f))if(H.plotHigh=z(y,-C,C),H.plotLow=z(f,-C,C),F=H.plotHigh,ie=O(H.rectPlotY,H.plotY)-H.plotHigh,Math.abs(ie)<L?(J=L-ie,ie+=J,F-=J/2):0>ie&&(ie*=-1,F-=ie),U&&this.polar)N=H.barX+k,H.shapeType="arc",H.shapeArgs=this.polar.arc(F+ie,F,N,N+H.pointWidth);else{E.height=ie,E.y=F;const{x:b=0,width:D=0}=E;H.shapeArgs=I(H.shapeArgs,this.crispCol(b,F,D,ie)),H.tooltipPos=G.inverted?[M.len+M.pos-G.plotLeft-F-ie/2,S.len+S.pos-G.plotTop-b-D/2,ie]:[S.left-G.plotLeft+b+D/2,M.pos-G.plotTop+F+ie/2,ie]}})},{order:5}),W($.prototype,{directTouch:!0,pointClass:l,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:V.adjustForMissingColumns,animate:V.animate,crispCol:V.crispCol,drawGraph:c,drawPoints:V.drawPoints,getSymbol:c,drawTracker:V.drawTracker,getColumnMetrics:V.getColumnMetrics}),d.registerSeriesType("columnrange",$),$}),r(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d){const{prototype:m}=l,{clamp:n,merge:T,pick:V}=d;class Q extends l{constructor(){super(...arguments),this.points=this.options=this.data=void 0}translate(){let W=this,K=W.chart,I=W.options;var O=W.dense=2>W.closestPointRange*W.xAxis.transA;O=W.borderWidth=V(I.borderWidth,O?0:1);let $=W.yAxis,M=I.threshold,S=W.translatedThreshold=$.getThreshold(M),k=V(I.minPointLength,5),G=W.getColumnMetrics(),U=G.width,C=W.barW=Math.max(U,1+2*O),ie=W.pointXOffset=G.offset;K.inverted&&(S-=.5),I.pointPadding&&(C=Math.ceil(C)),m.translate.apply(W),W.points.forEach(function(J){var N=V(J.yBottom,S),F=999+Math.abs(N),H=n(J.plotY,-F,$.len+F);F=J.plotX+ie;let E=C/2,L=Math.min(H,N);N=Math.max(H,N)-L;var f;let y,b;J.barX=F,J.pointWidth=U,J.tooltipPos=K.inverted?[$.len+$.pos-K.plotLeft-H,W.xAxis.len-F-E,N]:[F+E,H+$.pos-K.plotTop,N],H=M+(J.total||J.y),I.stacking==="percent"&&(H=M+(0>J.y)?-100:100),H=$.toPixels(H,!0);var D=(f=K.plotHeight-H-(K.plotHeight-S))?E*(L-H)/f:0,X=f?E*(L+N-H)/f:0;f=F-D+E,D=F+D+E;var te=F+X+E;X=F-X+E,y=L-k,b=L+N,0>J.y&&(y=L,b=L+N+k),K.inverted&&(te=$.width-L,f=H-($.width-S),D=E*(H-te)/f,X=E*(H-(te-N))/f,f=F+E+D,D=f-2*D,te=F-X+E,X=F+X+E,y=L,b=L+N-k,0>J.y&&(b=L+N+k)),J.shapeType="path",J.shapeArgs={x:f,y,width:D-f,height:N,d:[["M",f,y],["L",D,y],["L",te,b],["L",X,b],["Z"]]}})}}return Q.defaultOptions=T(l.defaultOptions,{}),c.registerSeriesType("columnpyramid",Q),Q}),r(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),r(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m,n){const{arearange:T}=m.seriesTypes,{addEvent:V,merge:Q,extend:z}=n;class W extends l{constructor(){super(...arguments),this.points=this.options=this.data=void 0}getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||c.prototype.getColumnMetrics.call(this)}drawDataLabels(){const I=this.pointValKey;T&&(T.prototype.drawDataLabels.call(this),this.data.forEach(function(O){O.y=O[I]}))}toYData(I){return[I.low,I.high]}}return W.defaultOptions=Q(l.defaultOptions,d),V(W,"afterTranslate",function(){this.points.forEach(K=>{K.plotLow=K.plotY})},{order:0}),z(W.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),m.registerSeriesType("errorbar",W),W}),r(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(l){({series:{prototype:{pointClass:l}}}=l);class c extends l{constructor(){super(...arguments),this.shapeArgs=this.series=this.options=void 0}setState(m){this.state=m}}return c}),r(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m){({noop:c}=c);const{series:n,seriesTypes:{column:T}}=d,{clamp:V,isNumber:Q,extend:z,merge:W,pick:K,pInt:I,defined:O}=m;class $ extends n{constructor(){super(...arguments),this.yAxis=this.options=this.points=this.data=void 0}translate(){const S=this.yAxis,k=this.options,G=S.center;this.generatePoints(),this.points.forEach(U=>{const C=W(k.dial,U.dial),ie=I(C.radius)*G[2]/200,J=I(C.baseLength)*ie/100,N=I(C.rearLength)*ie/100,F=C.baseWidth,H=C.topWidth;let E=k.overshoot,L=S.startAngleRad+S.translate(U.y,void 0,void 0,void 0,!0);(Q(E)||k.wrap===!1)&&(E=Q(E)?E/180*Math.PI:0,L=V(L,S.startAngleRad-E,S.endAngleRad+E)),L=180*L/Math.PI,U.shapeType="path",U.shapeArgs={d:C.path||[["M",-N,-F/2],["L",J,-F/2],["L",ie,-H/2],["L",ie,H/2],["L",J,F/2],["L",-N,F/2],["Z"]],translateX:G[0],translateY:G[1],rotation:L},U.plotX=G[0],U.plotY=G[1],O(U.y)&&S.max-S.min&&(U.percentage=(U.y-S.min)/(S.max-S.min)*100)})}drawPoints(){const S=this,k=S.chart,G=S.yAxis.center,U=S.pivot,C=S.options,ie=C.pivot,J=k.renderer;S.points.forEach(N=>{const F=N.graphic,H=N.shapeArgs,E=H.d,L=W(C.dial,N.dial);F?(F.animate(H),H.d=E):N.graphic=J[N.shapeType](H).addClass("highcharts-dial").add(S.group),k.styledMode||N.graphic[F?"animate":"attr"]({stroke:L.borderColor,"stroke-width":L.borderWidth,fill:L.backgroundColor})}),U?U.animate({translateX:G[0],translateY:G[1]}):ie&&(S.pivot=J.circle(0,0,ie.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(G[0],G[1]).add(S.group),k.styledMode||S.pivot.attr({fill:ie.backgroundColor,stroke:ie.borderColor,"stroke-width":ie.borderWidth}))}animate(S){const k=this;S||k.points.forEach(G=>{const U=G.graphic;U&&(U.attr({rotation:180*k.yAxis.startAngleRad/Math.PI}),U.animate({rotation:G.shapeArgs.rotation},k.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),n.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(S,k){n.prototype.setData.call(this,S,!1),this.processData(),this.generatePoints(),K(k,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return $.defaultOptions=W(n.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),z($.prototype,{angular:!0,directTouch:!0,drawGraph:c,drawTracker:T.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:l,trackerGroups:["group","dataLabelsGroup"]}),d.registerSeriesType("gauge",$),$}),r(t,"Series/DragNodesComposition.js",[t["Core/Utilities.js"]],function(l){function c(){const n=this;let T,V,Q;n.container&&(T=d(n.container,"mousedown",z=>{const W=n.hoverPoint;W&&W.series&&W.series.hasDraggableNodes&&W.series.options.draggable&&(W.series.onMouseDown(W,z),V=d(n.container,"mousemove",K=>W&&W.series&&W.series.onMouseMove(W,K)),Q=d(n.container.ownerDocument,"mouseup",K=>(V(),Q(),W&&W.series&&W.series.onMouseUp(W,K))))})),d(n,"destroy",function(){T()})}const{addEvent:d}=l,m=[];return{compose:function(n){l.pushUnique(m,n)&&d(n,"load",c)},onMouseDown:function(n,T){T=this.chart.pointer.normalize(T),n.fixedPosition={chartX:T.chartX,chartY:T.chartY,plotX:n.plotX,plotY:n.plotY},n.inDragMode=!0},onMouseMove:function(n,T){if(n.fixedPosition&&n.inDragMode){const z=this.chart;T=z.pointer.normalize(T);var V=n.fixedPosition.chartX-T.chartX,Q=n.fixedPosition.chartY-T.chartY;T=z.graphLayoutsLookup,(5<Math.abs(V)||5<Math.abs(Q))&&(V=n.fixedPosition.plotX-V,Q=n.fixedPosition.plotY-Q,z.isInsidePlot(V,Q)&&(n.plotX=V,n.plotY=Q,n.hasDragged=!0,this.redrawHalo(n),T.forEach(W=>{W.restartSimulation()})))}},onMouseUp:function(n,T){n.fixedPosition&&(n.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),n.inDragMode=n.hasDragged=!1,this.options.fixedDraggable||delete n.fixedPosition)},redrawHalo:function(n){n&&this.halo&&this.halo.attr({d:n.haloPath(this.options.states.hover.halo.size)})}}}),r(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Utilities.js"]],function(l,c){function d(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(W=>{W.updateSimulation()}),this.redraw())}function m(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(W=>{W.updateSimulation(!1)}),this.redraw())}function n(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(W=>{W.stop()})}function T(){let W,K=!1;const I=O=>{O.maxIterations--&&isFinite(O.temperature)&&!O.isStable()&&!O.enableSimulation&&(O.beforeStep&&O.beforeStep(),O.step(),W=!1,K=!0)};if(this.graphLayoutsLookup){for(V(!1,this),this.graphLayoutsLookup.forEach(O=>O.start());!W;)W=!0,this.graphLayoutsLookup.forEach(I);K&&this.series.forEach(O=>{O&&O.layout&&O.render()})}}const{setAnimation:V}=l,{addEvent:Q}=c,z=[];return{compose:function(W){c.pushUnique(z,W)&&(Q(W,"afterPrint",d),Q(W,"beforePrint",m),Q(W,"predraw",n),Q(W,"render",T))},integrations:{},layouts:{}}}),r(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(l,c,d){({seriesTypes:{bubble:{prototype:{pointClass:d}}}}=d);class m extends d{constructor(){super(...arguments),this.radius=this.mass=this.degree=NaN,this.series=this.options=void 0,this.value=null}destroy(){return this.series.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),c.prototype.destroy.apply(this,arguments)}firePointEvent(){const T=this.series.options;if(this.isParentNode&&T.parentNode){const V=T.allowPointSelect;T.allowPointSelect=T.parentNode.allowPointSelect,c.prototype.firePointEvent.apply(this,arguments),T.allowPointSelect=V}else c.prototype.firePointEvent.apply(this,arguments)}select(){const T=this.series.chart;this.isParentNode?(T.getSelectedPoints=T.getSelectedParentNodes,c.prototype.select.apply(this,arguments),T.getSelectedPoints=l.prototype.getSelectedPoints):c.prototype.select.apply(this,arguments)}}return m}),r(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(l){const{isNumber:c}=l;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){const{numberFormatter:d}=this.series.chart,{value:m}=this.point;return c(m)?d(m,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),r(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(l,c,d){const m=l.getMass(),n=-d.x*c*this.diffTemperature;c=-d.y*c*this.diffTemperature,l.fromNode.fixedPosition||(l.fromNode.plotX-=n*m.fromNode/l.fromNode.degree,l.fromNode.plotY-=c*m.fromNode/l.fromNode.degree),l.toNode.fixedPosition||(l.toNode.plotX+=n*m.toNode/l.toNode.degree,l.toNode.plotY+=c*m.toNode/l.toNode.degree)},attractiveForceFunction:function(l,c){return(c-l)/l},barycenter:function(){let l=this.options.gravitationalConstant,c=this.barycenter.xFactor,d=this.barycenter.yFactor;c=(c-(this.box.left+this.box.width)/2)*l,d=(d-(this.box.top+this.box.height)/2)*l,this.nodes.forEach(function(m){m.fixedPosition||(m.plotX-=c/m.mass/m.degree,m.plotY-=d/m.mass/m.degree)})},getK:function(l){return Math.pow(l.box.width*l.box.height/l.nodes.length,.5)},integrate:function(l,c){var d=-l.options.friction;let m=l.options.maxSpeed,n=(c.plotX+c.dispX-c.prevX)*d;d*=c.plotY+c.dispY-c.prevY;var T=Math.abs;let V=T(n)/(n||1);T=T(d)/(d||1),n=V*Math.min(m,Math.abs(n)),d=T*Math.min(m,Math.abs(d)),c.prevX=c.plotX+c.dispX,c.prevY=c.plotY+c.dispY,c.plotX+=n,c.plotY+=d,c.temperature=l.vectorLength({x:n,y:d})},repulsive:function(l,c,d){c=c*this.diffTemperature/l.mass/l.degree,l.fixedPosition||(l.plotX+=d.x*c,l.plotY+=d.y*c)},repulsiveForceFunction:function(l,c){return(c-l)/l*(c>l?1:0)}}}),r(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(l,c){return{noop:l}=l,{barycenter:function(){const d=this.options.gravitationalConstant,m=this.box,n=this.nodes;let T,V;for(const Q of n)this.options.splitSeries&&!Q.isParentNode?(T=Q.series.parentNode.plotX,V=Q.series.parentNode.plotY):(T=m.width/2,V=m.height/2),Q.fixedPosition||(Q.plotX-=(Q.plotX-T)*d/(Q.mass*Math.sqrt(n.length)),Q.plotY-=(Q.plotY-V)*d/(Q.mass*Math.sqrt(n.length)))},getK:l,integrate:c.integrate,repulsive:function(d,m,n,T){const V=m*this.diffTemperature/d.mass/d.degree;m=n.x*V,n=n.y*V,d.fixedPosition||(d.plotX+=m,d.plotY+=n),T.fixedPosition||(T.plotX-=m,T.plotY-=n)},repulsiveForceFunction:function(d,m,n,T){return Math.min(d,(n.marker.radius+T.marker.radius)/2)}}}),r(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(l,c,d,m){const n=l.getMass(),T=d.x/m*c;c*=d.y/m,l.fromNode.fixedPosition||(l.fromNode.dispX-=T*n.fromNode/l.fromNode.degree,l.fromNode.dispY-=c*n.fromNode/l.fromNode.degree),l.toNode.fixedPosition||(l.toNode.dispX+=T*n.toNode/l.toNode.degree,l.toNode.dispY+=c*n.toNode/l.toNode.degree)},attractiveForceFunction:function(l,c){return l*l/c},barycenter:function(){const l=this.options.gravitationalConstant,c=this.barycenter.xFactor,d=this.barycenter.yFactor;this.nodes.forEach(function(m){if(!m.fixedPosition){var n=m.getDegree();n*=1+n/2,m.dispX+=(c-m.plotX)*l*n/m.degree,m.dispY+=(d-m.plotY)*l*n/m.degree}})},getK:function(l){return Math.pow(l.box.width*l.box.height/l.nodes.length,.3)},integrate:function(l,c){let d;c.dispX+=c.dispX*l.options.friction,c.dispY+=c.dispY*l.options.friction,d=c.temperature=l.vectorLength({x:c.dispX,y:c.dispY}),d!==0&&(c.plotX+=c.dispX/d*Math.min(Math.abs(c.dispX),l.temperature),c.plotY+=c.dispY/d*Math.min(Math.abs(c.dispY),l.temperature))},repulsive:function(l,c,d,m){l.dispX+=d.x/m*c/l.degree,l.dispY+=d.y/m*c/l.degree},repulsiveForceFunction:function(l,c){return c*c/l}}}),r(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class l{constructor(d){this.isInternal=this.isEmpty=this.body=!1,this.nodes=[],this.box=d,this.boxSize=Math.min(d.width,d.height)}divideBox(){const d=this.box.width/2,m=this.box.height/2;this.nodes[0]=new l({left:this.box.left,top:this.box.top,width:d,height:m}),this.nodes[1]=new l({left:this.box.left+d,top:this.box.top,width:d,height:m}),this.nodes[2]=new l({left:this.box.left+d,top:this.box.top+m,width:d,height:m}),this.nodes[3]=new l({left:this.box.left,top:this.box.top+m,width:d,height:m})}getBoxPosition(d){const m=d.plotY<this.box.top+this.box.height/2;return d.plotX<this.box.left+this.box.width/2?m?0:3:m?1:2}insert(d,m){this.isInternal?this.nodes[this.getBoxPosition(d)].insert(d,m-1):(this.isEmpty=!1,this.body?m?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,m-1),this.body=!0),this.nodes[this.getBoxPosition(d)].insert(d,m-1)):(m=new l({top:d.plotX||NaN,left:d.plotY||NaN,width:.1,height:.1}),m.body=d,m.isInternal=!1,this.nodes.push(m)):(this.isInternal=!1,this.body=d))}updateMassAndCenter(){let d=0,m=0,n=0;if(this.isInternal){for(const T of this.nodes)T.isEmpty||(d+=T.mass,m+=T.plotX*T.mass,n+=T.plotY*T.mass);m/=d,n/=d}else this.body&&(d=this.body.mass,m=this.body.plotX,n=this.body.plotY);this.mass=d,this.plotX=m,this.plotY=n}}return l}),r(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(l){class c{constructor(m,n,T,V){this.box={left:m,top:n,width:T,height:V},this.maxDepth=25,this.root=new l(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(m){m.updateMassAndCenter()})}insertNodes(m){for(const n of m)this.root.insert(n,this.maxDepth)}visitNodeRecursive(m,n,T){let V;if(m||(m=this.root),m===this.root&&n&&(V=n(m)),V!==!1){for(const Q of m.nodes){if(Q.isInternal){if(n&&(V=n(Q)),V===!1)continue;this.visitNodeRecursive(Q,n,T)}else Q.body&&n&&n(Q.body);T&&T(Q)}m===this.root&&T&&T(m)}}}return c}),r(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(l,c,d,m,n,T){const{win:V}=c,{clamp:Q,defined:z,isFunction:W,fireEvent:K,pick:I}=n;class O{constructor(){this.attractiveForce=void 0,this.box={},this.currentStep=0,this.initialRendering=!0,this.integration=void 0,this.links=[],this.nodes=[],this.repulsiveForce=this.quadTree=this.options=void 0,this.series=[],this.simulation=!1}static compose(M){d.compose(M),d.integrations.euler=l,d.integrations.verlet=T,d.layouts["reingold-fruchterman"]=O}init(M){this.options=M,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=d.integrations[M.integration],this.enableSimulation=M.enableSimulation,this.attractiveForce=I(M.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=I(M.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=M.approximation}updateSimulation(M){this.enableSimulation=I(M,this.options.enableSimulation)}start(){const M=this.series,S=this.options;this.currentStep=0,this.forces=M[0]&&M[0].forces||[],this.chart=M[0]&&M[0].chart,this.initialRendering&&(this.initPositions(),M.forEach(function(k){k.finishedAnimating=!0,k.render()})),this.setK(),this.resetSimulation(S),this.enableSimulation&&this.step()}step(){const M=this.series;this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter());for(const S of this.forces||[])this[S+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(const S of M)S.chart&&S.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&V.cancelAnimationFrame(this.simulation),this.simulation=V.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(S=>{K(S,"afterSimulation")}))}}stop(){this.simulation&&V.cancelAnimationFrame(this.simulation)}setArea(M,S,k,G){this.box={left:M,top:S,width:k,height:G}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(M,S){for(const k of M)S.indexOf(k)===-1&&S.push(k)}removeElementFromCollection(M,S){M=S.indexOf(M),M!==-1&&S.splice(M,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(M){this.maxIterations=I(M,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(M){this.initialRendering=M}createQuadTree(){this.quadTree=new m(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){const M=this.options.initialPositions;if(W(M)){M.call(this);for(const S of this.nodes)z(S.prevX)||(S.prevX=S.plotX),z(S.prevY)||(S.prevY=S.plotY),S.dispX=0,S.dispY=0}else M==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){const M=this.box;var S=this.nodes;const k=2*Math.PI/(S.length+1),G=S.filter(function(N){return N.linksTo.length===0}),U={},C=this.options.initialPositionRadius,ie=N=>{for(const F of N.linksFrom||[])U[F.toNode.id]||(U[F.toNode.id]=!0,J.push(F.toNode),ie(F.toNode))};let J=[];for(const N of G)J.push(N),ie(N);if(J.length)for(const N of S)J.indexOf(N)===-1&&J.push(N);else J=S;for(let N=0,F=J.length;N<F;++N)S=J[N],S.plotX=S.prevX=I(S.plotX,M.width/2+C*Math.cos(N*k)),S.plotY=S.prevY=I(S.plotY,M.height/2+C*Math.sin(N*k)),S.dispX=0,S.dispY=0}setRandomPositions(){const M=this.box,S=this.nodes,k=S.length+1,G=C=>(C=C*C/Math.PI,C-=Math.floor(C));let U;for(let C=0,ie=S.length;C<ie;++C)U=S[C],U.plotX=U.prevX=I(U.plotX,M.width*G(C)),U.plotY=U.prevY=I(U.plotY,M.height*G(k+C)),U.dispX=0,U.dispY=0}force(M,...S){this.integration[M].apply(this,S)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let M=0,S=0,k=0;for(const G of this.nodes)S+=G.plotX*G.mass,k+=G.plotY*G.mass,M+=G.mass;return this.barycenter={x:S,y:k,xFactor:S/M,yFactor:k/M}}barnesHutApproximation(M,S){const k=this.getDistXY(M,S),G=this.vectorLength(k);let U,C;return M!==S&&G!==0&&(S.isInternal?S.boxSize/G<this.options.theta&&G!==0?(C=this.repulsiveForce(G,this.k),this.force("repulsive",M,C*S.mass,k,G),U=!1):U=!0:(C=this.repulsiveForce(G,this.k),this.force("repulsive",M,C*S.mass,k,G))),U}repulsiveForces(){if(this.approximation==="barnes-hut")for(const M of this.nodes)this.quadTree.visitNodeRecursive(null,S=>this.barnesHutApproximation(M,S));else{let M,S,k;for(const G of this.nodes)for(const U of this.nodes)G===U||G.fixedPosition||(k=this.getDistXY(G,U),S=this.vectorLength(k),S!==0&&(M=this.repulsiveForce(S,this.k),this.force("repulsive",G,M*U.mass,k,S)))}}attractiveForces(){let M,S,k;for(const G of this.links)G.fromNode&&G.toNode&&(M=this.getDistXY(G.fromNode,G.toNode),S=this.vectorLength(M),S!==0&&(k=this.attractiveForce(S,this.k),this.force("attractive",G,k,M,S)))}applyLimits(){const M=this.nodes;for(const S of M){if(S.fixedPosition)break;this.integration.integrate(this,S),this.applyLimitBox(S,this.box),S.dispX=0,S.dispY=0}}applyLimitBox(M,S){const k=M.radius;M.plotX=Q(M.plotX,S.left+k,S.width-k),M.plotY=Q(M.plotY,S.top+k,S.height-k)}coolDown(M,S,k){return M-S*k}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||0>=this.temperature}getSystemTemperature(){let M=0;for(const S of this.nodes)M+=S.temperature;return M}vectorLength(M){return Math.sqrt(M.x*M.x+M.y*M.y)}getDistR(M,S){return M=this.getDistXY(M,S),this.vectorLength(M)}getDistXY(M,S){const k=M.plotX-S.plotX;return M=M.plotY-S.plotY,{x:k,y:M,absX:Math.abs(k),absY:Math.abs(M)}}}return O}),r(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(l,c,d,m){function n(){const K=[];return this.series.forEach(I=>{I.parentNode&&I.parentNode.selected&&K.push(I.parentNode)}),K}function T(){this.allDataPoints&&delete this.allDataPoints}const{addEvent:V,pick:Q}=m,z=[];class W extends d{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.options=void 0,this.series=[]}static compose(I){d.compose(I),l.integrations.packedbubble=c,l.layouts.packedbubble=W,m.pushUnique(z,I)&&(V(I,"beforeRedraw",T),I.prototype.getSelectedParentNodes=n)}beforeStep(){this.options.marker&&this.series.forEach(I=>{I&&I.calculateParentRadius()})}isStable(){const I=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&1e-5>I||0>=this.temperature}setCircularPositions(){const I=this.box;var O=this.nodes;const $=2*Math.PI/(O.length+1),M=this.options.initialPositionRadius;let S,k=0;for(const G of O)this.options.splitSeries&&!G.isParentNode?(O=G.series.parentNode.plotX,S=G.series.parentNode.plotY):(O=I.width/2,S=I.height/2),G.plotX=G.prevX=Q(G.plotX,O+M*Math.cos(G.index||k*$)),G.plotY=G.prevY=Q(G.plotY,S+M*Math.sin(G.index||k*$)),G.dispX=0,G.dispY=0,k++}repulsiveForces(){const I=this,O=I.options.bubblePadding;let $,M,S;I.nodes.forEach(k=>{k.degree=k.mass,k.neighbours=0,I.nodes.forEach(G=>{$=0,k===G||k.fixedPosition||!I.options.seriesInteraction&&k.series!==G.series||(S=I.getDistXY(k,G),M=I.vectorLength(S)-(k.marker.radius+G.marker.radius+O),0>M&&(k.degree+=.01,k.neighbours++,$=I.repulsiveForce(-M/Math.sqrt(k.neighbours),I.k,k,G)),I.force("repulsive",k,$*G.mass,S,G,M))})})}applyLimitBox(I,O){let $,M;this.options.splitSeries&&!I.isParentNode&&this.options.parentNodeLimit&&($=this.getDistXY(I,I.series.parentNode),M=I.series.parentNodeRadius-I.marker.radius-this.vectorLength($),0>M&&M>-2*I.marker.radius&&(I.plotX-=.01*$.x,I.plotY-=.01*$.y)),super.applyLimitBox(I,O)}}return l.layouts.packedbubble=W}),r(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(l,c){const{syncTimeout:d}=l,{animObject:m}=c;return{initDataLabels:function(){const n=this.options.dataLabels;if(!this.dataLabelsGroup){const T=this.initDataLabelsGroup();return!this.chart.styledMode&&(n!=null&&n.style)&&T.css(n.style),T.attr({opacity:0}),this.visible&&T.show(),T}return this.dataLabelsGroup.attr({opacity:1}),this.dataLabelsGroup},initDataLabelsDefer:function(){var n;const T=this.options.dataLabels;T!=null&&T.defer&&(!((n=this.options.layoutAlgorithm)===null||n===void 0)&&n.enableSimulation)?d(()=>{this.deferDataLabels=!1},T?m(T.animation).defer:0):this.deferDataLabels=!1}}}),r(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(l,c,d,m,n,T,V,Q,z,W,K){const{parse:I}=l;({noop:l}=m);const{series:{prototype:O},seriesTypes:{bubble:$}}=Q,{initDataLabels:M,initDataLabelsDefer:S}=z,{addEvent:k,clamp:G,defined:U,extend:C,fireEvent:ie,isArray:J,isNumber:N,merge:F,pick:H}=W;class E extends ${constructor(){super(...arguments),this.options=this.layout=this.data=this.chart=void 0,this.parentNodeMass=0,this.xData=this.points=void 0,this.deferDataLabels=!0}static compose(f,y,b,D){$.compose(f,y,b,D),c.compose(y),V.compose(y)}accumulateAllPoints(){const f=this.chart,y=[];let b;for(const D of f.series)if(D.is("packedbubble")&&D.visible||!f.options.chart.ignoreHiddenSeries){b=D.yData||[];for(let X=0;X<b.length;X++)y.push([null,null,b[X],D.index,X,{id:X,marker:{radius:0}}])}return y}addLayout(){const f=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},y=f.type||"packedbubble",b=this.chart.options.chart;let D=this.chart.graphLayoutsStorage,X=this.chart.graphLayoutsLookup,te;D||(this.chart.graphLayoutsStorage=D={},this.chart.graphLayoutsLookup=X=[]),te=D[y],te||(f.enableSimulation=U(b.forExport)?!b.forExport:f.enableSimulation,D[y]=te=new d.layouts[y],te.init(f),X.splice(te.index,0,te)),this.layout=te,this.points.forEach(q=>{q.mass=2,q.degree=1,q.collisionNmb=1}),te.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),te.addElementsToCollection([this],te.series),te.addElementsToCollection(this.points,te.nodes)}addSeriesLayout(){var f=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{};const y=f.type||"packedbubble",b=this.chart.graphLayoutsStorage,D=this.chart.graphLayoutsLookup;f=F(f,f.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation});let X=b[y+"-series"];X||(b[y+"-series"]=X=new d.layouts[y],X.init(f),D.splice(X.index,0,X)),this.parentNodeLayout=X,this.createParentNodes()}calculateParentRadius(){const f=this.seriesBox();this.parentNodeRadius=G(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,f?Math.max(Math.sqrt(Math.pow(f.width,2)+Math.pow(f.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let f=this.options.zMin,y=this.options.zMax,b=1/0,D=-1/0;return f&&y?[f,y]:(this.chart.series.forEach(X=>{X.yData.forEach(te=>{U(te)&&(te>D&&(D=te),te<b&&(b=te))})}),f=H(f,b),y=H(y,D),[f,y])}checkOverlap(f,y){const b=f[0]-y[0],D=f[1]-y[1];return-.001>Math.sqrt(b*b+D*D)-Math.abs(f[2]+y[2])}createParentNodes(){const f=this.pointClass,y=this.chart,b=this.parentNodeLayout,D=this.layout.options;let X,te=this.parentNode,q={radius:this.parentNodeRadius,lineColor:this.color,fillColor:I(this.color).brighten(.4).get()};D.parentNodeOptions&&(q=F(D.parentNodeOptions.marker||{},q)),this.parentNodeMass=0,this.points.forEach(ce=>{this.parentNodeMass+=Math.PI*Math.pow(ce.marker.radius,2)}),this.calculateParentRadius(),b.nodes.forEach(ce=>{ce.seriesIndex===this.index&&(X=!0)}),b.setArea(0,0,y.plotWidth,y.plotHeight),X||(te||(te=new f().init(this,{mass:this.parentNodeRadius/2,marker:q,dataLabels:{inside:!1},states:{normal:{marker:q},hover:{marker:q}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(te.plotX=this.parentNode.plotX,te.plotY=this.parentNode.plotY),this.parentNode=te,b.addElementsToCollection([this],b.series),b.addElementsToCollection([te],b.nodes))}deferLayout(){const f=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),f.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(f=>{f.removeElementFromCollection(this,f.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),O.destroy.apply(this,arguments)}drawDataLabels(){this.deferDataLabels||(O.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",O.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){if(this.layout&&this.layout.options.splitSeries){var f=this.chart,y=this.layout.options.parentNodeOptions.marker;y={fill:y.fillColor||I(this.color).brighten(.4).get(),opacity:y.fillOpacity,stroke:y.lineColor||this.color,"stroke-width":H(y.lineWidth,this.options.lineWidth)},this.parentNodesGroup||(this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,f.seriesGroup),this.group.attr({zIndex:2})),this.calculateParentRadius();var b=F({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},y);this.parentNode.graphic||(this.graph=this.parentNode.graphic=f.renderer.symbol(y.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(b)}}drawTracker(){const f=this.parentNode;let y;super.drawTracker(),f&&(y=J(f.dataLabels)?f.dataLabels:f.dataLabel?[f.dataLabel]:[],f.graphic&&(f.graphic.element.point=f),y.forEach(b=>{b.div?b.div.point=f:b.element.point=f}))}getPointRadius(){const f=this.chart,y=this.options,b=y.useSimulation,D=Math.min(f.plotWidth,f.plotHeight),X={},te=[],q=f.allDataPoints||[],ce=q.length;let fe,we,Z,se;["minSize","maxSize"].forEach(ye=>{const Pe=parseInt(y[ye],10),ae=/%$/.test(y[ye]);X[ye]=ae?D*Pe/100:Pe*Math.sqrt(ce)}),f.minRadius=fe=X.minSize/Math.sqrt(ce),f.maxRadius=we=X.maxSize/Math.sqrt(ce);const ue=b?this.calculateZExtremes():[fe,we];q.forEach((ye,Pe)=>{Z=b?G(ye[2],ue[0],ue[1]):ye[2],se=this.getRadius(ue[0],ue[1],fe,we,Z),se===0&&(se=null),q[Pe][2]=se,te.push(se)}),this.radii=te}init(){return O.init.apply(this,arguments),S.call(this),this.eventsToUnbind.push(k(this,"updatedData",function(){this.chart.series.forEach(f=>{f.type===this.type&&(f.isDirty=!0)},this)})),this}onMouseUp(f){const y=f;if(y.fixedPosition&&!y.removed){const b=this.layout,D=this.parentNodeLayout;let X,te;D&&b.options.dragBetweenSeries&&D.nodes.forEach(q=>{y&&y.marker&&q!==y.series.parentNode&&(X=b.getDistXY(y,q),te=b.vectorLength(X)-q.marker.radius-y.marker.radius,0>te&&(q.series.addPoint(F(y.options,{plotX:y.plotX,plotY:y.plotY}),!1),b.removeElementFromCollection(y,b.nodes),y.remove()))}),c.onMouseUp.apply(this,arguments)}}placeBubbles(f){const y=this.checkOverlap,b=this.positionBubble,D=[];let X=1,te=0,q=0;var ce=[];let fe;if(f=f.sort((we,Z)=>Z[2]-we[2]),f.length){if(D.push([[0,0,f[0][2],f[0][3],f[0][4]]]),1<f.length)for(D.push([[0,0-f[1][2]-f[0][2],f[1][2],f[1][3],f[1][4]]]),fe=2;fe<f.length;fe++)f[fe][2]=f[fe][2]||1,ce=b(D[X][te],D[X-1][q],f[fe]),y(ce,D[X][0])?(D.push([]),q=0,D[X+1].push(b(D[X][te],D[X][0],f[fe])),X++,te=0):1<X&&D[X-1][q+1]&&y(ce,D[X-1][q+1])?(q++,D[X].push(b(D[X][te],D[X-1][q],f[fe])),te++):(te++,D[X].push(ce));this.chart.stages=D,this.chart.rawPositions=[].concat.apply([],D),this.resizeRadius(),ce=this.chart.rawPositions}return ce}pointAttribs(f,y){var b=this.options;let D=b.marker;return f&&f.isParentNode&&b.layoutAlgorithm&&b.layoutAlgorithm.parentNodeOptions&&(D=b.layoutAlgorithm.parentNodeOptions.marker),b=D.fillOpacity,f=O.pointAttribs.call(this,f,y),b!==1&&(f["fill-opacity"]=b),f}positionBubble(f,y,b){var D=Math.sqrt,X=Math.asin,te=Math.acos;const q=Math.pow,ce=Math.abs;return D=D(q(f[0]-y[0],2)+q(f[1]-y[1],2)),te=te((q(D,2)+q(b[2]+y[2],2)-q(b[2]+f[2],2))/(2*(b[2]+y[2])*D)),X=X(ce(f[0]-y[0])/D),f=(0>f[1]-y[1]?0:Math.PI)+te+X*(0>(f[0]-y[0])*(f[1]-y[1])?1:-1),[y[0]+(y[2]+b[2])*Math.sin(f),y[1]-(y[2]+b[2])*Math.cos(f),b[2],b[3],b[4]]}render(){const f=[];O.render.apply(this,arguments),this.options.dataLabels.allowOverlap||(this.data.forEach(y=>{J(y.dataLabels)&&y.dataLabels.forEach(b=>{f.push(b)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(f))}resizeRadius(){const f=this.chart,y=f.rawPositions;var b=Math.min,D=Math.max;const X=f.plotLeft,te=f.plotTop,q=f.plotHeight,ce=f.plotWidth;let fe,we,Z,se,ue;fe=Z=Number.POSITIVE_INFINITY,we=se=Number.NEGATIVE_INFINITY;for(const ye of y)ue=ye[2],fe=b(fe,ye[0]-ue),we=D(we,ye[0]+ue),Z=b(Z,ye[1]-ue),se=D(se,ye[1]+ue);if(D=[we-fe,se-Z],b=b.apply([],[(ce-X)/D[0],(q-te)/D[1]]),1e-10<Math.abs(b-1)){for(const ye of y)ye[2]*=b;this.placeBubbles(y)}else f.diffY=q/2+te-Z-(se-Z)/2,f.diffX=ce/2+X-fe-(we-fe)/2}seriesBox(){const f=this.chart,y=Math.max,b=Math.min,D=[f.plotLeft,f.plotLeft+f.plotWidth,f.plotTop,f.plotTop+f.plotHeight];let X;return this.data.forEach(te=>{U(te.plotX)&&U(te.plotY)&&te.marker.radius&&(X=te.marker.radius,D[0]=b(D[0],te.plotX-X),D[1]=y(D[1],te.plotX+X),D[2]=b(D[2],te.plotY-X),D[3]=y(D[3],te.plotY+X))}),N(D.width/D.height)?D:null}setVisible(){const f=this;O.setVisible.apply(f,arguments),f.parentNodeLayout&&f.graph?f.visible?(f.graph.show(),f.parentNode.dataLabel&&f.parentNode.dataLabel.show()):(f.graph.hide(),f.parentNodeLayout.removeElementFromCollection(f.parentNode,f.parentNodeLayout.nodes),f.parentNode.dataLabel&&f.parentNode.dataLabel.hide()):f.layout&&(f.visible?f.layout.addElementsToCollection(f.points,f.layout.nodes):f.points.forEach(y=>{f.layout.removeElementFromCollection(y,f.layout.nodes)}))}translate(){const f=this.chart,y=this.data,b=this.index,D=this.options.useSimulation;let X;if(this.processedXData=this.xData,this.generatePoints(),U(f.allDataPoints)||(f.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),D)var te=f.allDataPoints;else te=this.placeBubbles(f.allDataPoints),this.options.draggable=!1;for(const q of te)q[3]===b&&(te=y[q[4]],X=H(q[2],void 0),D||(te.plotX=q[0]-f.plotLeft+f.diffX,te.plotY=q[1]-f.plotTop+f.diffY),N(X)&&(te.marker=C(te.marker,{radius:X,width:2*X,height:2*X}),te.radius=X));D&&this.deferLayout(),ie(this,"afterTranslate")}}return E.defaultOptions=F($.defaultOptions,T),C(E.prototype,{pointClass:n,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:M,alignDataLabel:O.alignDataLabel,indexateNodes:l,onMouseDown:c.onMouseDown,onMouseMove:c.onMouseMove,redrawHalo:c.redrawHalo,searchPoint:l}),Q.registerSeriesType("packedbubble",E),E}),r(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d){({noop:l}=l);const{series:m,seriesTypes:{area:n,line:T,scatter:V}}=c,{extend:Q,merge:z}=d;class W extends V{constructor(){super(...arguments),this.points=this.options=this.data=void 0}getGraphPath(){let I=T.prototype.getGraphPath.call(this),O=I.length+1;for(;O--;)(O===I.length||I[O][0]==="M")&&0<O&&I.splice(O,0,["Z"]);return this.areaPath=I}drawGraph(){this.options.fillColor=this.color,n.prototype.drawGraph.call(this)}}return W.defaultOptions=z(V.defaultOptions,{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}),Q(W.prototype,{type:"polygon",drawTracker:m.prototype.drawTracker,setStackedPoints:l}),c.registerSeriesType("polygon",W),W}),r(t,"Core/Axis/WaterfallAxis.js",[t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(l,c){const{addEvent:d,objectEach:m}=c;var n;return function(T){function V(){const I=this.waterfall.stacks;I&&(I.changed=!1,delete I.alreadyChanged)}function Q(){const I=this.options.stackLabels;I&&I.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function z(){let I=this.axes,O=this.series,$=O.length;for(;$--;)O[$].options.stacking&&(I.forEach(function(M){M.isXAxis||(M.waterfall.stacks.changed=!0)}),$=0)}function W(){this.waterfall||(this.waterfall=new K(this))}class K{constructor(O){this.axis=O,this.stacks={changed:!1}}renderStackTotals(){const O=this.axis,$=O.waterfall.stacks,M=O.stacking&&O.stacking.stackTotalGroup,S=new l(O,O.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=S,M&&m($,function(k){m(k,function(G,U){S.total=G.stackTotal,S.x=+U,G.label&&(S.label=G.label),l.prototype.render.call(S,M),G.label=S.label,delete S.label})}),S.total=null}}T.Composition=K,T.compose=function(I,O){d(I,"init",W),d(I,"afterBuildStacks",V),d(I,"afterRender",Q),d(O,"beforeRedraw",z)}}(n||(n={})),n}),r(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(l,c,d){const{isNumber:m}=d;class n extends l.prototype.pointClass{constructor(){super(...arguments),this.series=this.options=void 0}getClassName(){let V=c.prototype.getClassName.call(this);return this.isSum?V+=" highcharts-sum":this.isIntermediateSum&&(V+=" highcharts-intermediate-sum"),V}isValid(){return m(this.y)||this.isSum||!!this.isIntermediateSum}}return n}),r(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Axis/Axis.js"],t["Core/Chart/Chart.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"]],function(l,c,d,m,n,T){const{seriesTypes:{column:V,line:Q}}=d,{addEvent:z,arrayMax:W,arrayMin:K,correctFloat:I,extend:O,isNumber:$,merge:M,objectEach:S,pick:k}=m;class G extends V{constructor(){super(...arguments),this.yData=this.yAxis=this.xData=this.stackKey=this.stackedYPos=this.stackedYNeg=this.points=this.options=this.data=this.chart=void 0}generatePoints(){V.prototype.generatePoints.apply(this);for(let C=0,ie=this.points.length;C<ie;C++){const J=this.points[C],N=this.processedYData[C];$(N)&&(J.isIntermediateSum||J.isSum)&&(J.y=I(N))}}processData(C){let ie=this.options,J=this.yData,N=ie.data,F,H=J.length,E=ie.threshold||0,L,f,y,b,D,X;for(X=f=L=y=b=0;X<H;X++)D=J[X],F=N&&N[X]?N[X]:{},D==="sum"||F.isSum?J[X]=I(f):D==="intermediateSum"||F.isIntermediateSum?(J[X]=I(L),L=0):(f+=D,L+=D),y=Math.min(f,y),b=Math.max(f,b);super.processData.call(this,C),ie.stacking||(this.dataMin=y+E,this.dataMax=b)}toYData(C){return C.isSum?"sum":C.isIntermediateSum?"intermediateSum":C.y}updateParallelArrays(C,ie){super.updateParallelArrays.call(this,C,ie),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(C,ie){const J=this.options.upColor;return J&&!C.options.color&&$(C.y)&&(C.color=0<C.y?J:void 0),C=V.prototype.pointAttribs.call(this,C,ie),delete C.dashstyle,C}getGraphPath(){return[["M",0,0]]}getCrispPath(){let C=this.data.filter(X=>$(X.y)),ie=this.yAxis,J=C.length,N=Math.round(this.graph.strokeWidth())%2/2,F=Math.round(this.borderWidth)%2/2,H=this.xAxis.reversed,E=this.yAxis.reversed,L=this.options.stacking,f=[];for(let X=1;X<J;X++){if(!this.options.connectNulls&&!$(this.data[C[X].index-1].y))continue;var y=C[X].box,b=C[X-1];const te=b.y||0,q=C[X-1].box;if(!y||!q)continue;var D=ie.waterfall.stacks[this.stackKey];const ce=0<te?-q.height:0;D&&q&&y&&(D=D[X-1],b=L?Math.round(ie.translate(D.connectorThreshold,!1,!0,!1,!0)+(E?ce:0))-N:q.y+b.minPointLengthOffset+F-N,f.push(["M",(q.x||0)+(H?0:q.width||0),b],["L",(y.x||0)+(H&&y.width||0),b])),q&&f.length&&(!L&&0>te&&!E||0<te&&E)&&((y=f[f.length-2])&&typeof y[2]=="number"&&(y[2]+=q.height||0),(y=f[f.length-1])&&typeof y[2]=="number"&&(y[2]+=q.height||0))}return f}drawGraph(){Q.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(){function C(ue,ye,Pe,ae){if(y){if(te)for(Pe;Pe<te;Pe++)y.stackState[Pe]+=ae;else y.stackState[0]=ue,te=y.stackState.length;y.stackState.push(y.stackState[te-1]+ye)}}let ie=this.options,J=this.yAxis.waterfall.stacks,N=ie.threshold||0,F=N,H=F,E=this.stackKey,L=this.xData,f=L.length,y,b,D,X,te,q,ce,fe;var we;let Z;if(this.yAxis.stacking.usePercentage=!1,b=D=X=F,this.visible||!this.chart.options.chart.ignoreHiddenSeries){if(Z=J.changed,(we=J.alreadyChanged)&&0>we.indexOf(E)&&(Z=!0),J[E]||(J[E]={}),we=J[E])for(let ue=0;ue<f;ue++){var se=L[ue];(!we[se]||Z)&&(we[se]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:Z&&we[se]?we[se].label:void 0}),y=we[se],fe=this.yData[ue],0<=fe?y.posTotal+=fe:y.negTotal+=fe,ce=ie.data[ue],se=y.absolutePos=y.posTotal,q=y.absoluteNeg=y.negTotal,y.stackTotal=se+q,te=y.stackState.length,ce&&ce.isIntermediateSum?(C(X,D,0,X),X=D,D=N,F^=H,H^=F,F^=H):ce&&ce.isSum?(C(N,b,te,0),F=N):(C(F,fe,0,b),ce&&(b+=fe,D+=fe)),y.stateIndex++,y.threshold=F,F+=y.stackTotal}J.changed=!1,J.alreadyChanged||(J.alreadyChanged=[]),J.alreadyChanged.push(E)}}getExtremes(){let C=this.options.stacking,ie,J;if(C){var N=this.yAxis;return N=N.waterfall.stacks,ie=this.stackedYNeg=[],J=this.stackedYPos=[],C==="overlap"?S(N[this.stackKey],function(F){ie.push(K(F.stackState)),J.push(W(F.stackState))}):S(N[this.stackKey],function(F){ie.push(F.negTotal+F.threshold),J.push(F.posTotal+F.threshold)}),{dataMin:K(ie),dataMax:W(J)}}return{dataMin:this.dataMin,dataMax:this.dataMax}}}return G.defaultOptions=M(V.defaultOptions,{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}),z(G,"afterColumnTranslate",function(){const{options:U,points:C,yAxis:ie}=this,J=k(U.minPointLength,5),N=J/2,F=U.threshold||0,H=U.stacking,E=ie.waterfall.stacks[this.stackKey];let L=F,f=F;for(let te=0;te<C.length;te++){const q=C[te];var y=this.processedYData[te];const ce=O({x:0,y:0,width:0,height:0},q.shapeArgs||{});q.box=ce;var b=[0,y],D=q.y||0;if(H){if(E){if(b=E[te],H==="overlap"){var X=b.stackState[b.stateIndex--];X=0<=D?X:X-D,Object.hasOwnProperty.call(b,"absolutePos")&&delete b.absolutePos,Object.hasOwnProperty.call(b,"absoluteNeg")&&delete b.absoluteNeg}else 0<=D?(X=b.threshold+b.posTotal,b.posTotal-=D):(X=b.threshold+b.negTotal,b.negTotal-=D,X-=D),!b.posTotal&&$(b.absolutePos)&&Object.hasOwnProperty.call(b,"absolutePos")&&(b.posTotal=b.absolutePos,delete b.absolutePos),!b.negTotal&&$(b.absoluteNeg)&&Object.hasOwnProperty.call(b,"absoluteNeg")&&(b.negTotal=b.absoluteNeg,delete b.absoluteNeg);q.isSum||(b.connectorThreshold=b.threshold+b.stackTotal),ie.reversed?y=0<=D?X-D:X+D:(y=X,X-=D),q.below=y<=F,ce.y=ie.translate(y,!1,!0,!1,!0),ce.height=Math.abs(ce.y-ie.translate(X,!1,!0,!1,!0)),(X=ie.waterfall.dummyStackItem)&&(X.x=te,X.label=E[te].label,X.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[te],this.stackedYPos[te],void 0,this.xAxis))}}else X=Math.max(f,f+D)+b[0],ce.y=ie.translate(X,!1,!0,!1,!0),q.isSum?(ce.y=ie.translate(b[1],!1,!0,!1,!0),ce.height=Math.min(ie.translate(b[0],!1,!0,!1,!0),ie.len)-ce.y,q.below=b[1]<=F):q.isIntermediateSum?(0<=D?(y=b[1]+L,X=L):(y=L,X=b[1]+L),ie.reversed&&(y^=X,X^=y,y^=X),ce.y=ie.translate(y,!1,!0,!1,!0),ce.height=Math.abs(ce.y-Math.min(ie.translate(X,!1,!0,!1,!0),ie.len)),L+=b[1],q.below=y<=F):(ce.height=0<y?ie.translate(f,!1,!0,!1,!0)-ce.y:ie.translate(f,!1,!0,!1,!0)-ie.translate(f-y,!1,!0,!1,!0),f+=y,q.below=f<F),0>ce.height&&(ce.y+=ce.height,ce.height*=-1);q.plotY=ce.y=Math.round(ce.y||0)-this.borderWidth%2/2,ce.height=Math.max(Math.round(ce.height||0),.001),q.yBottom=ce.y+ce.height,ce.height<=J&&!q.isNull?(ce.height=J,ce.y-=N,q.plotY=ce.y,q.minPointLengthOffset=0>D?-N:N):(q.isNull&&(ce.width=0),q.minPointLengthOffset=0),D=q.plotY+(q.negative?ce.height:0),q.below&&(q.plotY+=ce.height),q.tooltipPos&&(this.chart.inverted?q.tooltipPos[0]=ie.len-D:q.tooltipPos[1]=D),q.isInside=this.isPointInside(q),M(!0,q.shapeArgs,ce)}},{order:2}),O(G.prototype,{getZonesGraphs:Q.prototype.getZonesGraphs,pointValKey:"y",showLine:!0,pointClass:T}),d.registerSeriesType("waterfall",G),n.compose(l,c),G}),r(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/AxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(l,c,d,m){const{defaultOptions:n}=c,{noop:T}=d,{addEvent:V,correctFloat:Q,defined:z,extend:W,fireEvent:K,merge:I,pick:O,relativeLength:$,wrap:M}=m;var S;return function(k){function G(){this.autoConnect=this.isCircular&&typeof O(this.userMax,this.options.max)>"u"&&Q(this.endAngleRad-this.startAngleRad)===Q(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function U(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(le=>this.ticks[le]&&this.ticks[le].label).filter(le=>!!le)}}function C(){return T}function ie(le,me,be){const Le=this.pane.center;let De=le.value,Ne;if(this.isCircular){if(z(De))le.point&&(st=le.point.shapeArgs||{},st.start&&(De=this.chart.inverted?this.translate(le.point.rectPlotY,!0):le.point.x));else{var st=le.chartX||0;Ne=le.chartY||0,De=this.translate(Math.atan2(Ne-be,st-me)-this.startAngleRad,!0)}le=this.getPosition(De),st=le.x,Ne=le.y}else z(De)||(st=le.chartX,Ne=le.chartY),z(st)&&z(Ne)&&(be=Le[1]+this.chart.plotTop,De=this.translate(Math.min(Math.sqrt(Math.pow(st-me,2)+Math.pow(Ne-be,2)),Le[2]/2)-Le[3]/2,!0));return[De,st||0,Ne||0]}function J(le,me,be){le=this.pane.center;const Le=this.chart,De=this.left||0,Ne=this.top||0;let st=O(me,le[2]/2-this.offset);return typeof be>"u"&&(be=this.horiz?0:this.center&&-this.center[3]/2),be&&(st+=be),this.isCircular||typeof me<"u"?(me=this.chart.renderer.symbols.arc(De+le[0],Ne+le[1],st,st,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0}),me.xBounds=[De+le[0]],me.yBounds=[Ne+le[1]-st]):(me=this.postTranslate(this.angleRad,st),me=[["M",this.center[0]+Le.plotLeft,this.center[1]+Le.plotTop],["L",me.x,me.y]]),me}function N(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function F(le,me,be){const Le=this.chart;var De=Vt=>{if(typeof Vt=="string"){let yi=parseInt(Vt,10);return Ue.test(Vt)&&(yi=yi*it/100),yi}return Vt};const Ne=this.center;var st=this.startAngleRad;const it=Ne[2]/2;var ht=Math.min(this.offset,0),ke=this.left||0;const Be=this.top||0,Ue=/%$/;var We=this.isCircular;let nt,wt=O(De(be.outerRadius),it),Ut=De(be.innerRadius);return De=O(De(be.thickness),10),this.options.gridLineInterpolation==="polygon"?ht=this.getPlotLinePath({value:le}).concat(this.getPlotLinePath({value:me,reverse:!0})):(le=Math.max(le,this.min),me=Math.min(me,this.max),le=this.translate(le),me=this.translate(me),We||(wt=le||0,Ut=me||0),be.shape!=="circle"&&We?(be=st+(le||0),st+=me||0):(be=-Math.PI/2,st=1.5*Math.PI,nt=!0),wt-=ht,ht=Le.renderer.symbols.arc(ke+Ne[0],Be+Ne[1],wt,wt,{start:Math.min(be,st),end:Math.max(be,st),innerR:O(Ut,wt-(De-ht)),open:nt}),We&&(We=(st+be)/2,ke=ke+Ne[0]+Ne[2]/2*Math.cos(We),ht.xBounds=We>-Math.PI/2&&We<Math.PI/2?[ke,Le.plotWidth]:[0,ke],ht.yBounds=[Be+Ne[1]+Ne[2]/2*Math.sin(We)],ht.yBounds[0]+=We>-Math.PI&&0>We||We>Math.PI?-10:10)),ht}function H(le){var me=this.pane.center,be=this.chart;const Le=be.inverted;var De=le.reverse,Ne=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{};const st=Ne.innerRadius||"0%",it=Ne.outerRadius||"100%";var ht=me[0]+be.plotLeft,ke=me[1]+be.plotTop;const Be=this.height,Ue=le.isCrosshair;Ne=me[3]/2;var We=le.value;let nt;var wt=this.getPosition(We);let Ut=wt.x;if(wt=wt.y,Ue&&(wt=this.getCrosshairPosition(le,ht,ke),We=wt[0],Ut=wt[1],wt=wt[2]),this.isCircular)We=Math.sqrt(Math.pow(Ut-ht,2)+Math.pow(wt-ke,2)),De=typeof st=="string"?$(st,1):st/We,be=typeof it=="string"?$(it,1):it/We,me&&Ne&&(Ne/=We,De<Ne&&(De=Ne),be<Ne&&(be=Ne)),me=[["M",ht+De*(Ut-ht),ke-De*(ke-wt)],["L",Ut-(1-be)*(Ut-ht),wt+(1-be)*(ke-wt)]];else if((We=this.translate(We))&&(0>We||We>Be)&&(We=0),this.options.gridLineInterpolation==="circle")me=this.getLinePath(0,We,Ne);else if(me=[],be[Le?"yAxis":"xAxis"].forEach(Vt=>{Vt.pane===this.pane&&(nt=Vt)}),nt)for(ht=nt.tickPositions,nt.autoConnect&&(ht=ht.concat([ht[0]])),De&&(ht=ht.slice().reverse()),We&&(We+=Ne),ke=0;ke<ht.length;ke++)Ne=nt.getPosition(ht[ke],We),me.push(ke?["L",Ne.x,Ne.y]:["M",Ne.x,Ne.y]);return me}function E(le,me){return le=this.translate(le),this.postTranslate(this.isCircular?le:this.angleRad,O(this.isCircular?me:0>le?0:le,this.center[2]/2)-this.offset)}function L(){const le=this.center,me=this.chart,be=this.options.title;return{x:me.plotLeft+le[0]+(be.x||0),y:me.plotTop+le[1]-{high:.5,middle:.25,low:0}[be.align]*le[2]+(be.y||0)}}function f(le){le.beforeSetTickPositions=G,le.createLabelCollector=U,le.getCrosshairPosition=ie,le.getLinePath=J,le.getOffset=N,le.getPlotBandPath=F,le.getPlotLinePath=H,le.getPosition=E,le.getTitlePosition=L,le.postTranslate=fe,le.setAxisSize=Z,le.setAxisTranslation=se,le.setOptions=ue}function y(){var le=this.chart,me=this.options,be=this.pane,Le=be&&be.options;le.angular&&this.isXAxis||!be||!le.angular&&!le.polar||(le=2*Math.PI,be=(O(Le.startAngle,0)-90)*Math.PI/180,Le=(O(Le.endAngle,O(Le.startAngle,0)+360)-90)*Math.PI/180,this.angleRad=(me.angle||0)*Math.PI/180,this.startAngleRad=be,this.endAngleRad=Le,this.offset=me.offset||0,me=(be%le+le)%le,Le=(Le%le+le)%le,me>Math.PI&&(me-=le),Le>Math.PI&&(Le-=le),this.normalizedStartAngleRad=me,this.normalizedEndAngleRad=Le)}function b(le){this.isRadial&&(le.align=void 0,le.preventDefault())}function D(){if(this.chart&&this.chart.labelCollectors){const le=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;0<=le&&this.chart.labelCollectors.splice(le,1)}}function X(le){const me=this.chart,be=me.inverted,Le=me.angular,De=me.polar,Ne=this.isXAxis,st=this.coll,it=Le&&Ne;le=le.userOptions.pane||0,le=this.pane=me.pane&&me.pane[le];let ht;st==="colorAxis"?this.isRadial=!1:(Le?(it?(this.isHidden=!0,this.createLabelCollector=C,this.getOffset=T,this.render=this.redraw=we,this.setTitle=this.setCategories=this.setScale=T):f(this),(ht=!Ne)&&(this.defaultPolarOptions=xe)):De&&(f(this),this.defaultPolarOptions=(ht=this.horiz)?ae:I(st==="xAxis"?l.defaultXAxisOptions:l.defaultYAxisOptions,ve),be&&st==="yAxis"&&(this.defaultPolarOptions.stackLabels=l.defaultYAxisOptions.stackLabels,this.defaultPolarOptions.reversedStacks=!0)),Le||De?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&me.labelCollectors.push(this.labelCollector)):this.isRadial=!1,le&&ht&&(le.axis=this),this.isCircular=ht)}function te(){this.isRadial&&this.beforeSetTickPositions()}function q(le){const me=this.label;if(me){var be=this.axis,Le=me.getBBox(),De=be.options.labels,Ne=(be.translate(this.pos)+be.startAngleRad+Math.PI/2)/Math.PI*180%360,st=Math.round(Ne),it=z(De.y)?0:.3*-Le.height,ht=De.y,ke=20,Be=De.align,Ue="end",We=0>st?st+360:st,nt=We,wt=0,Ut=0;if(be.isRadial){var Vt=be.getPosition(this.pos,be.center[2]/2+$(O(De.distance,-25),be.center[2]/2,-be.center[2]/2));De.rotation==="auto"?me.attr({rotation:Ne}):z(ht)||(ht=be.chart.renderer.fontMetrics(me).b-Le.height/2),z(Be)||(be.isCircular?(Le.width>be.len*be.tickInterval/(be.max-be.min)&&(ke=0),Be=Ne>ke&&Ne<180-ke?"left":Ne>180+ke&&Ne<360-ke?"right":"center"):Be="center",me.attr({align:Be})),Be==="auto"&&be.tickPositions.length===2&&be.isCircular&&(90<We&&180>We?We=180-We:270<We&&360>=We&&(We=540-We),180<nt&&360>=nt&&(nt=360-nt),(be.pane.options.startAngle===st||be.pane.options.startAngle===st+360||be.pane.options.startAngle===st-360)&&(Ue="start"),Be=-90<=st&&90>=st||-360<=st&&-270>=st||270<=st&&360>=st?Ue==="start"?"right":"left":Ue==="start"?"left":"right",70<nt&&110>nt&&(Be="center"),15>We||180<=We&&195>We?wt=.3*Le.height:15<=We&&35>=We?wt=Ue==="start"?0:.75*Le.height:195<=We&&215>=We?wt=Ue==="start"?.75*Le.height:0:35<We&&90>=We?wt=Ue==="start"?.25*-Le.height:Le.height:215<We&&270>=We&&(wt=Ue==="start"?Le.height:.25*-Le.height),15>nt?Ut=Ue==="start"?.15*-Le.height:.15*Le.height:165<nt&&180>=nt&&(Ut=Ue==="start"?.15*Le.height:.15*-Le.height),me.attr({align:Be}),me.translate(Ut,wt+it)),le.pos.x=Vt.x+(De.x||0),le.pos.y=Vt.y+(ht||0)}}}function ce(le){this.axis.getPosition&&W(le.pos,this.axis.getPosition(this.pos))}function fe(le,me){const be=this.chart,Le=this.center;return le=this.startAngleRad+le,{x:be.plotLeft+Le[0]+Math.cos(le)*me,y:be.plotTop+Le[1]+Math.sin(le)*me}}function we(){this.isDirty=!1}function Z(){let le,me;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),le=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(me=this.postTranslate(this.angleRad,le[3]/2),le[0]=me.x-this.chart.plotLeft,le[1]=me.y-this.chart.plotTop),this.len=this.width=this.height=(le[2]-le[3])*O(this.sector,1)/2)}function se(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)}function ue(le){le=this.options=I(this.constructor.defaultOptions,this.defaultPolarOptions,n[this.coll],le),le.plotBands||(le.plotBands=[]),K(this,"afterSetOptions")}function ye(le,me,be,Le,De,Ne,st){const it=this.axis;return it.isRadial?(le=it.getPosition(this.pos,it.center[2]/2+Le),me=["M",me,be,"L",le.x,le.y]):me=le.call(this,me,be,Le,De,Ne,st),me}const Pe=[],ae={gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},xe={labels:{align:"center",distance:-25,x:0,y:void 0},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},ve={gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}};k.compose=function(le,me){return m.pushUnique(Pe,le)&&(V(le,"afterInit",y),V(le,"autoLabelAlign",b),V(le,"destroy",D),V(le,"init",X),V(le,"initialAxisTranslation",te)),m.pushUnique(Pe,me)&&(V(me,"afterGetLabelPosition",q),V(me,"afterGetPosition",ce),M(me.prototype,"getMarkPath",ye)),le}}(S||(S={})),S}),r(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T){function V(Z,se,ue,ye){var Pe=ye?1:0,ae=0<=se&&se<=Z.length-1?se:0>se?Z.length-1+se:0;se=0>ae-1?Z.length-(1+Pe):ae-1;var xe=Z[se];Pe=Z[ae+1>Z.length-1?Pe:ae+1];var ve=xe.plotY,le=Pe.plotX,me=Pe.plotY;Pe=Z[ae].plotX,ae=Z[ae].plotY,xe=(1.5*Pe+xe.plotX)/2.5,ve=(1.5*ae+ve)/2.5,le=(1.5*Pe+le)/2.5;var be=(1.5*ae+me)/2.5;me=Math.sqrt(Math.pow(xe-Pe,2)+Math.pow(ve-ae,2));const Le=Math.sqrt(Math.pow(le-Pe,2)+Math.pow(be-ae,2));return xe=Math.atan2(ve-ae,xe-Pe),be=Math.PI/2+(xe+Math.atan2(be-ae,le-Pe))/2,Math.abs(xe-be)>Math.PI/2&&(be-=Math.PI),xe=Pe+Math.cos(be)*me,ve=ae+Math.sin(be)*me,le=Pe+Math.cos(Math.PI+be)*Le,be=ae+Math.sin(Math.PI+be)*Le,Pe={rightContX:le,rightContY:be,leftContX:xe,leftContY:ve,plotX:Pe,plotY:ae},ue&&(Pe.prevPointCont=V(Z,se,!1,ye)),Pe}function Q(){(this.pane||[]).forEach(Z=>{Z.render()})}function z(Z){const se=Z.args[0].xAxis,ue=Z.args[0].yAxis;Z=Z.args[0].chart,se&&ue&&(ue.gridLineInterpolation==="polygon"?(se.startOnTick=!0,se.endOnTick=!0):se.gridLineInterpolation==="polygon"&&Z.inverted&&(ue.startOnTick=!0,ue.endOnTick=!0))}function W(){this.pane||(this.pane=[]),this.options.pane=te(this.options.pane),this.options.pane.forEach(Z=>{new m(Z,this)},this)}function K(Z){var se=Z.args.marker,ue=this.chart.xAxis[0],ye=this.chart.yAxis[0],Pe=this.chart.inverted;const ae=Pe?ye:ue;if(ue=Pe?ue:ye,this.chart.polar){Z.preventDefault(),ye=(se.attr?se.attr("start"):se.start)-ae.startAngleRad,Pe=se.attr?se.attr("r"):se.r;let xe=(se.attr?se.attr("end"):se.end)-ae.startAngleRad;se=se.attr?se.attr("innerR"):se.innerR,Z.result.x=ye+ae.pos,Z.result.width=xe-ye,Z.result.y=ue.len+ue.pos-se,Z.result.height=se-Pe}}function I(Z){var se=this.chart;if(se.polar&&se.hoverPane&&se.hoverPane.axis){Z.preventDefault();var ue=se.hoverPane.center,ye=this.mouseDownX||0;const Ne=this.mouseDownY||0;var Pe=Z.args.chartY;const st=Z.args.chartX;var ae=2*Math.PI,xe=se.hoverPane.axis.startAngleRad,ve=se.hoverPane.axis.endAngleRad,le=se.inverted?se.xAxis[0]:se.yAxis[0];const it={};var me="arc";if(it.x=ue[0]+se.plotLeft,it.y=ue[1]+se.plotTop,this.zoomHor){var be=0<xe?ve-xe:Math.abs(xe)+Math.abs(ve),Le=Math.atan2(Ne-se.plotTop-ue[1],ye-se.plotLeft-ue[0])-xe,De=Math.atan2(Pe-se.plotTop-ue[1],st-se.plotLeft-ue[0])-xe;if(it.r=ue[2]/2,it.innerR=ue[3]/2,0>=Le&&(Le+=ae),0>=De&&(De+=ae),De<Le&&(De=[Le,Le=De][0]),be<ae&&xe+De>ve+(ae-be)/2&&(De=Le,Le=0>=xe?xe:0),ae=it.start=Math.max(Le+xe,xe),be=it.end=Math.min(De+xe,ve),le.options.gridLineInterpolation==="polygon"){if(me=se.hoverPane.axis,De=ae-me.startAngleRad+me.pos,Le=be-ae,ae=le.getPlotLinePath({value:le.max}),be=me.toValue(De),De=me.toValue(De+Le),be<me.getExtremes().min){const{min:ht,max:ke}=me.getExtremes();be=ke-(ht-be)}if(De<me.getExtremes().min){const{min:ht,max:ke}=me.getExtremes();De=ke-(ht-De)}De<be&&(De=[be,be=De][0]),ae=S(ae,be,De,me),ae.push(["L",ue[0]+se.plotLeft,se.plotTop+ue[1]]),it.d=ae,me="path"}}this.zoomVert&&(De=se.inverted?se.xAxis[0]:se.yAxis[0],ye=Math.sqrt(Math.pow(ye-se.plotLeft-ue[0],2)+Math.pow(Ne-se.plotTop-ue[1],2)),Pe=Math.sqrt(Math.pow(st-se.plotLeft-ue[0],2)+Math.pow(Pe-se.plotTop-ue[1],2)),Pe<ye&&(ye=[Pe,Pe=ye][0]),Pe>ue[2]/2&&(Pe=ue[2]/2),ye<ue[3]/2&&(ye=ue[3]/2),this.zoomHor||(it.start=xe,it.end=ve),it.r=Pe,it.innerR=ye,De.options.gridLineInterpolation==="polygon"&&(ue=De.toValue(De.len+De.pos-ye),xe=De.toValue(De.len+De.pos-Pe),ue=De.getPlotLinePath({value:xe}).concat(De.getPlotLinePath({value:ue,reverse:!0})),it.d=ue,me="path")),this.zoomHor&&this.zoomVert&&le.options.gridLineInterpolation==="polygon"&&(ue=se.hoverPane.axis,le=it.start||0,xe=le-ue.startAngleRad+ue.pos,ve=(it.end||0)-le,le=ue.toValue(xe),ue=ue.toValue(xe+ve),it.d instanceof Array&&(xe=it.d.slice(0,it.d.length/2),ve=it.d.slice(it.d.length/2,it.d.length),ve=[...ve].reverse(),se=se.hoverPane.axis,xe=S(xe,le,ue,se),(ve=S(ve,le,ue,se))&&(ve[0][0]="L"),ve=[...ve].reverse(),it.d=xe.concat(ve),me="path")),Z.attrs=it,Z.shapeType=me}}function O(){const Z=this.chart;Z.polar&&(this.polar=new we(this),Z.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function $(){if(this.chart.polar&&this.xAxis){const{xAxis:Z,yAxis:se}=this,ue=this.chart;(this.kdByAngle=ue.tooltip&&ue.tooltip.shared)?this.searchPoint=M:this.options.findNearestPointBy="xy";const ye=this.points;let Pe=ye.length;for(;Pe--;)this.is("column")||this.is("columnrange")||this.polar.toXY(ye[Pe]),ue.hasParallelCoordinates||this.yAxis.reversed||(D(ye[Pe].y,Number.MIN_VALUE)<se.min||ye[Pe].x<Z.min||ye[Pe].x>Z.max?(ye[Pe].isNull=!0,ye[Pe].plotY=NaN):ye[Pe].isNull=ye[Pe].isValid&&!ye[Pe].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(E(this,"afterRender",function(){if(ue.polar){var ae=this.yAxis.pane.center;if(this.clipCircle)this.clipCircle.animate({x:ae[0],y:ae[1],r:ae[2]/2,innerR:ae[3]/2});else{{var xe=ue.renderer,ve=ae[0],le=ae[1],me=ae[2]/2,be=ae[3]/2;ae=q();const Le=xe.createElement("clipPath").attr({id:ae}).add(xe.defs);xe=be?xe.arc(ve,le,me,be,0,2*Math.PI).add(Le):xe.circle(ve,le,me).add(Le),xe.id=ae,xe.clipPath=Le}this.clipCircle=xe}this.group.clip(this.clipCircle),this.setClip=c.noop}})))}}function M(Z){const se=this.chart;var ue=this.xAxis;return ue=ue.pane&&ue.pane.center,this.searchKDTree({clientX:180+-180/Math.PI*Math.atan2(Z.chartX-(ue&&ue[0]||0)-se.plotLeft,Z.chartY-(ue&&ue[1]||0)-se.plotTop)})}function S(Z,se,ue,ye){const Pe=ye.tickInterval;ye=ye.tickPositions;let ae=f(ye,ve=>ve>=ue),xe=f([...ye].reverse(),ve=>ve<=se);return L(ae)||(ae=ye[ye.length-1]),L(xe)||(xe=ye[0],ae+=Pe,Z[0][0]="L",Z.unshift(Z[Z.length-3])),Z=Z.slice(ye.indexOf(xe),ye.indexOf(ae)+1),Z[0][0]="M",Z}function k(Z,se){return f(this.pane||[],function(ue){return ue.options.id===se})||Z.call(this,se)}function G(Z,se,ue,ye,Pe,ae){const xe=this.chart;var ve=D(ye.inside,!!this.options.stacking);xe.polar?(Z=se.rectPlotX/Math.PI*180,xe.inverted?(this.forceDL=xe.isInsidePlot(se.plotX,se.plotY),ve&&se.shapeArgs?(ve=se.shapeArgs,ve=this.yAxis.postTranslate(((ve.start||0)+(ve.end||0))/2-this.xAxis.startAngleRad,se.barX+se.pointWidth/2),Pe=b(Pe,{x:ve.x-xe.plotLeft,y:ve.y-xe.plotTop})):se.tooltipPos&&(Pe=b(Pe,{x:se.tooltipPos[0],y:se.tooltipPos[1]})),ye.align=D(ye.align,"center"),ye.verticalAlign=D(ye.verticalAlign,"middle")):(ye.align===null&&(ye.align=20<Z&&160>Z?"left":200<Z&&340>Z?"right":"center"),ye.verticalAlign===null&&(ye.verticalAlign=45>Z||315<Z?"bottom":135<Z&&225>Z?"top":"middle")),d.prototype.alignDataLabel.call(this,se,ue,ye,Pe,ae),this.isRadialBar&&se.shapeArgs&&se.shapeArgs.start===se.shapeArgs.end?ue.hide():ue.show()):Z.call(this,se,ue,ye,Pe,ae)}function U(){const Z=this.options,se=Z.stacking,ue=this.chart;var ye=this.xAxis;const Pe=this.yAxis,ae=Pe.reversed,xe=Pe.center,ve=ye.startAngleRad,le=ye.endAngleRad-ve;let me=0,be,Le,De,Ne=0;var st=0;if(ye.isRadial){ye=this.points,be=ye.length,Le=Pe.translate(Pe.min),De=Pe.translate(Pe.max);var it=Z.threshold||0;for(ue.inverted&&y(it)&&(me=Pe.translate(it),L(me)&&(0>me?me=0:me>le&&(me=le),this.translatedThreshold=me+ve));be--;){it=ye[be];var ht=it.barX,ke=it.x,Be=it.y;if(it.shapeType="arc",ue.inverted){it.plotY=Pe.translate(Be),se&&Pe.stacking?(Be=Pe.stacking.stacks[(0>Be?"-":"")+this.stackKey],this.visible&&Be&&Be[ke]&&!it.isNull&&(st=Be[ke].points[this.getStackIndicator(void 0,ke,this.index).key],Ne=Pe.translate(st[0]),st=Pe.translate(st[1]),L(Ne)&&(Ne=T.clamp(Ne,0,le)))):(Ne=me,st=it.plotY),Ne>st&&(st=[Ne,Ne=st][0]),ae?st>Le?st=Le:Ne<De?Ne=De:(Ne>Le||st<De)&&(Ne=st=le):Ne<Le?Ne=Le:st>De?st=De:(st<Le||Ne>De)&&(Ne=st=0),Pe.min>Pe.max&&(Ne=st=ae?le:0),Ne+=ve,st+=ve,xe&&(it.barX=ht+=xe[3]/2),ke=Math.max(ht,0),Be=Math.max(ht+it.pointWidth,0);var Ue=Z.borderRadius;Ue=X((typeof Ue=="object"?Ue.radius:Ue)||0,Be-ke),it.shapeArgs={x:xe[0],y:xe[1],r:Be,innerR:ke,start:Ne,end:st,borderRadius:Ue},it.opacity=Ne===st?0:void 0,it.plotY=(L(this.translatedThreshold)&&(Ne<this.translatedThreshold?Ne:st))-ve}else Ne=ht+ve,it.shapeArgs=this.polar.arc(it.yBottom,it.plotY,Ne,Ne+it.pointWidth),it.shapeArgs.borderRadius=0;this.polar.toXY(it),ue.inverted?(ht=Pe.postTranslate(it.rectPlotY,ht+it.pointWidth/2),it.tooltipPos=[ht.x-ue.plotLeft,ht.y-ue.plotTop]):it.tooltipPos=[it.plotX,it.plotY],xe&&(it.ttBelow=it.plotY>xe[1])}}}function C(Z,se){const ue=this;let ye;if(this.chart.polar){se=se||this.points;for(let ae=0;ae<se.length;ae++)if(!se[ae].isNull){var Pe=ae;break}this.options.connectEnds!==!1&&typeof Pe<"u"&&(this.connectEnds=!0,se.splice(se.length,0,se[Pe]),ye=!0),se.forEach(ae=>{typeof ae.polarPlotY>"u"&&ue.polar.toXY(ae)})}return Pe=Z.apply(this,[].slice.call(arguments,1)),ye&&se.pop(),Pe}function ie(Z,se){const ue=this.chart;let ye={xAxis:[],yAxis:[]};return ue.polar?ue.axes.forEach(Pe=>{if(Pe.coll!=="colorAxis"){var ae=Pe.isXAxis,xe=Pe.center,ve=se.chartX-xe[0]-ue.plotLeft;xe=se.chartY-xe[1]-ue.plotTop,ye[ae?"xAxis":"yAxis"].push({axis:Pe,value:Pe.translate(ae?Math.PI-Math.atan2(ve,xe):Math.sqrt(Math.pow(ve,2)+Math.pow(xe,2)),!0)})}}):ye=Z.call(this,se),ye}function J(Z,se){this.chart.polar||Z.call(this,se)}function N(Z,se){const ue=this,ye=this.chart,Pe=this.group,ae=this.markerGroup,xe=this.xAxis&&this.xAxis.center,ve=ye.plotLeft,le=ye.plotTop;let me=this.options.animation,be,Le,De,Ne,st;ye.polar?ue.isRadialBar?se||(ue.startAngleRad=D(ue.translatedThreshold,ue.xAxis.startAngleRad),c.seriesTypes.pie.prototype.animate.call(ue,se)):(me=H(me),ue.is("column")?se||(be=xe[3]/2,ue.points.forEach(it=>{Le=it.graphic,Ne=(De=it.shapeArgs)&&De.r,st=De&&De.innerR,Le&&De&&(Le.attr({r:be,innerR:be}),Le.animate({r:Ne,innerR:st},ue.options.animation))})):se?(Z={translateX:xe[0]+ve,translateY:xe[1]+le,scaleX:.001,scaleY:.001},Pe.attr(Z),ae&&ae.attr(Z)):(Z={translateX:ve,translateY:le,scaleX:1,scaleY:1},Pe.animate(Z,me),ae&&ae.animate(Z,me))):Z.call(this,se)}function F(Z,se,ue,ye){return this.chart.polar?ye?(Z=V(se,ye,!0,this.connectEnds),se=Z.prevPointCont&&Z.prevPointCont.rightContX,ue=Z.prevPointCont&&Z.prevPointCont.rightContY,Z=["C",y(se)?se:Z.plotX,y(ue)?ue:Z.plotY,y(Z.leftContX)?Z.leftContX:Z.plotX,y(Z.leftContY)?Z.leftContY:Z.plotY,Z.plotX,Z.plotY]):Z=["M",ue.plotX,ue.plotY]:Z=Z.call(this,se,ue,ye),Z}const{animObject:H}=l,{addEvent:E,defined:L,find:f,isNumber:y,merge:b,pick:D,relativeLength:X,splat:te,uniqueKey:q,wrap:ce}=T,fe=[];class we{static compose(se,ue,ye,Pe,ae,xe,ve,le,me){n.compose(se,ae),T.pushUnique(fe,ue)&&(E(ue,"afterDrawChartBox",Q),E(ue,"getAxes",W),E(ue,"init",z),ce(ue.prototype,"get",k)),T.pushUnique(fe,ye)&&(se=ye.prototype,ce(se,"getCoordinates",ie),ce(se,"pinch",J),E(ye,"getSelectionMarkerAttrs",I),E(ye,"getSelectionBox",K)),T.pushUnique(fe,Pe)&&(E(Pe,"afterInit",O),E(Pe,"afterTranslate",$,{order:2}),E(Pe,"afterColumnTranslate",U,{order:4}),ce(Pe.prototype,"animate",N)),ve&&T.pushUnique(fe,ve)&&(ye=ve.prototype,ce(ye,"alignDataLabel",G),ce(ye,"animate",N)),le&&T.pushUnique(fe,le)&&ce(le.prototype,"getGraphPath",C),me&&T.pushUnique(fe,me)&&(le=me.prototype,ce(le,"getPointSpline",F),xe&&T.pushUnique(fe,xe)&&(xe.prototype.getPointSpline=le.getPointSpline))}constructor(se){this.series=se}arc(se,ue,ye,Pe){const ae=this.series,xe=ae.xAxis.center,ve=ae.yAxis.len,le=xe[3]/2;return ue=ve-ue+le,se=ve-D(se,ve)+le,ae.yAxis.reversed&&(0>ue&&(ue=le),0>se&&(se=le)),{x:xe[0],y:xe[1],r:ue,innerR:se,start:ye,end:Pe}}toXY(se){var ue=this.series;const ye=ue.chart,Pe=ue.xAxis;var ae=ue.yAxis;const xe=se.plotX,ve=ye.inverted,le=se.y;let me=se.plotY,be=ve?xe:ae.len-me;ve&&ue&&!ue.isRadialBar&&(se.plotY=me=y(le)?ae.translate(le):0),se.rectPlotX=xe,se.rectPlotY=me,ae.center&&(be+=ae.center[3]/2),y(me)&&(ae=ve?ae.postTranslate(me,be):Pe.postTranslate(xe,be),se.plotX=se.polarPlotX=ae.x-ye.plotLeft,se.plotY=se.polarPlotY=ae.y-ye.plotTop),ue.kdByAngle?(ue=(xe/Math.PI*180+Pe.pane.options.startAngle)%360,0>ue&&(ue+=360),se.clientX=ue):se.clientX=se.plotX}}return we}),r(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"]],function(l,c,d,m,n){d.compose(l.Axis,l.Chart,l.Legend,l.Series),m.compose(l.Axis,l.Chart,l.Legend,l.Series),n.compose(l.Axis,l.Chart,l.Pointer,l.Series,l.Tick,c.seriesTypes.areasplinerange,c.seriesTypes.column,c.seriesTypes.line,c.seriesTypes.spline)})})})(qU);const MA=Hw;MA(Bc);const ZU={components:{highcharts:pp.Chart},methods:{chartCallback(e){e.renderer.forExport||setInterval(function(){var t=e.series[0].points[0],r,l=Math.round((Math.random()-.5)*20);r=t.y+l,(r<0||r>200)&&(r=t.y-l),t.update(r)},3e3)}},data(){return{fuelOptions:{chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1},title:{useHTML:!0,text:"<img src='https://cdn-icons-png.flaticon.com/512/710/710296.png' height='18px' alt='' />",y:180},pane:{startAngle:-120,endAngle:120,background:[{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#FFF"]]},borderWidth:0,outerRadius:"109%"},{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#FFF"]]},borderWidth:0,outerRadius:"107%"},{borderWidth:0,backgroundColor:"#FFF"},{backgroundColor:"#FFF",borderWidth:0,outerRadius:"105%",innerRadius:"103%"}]},yAxis:[{min:0,max:32,minorTickInterval:"auto",minorTickWidth:0,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#fff",tickPixelInterval:32,tickWidth:5,tickPosition:"inside",tickLength:20,tickColor:"#0A2647",labels:{step:16,distance:10,enabled:!1},title:{text:"",y:20},plotBands:[{from:0,to:4,color:"#0A2647"},{from:4,to:8,color:"#0A2647"},{from:8,to:12,color:"#0A2647"},{from:12,to:16,color:"#0A2647"},{from:16,to:20,color:"#0A2647"},{from:20,to:24,color:"#0A2647"},{from:24,to:28,color:"#0A2647"},{from:28,to:32,color:"#0A2647"}]}],series:[{name:"Speed",data:[20],tooltip:{valueSuffix:" "}}]}}}},sd=e=>(Nf("data-v-7c7fa323"),e=e(),Ff(),e),KU={class:"row"},JU={class:"col position-relative"},QU=sd(()=>mt("div",{class:"text-center fw-bold title-fuel",style:{position:"absolute",bottom:"20%",left:"0",right:"0"}},"Total HFO (KL)",-1)),eG=sd(()=>mt("div",{class:"text-center fw-bold",style:{position:"absolute",bottom:"15%",left:"0",right:"0"}},"15.08 KL",-1)),tG={class:"col position-relative"},iG=sd(()=>mt("div",{class:"text-center fw-bold title-fuel",style:{position:"absolute",bottom:"20%",left:"0",right:"0"}},"Total LS HFO (KL)",-1)),nG=sd(()=>mt("div",{class:"text-center fw-bold",style:{position:"absolute",bottom:"15%",left:"0",right:"0"}},"2.94",-1)),rG={class:"col position-relative"},sG=sd(()=>mt("div",{class:"text-center fw-bold title-fuel",style:{position:"absolute",bottom:"20%",left:"0",right:"0"}},"Total MDO (KL)",-1)),oG=sd(()=>mt("div",{class:"text-center fw-bold",style:{position:"absolute",bottom:"15%",left:"0",right:"0"}},"1.22",-1)),aG={class:"col position-relative"},lG=sd(()=>mt("div",{class:"text-center fw-bold title-fuel",style:{position:"absolute",bottom:"20%",left:"0",right:"0"}},"Total HSD (KL)",-1)),cG=sd(()=>mt("div",{class:"text-center fw-bold",style:{position:"absolute",bottom:"15%",left:"0",right:"0"}},"2.01",-1)),hG={class:"col position-relative"},dG=sd(()=>mt("div",{class:"text-center fw-bold title-fuel",style:{position:"absolute",bottom:"20%",left:"0",right:"0"}},"Total (KL)",-1)),uG=sd(()=>mt("div",{class:"text-center fw-bold",style:{position:"absolute",bottom:"15%",left:"0",right:"0"}},"21.25",-1));function pG(e,t,r,l,c,d){const m=ar("highcharts");return ki(),Fi("div",KU,[mt("div",JU,[Ji(m,{options:c.fuelOptions,callback:d.chartCallback},null,8,["options","callback"]),QU,eG]),mt("div",tG,[Ji(m,{options:c.fuelOptions,callback:d.chartCallback},null,8,["options","callback"]),iG,nG]),mt("div",rG,[Ji(m,{options:c.fuelOptions,callback:d.chartCallback},null,8,["options","callback"]),sG,oG]),mt("div",aG,[Ji(m,{options:c.fuelOptions,callback:d.chartCallback},null,8,["options","callback"]),lG,cG]),mt("div",hG,[Ji(m,{options:c.fuelOptions,callback:d.chartCallback},null,8,["options","callback"]),dG,uG])])}const fG=Zr(ZU,[["render",pG],["__scopeId","data-v-7c7fa323"]]);var Ww={},mG={get exports(){return Ww},set exports(e){Ww=e}};(function(e){(function(t){e.exports?(t.default=t,e.exports=t):t(typeof Highcharts<"u"?Highcharts:void 0)})(function(t){function r(l,c,d,m){l.hasOwnProperty(c)||(l[c]=m.apply(null,d),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:c,module:l[c]}})))}t=t?t._modules:{},r(t,"Core/Axis/BrokenAxis.js",[t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(l,c){const{addEvent:d,find:m,fireEvent:n,isArray:T,isNumber:V,pick:Q}=c;var z;return function(W){function K(){typeof this.brokenAxis<"u"&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function I(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)}function O(){const ie=this.brokenAxis;if(ie&&ie.hasBreaks){const J=this.tickPositions,N=this.tickPositions.info,F=[];for(let H=0;H<J.length;H++)ie.isInAnyBreak(J[H])||F.push(J[H]);this.tickPositions=F,this.tickPositions.info=N}}function $(){this.brokenAxis||(this.brokenAxis=new C(this))}function M(){const{isDirty:ie,options:{connectNulls:J},points:N,xAxis:F,yAxis:H}=this;if(ie){let E=N.length;for(;E--;){const L=N[E],f=!(L.y===null&&J===!1)&&(F&&F.brokenAxis&&F.brokenAxis.isInAnyBreak(L.x,!0)||H&&H.brokenAxis&&H.brokenAxis.isInAnyBreak(L.y,!0));L.visible=f?!1:L.options.visible!==!1}}}function S(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,Q(this.pointArrayMap,["y"]))}function k(ie,J){const N=this,F=N.points;let H,E,L,f;if(ie&&ie.brokenAxis&&ie.brokenAxis.hasBreaks){const y=ie.brokenAxis;J.forEach(function(b){H=y&&y.breakArray||[],E=ie.isXAxis?ie.min:Q(N.options.threshold,ie.min),F.forEach(function(D){f=Q(D["stack"+b.toUpperCase()],D[b]),H.forEach(function(X){V(E)&&V(f)&&(L=!1,E<X.from&&f>X.to||E>X.from&&f<X.from?L="pointBreak":(E<X.from&&f>X.from&&f<X.to||E>X.from&&f>X.to&&f<X.from)&&(L="pointInBreak"),L&&n(ie,L,{point:D,brk:X}))})})})}}function G(){var ie=this.currentDataGrouping,J=ie&&ie.gapSize;ie=this.points.slice();const N=this.yAxis;let F=this.options.gapSize,H=ie.length-1;var E;if(F&&0<H)for(this.options.gapUnit!=="value"&&(F*=this.basePointRange),J&&J>F&&J>=this.basePointRange&&(F=J);H--;)E&&E.visible!==!1||(E=ie[H+1]),J=ie[H],E.visible!==!1&&J.visible!==!1&&(E.x-J.x>F&&(E=(J.x+E.x)/2,ie.splice(H+1,0,{isNull:!0,x:E}),N.stacking&&this.options.stacking&&(E=N.stacking.stacks[this.stackKey][E]=new l(N,N.options.stackLabels,!1,E,this.stack),E.total=0)),E=J);return this.getGraphPath(ie)}const U=[];W.compose=function(ie,J){if(c.pushUnique(U,ie)&&(ie.keepProps.push("brokenAxis"),d(ie,"init",$),d(ie,"afterInit",K),d(ie,"afterSetTickPositions",O),d(ie,"afterSetOptions",I)),c.pushUnique(U,J)){const N=J.prototype;N.drawBreaks=k,N.gappedPath=G,d(J,"afterGeneratePoints",M),d(J,"afterRender",S)}return ie};class C{static isInBreak(J,N){const F=J.repeat||1/0,H=J.from,E=J.to-J.from;return N=N>=H?(N-H)%F:F-(H-N)%F,J.inclusive?N<=E:N<E&&N!==0}static lin2Val(J){var N=this.brokenAxis;if(N=N&&N.breakArray,!N||!V(J))return J;let F,H;for(H=0;H<N.length&&(F=N[H],!(F.from>=J));H++)(F.to<J||C.isInBreak(F,J))&&(J+=F.len);return J}static val2Lin(J){var N=this.brokenAxis;if(N=N&&N.breakArray,!N||!V(J))return J;let F=J,H,E;for(E=0;E<N.length;E++)if(H=N[E],H.to<=J)F-=H.len;else{if(H.from>=J)break;if(C.isInBreak(H,J)){F-=J-H.from;break}}return F}constructor(J){this.hasBreaks=!1,this.axis=J}findBreakAt(J,N){return m(N,function(F){return F.from<J&&J<F.to})}isInAnyBreak(J,N){const F=this.axis,H=F.options.breaks||[];let E=H.length,L,f,y;if(E&&V(J)){for(;E--;)C.isInBreak(H[E],J)&&(L=!0,f||(f=Q(H[E].showPoints,!F.isXAxis)));y=L&&N?L&&!f:L}return y}setBreaks(J,N){const F=this,H=F.axis,E=T(J)&&!!J.length;H.isDirty=F.hasBreaks!==E,F.hasBreaks=E,H.options.breaks=H.userOptions.breaks=J,H.forceRedraw=!0,H.series.forEach(function(L){L.isDirty=!0}),E||H.val2lin!==C.val2Lin||(delete H.val2lin,delete H.lin2val),E&&(H.userOptions.ordinal=!1,H.lin2val=C.lin2Val,H.val2lin=C.val2Lin,H.setExtremes=function(L,f,y,b,D){if(F.hasBreaks){const X=this.options.breaks||[];let te;for(;te=F.findBreakAt(L,X);)L=te.to;for(;te=F.findBreakAt(f,X);)f=te.from;f<L&&(f=L)}H.constructor.prototype.setExtremes.call(this,L,f,y,b,D)},H.setAxisTranslation=function(){if(H.constructor.prototype.setAxisTranslation.call(this),F.unitLength=void 0,F.hasBreaks){const L=H.options.breaks||[],f=[],y=[],b=Q(H.pointRangePadding,0);let D=0,X,te,q=H.userMin||H.min,ce=H.userMax||H.max,fe,we;L.forEach(function(Z){te=Z.repeat||1/0,V(q)&&V(ce)&&(C.isInBreak(Z,q)&&(q+=Z.to%te-q%te),C.isInBreak(Z,ce)&&(ce-=ce%te-Z.from%te))}),L.forEach(function(Z){if(fe=Z.from,te=Z.repeat||1/0,V(q)&&V(ce)){for(;fe-te>q;)fe-=te;for(;fe<q;)fe+=te;for(we=fe;we<ce;we+=te)f.push({value:we,move:"in"}),f.push({value:we+Z.to-Z.from,move:"out",size:Z.breakSize})}}),f.sort(function(Z,se){return Z.value===se.value?(Z.move==="in"?0:1)-(se.move==="in"?0:1):Z.value-se.value}),X=0,fe=q,f.forEach(function(Z){X+=Z.move==="in"?1:-1,X===1&&Z.move==="in"&&(fe=Z.value),X===0&&V(fe)&&(y.push({from:fe,to:Z.value,len:Z.value-fe-(Z.size||0)}),D+=Z.value-fe-(Z.size||0))}),F.breakArray=y,V(q)&&V(ce)&&V(H.min)&&(F.unitLength=ce-q-D+b,n(H,"afterBreaks"),H.staticScale?H.transA=H.staticScale:F.unitLength&&(H.transA*=(ce-H.min+b)/F.unitLength),b&&(H.minPixelPadding=H.transA*(H.minPointOffset||0)),H.min=q,H.max=ce)}}),Q(N,!0)&&H.chart.redraw()}}W.Additions=C}(z||(z={})),z}),r(t,"masters/modules/broken-axis.src.js",[t["Core/Globals.js"],t["Core/Axis/BrokenAxis.js"]],function(l,c){c.compose(l.Axis,l.Series)}),r(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),r(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(l,c){function d(W){const K=W.length;return W=m(W),z(W)&&K&&(W=V(W/K)),W}function m(W){let K=W.length,I;if(!K&&W.hasNulls)I=null;else if(K)for(I=0;K--;)I+=W[K];return I}const{arrayMax:n,arrayMin:T,correctFloat:V,extend:Q,isNumber:z}=c;return c={average:d,averages:function(){const W=[];return[].forEach.call(arguments,function(K){W.push(d(K))}),typeof W[0]>"u"?void 0:W},close:function(W){return W.length?W[W.length-1]:W.hasNulls?null:void 0},high:function(W){return W.length?n(W):W.hasNulls?null:void 0},hlc:function(W,K,I){if(W=l.high(W),K=l.low(K),I=l.close(I),z(W)||z(K)||z(I))return[W,K,I]},low:function(W){return W.length?T(W):W.hasNulls?null:void 0},ohlc:function(W,K,I,O){if(W=l.open(W),K=l.high(K),I=l.low(I),O=l.close(O),z(W)||z(K)||z(I)||z(O))return[W,K,I,O]},open:function(W){return W.length?W[0]:W.hasNulls?null:void 0},range:function(W,K){if(W=l.low(W),K=l.high(K),z(W)||z(K))return[W,K];if(W===null&&K===null)return null},sum:m},Q(l,c),c}),r(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),r(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(l,c){function d(O){const $=this,M=$.series;M.forEach(function(S){S.groupPixelWidth=void 0}),M.forEach(function(S){S.groupPixelWidth=$.getGroupPixelWidth&&$.getGroupPixelWidth(),S.groupPixelWidth&&(S.hasProcessed=!0),S.applyGrouping(!!O.hasExtremesChanged)})}function m(){const O=this.series;let $=O.length,M=0,S=!1,k,G;for(;$--;)(G=O[$].options.dataGrouping)&&(M=Math.max(M,W(G.groupPixelWidth,l.common.groupPixelWidth)),k=(O[$].processedXData||O[$].data).length,(O[$].groupPixelWidth||k>this.chart.plotSizeX/M||k&&G.forced)&&(S=!0));return S?M:0}function n(){this.series.forEach(function(O){O.hasProcessed=!1})}function T(O,$){let M;if($=W($,!0),O||(O={forced:!1,units:null}),this instanceof I)for(M=this.series.length;M--;)this.series[M].update({dataGrouping:O},!1);else this.chart.options.series.forEach(function(S){S.dataGrouping=typeof O=="boolean"?O:z(O,S.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),$&&this.chart.redraw()}const{addEvent:V,extend:Q,merge:z,pick:W}=c,K=[];let I;return{compose:function(O){I=O,c.pushUnique(K,O)&&(V(O,"afterSetScale",n),V(O,"postProcessData",d),Q(O.prototype,{applyGrouping:d,getGroupPixelWidth:m,setDataGrouping:T}))}}}),r(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T){function V(N){var F=this.chart,H=this.options.dataGrouping,E=this.allowDG!==!1&&H&&C(H.enabled,F.options.isStock),L=this.visible||!F.options.chart.ignoreHiddenSeries;const f=this.currentDataGrouping;var y=!1;if(E&&!this.requireSorting&&(this.requireSorting=y=!0),N=!!(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!N)||!E,y&&(this.requireSorting=!1),!N){this.destroyGroupedData(),N=H.groupAll?this.xData:this.processedXData,E=H.groupAll?this.yData:this.processedYData;var b=F.plotSizeX;y=this.xAxis;var D=y.options.ordinal,X=this.groupPixelWidth,te;let ue;if(X&&N&&N.length&&b){this.isDirty=ue=!0,this.points=null;var q=y.getExtremes(),ce=q.min;q=q.max,D=D&&y.ordinal&&y.ordinal.getGroupIntervalFactor(ce,q,this)||1,b=y.getTimeTicks(d.Additions.prototype.normalizeTimeTickInterval(X*(q-ce)/b*D,H.units||c.units),Math.min(ce,N[0]),Math.max(q,N[N.length-1]),y.options.startOfWeek,N,this.closestPointRange),X=O.groupData.apply(this,[N,E,b,H.approximation]),N=X.groupedXData,E=X.groupedYData,D=0,H&&H.smoothed&&N.length&&(H.firstAnchor="firstPoint",H.anchor="middle",H.lastAnchor="lastPoint",S(32,!1,F,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),F=N;var fe=q,we=this.options.dataGrouping;if(q=this.currentDataGrouping&&this.currentDataGrouping.gapSize,we&&this.xData&&q&&this.groupMap){ce=F.length-1;var Z=we.anchor;const ye=C(we.firstAnchor,Z);if(we=C(we.lastAnchor,Z),Z&&Z!=="start"){var se=q*{middle:.5,end:1}[Z];for(Z=F.length-1;Z--&&0<Z;)F[Z]+=se}ye&&ye!=="start"&&this.xData[0]>=F[0]&&(Z=this.groupMap[0].start,se=this.groupMap[0].length,G(Z)&&G(se)&&(te=Z+(se-1)),F[0]={middle:F[0]+.5*q,end:F[0]+q,firstPoint:this.xData[0],lastPoint:te&&this.xData[te]}[ye]),we&&we!=="start"&&q&&F[ce]>=fe-q&&(te=this.groupMap[this.groupMap.length-1].start,F[ce]={middle:F[ce]+.5*q,end:F[ce]+q,firstPoint:te&&this.xData[te],lastPoint:this.xData[this.xData.length-1]}[we])}for(te=1;te<b.length;te++)b.info.segmentStarts&&b.info.segmentStarts.indexOf(te)!==-1||(D=Math.max(b[te]-b[te-1],D));q=b.info,q.gapSize=D,this.closestPointRange=b.info.totalRange,this.groupMap=X.groupMap,L&&(L=y,te=N,M(te[0])&&G(L.min)&&G(L.dataMin)&&te[0]<L.min&&((!M(L.options.min)&&L.min<=L.dataMin||L.min===L.dataMin)&&(L.min=Math.min(te[0],L.min)),L.dataMin=Math.min(te[0],L.dataMin)),M(te[te.length-1])&&G(L.max)&&G(L.dataMax)&&te[te.length-1]>L.max&&((!M(L.options.max)&&G(L.dataMax)&&L.max>=L.dataMax||L.max===L.dataMax)&&(L.max=Math.max(te[te.length-1],L.max)),L.dataMax=Math.max(te[te.length-1],L.dataMax))),H.groupAll&&(this.allGroupedData=E,H=this.cropData(N,E,y.min,y.max,1),N=H.xData,E=H.yData,this.cropStart=H.start),this.processedXData=N,this.processedYData=E}else this.groupMap=null;this.hasGroupedData=ue,this.currentDataGrouping=q,this.preventGraphAnimation=(f&&f.totalRange)!==(q&&q.totalRange)}}function Q(){this.groupedData&&(this.groupedData.forEach(function(N,F){N&&(this.groupedData[F]=N.destroy?N.destroy():null)},this),this.groupedData.length=0)}function z(){ie.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function W(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")?"sum":"average"}function K(N,F,H,E){const L=this,f=L.data,y=L.options&&L.options.data,b=[],D=[],X=[],te=N.length,q=!!F,ce=[],fe=L.pointArrayMap,we=fe&&fe.length,Z=["x"].concat(fe||["y"]),se=this.options.dataGrouping&&this.options.dataGrouping.groupAll;let ue=0,ye=0;if(E=typeof E=="function"?E:E&&l[E]?l[E]:l[L.getDGApproximation&&L.getDGApproximation()||"average"],we)for(var Pe=fe.length;Pe--;)ce.push([]);else ce.push([]);Pe=we||1;for(let ve=0;ve<=te;ve++)if(!(N[ve]<H[0])){for(;typeof H[ue+1]<"u"&&N[ve]>=H[ue+1]||ve===te;){var ae=H[ue];L.dataGroupInfo={start:se?ye:L.cropStart+ye,length:ce[0].length};var xe=E.apply(L,ce);for(L.pointClass&&!M(L.dataGroupInfo.options)&&(L.dataGroupInfo.options=U(L.pointClass.prototype.optionsToObject.call({series:L},L.options.data[L.cropStart+ye])),Z.forEach(function(le){delete L.dataGroupInfo.options[le]})),typeof xe<"u"&&(b.push(ae),D.push(xe),X.push(L.dataGroupInfo)),ye=ve,ae=0;ae<Pe;ae++)ce[ae].length=0,ce[ae].hasNulls=!1;if(ue+=1,ve===te)break}if(ve===te)break;if(fe){ae=L.options.dataGrouping&&L.options.dataGrouping.groupAll?ve:L.cropStart+ve,ae=f&&f[ae]||L.pointClass.prototype.applyOptions.apply({series:L},[y[ae]]);for(let le=0;le<we;le++)xe=ae[fe[le]],G(xe)?ce[le].push(xe):xe===null&&(ce[le].hasNulls=!0)}else ae=q?F[ve]:null,G(ae)?ce[0].push(ae):ae===null&&(ce[0].hasNulls=!0)}return{groupedXData:b,groupedYData:D,groupMap:X}}function I(N){N=N.options;const F=this.type,H=this.chart.options.plotOptions,E=this.useCommonDataGrouping&&c.common,L=c.seriesSpecific;let f=m.defaultOptions.plotOptions[F].dataGrouping;if(H&&(L[F]||E)){const y=this.chart.rangeSelector;f||(f=U(c.common,L[F])),N.dataGrouping=U(E,f,H.series&&H.series.dataGrouping,H[F].dataGrouping,this.userOptions.dataGrouping,!N.isInternal&&y&&G(y.selected)&&y.buttonOptions[y.selected].dataGrouping)}}const{series:{prototype:O}}=n,{addEvent:$,defined:M,error:S,extend:k,isNumber:G,merge:U,pick:C}=T,ie=O.generatePoints,J=[];return{compose:function(N){const F=N.prototype.pointClass;T.pushUnique(J,F)&&$(F,"update",function(){if(this.dataGroup)return S(24,!1,this.series.chart),!1}),T.pushUnique(J,N)&&($(N,"afterSetOptions",I),$(N,"destroy",Q),k(N.prototype,{applyGrouping:V,destroyGroupedData:Q,generatePoints:z,getDGApproximation:W,groupData:K}))},groupData:K}}),r(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/FormatUtilities.js"],t["Core/Utilities.js"]],function(l,c,d,m,n){function T(I){const O=this.chart,$=O.time,M=I.labelConfig,S=M.series;var k=S.tooltipOptions,G=S.options.dataGrouping;const U=S.xAxis;var C=k.xDateFormat;let ie,J,N=k[I.isFooter?"footerFormat":"headerFormat"];U&&U.options.type==="datetime"&&G&&W(M.key)&&(J=S.currentDataGrouping,G=G.dateTimeLabelFormats||c.common.dateTimeLabelFormats,J?(k=G[J.unitName],J.count===1?C=k[0]:(C=k[1],ie=k[2])):!C&&G&&U.dateTime&&(C=U.dateTime.getXDateFormat(M.x,k.dateTimeLabelFormats)),C=$.dateFormat(C,M.key),ie&&(C+=$.dateFormat(ie,M.key+J.totalRange-1)),S.chart.styledMode&&(N=this.styledModeFormat(N)),I.text=V(N,{point:z(M.point,{key:C}),series:S},O),I.preventDefault())}const{format:V}=m,{addEvent:Q,extend:z,isNumber:W}=n,K=[];return m={compose:function(I,O,$){l.compose(I),d.compose(O),$&&n.pushUnique(K,$)&&Q($,"headerFormatter",T)},groupData:d.groupData},m}),r(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(l,c,d,m){l.dataGrouping={approximationDefaults:c,approximations:d},m.compose(l.Axis,l.Series,l.Tooltip)}),r(t,"Series/DataModifyComposition.js",[t["Core/Axis/Axis.js"],t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(l,c,d,m){const{prototype:{tooltipFormatter:n}}=c,{addEvent:T,arrayMax:V,arrayMin:Q,correctFloat:z,defined:W,isArray:K,isNumber:I,isString:O,pick:$}=m;var M;return function(S){function k(f,y,b){this.isXAxis||(this.series.forEach(function(D){f==="compare"&&typeof y!="boolean"?D.setCompare(y,!1):f!=="cumulative"||O(y)||D.setCumulative(y,!1)}),$(b,!0)&&this.chart.redraw())}function G(f){const y=this,{numberFormatter:b}=y.series.chart,D=function(X){f=f.replace("{point."+X+"}",(0<y[X]&&X==="change"?"+":"")+b(y[X],$(y.series.tooltipOptions.changeDecimals,2)))};return W(y.change)&&D("change"),W(y.cumulativeSum)&&D("cumulativeSum"),n.apply(this,[f])}function U(){const f=this.options.compare;let y;(f==="percent"||f==="value"||this.options.cumulative)&&(y=new L(this),f==="percent"||f==="value"?y.initCompare(f):y.initCumulative()),this.dataModify=y}function C(f){f=f.dataExtremes;const y=f.activeYData;if(this.dataModify&&f){let b;this.options.compare?b=[this.dataModify.modifyValue(f.dataMin),this.dataModify.modifyValue(f.dataMax)]:this.options.cumulative&&K(y)&&2<=y.length&&(b=L.getCumulativeExtremes(y)),b&&(f.dataMin=Q(b),f.dataMax=V(b))}}function ie(f,y){this.options.compare=this.userOptions.compare=f,this.update({},$(y,!0)),!this.dataModify||f!=="value"&&f!=="percent"?this.points.forEach(b=>{delete b.change}):this.dataModify.initCompare(f)}function J(){if(this.xAxis&&this.processedYData&&this.dataModify){const f=this.processedXData,y=this.processedYData,b=y.length,D=this.options.compareStart===!0?0:1;let X=-1,te;for(this.pointArrayMap&&(X=this.pointArrayMap.indexOf(this.options.pointValKey||this.pointValKey||"y")),te=0;te<b-D;te++){const q=y[te]&&-1<X?y[te][X]:y[te];if(I(q)&&q!==0&&f[te+D]>=(this.xAxis.min||0)){this.dataModify.compareValue=q;break}}}}function N(f,y){this.setModifier("compare",f,y)}function F(f,y){f=$(f,!1),this.options.cumulative=this.userOptions.cumulative=f,this.update({},$(y,!0)),this.dataModify?this.dataModify.initCumulative():this.points.forEach(b=>{delete b.cumulativeSum})}function H(f,y){this.setModifier("cumulative",f,y)}const E=[];S.compose=function(f,y,b){if(m.pushUnique(E,f)){const D=f.prototype;D.setCompare=ie,D.setCumulative=F,T(f,"afterInit",U),T(f,"afterGetExtremes",C),T(f,"afterProcessData",J)}return m.pushUnique(E,y)&&(y=y.prototype,y.setCompare=N,y.setModifier=k,y.setCumulative=H),m.pushUnique(E,b)&&(b.prototype.tooltipFormatter=G),f};class L{constructor(y){this.series=y}modifyValue(){return 0}static getCumulativeExtremes(y){let b=1/0,D=-1/0;return y.reduce((X,te)=>(te=X+te,b=Math.min(b,te,X),D=Math.max(D,te,X),te)),[b,D]}initCompare(y){this.modifyValue=function(b,D){b===null&&(b=0);const X=this.compareValue;return typeof b<"u"&&typeof X<"u"?(b=y==="value"?b-X:b/X*100-(this.series.options.compareBase===100?0:100),typeof D<"u"&&(D=this.series.points[D])&&(D.change=b),b):0}}initCumulative(){this.modifyValue=function(y,b){if(y===null&&(y=0),y!==void 0&&b!==void 0){const D=0<b?this.series.points[b-1]:null;return D&&D.cumulativeSum&&(y=z(D.cumulativeSum+y)),(b=this.series.points[b])&&(b.cumulativeSum=y),y}return 0}}}S.Additions=L}(M||(M={})),M}),r(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(l,c){function d(){this.navigatorAxis||(this.navigatorAxis=new I(this))}function m(O){var $=this.chart.options,M=$.navigator;const S=this.navigatorAxis,k=$.chart.zooming.pinchType,G=$.rangeSelector;$=$.chart.zooming.type,this.isXAxis&&(M&&M.enabled||G&&G.enabled)&&($==="y"?O.zoomed=!1:(!n&&$==="xy"||n&&k==="xy")&&this.options.range&&(M=S.previousZoom,Q(O.newMin)?S.previousZoom=[this.min,this.max]:M&&(O.newMin=M[0],O.newMax=M[1],S.previousZoom=void 0))),typeof O.zoomed<"u"&&O.preventDefault()}const{isTouchDevice:n}=l,{addEvent:T,correctFloat:V,defined:Q,isNumber:z,pick:W}=c,K=[];class I{static compose($){c.pushUnique(K,$)&&($.keepProps.push("navigatorAxis"),T($,"init",d),T($,"zoom",m))}constructor($){this.axis=$}destroy(){this.axis=void 0}toFixedRange($,M,S,k){var G=this.axis,U=G.chart;$=W(S,G.translate($,!0,!G.horiz)),M=W(k,G.translate(M,!0,!G.horiz)),U=U&&U.fixedRange,G=(G.pointRange||0)/2;const C=U&&(M-$)/U;return Q(S)||($=V($+G)),Q(k)||(M=V(M-G)),.7<C&&1.3>C&&(k?$=M-U:M=$+U),z($)&&z(M)||($=M=void 0),{min:$,max:M}}}return I}),r(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(l,c){return{parse:l}=l,{seriesTypes:c}=c,c={height:40,margin:25,maskInside:!0,handles:{width:7,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:l("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:typeof c.areaspline>"u"?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{overscroll:0,className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}},c}),r(t,"Stock/Navigator/NavigatorSymbols.js",[],function(){return{"navigator-handle":function(l,c,d,m,n={}){return l=n.width?n.width/2:d,c=Math.round(l/3)+.5,m=n.height||m,[["M",-l-1,.5],["L",l,.5],["L",l,m+.5],["L",-l-1,m+.5],["L",-l-1,.5],["M",-c,4],["L",-c,m-3],["M",c-1,4],["L",c-1,m-3]]}}}),r(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T,V){function Q(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function z(){var E;const L=this.legend,f=this.navigator;let y,b,D;if(f){y=L&&L.options,b=f.xAxis,D=f.yAxis;const{scrollbarHeight:X,scrollButtonSize:te}=f;this.inverted?(f.left=f.opposite?this.chartWidth-X-f.height:this.spacing[3]+X,f.top=this.plotTop+te):(f.left=N(b.left,this.plotLeft+te),f.top=f.navigatorOptions.top||this.chartHeight-f.height-X-(((E=this.scrollbar)===null||E===void 0?void 0:E.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(y&&y.verticalAlign==="bottom"&&y.layout!=="proximate"&&y.enabled&&!y.floating?L.legendHeight+N(y.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),b&&D&&(this.inverted?b.options.left=D.options.left=f.left:b.options.top=D.options.top=f.top,b.setAxisSize(),D.setAxisSize())}}function W(E){this.navigator||this.scroller||!this.options.navigator.enabled&&!this.options.scrollbar.enabled||(this.scroller=this.navigator=new H(this),N(E.redraw,!0)&&this.redraw(E.animation))}function K(){const E=this.options;(E.navigator.enabled||E.scrollbar.enabled)&&(this.scroller=this.navigator=new H(this))}function I(){const E=this.options,L=E.navigator,f=E.rangeSelector;if((L&&L.enabled||f&&f.enabled)&&(!G&&E.chart.zooming.type==="x"||G&&E.chart.zooming.pinchType==="x"))return!1}function O(E){const L=E.navigator;L&&E.xAxis[0]&&(E=E.xAxis[0].getExtremes(),L.render(E.min,E.max))}function $(E){const L=E.options.navigator||{},f=E.options.scrollbar||{};this.navigator||this.scroller||!L.enabled&&!f.enabled||(J(!0,this.options.navigator,L),J(!0,this.options.scrollbar,f),delete E.options.navigator,delete E.options.scrollbar)}function M(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}const{defaultOptions:S,setOptions:k}=l,{isTouchDevice:G}=c,{getRendererType:U}=T,{addEvent:C,extend:ie,merge:J,pick:N}=V,F=[];let H;return{compose:function(E,L,f,y){d.compose(E),H=f,V.pushUnique(F,L)&&(L.prototype.callbacks.push(O),C(L,"afterAddSeries",Q),C(L,"afterSetChartSize",z),C(L,"afterUpdate",W),C(L,"beforeRender",K),C(L,"beforeShowResetZoom",I),C(L,"update",$)),V.pushUnique(F,y)&&C(y,"afterUpdate",M),V.pushUnique(F,U)&&ie(U().prototype.symbols,n),V.pushUnique(F,k)&&ie(S,{navigator:m})}}}),r(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Utilities.js"]],function(l){const{addEvent:c,defined:d,pick:m}=l,n=[];class T{static compose(Q,z){if(!l.pushUnique(n,Q))return Q;const W=K=>{const I=m(K.options&&K.options.min,K.min),O=m(K.options&&K.options.max,K.max);return{axisMin:I,axisMax:O,scrollMin:d(K.dataMin)?Math.min(I,K.min,K.dataMin,m(K.threshold,1/0)):I,scrollMax:d(K.dataMax)?Math.max(O,K.max,K.dataMax,m(K.threshold,-1/0)):O}};return c(Q,"afterInit",function(){const K=this;K.options&&K.options.scrollbar&&K.options.scrollbar.enabled&&(K.options.scrollbar.vertical=!K.horiz,K.options.startOnTick=K.options.endOnTick=!1,K.scrollbar=new z(K.chart.renderer,K.options.scrollbar,K.chart),c(K.scrollbar,"changed",function(I){let{axisMin:O,axisMax:$,scrollMin:M,scrollMax:S}=W(K);var k=S-M;let G;d(O)&&d($)&&(K.horiz&&!K.reversed||!K.horiz&&K.reversed?(G=M+k*this.to,k=M+k*this.from):(G=M+k*(1-this.from),k=M+k*(1-this.to)),this.shouldUpdateExtremes(I.DOMType)?K.setExtremes(k,G,!0,I.DOMType==="mousemove"||I.DOMType==="touchmove"?!1:void 0,I):this.setRange(this.from,this.to))}))}),c(Q,"afterRender",function(){let{scrollMin:K,scrollMax:I}=W(this),O=this.scrollbar;var $=this.axisTitleMargin+(this.titleOffset||0),M=this.chart.scrollbarsOffsets;let S=this.options.margin||0;O&&(this.horiz?(this.opposite||(M[1]+=$),O.position(this.left,this.top+this.height+2+M[1]-(this.opposite?S:0),this.width,this.height),this.opposite||(M[1]+=S),$=1):(this.opposite&&(M[0]+=$),O.position(O.options.opposite?this.left+this.width+2+M[0]-(this.opposite?0:S):this.opposite?0:S,this.top,this.width,this.height),this.opposite&&(M[0]+=S),$=0),M[$]+=O.size+(O.options.margin||0),isNaN(K)||isNaN(I)||!d(this.min)||!d(this.max)||this.min===this.max?O.setRange(0,1):(M=(this.min-K)/(I-K),$=(this.max-K)/(I-K),this.horiz&&!this.reversed||!this.horiz&&this.reversed?O.setRange(M,$):O.setRange(1-$,1-M)))}),c(Q,"afterGetOffset",function(){const K=this.scrollbar;var I=K&&!K.options.opposite;I=this.horiz?2:I?3:1,K&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[I]+=K.size+(K.options.margin||0))}),Q}}return T}),r(t,"Stock/Scrollbar/ScrollbarDefaults.js",[t["Core/Globals.js"]],function(l){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),r(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(l,c,d,m,n){const{defaultOptions:T}=l,{addEvent:V,correctFloat:Q,defined:z,destroyObjectProperties:W,fireEvent:K,merge:I,pick:O,removeEvent:$}=n;class M{static compose(k){d.compose(k,M)}static swapXY(k,G){return G&&k.forEach(U=>{const C=U.length;let ie;for(let J=0;J<C;J+=2)ie=U[J+1],typeof ie=="number"&&(U[J+1]=U[J+2],U[J+2]=ie)}),k}constructor(k,G,U){this._events=[],this.chart=void 0,this.from=this.chartY=this.chartX=0,this.scrollbar=this.renderer=this.options=this.group=void 0,this.scrollbarButtons=[],this.scrollbarGroup=void 0,this.scrollbarLeft=0,this.scrollbarRifles=void 0,this.scrollbarStrokeWidth=1,this.to=this.size=this.scrollbarTop=0,this.track=void 0,this.trackBorderWidth=1,this.userOptions=void 0,this.y=this.x=0,this.init(k,G,U)}addEvents(){var k=this.options.inverted?[1,0]:[0,1];const G=this.scrollbarButtons,U=this.scrollbarGroup.element,C=this.track.element,ie=this.mouseDownHandler.bind(this),J=this.mouseMoveHandler.bind(this),N=this.mouseUpHandler.bind(this);k=[[G[k[0]].element,"click",this.buttonToMinClick.bind(this)],[G[k[1]].element,"click",this.buttonToMaxClick.bind(this)],[C,"click",this.trackClick.bind(this)],[U,"mousedown",ie],[U.ownerDocument,"mousemove",J],[U.ownerDocument,"mouseup",N]],c.hasTouch&&k.push([U,"touchstart",ie],[U.ownerDocument,"touchmove",J],[U.ownerDocument,"touchend",N]),k.forEach(function(F){V.apply(null,F)}),this._events=k}buttonToMaxClick(k){const G=(this.to-this.from)*O(this.options.step,.2);this.updatePosition(this.from+G,this.to+G),K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:k})}buttonToMinClick(k){const G=Q(this.to-this.from)*O(this.options.step,.2);this.updatePosition(Q(this.from-G),Q(this.to-G)),K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:k})}cursorToScrollbarPosition(k){var G=this.options;return G=G.minWidth>this.calculatedWidth?G.minWidth:0,{chartX:(k.chartX-this.x-this.xOffset)/(this.barWidth-G),chartY:(k.chartY-this.y-this.yOffset)/(this.barWidth-G)}}destroy(){const k=this,G=k.chart.scroller;k.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(U){k[U]&&k[U].destroy&&(k[U]=k[U].destroy())}),G&&k===G.scrollbar&&(G.scrollbar=null,W(G.scrollbarButtons))}drawScrollbarButton(k){const G=this.renderer,U=this.scrollbarButtons,C=this.options,ie=this.size;var J=G.g().add(this.group);U.push(J),C.buttonsEnabled&&(J=G.rect().addClass("highcharts-scrollbar-button").add(J),this.chart.styledMode||J.attr({stroke:C.buttonBorderColor,"stroke-width":C.buttonBorderWidth,fill:C.buttonBackgroundColor}),J.attr(J.crisp({x:-.5,y:-.5,width:ie+1,height:ie+1,r:C.buttonBorderRadius},J.strokeWidth())),k=G.path(M.swapXY([["M",ie/2+(k?-1:1),ie/2-3],["L",ie/2+(k?-1:1),ie/2+3],["L",ie/2+(k?2:-2),ie/2]],C.vertical)).addClass("highcharts-scrollbar-arrow").add(U[k]),this.chart.styledMode||k.attr({fill:C.buttonArrowColor}))}init(k,G,U){this.scrollbarButtons=[],this.renderer=k,this.userOptions=G,this.options=I(m,T.scrollbar,G),this.options.margin=O(this.options.margin,10),this.chart=U,this.size=O(this.options.size,this.options.height),G.enabled&&(this.render(),this.addEvents())}mouseDownHandler(k){k=this.chart.pointer.normalize(k),k=this.cursorToScrollbarPosition(k),this.chartX=k.chartX,this.chartY=k.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(k){var G=this.chart.pointer.normalize(k),U=this.options.vertical?"chartY":"chartX";const C=this.initPositions||[];!this.grabbedCenter||k.touches&&k.touches[0][U]===0||(G=this.cursorToScrollbarPosition(G)[U],U=this[U],U=G-U,this.hasDragged=!0,this.updatePosition(C[0]+U,C[1]+U),this.hasDragged&&K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:k.type,DOMEvent:k}))}mouseUpHandler(k){this.hasDragged&&K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:k.type,DOMEvent:k}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(k,G,U,C){const{buttonsEnabled:ie,margin:J=0,vertical:N}=this.options,F=this.rendered?"animate":"attr";let H=C,E=0;this.group.show(),this.x=k,this.y=G+this.trackBorderWidth,this.width=U,this.height=C,this.xOffset=H,this.yOffset=E,N?(this.width=this.yOffset=U=this.size,this.xOffset=H=0,this.yOffset=E=ie?this.size:0,this.barWidth=C-(ie?2*U:0),this.x=k+=J):(this.height=C=this.size,this.xOffset=H=ie?this.size:0,this.barWidth=U-(ie?2*C:0),this.y+=J),this.group[F]({translateX:k,translateY:this.y}),this.track[F]({width:U,height:C}),this.scrollbarButtons[1][F]({translateX:N?0:U-H,translateY:N?C-E:0})}removeEvents(){this._events.forEach(function(k){$.apply(null,k)}),this._events.length=0}render(){const k=this.renderer,G=this.options,U=this.size,C=this.chart.styledMode,ie=k.g("scrollbar").attr({zIndex:G.zIndex}).hide().add();this.group=ie,this.track=k.rect().addClass("highcharts-scrollbar-track").attr({r:G.trackBorderRadius||0,height:U,width:U}).add(ie),C||this.track.attr({fill:G.trackBackgroundColor,stroke:G.trackBorderColor,"stroke-width":G.trackBorderWidth});const J=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-J%2/2,y:-J%2/2}),this.scrollbarGroup=k.g().add(ie),this.scrollbar=k.rect().addClass("highcharts-scrollbar-thumb").attr({height:U-J,width:U-J,r:G.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=k.path(M.swapXY([["M",-3,U/4],["L",-3,2*U/3],["M",0,U/4],["L",0,2*U/3],["M",3,U/4],["L",3,2*U/3]],G.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),C||(this.scrollbar.attr({fill:G.barBackgroundColor,stroke:G.barBorderColor,"stroke-width":G.barBorderWidth}),this.scrollbarRifles.attr({stroke:G.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-this.scrollbarStrokeWidth%2/2,-this.scrollbarStrokeWidth%2/2),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(k,G){const U=this.options,C=U.vertical;var ie=U.minWidth,J=this.barWidth;const N=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(z(J)){var F=J*Math.min(G,1);k=Math.max(k,0);var H=Math.ceil(J*k);this.calculatedWidth=F=Q(F-H),F<ie&&(H=(J-ie+F)*k,F=ie),ie=Math.floor(H+this.xOffset+this.yOffset),J=F/2-.5,this.from=k,this.to=G,C?(this.scrollbarGroup[N]({translateY:ie}),this.scrollbar[N]({height:F}),this.scrollbarRifles[N]({translateY:J}),this.scrollbarTop=ie,this.scrollbarLeft=0):(this.scrollbarGroup[N]({translateX:ie}),this.scrollbar[N]({width:F}),this.scrollbarRifles[N]({translateX:J}),this.scrollbarLeft=ie,this.scrollbarTop=0),12>=F?this.scrollbarRifles.hide():this.scrollbarRifles.show(),U.showFull===!1&&(0>=k&&1<=G?this.group.hide():this.group.show()),this.rendered=!0}}shouldUpdateExtremes(k){return O(this.options.liveRedraw,c.svg&&!c.isTouchDevice&&!this.chart.boosted)||k==="mouseup"||k==="touchend"||!z(k)}trackClick(k){const G=this.chart.pointer.normalize(k),U=this.to-this.from,C=this.y+this.scrollbarTop,ie=this.x+this.scrollbarLeft;this.options.vertical&&G.chartY>C||!this.options.vertical&&G.chartX>ie?this.updatePosition(this.from+U,this.to+U):this.updatePosition(this.from-U,this.to-U),K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:k})}update(k){this.destroy(),this.init(this.chart.renderer,I(!0,this.options,k),this.chart)}updatePosition(k,G){1<G&&(k=Q(1-Q(G-k)),G=1),0>k&&(G=Q(G-k),k=0),this.from=k,this.to=G}}return M.defaultOptions=m,T.scrollbar=I(!0,M.defaultOptions,T.scrollbar),M}),r(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T,V){function Q(L,...f){if(f=[].filter.call(f,ie),f.length)return Math[L].apply(0,f)}const{defaultOptions:z}=c,{hasTouch:W,isTouchDevice:K}=d,{addEvent:I,clamp:O,correctFloat:$,defined:M,destroyObjectProperties:S,erase:k,extend:G,find:U,isArray:C,isNumber:ie,merge:J,pick:N,removeEvent:F,splat:H}=V;class E{static compose(f,y,b){n.compose(f,y,E,b)}constructor(f){this.rendered=this.range=this.outline=this.opposite=this.navigatorSize=this.navigatorSeries=this.navigatorOptions=this.navigatorGroup=this.navigatorEnabled=this.left=this.height=this.handles=this.chart=this.baseSeries=void 0,this.scrollbarHeight=0,this.zoomedMin=this.zoomedMax=this.yAxis=this.xAxis=this.top=this.size=this.shades=this.scrollButtonSize=void 0,this.init(f)}drawHandle(f,y,b,D){const X=this.navigatorOptions.handles.height;this.handles[y][D](b?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(f,10)+.5-X)}:{translateX:Math.round(this.left+parseInt(f,10)),translateY:Math.round(this.top+this.height/2-X/2-1)})}drawOutline(f,y,b,D){const X=this.navigatorOptions.maskInside;var te=this.outline.strokeWidth();const q=te/2;var ce=te%2/2;const fe=this.scrollButtonSize,we=this.size,Z=this.top;te=this.height;const se=Z-q,ue=Z+te;let ye=this.left;b?(b=Z+y+ce,y=Z+f+ce,ce=[["M",ye+te,Z-fe-ce],["L",ye+te,b],["L",ye,b],["M",ye,y],["L",ye+te,y],["L",ye+te,Z+we+fe]],X&&ce.push(["M",ye+te,b-q],["L",ye+te,y+q])):(ye-=fe,f+=ye+fe-ce,y+=ye+fe-ce,ce=[["M",ye,se],["L",f,se],["L",f,ue],["M",y,ue],["L",y,se],["L",ye+we+2*fe,Z+q]],X&&ce.push(["M",f-q,se],["L",y+q,se])),this.outline[D]({d:ce})}drawMasks(f,y,b,D){const X=this.left,te=this.top,q=this.height;let ce,fe,we,Z;b?(we=[X,X,X],Z=[te,te+f,te+y],fe=[q,q,q],ce=[f,y-f,this.size-y]):(we=[X,X+f,X+y],Z=[te,te,te],fe=[f,y-f,this.size-y],ce=[q,q,q]),this.shades.forEach((se,ue)=>{se[D]({x:we[ue],y:Z[ue],width:fe[ue],height:ce[ue]})})}renderElements(){const f=this,y=f.navigatorOptions,b=y.maskInside,D=f.chart,X=D.renderer,te={cursor:D.inverted?"ns-resize":"ew-resize"},q=f.navigatorGroup=X.g("navigator").attr({zIndex:8,visibility:"hidden"}).add();if([!b,b,!b].forEach((ce,fe)=>{const we=X.rect().addClass("highcharts-navigator-mask"+(fe===1?"-inside":"-outside")).add(q);D.styledMode||(we.attr({fill:ce?y.maskFill:"rgba(0,0,0,0)"}),fe===1&&we.css(te)),f.shades[fe]=we}),f.outline=X.path().addClass("highcharts-navigator-outline").add(q),D.styledMode||f.outline.attr({"stroke-width":y.outlineWidth,stroke:y.outlineColor}),y.handles&&y.handles.enabled){const ce=y.handles,{height:fe,width:we}=ce;[0,1].forEach(Z=>{f.handles[Z]=X.symbol(ce.symbols[Z],-we/2-1,0,we,fe,ce),D.inverted&&f.handles[Z].attr({rotation:90,rotationOriginX:Math.floor(-we/2),rotationOriginY:(fe+we)/2}),f.handles[Z].attr({zIndex:7-Z}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][Z]).add(q),D.styledMode||f.handles[Z].attr({fill:ce.backgroundColor,stroke:ce.borderColor,"stroke-width":ce.lineWidth}).css(te)})}}update(f){(this.series||[]).forEach(y=>{y.baseSeries&&delete y.baseSeries.navigatorSeries}),this.destroy(),J(!0,this.chart.options.navigator,f),this.init(this.chart)}render(f,y,b,D){var X=this.chart;const te=this.xAxis,q=te.pointRange||0;var ce=te.navigatorAxis.fake?X.xAxis[0]:te;const fe=this.navigatorEnabled;var we=this.rendered,Z=X.inverted;const se=X.xAxis[0].minRange,ue=X.xAxis[0].options.maxRange,ye=this.scrollButtonSize;let Pe=this.scrollbarHeight,ae;if(!this.hasDragged||M(b)){if(f=$(f-q/2),y=$(y+q/2),!ie(f)||!ie(y))if(we)b=0,D=N(te.width,ce.width);else return;this.left=N(te.left,X.plotLeft+ye+(Z?X.plotWidth:0));var xe=this.size=ae=N(te.len,(Z?X.plotHeight:X.plotWidth)-2*ye);X=Z?Pe:ae+2*ye,b=N(b,te.toPixels(f,!0)),D=N(D,te.toPixels(y,!0)),ie(b)&&Math.abs(b)!==1/0||(b=0,D=X),f=te.toValue(b,!0),y=te.toValue(D,!0);var ve=Math.abs($(y-f));ve<se?this.grabbedLeft?b=te.toPixels(y-se-q,!0):this.grabbedRight&&(D=te.toPixels(f+se+q,!0)):M(ue)&&$(ve-q)>ue&&(this.grabbedLeft?b=te.toPixels(y-ue-q,!0):this.grabbedRight&&(D=te.toPixels(f+ue+q,!0))),this.zoomedMax=O(Math.max(b,D),0,xe),this.zoomedMin=O(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(b,D),0,xe),this.range=this.zoomedMax-this.zoomedMin,xe=Math.round(this.zoomedMax),b=Math.round(this.zoomedMin),fe&&(this.navigatorGroup.attr({visibility:"inherit"}),we=we&&!this.hasDragged?"animate":"attr",this.drawMasks(b,xe,Z,we),this.drawOutline(b,xe,Z,we),this.navigatorOptions.handles.enabled&&(this.drawHandle(b,0,Z,we),this.drawHandle(xe,1,Z,we))),this.scrollbar&&(Z?(Z=this.top-ye,ce=this.left-Pe+(fe||!ce.opposite?0:(ce.titleOffset||0)+ce.axisTitleMargin),Pe=ae+2*ye):(Z=this.top+(fe?this.height:-Pe),ce=this.left-ye),this.scrollbar.position(ce,Z,X,Pe),this.scrollbar.setRange(this.zoomedMin/(ae||1),this.zoomedMax/(ae||1))),this.rendered=!0}}addMouseEvents(){const f=this,y=f.chart,b=y.container;let D=[],X,te;f.mouseMoveHandler=X=function(q){f.onMouseMove(q)},f.mouseUpHandler=te=function(q){f.onMouseUp(q)},D=f.getPartsEvents("mousedown"),D.push(I(y.renderTo,"mousemove",X),I(b.ownerDocument,"mouseup",te)),W&&(D.push(I(y.renderTo,"touchmove",X),I(b.ownerDocument,"touchend",te)),D.concat(f.getPartsEvents("touchstart"))),f.eventsToUnbind=D,f.series&&f.series[0]&&D.push(I(f.series[0].xAxis,"foundExtremes",function(){y.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(f){const y=this,b=[];return["shades","handles"].forEach(function(D){y[D].forEach(function(X,te){b.push(I(X.element,f,function(q){y[D+"Mousedown"](q,te)}))})}),b}shadesMousedown(f,y){f=this.chart.pointer.normalize(f);const b=this.chart,D=this.xAxis,X=this.zoomedMin,te=this.size,q=this.range;let ce=this.left,fe=f.chartX,we,Z;b.inverted&&(fe=f.chartY,ce=this.top),y===1?(this.grabbedCenter=fe,this.fixedWidth=q,this.dragOffset=fe-X):(f=fe-ce-q/2,y===0?f=Math.max(0,f):y===2&&f+q>=te&&(f=te-q,this.reversedExtremes?(f-=q,Z=this.getUnionExtremes().dataMin):we=this.getUnionExtremes().dataMax),f!==X&&(this.fixedWidth=q,y=D.navigatorAxis.toFixedRange(f,f+q,Z,we),M(y.min)&&b.xAxis[0].setExtremes(Math.min(y.min,y.max),Math.max(y.min,y.max),!0,null,{trigger:"navigator"})))}handlesMousedown(f,y){this.chart.pointer.normalize(f),f=this.chart;const b=f.xAxis[0],D=this.reversedExtremes;y===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=D?b.min:b.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=D?b.max:b.min),f.fixedRange=null}onMouseMove(f){const y=this;var b=y.chart;const D=y.navigatorSize,X=y.range,te=y.dragOffset,q=b.inverted;let ce=y.left;f.touches&&f.touches[0].pageX===0||(f=b.pointer.normalize(f),b=f.chartX,q&&(ce=y.top,b=f.chartY),y.grabbedLeft?(y.hasDragged=!0,y.render(0,0,b-ce,y.otherHandlePos)):y.grabbedRight?(y.hasDragged=!0,y.render(0,0,y.otherHandlePos,b-ce)):y.grabbedCenter&&(y.hasDragged=!0,b<te?b=te:b>D+te-X&&(b=D+te-X),y.render(0,0,b-te,b-te+X)),y.hasDragged&&y.scrollbar&&N(y.scrollbar.options.liveRedraw,!K&&!this.chart.boosted)&&(f.DOMType=f.type,setTimeout(function(){y.onMouseUp(f)},0)))}onMouseUp(f){var y=this.chart,b=this.xAxis,D=this.scrollbar;const X=f.DOMEvent||f,te=y.inverted,q=this.rendered&&!this.hasDragged?"animate":"attr";let ce,fe;(!this.hasDragged||D&&D.hasDragged)&&f.trigger!=="scrollbar"||(D=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?ce=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(fe=this.fixedExtreme),this.zoomedMax===this.size&&(fe=this.reversedExtremes?D.dataMin:D.dataMax),this.zoomedMin===0&&(ce=this.reversedExtremes?D.dataMax:D.dataMin),b=b.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,ce,fe),M(b.min)&&y.xAxis[0].setExtremes(Math.min(b.min,b.max),Math.max(b.min,b.max),!0,this.hasDragged?!1:null,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:X})),f.DOMType!=="mousemove"&&f.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&ie(this.zoomedMin)&&ie(this.zoomedMax)&&(y=Math.round(this.zoomedMin),f=Math.round(this.zoomedMax),this.shades&&this.drawMasks(y,f,te,q),this.outline&&this.drawOutline(y,f,te,q),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(y,0,te,q),this.drawHandle(f,1,te,q)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(f){f()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){const f=this.baseSeries||[];this.navigatorEnabled&&f[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&f.forEach(function(y){F(y,"updatedData",this.updatedDataHandler)},this),f[0].xAxis&&F(f[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}init(f){var y=f.options,b=y.navigator||{},D=b.enabled,X=y.scrollbar||{},te=X.enabled;y=D&&b.height||0;var q=te&&X.height||0;const ce=X.buttonsEnabled&&q||0;this.handles=[],this.shades=[],this.chart=f,this.setBaseSeries(),this.height=y,this.scrollbarHeight=q,this.scrollButtonSize=ce,this.scrollbarEnabled=te,this.navigatorEnabled=D,this.navigatorOptions=b,this.scrollbarOptions=X,this.opposite=N(b.opposite,!(D||!f.inverted));const fe=this;D=fe.baseSeries,X=f.xAxis.length,te=f.yAxis.length,q=D&&D[0]&&D[0].xAxis||f.xAxis[0]||{options:{}},f.isDirtyBox=!0,fe.navigatorEnabled?(fe.xAxis=new l(f,J({breaks:q.options.breaks,ordinal:q.options.ordinal},b.xAxis,{id:"navigator-x-axis",yAxis:"navigator-y-axis",isX:!0,type:"datetime",index:X,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},f.inverted?{offsets:[ce,0,-ce,0],width:y}:{offsets:[0,-ce,0,ce],height:y})),fe.yAxis=new l(f,J(b.yAxis,{id:"navigator-y-axis",alignTicks:!1,offset:0,index:te,isInternal:!0,reversed:N(b.yAxis&&b.yAxis.reversed,f.yAxis[0]&&f.yAxis[0].reversed,!1),zoomEnabled:!1},f.inverted?{width:y}:{height:y})),D||b.series.data?fe.updateNavigatorSeries(!1):f.series.length===0&&(fe.unbindRedraw=I(f,"beforeRedraw",function(){0<f.series.length&&!fe.series&&(fe.setBaseSeries(),fe.unbindRedraw())})),fe.reversedExtremes=f.inverted&&!fe.xAxis.reversed||!f.inverted&&fe.xAxis.reversed,fe.renderElements(),fe.addMouseEvents()):(fe.xAxis={chart:f,navigatorAxis:{fake:!0},translate:function(we,Z){var se=f.xAxis[0];const ue=se.getExtremes(),ye=se.len-2*ce,Pe=Q("min",se.options.min,ue.dataMin);return se=Q("max",se.options.max,ue.dataMax)-Pe,Z?we*se/ye+Pe:ye*(we-Pe)/se},toPixels:function(we){return this.translate(we)},toValue:function(we){return this.translate(we,!0)}},fe.xAxis.navigatorAxis.axis=fe.xAxis,fe.xAxis.navigatorAxis.toFixedRange=m.prototype.toFixedRange.bind(fe.xAxis.navigatorAxis)),f.options.scrollbar.enabled&&(b=J(f.options.scrollbar,{vertical:f.inverted}),!ie(b.margin)&&fe.navigatorEnabled&&(b.margin=f.inverted?-3:3),f.scrollbar=fe.scrollbar=new T(f.renderer,b,f),I(fe.scrollbar,"changed",function(we){var Z=fe.size;const se=Z*this.to;Z*=this.from,fe.hasDragged=fe.scrollbar.hasDragged,fe.render(0,0,Z,se),this.shouldUpdateExtremes(we.DOMType)&&setTimeout(function(){fe.onMouseUp(we)})})),fe.addBaseSeriesEvents(),fe.addChartEvents()}getUnionExtremes(f){const y=this.chart.xAxis[0],b=this.xAxis,D=b.options,X=y.options;let te;return f&&y.dataMin===null||(te={dataMin:N(D&&D.min,Q("min",X.min,y.dataMin,b.dataMin,b.min)),dataMax:N(D&&D.max,Q("max",X.max,y.dataMax,b.dataMax,b.max))}),te}setBaseSeries(f,y){const b=this.chart,D=this.baseSeries=[];f=f||b.options&&b.options.navigator.baseSeries||(b.series.length?U(b.series,X=>!X.options.isInternal).index:0),(b.series||[]).forEach((X,te)=>{X.options.isInternal||!X.options.showInNavigator&&(te!==f&&X.options.id!==f||X.options.showInNavigator===!1)||D.push(X)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,y)}updateNavigatorSeries(f,y){const b=this,D=b.chart,X=b.baseSeries,te={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},q=b.series=(b.series||[]).filter(se=>{const ue=se.baseSeries;return 0>X.indexOf(ue)?(ue&&(F(ue,"updatedData",b.updatedDataHandler),delete ue.navigatorSeries),se.chart&&se.destroy(),!1):!0});let ce,fe,we=b.navigatorOptions.series,Z;X&&X.length&&X.forEach(se=>{const ue=se.navigatorSeries;var ye=G({color:se.color,visible:se.visible},C(we)?z.navigator.series:we);ue&&b.navigatorOptions.adaptToUpdatedData===!1||(te.name="Navigator "+X.length,ce=se.options||{},Z=ce.navigatorOptions||{},ye.dataLabels=H(ye.dataLabels),fe=J(ce,te,ye,Z),fe.pointRange=N(ye.pointRange,Z.pointRange,z.plotOptions[fe.type||"line"].pointRange),ye=Z.data||ye.data,b.hasNavigatorData=b.hasNavigatorData||!!ye,fe.data=ye||ce.data&&ce.data.slice(0),ue&&ue.options?ue.update(fe,y):(se.navigatorSeries=D.initSeries(fe),se.navigatorSeries.baseSeries=se,q.push(se.navigatorSeries)))}),(we.data&&(!X||!X.length)||C(we))&&(b.hasNavigatorData=!1,we=H(we),we.forEach((se,ue)=>{te.name="Navigator "+(q.length+1),fe=J(z.navigator.series,{color:D.series[ue]&&!D.series[ue].options.isInternal&&D.series[ue].color||D.options.colors[ue]||D.options.colors[0]},te,se),fe.data=se.data,fe.data&&(b.hasNavigatorData=!0,q.push(D.initSeries(fe)))})),f&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){const f=this,y=f.baseSeries||[];y[0]&&y[0].xAxis&&y[0].eventsToUnbind.push(I(y[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),y.forEach(b=>{b.eventsToUnbind.push(I(b,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),b.eventsToUnbind.push(I(b,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&b.xAxis&&b.eventsToUnbind.push(I(b,"updatedData",this.updatedDataHandler)),b.eventsToUnbind.push(I(b,"remove",function(){this.navigatorSeries&&(k(f.series,this.navigatorSeries),M(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(f){return this.baseSeries.reduce(function(y,b){return Math.min(y,b.xData&&b.xData.length?b.xData[0]:y)},f)}modifyNavigatorAxisExtremes(){const f=this.xAxis;if(typeof f.getExtremes<"u"){const y=this.getUnionExtremes(!0);!y||y.dataMin===f.min&&y.dataMax===f.max||(f.min=y.dataMin,f.max=y.dataMax)}}modifyBaseAxisExtremes(){const f=this.chart.navigator;var y=this.getExtremes();const b=y.dataMin,D=y.dataMax;y=y.max-y.min;const X=f.stickToMin,te=f.stickToMax,q=N(this.options.overscroll,0),ce=f.series&&f.series[0],fe=!!this.setExtremes;let we,Z;this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton"||(X&&(Z=b,we=Z+y),te&&(we=D+q,X||(Z=Math.max(b,we-y,f.getBaseSeriesMin(ce&&ce.xData?ce.xData[0]:-Number.MAX_VALUE)))),fe&&(X||te)&&ie(Z)&&(this.min=this.userMin=Z,this.max=this.userMax=we)),f.stickToMin=f.stickToMax=null}updatedDataHandler(){const f=this.chart.navigator,y=this.navigatorSeries;f.stickToMax=N(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,f.reversedExtremes?Math.round(f.zoomedMin)===0:Math.round(f.zoomedMax)>=Math.round(f.size)),f.stickToMin=f.shouldStickToMin(this,f),y&&!f.hasNavigatorData&&(y.options.pointStart=this.xData[0],y.setData(this.options.data,!1,null,!1))}shouldStickToMin(f,y){y=y.getBaseSeriesMin(f.xData[0]);var b=f.xAxis;f=b.max;const D=b.min;return b=b.options.range,ie(f)&&ie(D)?b&&0<f-y?f-y<b:D<=y:!1}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(I(this.chart,"redraw",function(){const f=this.navigator,y=f&&(f.baseSeries&&f.baseSeries[0]&&f.baseSeries[0].xAxis||this.xAxis[0]);y&&f.render(y.min,y.max)}),I(this.chart,"getMargins",function(){let f=this.navigator,y=f.opposite?"plotTop":"marginBottom";this.inverted&&(y=f.opposite?"marginRight":"plotLeft"),this[y]=(this[y]||0)+(f.navigatorEnabled||!this.inverted?f.height+f.scrollbarHeight:0)+f.navigatorOptions.margin}))}destroy(){this.removeEvents(),this.xAxis&&(k(this.chart.xAxis,this.xAxis),k(this.chart.axes,this.xAxis)),this.yAxis&&(k(this.chart.yAxis,this.yAxis),k(this.chart.axes,this.yAxis)),(this.series||[]).forEach(f=>{f.destroy&&f.destroy()}),"series xAxis yAxis shades outline scrollbarTrack scrollbarRifles scrollbarGroup scrollbar navigatorGroup rendered".split(" ").forEach(f=>{this[f]&&this[f].destroy&&this[f].destroy(),this[f]=null}),[this.handles].forEach(f=>{S(f)})}}return E}),r(t,"Stock/RangeSelector/RangeSelectorDefaults.js",[],function(){return{lang:{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"→"},rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%e %b %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#334eff",cursor:"pointer",fontSize:"0.8em"},labelStyle:{color:"#666666",fontSize:"0.8em"}}}}),r(t,"Stock/RangeSelector/RangeSelectorComposition.js",[t["Core/Defaults.js"],t["Stock/RangeSelector/RangeSelectorDefaults.js"],t["Core/Utilities.js"]],function(l,c,d){function m(){const F=this.range,H=F.type,E=this.max,L=this.chart.time,f=function(X,te){const q=H==="year"?"FullYear":"Month",ce=new L.Date(X),fe=L.get(q,ce);return L.set(q,ce,fe+te),fe===L.get(q,ce)&&L.set("Date",ce,0),ce.getTime()-X};let y,b;G(F)?(y=E-F,b=F):F&&(y=E+f(E,-(F.count||1)),this.chart&&(this.chart.fixedRange=E-y));const D=C(this.dataMin,Number.MIN_VALUE);return G(y)||(y=D),y<=D&&(y=D,typeof b>"u"&&(b=f(y,F.count)),this.newMax=Math.min(y+b,C(this.dataMax,Number.MAX_VALUE))),G(E)?!G(F)&&F&&F._offsetMin&&(y+=F._offsetMin):y=void 0,y}function n(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new N(this))}function T(){var F=this.axes;const H=this.rangeSelector;H&&(G(H.deferredYTDClick)&&(H.clickButton(H.deferredYTDClick),delete H.deferredYTDClick),F.forEach(E=>{E.updateNames(),E.setScale()}),this.getAxisMargins(),H.render(),F=H.options.verticalAlign,H.options.floating||(F==="bottom"?this.extraBottomMargin=!0:F!=="middle"&&(this.extraTopMargin=!0)))}function V(F){let H,E,L,f;const y=F.rangeSelector,b=()=>{y&&(H=F.xAxis[0].getExtremes(),E=F.legend,f=y&&y.options.verticalAlign,G(H.min)&&y.render(H.min,H.max),E.display&&f==="top"&&f===E.options.verticalAlign&&(L=U(F.spacingBox),L.y=E.options.layout==="vertical"?F.plotTop:L.y+y.getHeight(),E.group.placed=!1,E.align(L)))};y&&(k(ie,D=>D[0]===F)||ie.push([F,[$(F.xAxis[0],"afterSetExtremes",function(D){y&&y.render(D.min,D.max)}),$(F,"redraw",b)]]),b())}function Q(){for(let F=0,H=ie.length;F<H;++F){const E=ie[F];if(E[0]===this){E[1].forEach(L=>L()),ie.splice(F,1);break}}}function z(){var F=this.rangeSelector;F&&(F=F.getHeight(),this.extraTopMargin&&(this.plotTop+=F),this.extraBottomMargin&&(this.marginBottom+=F))}function W(){var F=this.rangeSelector;F&&!F.options.floating&&(F.render(),F=F.options.verticalAlign,F==="bottom"?this.extraBottomMargin=!0:F!=="middle"&&(this.extraTopMargin=!0))}function K(F){var H=F.options.rangeSelector;F=this.extraBottomMargin;const E=this.extraTopMargin;let L=this.rangeSelector;H&&H.enabled&&!M(L)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=L=new N(this)),this.extraTopMargin=this.extraBottomMargin=!1,L&&(V(this),H=H&&H.verticalAlign||L.options&&L.options.verticalAlign,L.options.floating||(H==="bottom"?this.extraBottomMargin=!0:H!=="middle"&&(this.extraTopMargin=!0)),this.extraBottomMargin!==F||this.extraTopMargin!==E)&&(this.isDirtyBox=!0)}const{defaultOptions:I,setOptions:O}=l,{addEvent:$,defined:M,extend:S,find:k,isNumber:G,merge:U,pick:C}=d,ie=[],J=[];let N;return{compose:function(F,H,E){N=E,d.pushUnique(J,F)&&(F.prototype.minFromRange=m),d.pushUnique(J,H)&&($(H,"afterGetContainer",n),$(H,"beforeRender",T),$(H,"destroy",Q),$(H,"getMargins",z),$(H,"render",W),$(H,"update",K),H.prototype.callbacks.push(V)),d.pushUnique(J,O)&&(S(I,{rangeSelector:c.rangeSelector}),S(I.lang,c.lang))}}}),r(t,"Stock/RangeSelector/RangeSelector.js",[t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Stock/RangeSelector/RangeSelectorComposition.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T){function V(H){if(H.indexOf("%L")!==-1)return"text";const E="aAdewbBmoyY".split("").some(f=>H.indexOf("%"+f)!==-1),L="HkIlMS".split("").some(f=>H.indexOf("%"+f)!==-1);return E&&L?"datetime-local":E?"date":L?"time":"text"}const{defaultOptions:Q}=c,{addEvent:z,createElement:W,css:K,defined:I,destroyObjectProperties:O,discardElement:$,extend:M,fireEvent:S,isNumber:k,merge:G,objectEach:U,pad:C,pick:ie,pInt:J,splat:N}=T;class F{static compose(E,L){m.compose(E,L,F)}constructor(E){this.buttons=void 0,this.buttonOptions=F.prototype.defaultButtons,this.initialButtonGroupWidth=0,this.options=void 0,this.chart=E,this.init(E)}clickButton(E,L){const f=this.chart,y=this.buttonOptions[E],b=f.xAxis[0];var D=f.scroller&&f.scroller.getUnionExtremes()||b||{},X=y.type;const te=y.dataGrouping;let q=D.dataMin,ce=D.dataMax,fe,we=b&&Math.round(Math.min(b.max,ie(ce,b.max))),Z;D=y._range;let se,ue,ye,Pe=!0;if(q!==null&&ce!==null){if(f.fixedRange=D,this.setSelected(E),te&&(this.forcedDataGrouping=!0,l.prototype.setDataGrouping.call(b||{chart:this.chart},te,!1),this.frozenStates=y.preserveDataGrouping),X==="month"||X==="year")b?(X={range:y,max:we,chart:f,dataMin:q,dataMax:ce},fe=b.minFromRange.call(X),k(X.newMax)&&(we=X.newMax),Pe=!1):D=y;else if(D)fe=Math.max(we-D,q),we=Math.min(fe+D,ce),Pe=!1;else if(X==="ytd")if(b)(typeof ce>"u"||typeof q>"u")&&(q=Number.MAX_VALUE,ce=Number.MIN_VALUE,f.series.forEach(ae=>{(ae=ae.xData)&&(q=Math.min(ae[0],q),ce=Math.max(ae[ae.length-1],ce))}),L=!1),X=this.getYTDExtremes(ce,q,f.time.useUTC),fe=se=X.min,we=X.max;else{this.deferredYTDClick=E;return}else X==="all"&&b&&(f.navigator&&f.navigator.baseSeries[0]&&(f.navigator.baseSeries[0].xAxis.options.range=void 0),fe=q,we=ce);Pe&&y._offsetMin&&I(fe)&&(fe+=y._offsetMin),y._offsetMax&&I(we)&&(we+=y._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=E+1),b?b.setExtremes(fe,we,ie(L,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:y}):(Z=N(f.options.xAxis)[0],ye=Z.range,Z.range=D,ue=Z.min,Z.min=se,z(f,"load",function(){Z.range=ye,Z.min=ue})),S(this,"afterBtnClick")}}setSelected(E){this.selected=this.options.selected=E}init(E){const L=this,f=E.options.rangeSelector,y=f.buttons||L.defaultButtons.slice(),b=f.selected,D=function(){const X=L.minInput,te=L.maxInput;X&&X.blur&&S(X,"blur"),te&&te.blur&&S(te,"blur")};L.chart=E,L.options=f,L.buttons=[],L.buttonOptions=y,this.eventsToUnbind=[],this.eventsToUnbind.push(z(E.container,"mousedown",D)),this.eventsToUnbind.push(z(E,"resize",D)),y.forEach(L.computeButtonRange),typeof b<"u"&&y[b]&&this.clickButton(b,!1),this.eventsToUnbind.push(z(E,"load",function(){E.xAxis&&E.xAxis[0]&&z(E.xAxis[0],"setExtremes",function(X){this.max-this.min!==E.fixedRange&&X.trigger!=="rangeSelectorButton"&&X.trigger!=="updatedData"&&L.forcedDataGrouping&&!L.frozenStates&&this.setDataGrouping(!1,!1)})}))}updateButtonStates(){const E=this;var L=this.chart;const f=this.dropdown,y=L.xAxis[0],b=Math.round(y.max-y.min),D=!y.hasVisibleSeries,X=L.scroller&&L.scroller.getUnionExtremes()||y,te=X.dataMin,q=X.dataMax;L=E.getYTDExtremes(q,te,L.time.useUTC);const ce=L.min,fe=L.max,we=E.selected,Z=E.options.allButtonsEnabled,se=E.buttons;let ue=k(we);E.buttonOptions.forEach((ye,Pe)=>{var ae=ye._range,xe=ye.type,ve=ye.count||1;const le=se[Pe],me=ye._offsetMax-ye._offsetMin,be=Pe===we,Le=ae>q-te,De=ae<y.minRange;ye=0;let Ne=!1,st=!1;ae=ae===b,(xe==="month"||xe==="year")&&b+36e5>=864e5*{month:28,year:365}[xe]*ve-me&&b-36e5<=864e5*{month:31,year:366}[xe]*ve+me?ae=!0:xe==="ytd"?(ae=fe-ce+me===b,Ne=!be):xe==="all"&&(ae=y.max-y.min>=q-te,st=!be&&ue&&ae),xe=!Z&&(Le||De||st||D),ve=be&&ae||ae&&!ue&&!Ne||be&&E.frozenStates,xe?ye=3:ve&&(ue=!0,ye=2),le.state!==ye&&(le.setState(ye),f&&(f.options[Pe+1].disabled=xe,ye===2&&(f.selectedIndex=Pe+1)),ye===0&&we===Pe&&E.setSelected())})}computeButtonRange(E){const L=E.type,f=E.count||1,y={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};y[L]?E._range=y[L]*f:(L==="month"||L==="year")&&(E._range=864e5*{month:30,year:365}[L]*f),E._offsetMin=ie(E.offsetMin,0),E._offsetMax=ie(E.offsetMax,0),E._range+=E._offsetMax-E._offsetMin}getInputValue(E){E=E==="min"?this.minInput:this.maxInput;const L=this.chart.options.rangeSelector,f=this.chart.time;return E?(E.type==="text"&&L.inputDateParser||this.defaultInputDateParser)(E.value,f.useUTC,f):0}setInputValue(E,L){const f=this.options,y=this.chart.time,b=E==="min"?this.minInput:this.maxInput;if(E=E==="min"?this.minDateBox:this.maxDateBox,b){var D=b.getAttribute("data-hc-time");D=I(D)?Number(D):void 0,I(L)&&(I(D)&&b.setAttribute("data-hc-time-previous",D),b.setAttribute("data-hc-time",L),D=L),b.value=y.dateFormat(this.inputTypeFormats[b.type]||f.inputEditDateFormat,D),E&&E.attr({text:y.dateFormat(f.inputDateFormat,D)})}}setInputExtremes(E,L,f){if(E=E==="min"?this.minInput:this.maxInput){const y=this.inputTypeFormats[E.type],b=this.chart.time;y&&(L=b.dateFormat(y,L),E.min!==L&&(E.min=L),f=b.dateFormat(y,f),E.max!==f&&(E.max=f))}}showInput(E){const L=E==="min"?this.minDateBox:this.maxDateBox;if((E=E==="min"?this.minInput:this.maxInput)&&L&&this.inputGroup){const f=E.type==="text",{translateX:y,translateY:b}=this.inputGroup,{inputBoxWidth:D}=this.options;K(E,{width:f?L.width+(D?-2:20)+"px":"auto",height:L.height-2+"px",border:"2px solid silver"}),f&&D?K(E,{left:y+L.x+"px",top:b+"px"}):K(E,{left:Math.min(Math.round(L.x+y-(E.offsetWidth-L.width)/2),this.chart.chartWidth-E.offsetWidth)+"px",top:b-(E.offsetHeight-L.height)/2+"px"})}}hideInput(E){(E=E==="min"?this.minInput:this.maxInput)&&K(E,{top:"-9999em",border:0,width:"1px",height:"1px"})}defaultInputDateParser(E,L,f){var y=E.split("/").join("-").split(" ").join("T");if(y.indexOf("T")===-1&&(y+="T00:00"),L)y+="Z";else{var b;(b=d.isSafari)&&(b=y,b=!(6<b.length&&(b.lastIndexOf("-")===b.length-6||b.lastIndexOf("+")===b.length-6))),b&&(b=new Date(y).getTimezoneOffset()/60,y+=0>=b?`+${C(-b)}:00`:`-${C(b)}:00`)}return y=Date.parse(y),k(y)||(E=E.split("-"),y=Date.UTC(J(E[0]),J(E[1])-1,J(E[2]))),f&&L&&k(y)&&(y+=f.getTimezoneOffset(y)),y}drawInput(E){function L(){const{maxInput:se,minInput:ue}=D,ye=f.xAxis[0];var Pe=f.scroller&&f.scroller.xAxis?f.scroller.xAxis:ye;const ae=Pe.dataMin;Pe=Pe.dataMax;let xe=D.getInputValue(E);xe!==Number(we.getAttribute("data-hc-time-previous"))&&k(xe)&&(we.setAttribute("data-hc-time-previous",xe),ce&&se&&k(ae)?xe>Number(se.getAttribute("data-hc-time"))?xe=void 0:xe<ae&&(xe=ae):ue&&k(Pe)&&(xe<Number(ue.getAttribute("data-hc-time"))?xe=void 0:xe>Pe&&(xe=Pe)),typeof xe<"u"&&ye.setExtremes(ce?xe:ye.min,ce?ye.max:xe,void 0,void 0,{trigger:"rangeSelectorInput"}))}const{chart:f,div:y,inputGroup:b}=this,D=this,X=f.renderer.style||{};var te=f.renderer;const q=f.options.rangeSelector,ce=E==="min";var fe=Q.lang[ce?"rangeSelectorFrom":"rangeSelectorTo"]||"";fe=te.label(fe,0).addClass("highcharts-range-label").attr({padding:fe?2:0,height:fe?q.inputBoxHeight:0}).add(b),te=te.label("",0).addClass("highcharts-range-input").attr({padding:2,width:q.inputBoxWidth,height:q.inputBoxHeight,"text-align":"center"}).on("click",function(){D.showInput(E),D[E+"Input"].focus()}),f.styledMode||te.attr({stroke:q.inputBoxBorderColor,"stroke-width":1}),te.add(b);const we=W("input",{name:E,className:"highcharts-range-selector"},void 0,y);we.setAttribute("type",V(q.inputDateFormat||"%e %b %Y")),f.styledMode||(fe.css(G(X,q.labelStyle)),te.css(G({color:"#333333"},X,q.inputStyle)),K(we,M({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:X.fontSize,fontFamily:X.fontFamily,top:"-9999em"},q.inputStyle))),we.onfocus=()=>{D.showInput(E)},we.onblur=()=>{we===d.doc.activeElement&&L(),D.hideInput(E),D.setInputValue(E),we.blur()};let Z=!1;return we.onchange=()=>{Z||(L(),D.hideInput(E),we.blur())},we.onkeypress=se=>{se.keyCode===13&&L()},we.onkeydown=se=>{Z=!0,se.keyCode!==38&&se.keyCode!==40||L()},we.onkeyup=()=>{Z=!1},{dateBox:te,input:we,label:fe}}getPosition(){var E=this.chart;const L=E.options.rangeSelector;return E=L.verticalAlign==="top"?E.plotTop-E.axisOffset[0]:0,{buttonTop:E+L.buttonPosition.y,inputTop:E+L.inputPosition.y-10}}getYTDExtremes(E,L,f){const y=this.chart.time;var b=new y.Date(E);const D=y.get("FullYear",b);return f=f?y.Date.UTC(D,0,1):+new y.Date(D,0,1),L=Math.max(L,f),b=b.getTime(),{max:Math.min(E||b,b),min:L}}render(E,L){var f=this.chart,y=f.renderer;const b=f.container;var D=f.options;const X=D.rangeSelector,te=ie(D.chart.style&&D.chart.style.zIndex,0)+1;if(D=X.inputEnabled,X.enabled!==!1){if(this.rendered||(this.group=y.g("range-selector-group").attr({zIndex:7}).add(),this.div=W("div",void 0,{position:"relative",height:0,zIndex:te}),this.buttonOptions.length&&this.renderButtons(),b.parentNode&&b.parentNode.insertBefore(this.div,b),D&&(this.inputGroup=y.g("input-group").add(this.group),y=this.drawInput("min"),this.minDateBox=y.dateBox,this.minLabel=y.label,this.minInput=y.input,y=this.drawInput("max"),this.maxDateBox=y.dateBox,this.maxLabel=y.label,this.maxInput=y.input)),D&&(this.setInputValue("min",E),this.setInputValue("max",L),E=f.scroller&&f.scroller.getUnionExtremes()||f.xAxis[0]||{},I(E.dataMin)&&I(E.dataMax)&&(f=f.xAxis[0].minRange||0,this.setInputExtremes("min",E.dataMin,Math.min(E.dataMax,this.getInputValue("max"))-f),this.setInputExtremes("max",Math.max(E.dataMin,this.getInputValue("min"))+f,E.dataMax)),this.inputGroup)){let q=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(ce=>{if(ce){const{width:fe}=ce.getBBox();fe&&(ce.attr({x:q}),q+=fe+X.inputSpacing)}})}this.alignElements(),this.rendered=!0}}renderButtons(){const{buttons:E,chart:L,options:f}=this,y=Q.lang,b=L.renderer,D=G(f.buttonTheme),X=D&&D.states,te=D.width||28;delete D.width,delete D.states,this.buttonGroup=b.g("range-selector-buttons").add(this.group);const q=this.dropdown=W("select",void 0,{position:"absolute",width:"1px",height:"1px",padding:0,border:0,top:"-9999em",cursor:"pointer",opacity:1e-4},this.div);z(q,"touchstart",()=>{q.style.fontSize="16px"}),[[d.isMS?"mouseover":"mouseenter"],[d.isMS?"mouseout":"mouseleave"],["change","click"]].forEach(([ce,fe])=>{z(q,ce,()=>{const we=E[this.currentButtonIndex()];we&&S(we.element,fe||ce)})}),this.zoomText=b.label(y&&y.rangeSelectorZoom||"",0).attr({padding:f.buttonTheme.padding,height:f.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(f.labelStyle),D["stroke-width"]=ie(D["stroke-width"],0)),W("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,q),this.buttonOptions.forEach((ce,fe)=>{W("option",{textContent:ce.title||ce.text},void 0,q),E[fe]=b.button(ce.text,0,0,we=>{const Z=ce.events&&ce.events.click;let se;Z&&(se=Z.call(ce,we)),se!==!1&&this.clickButton(fe),this.isActive=!0},D,X&&X.hover,X&&X.select,X&&X.disabled).attr({"text-align":"center",width:te}).add(this.buttonGroup),ce.title&&E[fe].attr("title",ce.title)})}alignElements(){const{buttonGroup:E,buttons:L,chart:f,group:y,inputGroup:b,options:D,zoomText:X}=this;var te=f.options;const q=te.exporting&&te.exporting.enabled!==!1&&te.navigation&&te.navigation.buttonOptions,{buttonPosition:ce,inputPosition:fe,verticalAlign:we}=D;te=(ye,Pe)=>q&&this.titleCollision(f)&&we==="top"&&Pe.align==="right"&&Pe.y-ye.getBBox().height-12<(q.y||0)+(q.height||0)+f.spacing[0]?-40:0;var Z=f.plotLeft;if(y&&ce&&fe){var se=ce.x-f.spacing[3];if(E){if(this.positionButtons(),!this.initialButtonGroupWidth){let xe=0;X&&(xe+=X.getBBox().width+5),L.forEach((ve,le)=>{xe+=ve.width,le!==L.length-1&&(xe+=D.buttonSpacing)}),this.initialButtonGroupWidth=xe}Z-=f.spacing[3],this.updateButtonStates();var ue=te(E,ce);this.alignButtonGroup(ue),y.placed=E.placed=f.hasLoaded}ue=0,b&&(ue=te(b,fe),fe.align==="left"?se=Z:fe.align==="right"&&(se=-Math.max(f.axisOffset[1],-ue)),b.align({y:fe.y,width:b.getBBox().width,align:fe.align,x:fe.x+se-2},!0,f.spacingBox),b.placed=f.hasLoaded),this.handleCollision(ue),y.align({verticalAlign:we},!0,f.spacingBox),te=y.alignAttr.translateY,Z=y.getBBox().height+20,se=0,we==="bottom"&&(se=(se=f.legend&&f.legend.options)&&se.verticalAlign==="bottom"&&se.enabled&&!se.floating?f.legend.legendHeight+ie(se.margin,10):0,Z=Z+se-20,se=te-Z-(D.floating?0:D.y)-(f.titleOffset?f.titleOffset[2]:0)-10),we==="top"?(D.floating&&(se=0),f.titleOffset&&f.titleOffset[0]&&(se=f.titleOffset[0]),se+=f.margin[0]-f.spacing[0]||0):we==="middle"&&(fe.y===ce.y?se=te:(fe.y||ce.y)&&(se=0>fe.y||0>ce.y?se-Math.min(fe.y,ce.y):te-Z)),y.translate(D.x,D.y+Math.floor(se));const{minInput:ye,maxInput:Pe,dropdown:ae}=this;D.inputEnabled&&ye&&Pe&&(ye.style.marginTop=y.translateY+"px",Pe.style.marginTop=y.translateY+"px"),ae&&(ae.style.marginTop=y.translateY+"px")}}alignButtonGroup(E,L){const{chart:f,options:y,buttonGroup:b}=this,{buttonPosition:D}=y,X=f.plotLeft-f.spacing[3];let te=D.x-f.spacing[3];D.align==="right"?te+=E-X:D.align==="center"&&(te-=X/2),b&&b.align({y:D.y,width:ie(L,this.initialButtonGroupWidth),align:D.align,x:te},!0,f.spacingBox)}positionButtons(){const{buttons:E,chart:L,options:f,zoomText:y}=this,b=L.hasLoaded?"animate":"attr",{buttonPosition:D}=f,X=L.plotLeft;let te=X;y&&y.visibility!=="hidden"&&(y[b]({x:ie(X+D.x,X)}),te+=D.x+y.getBBox().width+5);for(let q=0,ce=this.buttonOptions.length;q<ce;++q)E[q].visibility!=="hidden"?(E[q][b]({x:te}),te+=E[q].width+f.buttonSpacing):E[q][b]({x:X})}handleCollision(E){const{chart:L,buttonGroup:f,inputGroup:y}=this,{buttonPosition:b,dropdown:D,inputPosition:X}=this.options,te=()=>{let fe=0;return this.buttons.forEach(we=>{we=we.getBBox(),we.width>fe&&(fe=we.width)}),fe},q=fe=>{if(y&&f){const we=y.alignAttr.translateX+y.alignOptions.x-E+y.getBBox().x+2,Z=y.alignOptions.width,se=f.alignAttr.translateX+f.getBBox().x;return se+fe>we&&we+Z>se&&b.y<X.y+y.getBBox().height}return!1},ce=()=>{y&&f&&y.attr({translateX:y.alignAttr.translateX+(L.axisOffset[1]>=-E?0:-E),translateY:y.alignAttr.translateY+f.getBBox().height+10})};if(f){if(D==="always"){this.collapseButtons(E),q(te())&&ce();return}D==="never"&&this.expandButtons()}y&&f?X.align===b.align||q(this.initialButtonGroupWidth+20)?D==="responsive"?(this.collapseButtons(E),q(te())&&ce()):ce():D==="responsive"&&this.expandButtons():f&&D==="responsive"&&(this.initialButtonGroupWidth>L.plotWidth?this.collapseButtons(E):this.expandButtons())}collapseButtons(E){const{buttons:L,buttonOptions:f,chart:y,dropdown:b,options:D,zoomText:X}=this,te=y.userOptions.rangeSelector&&y.userOptions.rangeSelector.buttonTheme||{},q=we=>({text:we?`${we} ▾`:"▾",width:"auto",paddingLeft:ie(D.buttonTheme.paddingLeft,te.padding,8),paddingRight:ie(D.buttonTheme.paddingRight,te.padding,8)});X&&X.hide();let ce=!1;f.forEach((we,Z)=>{Z=L[Z],Z.state!==2?Z.hide():(Z.show(),Z.attr(q(we.text)),ce=!0)}),ce||(b&&(b.selectedIndex=0),L[0].show(),L[0].attr(q(this.zoomText&&this.zoomText.textStr)));const{align:fe}=D.buttonPosition;this.positionButtons(),fe!=="right"&&fe!=="center"||this.alignButtonGroup(E,L[this.currentButtonIndex()].getBBox().width),this.showDropdown()}expandButtons(){const{buttons:E,buttonOptions:L,options:f,zoomText:y}=this;this.hideDropdown(),y&&y.show(),L.forEach((b,D)=>{D=E[D],D.show(),D.attr({text:b.text,width:f.buttonTheme.width||28,paddingLeft:ie(f.buttonTheme.paddingLeft,"unset"),paddingRight:ie(f.buttonTheme.paddingRight,"unset")}),2>D.state&&D.setState(0)}),this.positionButtons()}currentButtonIndex(){const{dropdown:E}=this;return E&&0<E.selectedIndex?E.selectedIndex-1:0}showDropdown(){const{buttonGroup:E,buttons:L,chart:f,dropdown:y}=this;if(E&&y){const{translateX:b,translateY:D}=E,X=L[this.currentButtonIndex()].getBBox();K(y,{left:f.plotLeft+b+"px",top:D+.5+"px",width:X.width+"px",height:X.height+"px"}),this.hasVisibleDropdown=!0}}hideDropdown(){const{dropdown:E}=this;E&&(K(E,{top:"-9999em",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)}getHeight(){var E=this.options,L=this.group;const f=E.y,y=E.buttonPosition.y,b=E.inputPosition.y;return E.height?E.height:(this.alignElements(),E=L?L.getBBox(!0).height+13+f:0,L=Math.min(b,y),(0>b&&0>y||0<b&&0<y)&&(E+=Math.abs(L)),E)}titleCollision(E){return!(E.options.title.text||E.options.subtitle.text)}update(E){const L=this.chart;G(!0,L.options.rangeSelector,E),this.destroy(),this.init(L),this.render()}destroy(){const E=this,L=E.minInput,f=E.maxInput;E.eventsToUnbind&&(E.eventsToUnbind.forEach(y=>y()),E.eventsToUnbind=void 0),O(E.buttons),L&&(L.onfocus=L.onblur=L.onchange=null),f&&(f.onfocus=f.onblur=f.onchange=null),U(E,function(y,b){y&&b!=="chart"&&(y instanceof n?y.destroy():y instanceof window.HTMLElement&&$(y)),y!==F.prototype[b]&&(E[b]=null)},this)}}return M(F.prototype,{defaultButtons:[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}],inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}}),F}),r(t,"Core/Axis/OrdinalAxis.js",[t["Core/Axis/Axis.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(l,c,d,m){const{addEvent:n,correctFloat:T,css:V,defined:Q,error:z,pick:W,timeUnits:K}=m,I=[];var O;return function($){function M(L,f,y,b,D=[],X=0,te){const q={},ce=this.options.tickPixelInterval;var fe=this.chart.time,we=[],Z;let se,ue;var ye=0;let Pe=[],ae=-Number.MAX_VALUE;if(!this.options.ordinal&&!this.options.breaks||!D||3>D.length||typeof f>"u")return fe.getTimeTicks.apply(fe,arguments);const xe=D.length;for(Z=0;Z<xe;Z++){if(ue=Z&&D[Z-1]>y,D[Z]<f&&(ye=Z),Z===xe-1||D[Z+1]-D[Z]>5*X||ue){if(D[Z]>ae){for(se=fe.getTimeTicks(L,D[ye],D[Z],b);se.length&&se[0]<=ae;)se.shift();se.length&&(ae=se[se.length-1]),we.push(Pe.length),Pe=Pe.concat(se)}ye=Z+1}if(ue)break}if(se){if(D=se.info,te&&D.unitRange<=K.hour){for(Z=Pe.length-1,ye=1;ye<Z;ye++)if(fe.dateFormat("%d",Pe[ye])!==fe.dateFormat("%d",Pe[ye-1])){q[Pe[ye]]="day";var ve=!0}ve&&(q[Pe[0]]="day"),D.higherRanks=q}D.segmentStarts=we,Pe.info=D}else z(12,!1,this.chart);if(te&&Q(ce)){ye=Pe.length,fe=[],ve=[];let le;for(Z=ye;Z--;)we=this.translate(Pe[Z]),le&&(ve[Z]=le-we),fe[Z]=le=we;for(ve.sort(),ve=ve[Math.floor(ve.length/2)],ve<.6*ce&&(ve=null),Z=Pe[ye-1]>y?ye-1:ye,le=void 0;Z--;)we=fe[Z],ye=Math.abs(le-we),le&&ye<.8*ce&&(ve===null||ye<.8*ve)?(q[Pe[Z]]&&!q[Pe[Z+1]]?(ye=Z+1,le=we):ye=Z,Pe.splice(ye,1)):le=we}return Pe}function S(L){const f=this.ordinal.positions;if(!f)return L;let y=f.length-1,b;return 0>L?L=f[0]:L>y?L=f[y]:(y=Math.floor(L),b=L-y),typeof b<"u"&&typeof f[y]<"u"?f[y]+(b?b*(f[y+1]-f[y]):0):L}function k(L){var f=this.ordinal,y=f.positions;if(!y)return L;var b=(L-(this.old?this.old.min:this.min))*(this.old?this.old.transA:this.transA)+this.minPixelPadding;if(0<b&&b<this.left+this.len||(f.extendedOrdinalPositions||(f.extendedOrdinalPositions=f.getExtendedPositions()),y=f.extendedOrdinalPositions),y&&y.length){if(L=f.getIndexOfPoint(b,y),f=T(L%1),0<=L&&L<y.length-1)return y[Math.floor(L)]+f*(y[Math.ceil(L)]-y[Math.floor(L)]);f=y.length,b=y[0],y=y[f-1];const D=(y-b)/(f-1);return 0>L?b+D*L:y+D*(L-f)}return L}function G(L,f){const y=$.Additions.findIndexOf(L,f,!0);return L[y]===f?y:y+(f-L[y])/(L[y+1]-L[y])}function U(){this.ordinal||(this.ordinal=new $.Additions(this))}function C(){this.isXAxis&&Q(this.options.overscroll)&&this.max===this.dataMax&&(!this.chart.mouseIsDown||this.isInternal)&&(!this.eventArgs||this.eventArgs&&this.eventArgs.trigger!=="navigator")&&(this.max+=this.options.overscroll,!this.isInternal&&Q(this.userMin)&&(this.min+=this.options.overscroll))}function ie(){this.horiz&&!this.isDirty&&(this.isDirty=this.isOrdinal&&this.chart.navigator&&!this.chart.navigator.adaptToUpdatedData)}function J(){this.ordinal&&(this.ordinal.beforeSetTickPositions(),this.tickInterval=this.ordinal.postProcessTickInterval(this.tickInterval))}function N(L){const f=this.xAxis[0],y=f.options.overscroll,b=L.originalEvent.chartX,D=this.options.chart.panning;let X=!1;if(D&&D.type!=="y"&&f.options.ordinal&&f.series.length){var te=this.mouseDownX;const we=f.getExtremes(),Z=we.dataMax,se=we.min,ue=we.max;var q=this.hoverPoints,ce=f.closestPointRange||f.ordinal&&f.ordinal.overscrollPointsRange;te=(te-b)/(f.translationSlope*(f.ordinal.slope||ce)),ce=f.ordinal.getExtendedPositions();var fe={ordinal:{positions:ce,extendedOrdinalPositions:ce}};ce=f.index2val;const ye=f.val2lin;let Pe;fe.ordinal.positions?1<Math.abs(te)&&(q&&q.forEach(function(ae){ae.setState()}),0>te?(q=fe,Pe=f.ordinal.positions?f:fe):(q=f.ordinal.positions?f:fe,Pe=fe),fe=Pe.ordinal.positions,Z>fe[fe.length-1]&&fe.push(Z),this.fixedRange=ue-se,te=f.navigatorAxis.toFixedRange(void 0,void 0,ce.apply(q,[ye.apply(q,[se,!0])+te]),ce.apply(Pe,[ye.apply(Pe,[ue,!0])+te])),te.min>=Math.min(we.dataMin,se)&&te.max<=Math.max(Z,ue)+y&&f.setExtremes(te.min,te.max,!0,!1,{trigger:"pan"}),this.mouseDownX=b,V(this.container,{cursor:"move"})):X=!0}else X=!0;X||D&&/y/.test(D.type)?y&&(f.max=f.dataMax+y):L.preventDefault()}function F(){const L=this.xAxis;L&&L.options.ordinal&&(delete L.ordinal.index,delete L.ordinal.extendedOrdinalPositions)}function H(L,f){const y=this.ordinal;var b=y.positions;let D=y.slope,X=y.extendedOrdinalPositions;if(!b)return L;var te=b.length;if(b[0]<=L&&b[te-1]>=L)L=G(b,L);else{if(X||(X=y.getExtendedPositions&&y.getExtendedPositions(),y.extendedOrdinalPositions=X),!X||!X.length)return L;te=X.length,D||(D=(X[te-1]-X[0])/te),b=G(X,b[0]),L=L>=X[0]&&L<=X[te-1]?G(X,L)-b:L<X[0]?-b-(X[0]-L)/D:(L-X[te-1])/D+te-b}return f?L:D*(L||0)+y.offset}$.compose=function(L,f,y){if(m.pushUnique(I,L)){const b=L.prototype;b.getTimeTicks=M,b.index2val=S,b.lin2val=k,b.val2lin=H,b.ordinal2lin=b.val2lin,n(L,"afterInit",U),n(L,"foundExtremes",C),n(L,"afterSetScale",ie),n(L,"initialAxisTranslation",J)}return m.pushUnique(I,y)&&n(y,"pan",N),m.pushUnique(I,f)&&n(f,"updatedData",F),L};class E{constructor(f){this.index={},this.axis=f}beforeSetTickPositions(){const f=this.axis,y=f.ordinal;var b=f.getExtremes();const D=b.min;var X=b.max;const te=f.isXAxis&&!!f.options.breaks;b=f.options.ordinal;const q=f.chart.options.chart.ignoreHiddenSeries;let ce,fe;var we;let Z=[],se=Number.MAX_VALUE,ue=!1,ye=!1,Pe=!1;if(b||te){let xe=0;if(f.series.forEach(function(ve,le){if(fe=[],0<le&&ve.options.id!=="highcharts-navigator-series"&&1<ve.processedXData.length&&(ye=xe!==ve.processedXData[1]-ve.processedXData[0]),xe=ve.processedXData[1]-ve.processedXData[0],ve.boosted&&(Pe=ve.boosted),!(q&&ve.visible===!1||ve.takeOrdinalPosition===!1&&!te)&&(Z=Z.concat(ve.processedXData),ce=Z.length,Z.sort(function(me,be){return me-be}),se=Math.min(se,W(ve.closestPointRange,se)),ce)){for(le=0;le<ce-1;)Z[le]!==Z[le+1]&&fe.push(Z[le+1]),le++;fe[0]!==Z[0]&&fe.unshift(Z[0]),Z=fe}}),ye&&Pe&&(Z.pop(),Z.shift()),ce=Z.length,2<ce){var ae=Z[1]-Z[0];for(we=ce-1;we--&&!ue;)Z[we+1]-Z[we]!==ae&&(ue=!0);!f.options.keepOrdinalPadding&&(Z[0]-D>ae||X-Z[Z.length-1]>ae)&&(ue=!0)}else f.options.overscroll&&(ce===2?se=Z[1]-Z[0]:ce===1?(se=f.options.overscroll,Z=[Z[0],Z[0]+se]):se=y.overscrollPointsRange);ue||f.forceOrdinal?(f.options.overscroll&&(y.overscrollPointsRange=se,Z=Z.concat(y.getOverscrollPositions())),y.positions=Z,ae=f.ordinal2lin(Math.max(D,Z[0]),!0),we=Math.max(f.ordinal2lin(Math.min(X,Z[Z.length-1]),!0),1),y.slope=X=(X-D)/(we-ae),y.offset=D-ae*X):(y.overscrollPointsRange=W(f.closestPointRange,y.overscrollPointsRange),y.positions=f.ordinal.slope=y.offset=void 0)}f.isOrdinal=b&&ue,y.groupIntervalFactor=null}static findIndexOf(f,y,b){let D=0,X=f.length-1,te;for(;D<X;)te=Math.ceil((D+X)/2),f[te]<=y?D=te:X=te-1;return f[D]===y||b?D:-1}getExtendedPositions(){const f=this,y=f.axis,b=y.constructor.prototype,D=y.chart,X=y.series[0].currentDataGrouping,te=X?X.count+X.unitName:"raw",q=y.options.overscroll,ce=y.getExtremes();let fe,we,Z=f.index;return Z||(Z=f.index={}),Z[te]||(fe={series:[],chart:D,forceOrdinal:!1,getExtremes:function(){return{min:ce.dataMin,max:ce.dataMax+q}},getGroupPixelWidth:b.getGroupPixelWidth,getTimeTicks:b.getTimeTicks,options:{ordinal:!0},ordinal:{getGroupIntervalFactor:this.getGroupIntervalFactor},ordinal2lin:b.ordinal2lin,getIndexOfPoint:b.getIndexOfPoint,val2lin:b.val2lin},fe.ordinal.axis=fe,y.series.forEach(function(se){we={xAxis:fe,xData:se.xData.slice(),chart:D,destroyGroupedData:c.noop,getProcessedData:d.prototype.getProcessedData,applyGrouping:d.prototype.applyGrouping},we.xData=we.xData.concat(f.getOverscrollPositions()),we.options={dataGrouping:X?{firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",enabled:!0,forced:!0,approximation:"open",units:[[X.unitName,[X.count]]]}:{enabled:!1}},fe.series.push(we),se.processData.apply(we)}),we.closestPointRange!==we.basePointRange&&we.currentDataGrouping&&(fe.forceOrdinal=!0),y.ordinal.beforeSetTickPositions.apply({axis:fe}),Z[te]=fe.ordinal.positions),Z[te]}getGroupIntervalFactor(f,y,b){b=b.processedXData;const D=b.length;var X=[],te=this.groupIntervalFactor;if(!te){for(te=0;te<D-1;te++)X[te]=b[te+1]-b[te];X.sort(function(q,ce){return q-ce}),X=X[Math.floor(D/2)],f=Math.max(f,b[0]),y=Math.min(y,b[D-1]),this.groupIntervalFactor=te=D*X/(y-f)}return te}getIndexOfPoint(f,y){const b=this.axis,D=this.positions?this.positions[0]:0;let X=b.series[0].points&&b.series[0].points[0]&&b.series[0].points[0].plotX||b.minPixelPadding;return 1<b.series.length&&b.series.forEach(function(te){te.points&&Q(te.points[0])&&Q(te.points[0].plotX)&&te.points[0].plotX<X&&te.points[0].plotX>=W(b.min,-1/0)&&(X=te.points[0].plotX)}),f=(f-X)/(b.translationSlope*(this.slope||b.closestPointRange||this.overscrollPointsRange)),E.findIndexOf(y,D)+f}getOverscrollPositions(){const f=this.axis,y=f.options.overscroll,b=this.overscrollPointsRange,D=[];let X=f.dataMax;if(Q(b))for(;X<=f.dataMax+y;)X+=b,D.push(X);return D}postProcessTickInterval(f){const y=this.axis,b=this.slope;return b?y.options.breaks?y.closestPointRange||f:f/(b/y.closestPointRange):f}}$.Additions=E}(O||(O={})),O}),r(t,"Series/HLC/HLCPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(l){({column:{prototype:{pointClass:l}}}=l.seriesTypes);class c extends l{constructor(){super(...arguments),this.series=this.plotClose=this.options=this.low=this.high=this.close=void 0}}return c}),r(t,"Series/HLC/HLCSeriesDefaults.js",[],function(){return{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b> {series.name}</b><br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},threshold:null,states:{hover:{lineWidth:3}},stickyTracking:!0}}),r(t,"Series/HLC/HLCSeries.js",[t["Series/HLC/HLCPoint.js"],t["Series/HLC/HLCSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m){const{column:n}=d.seriesTypes,{extend:T,merge:V}=m;class Q extends n{constructor(){super(...arguments),this.yData=this.points=this.options=this.data=void 0}extendStem(W,K,I){const O=W[0];W=W[1],typeof O[2]=="number"&&(O[2]=Math.max(I+K,O[2])),typeof W[2]=="number"&&(W[2]=Math.min(I-K,W[2]))}getPointPath(W,K){K=K.strokeWidth();const I=W.series,O=K%2/2,$=Math.round(W.plotX)-O,M=Math.round(W.shapeArgs.width/2),S=[["M",$,Math.round(W.yBottom)],["L",$,Math.round(W.plotHigh)]];return W.close!==null&&(W=Math.round(W.plotClose)+O,S.push(["M",$,W],["L",$+M,W]),I.extendStem(S,K/2,W)),S}drawSinglePoint(W){var K=W.series;const I=K.chart;let O=W.graphic;typeof W.plotY<"u"&&(O||(W.graphic=O=I.renderer.path().add(K.group)),I.styledMode||O.attr(K.pointAttribs(W,W.selected&&"select")),K=K.getPointPath(W,O),O[O?"animate":"attr"]({d:K}).addClass(W.getClassName(),!0))}drawPoints(){this.points.forEach(this.drawSinglePoint)}init(){super.init.apply(this,arguments),this.options.stacking=void 0}pointAttribs(W,K){return W=super.pointAttribs.call(this,W,K),delete W.fill,W}toYData(W){return[W.high,W.low,W.close]}translate(){const W=this,K=W.yAxis,I=this.pointArrayMap&&this.pointArrayMap.slice()||[],O=I.map($=>`plot${$.charAt(0).toUpperCase()+$.slice(1)}`);O.push("yBottom"),I.push("low"),super.translate.apply(W),W.points.forEach(function($){I.forEach(function(M,S){M=$[M],M!==null&&(W.dataModify&&(M=W.dataModify.modifyValue(M)),$[O[S]]=K.toPixels(M,!0))}),$.tooltipPos[1]=$.plotHigh+K.pos-W.chart.plotTop})}}return Q.defaultOptions=V(n.defaultOptions,c),T(Q.prototype,{pointClass:l,animate:null,directTouch:!1,pointArrayMap:["high","low","close"],pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointValKey:"close"}),d.registerSeriesType("hlc",Q),Q}),r(t,"Series/OHLC/OHLCPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(l){({seriesTypes:{hlc:l}}=l);class c extends l.prototype.pointClass{constructor(){super(...arguments),this.series=this.plotOpen=this.options=this.open=void 0}getClassName(){return super.getClassName.call(this)+(this.open<this.close?" highcharts-point-up":" highcharts-point-down")}resolveUpColor(){this.open<this.close&&!this.options.color&&this.series.options.upColor&&(this.color=this.series.options.upColor)}resolveColor(){super.resolveColor(),this.resolveUpColor()}getZone(){const m=super.getZone();return this.resolveUpColor(),m}applyOptions(){return super.applyOptions.apply(this,arguments),this.resolveColor&&this.resolveColor(),this}}return c}),r(t,"Series/OHLC/OHLCSeriesDefaults.js",[],function(){return{tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'}}}),r(t,"Series/OHLC/OHLCSeries.js",[t["Series/OHLC/OHLCPoint.js"],t["Series/OHLC/OHLCSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m){function n(O){O=O.options;const $=O.dataGrouping;$&&O.useOhlcData&&O.id!=="highcharts-navigator-series"&&($.approximation="ohlc")}function T(O){O=O.options,O.useOhlcData&&O.id!=="highcharts-navigator-series"&&z(this,{pointValKey:I.prototype.pointValKey,pointArrayMap:I.prototype.pointArrayMap,toYData:I.prototype.toYData})}const{seriesTypes:{hlc:V}}=d,{addEvent:Q,extend:z,merge:W}=m,K=[];class I extends V{constructor(){super(...arguments),this.points=this.options=this.data=void 0}static compose($,...M){m.pushUnique(K,$)&&(Q($,"afterSetOptions",n),Q($,"init",T))}getPointPath($,M){const S=super.getPointPath($,M);M=M.strokeWidth();const k=M%2/2,G=Math.round($.plotX)-k,U=Math.round($.shapeArgs.width/2);return $.open!==null&&($=Math.round($.plotOpen)+k,S.push(["M",G,$],["L",G-U,$]),super.extendStem(S,M/2,$)),S}pointAttribs($,M){M=super.pointAttribs.call(this,$,M);const S=this.options;return delete M.fill,!$.options.color&&S.upColor&&$.open<$.close&&(M.stroke=S.upColor),M}toYData($){return[$.open,$.high,$.low,$.close]}}return I.defaultOptions=W(V.defaultOptions,c),z(I.prototype,{pointClass:l,pointArrayMap:["open","high","low","close"]}),d.registerSeriesType("ohlc",I),I}),r(t,"Series/Candlestick/CandlestickSeriesDefaults.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(l,c){return{states:{hover:{lineWidth:2}},threshold:null,lineColor:"#000000",lineWidth:1,upColor:"#ffffff",stickyTracking:!0}}),r(t,"Series/Candlestick/CandlestickSeries.js",[t["Series/Candlestick/CandlestickSeriesDefaults.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c,d,m){({defaultOptions:c}=c);const{column:n,ohlc:T}=d.seriesTypes;({merge:m}=m);class V extends T{constructor(){super(...arguments),this.points=this.options=this.data=void 0}pointAttribs(z,W){const K=n.prototype.pointAttribs.call(this,z,W),I=this.options,O=z.open<z.close,$=I.lineColor||this.color,M=z.color||this.color;return K["stroke-width"]=I.lineWidth,K.fill=z.options.color||O&&I.upColor||M,K.stroke=z.options.lineColor||O&&I.upLineColor||$,W&&(z=I.states[W],K.fill=z.color||K.fill,K.stroke=z.lineColor||K.stroke,K["stroke-width"]=z.lineWidth||K["stroke-width"]),K}drawPoints(){var z=this.points;const W=this.chart,K=this.yAxis.reversed;for(const M of z){z=M.graphic;var I=void 0,O=void 0;let S,k;var $=void 0;let G,U;const C=!z;typeof M.plotY<"u"&&(z||(M.graphic=z=W.renderer.path().add(this.group)),this.chart.styledMode||z.attr(this.pointAttribs(M,M.selected&&"select")).shadow(this.options.shadow),$=z.strokeWidth()%2/2,G=Math.round(M.plotX)-$,I=M.plotOpen,O=M.plotClose,S=Math.min(I,O),I=Math.max(I,O),U=Math.round(M.shapeArgs.width/2),O=K?I!==M.yBottom:Math.round(S)!==Math.round(M.plotHigh),k=K?Math.round(S)!==Math.round(M.plotHigh):I!==M.yBottom,S=Math.round(S)+$,I=Math.round(I)+$,$=[],$.push(["M",G-U,I],["L",G-U,S],["L",G+U,S],["L",G+U,I],["Z"],["M",G,S],["L",G,O?Math.round(K?M.yBottom:M.plotHigh):S],["M",G,I],["L",G,k?Math.round(K?M.plotHigh:M.yBottom):I]),z[C?"attr":"animate"]({d:$}).addClass(M.getClassName(),!0))}}}return V.defaultOptions=m(T.defaultOptions,c.plotOptions,{tooltip:T.defaultOptions.tooltip},l),d.registerSeriesType("candlestick",V),V}),r(t,"Series/Flags/FlagsPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(l,c){({column:{prototype:{pointClass:l}}}=l.seriesTypes);const{isNumber:d}=c;class m extends l{constructor(){super(...arguments),this.series=this.options=void 0,this.ttBelow=!1}isValid(){return d(this.y)||typeof this.y>"u"}hasNewShapeType(){const T=this.options.shape||this.series.options.shape;return this.graphic&&T&&T!==this.graphic.symbolKey}}return m}),r(t,"Series/Flags/FlagsSeriesDefaults.js",[],function(){return{pointRange:0,allowOverlapX:!1,shape:"flag",stackDistance:12,textAlign:"center",tooltip:{pointFormat:"{point.text}"},threshold:null,y:-30,fillColor:"#ffffff",lineWidth:1,states:{hover:{lineColor:"#000000",fillColor:"#ccd3ff"}},style:{fontSize:"0.7em",fontWeight:"bold"}}}),r(t,"Series/Flags/FlagsSymbols.js",[t["Core/Renderer/RendererRegistry.js"]],function(l){var c;return function(d){function m(V,Q,z,W,K){const I=K&&K.anchorX||V;K=K&&K.anchorY||Q;const O=this.circle(I-1,K-1,2,2);return O.push(["M",I,K],["L",V,Q+W],["L",V,Q],["L",V+z,Q],["L",V+z,Q+W],["L",V,Q+W],["Z"]),O}function n(V,Q){V[Q+"pin"]=function(z,W,K,I,O){const $=O&&O.anchorX;O=O&&O.anchorY;let M;if(Q==="circle"&&I>K&&(z-=Math.round((I-K)/2),K=I),M=V[Q](z,W,K,I),$&&O){let S=$;Q==="circle"?S=z+K/2:(z=M[0],K=M[1],z[0]==="M"&&K[0]==="L"&&(S=(z[1]+K[1])/2)),M.push(["M",S,W>O?W:W+I],["L",$,O]),M=M.concat(V.circle($-1,O-1,2,2))}return M}}const T=[];d.compose=function(V){T.indexOf(V)===-1&&(T.push(V),V=V.prototype.symbols,V.flag=m,n(V,"circle"),n(V,"square")),V=l.getRendererType(),T.indexOf(V)&&T.push(V)}}(c||(c={})),c}),r(t,"Series/OnSeriesComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(l,c,d){const{prototype:m}=l,{prototype:n}=c,{defined:T,stableSort:V}=d;var Q;return function(z){function W(O){return n.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,O)}function K(){m.translate.apply(this);const O=this;var $=O.options,M=O.chart;const S=O.points;var k=$.onSeries;const G=(k=k&&M.get(k))&&k.options.step,U=k&&k.points,C=M.inverted,ie=O.xAxis,J=O.yAxis;M=S.length-1;let N;$=$.onKey||"y";let F=U&&U.length,H=0,E,L,f,y;if(k&&k.visible&&F){H=(k.pointXOffset||0)+(k.barW||0)/2;var b=k.currentDataGrouping;for(L=U[F-1].x+(b?b.totalRange:0),V(S,(D,X)=>D.x-X.x),$="plot"+$[0].toUpperCase()+$.substr(1);F--&&S[M]&&(E=U[F],b=S[M],b.y=E.y,!(E.x<=b.x&&typeof E[$]<"u"&&(b.x<=L&&(b.plotY=E[$],E.x<b.x&&!G&&(f=U[F+1])&&typeof f[$]<"u"&&(y=(b.x-E.x)/(f.x-E.x),b.plotY+=y*(f[$]-E[$]),b.y+=y*(f.y-E.y))),M--,F++,0>M))););}S.forEach((D,X)=>{let te;D.plotX+=H,(typeof D.plotY>"u"||C)&&(0<=D.plotX&&D.plotX<=ie.len?C?(D.plotY=ie.translate(D.x,0,1,0,1),D.plotX=T(D.y)?J.translate(D.y,0,0,0,1):0):D.plotY=(ie.opposite?0:O.yAxis.len)+ie.offset:D.shapeArgs={}),(N=S[X-1])&&N.plotX===D.plotX&&(typeof N.stackIndex>"u"&&(N.stackIndex=0),te=N.stackIndex+1),D.stackIndex=te}),this.onSeries=k}const I=[];z.compose=function(O){if(d.pushUnique(I,O)){const $=O.prototype;$.getPlotBox=W,$.translate=K}return O},z.getPlotBox=W,z.translate=K}(Q||(Q={})),Q}),r(t,"Series/Flags/FlagsSeries.js",[t["Series/Flags/FlagsPoint.js"],t["Series/Flags/FlagsSeriesDefaults.js"],t["Series/Flags/FlagsSymbols.js"],t["Core/Globals.js"],t["Series/OnSeriesComposition.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T,V,Q,z){({noop:m}=m);const{distribute:W}=T,{series:K,seriesTypes:{column:I}}=V,{addEvent:O,defined:$,extend:M,merge:S,objectEach:k,wrap:G}=z;class U extends I{constructor(){super(...arguments),this.points=this.options=this.data=void 0}animate(ie){ie&&this.setClip()}drawPoints(){var ie=this.points,J=this.chart;const N=J.renderer,F=J.inverted,H=this.options,E=H.y,L=this.yAxis,f={},y=[];let b,D,X,te,q,ce,fe;for(X=ie.length;X--;){te=ie[X],ce=(F?te.plotY:te.plotX)>this.xAxis.len,b=te.plotX;var we=te.stackIndex,Z=te.options.shape||H.shape;D=te.plotY,typeof D<"u"&&(D=te.plotY+E-(typeof we<"u"&&we*H.stackDistance)),te.anchorX=we?void 0:te.plotX,q=we?void 0:te.plotY,fe=Z!=="flag",we=te.graphic,typeof D<"u"&&0<=b&&!ce?(we&&te.hasNewShapeType()&&(we=we.destroy()),we||(we=te.graphic=N.label("",null,null,Z,null,null,H.useHTML).addClass("highcharts-point").add(this.markerGroup),te.graphic.div&&(te.graphic.div.point=te),we.isNew=!0),we.attr({align:fe?"center":"left",width:H.width,height:H.height,"text-align":H.textAlign}),J.styledMode||we.attr(this.pointAttribs(te)).css(S(H.style,te.style)).shadow(H.shadow),0<b&&(b-=we.strokeWidth()%2),Z={y:D,anchorY:q},H.allowOverlapX&&(Z.x=b,Z.anchorX=te.anchorX),we.attr({text:te.options.title||H.title||"A"})[we.isNew?"attr":"animate"](Z),H.allowOverlapX||(f[te.plotX]?f[te.plotX].size=Math.max(f[te.plotX].size,we.width):f[te.plotX]={align:fe?.5:0,size:we.width,target:b,anchorX:b}),te.tooltipPos=[b,D+L.pos-J.plotTop]):we&&(te.graphic=we.destroy())}if(!H.allowOverlapX){let se=100;k(f,function(ue){ue.plotX=ue.anchorX,y.push(ue),se=Math.max(ue.size,se)}),W(y,F?L.len:this.xAxis.len,se);for(const ue of ie)J=ue.plotX,(J=(ie=ue.graphic)&&f[J])&&ie&&($(J.pos)?ie[ie.isNew?"attr":"animate"]({x:J.pos+(J.align||0)*J.size,anchorX:ue.anchorX}).show().isNew=!1:ie.hide().isNew=!0)}H.useHTML&&this.markerGroup&&G(this.markerGroup,"on",function(se){return Q.prototype.on.apply(se.apply(this,[].slice.call(arguments,1)),[].slice.call(arguments,1))})}drawTracker(){const ie=this.points;super.drawTracker();for(const J of ie){const N=J.graphic;N&&(J.unbindMouseOver&&J.unbindMouseOver(),J.unbindMouseOver=O(N.element,"mouseover",function(){0<J.stackIndex&&!J.raised&&(J._y=N.y,N.attr({y:J._y-8}),J.raised=!0);for(const F of ie)F!==J&&F.raised&&F.graphic&&(F.graphic.attr({y:F._y}),F.raised=!1)}))}}pointAttribs(ie,J){const N=this.options,F=ie&&ie.color||this.color;let H=N.lineColor,E=ie&&ie.lineWidth;return ie=ie&&ie.fillColor||N.fillColor,J&&(ie=N.states[J].fillColor,H=N.states[J].lineColor,E=N.states[J].lineWidth),{fill:ie||F,stroke:H||F,"stroke-width":E||N.lineWidth||0}}setClip(){K.prototype.setClip.apply(this,arguments),this.options.clip!==!1&&this.sharedClipKey&&this.markerGroup&&this.markerGroup.clip(this.chart.sharedClips[this.sharedClipKey])}}return U.compose=d.compose,U.defaultOptions=S(I.defaultOptions,c),n.compose(U),M(U.prototype,{allowDG:!1,forceCrop:!0,invertible:!1,noSharedTooltip:!0,pointClass:l,sorted:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],buildKDTree:m,init:K.prototype.init}),V.registerSeriesType("flags",U),U}),r(t,"Core/Chart/StockChart.js",[t["Core/Axis/Axis.js"],t["Core/Chart/Chart.js"],t["Core/FormatUtilities.js"],t["Core/Defaults.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/RangeSelector/RangeSelectorDefaults.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Series/Series.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T,V,Q,z,W){function K(E,L){return E==="xAxis"?{minPadding:0,maxPadding:0,overscroll:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0}:E==="yAxis"?{labels:{y:-2},opposite:N(L.opposite,!0),showLastLabel:!(!L.categories&&L.type!=="category"),title:{text:null}}:{}}function I(E,L){return E==="xAxis"?(E={type:"datetime",categories:void 0},N(L.navigator&&L.navigator.enabled,n.enabled,!0)&&(E.startOnTick=!1,E.endOnTick=!1),E):{}}const{format:O}=d,{getOptions:$}=m,{addEvent:M,clamp:S,defined:k,extend:G,find:U,isNumber:C,isString:ie,merge:J,pick:N,splat:F}=W;class H extends c{init(L,f){const y=$(),b=L.xAxis,D=L.yAxis;var X=N(L.navigator&&L.navigator.enabled,n.enabled,!0);L.xAxis=L.yAxis=void 0,X=J({chart:{panning:{enabled:!0,type:"x"},zooming:{pinchType:"x"}},navigator:{enabled:X},scrollbar:{enabled:N(V.enabled,!0)},rangeSelector:{enabled:N(T.rangeSelector.enabled,!0)},title:{text:null},tooltip:{split:N(y.tooltip.split,!0),crosshairs:!0},legend:{enabled:!1}},L,{isStock:!0}),L.xAxis=b,L.yAxis=D,X.xAxis=F(L.xAxis||{}).map(function(te,q){return J(K("xAxis",te),y.xAxis,y.xAxis&&y.xAxis[q],te,I("xAxis",L))}),X.yAxis=F(L.yAxis||{}).map(function(te,q){return J(K("yAxis",te),y.yAxis,y.yAxis&&y.yAxis[q],te)}),super.init(X,f)}createAxis(L,f){return f.axis=J(K(L,f.axis),f.axis,I(L,this.userOptions)),super.createAxis(L,f)}}return function(E){E.stockChart=function(L,f,y){return new E(L,f,y)}}(H||(H={})),M(Q,"setOptions",function(E){let L;this.chart.options.isStock&&(this.is("column")||this.is("columnrange")?L={borderWidth:0,shadow:!1}:this.is("scatter")||this.is("sma")||(L={marker:{enabled:!1,radius:2}}),L&&(E.plotOptions[this.type]=J(E.plotOptions[this.type],L)))}),M(l,"autoLabelAlign",function(E){const{chart:L,options:f}=this,y=L._labelPanes=L._labelPanes||{},b=f.labels;if(L.options.isStock&&this.coll==="yAxis"){const D=f.top+","+f.height;!y[D]&&b.enabled&&(b.distance===15&&this.side===1&&(b.distance=0),typeof b.align>"u"&&(b.align="right"),y[D]=this,E.align="right",E.preventDefault())}}),M(l,"destroy",function(){const E=this.chart,L=this.options&&this.options.top+","+this.options.height;L&&E._labelPanes&&E._labelPanes[L]===this&&delete E._labelPanes[L]}),M(l,"getPlotLinePath",function(E){function L(le){const me=le==="xAxis"?"yAxis":"xAxis";return le=f.options[me],C(le)?[b[me][le]]:ie(le)?[b.get(le)]:y.map(function(be){return be[me]})}let f=this,y=this.isLinked&&!this.series?this.linkedParent.series:this.series,b=f.chart,D=b.renderer,X=f.left,te=f.top,q,ce,fe,we,Z=[],se=[],ue,ye,Pe=E.translatedValue,ae=E.value,xe=E.force,ve;(b.options.isStock&&E.acrossPanes!==!1&&f.coll==="xAxis"||f.coll==="yAxis")&&(E.preventDefault(),se=L(f.coll),ue=f.isXAxis?b.yAxis:b.xAxis,ue.forEach(function(le){if(!k(le.options.id)||le.options.id.indexOf("navigator")===-1){var me=le.isXAxis?"yAxis":"xAxis";me=k(le.options[me])?b[me][le.options[me]]:b[me][0],f===me&&se.push(le)}}),ye=se.length?[]:[f.isXAxis?b.yAxis[0]:b.xAxis[0]],se.forEach(function(le){ye.indexOf(le)!==-1||U(ye,function(me){return me.pos===le.pos&&me.len===le.len})||ye.push(le)}),ve=N(Pe,f.translate(ae,void 0,void 0,E.old)),C(ve)&&(f.horiz?ye.forEach(function(le){let me;ce=le.pos,we=ce+le.len,q=fe=Math.round(ve+f.transB),xe!=="pass"&&(q<X||q>X+f.width)&&(xe?q=fe=S(q,X,X+f.width):me=!0),me||Z.push(["M",q,ce],["L",fe,we])}):ye.forEach(function(le){let me;q=le.pos,fe=q+le.len,ce=we=Math.round(te+f.height-ve),xe!=="pass"&&(ce<te||ce>te+f.height)&&(xe?ce=we=S(ce,te,te+f.height):me=!0),me||Z.push(["M",q,ce],["L",fe,we])})),E.path=0<Z.length?D.crispPolyLine(Z,E.lineWidth||1):null)}),z.prototype.crispPolyLine=function(E,L){for(let f=0;f<E.length;f+=2){const y=E[f],b=E[f+1];y[1]===b[1]&&(y[1]=b[1]=Math.round(y[1])-L%2/2),y[2]===b[2]&&(y[2]=b[2]=Math.round(y[2])+L%2/2)}return E},M(l,"afterHideCrosshair",function(){this.crossLabel&&(this.crossLabel=this.crossLabel.hide())}),M(l,"afterDrawCrosshair",function(E){var L,f;if(this.crosshair&&this.crosshair.label&&this.crosshair.label.enabled&&this.cross&&C(this.min)&&C(this.max)){var y=this.chart,b=this.logarithmic,D=this.crosshair.label,X=this.horiz,te=this.opposite,q=this.left,ce=this.top,fe=this.width,we=this.crossLabel,Z=D.format,se="",ue=this.options.tickPosition==="inside",ye=this.crosshair.snap!==!1,Pe=0,ae=E.e||this.cross&&this.cross.e;E=E.point;var xe=this.min,ve=this.max;b&&(xe=b.lin2log(xe),ve=b.lin2log(ve)),b=X?"center":te?this.labelAlign==="right"?"right":"left":this.labelAlign==="left"?"left":"center",we||(we=this.crossLabel=y.renderer.label("",0,void 0,D.shape||"callout").addClass("highcharts-crosshair-label highcharts-color-"+(E&&E.series?E.series.colorIndex:this.series[0]&&this.series[0].colorIndex)).attr({align:D.align||b,padding:N(D.padding,8),r:N(D.borderRadius,3),zIndex:2}).add(this.labelGroup),y.styledMode||we.attr({fill:D.backgroundColor||E&&E.series&&E.series.color||"#666666",stroke:D.borderColor||"","stroke-width":D.borderWidth||0}).css(G({color:"#ffffff",fontWeight:"normal",fontSize:"0.7em",textAlign:"center"},D.style||{}))),X?(fe=ye?(E.plotX||0)+q:ae.chartX,ce+=te?0:this.height):(fe=q+this.offset+(te?fe:0),ce=ye?(E.plotY||0)+ce:ae.chartY),Z||D.formatter||(this.dateTime&&(se="%b %d, %Y"),Z="{value"+(se?":"+se:"")+"}"),se=ye?this.isXAxis?E.x:E.y:this.toValue(X?ae.chartX:ae.chartY),ye=E&&E.series?E.series.isPointInside(E):C(se)&&se>xe&&se<ve,ae="",Z?ae=O(Z,{value:se},y):D.formatter&&C(se)&&(ae=D.formatter.call(this,se)),we.attr({text:ae,x:fe,y:ce,visibility:ye?"inherit":"hidden"}),D=we.getBBox(),!C(we.x)||X||te||(fe=we.x-D.width/2),C(we.y)&&(X?(ue&&!te||!ue&&te)&&(ce=we.y-D.height):ce=we.y-D.height/2),X?(L=q-D.x,f=q+this.width-D.x):(L=this.labelAlign==="left"?q:0,f=this.labelAlign==="right"?q+this.width:y.chartWidth),we.translateX<L&&(Pe=L-we.translateX),we.translateX+D.width>=f&&(Pe=-(we.translateX+D.width-f)),we.attr({x:fe+Pe,y:ce,anchorX:X?fe:this.opposite?0:y.chartWidth,anchorY:X?this.opposite?y.chartHeight:0:ce+D.height/2})}}),Q.prototype.forceCropping=function(){const E=this.chart,L=this.options.dataGrouping;return this.allowDG!==!1&&L&&N(L.enabled,E.options.isStock)},M(c,"update",function(E){E=E.options,"scrollbar"in E&&this.navigator&&(J(!0,this.options.scrollbar,E.scrollbar),this.navigator.update({}),delete E.scrollbar)}),H}),r(t,"masters/modules/stock.src.js",[t["Core/Globals.js"],t["Series/DataModifyComposition.js"],t["Stock/Navigator/Navigator.js"],t["Stock/RangeSelector/RangeSelector.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Axis/OrdinalAxis.js"],t["Series/OHLC/OHLCSeries.js"],t["Series/Flags/FlagsSeries.js"],t["Core/Chart/StockChart.js"]],function(l,c,d,m,n,T,V,Q,z){l.Navigator=d,l.RangeSelector=m,l.Scrollbar=n,l.StockChart=l.stockChart=z.stockChart,c.compose(l.Series,l.Axis,l.Point),Q.compose(l.Renderer),d.compose(l.Axis,l.Chart,l.Series),V.compose(l.Series),T.compose(l.Axis,l.Series,l.Chart),m.compose(l.Axis,l.Chart),n.compose(l.Axis)})})})(mG);const gG=Ww;gG(Bc);const _G={name:"graph",components:{Chart:pp.Chart},data(){return{chartOptions:{chart:{zoomType:"xy"},title:{text:"",align:""},subtitle:{text:"",align:""},xAxis:[{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],crosshair:!0}],yAxis:[{labels:{format:"{value}°C",style:{color:Bc.getOptions().colors[2]}},title:{text:"Temperature",style:{color:Bc.getOptions().colors[2]}},opposite:!0},{gridLineWidth:0,title:{text:"Rainfall",style:{color:Bc.getOptions().colors[0]}},labels:{format:"{value} mm",style:{color:Bc.getOptions().colors[0]}}},{gridLineWidth:0,title:{text:"Sea-Level Pressure",style:{color:Bc.getOptions().colors[1]}},labels:{format:"{value} mb",style:{color:Bc.getOptions().colors[1]}},opposite:!0}],tooltip:{shared:!0},legend:{layout:"vertical",align:"left",x:80,verticalAlign:"top",y:55,floating:!0,backgroundColor:Bc.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.25)"},series:[{name:"Rainfall",type:"column",yAxis:1,data:[49.9,71.5,106.4,129.2,144,176,135.6,148.5,216.4,194.1,95.6,54.4],tooltip:{valueSuffix:" mm"}},{name:"Sea-Level Pressure",type:"spline",yAxis:2,data:[1016,1016,1015.9,1015.5,1012.3,1009.5,1009.6,1010.2,1013.1,1016.9,1018.2,1016.7],marker:{enabled:!1},dashStyle:"shortdot",tooltip:{valueSuffix:" mb"}},{name:"Temperature",type:"spline",data:[7,6.9,9.5,14.5,18.2,21.5,25.2,26.5,23.3,18.3,13.9,9.6],tooltip:{valueSuffix:" °C"}}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{floating:!1,layout:"horizontal",align:"center",verticalAlign:"bottom",x:0,y:0},yAxis:[{labels:{align:"right",x:0,y:-6},showLastLabel:!1},{labels:{align:"left",x:0,y:-6},showLastLabel:!1},{visible:!1}]}}]}}}}};function yG(e,t,r,l,c,d){const m=ar("Chart");return ki(),fh(m,{options:c.chartOptions,constructorType:"stockChart"},null,8,["options"])}const vG=Zr(_G,[["render",yG]]);var Yw={},xG={get exports(){return Yw},set exports(e){Yw=e}};(function(e){(function(t){e.exports?(t.default=t,e.exports=t):t(typeof Highcharts<"u"?Highcharts:void 0)})(function(t){function r(l,c,d,m){l.hasOwnProperty(c)||(l[c]=m.apply(null,d),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:c,module:l[c]}})))}t=t?t._modules:{},r(t,"Accessibility/Utils/HTMLUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(l,c){function d(z){if(typeof T.MouseEvent=="function")return new T.MouseEvent(z.type,z);if(n.createEvent){const W=n.createEvent("MouseEvent");if(W.initMouseEvent)return W.initMouseEvent(z.type,z.bubbles,z.cancelable,z.view||T,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.button,z.relatedTarget),W}return m(z.type)}function m(z,W,K){return W=W||{x:0,y:0},typeof T.MouseEvent=="function"?new T.MouseEvent(z,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:K||Q,view:T,detail:z==="click"?1:0,screenX:W.x,screenY:W.y,clientX:W.x,clientY:W.y}):n.createEvent&&(K=n.createEvent("MouseEvent"),K.initMouseEvent)?(K.initMouseEvent(z,!0,!0,T,z==="click"?1:0,W.x,W.y,W.x,W.y,!1,!1,!1,!1,0,null),K):{type:z}}const{doc:n,win:T}=l,{css:V}=c,Q=T.EventTarget&&new T.EventTarget||"none";return{addClass:function(z,W){z.classList?z.classList.add(W):0>z.className.indexOf(W)&&(z.className+=" "+W)},cloneMouseEvent:d,cloneTouchEvent:function(z){var W=K=>{const I=[];for(let O=0;O<K.length;++O){const $=K.item(O);$&&I.push($)}return I};return typeof T.TouchEvent=="function"?(W=new T.TouchEvent(z.type,{touches:W(z.touches),targetTouches:W(z.targetTouches),changedTouches:W(z.changedTouches),ctrlKey:z.ctrlKey,shiftKey:z.shiftKey,altKey:z.altKey,metaKey:z.metaKey,bubbles:z.bubbles,cancelable:z.cancelable,composed:z.composed,detail:z.detail,view:z.view}),z.defaultPrevented&&W.preventDefault(),W):(W=d(z),W.touches=z.touches,W.changedTouches=z.changedTouches,W.targetTouches=z.targetTouches,W)},escapeStringForHTML:function(z){return z.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(z){return n.getElementById(z)},getFakeMouseEvent:m,getHeadingTagNameForElement:function(z){const W=I=>(I=parseInt(I.slice(1),10),"h"+Math.min(6,I+1)),K=I=>{var O;e:{for(O=I;O=O.previousSibling;){const $=O.tagName||"";if(/H[1-6]/.test($)){O=$;break e}}O=""}return O?W(O):(I=I.parentElement,I?(O=I.tagName,/H[1-6]/.test(O)?W(O):K(I)):"p")};return K(z)},removeChildNodes:function(z){for(;z.lastChild;)z.removeChild(z.lastChild)},removeClass:function(z,W){z.classList?z.classList.remove(W):z.className=z.className.replace(new RegExp(W,"g"),"")},removeElement:function(z){z&&z.parentNode&&z.parentNode.removeChild(z)},reverseChildNodes:function(z){let W=z.childNodes.length;for(;W--;)z.appendChild(z.childNodes[W])},simulatedEventTarget:Q,stripHTMLTagsFromString:function(z){return typeof z=="string"?z.replace(/<\/?[^>]+(>|$)/g,""):z},visuallyHideElement:function(z){V(z,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),r(t,"Accessibility/A11yI18n.js",[t["Core/FormatUtilities.js"],t["Core/Utilities.js"]],function(l,c){const{format:d}=l,{getNestedProperty:m,pick:n}=c;var T;return function(V){function Q(I,O){var $=I.indexOf("#each("),M=I.indexOf("#plural("),S=I.indexOf("[");const k=I.indexOf("]");if(-1<$){S=I.slice($).indexOf(")")+$;var G=I.substring(0,$);if(M=I.substring(S+1),S=I.substring($+6,S).split(","),$=Number(S[1]),I="",O=m(S[0],O))for($=isNaN($)?O.length:$,$=0>$?O.length+$:Math.min($,O.length),S=0;S<$;++S)I+=G+O[S]+M;return I.length?I:""}if(-1<M){switch(G=I.slice(M).indexOf(")")+M,I=I.substring(M+8,G).split(","),Number(m(I[0],O))){case 0:I=n(I[4],I[1]);break;case 1:I=n(I[2],I[1]);break;case 2:I=n(I[3],I[1]);break;default:I=I[1]}return I?(O=I,O=O.trim&&O.trim()||O.replace(/^\s+|\s+$/g,"")):O="",O}return-1<S?(M=I.substring(0,S),I=Number(I.substring(S+1,k)),O=m(M,O),!isNaN(I)&&O&&(0>I?(G=O[O.length+I],typeof G>"u"&&(G=O[0])):(G=O[I],typeof G>"u"&&(G=O[O.length-1]))),typeof G<"u"?G:""):"{"+I+"}"}function z(I,O,$){const M=(C,ie)=>{C=C.slice(ie||0);const J=C.indexOf("{"),N=C.indexOf("}");if(-1<J&&N>J)return{statement:C.substring(J+1,N),begin:ie+J+1,end:ie+N}},S=[];let k,G,U=0;do k=M(I,U),G=I.substring(U,k&&k.begin-1),G.length&&S.push({value:G,type:"constant"}),k&&S.push({value:k.statement,type:"statement"}),U=k?k.end+1:U+1;while(k);return S.forEach(C=>{C.type==="statement"&&(C.value=Q(C.value,O))}),d(S.reduce((C,ie)=>C+ie.value,""),O,$)}function W(I,O){I=I.split(".");let $=this.options.lang,M=0;for(;M<I.length;++M)$=$&&$[I[M]];return typeof $=="string"?z($,O,this):""}const K=[];V.compose=function(I){return c.pushUnique(K,I)&&(I.prototype.langFormat=W),I},V.i18nFormat=z}(T||(T={})),T}),r(t,"Accessibility/Utils/ChartUtilities.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(l,c,d){function m(M,S){const k=S.type,G=M.hcEvents;W.createEvent&&(M.dispatchEvent||M.fireEvent)?M.dispatchEvent?M.dispatchEvent(S):M.fireEvent(k,S):G&&G[k]?$(M,k,S):M.element&&m(M.element,S)}function n(M){const S=M.chart,k={};let G="Seconds";k.Seconds=((M.dataMax||M.max||0)-(M.dataMin||M.min||0))/1e3,k.Minutes=k.Seconds/60,k.Hours=k.Minutes/60,k.Days=k.Hours/24,["Minutes","Hours","Days"].forEach(function(C){2<k[C]&&(G=C)});const U=k[G].toFixed(G!=="Seconds"&&G!=="Minutes"?1:0);return S.langFormat("accessibility.axis.timeRange"+G,{chart:S,axis:M,range:U.replace(".0","")})}function T(M){const S=M.chart;var k=S.options;const G=k&&k.accessibility&&k.accessibility.screenReaderSection.axisRangeDateFormat||"",U={min:M.dataMin||M.min||0,max:M.dataMax||M.max||0};return k=function(C){return M.dateTime?S.time.dateFormat(G,U[C]):U[C].toString()},S.langFormat("accessibility.axis.rangeFromTo",{chart:S,axis:M,rangeFrom:k("min"),rangeTo:k("max")})}function V(M){if(M.points&&M.points.length)return(M=O(M.points,S=>!!S.graphic))&&M.graphic&&M.graphic.element}function Q(M){const S=V(M);return S&&S.parentNode||M.graph&&M.graph.element||M.group&&M.group.element}function z(M,S){S.setAttribute("aria-hidden",!1),S!==M.renderTo&&S.parentNode&&S.parentNode!==W.body&&(Array.prototype.forEach.call(S.parentNode.childNodes,function(k){k.hasAttribute("aria-hidden")||k.setAttribute("aria-hidden",!0)}),z(M,S.parentNode))}const{doc:W}=l,{stripHTMLTagsFromString:K}=c,{defined:I,find:O,fireEvent:$}=d;return{fireEventOnWrappedOrUnwrappedElement:m,getChartTitle:function(M){return K(M.options.title.text||M.langFormat("accessibility.defaultChartTitle",{chart:M}))},getAxisDescription:function(M){return M&&(M.userOptions&&M.userOptions.accessibility&&M.userOptions.accessibility.description||M.axisTitle&&M.axisTitle.textStr||M.options.id||M.categories&&"categories"||M.dateTime&&"Time"||"values")},getAxisRangeDescription:function(M){var S=M.options||{};return S.accessibility&&typeof S.accessibility.rangeDescription<"u"?S.accessibility.rangeDescription:M.categories?(S=M.chart,M=M.dataMax&&M.dataMin?S.langFormat("accessibility.axis.rangeCategories",{chart:S,axis:M,numCategories:M.dataMax-M.dataMin+1}):"",M):!M.dateTime||M.min!==0&&M.dataMin!==0?T(M):n(M)},getPointFromXY:function(M,S,k){let G=M.length,U;for(;G--;)if(U=O(M[G].points||[],function(C){return C.x===S&&C.y===k}))return U},getSeriesFirstPointElement:V,getSeriesFromName:function(M,S){return S?(M.series||[]).filter(function(k){return k.name===S}):M.series},getSeriesA11yElement:Q,unhideChartElementFromAT:z,hideSeriesFromAT:function(M){(M=Q(M))&&M.setAttribute("aria-hidden",!0)},scrollToPoint:function(M){var S=M.series.xAxis,k=M.series.yAxis;const G=S&&S.scrollbar?S:k;if((S=G&&G.scrollbar)&&I(S.to)&&I(S.from)){if(k=S.to-S.from,I(G.dataMin)&&I(G.dataMax)){var U=G.toPixels(G.dataMin),C=G.toPixels(G.dataMax);M=(G.toPixels(M[G.coll==="xAxis"?"x":"y"]||0)-U)/(C-U)}else M=0;S.updatePosition(M-k/2,M+k/2),$(S,"changed",{from:S.from,to:S.to,trigger:"scrollbar",DOMEvent:null})}}}}),r(t,"Accessibility/Utils/DOMElementProvider.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(l,c){const{doc:d}=l,{removeElement:m}=c;class n{constructor(){this.elements=[]}createElement(){const V=d.createElement.apply(d,arguments);return this.elements.push(V),V}destroyCreatedElements(){this.elements.forEach(function(V){m(V)}),this.elements=[]}}return n}),r(t,"Accessibility/Utils/EventProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(l,c){const{addEvent:d}=c;class m{constructor(){this.eventRemovers=[]}addEvent(){const T=d.apply(l,arguments);return this.eventRemovers.push(T),T}removeAddedEvents(){this.eventRemovers.forEach(T=>T()),this.eventRemovers=[]}}return m}),r(t,"Accessibility/AccessibilityComponent.js",[t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(l,c,d,m,n){const{fireEventOnWrappedOrUnwrappedElement:T}=l,{getFakeMouseEvent:V}=m;({extend:l}=n);class Q{constructor(){this.proxyProvider=this.keyCodes=this.eventProvider=this.domElementProvider=this.chart=void 0}initBase(W,K){this.chart=W,this.eventProvider=new d,this.domElementProvider=new c,this.proxyProvider=K,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(W,K,I,O){return this.eventProvider.addEvent(W,K,I,O)}createElement(W,K){return this.domElementProvider.createElement(W,K)}fakeClickEvent(W){const K=V("click");T(W,K)}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}}return l(Q.prototype,{init(){},getKeyboardNavigation:function(){},onChartUpdate(){},onChartRender(){},destroy(){}}),Q}),r(t,"Accessibility/KeyboardNavigationHandler.js",[t["Core/Utilities.js"]],function(l){const{find:c}=l;class d{constructor(n,T){this.chart=n,this.keyCodeMap=T.keyCodeMap||[],this.validate=T.validate,this.init=T.init,this.terminate=T.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(n){const T=n.which||n.keyCode;let V=this.response.noHandler;const Q=c(this.keyCodeMap,function(z){return-1<z[0].indexOf(T)});return Q?V=Q[1].call(this,T,n):T===9&&(V=this.response[n.shiftKey?"prev":"next"]),V}}return d}),r(t,"Accessibility/Components/ContainerComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(l,c,d,m,n){const{unhideChartElementFromAT:T,getChartTitle:V}=d,{doc:Q}=m,{stripHTMLTagsFromString:z}=n;class W extends l{onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){const I=this.chart,O="highcharts-title-"+I.index,$=z(I.langFormat("accessibility.svgContainerTitle",{chartTitle:V(I)}));if($.length){const M=this.svgTitleElement=this.svgTitleElement||Q.createElementNS("http://www.w3.org/2000/svg","title");M.textContent=$,M.id=O,I.renderTo.insertBefore(M,I.renderTo.firstChild)}}setSVGContainerLabel(){const I=this.chart,O=I.langFormat("accessibility.svgContainerLabel",{chartTitle:V(I)});I.renderer.box&&O.length&&I.renderer.box.setAttribute("aria-label",O)}setGraphicContainerAttrs(){const I=this.chart,O=I.langFormat("accessibility.graphicContainerLabel",{chartTitle:V(I)});O.length&&I.container.setAttribute("aria-label",O)}setRenderToAttrs(){const I=this.chart,O=I.options.accessibility.landmarkVerbosity!=="disabled",$=I.langFormat("accessibility.chartContainerLabel",{title:V(I),chart:I});$&&(I.renderTo.setAttribute("role",O?"region":"group"),I.renderTo.setAttribute("aria-label",$))}makeCreditsAccessible(){const I=this.chart,O=I.credits;O&&(O.textStr&&O.element.setAttribute("aria-label",I.langFormat("accessibility.credits",{creditsStr:z(O.textStr)})),T(I,O.element))}getKeyboardNavigation(){const I=this.chart;return new c(I,{keyCodeMap:[],validate:function(){return!0},init:function(){const O=I.accessibility;O&&O.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}}return W}),r(t,"Accessibility/FocusBorder.js",[t["Core/Renderer/SVG/SVGLabel.js"],t["Core/Utilities.js"]],function(l,c){const{addEvent:d,pick:m}=c;var n;return function(T){function V(){const S=this.focusElement,k=this.options.accessibility.keyboardNavigation.focusBorder;S&&(S.removeFocusBorder(),k.enabled&&S.addFocusBorder(k.margin,{stroke:k.style.color,strokeWidth:k.style.lineWidth,r:k.style.borderRadius}))}function Q(S,k){const G=this.options.accessibility.keyboardNavigation.focusBorder;(k=k||S.element)&&k.focus&&(k.hcEvents&&k.hcEvents.focusin||d(k,"focusin",function(){}),k.focus(),G.hideBrowserFocusOutline&&(k.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=S,this.renderFocusBorder()}function z(S){if(!S.focusBorderDestroyHook){var k=S.destroy;S.destroy=function(){return S.focusBorder&&S.focusBorder.destroy&&S.focusBorder.destroy(),k.apply(S,arguments)},S.focusBorderDestroyHook=k}}function W(S,k){this.focusBorder&&this.removeFocusBorder();const G=this.getBBox(),U=m(S,3),C=this.parentGroup;var ie=this.scaleX||C&&C.scaleX,J=this.scaleY||C&&C.scaleY;ie=(ie?!J:J)?Math.abs(ie||J||1):(Math.abs(ie||1)+Math.abs(J||1))/2,G.x+=this.translateX?this.translateX:0,G.y+=this.translateY?this.translateY:0,J=G.x-U;let N=G.y-U,F=G.width+2*U,H=G.height+2*U;var E=this instanceof l;if(this.element.nodeName==="text"||E){const y=!!this.rotation;if(E)var L={x:y?1:0,y:0};else{var f=L=0;this.attr("text-anchor")==="middle"?L=f=.5:this.rotation?L=.25:f=.75,L={x:L,y:f}}f=+this.attr("x");const b=+this.attr("y");isNaN(f)||(J=f-G.width*L.x-U),isNaN(b)||(N=b-G.height*L.y-U),E&&y&&(E=F,F=H,H=E,isNaN(f)||(J=f-G.height*L.x-U),isNaN(b)||(N=b-G.width*L.y-U))}this.focusBorder=this.renderer.rect(J,N,F,H,parseInt((k&&k.r||0).toString(),10)/ie).addClass("highcharts-focus-border").attr({zIndex:99}).add(C),this.renderer.styledMode||this.focusBorder.attr({stroke:k&&k.stroke,"stroke-width":(k&&k.strokeWidth||0)/ie}),K(this,S,k),z(this)}function K(S,...k){S.focusBorderUpdateHooks||(S.focusBorderUpdateHooks={},M.forEach(G=>{G+="Setter";const U=S[G]||S._defaultSetter;S.focusBorderUpdateHooks[G]=U,S[G]=function(){const C=U.apply(S,arguments);return S.addFocusBorder.apply(S,k),C}}))}function I(){O(this),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}function O(S){S.focusBorderUpdateHooks&&(Object.keys(S.focusBorderUpdateHooks).forEach(k=>{const G=S.focusBorderUpdateHooks[k];G===S._defaultSetter?delete S[k]:S[k]=G}),delete S.focusBorderUpdateHooks)}const $=[],M="x y transform width height r d stroke-width".split(" ");T.compose=function(S,k){c.pushUnique($,S)&&(S=S.prototype,S.renderFocusBorder=V,S.setFocusToElement=Q),c.pushUnique($,k)&&(k=k.prototype,k.addFocusBorder=W,k.removeFocusBorder=I)}}(n||(n={})),n}),r(t,"Accessibility/Utils/Announcer.js",[t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(l,c,d,m,n){const{doc:T}=d,{addClass:V,visuallyHideElement:Q}=m,{attr:z}=n;class W{constructor(I,O){this.chart=I,this.domElementProvider=new c,this.announceRegion=this.addAnnounceRegion(O)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(I){l.setElementHTML(this.announceRegion,I),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=l.emptyHTML,delete this.clearAnnouncementRegionTimer},1e3)}addAnnounceRegion(I){const O=this.chart.announcerContainer||this.createAnnouncerContainer(),$=this.domElementProvider.createElement("div");return z($,{"aria-hidden":!1,"aria-live":I}),this.chart.styledMode?V($,"highcharts-visually-hidden"):Q($),O.appendChild($),$}createAnnouncerContainer(){const I=this.chart,O=T.createElement("div");return z(O,{"aria-hidden":!1,class:"highcharts-announcer-container"}),O.style.position="relative",I.renderTo.insertBefore(O,I.renderTo.firstChild),I.announcerContainer=O}}return W}),r(t,"Accessibility/Components/AnnotationsA11y.js",[t["Accessibility/Utils/HTMLUtilities.js"]],function(l){function c(Q){return(Q.annotations||[]).reduce((z,W)=>(W.options&&W.options.visible!==!1&&(z=z.concat(W.labels)),z),[])}function d(Q){return Q.options&&Q.options.accessibility&&Q.options.accessibility.description||Q.graphic&&Q.graphic.text&&Q.graphic.text.textStr||""}function m(Q){var z=Q.options&&Q.options.accessibility&&Q.options.accessibility.description;if(z)return z;z=Q.chart;const W=d(Q),K=Q.points.filter($=>!!$.graphic).map($=>{const M=$.accessibility&&$.accessibility.valueDescription||$.graphic&&$.graphic.element&&$.graphic.element.getAttribute("aria-label")||"";return $=$&&$.series.name||"",($?$+", ":"")+"data point "+M}).filter($=>!!$),I=K.length,O="accessibility.screenReaderSection.annotations.description"+(1<I?"MultiplePoints":I?"SinglePoint":"NoPoints");return Q={annotationText:W,annotation:Q,numPoints:I,annotationPoint:K[0],additionalAnnotationPoints:K.slice(1)},z.langFormat(O,Q)}function n(Q){return c(Q).map(z=>(z=T(V(m(z))))?`<li>${z}</li>`:"")}const{escapeStringForHTML:T,stripHTMLTagsFromString:V}=l;return{getAnnotationsInfoHTML:function(Q){const z=Q.annotations;return z&&z.length?`<ul style="list-style-type: none">${n(Q).join(" ")}</ul>`:""},getAnnotationLabelDescription:m,getAnnotationListItems:n,getPointAnnotationTexts:function(Q){const z=c(Q.series.chart).filter(W=>-1<W.points.indexOf(Q));return z.length?z.map(W=>`${d(W)}`):[]}}}),r(t,"Accessibility/Components/InfoRegionsComponent.js",[t["Accessibility/A11yI18n.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Components/AnnotationsA11y.js"],t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T,V,Q,z,W){function K(L,f){var y=f[0],b=L.series&&L.series[0]||{};if(b={numSeries:L.series.length,numPoints:b.points&&b.points.length,chart:L,mapTitle:L.mapView&&L.mapView.geoMap&&L.mapView.geoMap.title},!y)return L.langFormat("accessibility.chartTypes.emptyChart",b);if(y==="map")return b.mapTitle?L.langFormat("accessibility.chartTypes.mapTypeDescription",b):L.langFormat("accessibility.chartTypes.unknownMap",b);if(1<L.types.length)return L.langFormat("accessibility.chartTypes.combinationChart",b);{f=f[0],y=L.langFormat("accessibility.seriesTypeDescriptions."+f,b);const D=L.series&&2>L.series.length?"Single":"Multiple";L=(L.langFormat("accessibility.chartTypes."+f+D,b)||L.langFormat("accessibility.chartTypes.default"+D,b))+(y?" "+y:"")}return L}const{getAnnotationsInfoHTML:I}=m,{getAxisDescription:O,getAxisRangeDescription:$,getChartTitle:M,unhideChartElementFromAT:S}=T,{format:k}=V,{doc:G}=Q,{addClass:U,getElement:C,getHeadingTagNameForElement:ie,stripHTMLTagsFromString:J,visuallyHideElement:N}=z,{attr:F,pick:H}=W;class E extends c{constructor(){super(...arguments),this.announcer=void 0,this.screenReaderSections={}}init(){const f=this.chart,y=this;this.initRegionsDefinitions(),this.addEvent(f,"aftergetTableAST",function(b){y.onDataTableCreated(b)}),this.addEvent(f,"afterViewData",function(b){b.wasHidden&&(y.dataTableDiv=b.element,setTimeout(function(){y.focusDataTable()},300))}),this.announcer=new d(f,"assertive")}initRegionsDefinitions(){const f=this;this.screenReaderSections={before:{element:null,buildContent:function(y){const b=y.options.accessibility.screenReaderSection.beforeChartFormatter;return b?b(y):f.defaultBeforeChartFormatter(y)},insertIntoDOM:function(y,b){b.renderTo.insertBefore(y,b.renderTo.firstChild)},afterInserted:function(){typeof f.sonifyButtonId<"u"&&f.initSonifyButton(f.sonifyButtonId),typeof f.dataTableButtonId<"u"&&f.initDataTableButton(f.dataTableButtonId)}},after:{element:null,buildContent:function(y){const b=y.options.accessibility.screenReaderSection.afterChartFormatter;return b?b(y):f.defaultAfterChartFormatter()},insertIntoDOM:function(y,b){b.renderTo.insertBefore(y,b.container.nextSibling)},afterInserted:function(){f.chart.accessibility&&f.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){const f=this;this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),Object.keys(this.screenReaderSections).forEach(function(y){f.updateScreenReaderSection(y)})}getLinkedDescriptionElement(){var f=this.chart.options.accessibility.linkedDescription;if(f){if(typeof f!="string")return f;if(f=k(f,this.chart),f=G.querySelectorAll(f),f.length===1)return f[0]}}setLinkedDescriptionAttrs(){const f=this.linkedDescriptionElement;f&&(f.setAttribute("aria-hidden","true"),U(f,"highcharts-linked-description"))}updateScreenReaderSection(f){const y=this.chart,b=this.screenReaderSections[f],D=b.buildContent(y),X=b.element=b.element||this.createElement("div"),te=X.firstChild||this.createElement("div");D?(this.setScreenReaderSectionAttribs(X,f),n.setElementHTML(te,D),X.appendChild(te),b.insertIntoDOM(X,y),y.styledMode?U(te,"highcharts-visually-hidden"):N(te),S(y,te),b.afterInserted&&b.afterInserted()):(X.parentNode&&X.parentNode.removeChild(X),b.element=null)}setScreenReaderSectionAttribs(f,y){const b=this.chart,D=b.langFormat("accessibility.screenReaderSection."+y+"RegionLabel",{chart:b,chartTitle:M(b)});F(f,{id:`highcharts-screen-reader-region-${y}-${b.index}`,"aria-label":D||void 0}),f.style.position="relative",D&&f.setAttribute("role",b.options.accessibility.landmarkVerbosity==="all"?"region":"group")}defaultBeforeChartFormatter(){var f=this.chart;const y=f.options.accessibility.screenReaderSection.beforeChartFormat;if(!y)return"";var b=this.getAxesDescription();const D=f.sonify&&f.options.sonification&&f.options.sonification.enabled,X="highcharts-a11y-sonify-data-btn-"+f.index,te="hc-linkto-highcharts-data-table-"+f.index,q=I(f),ce=f.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:f});return b={headingTagName:ie(f.renderTo),chartTitle:M(f),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:b.xAxis,yAxisDescription:b.yAxis,playAsSoundButton:D?this.getSonifyButtonText(X):"",viewTableButton:f.getCSV?this.getDataTableButtonText(te):"",annotationsTitle:q?ce:"",annotationsList:q},f=l.i18nFormat(y,b,f),this.dataTableButtonId=te,this.sonifyButtonId=X,f.replace(/<(\w+)[^>]*?>\s*<\/\1>/g,"")}defaultAfterChartFormatter(){const f=this.chart,y=f.options.accessibility.screenReaderSection.afterChartFormat;if(!y)return"";const b={endOfChartMarker:this.getEndOfChartMarkerText()};return l.i18nFormat(y,b,f).replace(/<(\w+)[^>]*?>\s*<\/\1>/g,"")}getLinkedDescription(){const f=this.linkedDescriptionElement;return J(f&&f.innerHTML||"")}getLongdescText(){const f=this.chart.options;var y=f.caption;y=y&&y.text;const b=this.getLinkedDescription();return f.accessibility.description||b||y||""}getTypeDescriptionText(){const f=this.chart;return f.types?f.options.accessibility.typeDescription||K(f,f.types):""}getDataTableButtonText(f){var y=this.chart;return y=y.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:y,chartTitle:M(y)}),'<button id="'+f+'">'+y+"</button>"}getSonifyButtonText(f){var y=this.chart;return y.options.sonification&&y.options.sonification.enabled===!1?"":(y=y.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:y,chartTitle:M(y)}),'<button id="'+f+'">'+y+"</button>")}getSubtitleText(){const f=this.chart.options.subtitle;return J(f&&f.text||"")}getEndOfChartMarkerText(){const f=this.chart,y=f.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:f});return'<div id="highcharts-end-of-chart-marker-'+f.index+'">'+y+"</div>"}onDataTableCreated(f){const y=this.chart;if(y.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");const b=f.tree.attributes||{};b.tabindex=-1,b.summary=y.langFormat("accessibility.table.tableSummary",{chart:y}),f.tree.attributes=b}}focusDataTable(){var f=this.dataTableDiv;(f=f&&f.getElementsByTagName("table")[0])&&f.focus&&f.focus()}initSonifyButton(f){const y=this.sonifyButton=C(f),b=this.chart,D=X=>{y&&(y.setAttribute("aria-hidden","true"),y.setAttribute("aria-label","")),X.preventDefault(),X.stopPropagation(),X=b.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:b}),this.announcer.announce(X),setTimeout(()=>{y&&(y.removeAttribute("aria-hidden"),y.removeAttribute("aria-label")),b.sonify&&b.sonify()},1e3)};y&&b&&(y.setAttribute("tabindex",-1),y.onclick=function(X){(b.options.accessibility&&b.options.accessibility.screenReaderSection.onPlayAsSoundClick||D).call(this,X,b)})}initDataTableButton(f){const y=this.viewDataTableButton=C(f),b=this.chart;f=f.replace("hc-linkto-",""),y&&(F(y,{tabindex:-1,"aria-expanded":!!C(f)}),y.onclick=b.options.accessibility.screenReaderSection.onViewDataTableClick||function(){b.viewData()})}getAxesDescription(){const f=this.chart;var y=function(te,q){return te=f[te],1<te.length||te[0]&&H(te[0].options.accessibility&&te[0].options.accessibility.enabled,q)},b=!!f.types&&0>f.types.indexOf("map")&&0>f.types.indexOf("treemap")&&0>f.types.indexOf("tilemap");const D=!!f.hasCartesianSeries,X=y("xAxis",!f.angular&&D&&b);return y=y("yAxis",D&&b),b={},X&&(b.xAxis=this.getAxisDescriptionText("xAxis")),y&&(b.yAxis=this.getAxisDescriptionText("yAxis")),b}getAxisDescriptionText(f){const y=this.chart,b=y[f];return y.langFormat("accessibility.axis."+f+"Description"+(1<b.length?"Plural":"Singular"),{chart:y,names:b.map(function(D){return O(D)}),ranges:b.map(function(D){return $(D)}),numAxes:b.length})}destroy(){this.announcer&&this.announcer.destroy()}}return E}),r(t,"Accessibility/Components/MenuComponent.js",[t["Core/Chart/Chart.js"],t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(l,c,d,m,n,T){const{attr:V}=c,{getChartTitle:Q,unhideChartElementFromAT:z}=n,{getFakeMouseEvent:W}=T;class K extends d{init(){const O=this.chart,$=this;this.addEvent(O,"exportMenuShown",function(){$.onMenuShown()}),this.addEvent(O,"exportMenuHidden",function(){$.onMenuHidden()}),this.createProxyGroup()}onMenuHidden(){const O=this.chart.exportContextMenu;O&&O.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){const O=this.chart,$=O.exportContextMenu;$&&(this.addAccessibleContextMenuAttribs(),z(O,$)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(O){this.exportButtonProxy&&this.exportButtonProxy.buttonElement.setAttribute("aria-expanded",O)}onChartRender(){const O=this.chart,$=O.focusElement,M=O.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&$&&$===O.exportingGroup&&($.focusBorder?O.setFocusToElement($,this.exportButtonProxy.buttonElement):M&&M.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){const O=this.chart,$=this.proxyProvider,M=O.exportSVGElements&&O.exportSVGElements[0];{var S=O.options.exporting;const k=O.exportSVGElements&&O.exportSVGElements[0];S=!!(S&&S.enabled!==!1&&S.accessibility&&S.accessibility.enabled&&k&&k.element)}S&&M&&(this.exportButtonProxy=$.addProxyElement("chartMenu",{click:M},{"aria-label":O.langFormat("accessibility.exporting.menuButtonLabel",{chart:O,chartTitle:Q(O)}),"aria-expanded":!1,title:O.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu","div")}addAccessibleContextMenuAttribs(){const O=this.chart;var $=O.exportDivElements;$&&$.length&&($.forEach(M=>{M&&(M.tagName!=="LI"||M.children&&M.children.length?M.setAttribute("aria-hidden","true"):M.setAttribute("tabindex",-1))}),($=$[0]&&$[0].parentNode)&&V($,{"aria-hidden":void 0,"aria-label":O.langFormat("accessibility.exporting.chartMenuLabel",{chart:O}),role:"list"}))}getKeyboardNavigation(){const O=this.keyCodes,$=this.chart,M=this;return new m($,{keyCodeMap:[[[O.left,O.up],function(){return M.onKbdPrevious(this)}],[[O.right,O.down],function(){return M.onKbdNext(this)}],[[O.enter,O.space],function(){return M.onKbdClick(this)}]],validate:function(){return!!$.exporting&&$.options.exporting.enabled!==!1&&$.options.exporting.accessibility.enabled!==!1},init:function(){const S=M.exportButtonProxy,k=M.chart.exportingGroup;S&&k&&$.setFocusToElement(k,S.buttonElement)},terminate:function(){$.hideExportMenu()}})}onKbdPrevious(O){const $=this.chart,M=$.options.accessibility;O=O.response;let S=$.highlightedExportItemIx||0;for(;S--;)if($.highlightExportItem(S))return O.success;return M.keyboardNavigation.wrapAround?($.highlightLastExportItem(),O.success):O.prev}onKbdNext(O){const $=this.chart,M=$.options.accessibility;O=O.response;for(let S=($.highlightedExportItemIx||0)+1;S<$.exportDivElements.length;++S)if($.highlightExportItem(S))return O.success;return M.keyboardNavigation.wrapAround?($.highlightExportItem(0),O.success):O.next}onKbdClick(O){const $=this.chart,M=$.exportDivElements[$.highlightedExportItemIx],S=($.exportSVGElements&&$.exportSVGElements[0]).element;return $.openMenu?this.fakeClickEvent(M):(this.fakeClickEvent(S),$.highlightExportItem(0)),O.response.success}}return function(I){function O(){var G=this.exportSVGElements&&this.exportSVGElements[0];G&&(G=G.element,G.onclick)&&G.onclick(W("click"))}function $(){const G=this.exportDivElements;G&&this.exportContextMenu&&this.openMenu&&(G.forEach(U=>{U&&U.className==="highcharts-menu-item"&&U.onmouseout&&U.onmouseout(W("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function M(G){const U=this.exportDivElements&&this.exportDivElements[G],C=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(U&&U.tagName==="LI"&&(!U.children||!U.children.length)){const ie=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return U.focus&&ie&&U.focus(),C&&C.onmouseout&&C.onmouseout(W("mouseout")),U.onmouseover&&U.onmouseover(W("mouseover")),this.highlightedExportItemIx=G,!0}return!1}function S(){if(this.exportDivElements){let G=this.exportDivElements.length;for(;G--;)if(this.highlightExportItem(G))return!0}return!1}const k=[];I.compose=function(G){c.pushUnique(k,G)&&(G=l.prototype,G.hideExportMenu=$,G.highlightExportItem=M,G.highlightLastExportItem=S,G.showExportMenu=O)}}(K||(K={})),K}),r(t,"Accessibility/KeyboardNavigation.js",[t["Core/Globals.js"],t["Accessibility/Components/MenuComponent.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(l,c,d,m,n){const{doc:T,win:V}=l,{addEvent:Q,fireEvent:z}=d,{getElement:W,simulatedEventTarget:K}=n;class I{constructor($,M){this.components=this.chart=void 0,this.currentModuleIx=NaN,this.exitAnchor=this.eventProvider=void 0,this.modules=[],this.tabindexContainer=void 0,this.init($,M)}init($,M){const S=this.eventProvider=new m;this.chart=$,this.components=M,this.modules=[],this.currentModuleIx=0,this.update(),S.addEvent(this.tabindexContainer,"keydown",k=>this.onKeydown(k)),S.addEvent(this.tabindexContainer,"focus",k=>this.onFocus(k)),["mouseup","touchend"].forEach(k=>S.addEvent(T,k,G=>this.onMouseUp(G))),["mousedown","touchstart"].forEach(k=>S.addEvent($.renderTo,k,()=>{this.isClickingChart=!0}))}update($){var M=this.chart.options.accessibility;M=M&&M.keyboardNavigation;const S=this.components;this.updateContainerTabindex(),M&&M.enabled&&$&&$.length?(this.modules=$.reduce(function(k,G){return G=S[G].getKeyboardNavigation(),k.concat(G)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){const $=W(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),$?(this.makeElementAnExitAnchor($),this.exitAnchor=$):this.createExitAnchor()}move($){var M=this.modules&&this.modules[this.currentModuleIx];if(M&&M.terminate&&M.terminate($),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=$,M=this.modules&&this.modules[this.currentModuleIx]){if(M.validate&&!M.validate())return this.move($);if(M.init)return M.init($),!0}return this.currentModuleIx=0,this.exiting=!0,0<$?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus($){var M=this.chart;$=$.relatedTarget&&M.container.contains($.relatedTarget),!(M=(M=M.options.accessibility)&&M.keyboardNavigation)||!M.enabled||this.exiting||this.tabbingInBackwards||this.isClickingChart||$||($=this.getFirstValidModuleIx(),$!==null&&(this.currentModuleIx=$,this.modules[$].init(1))),this.exiting=!1}onMouseUp($){if(delete this.isClickingChart,!this.keyboardReset&&$.relatedTarget!==K){const M=this.chart;$.target&&M.container.contains($.target)||(($=this.modules&&this.modules[this.currentModuleIx||0])&&$.terminate&&$.terminate(),this.currentModuleIx=0),M.focusElement&&(M.focusElement.removeFocusBorder(),delete M.focusElement),this.keyboardReset=!0}}onKeydown($){$=$||V.event;const M=this.modules&&this.modules.length&&this.modules[this.currentModuleIx];let S;if(this.exiting=this.keyboardReset=!1,M){const k=M.run($);k===M.response.success?S=!0:k===M.response.prev?S=this.move(-1):k===M.response.next&&(S=this.move(1)),S&&($.preventDefault(),$.stopPropagation())}}updateContainerTabindex(){var $=this.chart.options.accessibility;$=$&&$.keyboardNavigation,$=!($&&$.enabled===!1);const M=this.chart;var S=M.container;M.renderTo.hasAttribute("tabindex")&&(S.removeAttribute("tabindex"),S=M.renderTo),this.tabindexContainer=S;const k=S.getAttribute("tabindex");$&&!k?S.setAttribute("tabindex","0"):$||M.container.removeAttribute("tabindex")}createExitAnchor(){const $=this.chart,M=this.exitAnchor=T.createElement("div");$.renderTo.appendChild(M),this.makeElementAnExitAnchor(M)}makeElementAnExitAnchor($){const M=this.tabindexContainer.getAttribute("tabindex")||0;$.setAttribute("class","highcharts-exit-anchor"),$.setAttribute("tabindex",M),$.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl($)}removeExitAnchor(){this.exitAnchor&&this.exitAnchor.parentNode&&(this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor)}addExitAnchorEventsToEl($){const M=this.chart,S=this;this.eventProvider.addEvent($,"focus",function(k){k=k||V.event;const G=!(k.relatedTarget&&M.container.contains(k.relatedTarget)||S.exiting);M.focusElement&&delete M.focusElement,G?(S.tabbingInBackwards=!0,S.tabindexContainer.focus(),delete S.tabbingInBackwards,k.preventDefault(),S.modules&&S.modules.length&&(S.currentModuleIx=S.modules.length-1,(k=S.modules[S.currentModuleIx])&&k.validate&&!k.validate()?S.move(-1):k&&k.init(-1))):S.exiting=!1})}getFirstValidModuleIx(){const $=this.modules.length;for(let M=0;M<$;++M){const S=this.modules[M];if(!S.validate||S.validate())return M}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}return function(O){function $(){const k=this;z(this,"dismissPopupContent",{},function(){k.tooltip&&k.tooltip.hide(0),k.hideExportMenu()})}function M(k){(k.which||k.keyCode)===27&&l.charts&&l.charts.forEach(G=>{G&&G.dismissPopupContent&&G.dismissPopupContent()})}const S=[];O.compose=function(k){return c.compose(k),d.pushUnique(S,k)&&(k.prototype.dismissPopupContent=$),d.pushUnique(S,T)&&Q(T,"keydown",M),k}}(I||(I={})),I}),r(t,"Accessibility/Components/LegendComponent.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Legend/Legend.js"],t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(l,c,d,m,n,T,V,Q){function z(N){const F=N.legend&&N.legend.allItems,H=N.options.legend.accessibility||{};return N=N.colorAxis&&N.colorAxis.some(E=>!E.dataClasses||!E.dataClasses.length),!(!F||!F.length||N||H.enabled===!1)}function W(N,F){const H=F.legendItem||{};F.setState(N?"hover":"",!0);for(const E of["group","label","symbol"])(F=(F=H[E])&&F.element||F)&&$(F,N?"mouseover":"mouseout")}const{animObject:K}=l,{doc:I}=c,{addEvent:O,fireEvent:$,isNumber:M,pick:S,syncTimeout:k}=m,{getChartTitle:G}=V,{stripHTMLTagsFromString:U,addClass:C,removeClass:ie}=Q;class J extends n{constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){const F=this;this.recreateProxies(),this.addEvent(d,"afterScroll",function(){this.chart===F.chart&&(F.proxyProvider.updateGroupProxyElementPositions("legend"),F.updateLegendItemProxyVisibility(),-1<F.highlightedLegendItemIx&&this.chart.highlightLegendItem(F.highlightedLegendItemIx))}),this.addEvent(d,"afterPositionItem",function(H){this.chart===F.chart&&this.chart.renderer&&F.updateProxyPositionForItem(H.item)}),this.addEvent(d,"afterRender",function(){this.chart===F.chart&&this.chart.renderer&&F.recreateProxies()&&k(()=>F.proxyProvider.updateGroupProxyElementPositions("legend"),K(S(this.chart.renderer.globalAnimation,!0)).duration)})}updateLegendItemProxyVisibility(){const F=this.chart,H=F.legend,E=H.currentPage||1,L=H.clipHeight||0;let f;(H.allItems||[]).forEach(y=>{if(y.a11yProxyElement){var b=H.pages&&H.pages.length;const X=y.a11yProxyElement.element;var D=!1;f=y.legendItem||{},b&&(y=f.pageIx||0,b=f.y||0,D=f.label?Math.round(f.label.getBBox().height):0,D=b+D-H.pages[y]>L||y!==E-1),D?F.styledMode?C(X,"highcharts-a11y-invisible"):X.style.visibility="hidden":(ie(X,"highcharts-a11y-invisible"),X.style.visibility="")}})}onChartRender(){z(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(F){const H=this.chart;var E=H.legend;F=(E.currentPage||1)+F;var L=E.pages||[];if(0<F&&F<=L.length){L=0;for(const f of E.allItems)((f.legendItem||{}).pageIx||0)+1===F&&(E=H.highlightLegendItem(L))&&(this.highlightedLegendItemIx=L),++L}}updateProxyPositionForItem(F){F.a11yProxyElement&&F.a11yProxyElement.refreshPosition()}recreateProxies(){var F=I.activeElement;const H=this.proxyGroup;return F=F&&H&&H.contains(F),this.removeProxies(),z(this.chart)?(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),F&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0):!1}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){var F=this.chart;const H=U((F.legend&&F.legend.options.title&&F.legend.options.title.text||"").replace(/<br ?\/?>/g," "));F=F.langFormat("accessibility.legend.legendLabel"+(H?"":"NoTitle"),{chart:F,legendTitle:H,chartTitle:G(F)}),this.proxyProvider.updateGroupAttrs("legend",{"aria-label":F})}addLegendProxyGroup(){this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:this.chart.options.accessibility.landmarkVerbosity==="all"?"region":null})}proxyLegendItems(){const F=this;let H;((this.chart.legend||{}).allItems||[]).forEach(E=>{H=E.legendItem||{},H.label&&H.label.element&&F.proxyLegendItem(E)})}proxyLegendItem(F){const H=F.legendItem||{};if(H.label&&H.group){var E=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:U(F.name),item:F});F.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:H.label,visual:(H.group.div?H.label:H.group).element},{tabindex:-1,"aria-pressed":F.visible,"aria-label":E})}}getKeyboardNavigation(){const F=this.keyCodes,H=this,E=this.chart;return new T(E,{keyCodeMap:[[[F.left,F.right,F.up,F.down],function(L){return H.onKbdArrowKey(this,L)}],[[F.enter,F.space],function(){return H.onKbdClick(this)}],[[F.pageDown,F.pageUp],function(L){return H.highlightAdjacentLegendPage(L===F.pageDown?1:-1),this.response.success}]],validate:function(){return H.shouldHaveLegendNavigation()},init:function(){E.highlightLegendItem(0),H.highlightedLegendItemIx=0},terminate:function(){H.highlightedLegendItemIx=-1,E.legend.allItems.forEach(L=>W(!1,L))}})}onKbdArrowKey(F,H){const E=this.keyCodes,L=F.response,f=this.chart,y=f.options.accessibility,b=f.legend.allItems.length;return H=H===E.left||H===E.up?-1:1,f.highlightLegendItem(this.highlightedLegendItemIx+H)?(this.highlightedLegendItemIx+=H,L.success):(1<b&&y.keyboardNavigation.wrapAround&&F.init(H),L.success)}onKbdClick(F){const H=this.chart.legend.allItems[this.highlightedLegendItemIx];return H&&H.a11yProxyElement&&H.a11yProxyElement.click(),F.response.success}shouldHaveLegendNavigation(){if(!z(this.chart))return!1;const F=this.chart,H=(F.options.legend||{}).accessibility||{};return!!(F.legend.display&&H.keyboardNavigation&&H.keyboardNavigation.enabled)}}return function(N){function F(L){var f=this.legend.allItems,y=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx;const b=f[L];var D=b.legendItem||{};return b?(M(y)&&f[y]&&W(!1,f[y]),f=this.legend,L=(f.allItems[L].legendItem||{}).pageIx,y=f.currentPage,typeof L<"u"&&L+1!==y&&f.scroll(1+L-y),D=D.label,L=b.a11yProxyElement&&b.a11yProxyElement.buttonElement,D&&D.element&&L&&this.setFocusToElement(D,L),W(!0,b),!0):!1}function H(L){const f=L.item;this.chart.options.accessibility.enabled&&f&&f.a11yProxyElement&&f.a11yProxyElement.buttonElement.setAttribute("aria-pressed",L.visible?"true":"false")}const E=[];N.compose=function(L,f){m.pushUnique(E,L)&&(L.prototype.highlightLegendItem=F),m.pushUnique(E,f)&&O(f,"afterColorizeItem",H)}}(J||(J={})),J}),r(t,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[t["Accessibility/Components/AnnotationsA11y.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/FormatUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(l,c,d,m,n){function T(b){const D=b.index;return b.series&&b.series.data&&y(D)&&E(b.series.data,function(X){return!!(X&&typeof X.index<"u"&&X.index>D&&X.graphic&&X.graphic.element)})||null}function V(b){const D=b.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(D!==!1&&b.points&&b.points.length>=D)}function Q(b){const D=b.options.accessibility||{};return!V(b)&&!D.exposeAsGroupOnly}function z(b){const D=b.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!(!b.points||!(b.points.length<D.pointNavigationEnabledThreshold||D.pointNavigationEnabledThreshold===!1))}function W(b,D){var X=b.series,te=X.chart;b=te.options.accessibility.point||{};const q=X.options.accessibility&&X.options.accessibility.point||{};return X=X.tooltipOptions||{},te=te.options.lang,L(D)?N(D,q.valueDecimals||b.valueDecimals||X.valueDecimals||-1,te.decimalPoint,te.accessibility.thousandsSep||te.thousandsSep):D}function K(b){const D=(b.options.accessibility||{}).description;return D&&b.chart.langFormat("accessibility.series.description",{description:D,series:b})||""}function I(b,D){return b.chart.langFormat("accessibility.series."+D+"Description",{name:G(b[D]),series:b})}function O(b,D,X){const te=D||"",q=X||"";return b.series.pointArrayMap.reduce(function(ce,fe){{const we=W(b,f(b[fe],b.options[fe]));fe=we!==void 0?fe+": "+te+we+q:we}return fe?ce+(ce.length?", ":"")+fe:ce},"")}function $(b){var D=b.series,X=1<D.chart.series.length||D.options.name,te=b.series,q=te.chart,ce=te.options.accessibility;if(ce=ce&&ce.point&&ce.point.valueDescriptionFormat||q.options.accessibility.point.valueDescriptionFormat,te=f(te.xAxis&&te.xAxis.options.accessibility&&te.xAxis.options.accessibility.enabled,!q.angular&&te.type!=="flowmap"),te){var fe=b.series,we=fe.chart,Z=fe.options.accessibility&&fe.options.accessibility.point||{},se=we.options.accessibility.point||{};(fe=fe.xAxis&&fe.xAxis.dateTime)?(fe=fe.getXDateFormat(b.x||0,we.options.tooltip.dateTimeLabelFormats),Z=Z.dateFormatter&&Z.dateFormatter(b)||se.dateFormatter&&se.dateFormatter(b)||Z.dateFormat||se.dateFormat||fe,we=we.time.dateFormat(Z,b.x||0,void 0)):we=void 0,Z=(b.series.xAxis||{}).categories&&y(b.category)&&(""+b.category).replace("<br/>"," "),se=y(b.id)&&0>(""+b.id).indexOf("highcharts-"),fe="x, "+b.x,we=b.name||we||Z||(se?b.id:fe)}else we="";Z=we,we=y(b.index)?b.index+1:"";{se=b.series;var ue=se.chart.options.accessibility.point||{},ye=se.chart.options.accessibility&&se.chart.options.accessibility.point||{};const Pe=se.tooltipOptions||{};fe=ye.valuePrefix||ue.valuePrefix||Pe.valuePrefix||"",ue=ye.valueSuffix||ue.valueSuffix||Pe.valueSuffix||"",ye=W(b,b[typeof b.value<"u"?"value":"y"]),se=b.isNull?se.chart.langFormat("accessibility.series.nullPointValue",{point:b}):se.pointArrayMap?O(b,fe,ue):fe+ye+ue}return q=J(ce,{point:b,index:we,xDescription:Z,value:se,separator:te?", ":""},q),ce=(ce=b.options&&b.options.accessibility&&b.options.accessibility.description)?" "+ce:"",D=X?" "+D.name+".":"",X=b.series.chart,te=k(b),we={point:b,annotations:te},X=te.length?X.langFormat("accessibility.series.pointAnnotationsDescription",we):"",b.accessibility=b.accessibility||{},b.accessibility.valueDescription=q,q+ce+D+(X?" "+X:"")}function M(b){const D=Q(b),X=z(b),te=b.chart.options.accessibility.point.describeNull;(D||X)&&b.points.forEach(q=>{var ce;if(!(ce=q.graphic&&q.graphic.element)){var fe=q.series;if(ce=fe&&fe.chart,fe=fe&&fe.is("sunburst"),ce=ce&&ce.options.accessibility.point.describeNull,ce=q.isNull&&!fe&&ce){fe=q.series;var we=T(q);fe=(ce=we&&we.graphic)?ce.parentGroup:fe.graph||fe.group,we=we?{x:f(q.plotX,we.plotX,0),y:f(q.plotY,we.plotY,0)}:{x:f(q.plotX,0),y:f(q.plotY,0)},we=q.series.chart.renderer.rect(we.x,we.y,1,1),we.attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),fe&&fe.element?(q.graphic=we,q.hasMockGraphic=!0,we.add(fe),fe.element.insertBefore(we.element,ce?ce.element:null),ce=we.element):ce=void 0}}fe=q.options&&q.options.accessibility&&q.options.accessibility.enabled===!1,ce&&(q.isNull&&!te?ce.setAttribute("aria-hidden",!0):(ce.setAttribute("tabindex","-1"),b.chart.styledMode||(ce.style.outline="none"),D&&!fe?(we=q.series,fe=we.chart.options.accessibility.point||{},we=we.options.accessibility&&we.options.accessibility.point||{},q=H(we.descriptionFormatter&&we.descriptionFormatter(q)||fe.descriptionFormatter&&fe.descriptionFormatter(q)||$(q)),ce.setAttribute("role","img"),ce.setAttribute("aria-label",q)):ce.setAttribute("aria-hidden",!0)))})}function S(b){const D=b.chart;var X=D.types||[];const te=K(b);var q=function(se){return D[se]&&1<D[se].length&&b[se]};const ce=b.index+1;var fe=I(b,"xAxis");const we=I(b,"yAxis");var Z={seriesNumber:ce,series:b,chart:D};return X=1<X.length?"Combination":"",Z=D.langFormat("accessibility.series.summary."+b.type+X,Z)||D.langFormat("accessibility.series.summary.default"+X,Z),q=(q("yAxis")?" "+we+".":"")+(q("xAxis")?" "+fe+".":""),fe=f(b.options.accessibility&&b.options.accessibility.descriptionFormat,D.options.accessibility.series.descriptionFormat,""),J(fe,{seriesDescription:Z,authorDescription:te?" "+te:"",axisDescription:q,series:b,chart:D,seriesNumber:ce},void 0)}const{getPointAnnotationTexts:k}=l,{getAxisDescription:G,getSeriesFirstPointElement:U,getSeriesA11yElement:C,unhideChartElementFromAT:ie}=c,{format:J,numberFormat:N}=d,{reverseChildNodes:F,stripHTMLTagsFromString:H}=m,{find:E,isNumber:L,pick:f,defined:y}=n;return{defaultPointDescriptionFormatter:$,defaultSeriesDescriptionFormatter:S,describeSeries:function(b){var D=b.chart,X=U(b);const te=C(b);var q=D.is3d&&D.is3d();if(te){te.lastChild!==X||q||F(te),M(b),ie(D,te);{q=b.chart,D=q.options.chart,X=1<q.series.length,q=q.options.accessibility.series.describeSingleSeries;const ce=(b.options.accessibility||{}).exposeAsGroupOnly;D=!(D.options3d&&D.options3d.enabled&&X)&&(X||q||ce||V(b))}D?(D=b.chart.options.accessibility,X=D.landmarkVerbosity,(b.options.accessibility||{}).exposeAsGroupOnly?te.setAttribute("role","img"):X==="all"?te.setAttribute("role","region"):te.setAttribute("role","group"),te.setAttribute("tabindex","-1"),b.chart.styledMode||(te.style.outline="none"),te.setAttribute("aria-label",H(D.series.descriptionFormatter&&D.series.descriptionFormatter(b)||S(b)))):te.removeAttribute("aria-label")}}}}),r(t,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(l,c,d,m,n,T){function V(M){const S=M.series.data.filter(k=>M.x===k.x&&M.y===k.y);return S.length===1?S[0]:M}function Q(M,S){const k=(M||[]).concat(S||[]).reduce((G,U)=>(G[U.name+U.index]=U,G),{});return Object.keys(k).map(G=>k[G])}const{addEvent:z,defined:W}=c,{getChartTitle:K}=m,{defaultPointDescriptionFormatter:I,defaultSeriesDescriptionFormatter:O}=T;class ${constructor(S){this.announcer=void 0,this.dirty={allSeries:{}},this.eventProvider=void 0,this.lastAnnouncementTime=0,this.chart=S}init(){const S=this.chart,k=S.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new n,this.announcer=new d(S,k),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){const S=this,k=this.chart,G=this.eventProvider;G.addEvent(k,"afterApplyDrilldown",function(){S.lastAnnouncementTime=0}),G.addEvent(k,"afterAddSeries",function(U){S.onSeriesAdded(U.series)}),G.addEvent(k,"redraw",function(){S.announceDirtyData()})}onSeriesAdded(S){this.chart.options.accessibility.announceNewData.enabled&&(this.dirty.hasDirty=!0,this.dirty.allSeries[S.name+S.index]=S,this.dirty.newSeries=W(this.dirty.newSeries)?void 0:S)}announceDirtyData(){const S=this;if(this.chart.options.accessibility.announceNewData&&this.dirty.hasDirty){let k=this.dirty.newPoint;k&&(k=V(k)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(G=>S.dirty.allSeries[G]),this.dirty.newSeries,k),this.dirty={allSeries:{}}}}queueAnnouncement(S,k,G){var U=this.chart.options.accessibility.announceNewData;if(U.enabled){const C=+new Date;U=Math.max(0,U.minAnnounceInterval-(C-this.lastAnnouncementTime)),S=Q(this.queuedAnnouncement&&this.queuedAnnouncement.series,S),(k=this.buildAnnouncementMessage(S,k,G))&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:C,message:k,series:S},this.queuedAnnouncementTimer=setTimeout(()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)},U))}}buildAnnouncementMessage(S,k,G){const U=this.chart;var C=U.options.accessibility.announceNewData;return C.announcementFormatter&&(S=C.announcementFormatter(S,k,G),S!==!1)?S.length?S:null:(S=l.charts&&1<l.charts.length?"Multiple":"Single",S=k?"newSeriesAnnounce"+S:G?"newPointAnnounce"+S:"newDataAnnounce",C=K(U),U.langFormat("accessibility.announceNewData."+S,{chartTitle:C,seriesDesc:k?O(k):null,pointDesc:G?I(G):null,point:G,series:k}))}}return function(M){function S(G){const U=this.chart,C=this.newDataAnnouncer;C&&C.chart===U&&U.options.accessibility.announceNewData.enabled&&(C.dirty.newPoint=W(C.dirty.newPoint)?void 0:G.point)}function k(){const G=this.chart,U=this.newDataAnnouncer;U&&U.chart===G&&G.options.accessibility.announceNewData.enabled&&(U.dirty.hasDirty=!0,U.dirty.allSeries[this.name+this.index]=this)}M.composedMembers=[],M.compose=function(G){c.pushUnique(M.composedMembers,G)&&(z(G,"addPoint",S),z(G,"updatedData",k))}}($||($={})),$}),r(t,"Accessibility/ProxyElement.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(l,c,d,m,n){const{doc:T}=l,{attr:V,css:Q,merge:z}=c,{fireEventOnWrappedOrUnwrappedElement:W}=m,{cloneMouseEvent:K,cloneTouchEvent:I,getFakeMouseEvent:O,removeElement:$}=n;class M{constructor(k,G,U,C){this.chart=k,this.target=G,this.groupType=U,U=U==="ul",this.eventProvider=new d;const ie=U?T.createElement("li"):null,J=this.buttonElement=T.createElement("button");k.styledMode||this.hideButtonVisually(J),ie?(U&&!k.styledMode&&(ie.style.listStyle="none"),ie.appendChild(J),this.element=ie):this.element=J,this.updateTarget(G,C)}click(){var k=this.getTargetPosition();k.x+=k.width/2,k.y+=k.height/2,k=O("click",k),W(this.target.click,k)}updateTarget(k,G){this.target=k,this.updateCSSClassName();const U=G||{};Object.keys(U).forEach(C=>{U[C]===null&&delete U[C]}),V(this.buttonElement,z({"aria-label":this.getTargetAttr(k.click,"aria-label")},U)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToButton(this.buttonElement,k.click),this.refreshPosition()}refreshPosition(){const k=this.getTargetPosition();Q(this.buttonElement,{width:(k.width||1)+"px",height:(k.height||1)+"px",left:(Math.round(k.x)||0)+"px",top:(Math.round(k.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),$(this.element)}updateCSSClassName(){var k=this.chart.legend;k=k.group&&k.group.div,k=-1<(k&&k.className||"").indexOf("highcharts-no-tooltip");const G=-1<(this.getTargetAttr(this.target.click,"class")||"").indexOf("highcharts-no-tooltip");this.buttonElement.className=k||G?"highcharts-a11y-proxy-button highcharts-no-tooltip":"highcharts-a11y-proxy-button"}addProxyEventsToButton(k,G){"click touchstart touchend touchcancel touchmove mouseover mouseenter mouseleave mouseout".split(" ").forEach(U=>{const C=U.indexOf("touch")===0;this.eventProvider.addEvent(k,U,ie=>{const J=C?I(ie):K(ie);G&&W(G,J),ie.stopPropagation(),C||ie.preventDefault()},{passive:!1})})}hideButtonVisually(k){Q(k,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){var k=this.target.click;if(k=k.element?k.element:k,k=this.target.visual||k,this.chart.renderTo&&k&&k.getBoundingClientRect){k=k.getBoundingClientRect();const G=this.chart.pointer.getChartPosition();return{x:(k.left-G.left)/G.scaleX,y:(k.top-G.top)/G.scaleY,width:k.right/G.scaleX-k.left/G.scaleX,height:k.bottom/G.scaleY-k.top/G.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(k,G){return k.element?k.element.getAttribute(G):k.getAttribute(G)}}return M}),r(t,"Accessibility/ProxyProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/ProxyElement.js"]],function(l,c,d,m,n,T){const{doc:V}=l,{attr:Q,css:z}=c,{unhideChartElementFromAT:W}=d,{removeElement:K,removeChildNodes:I}=n;class O{constructor(M){this.chart=M,this.domElementProvider=new m,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(M,S,k){const G=this.groups[M];if(!G)throw Error("ProxyProvider.addProxyElement: Invalid group key "+M);return M=new T(this.chart,S,G.type,k),G.proxyContainerElement.appendChild(M.element),G.proxyElements.push(M),M}addGroup(M,S,k){var G=this.groups[M];if(G)return G.groupElement;G=this.domElementProvider.createElement(S);let U;return k&&k.role&&S!=="div"?(U=this.domElementProvider.createElement("div"),U.appendChild(G)):U=G,U.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+M.replace(/\W/g,"-"),this.groups[M]={proxyContainerElement:G,groupElement:U,type:S,proxyElements:[]},Q(U,k||{}),S==="ul"&&G.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(U),this.updateGroupOrder(this.groupOrder),U}updateGroupAttrs(M,S){const k=this.groups[M];if(!k)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+M);Q(k.groupElement,S)}updateGroupOrder(M){if(this.groupOrder=M.slice(),!this.isDOMOrderGroupOrder()){var S=M.indexOf("series"),k=-1<S?M.slice(0,S):M,G=-1<S?M.slice(S+1):[];M=V.activeElement,["before","after"].forEach(U=>{const C=this[U==="before"?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];U=U==="before"?k:G,I(C),U.forEach(ie=>{(ie=this.groups[ie])&&C.appendChild(ie.groupElement)})}),(this.beforeChartProxyPosContainer.contains(M)||this.afterChartProxyPosContainer.contains(M))&&M&&M.focus&&M.focus()}}clearGroup(M){const S=this.groups[M];if(!S)throw Error("ProxyProvider.clearGroup: Invalid group key "+M);I(S.proxyContainerElement)}removeGroup(M){const S=this.groups[M];S&&(K(S.groupElement),delete this.groups[M])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(M){(M=this.groups[M])&&M.proxyElements.forEach(S=>S.refreshPosition())}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(M){const S=this.domElementProvider.createElement("div");return S.setAttribute("aria-hidden","false"),S.className="highcharts-a11y-proxy-container"+(M?"-"+M:""),z(S,{top:"0",left:"0"}),this.chart.styledMode||(S.style.whiteSpace="nowrap",S.style.position="absolute"),S}getCurrentGroupOrderInDOM(){const M=G=>{const U=Object.keys(this.groups);let C=U.length;for(;C--;){const ie=U[C],J=this.groups[ie];if(J&&G===J.groupElement)return ie}};var S=G=>{const U=[];G=G.children;for(let C=0;C<G.length;++C){const ie=M(G[C]);ie&&U.push(ie)}return U};const k=S(this.beforeChartProxyPosContainer);return S=S(this.afterChartProxyPosContainer),k.push("series"),k.concat(S)}isDOMOrderGroupOrder(){const M=this.getCurrentGroupOrderInDOM(),S=this.groupOrder.filter(G=>G==="series"||!!this.groups[G]);let k=M.length;if(k!==S.length)return!1;for(;k--;)if(M[k]!==S[k])return!1;return!0}updatePosContainerPositions(){const M=this.chart;if(!M.renderer.forExport){var S=M.renderer.box;M.container.insertBefore(this.afterChartProxyPosContainer,S.nextSibling),M.container.insertBefore(this.beforeChartProxyPosContainer,S),W(this.chart,this.afterChartProxyPosContainer),W(this.chart,this.beforeChartProxyPosContainer)}}}return O}),r(t,"Stock/RangeSelector/RangeSelectorDefaults.js",[],function(){return{lang:{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"→"},rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%e %b %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#334eff",cursor:"pointer",fontSize:"0.8em"},labelStyle:{color:"#666666",fontSize:"0.8em"}}}}),r(t,"Stock/RangeSelector/RangeSelectorComposition.js",[t["Core/Defaults.js"],t["Stock/RangeSelector/RangeSelectorDefaults.js"],t["Core/Utilities.js"]],function(l,c,d){function m(){const F=this.range,H=F.type,E=this.max,L=this.chart.time,f=function(X,te){const q=H==="year"?"FullYear":"Month",ce=new L.Date(X),fe=L.get(q,ce);return L.set(q,ce,fe+te),fe===L.get(q,ce)&&L.set("Date",ce,0),ce.getTime()-X};let y,b;G(F)?(y=E-F,b=F):F&&(y=E+f(E,-(F.count||1)),this.chart&&(this.chart.fixedRange=E-y));const D=C(this.dataMin,Number.MIN_VALUE);return G(y)||(y=D),y<=D&&(y=D,typeof b>"u"&&(b=f(y,F.count)),this.newMax=Math.min(y+b,C(this.dataMax,Number.MAX_VALUE))),G(E)?!G(F)&&F&&F._offsetMin&&(y+=F._offsetMin):y=void 0,y}function n(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new N(this))}function T(){var F=this.axes;const H=this.rangeSelector;H&&(G(H.deferredYTDClick)&&(H.clickButton(H.deferredYTDClick),delete H.deferredYTDClick),F.forEach(E=>{E.updateNames(),E.setScale()}),this.getAxisMargins(),H.render(),F=H.options.verticalAlign,H.options.floating||(F==="bottom"?this.extraBottomMargin=!0:F!=="middle"&&(this.extraTopMargin=!0)))}function V(F){let H,E,L,f;const y=F.rangeSelector,b=()=>{y&&(H=F.xAxis[0].getExtremes(),E=F.legend,f=y&&y.options.verticalAlign,G(H.min)&&y.render(H.min,H.max),E.display&&f==="top"&&f===E.options.verticalAlign&&(L=U(F.spacingBox),L.y=E.options.layout==="vertical"?F.plotTop:L.y+y.getHeight(),E.group.placed=!1,E.align(L)))};y&&(k(ie,D=>D[0]===F)||ie.push([F,[$(F.xAxis[0],"afterSetExtremes",function(D){y&&y.render(D.min,D.max)}),$(F,"redraw",b)]]),b())}function Q(){for(let F=0,H=ie.length;F<H;++F){const E=ie[F];if(E[0]===this){E[1].forEach(L=>L()),ie.splice(F,1);break}}}function z(){var F=this.rangeSelector;F&&(F=F.getHeight(),this.extraTopMargin&&(this.plotTop+=F),this.extraBottomMargin&&(this.marginBottom+=F))}function W(){var F=this.rangeSelector;F&&!F.options.floating&&(F.render(),F=F.options.verticalAlign,F==="bottom"?this.extraBottomMargin=!0:F!=="middle"&&(this.extraTopMargin=!0))}function K(F){var H=F.options.rangeSelector;F=this.extraBottomMargin;const E=this.extraTopMargin;let L=this.rangeSelector;H&&H.enabled&&!M(L)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=L=new N(this)),this.extraTopMargin=this.extraBottomMargin=!1,L&&(V(this),H=H&&H.verticalAlign||L.options&&L.options.verticalAlign,L.options.floating||(H==="bottom"?this.extraBottomMargin=!0:H!=="middle"&&(this.extraTopMargin=!0)),this.extraBottomMargin!==F||this.extraTopMargin!==E)&&(this.isDirtyBox=!0)}const{defaultOptions:I,setOptions:O}=l,{addEvent:$,defined:M,extend:S,find:k,isNumber:G,merge:U,pick:C}=d,ie=[],J=[];let N;return{compose:function(F,H,E){N=E,d.pushUnique(J,F)&&(F.prototype.minFromRange=m),d.pushUnique(J,H)&&($(H,"afterGetContainer",n),$(H,"beforeRender",T),$(H,"destroy",Q),$(H,"getMargins",z),$(H,"render",W),$(H,"update",K),H.prototype.callbacks.push(V)),d.pushUnique(J,O)&&(S(I,{rangeSelector:c.rangeSelector}),S(I.lang,c.lang))}}}),r(t,"Stock/RangeSelector/RangeSelector.js",[t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Stock/RangeSelector/RangeSelectorComposition.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T){function V(H){if(H.indexOf("%L")!==-1)return"text";const E="aAdewbBmoyY".split("").some(f=>H.indexOf("%"+f)!==-1),L="HkIlMS".split("").some(f=>H.indexOf("%"+f)!==-1);return E&&L?"datetime-local":E?"date":L?"time":"text"}const{defaultOptions:Q}=c,{addEvent:z,createElement:W,css:K,defined:I,destroyObjectProperties:O,discardElement:$,extend:M,fireEvent:S,isNumber:k,merge:G,objectEach:U,pad:C,pick:ie,pInt:J,splat:N}=T;class F{static compose(E,L){m.compose(E,L,F)}constructor(E){this.buttons=void 0,this.buttonOptions=F.prototype.defaultButtons,this.initialButtonGroupWidth=0,this.options=void 0,this.chart=E,this.init(E)}clickButton(E,L){const f=this.chart,y=this.buttonOptions[E],b=f.xAxis[0];var D=f.scroller&&f.scroller.getUnionExtremes()||b||{},X=y.type;const te=y.dataGrouping;let q=D.dataMin,ce=D.dataMax,fe,we=b&&Math.round(Math.min(b.max,ie(ce,b.max))),Z;D=y._range;let se,ue,ye,Pe=!0;if(q!==null&&ce!==null){if(f.fixedRange=D,this.setSelected(E),te&&(this.forcedDataGrouping=!0,l.prototype.setDataGrouping.call(b||{chart:this.chart},te,!1),this.frozenStates=y.preserveDataGrouping),X==="month"||X==="year")b?(X={range:y,max:we,chart:f,dataMin:q,dataMax:ce},fe=b.minFromRange.call(X),k(X.newMax)&&(we=X.newMax),Pe=!1):D=y;else if(D)fe=Math.max(we-D,q),we=Math.min(fe+D,ce),Pe=!1;else if(X==="ytd")if(b)(typeof ce>"u"||typeof q>"u")&&(q=Number.MAX_VALUE,ce=Number.MIN_VALUE,f.series.forEach(ae=>{(ae=ae.xData)&&(q=Math.min(ae[0],q),ce=Math.max(ae[ae.length-1],ce))}),L=!1),X=this.getYTDExtremes(ce,q,f.time.useUTC),fe=se=X.min,we=X.max;else{this.deferredYTDClick=E;return}else X==="all"&&b&&(f.navigator&&f.navigator.baseSeries[0]&&(f.navigator.baseSeries[0].xAxis.options.range=void 0),fe=q,we=ce);Pe&&y._offsetMin&&I(fe)&&(fe+=y._offsetMin),y._offsetMax&&I(we)&&(we+=y._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=E+1),b?b.setExtremes(fe,we,ie(L,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:y}):(Z=N(f.options.xAxis)[0],ye=Z.range,Z.range=D,ue=Z.min,Z.min=se,z(f,"load",function(){Z.range=ye,Z.min=ue})),S(this,"afterBtnClick")}}setSelected(E){this.selected=this.options.selected=E}init(E){const L=this,f=E.options.rangeSelector,y=f.buttons||L.defaultButtons.slice(),b=f.selected,D=function(){const X=L.minInput,te=L.maxInput;X&&X.blur&&S(X,"blur"),te&&te.blur&&S(te,"blur")};L.chart=E,L.options=f,L.buttons=[],L.buttonOptions=y,this.eventsToUnbind=[],this.eventsToUnbind.push(z(E.container,"mousedown",D)),this.eventsToUnbind.push(z(E,"resize",D)),y.forEach(L.computeButtonRange),typeof b<"u"&&y[b]&&this.clickButton(b,!1),this.eventsToUnbind.push(z(E,"load",function(){E.xAxis&&E.xAxis[0]&&z(E.xAxis[0],"setExtremes",function(X){this.max-this.min!==E.fixedRange&&X.trigger!=="rangeSelectorButton"&&X.trigger!=="updatedData"&&L.forcedDataGrouping&&!L.frozenStates&&this.setDataGrouping(!1,!1)})}))}updateButtonStates(){const E=this;var L=this.chart;const f=this.dropdown,y=L.xAxis[0],b=Math.round(y.max-y.min),D=!y.hasVisibleSeries,X=L.scroller&&L.scroller.getUnionExtremes()||y,te=X.dataMin,q=X.dataMax;L=E.getYTDExtremes(q,te,L.time.useUTC);const ce=L.min,fe=L.max,we=E.selected,Z=E.options.allButtonsEnabled,se=E.buttons;let ue=k(we);E.buttonOptions.forEach((ye,Pe)=>{var ae=ye._range,xe=ye.type,ve=ye.count||1;const le=se[Pe],me=ye._offsetMax-ye._offsetMin,be=Pe===we,Le=ae>q-te,De=ae<y.minRange;ye=0;let Ne=!1,st=!1;ae=ae===b,(xe==="month"||xe==="year")&&b+36e5>=864e5*{month:28,year:365}[xe]*ve-me&&b-36e5<=864e5*{month:31,year:366}[xe]*ve+me?ae=!0:xe==="ytd"?(ae=fe-ce+me===b,Ne=!be):xe==="all"&&(ae=y.max-y.min>=q-te,st=!be&&ue&&ae),xe=!Z&&(Le||De||st||D),ve=be&&ae||ae&&!ue&&!Ne||be&&E.frozenStates,xe?ye=3:ve&&(ue=!0,ye=2),le.state!==ye&&(le.setState(ye),f&&(f.options[Pe+1].disabled=xe,ye===2&&(f.selectedIndex=Pe+1)),ye===0&&we===Pe&&E.setSelected())})}computeButtonRange(E){const L=E.type,f=E.count||1,y={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};y[L]?E._range=y[L]*f:(L==="month"||L==="year")&&(E._range=864e5*{month:30,year:365}[L]*f),E._offsetMin=ie(E.offsetMin,0),E._offsetMax=ie(E.offsetMax,0),E._range+=E._offsetMax-E._offsetMin}getInputValue(E){E=E==="min"?this.minInput:this.maxInput;const L=this.chart.options.rangeSelector,f=this.chart.time;return E?(E.type==="text"&&L.inputDateParser||this.defaultInputDateParser)(E.value,f.useUTC,f):0}setInputValue(E,L){const f=this.options,y=this.chart.time,b=E==="min"?this.minInput:this.maxInput;if(E=E==="min"?this.minDateBox:this.maxDateBox,b){var D=b.getAttribute("data-hc-time");D=I(D)?Number(D):void 0,I(L)&&(I(D)&&b.setAttribute("data-hc-time-previous",D),b.setAttribute("data-hc-time",L),D=L),b.value=y.dateFormat(this.inputTypeFormats[b.type]||f.inputEditDateFormat,D),E&&E.attr({text:y.dateFormat(f.inputDateFormat,D)})}}setInputExtremes(E,L,f){if(E=E==="min"?this.minInput:this.maxInput){const y=this.inputTypeFormats[E.type],b=this.chart.time;y&&(L=b.dateFormat(y,L),E.min!==L&&(E.min=L),f=b.dateFormat(y,f),E.max!==f&&(E.max=f))}}showInput(E){const L=E==="min"?this.minDateBox:this.maxDateBox;if((E=E==="min"?this.minInput:this.maxInput)&&L&&this.inputGroup){const f=E.type==="text",{translateX:y,translateY:b}=this.inputGroup,{inputBoxWidth:D}=this.options;K(E,{width:f?L.width+(D?-2:20)+"px":"auto",height:L.height-2+"px",border:"2px solid silver"}),f&&D?K(E,{left:y+L.x+"px",top:b+"px"}):K(E,{left:Math.min(Math.round(L.x+y-(E.offsetWidth-L.width)/2),this.chart.chartWidth-E.offsetWidth)+"px",top:b-(E.offsetHeight-L.height)/2+"px"})}}hideInput(E){(E=E==="min"?this.minInput:this.maxInput)&&K(E,{top:"-9999em",border:0,width:"1px",height:"1px"})}defaultInputDateParser(E,L,f){var y=E.split("/").join("-").split(" ").join("T");if(y.indexOf("T")===-1&&(y+="T00:00"),L)y+="Z";else{var b;(b=d.isSafari)&&(b=y,b=!(6<b.length&&(b.lastIndexOf("-")===b.length-6||b.lastIndexOf("+")===b.length-6))),b&&(b=new Date(y).getTimezoneOffset()/60,y+=0>=b?`+${C(-b)}:00`:`-${C(b)}:00`)}return y=Date.parse(y),k(y)||(E=E.split("-"),y=Date.UTC(J(E[0]),J(E[1])-1,J(E[2]))),f&&L&&k(y)&&(y+=f.getTimezoneOffset(y)),y}drawInput(E){function L(){const{maxInput:se,minInput:ue}=D,ye=f.xAxis[0];var Pe=f.scroller&&f.scroller.xAxis?f.scroller.xAxis:ye;const ae=Pe.dataMin;Pe=Pe.dataMax;let xe=D.getInputValue(E);xe!==Number(we.getAttribute("data-hc-time-previous"))&&k(xe)&&(we.setAttribute("data-hc-time-previous",xe),ce&&se&&k(ae)?xe>Number(se.getAttribute("data-hc-time"))?xe=void 0:xe<ae&&(xe=ae):ue&&k(Pe)&&(xe<Number(ue.getAttribute("data-hc-time"))?xe=void 0:xe>Pe&&(xe=Pe)),typeof xe<"u"&&ye.setExtremes(ce?xe:ye.min,ce?ye.max:xe,void 0,void 0,{trigger:"rangeSelectorInput"}))}const{chart:f,div:y,inputGroup:b}=this,D=this,X=f.renderer.style||{};var te=f.renderer;const q=f.options.rangeSelector,ce=E==="min";var fe=Q.lang[ce?"rangeSelectorFrom":"rangeSelectorTo"]||"";fe=te.label(fe,0).addClass("highcharts-range-label").attr({padding:fe?2:0,height:fe?q.inputBoxHeight:0}).add(b),te=te.label("",0).addClass("highcharts-range-input").attr({padding:2,width:q.inputBoxWidth,height:q.inputBoxHeight,"text-align":"center"}).on("click",function(){D.showInput(E),D[E+"Input"].focus()}),f.styledMode||te.attr({stroke:q.inputBoxBorderColor,"stroke-width":1}),te.add(b);const we=W("input",{name:E,className:"highcharts-range-selector"},void 0,y);we.setAttribute("type",V(q.inputDateFormat||"%e %b %Y")),f.styledMode||(fe.css(G(X,q.labelStyle)),te.css(G({color:"#333333"},X,q.inputStyle)),K(we,M({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:X.fontSize,fontFamily:X.fontFamily,top:"-9999em"},q.inputStyle))),we.onfocus=()=>{D.showInput(E)},we.onblur=()=>{we===d.doc.activeElement&&L(),D.hideInput(E),D.setInputValue(E),we.blur()};let Z=!1;return we.onchange=()=>{Z||(L(),D.hideInput(E),we.blur())},we.onkeypress=se=>{se.keyCode===13&&L()},we.onkeydown=se=>{Z=!0,se.keyCode!==38&&se.keyCode!==40||L()},we.onkeyup=()=>{Z=!1},{dateBox:te,input:we,label:fe}}getPosition(){var E=this.chart;const L=E.options.rangeSelector;return E=L.verticalAlign==="top"?E.plotTop-E.axisOffset[0]:0,{buttonTop:E+L.buttonPosition.y,inputTop:E+L.inputPosition.y-10}}getYTDExtremes(E,L,f){const y=this.chart.time;var b=new y.Date(E);const D=y.get("FullYear",b);return f=f?y.Date.UTC(D,0,1):+new y.Date(D,0,1),L=Math.max(L,f),b=b.getTime(),{max:Math.min(E||b,b),min:L}}render(E,L){var f=this.chart,y=f.renderer;const b=f.container;var D=f.options;const X=D.rangeSelector,te=ie(D.chart.style&&D.chart.style.zIndex,0)+1;if(D=X.inputEnabled,X.enabled!==!1){if(this.rendered||(this.group=y.g("range-selector-group").attr({zIndex:7}).add(),this.div=W("div",void 0,{position:"relative",height:0,zIndex:te}),this.buttonOptions.length&&this.renderButtons(),b.parentNode&&b.parentNode.insertBefore(this.div,b),D&&(this.inputGroup=y.g("input-group").add(this.group),y=this.drawInput("min"),this.minDateBox=y.dateBox,this.minLabel=y.label,this.minInput=y.input,y=this.drawInput("max"),this.maxDateBox=y.dateBox,this.maxLabel=y.label,this.maxInput=y.input)),D&&(this.setInputValue("min",E),this.setInputValue("max",L),E=f.scroller&&f.scroller.getUnionExtremes()||f.xAxis[0]||{},I(E.dataMin)&&I(E.dataMax)&&(f=f.xAxis[0].minRange||0,this.setInputExtremes("min",E.dataMin,Math.min(E.dataMax,this.getInputValue("max"))-f),this.setInputExtremes("max",Math.max(E.dataMin,this.getInputValue("min"))+f,E.dataMax)),this.inputGroup)){let q=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(ce=>{if(ce){const{width:fe}=ce.getBBox();fe&&(ce.attr({x:q}),q+=fe+X.inputSpacing)}})}this.alignElements(),this.rendered=!0}}renderButtons(){const{buttons:E,chart:L,options:f}=this,y=Q.lang,b=L.renderer,D=G(f.buttonTheme),X=D&&D.states,te=D.width||28;delete D.width,delete D.states,this.buttonGroup=b.g("range-selector-buttons").add(this.group);const q=this.dropdown=W("select",void 0,{position:"absolute",width:"1px",height:"1px",padding:0,border:0,top:"-9999em",cursor:"pointer",opacity:1e-4},this.div);z(q,"touchstart",()=>{q.style.fontSize="16px"}),[[d.isMS?"mouseover":"mouseenter"],[d.isMS?"mouseout":"mouseleave"],["change","click"]].forEach(([ce,fe])=>{z(q,ce,()=>{const we=E[this.currentButtonIndex()];we&&S(we.element,fe||ce)})}),this.zoomText=b.label(y&&y.rangeSelectorZoom||"",0).attr({padding:f.buttonTheme.padding,height:f.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(f.labelStyle),D["stroke-width"]=ie(D["stroke-width"],0)),W("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,q),this.buttonOptions.forEach((ce,fe)=>{W("option",{textContent:ce.title||ce.text},void 0,q),E[fe]=b.button(ce.text,0,0,we=>{const Z=ce.events&&ce.events.click;let se;Z&&(se=Z.call(ce,we)),se!==!1&&this.clickButton(fe),this.isActive=!0},D,X&&X.hover,X&&X.select,X&&X.disabled).attr({"text-align":"center",width:te}).add(this.buttonGroup),ce.title&&E[fe].attr("title",ce.title)})}alignElements(){const{buttonGroup:E,buttons:L,chart:f,group:y,inputGroup:b,options:D,zoomText:X}=this;var te=f.options;const q=te.exporting&&te.exporting.enabled!==!1&&te.navigation&&te.navigation.buttonOptions,{buttonPosition:ce,inputPosition:fe,verticalAlign:we}=D;te=(ye,Pe)=>q&&this.titleCollision(f)&&we==="top"&&Pe.align==="right"&&Pe.y-ye.getBBox().height-12<(q.y||0)+(q.height||0)+f.spacing[0]?-40:0;var Z=f.plotLeft;if(y&&ce&&fe){var se=ce.x-f.spacing[3];if(E){if(this.positionButtons(),!this.initialButtonGroupWidth){let xe=0;X&&(xe+=X.getBBox().width+5),L.forEach((ve,le)=>{xe+=ve.width,le!==L.length-1&&(xe+=D.buttonSpacing)}),this.initialButtonGroupWidth=xe}Z-=f.spacing[3],this.updateButtonStates();var ue=te(E,ce);this.alignButtonGroup(ue),y.placed=E.placed=f.hasLoaded}ue=0,b&&(ue=te(b,fe),fe.align==="left"?se=Z:fe.align==="right"&&(se=-Math.max(f.axisOffset[1],-ue)),b.align({y:fe.y,width:b.getBBox().width,align:fe.align,x:fe.x+se-2},!0,f.spacingBox),b.placed=f.hasLoaded),this.handleCollision(ue),y.align({verticalAlign:we},!0,f.spacingBox),te=y.alignAttr.translateY,Z=y.getBBox().height+20,se=0,we==="bottom"&&(se=(se=f.legend&&f.legend.options)&&se.verticalAlign==="bottom"&&se.enabled&&!se.floating?f.legend.legendHeight+ie(se.margin,10):0,Z=Z+se-20,se=te-Z-(D.floating?0:D.y)-(f.titleOffset?f.titleOffset[2]:0)-10),we==="top"?(D.floating&&(se=0),f.titleOffset&&f.titleOffset[0]&&(se=f.titleOffset[0]),se+=f.margin[0]-f.spacing[0]||0):we==="middle"&&(fe.y===ce.y?se=te:(fe.y||ce.y)&&(se=0>fe.y||0>ce.y?se-Math.min(fe.y,ce.y):te-Z)),y.translate(D.x,D.y+Math.floor(se));const{minInput:ye,maxInput:Pe,dropdown:ae}=this;D.inputEnabled&&ye&&Pe&&(ye.style.marginTop=y.translateY+"px",Pe.style.marginTop=y.translateY+"px"),ae&&(ae.style.marginTop=y.translateY+"px")}}alignButtonGroup(E,L){const{chart:f,options:y,buttonGroup:b}=this,{buttonPosition:D}=y,X=f.plotLeft-f.spacing[3];let te=D.x-f.spacing[3];D.align==="right"?te+=E-X:D.align==="center"&&(te-=X/2),b&&b.align({y:D.y,width:ie(L,this.initialButtonGroupWidth),align:D.align,x:te},!0,f.spacingBox)}positionButtons(){const{buttons:E,chart:L,options:f,zoomText:y}=this,b=L.hasLoaded?"animate":"attr",{buttonPosition:D}=f,X=L.plotLeft;let te=X;y&&y.visibility!=="hidden"&&(y[b]({x:ie(X+D.x,X)}),te+=D.x+y.getBBox().width+5);for(let q=0,ce=this.buttonOptions.length;q<ce;++q)E[q].visibility!=="hidden"?(E[q][b]({x:te}),te+=E[q].width+f.buttonSpacing):E[q][b]({x:X})}handleCollision(E){const{chart:L,buttonGroup:f,inputGroup:y}=this,{buttonPosition:b,dropdown:D,inputPosition:X}=this.options,te=()=>{let fe=0;return this.buttons.forEach(we=>{we=we.getBBox(),we.width>fe&&(fe=we.width)}),fe},q=fe=>{if(y&&f){const we=y.alignAttr.translateX+y.alignOptions.x-E+y.getBBox().x+2,Z=y.alignOptions.width,se=f.alignAttr.translateX+f.getBBox().x;return se+fe>we&&we+Z>se&&b.y<X.y+y.getBBox().height}return!1},ce=()=>{y&&f&&y.attr({translateX:y.alignAttr.translateX+(L.axisOffset[1]>=-E?0:-E),translateY:y.alignAttr.translateY+f.getBBox().height+10})};if(f){if(D==="always"){this.collapseButtons(E),q(te())&&ce();return}D==="never"&&this.expandButtons()}y&&f?X.align===b.align||q(this.initialButtonGroupWidth+20)?D==="responsive"?(this.collapseButtons(E),q(te())&&ce()):ce():D==="responsive"&&this.expandButtons():f&&D==="responsive"&&(this.initialButtonGroupWidth>L.plotWidth?this.collapseButtons(E):this.expandButtons())}collapseButtons(E){const{buttons:L,buttonOptions:f,chart:y,dropdown:b,options:D,zoomText:X}=this,te=y.userOptions.rangeSelector&&y.userOptions.rangeSelector.buttonTheme||{},q=we=>({text:we?`${we} ▾`:"▾",width:"auto",paddingLeft:ie(D.buttonTheme.paddingLeft,te.padding,8),paddingRight:ie(D.buttonTheme.paddingRight,te.padding,8)});X&&X.hide();let ce=!1;f.forEach((we,Z)=>{Z=L[Z],Z.state!==2?Z.hide():(Z.show(),Z.attr(q(we.text)),ce=!0)}),ce||(b&&(b.selectedIndex=0),L[0].show(),L[0].attr(q(this.zoomText&&this.zoomText.textStr)));const{align:fe}=D.buttonPosition;this.positionButtons(),fe!=="right"&&fe!=="center"||this.alignButtonGroup(E,L[this.currentButtonIndex()].getBBox().width),this.showDropdown()}expandButtons(){const{buttons:E,buttonOptions:L,options:f,zoomText:y}=this;this.hideDropdown(),y&&y.show(),L.forEach((b,D)=>{D=E[D],D.show(),D.attr({text:b.text,width:f.buttonTheme.width||28,paddingLeft:ie(f.buttonTheme.paddingLeft,"unset"),paddingRight:ie(f.buttonTheme.paddingRight,"unset")}),2>D.state&&D.setState(0)}),this.positionButtons()}currentButtonIndex(){const{dropdown:E}=this;return E&&0<E.selectedIndex?E.selectedIndex-1:0}showDropdown(){const{buttonGroup:E,buttons:L,chart:f,dropdown:y}=this;if(E&&y){const{translateX:b,translateY:D}=E,X=L[this.currentButtonIndex()].getBBox();K(y,{left:f.plotLeft+b+"px",top:D+.5+"px",width:X.width+"px",height:X.height+"px"}),this.hasVisibleDropdown=!0}}hideDropdown(){const{dropdown:E}=this;E&&(K(E,{top:"-9999em",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)}getHeight(){var E=this.options,L=this.group;const f=E.y,y=E.buttonPosition.y,b=E.inputPosition.y;return E.height?E.height:(this.alignElements(),E=L?L.getBBox(!0).height+13+f:0,L=Math.min(b,y),(0>b&&0>y||0<b&&0<y)&&(E+=Math.abs(L)),E)}titleCollision(E){return!(E.options.title.text||E.options.subtitle.text)}update(E){const L=this.chart;G(!0,L.options.rangeSelector,E),this.destroy(),this.init(L),this.render()}destroy(){const E=this,L=E.minInput,f=E.maxInput;E.eventsToUnbind&&(E.eventsToUnbind.forEach(y=>y()),E.eventsToUnbind=void 0),O(E.buttons),L&&(L.onfocus=L.onblur=L.onchange=null),f&&(f.onfocus=f.onblur=f.onchange=null),U(E,function(y,b){y&&b!=="chart"&&(y instanceof n?y.destroy():y instanceof window.HTMLElement&&$(y)),y!==F.prototype[b]&&(E[b]=null)},this)}}return M(F.prototype,{defaultButtons:[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}],inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}}),F}),r(t,"Accessibility/Components/RangeSelectorComponent.js",[t["Stock/RangeSelector/RangeSelector.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(l,c,d,m,n,T){const{unhideChartElementFromAT:V,getAxisRangeDescription:Q}=d,{addEvent:z,attr:W}=T;class K extends c{constructor(){super(...arguments),this.announcer=void 0}init(){this.announcer=new m(this.chart,"polite")}onChartUpdate(){const O=this.chart,$=this,M=O.rangeSelector;M&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),M.buttons&&M.buttons.length&&M.buttons.forEach(S=>{$.setRangeButtonAttrs(S)}),M.maxInput&&M.minInput&&["minInput","maxInput"].forEach(function(S,k){(S=M[S])&&(V(O,S),$.setRangeInputAttrs(S,"accessibility.rangeSelector."+(k?"max":"min")+"InputLabel"))}))}updateSelectorVisibility(){const O=this.chart,$=O.rangeSelector,M=$&&$.dropdown,S=$&&$.buttons||[];$&&$.hasVisibleDropdown&&M?(V(O,M),S.forEach(k=>k.element.setAttribute("aria-hidden",!0))):(M&&M.setAttribute("aria-hidden",!0),S.forEach(k=>V(O,k.element)))}setDropdownAttrs(){var O=this.chart;const $=O.rangeSelector&&O.rangeSelector.dropdown;$&&(O=O.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:O.options.lang.rangeSelectorZoom}),$.setAttribute("aria-label",O),$.setAttribute("tabindex",-1))}setRangeButtonAttrs(O){W(O.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(O,$){const M=this.chart;W(O,{tabindex:-1,"aria-label":M.langFormat($,{chart:M})})}onButtonNavKbdArrowKey(O,$){const M=O.response,S=this.keyCodes,k=this.chart,G=k.options.accessibility.keyboardNavigation.wrapAround;return $=$===S.left||$===S.up?-1:1,k.highlightRangeSelectorButton(k.highlightedRangeSelectorItemIx+$)?M.success:G?(O.init($),M.success):M[0<$?"next":"prev"]}onButtonNavKbdClick(O){O=O.response;const $=this.chart;return $.oldRangeSelectorItemState!==3&&this.fakeClickEvent($.rangeSelector.buttons[$.highlightedRangeSelectorItemIx].element),O.success}onAfterBtnClick(){var O=this.chart;const $=Q(O.xAxis[0]);(O=O.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:O,axisRangeDescription:$}))&&this.announcer.announce(O)}onInputKbdMove(O){const $=this.chart;var M=$.rangeSelector;const S=$.highlightedInputRangeIx=($.highlightedInputRangeIx||0)+O;if(1<S||0>S){if($.accessibility)return $.accessibility.keyboardNavigation.exiting=!0,$.accessibility.keyboardNavigation.tabindexContainer.focus(),$.accessibility.keyboardNavigation.move(O)}else M&&(O=M[S?"maxDateBox":"minDateBox"],M=M[S?"maxInput":"minInput"],O&&M&&$.setFocusToElement(O,M));return!0}onInputNavInit(O){const $=this;var M=this.chart;const S=0<O?0:1;var k=M.rangeSelector;const G=k&&k[S?"maxDateBox":"minDateBox"];if(O=k&&k.minInput,k=k&&k.maxInput,M.highlightedInputRangeIx=S,G&&O&&k){M.setFocusToElement(G,S?k:O),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),M=ie=>{(ie.which||ie.keyCode)===this.keyCodes.tab&&$.onInputKbdMove(ie.shiftKey?-1:1)&&(ie.preventDefault(),ie.stopPropagation())};const U=z(O,"keydown",M),C=z(k,"keydown",M);this.removeInputKeydownHandler=()=>{U(),C()}}}onInputNavTerminate(){const O=this.chart.rangeSelector||{};O.maxInput&&O.hideInput("max"),O.minInput&&O.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){const O=this.chart,$=O.rangeSelector,M=$&&$.dropdown;$&&M&&(O.setFocusToElement($.buttonGroup,M),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=z(M,"keydown",S=>{const k=O.accessibility;(S.which||S.keyCode)===this.keyCodes.tab&&(S.preventDefault(),S.stopPropagation(),k&&(k.keyboardNavigation.tabindexContainer.focus(),k.keyboardNavigation.move(S.shiftKey?-1:1)))}))}getRangeSelectorButtonNavigation(){const O=this.chart,$=this.keyCodes,M=this;return new n(O,{keyCodeMap:[[[$.left,$.right,$.up,$.down],function(S){return M.onButtonNavKbdArrowKey(this,S)}],[[$.enter,$.space],function(){return M.onButtonNavKbdClick(this)}]],validate:function(){return!!(O.rangeSelector&&O.rangeSelector.buttons&&O.rangeSelector.buttons.length)},init:function(S){var k=O.rangeSelector;k&&k.hasVisibleDropdown?M.initDropdownNav():k&&(k=k.buttons.length-1,O.highlightRangeSelectorButton(0<S?0:k))},terminate:function(){M.removeDropdownKeydownHandler&&(M.removeDropdownKeydownHandler(),delete M.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){const O=this.chart,$=this;return new n(O,{keyCodeMap:[],validate:function(){return!!(O.rangeSelector&&O.rangeSelector.inputGroup&&O.rangeSelector.inputGroup.element.style.visibility!=="hidden"&&O.options.rangeSelector.inputEnabled!==!1&&O.rangeSelector.minInput&&O.rangeSelector.maxInput)},init:function(M){$.onInputNavInit(M)},terminate:function(){$.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}return function(I){function O(S){const k=this.rangeSelector&&this.rangeSelector.buttons||[],G=this.highlightedRangeSelectorItemIx,U=this.rangeSelector&&this.rangeSelector.selected;return typeof G<"u"&&k[G]&&G!==U&&k[G].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=S,k[S]?(this.setFocusToElement(k[S].box,k[S].element),S!==U&&(this.oldRangeSelectorItemState=k[S].state,k[S].setState(1)),!0):!1}function $(){const S=this.chart.accessibility;if(S&&S.components.rangeSelector)return S.components.rangeSelector.onAfterBtnClick()}const M=[];I.compose=function(S,k){T.pushUnique(M,S)&&(S.prototype.highlightRangeSelectorButton=O),T.pushUnique(M,k)&&z(l,"afterBtnClick",$)}}(K||(K={})),K}),r(t,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[t["Core/Utilities.js"]],function(l){const{addEvent:c,merge:d}=l;var m;return function(n){function T(I){d(!0,I,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function V(I){return I.marker.states&&I.marker.states.normal&&I.marker.states.normal.opacity}function Q(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),this._hasPointMarkers&&this.points&&this.points.length&&this.points.forEach(I=>{I.graphic&&(I.graphic[I.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),I.graphic[I.hasForcedA11yMarker===!1?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function z(I){this.resetA11yMarkerOptions=d(I.options.marker||{},this.userOptions.marker||{})}function W(){var I=this.options,O=(this.options.accessibility&&this.options.accessibility.enabled)!==!1;if((O=this.chart.options.accessibility.enabled&&O)&&(O=this.chart.options.accessibility,O=this.points.length<O.series.pointDescriptionEnabledThreshold||O.series.pointDescriptionEnabledThreshold===!1),O){if(I.marker&&I.marker.enabled===!1&&(this.a11yMarkersForced=!0,T(this.options)),this._hasPointMarkers&&this.points&&this.points.length)for(I=this.points.length;I--;){O=this.points[I];const M=O.options;var $=O.hasForcedA11yMarker;delete O.hasForcedA11yMarker,M.marker&&($=$&&V(M)===0,M.marker.enabled&&!$?(d(!0,M.marker,{states:{normal:{opacity:V(M)||1}}}),O.hasForcedA11yMarker=!1):M.marker.enabled===!1&&(T(M),O.hasForcedA11yMarker=!0))}}else this.a11yMarkersForced&&(delete this.a11yMarkersForced,(I=this.resetA11yMarkerOptions)&&this.update({marker:{enabled:I.enabled,states:{normal:{opacity:I.states&&I.states.normal&&I.states.normal.opacity}}}}),delete this.resetA11yMarkerOptions)}const K=[];n.compose=function(I){l.pushUnique(K,I)&&(c(I,"afterSetOptions",z),c(I,"render",W),c(I,"afterRender",Q))}}(m||(m={})),m}),r(t,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(l,c,d,m,n,T,V,Q){function z(N){const F=N.index,H=N.series.points;let E=H.length;if(H[F]!==N){for(;E--;)if(H[E]===N)return E}else return F}function W(N){const F=N.chart.options.accessibility.keyboardNavigation.seriesNavigation,H=N.options.accessibility||{},E=H.keyboardNavigation;return E&&E.enabled===!1||H.enabled===!1||N.options.enableMouseTracking===!1||!N.visible||F.pointNavigationEnabledThreshold&&F.pointNavigationEnabledThreshold<=N.points.length}function K(N){const F=N.series.chart.options.accessibility,H=N.options.accessibility&&N.options.accessibility.enabled===!1;return N.isNull&&F.keyboardNavigation.seriesNavigation.skipNullPoints||N.visible===!1||N.isInside===!1||H||W(N.series)}function I(N){N=N.series||[];const F=N.length;for(let E=0;E<F;++E)if(!W(N[E])){e:{var H=N[E].points||[];const L=H.length;for(let f=0;f<L;++f)if(!K(H[f])){H=H[f];break e}H=null}if(H)return H}return null}function O(N){let F=N.series.length,H=!1;for(;F--&&(N.highlightedPoint=N.series[F].points[N.series[F].points.length-1],!(H=N.series[F].highlightNextValidPoint())););return H}function $(N){return delete N.highlightedPoint,(N=I(N))?N.highlight():!1}const{seriesTypes:M}=d,{doc:S}=m,{defined:k,fireEvent:G}=n,{getPointFromXY:U,getSeriesFromName:C,scrollToPoint:ie}=Q;class J{constructor(F,H){this.keyCodes=H,this.chart=F}init(){const F=this,H=this.chart,E=this.eventProvider=new V;E.addEvent(c,"destroy",function(){return F.onSeriesDestroy(this)}),E.addEvent(H,"afterApplyDrilldown",function(){{const L=I(this);L&&L.highlight(!1)}}),E.addEvent(H,"drilldown",function(L){L=L.point;const f=L.series;F.lastDrilledDownPoint={x:L.x,y:L.y,seriesName:f?f.name:""}}),E.addEvent(H,"drillupall",function(){setTimeout(function(){F.onDrillupAll()},10)}),E.addEvent(l,"afterSetState",function(){const L=this.graphic&&this.graphic.element,f=S.activeElement;var y=f&&f.getAttribute("class");y=y&&-1<y.indexOf("highcharts-a11y-proxy-button"),H.highlightedPoint===this&&f!==L&&!y&&L&&L.focus&&L.focus()})}onDrillupAll(){const F=this.lastDrilledDownPoint,H=this.chart,E=F&&C(H,F.seriesName);let L;F&&E&&k(F.x)&&k(F.y)&&(L=U(E,F.x,F.y)),L=L||I(H),H.container&&H.container.focus(),L&&L.highlight&&L.highlight(!1)}getKeyboardNavigationHandler(){const F=this,H=this.keyCodes,E=this.chart,L=E.inverted;return new T(E,{keyCodeMap:[[L?[H.up,H.down]:[H.left,H.right],function(f){return F.onKbdSideways(this,f)}],[L?[H.left,H.right]:[H.up,H.down],function(f){return F.onKbdVertical(this,f)}],[[H.enter,H.space],function(f,y){return(f=E.highlightedPoint)&&(y.point=f,G(f.series,"click",y),f.firePointEvent("click")),this.response.success}],[[H.home],function(){return $(E),this.response.success}],[[H.end],function(){return O(E),this.response.success}],[[H.pageDown,H.pageUp],function(f){return E.highlightAdjacentSeries(f===H.pageDown),this.response.success}]],init:function(){return F.onHandlerInit(this)},validate:function(){return!!I(E)},terminate:function(){return F.onHandlerTerminate()}})}onKbdSideways(F,H){const E=this.keyCodes;return this.attemptHighlightAdjacentPoint(F,H===E.right||H===E.down)}onHandlerInit(F){const H=this.chart;return H.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&H.highlightedPoint?H.highlightedPoint.highlight():$(H),F.response.success}onKbdVertical(F,H){const E=this.chart;var L=this.keyCodes;return H=H===L.down||H===L.right,L=E.options.accessibility.keyboardNavigation.seriesNavigation,L.mode&&L.mode==="serialize"?this.attemptHighlightAdjacentPoint(F,H):(E[E.highlightedPoint&&E.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries"](H),F.response.success)}onHandlerTerminate(){const F=this.chart,H=F.options.accessibility.keyboardNavigation;F.tooltip&&F.tooltip.hide(0);const E=F.highlightedPoint&&F.highlightedPoint.series;E&&E.onMouseOut&&E.onMouseOut(),F.highlightedPoint&&F.highlightedPoint.onMouseOut&&F.highlightedPoint.onMouseOut(),H.seriesNavigation.rememberPointFocus||delete F.highlightedPoint}attemptHighlightAdjacentPoint(F,H){const E=this.chart,L=E.options.accessibility.keyboardNavigation.wrapAround;return E.highlightAdjacentPoint(H)||L&&(H?$(E):O(E))?F.response.success:F.response[H?"next":"prev"]}onSeriesDestroy(F){const H=this.chart;H.highlightedPoint&&H.highlightedPoint.series===F&&(delete H.highlightedPoint,H.focusElement&&H.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}return function(N){function F(D){var X=this.series;const te=this.highlightedPoint;var q=te&&z(te)||0;const ce=te&&te.series.points||[];var fe=this.series&&this.series[this.series.length-1];if(fe=fe&&fe.points&&fe.points[fe.points.length-1],!X[0]||!X[0].points)return!1;if(te){if(X=X[te.series.index+(D?1:-1)],q=ce[q+(D?1:-1)],!q&&X&&(q=X.points[D?0:X.points.length-1]),!q)return!1}else q=D?X[0].points[0]:fe;return K(q)?(X=q.series,W(X)?this.highlightedPoint=D?X.points[X.points.length-1]:X.points[0]:this.highlightedPoint=q,this.highlightAdjacentPoint(D)):q.highlight()}function H(D){const X=this.highlightedPoint;let te=1/0,q;return!k(X.plotX)||!k(X.plotY)?!1:(this.series.forEach(ce=>{W(ce)||ce.points.forEach(fe=>{if(k(fe.plotY)&&k(fe.plotX)&&fe!==X){var we=fe.plotY-X.plotY,Z=Math.abs(fe.plotX-X.plotX);Z=Math.abs(we)*Math.abs(we)+Z*Z*4,ce.yAxis&&ce.yAxis.reversed&&(we*=-1),!(0>=we&&D||0<=we&&!D||5>Z||K(fe))&&Z<te&&(te=Z,q=fe)}})}),q?q.highlight():!1)}function E(D){const X=this.highlightedPoint;var te=this.series&&this.series[this.series.length-1],q=te&&te.points&&te.points[te.points.length-1];return this.highlightedPoint?(te=this.series[X.series.index+(D?-1:1)],!te||(q=L(X,te,4),!q)?!1:W(te)?(q.highlight(),D=this.highlightAdjacentSeries(D),D||(X.highlight(),!1)):(q.highlight(),q.series.highlightNextValidPoint())):(te=D?this.series&&this.series[0]:te,(q=D?te&&te.points&&te.points[0]:q)?q.highlight():!1)}function L(D,X,te,q){let ce=1/0,fe,we=X.points.length;const Z=ue=>!(k(ue.plotX)&&k(ue.plotY));if(!Z(D)){for(;we--;){var se=X.points[we];Z(se)||(se=(D.plotX-se.plotX)*(D.plotX-se.plotX)*(te||1)+(D.plotY-se.plotY)*(D.plotY-se.plotY)*(q||1),se<ce&&(ce=se,fe=we))}return k(fe)?X.points[fe]:void 0}}function f(D=!0){const X=this.series.chart;return!this.isNull&&D?this.onMouseOver():X.tooltip&&X.tooltip.hide(0),ie(this),this.graphic&&(X.setFocusToElement(this.graphic),!D&&X.focusElement&&X.focusElement.removeFocusBorder()),X.highlightedPoint=this,this}function y(){var D=this.chart.highlightedPoint,X=(D&&D.series)===this?z(D):0;D=this.points;const te=D.length;if(D&&te){for(let q=X;q<te;++q)if(!K(D[q]))return D[q].highlight();for(;0<=X;--X)if(!K(D[X]))return D[X].highlight()}return!1}const b=[];N.compose=function(D,X,te){n.pushUnique(b,D)&&(D=D.prototype,D.highlightAdjacentPoint=F,D.highlightAdjacentPointVertical=H,D.highlightAdjacentSeries=E),n.pushUnique(b,X)&&(X.prototype.highlight=f),n.pushUnique(b,te)&&(X=te.prototype,X.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(q=>{M[q]&&(M[q].prototype.keyboardMoveVertical=!1)}),X.highlightNextValidPoint=y)}}(J||(J={})),J}),r(t,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],t["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"]],function(l,c,d,m,n,T){const{hideSeriesFromAT:V}=c,{describeSeries:Q}=n;class z extends l{static compose(K,I,O){m.compose(O),d.compose(O),T.compose(K,I,O)}init(){this.newDataAnnouncer=new m(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new T(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){const K=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",function(){this.chart===K.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(K){K.labelBySeries&&K.labelBySeries.attr("aria-hidden",!0)})})}onChartRender(){this.chart.series.forEach(function(K){(K.options.accessibility&&K.options.accessibility.enabled)!==!1&&K.visible?Q(K):V(K)})}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}}return z}),r(t,"Accessibility/Components/ZoomComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(l,c,d,m,n){const{unhideChartElementFromAT:T}=c,{getFakeMouseEvent:V}=d,{attr:Q,pick:z}=n;class W extends l{constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){const I=this,O=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach($=>{I.addEvent(O,$,function(){I.updateProxyOverlays()})})}onChartUpdate(){const I=this.chart,O=this;I.mapNavigation&&I.mapNavigation.navButtons.forEach(($,M)=>{T(I,$.element),O.setMapNavButtonAttrs($.element,"accessibility.zoom.mapZoom"+(M?"Out":"In"))})}setMapNavButtonAttrs(I,O){const $=this.chart;O=$.langFormat(O,{chart:$}),Q(I,{tabindex:-1,role:"button","aria-label":O})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){const I=this.chart;this.proxyProvider.clearGroup("zoom"),I.resetZoomButton&&this.createZoomProxyButton(I.resetZoomButton,"resetZoomProxyButton",I.langFormat("accessibility.zoom.resetZoomButton",{chart:I})),I.drillUpButton&&I.breadcrumbs&&I.breadcrumbs.list&&this.createZoomProxyButton(I.drillUpButton,"drillUpProxyButton",I.langFormat("accessibility.drillUpButton",{chart:I,buttonText:I.breadcrumbs.getButtonText(I.breadcrumbs.list[I.breadcrumbs.list.length-1])}))}createZoomProxyButton(I,O,$){this[O]=this.proxyProvider.addProxyElement("zoom",{click:I},{"aria-label":$,tabindex:-1})}getMapZoomNavigation(){const I=this.keyCodes,O=this.chart,$=this;return new m(O,{keyCodeMap:[[[I.up,I.down,I.left,I.right],function(M){return $.onMapKbdArrow(this,M)}],[[I.tab],function(M,S){return $.onMapKbdTab(this,S)}],[[I.space,I.enter],function(){return $.onMapKbdClick(this)}]],validate:function(){return!!(O.mapView&&O.mapNavigation&&O.mapNavigation.navButtons.length)},init:function(M){return $.onMapNavInit(M)}})}onMapKbdArrow(I,O){var $=this.chart,M=this.keyCodes;const S=$.container;var k=O===M.up||O===M.down;return O=(k?$.plotHeight:$.plotWidth)/10*(O===M.left||O===M.up?1:-1),M=10*Math.random(),$={x:S.offsetLeft+$.plotLeft+$.plotWidth/2+M,y:S.offsetTop+$.plotTop+$.plotHeight/2+M},k=k?{x:$.x,y:$.y+O}:{x:$.x+O,y:$.y},[V("mousedown",$),V("mousemove",k),V("mouseup",k)].forEach(G=>S.dispatchEvent(G)),I.response.success}onMapKbdTab(I,O){const $=this.chart;I=I.response;const M=(O=O.shiftKey)&&!this.focusedMapNavButtonIx||!O&&this.focusedMapNavButtonIx;return $.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),M?($.mapView&&$.mapView.zoomBy(),I[O?"prev":"next"]):(this.focusedMapNavButtonIx+=O?-1:1,O=$.mapNavigation.navButtons[this.focusedMapNavButtonIx],$.setFocusToElement(O.box,O.element),O.setState(2),I.success)}onMapKbdClick(I){return this.fakeClickEvent(this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element),I.response.success}onMapNavInit(I){const O=this.chart;var $=O.mapNavigation.navButtons[0];const M=O.mapNavigation.navButtons[1];$=0<I?$:M,O.setFocusToElement($.box,$.element),$.setState(2),this.focusedMapNavButtonIx=0<I?0:1}simpleButtonNavigation(I,O,$){const M=this.keyCodes,S=this,k=this.chart;return new m(k,{keyCodeMap:[[[M.tab,M.up,M.down,M.left,M.right],function(G,U){return this.response[G===M.tab&&U.shiftKey||G===M.left||G===M.up?"prev":"next"]}],[[M.space,M.enter],function(){const G=$(this,k);return z(G,this.response.success)}]],validate:function(){return k[I]&&k[I].box&&S[O].buttonElement},init:function(){k.setFocusToElement(k[I].box,S[O].buttonElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(I,O){O.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(I,O){return O.drillUp(),I.response.prev}),this.getMapZoomNavigation()]}}return W}),r(t,"Accessibility/HighContrastMode.js",[t["Core/Globals.js"]],function(l){const{doc:c,isMS:d,win:m}=l;return{isHighContrastModeActive:function(){var n=/(Edg)/.test(m.navigator.userAgent);if(m.matchMedia&&n)return m.matchMedia("(-ms-high-contrast: active)").matches;if(d&&m.getComputedStyle){n=c.createElement("div"),n.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",c.body.appendChild(n);const T=(n.currentStyle||m.getComputedStyle(n)).backgroundImage;return c.body.removeChild(n),T==="none"}return m.matchMedia&&m.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(n){n.highContrastModeActive=!0;const T=n.options.accessibility.highContrastTheme;n.update(T,!1),n.series.forEach(function(V){const Q=T.plotOptions[V.type]||{};V.update({color:Q.color||"windowText",colors:[Q.color||"windowText"],borderColor:Q.borderColor||"window"}),V.points.forEach(function(z){z.options&&z.options.color&&z.update({color:Q.color||"windowText",borderColor:Q.borderColor||"window"},!1)})}),n.redraw()}}}),r(t,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),r(t,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}}}}),r(t,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{ Also related to, #each(additionalAnnotationPoints)}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#plural(numPoints, points, point)}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#plural(numPoints, slices, slice)}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#plural(numPoints, points, point)}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#plural(numPoints, bubbles, bubble)}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each(names, -1) }and {names[-1]}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each(names, -1) }and {names[-1]}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bars, bar)}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#plural(series.points.length, bars, bar)}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bars, bar)}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#plural(series.points.length, bars, bar)}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, slices, slice)}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#plural(series.points.length, slices, slice)}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, points, point)}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#plural(series.points.length, points, point)}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, boxes, box)}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#plural(series.points.length, boxes, box)}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, areas, area)}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#plural(series.points.length, areas, area)}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#plural(series.points.length, bubbles, bubble)}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{Annotation: #each(annotations). }"}}}}),r(t,"Accessibility/Options/DeprecatedOptions.js",[t["Core/Utilities.js"]],function(l){function c(z,W,K){let I,O=0;for(;O<W.length-1;++O)I=W[O],z=z[I]=Q(z[I],{});z[W[W.length-1]]=K}function d(z,W,K,I){function O(S,k){return k.reduce(function(G,U){return G[U]},S)}const $=O(z.options,W),M=O(z.options,K);Object.keys(I).forEach(function(S){const k=$[S];typeof k<"u"&&(c(M,I[S],k),V(32,!1,z,{[W.join(".")+"."+S]:K.join(".")+"."+I[S].join(".")}))})}function m(z){const W=z.options.chart,K=z.options.accessibility||{};["description","typeDescription"].forEach(function(I){W[I]&&(K[I]=W[I],V(32,!1,z,{[`chart.${I}`]:`use accessibility.${I}`}))})}function n(z){z.axes.forEach(function(W){(W=W.options)&&W.description&&(W.accessibility=W.accessibility||{},W.accessibility.description=W.description,V(32,!1,z,{"axis.description":"use axis.accessibility.description"}))})}function T(z){const W={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};z.series.forEach(function(K){Object.keys(W).forEach(function(I){let O=K.options[I];I==="accessibility.pointDescriptionFormatter"&&(O=K.options.accessibility&&K.options.accessibility.pointDescriptionFormatter),typeof O<"u"&&(c(K.options,W[I],I==="skipKeyboardNavigation"?!O:O),V(32,!1,z,{[`series.${I}`]:"series."+W[I].join(".")}))})})}const{error:V,pick:Q}=l;return function(z){m(z),n(z),z.series&&T(z),d(z,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),d(z,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),d(z,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),r(t,"Accessibility/Accessibility.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/A11yI18n.js"],t["Accessibility/Components/ContainerComponent.js"],t["Accessibility/FocusBorder.js"],t["Accessibility/Components/InfoRegionsComponent.js"],t["Accessibility/KeyboardNavigation.js"],t["Accessibility/Components/LegendComponent.js"],t["Accessibility/Components/MenuComponent.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/ProxyProvider.js"],t["Accessibility/Components/RangeSelectorComponent.js"],t["Accessibility/Components/SeriesComponent/SeriesComponent.js"],t["Accessibility/Components/ZoomComponent.js"],t["Accessibility/HighContrastMode.js"],t["Accessibility/HighContrastTheme.js"],t["Accessibility/Options/A11yDefaults.js"],t["Accessibility/Options/LangDefaults.js"],t["Accessibility/Options/DeprecatedOptions.js"]],function(l,c,d,m,n,T,V,Q,z,W,K,I,O,$,M,S,k,G,U,C,ie){({defaultOptions:l}=l);const{doc:J}=c,{addEvent:N,extend:F,fireEvent:H,merge:E}=d,{removeElement:L}=m;class f{constructor(b){this.proxyProvider=this.keyboardNavigation=this.components=this.chart=void 0,this.init(b)}init(b){this.chart=b,J.addEventListener?(ie(b),this.proxyProvider=new O(this.chart),this.initComponents(),this.keyboardNavigation=new z(b,this.components)):(this.zombie=!0,this.components={},b.renderTo.setAttribute("aria-hidden",!0))}initComponents(){const b=this.chart,D=this.proxyProvider,X=b.options.accessibility;this.components={container:new T,infoRegions:new Q,legend:new W,chartMenu:new K,rangeSelector:new $,series:new M,zoom:new S},X.customComponents&&F(this.components,X.customComponents);const te=this.components;this.getComponentOrder().forEach(function(q){te[q].initBase(b,D),te[q].init()})}getComponentOrder(){if(!this.components)return[];if(!this.components.series)return Object.keys(this.components);const b=Object.keys(this.components).filter(D=>D!=="series");return["series"].concat(b)}update(){const b=this.components,D=this.chart;var X=D.options.accessibility;H(D,"beforeA11yUpdate"),D.types=this.getChartTypes(),X=X.keyboardNavigation.order,this.proxyProvider.updateGroupOrder(X),this.getComponentOrder().forEach(function(te){b[te].onChartUpdate(),H(D,"afterA11yComponentUpdate",{name:te,component:b[te]})}),this.keyboardNavigation.update(X),!D.highContrastModeActive&&k.isHighContrastModeActive()&&k.setHighContrastTheme(D),H(D,"afterA11yUpdate",{accessibility:this})}destroy(){const b=this.chart||{},D=this.components;Object.keys(D).forEach(function(X){D[X].destroy(),D[X].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),b.announcerContainer&&L(b.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),b.renderTo&&b.renderTo.setAttribute("aria-hidden",!0),b.focusElement&&b.focusElement.removeFocusBorder()}getChartTypes(){const b={};return this.chart.series.forEach(function(D){b[D.type]=1}),Object.keys(b)}}return function(y){function b(){this.accessibility&&this.accessibility.destroy()}function D(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());const fe=this.accessibility;fe&&!fe.zombie&&(fe.proxyProvider.updateProxyElementPositions(),fe.getComponentOrder().forEach(function(we){fe.components[we].onChartRender()}))}function X(fe){(fe=fe.options.accessibility)&&(fe.customComponents&&(this.options.accessibility.customComponents=fe.customComponents,delete fe.customComponents),E(!0,this.options.accessibility,fe),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function te(){let fe=this.accessibility;const we=this.options.accessibility;we&&we.enabled?fe&&!fe.zombie?fe.update():(this.accessibility=fe=new y(this),!fe.zombie&&fe.update()):fe?(fe.destroy&&fe.destroy(),delete this.accessibility):this.renderTo.setAttribute("aria-hidden",!0)}function q(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}const ce=[];y.i18nFormat=n.i18nFormat,y.compose=function(fe,we,Z,se,ue,ye){z.compose(fe),I.compose(se),W.compose(fe,we),K.compose(fe),M.compose(fe,Z,se),n.compose(fe),V.compose(fe,ue),ye&&$.compose(fe,ye),d.pushUnique(ce,fe)&&(fe.prototype.updateA11yEnabled=te,N(fe,"destroy",b),N(fe,"render",D),N(fe,"update",X),["addSeries","init"].forEach(Pe=>{N(fe,Pe,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(Pe=>{N(fe,Pe,function(){const ae=this.accessibility;ae&&!ae.zombie&&ae.update()})})),d.pushUnique(ce,Z)&&N(Z,"update",q),d.pushUnique(ce,se)&&["update","updatedData","remove"].forEach(Pe=>{N(se,Pe,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})})}}(f||(f={})),E(!0,l,U,{accessibility:{highContrastTheme:G},lang:C}),f}),r(t,"masters/modules/accessibility.src.js",[t["Core/Globals.js"],t["Accessibility/Accessibility.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(l,c,d,m,n,T,V){l.i18nFormat=c.i18nFormat,l.A11yChartUtilities=m,l.A11yHTMLUtilities=n,l.AccessibilityComponent=d,l.KeyboardNavigationHandler=T,l.SeriesAccessibilityDescriber=V,c.compose(l.Chart,l.Legend,l.Point,l.Series,l.SVGElement,l.RangeSelector)})})})(xG);const AA=Yw;AA(Bc);const bG={name:"spline",components:{Chart:pp.Chart},data(){return{chartOptions:{chart:{type:"spline",scrollablePlotArea:{minWidth:600,scrollPositionX:1}},title:{text:"Wind speed during two days",align:"left"},subtitle:{text:"13th & 14th of June, 2022 at two locations in Vik i Sogn, Norway",align:"left"},xAxis:{type:"datetime",labels:{overflow:"justify"}},yAxis:{title:{text:"Wind speed (m/s)"},minorGridLineWidth:0,gridLineWidth:0,alternateGridColor:null,plotBands:[{from:.3,to:1.5,color:"rgba(68, 170, 213, 0.1)",label:{text:"Light air",style:{color:"#606060"}}},{from:1.5,to:3.3,color:"rgba(0, 0, 0, 0)",label:{text:"Light breeze",style:{color:"#606060"}}},{from:3.3,to:5.5,color:"rgba(68, 170, 213, 0.1)",label:{text:"Gentle breeze",style:{color:"#606060"}}},{from:5.5,to:8,color:"rgba(0, 0, 0, 0)",label:{text:"Moderate breeze",style:{color:"#606060"}}},{from:8,to:11,color:"rgba(68, 170, 213, 0.1)",label:{text:"Fresh breeze",style:{color:"#606060"}}},{from:11,to:14,color:"rgba(0, 0, 0, 0)",label:{text:"Strong breeze",style:{color:"#606060"}}},{from:14,to:15,color:"rgba(68, 170, 213, 0.1)",label:{text:"High wind",style:{color:"#606060"}}}]},tooltip:{valueSuffix:" m/s"},plotOptions:{spline:{lineWidth:4,states:{hover:{lineWidth:5}},marker:{enabled:!1},pointInterval:36e5,pointStart:Date.UTC(2022,5,13,0,0,0)}},series:[{name:"Hestavollane",data:[4.5,5.1,4.4,3.7,4.2,3.7,4.3,4,5,4.9,4.8,4.6,3.9,3.8,2.7,3.1,2.6,3.3,3.8,4.1,1,1.9,3.2,3.8,4.2]},{name:"Vik",data:[.1,.1,.1,.2,.4,.4,.3,.4,.1,0,.2,.3,0,0,0,0,0,.1,.1,.1,0,.1,0,0,0]}],navigation:{menuItemStyle:{fontSize:"10px"}}}}}};function wG(e,t,r,l,c,d){const m=ar("Chart");return ki(),fh(m,{options:c.chartOptions,constructorType:"stockChart"},null,8,["options"])}const TG=Zr(bG,[["render",wG]]);MA(Bc);const SG={components:{highcharts:pp.Chart},props:{min:{type:Number,default:0},max:{type:Number,default:32},value:{type:Number,default:0},title:String},data(){return{options:{chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1,height:300},title:{text:""},pane:{startAngle:-120,endAngle:120,background:[{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#FFF"]]},borderWidth:0,outerRadius:"109%"},{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#FFF"]]},borderWidth:0,outerRadius:"107%"},{borderWidth:0,backgroundColor:"#E9EDED"},{backgroundColor:"#FFF",borderWidth:0,outerRadius:"105%",innerRadius:"103%"}]},yAxis:[{min:this.min,max:this.max,minorTickInterval:"auto",minorTickWidth:0,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickPixelInterval:30,tickWidth:0,tickPosition:"inside",tickLength:10,tickColor:"#666",labels:{step:2,distance:-50},title:{text:this.title,y:150},plotBands:[{from:0,to:this.max/8,color:"#576D7E",thickness:40},{from:this.max/8,to:this.max/8*2,color:"#34485C",thickness:40},{from:this.max/8*2,to:this.max/8*3,color:"#60C5B8",thickness:40},{from:this.max/8*3,to:this.max/8*4,color:"#25B39E",thickness:40},{from:this.max/8*4,to:this.max/8*5,color:"#FCD062",thickness:40},{from:this.max/8*5,to:this.max/8*6,color:"#F8B84E",thickness:40},{from:this.max/8*6,to:this.max/8*7,color:"#F17F53",thickness:40},{from:this.max/8*7,to:this.max/8*8,color:"#F05542",thickness:40}]}],series:[{name:this.title,data:[this.value],tooltip:{valueSuffix:" "}}]}}},methods:{},watch:{value:function(e,t){this.options.series[0].data=[e]}}};function EG(e,t,r,l,c,d){const m=ar("highcharts");return ki(),Fi("div",null,[Ji(m,{options:c.options},null,8,["options"])])}const CG=Zr(SG,[["render",EG]]),MG={props:{value:Number,title:String},components:{highcharts:pp.Chart},watch:{value:function(e,t){this.options.series[0].data=[e]}},data(){return{options:{chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1,height:300},title:{text:""},pane:{startAngle:0,endAngle:360,background:[{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#FFF"]]},borderWidth:0,outerRadius:"109%"},{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#FFF"]]},borderWidth:0,outerRadius:"107%"},{borderWidth:0,backgroundColor:"#E9EDED"},{backgroundColor:"#FFF",borderWidth:0,outerRadius:"105%",innerRadius:"103%"}]},yAxis:[{title:{text:this.title},min:1,max:360,lineColor:"#333",offset:-20,tickInterval:30,labels:{step:1,distance:5,rotation:"auto"}}],series:[{name:this.title,yAxis:0,data:[this.value],dial:{radius:"88%",baseWidth:10,baseLength:"0%",rearLength:0,borderWidth:1,borderColor:"#9A0000",backgroundColor:"#CC0000"},tooltip:{valueSuffix:"°"}}]}}}};function AG(e,t,r,l,c,d){const m=ar("highcharts");return ki(),Fi("div",null,[Ji(m,{options:c.options},null,8,["options"])])}const kA=Zr(MG,[["render",AG]]),kG={props:{url:String,fleet:Object},components:{SpeedoMeter:CG,Compass:kA},methods:{scaleBeafort(e){let t="";return e<=1?t="Calm":e>1&&e<3.9?t="Light Air":e>4&&e<6.9?t="Light Breeze":e>7&&e<10.9?t="Gentle breeze":e>11&&e<16.9?t="Moderate breeze":e>17&&e<21.9?t="Fresh breeze":e>22&&e<27.9?t="Strong breeze":e>28&&e<33.9?t="High wind":e>34&&e<40.9?t="Gale":e>41&&e<47.9?t="Strong/severe gale":e>48&&e<55.9?t="Storm":e>56&&e<63.9?t="Violent storm":t="Hurricane force",t}}},PG={class:"row"},DG={class:"col-3"},IG={class:"col-3"},LG={class:"col-3"},OG={class:"col-3"};function RG(e,t,r,l,c,d){const m=ar("speedo-meter"),n=ar("compass");return ki(),Fi("div",PG,[mt("div",DG,[Ji(m,{value:r.fleet.navigation.sog,max:32,title:"Speed (knot)"},null,8,["value"])]),mt("div",IG,[Ji(n,{value:r.fleet.navigation.cog,title:"Course (°)"},null,8,["value"])]),mt("div",LG,[Ji(m,{value:r.fleet.navigation.wind_speed,max:80,title:d.scaleBeafort(r.fleet.navigation.wind_speed)},null,8,["value","title"])]),mt("div",OG,[Ji(n,{value:r.fleet.navigation.wind_direction,title:"Wind Direction"},null,8,["value"])])])}const BG=Zr(kG,[["render",RG]]),Lo=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g;return function(l,c,d,m){if(arguments.length===1&&NG(l)==="string"&&!/\d/.test(l)&&(c=l,l=void 0),l=l||new Date,l instanceof Date||(l=new Date(l)),isNaN(l))throw TypeError("Invalid date");c=String(Lo.masks[c]||c||Lo.masks.default);var n=c.slice(0,4);(n==="UTC:"||n==="GMT:")&&(c=c.slice(4),d=!0,n==="GMT:"&&(m=!0));var T=d?"getUTC":"get",V=l[T+"Date"](),Q=l[T+"Day"](),z=l[T+"Month"](),W=l[T+"FullYear"](),K=l[T+"Hours"](),I=l[T+"Minutes"](),O=l[T+"Seconds"](),$=l[T+"Milliseconds"](),M=d?0:l.getTimezoneOffset(),S=PA(l),k=zG(l),G={d:V,dd:Nd(V),ddd:Lo.i18n.dayNames[Q],dddd:Lo.i18n.dayNames[Q+7],m:z+1,mm:Nd(z+1),mmm:Lo.i18n.monthNames[z],mmmm:Lo.i18n.monthNames[z+12],yy:String(W).slice(2),yyyy:W,h:K%12||12,hh:Nd(K%12||12),H:K,HH:Nd(K),M:I,MM:Nd(I),s:O,ss:Nd(O),l:Nd($,3),L:Nd(Math.round($/10)),t:K<12?Lo.i18n.timeNames[0]:Lo.i18n.timeNames[1],tt:K<12?Lo.i18n.timeNames[2]:Lo.i18n.timeNames[3],T:K<12?Lo.i18n.timeNames[4]:Lo.i18n.timeNames[5],TT:K<12?Lo.i18n.timeNames[6]:Lo.i18n.timeNames[7],Z:m?"GMT":d?"UTC":(String(l).match(t)||[""]).pop().replace(r,""),o:(M>0?"-":"+")+Nd(Math.floor(Math.abs(M)/60)*100+Math.abs(M)%60,4),S:["th","st","nd","rd"][V%10>3?0:(V%100-V%10!=10)*V%10],W:S,N:k};return c.replace(e,function(U){return U in G?G[U]:U.slice(1,U.length-1)})}}();Lo.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"};Lo.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]};function Nd(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function PA(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var l=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-l);var c=(t-r)/(864e5*7);return 1+Math.floor(c)}function zG(e){var t=e.getDay();return t===0&&(t=7),t}function NG(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}const DA={isSame:(e,t,r)=>{let l=new Date(e),c=new Date(t);return r==="date"&&(l.setHours(0,0,0,0),c.setHours(0,0,0,0)),l.getTime()===c.getTime()},daysInMonth:(e,t)=>new Date(e,t,0).getDate(),weekNumber:e=>PA(e),format:(e,t)=>Lo(e,t),nextMonth:e=>{let t=new Date(e.getTime());return t.setDate(1),t.setMonth(t.getMonth()+1),t},prevMonth:e=>{let t=new Date(e.getTime());return t.setDate(1),t.setMonth(t.getMonth()-1),t},validateDateRange:(e,t,r)=>{let l=new Date(r),c=new Date(t);return r&&e.getTime()>l.getTime()?l:t&&e.getTime()<c.getTime()?c:e},localeData:e=>({...{direction:"ltr",format:"mm/dd/yyyy",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:Lo.i18n.dayNames.slice(0,7).map(r=>r.substring(0,2)),monthNames:Lo.i18n.monthNames.slice(0,12),firstDay:0},...e}),yearMonth:e=>{let t=e.getMonth()+1;return e.getFullYear()+(t<10?"0":"")+t},isValidDate:e=>e instanceof Date&&!isNaN(e)},OT={props:{dateUtil:{type:[Object,String],default:"native"}},created(){this.$dateUtil=DA}},FG={mixins:[OT],name:"calendar",props:{monthDate:Date,localeData:Object,start:Date,end:Date,minDate:Date,maxDate:Date,showDropdowns:{type:Boolean,default:!1},showWeekNumbers:{type:Boolean,default:!1},dateFormat:{type:Function,default:null}},data(){let e=this.monthDate||this.start||new Date;return{currentMonthDate:e,year_text:e.getFullYear()}},methods:{prevMonthClick(){this.changeMonthDate(this.$dateUtil.prevMonth(this.currentMonthDate))},nextMonthClick(){this.changeMonthDate(this.$dateUtil.nextMonth(this.currentMonthDate))},changeMonthDate(e,t=!0){let r=this.$dateUtil.yearMonth(this.currentMonthDate);this.currentMonthDate=this.$dateUtil.validateDateRange(e,this.minDate,this.maxDate),t&&r!==this.$dateUtil.yearMonth(this.currentMonthDate)&&this.$emit("change-month",{month:this.currentMonthDate.getMonth()+1,year:this.currentMonthDate.getFullYear()}),this.checkYear()},dayClass(e){let t=new Date(e);t.setHours(0,0,0,0);let r=new Date(this.start);r.setHours(0,0,0,0);let l=new Date(this.end);l.setHours(0,0,0,0);let c={off:e.getMonth()+1!==this.month,weekend:e.getDay()===6||e.getDay()===0,today:t.setHours(0,0,0,0)==new Date().setHours(0,0,0,0),active:t.setHours(0,0,0,0)==new Date(this.start).setHours(0,0,0,0)||t.setHours(0,0,0,0)==new Date(this.end).setHours(0,0,0,0),"in-range":t>=r&&t<=l,"start-date":t.getTime()===r.getTime(),"end-date":t.getTime()===l.getTime(),disabled:this.minDate&&t.getTime()<this.minDate.getTime()||this.maxDate&&t.getTime()>this.maxDate.getTime()};return this.dateFormat?this.dateFormat(c,e):c},checkYear(){this.$refs.yearSelect!==document.activeElement&&this.$nextTick(()=>{this.year_text=this.monthDate.getFullYear()})}},computed:{monthName(){return this.locale.monthNames[this.currentMonthDate.getMonth()]},year:{get(){return this.year_text},set(e){this.year_text=e;let t=this.$dateUtil.validateDateRange(new Date(e,this.month,1),this.minDate,this.maxDate);this.$dateUtil.isValidDate(t)&&this.$emit("change-month",{month:t.getMonth(),year:t.getFullYear()})}},month:{get(){return this.currentMonthDate.getMonth()+1},set(e){let t=this.$dateUtil.validateDateRange(new Date(this.year,e-1,1),this.minDate,this.maxDate);this.$emit("change-month",{month:t.getMonth()+1,year:t.getFullYear()})}},calendar(){let e=this.month,t=this.currentMonthDate.getFullYear(),r=new Date(t,e-1,1),l=this.$dateUtil.prevMonth(r).getMonth()+1,c=this.$dateUtil.prevMonth(r).getFullYear(),d=new Date(c,e-1,0).getDate(),m=r.getDay(),n=[];for(let Q=0;Q<6;Q++)n[Q]=[];let T=d-m+this.locale.firstDay+1;T>d&&(T-=7),m===this.locale.firstDay&&(T=d-6);let V=new Date(c,l-1,T,12,0,0);for(let Q=0,z=0,W=0;Q<6*7;Q++,z++,V.setDate(V.getDate()+1))Q>0&&z%7===0&&(z=0,W++),n[W][z]=new Date(V.getTime());return n},months(){let e=this.locale.monthNames.map((t,r)=>({label:t,value:r}));if(this.maxDate&&this.minDate){let t=this.maxDate.getFullYear()-this.minDate.getFullYear();if(t<2){let r=[];if(t<1)for(let l=this.minDate.getMonth();l<=this.maxDate.getMonth();l++)r.push(l);else{for(let l=0;l<=this.maxDate.getMonth();l++)r.push(l);for(let l=this.minDate.getMonth();l<12;l++)r.push(l)}if(r.length>0)return e.filter(l=>r.find(c=>l.value===c)>-1)}}return e},locale(){return this.$dateUtil.localeData(this.localeData)}},watch:{monthDate(e){this.currentMonthDate.getTime()!==e.getTime()&&this.changeMonthDate(e,!1)}}},IA=e=>(Nf("data-v-66e2a2e7"),e=e(),Ff(),e),jG={class:"table-condensed"},UG=IA(()=>mt("span",null,null,-1)),GG=[UG],VG=["colspan"],$G={class:"row mx-1"},HG=["value"],WG=["colspan"],YG=IA(()=>mt("span",null,null,-1)),XG=[YG],qG={key:0,class:"week"},ZG={key:0,class:"week"},KG=["onClick","onMouseover"];function JG(e,t,r,l,c,d){return ki(),Fi("table",jG,[mt("thead",null,[mt("tr",null,[mt("th",{class:"prev available",onClick:t[0]||(t[0]=(...m)=>d.prevMonthClick&&d.prevMonthClick(...m)),tabindex:"0"},GG),r.showDropdowns?(ki(),Fi("th",{key:0,colspan:r.showWeekNumbers?6:5,class:"month"},[mt("div",$G,[Pa(mt("select",{"onUpdate:modelValue":t[1]||(t[1]=m=>d.month=m),class:"monthselect col"},[(ki(!0),Fi(Pr,null,pa(d.months,m=>(ki(),Fi("option",{key:m.value,value:m.value+1},Bn(m.label),9,HG))),128))],512),[[Vd,d.month]]),Pa(mt("input",{ref:"yearSelect",type:"number","onUpdate:modelValue":t[2]||(t[2]=m=>d.year=m),onBlur:t[3]||(t[3]=(...m)=>d.checkYear&&d.checkYear(...m)),class:"yearselect col"},null,544),[[Jd,d.year]])])],8,VG)):(ki(),Fi("th",{key:1,colspan:r.showWeekNumbers?6:5,class:"month"},Bn(d.monthName)+" "+Bn(d.year),9,WG)),mt("th",{class:"next available",onClick:t[4]||(t[4]=(...m)=>d.nextMonthClick&&d.nextMonthClick(...m)),tabindex:"0"},XG)])]),mt("tbody",null,[mt("tr",null,[r.showWeekNumbers?(ki(),Fi("th",qG,Bn(d.locale.weekLabel),1)):yr("",!0),(ki(!0),Fi(Pr,null,pa(d.locale.daysOfWeek,m=>(ki(),Fi("th",{key:m},Bn(m),1))),128))]),(ki(!0),Fi(Pr,null,pa(d.calendar,(m,n)=>(ki(),Fi("tr",{key:n},[r.showWeekNumbers&&(n%7||n===0)?(ki(),Fi("td",ZG,Bn(e.$dateUtil.weekNumber(m[0])),1)):yr("",!0),(ki(!0),Fi(Pr,null,pa(m,(T,V)=>(ki(),Fi("td",{class:Us(d.dayClass(T)),onClick:Q=>e.$emit("dateClick",T),onMouseover:Q=>e.$emit("hoverDate",T),key:V},[hh(e.$slots,"date-slot",{date:T},()=>[gh(Bn(T.getDate()),1)],!0)],42,KG))),128))]))),128))])])}const QG=Zr(FG,[["render",JG],["__scopeId","data-v-66e2a2e7"]]),eV={props:{miniuteIncrement:{type:Number,default:5},hour24:{type:Boolean,default:!0},secondPicker:{type:Boolean,default:!1},currentTime:{default(){return new Date}},readonly:{type:Boolean,default:!1}},data(){let e=this.currentTime?this.currentTime:new Date,t=e.getHours();return{hour:this.hour24?t:t%12||12,minute:e.getMinutes()-e.getMinutes()%this.miniuteIncrement,second:e.getSeconds(),ampm:t<12?"AM":"PM"}},computed:{hours(){let e=[],t=this.hour24?24:12;for(let r=0;r<t;r++)e.push(this.hour24?r:r+1);return e},minutes(){let e=[],t=60;for(let r=0;r<t;r=r+this.miniuteIncrement)e.push(r);return e}},watch:{hour(){this.onChange()},minute(){this.onChange()},second(){this.onChange()},ampm(){this.onChange()}},methods:{formatNumber:e=>e<10?"0"+e.toString():e.toString(),getHour(){return this.hour24?this.hour:this.hour===12?this.ampm==="AM"?0:12:this.hour+(this.ampm==="PM"?12:0)},onChange(){this.$emit("update",{hours:this.getHour(),minutes:this.minute,seconds:this.second})}}},tV={class:"calendar-time"},iV=["disabled"],nV=["value"],rV=["disabled"],sV=["value"],oV=["disabled"],aV=["value"],lV=["disabled"],cV=mt("option",{value:"AM"},"AM",-1),hV=mt("option",{value:"PM"},"PM",-1),dV=[cV,hV];function uV(e,t,r,l,c,d){return ki(),Fi("div",tV,[Pa(mt("select",{"onUpdate:modelValue":t[0]||(t[0]=m=>c.hour=m),class:"hourselect form-control mr-1",disabled:r.readonly},[(ki(!0),Fi(Pr,null,pa(d.hours,m=>(ki(),Fi("option",{key:m,value:m},Bn(d.formatNumber(m)),9,nV))),128))],8,iV),[[Vd,c.hour]]),gh(" :"),Pa(mt("select",{"onUpdate:modelValue":t[1]||(t[1]=m=>c.minute=m),class:"minuteselect form-control ml-1",disabled:r.readonly},[(ki(!0),Fi(Pr,null,pa(d.minutes,m=>(ki(),Fi("option",{key:m,value:m},Bn(d.formatNumber(m)),9,sV))),128))],8,rV),[[Vd,c.minute]]),r.secondPicker?(ki(),Fi(Pr,{key:0},[gh(" :"),Pa(mt("select",{"onUpdate:modelValue":t[2]||(t[2]=m=>c.second=m),class:"secondselect form-control ml-1",disabled:r.readonly},[(ki(),Fi(Pr,null,pa(60,m=>mt("option",{key:m-1,value:m-1},Bn(d.formatNumber(m-1)),9,aV)),64))],8,oV),[[Vd,c.second]])],64)):yr("",!0),r.hour24?yr("",!0):Pa((ki(),Fi("select",{key:1,"onUpdate:modelValue":t[3]||(t[3]=m=>c.ampm=m),class:"ampmselect",disabled:r.readonly},dV,8,lV)),[[Vd,c.ampm]])])}const pV=Zr(eV,[["render",uV]]),fV={mixins:[OT],props:{ranges:Object,selected:Object,localeData:Object,alwaysShowCalendars:Boolean},data(){return{customRangeActive:!1}},methods:{clickRange(e){this.customRangeActive=!1,this.$emit("clickRange",e)},clickCustomRange(){this.customRangeActive=!0,this.$emit("showCustomRange")},range_class(e){return{active:e.selected===!0}}},computed:{listedRanges(){return this.ranges?Object.keys(this.ranges).map(e=>({label:e,value:this.ranges[e],selected:this.$dateUtil.isSame(this.selected.startDate,this.ranges[e][0])&&this.$dateUtil.isSame(this.selected.endDate,this.ranges[e][1])})):!1},selectedRange(){return this.listedRanges.find(e=>e.selected===!0)},showCustomRangeLabel(){return!this.alwaysShowCalendars}}},mV={class:"ranges"},gV={key:0},_V=["onClick","data-range-key"];function yV(e,t,r,l,c,d){return ki(),Fi("div",mV,[r.ranges?(ki(),Fi("ul",gV,[(ki(!0),Fi(Pr,null,pa(d.listedRanges,m=>(ki(),Fi("li",{onClick:n=>d.clickRange(m.value),"data-range-key":m.label,key:m.label,class:Us(d.range_class(m)),tabindex:"0"},Bn(m.label),11,_V))),128)),d.showCustomRangeLabel?(ki(),Fi("li",{key:0,class:Us({active:c.customRangeActive||!d.selectedRange}),onClick:t[0]||(t[0]=(...m)=>d.clickCustomRange&&d.clickCustomRange(...m)),tabindex:"0"},Bn(r.localeData.customRangeLabel),3)):yr("",!0)])):yr("",!0)])}const vV=Zr(fV,[["render",yV]]),xV={mounted(e,{instance:t}){if(t.appendToBody){const{height:r,top:l,left:c,width:d,right:m}=t.$refs.toggle.getBoundingClientRect();e.unbindPosition=t.calculatePosition(e,t,{width:d,top:window.scrollY+l+r,left:window.scrollX+c,right:m}),document.body.appendChild(e)}else t.$el.appendChild(e)},unmounted(e,{instance:t}){t.appendToBody&&(e.unbindPosition&&typeof e.unbindPosition=="function"&&e.unbindPosition(),e.parentNode&&e.parentNode.removeChild(e))}},bV={inheritAttrs:!1,components:{Calendar:QG,CalendarTime:pV,CalendarRanges:vV},mixins:[OT],directives:{appendToBody:xV},emits:["update:modelValue","toggle","hoverDate","startSelection","select","change-month","finishSelection"],props:{modelValue:{type:Object},minDate:{type:[String,Date],default(){return null}},maxDate:{type:[String,Date],default(){return null}},showWeekNumbers:{type:Boolean,default:!1},linkedCalendars:{type:Boolean,default:!0},singleDatePicker:{type:[Boolean,String],default:!1},showDropdowns:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},timePickerIncrement:{type:Number,default:5},timePicker24Hour:{type:Boolean,default:!0},timePickerSeconds:{type:Boolean,default:!1},autoApply:{type:Boolean,default:!1},localeData:{type:Object,default(){return{}}},dateRange:{type:[Object],default:null,required:!0},ranges:{type:[Object,Boolean],default(){let e=new Date;e.setHours(0,0,0,0);let t=new Date;t.setHours(11,59,59,999);let r=new Date;r.setDate(e.getDate()-1),r.setHours(0,0,0,0);let l=new Date;l.setDate(e.getDate()-1),l.setHours(11,59,59,999);let c=new Date(e.getFullYear(),e.getMonth(),1),d=new Date(e.getFullYear(),e.getMonth()+1,0,11,59,59,999);return{Today:[e,t],Yesterday:[r,l],"This month":[c,d],"This year":[new Date(e.getFullYear(),0,1),new Date(e.getFullYear(),11,31,11,59,59,999)],"Last month":[new Date(e.getFullYear(),e.getMonth()-1,1),new Date(e.getFullYear(),e.getMonth(),0,11,59,59,999)]}}},opens:{type:String,default:"center"},dateFormat:Function,alwaysShowCalendars:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},controlContainerClass:{type:[Object,String],default:"form-control reportrange-text"},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(e,t,{width:r,top:l,left:c,right:d}){t.opens==="center"?e.style.left=c+r/2+"px":t.opens==="left"?e.style.right=window.innerWidth-d+"px":t.opens==="right"&&(e.style.left=c+"px"),e.style.top=l+"px"}},closeOnEsc:{type:Boolean,default:!0},readonly:{type:Boolean}},data(){const e=DA;let t={locale:e.localeData({...this.localeData})},r=this.dateRange.startDate||null,l=this.dateRange.endDate||null;if(t.monthDate=r?new Date(r):new Date,t.nextMonthDate=e.nextMonth(t.monthDate),t.start=r?new Date(r):null,this.singleDatePicker&&this.singleDatePicker!=="range"?t.end=t.start:t.end=l?new Date(l):null,t.in_selection=!1,t.open=!1,t.showCustomRangeCalendars=!1,t.locale.firstDay!==0){let c=t.locale.firstDay,d=[...t.locale.daysOfWeek];for(;c>0;)d.push(d.shift()),c--;t.locale.daysOfWeek=d}return t},methods:{dateFormatFn(e,t){let r=new Date(t);r.setHours(0,0,0,0);let l=new Date(this.start);l.setHours(0,0,0,0);let c=new Date(this.end);return c.setHours(0,0,0,0),e["in-range"]=r>=l&&r<=c,this.dateFormat?this.dateFormat(e,t):e},changeLeftMonth(e){let t=new Date(e.year,e.month-1,1);this.monthDate=t,(this.linkedCalendars||this.$dateUtil.yearMonth(this.monthDate)>=this.$dateUtil.yearMonth(this.nextMonthDate))&&(this.nextMonthDate=this.$dateUtil.validateDateRange(this.$dateUtil.nextMonth(t),this.minDate,this.maxDate),(!this.singleDatePicker||this.singleDatePicker==="range")&&this.$dateUtil.yearMonth(this.monthDate)===this.$dateUtil.yearMonth(this.nextMonthDate)&&(this.monthDate=this.$dateUtil.validateDateRange(this.$dateUtil.prevMonth(this.monthDate),this.minDate,this.maxDate))),this.$emit("change-month",this.monthDate,0)},changeRightMonth(e){let t=new Date(e.year,e.month-1,1);this.nextMonthDate=t,(this.linkedCalendars||this.$dateUtil.yearMonth(this.nextMonthDate)<=this.$dateUtil.yearMonth(this.monthDate))&&(this.monthDate=this.$dateUtil.validateDateRange(this.$dateUtil.prevMonth(t),this.minDate,this.maxDate),this.$dateUtil.yearMonth(this.monthDate)===this.$dateUtil.yearMonth(this.nextMonthDate)&&(this.nextMonthDate=this.$dateUtil.validateDateRange(this.$dateUtil.nextMonth(this.nextMonthDate),this.minDate,this.maxDate))),this.$emit("change-month",this.monthDate,1)},normalizeDatetime(e,t){let r=new Date(e);return this.timePicker&&t&&(r.setHours(t.getHours()),r.setMinutes(t.getMinutes()),r.setSeconds(t.getSeconds()),r.setMilliseconds(t.getMilliseconds())),r},dateClick(e){if(this.readonly)return!1;this.in_selection?(this.in_selection=!1,this.end=this.normalizeDatetime(e,this.end),this.end<this.start&&(this.in_selection=!0,this.start=this.normalizeDatetime(e,this.start),this.$emit("startSelection",this.start)),this.in_selection||(this.$emit("finishSelection",this.end),this.onSelect(),this.autoApply&&this.clickedApply())):(this.start=this.normalizeDatetime(e,this.start),this.end=this.normalizeDatetime(e,this.end),!this.singleDatePicker||this.singleDatePicker==="range"?(this.in_selection=!0,this.$emit("startSelection",this.start)):(this.onSelect(),this.autoApply&&this.clickedApply()))},hoverDate(e){if(this.readonly)return!1;let t=this.normalizeDatetime(e,this.end);this.in_selection&&t>=this.start&&(this.end=t),this.$emit("hoverDate",e)},onClickPicker(){this.disabled||this.togglePicker(null,!0)},togglePicker(e,t){typeof e=="boolean"?this.open=e:this.open=!this.open,t===!0&&this.$emit("toggle",this.open,this.togglePicker)},clickedApply(){this.togglePicker(!1,!0),this.$emit("update:modelValue",{startDate:this.start,endDate:this.singleDatePicker&&this.singleDatePicker!=="range"?this.start:this.end})},clickCancel(){if(this.open){let e=this.dateRange.startDate,t=this.dateRange.endDate;this.start=e?new Date(e):null,this.end=t?new Date(t):null,this.in_selection=!1,this.togglePicker(!1,!0)}},onSelect(){this.$emit("select",{startDate:this.start,endDate:this.end})},clickAway(e){e&&e.target&&!this.$el.contains(e.target)&&this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&this.clickCancel()},clickRange(e){this.in_selection=!1,this.$dateUtil.isValidDate(e[0])&&this.$dateUtil.isValidDate(e[1])?(this.start=this.$dateUtil.validateDateRange(new Date(e[0]),this.minDate,this.maxDate),this.end=this.$dateUtil.validateDateRange(new Date(e[1]),this.minDate,this.maxDate),this.changeLeftMonth({month:this.start.getMonth()+1,year:this.start.getFullYear()}),this.linkedCalendars===!1&&this.changeRightMonth({month:this.end.getMonth()+1,year:this.end.getFullYear()})):(this.start=null,this.end=null),this.onSelect(),this.autoApply&&this.clickedApply()},onUpdateStartTime(e){let t=new Date(this.start);t.setHours(e.hours),t.setMinutes(e.minutes),t.setSeconds(e.seconds),this.start=this.$dateUtil.validateDateRange(t,this.minDate,this.maxDate),this.autoApply&&this.$emit("update:modelValue",{startDate:this.start,endDate:this.singleDatePicker&&this.singleDatePicker!=="range"?this.start:this.end})},onUpdateEndTime(e){let t=new Date(this.end);t.setHours(e.hours),t.setMinutes(e.minutes),t.setSeconds(e.seconds),this.end=this.$dateUtil.validateDateRange(t,this.minDate,this.maxDate),this.autoApply&&this.$emit("update:modelValue",{startDate:this.start,endDate:this.end})},handleEscape(e){this.open&&e.keyCode===27&&this.closeOnEsc&&this.clickCancel()}},computed:{showRanges(){return this.ranges!==!1&&!this.readonly},showCalendars(){return this.alwaysShowCalendars||this.showCustomRangeCalendars},startText(){return this.start===null?"":this.$dateUtil.format(this.start,this.locale.format)},endText(){return this.end===null?"":this.$dateUtil.format(this.end,this.locale.format)},rangeText(){let e=this.startText;return(!this.singleDatePicker||this.singleDatePicker==="range")&&(e+=this.locale.separator+this.endText),e},min(){return this.minDate?new Date(this.minDate):null},max(){return this.maxDate?new Date(this.maxDate):null},pickerStyles(){return{"show-calendar":this.open||this.opens==="inline","show-ranges":this.showRanges,"show-weeknumbers":this.showWeekNumbers,single:this.singleDatePicker,["opens"+this.opens]:!0,linked:this.linkedCalendars,"hide-calendars":!this.showCalendars}},isClear(){return!this.dateRange.startDate||!this.dateRange.endDate},isDirty(){let e=new Date(this.dateRange.startDate),t=new Date(this.dateRange.endDate);return!this.isClear&&(this.start.getTime()!==e.getTime()||this.end.getTime()!==t.getTime())}},watch:{minDate(){let e=this.$dateUtil.validateDateRange(this.monthDate,this.minDate||new Date,this.maxDate);this.changeLeftMonth({year:e.getFullYear(),month:e.getMonth()+1})},maxDate(){let e=this.$dateUtil.validateDateRange(this.nextMonthDate,this.minDate,this.maxDate||new Date);this.changeRightMonth({year:e.getFullYear(),month:e.getMonth()+1})},"dateRange.startDate"(e){this.$dateUtil.isValidDate(new Date(e))&&(this.start=e&&!this.isClear&&this.$dateUtil.isValidDate(new Date(e))?new Date(e):null,this.isClear?(this.start=null,this.end=null):(this.start=new Date(this.dateRange.startDate),this.end=new Date(this.dateRange.endDate)))},"dateRange.endDate"(e){this.$dateUtil.isValidDate(new Date(e))&&(this.end=e&&!this.isClear?new Date(e):null,this.isClear?(this.start=null,this.end=null):(this.start=new Date(this.dateRange.startDate),this.end=new Date(this.dateRange.endDate)))},open:{handler(e){typeof document=="object"&&this.$nextTick(()=>{e?document.body.addEventListener("click",this.clickAway):document.body.removeEventListener("click",this.clickAway),e?document.addEventListener("keydown",this.handleEscape):document.removeEventListener("keydown",this.handleEscape),!this.alwaysShowCalendars&&this.ranges&&(this.showCustomRangeCalendars=!Object.keys(this.ranges).find(t=>this.$dateUtil.isSame(this.start,this.ranges[t][0],"date")&&this.$dateUtil.isSame(this.end,this.ranges[t][1],"date")))})},immediate:!0}}},LA=e=>(Nf("data-v-577c3804"),e=e(),Ff(),e),wV=LA(()=>mt("i",{class:"glyphicon glyphicon-calendar fa fa-calendar"},null,-1)),TV=LA(()=>mt("b",{class:"caret"},null,-1)),SV={class:"calendars"},EV={key:1,class:"calendars-container"},CV={class:"calendar-table"},MV={key:0,class:"drp-calendar col right"},AV={class:"calendar-table"},kV={key:0,class:"drp-buttons"},PV={key:0,class:"drp-selected"},DV=["disabled"];function IV(e,t,r,l,c,d){const m=ar("calendar-ranges"),n=ar("calendar"),T=ar("calendar-time"),V=nx("append-to-body");return ki(),Fi("div",{class:Us(["vue-daterange-picker",{inline:r.opens==="inline"}])},[mt("div",{class:Us(r.controlContainerClass),onClick:t[0]||(t[0]=(...Q)=>d.onClickPicker&&d.onClickPicker(...Q)),ref:"toggle"},[hh(e.$slots,"input",{startDate:e.start,endDate:e.end,ranges:r.ranges,rangeText:d.rangeText},()=>[wV,gh("  "),mt("span",null,Bn(d.rangeText),1),TV],!0)],2),Ji($1,{name:"slide-fade",mode:"out-in"},{default:js(()=>[e.open||r.opens==="inline"?Pa((ki(),Fi("div",{key:0,class:Us(["daterangepicker ltr",d.pickerStyles]),ref:"dropdown"},[hh(e.$slots,"header",{rangeText:d.rangeText,locale:e.locale,clickCancel:d.clickCancel,clickApply:d.clickedApply,in_selection:e.in_selection,autoApply:r.autoApply},void 0,!0),mt("div",SV,[d.showRanges?hh(e.$slots,"ranges",{key:0,startDate:e.start,endDate:e.end,ranges:r.ranges,clickRange:d.clickRange},()=>[Ji(m,{onClickRange:d.clickRange,onShowCustomRange:t[1]||(t[1]=Q=>e.showCustomRangeCalendars=!0),"always-show-calendars":r.alwaysShowCalendars,"locale-data":e.locale,ranges:r.ranges,selected:{startDate:e.start,endDate:e.end}},null,8,["onClickRange","always-show-calendars","locale-data","ranges","selected"])],!0):yr("",!0),d.showCalendars?(ki(),Fi("div",EV,[mt("div",{class:Us(["drp-calendar col left",{single:r.singleDatePicker}])},[yr("",!0),mt("div",CV,[Ji(n,{monthDate:e.monthDate,"locale-data":e.locale,start:e.start,end:e.end,minDate:d.min,maxDate:d.max,"show-dropdowns":r.showDropdowns,onChangeMonth:d.changeLeftMonth,"date-format":d.dateFormatFn,onDateClick:d.dateClick,onHoverDate:d.hoverDate,showWeekNumbers:r.showWeekNumbers},{default:js(()=>[hh(e.$slots,"date",iv(C1(e.data)),void 0,!0)]),_:3},8,["monthDate","locale-data","start","end","minDate","maxDate","show-dropdowns","onChangeMonth","date-format","onDateClick","onHoverDate","showWeekNumbers"])]),r.timePicker&&e.start?(ki(),fh(T,{key:1,onUpdate:d.onUpdateStartTime,"miniute-increment":r.timePickerIncrement,hour24:r.timePicker24Hour,"second-picker":r.timePickerSeconds,"current-time":e.start,readonly:r.readonly},null,8,["onUpdate","miniute-increment","hour24","second-picker","current-time","readonly"])):yr("",!0)],2),r.singleDatePicker?yr("",!0):(ki(),Fi("div",MV,[yr("",!0),mt("div",AV,[Ji(n,{monthDate:e.nextMonthDate,"locale-data":e.locale,start:e.start,end:e.end,minDate:d.min,maxDate:d.max,"show-dropdowns":r.showDropdowns,onChangeMonth:d.changeRightMonth,"date-format":d.dateFormatFn,onDateClick:d.dateClick,onHoverDate:d.hoverDate,showWeekNumbers:r.showWeekNumbers},{default:js(()=>[hh(e.$slots,"date",iv(C1(e.data)),void 0,!0)]),_:3},8,["monthDate","locale-data","start","end","minDate","maxDate","show-dropdowns","onChangeMonth","date-format","onDateClick","onHoverDate","showWeekNumbers"])]),r.timePicker&&e.end?(ki(),fh(T,{key:1,onUpdate:d.onUpdateEndTime,"miniute-increment":r.timePickerIncrement,hour24:r.timePicker24Hour,"second-picker":r.timePickerSeconds,"current-time":e.end,readonly:r.readonly},null,8,["onUpdate","miniute-increment","hour24","second-picker","current-time","readonly"])):yr("",!0)]))])):yr("",!0)]),hh(e.$slots,"footer",{rangeText:d.rangeText,locale:e.locale,clickCancel:d.clickCancel,clickApply:d.clickedApply,in_selection:e.in_selection,autoApply:r.autoApply},()=>[r.autoApply?yr("",!0):(ki(),Fi("div",kV,[d.showCalendars?(ki(),Fi("span",PV,Bn(d.rangeText),1)):yr("",!0),r.readonly?yr("",!0):(ki(),Fi("button",{key:1,class:"cancelBtn btn btn-sm btn-secondary",type:"button",onClick:t[2]||(t[2]=(...Q)=>d.clickCancel&&d.clickCancel(...Q))},Bn(e.locale.cancelLabel),1)),r.readonly?yr("",!0):(ki(),Fi("button",{key:2,class:"applyBtn btn btn-sm btn-success",disabled:e.in_selection,type:"button",onClick:t[3]||(t[3]=(...Q)=>d.clickedApply&&d.clickedApply(...Q))},Bn(e.locale.applyLabel),9,DV))]))],!0)],2)),[[V]]):yr("",!0)]),_:3})],2)}const LV=Zr(bV,[["render",IV],["__scopeId","data-v-577c3804"]]),OV={name:"DateRange",components:{DateRangePicker:LV},data(){return{dateRange:{startDate:new Date,endDate:new Date},locale:{direction:"ltr",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:tn.weekdaysMin(),monthNames:tn.monthsShort(),firstDay:1}}},methods:{updatePicker(e){this.$emit("selected",e)}}};function RV(e,t,r,l,c,d){const m=ar("date-range-picker");return ki(),fh(m,{ref:"picker",modelValue:c.dateRange,"onUpdate:modelValue":t[0]||(t[0]=n=>c.dateRange=n),dateRange:c.dateRange,"locale-data":c.locale,timePicker:"",timePicker24Hour:"",onUpdate:d.updatePicker,onSelect:d.updatePicker},{input:js(n=>[gh(Bn(e.$filters.dateformat(n.startDate))+" - "+Bn(e.$filters.dateformat(n.endDate)),1)]),_:1},8,["modelValue","dateRange","locale-data","onUpdate","onSelect"])}const BV=Zr(OV,[["render",RV]]);var Xw={},zV={get exports(){return Xw},set exports(e){Xw=e}};(function(e,t){(function(r,l){e.exports=l()})(Oo,function(){var r="__v-click-outside",l=typeof window<"u",c=typeof navigator<"u",d=l&&("ontouchstart"in window||c&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],m=function(Q){var z=Q.event,W=Q.handler;(0,Q.middleware)(z)&&W(z)},n=function(Q,z){var W=function(S){var k=typeof S=="function";if(!k&&typeof S!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:k?S:S.handler,middleware:S.middleware||function(G){return G},events:S.events||d,isActive:S.isActive!==!1,detectIframe:S.detectIframe!==!1,capture:Boolean(S.capture)}}(z.value),K=W.handler,I=W.middleware,O=W.detectIframe,$=W.capture;if(W.isActive){if(Q[r]=W.events.map(function(S){return{event:S,srcTarget:document.documentElement,handler:function(k){return function(G){var U=G.el,C=G.event,ie=G.handler,J=G.middleware,N=C.path||C.composedPath&&C.composedPath();(N?N.indexOf(U)<0:!U.contains(C.target))&&m({event:C,handler:ie,middleware:J})}({el:Q,event:k,handler:K,middleware:I})},capture:$}}),O){var M={event:"blur",srcTarget:window,handler:function(S){return function(k){var G=k.el,U=k.event,C=k.handler,ie=k.middleware;setTimeout(function(){var J=document.activeElement;J&&J.tagName==="IFRAME"&&!G.contains(J)&&m({event:U,handler:C,middleware:ie})},0)}({el:Q,event:S,handler:K,middleware:I})},capture:$};Q[r]=[].concat(Q[r],[M])}Q[r].forEach(function(S){var k=S.event,G=S.srcTarget,U=S.handler;return setTimeout(function(){Q[r]&&G.addEventListener(k,U,$)},0)})}},T=function(Q){(Q[r]||[]).forEach(function(z){return z.srcTarget.removeEventListener(z.event,z.handler,z.capture)}),delete Q[r]},V=l?{beforeMount:n,updated:function(Q,z){var W=z.value,K=z.oldValue;JSON.stringify(W)!==JSON.stringify(K)&&(T(Q),n(Q,{value:W}))},unmounted:T}:{};return{install:function(Q){Q.directive("click-outside",V)},directive:V}})})(zV);const NV=Xw,FV={props:{options:Array,type:{type:String,default:"select"},default:{type:Array,default:()=>[]}},data(){return{show:!1,selected:this.default}},methods:{showDropdown(){this.show=!this.show},hide(){this.show=!1},groupBy(e,t){return e.reduce((r,l,c)=>{var d;return(r[d=t(l,c,e)]||(r[d]=[])).push(l),r},{})}},computed:{groups(){return this.options[0].hasOwnProperty("group")?this.groupBy(this.options,e=>e.group):this.options}},watch:{selected(e){this.$emit("checked",e)}},directives:{clickOutside:NV.directive}},jV={class:"dd"},UV={id:"list1",class:"dropdown-check-list",tabindex:"100"},GV=id('<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-adjustments-horizontal" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 6l8 0"></path><path d="M16 6l4 0"></path><path d="M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 12l2 0"></path><path d="M10 12l10 0"></path><path d="M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 18l11 0"></path><path d="M19 18l1 0"></path></svg>',1),VV=[GV],$V={key:2,class:"items"},HV={key:0},WV=["id","value"],YV=["for"],XV={key:1},qV=["id","value"],ZV=["for"];function KV(e,t,r,l,c,d){const m=nx("click-outside");return Pa((ki(),Fi("div",jV,[mt("div",UV,[r.type=="select"?(ki(),Fi("span",{key:0,class:"anchor form-control",onClick:t[0]||(t[0]=(...n)=>d.showDropdown&&d.showDropdown(...n))}," Select Parameter ")):yr("",!0),r.type=="icon"?(ki(),Fi("span",{key:1,class:"icon",onClick:t[1]||(t[1]=(...n)=>d.showDropdown&&d.showDropdown(...n))},VV)):yr("",!0),c.show?(ki(),Fi("ul",$V,[(ki(!0),Fi(Pr,null,pa(d.groups,(n,T)=>(ki(),Fi("li",{key:T},[Array.isArray(n)?(ki(),Fi("div",HV,[mt("span",null,Bn(T),1),(ki(!0),Fi(Pr,null,pa(n,(V,Q)=>(ki(),Fi("div",{key:Q},[Pa(mt("input",{type:"checkbox",id:Q,value:V,"onUpdate:modelValue":t[2]||(t[2]=z=>c.selected=z)},null,8,WV),[[pm,c.selected]]),mt("label",{for:Q},Bn(V.text),9,YV)]))),128))])):yr("",!0),Array.isArray(n)?yr("",!0):(ki(),Fi("div",XV,[Pa(mt("input",{type:"checkbox",id:T,value:n,"onUpdate:modelValue":t[3]||(t[3]=V=>c.selected=V)},null,8,qV),[[pm,c.selected]]),mt("label",{for:T},Bn(n.text),9,ZV)]))]))),128))])):yr("",!0)])])),[[m,d.hide]])}const JV=Zr(FV,[["render",KV]]),QV=["#2f7ed8","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a","#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1","#0d233a"];AA(Bc);const e$={name:"spline",props:{params:Object,fleet:Object,default:Array},components:{Chart:pp.Chart},methods:{async show(){this.$refs.chart.chart.showLoading();let e=[],t=[],r=[];this.items.forEach((c,d)=>{let m=QV[d];t[d]={title:{text:c.text,style:{color:m,fontSize:"12px"}},lineColor:m,labels:{style:{color:m},align:"left",x:14},lineWidth:1,opposite:!0},c.range&&(t[d].min=c.range[0],t[d].max=c.range[1]),e[d]={id:c.data,row:c.data,yAxis:d,type:c.type?c.type:"spline",name:c.text,color:m,lineWidth:1,data:[]},r[d]=c.data}),this.options.series=e,this.options.yAxis=t,this.params.select=r,(await axios.get(`/api/fleet/${this.fleet.id}/nav/trend`,{params:this.params}).then(c=>c.data)).forEach(c=>{let d=c.unix_time;this.options.series.forEach((m,n)=>{let T=c[m.row];this.options.series[n].data.push([d,T])})}),this.$refs.chart.chart.hideLoading()},selected(e){this.items=e,this.show()}},data(){return{items:this.default,options:{chart:{type:"spline"},time:{useUTC:!1},title:{text:""},xAxis:{type:"datetime",labels:{overflow:"justify"}},yAxis:{minorGridLineWidth:0,gridLineWidth:0,alternateGridColor:null},plotOptions:{spline:{lineWidth:4,states:{hover:{lineWidth:5}},marker:{enabled:!1}}},series:[],navigation:{menuItemStyle:{fontSize:"10px"}}}}}};function t$(e,t,r,l,c,d){const m=ar("Chart");return ki(),fh(m,{ref:"chart",options:c.options,constructorType:"stockChart"},null,8,["options"])}const i$=Zr(e$,[["render",t$]]),n$={props:{url:String},components:{FleetSpeedometer:BG,DateRange:BV,TrendNav:i$,DropdownSelect:JV},data(){return{fleet:null,trendParams:{interval:60,date:null},columns:[{data:"sog",text:"Speed (knot)"},{data:"wind_speed",text:"Wind Speed (knot)"},{data:"depth",text:"Deep (m)"}]}},created(){this.fetchData()},mounted(){setInterval(()=>this.fetchData(),5*1e3)},methods:{async fetchData(){this.fleet=await axios.get(this.url).then(e=>e.data)},showChart(){this.trendParams.date||alert("please selected date first"),this.$refs.trendNav.show()},selected(e){this.$refs.trendNav.selected(e)}}},r$={key:0},s$={class:"container"},o$={class:"row"},a$={class:"col-12"},l$=mt("div",{class:"table-title"},[mt("h6",null,"Navigation information")],-1),c$={class:"table table-sm"},h$=mt("th",{scope:"row"},"•",-1),d$=mt("td",null,"Updated at",-1),u$={class:"text-end"},p$=mt("th",{scope:"row"},"•",-1),f$=mt("td",null,"Coordinate",-1),m$={class:"text-end"},g$=mt("th",{scope:"row"},"•",-1),_$=mt("td",null,"Heading",-1),y$={class:"text-end"},v$=mt("th",{scope:"row"},"•",-1),x$=mt("td",null,"Course / COG",-1),b$={class:"text-end"},w$=mt("th",{scope:"row"},"•",-1),T$=mt("td",null,"Speed / SOG",-1),S$={class:"text-end"},E$=mt("th",{scope:"row"},"•",-1),C$=mt("td",null,"Depth",-1),M$={class:"text-end"},A$=mt("th",{scope:"row"},"•",-1),k$=mt("td",null,"Wind Speed",-1),P$={class:"text-end"},D$=mt("th",{scope:"row"},"•",-1),I$=mt("td",null,"Wind Direction",-1),L$={class:"text-end"},O$=mt("th",{scope:"row"},"•",-1),R$=mt("td",null,"Travel Distance",-1),B$={class:"text-end"},z$=mt("th",{scope:"row"},"•",-1),N$=mt("td",null,"Total Travel Distance",-1),F$={class:"text-end"},j$={class:"col-12"},U$=mt("div",{class:"table-title mb-4 mt-2"},[mt("h6",null,"Trend View")],-1),G$={class:"row justify-content-end"},V$={class:"col-6"},$$={class:"col-6"},H$={class:"d-flex align-items-center justify-content-end gap-1"},W$=mt("option",{value:"30"},"30m",-1),Y$=mt("option",{value:"60"},"1 H",-1),X$=mt("option",{value:"1440"},"1 D",-1),q$=[W$,Y$,X$];function Z$(e,t,r,l,c,d){const m=ar("fleet-speedometer"),n=ar("dropdown-select"),T=ar("date-range"),V=ar("trend-nav");return c.fleet?(ki(),Fi("div",r$,[Ji(m,{fleet:c.fleet},null,8,["fleet"]),mt("div",s$,[mt("div",o$,[mt("div",a$,[l$,mt("table",c$,[mt("tbody",null,[mt("tr",null,[h$,d$,mt("td",u$,Bn(c.fleet.last_connection),1)]),mt("tr",null,[p$,f$,mt("td",m$,Bn(c.fleet.navigation.lat.toFixed(5))+" "+Bn(c.fleet.navigation.lat_dir)+", "+Bn(c.fleet.navigation.lng.toFixed(5))+" "+Bn(c.fleet.navigation.lng_dir),1)]),mt("tr",null,[g$,_$,mt("td",y$,Bn(c.fleet.navigation.heading)+" °",1)]),mt("tr",null,[v$,x$,mt("td",b$,Bn(c.fleet.navigation.cog)+" °",1)]),mt("tr",null,[w$,T$,mt("td",S$,Bn(c.fleet.navigation.sog)+" knot",1)]),mt("tr",null,[E$,C$,mt("td",M$,Bn(c.fleet.navigation.depth)+" meter",1)]),mt("tr",null,[A$,k$,mt("td",P$,Bn(c.fleet.navigation.wind_speed)+" knot",1)]),mt("tr",null,[D$,I$,mt("td",L$,Bn(c.fleet.navigation.wind_direction)+" °",1)]),mt("tr",null,[O$,R$,mt("td",B$,Bn(c.fleet.navigation.distance)+" NM",1)]),mt("tr",null,[z$,N$,mt("td",F$,Bn(c.fleet.navigation.total_distance)+" NM",1)])])])]),mt("div",j$,[U$,mt("div",G$,[mt("div",V$,[Ji(n,{options:c.columns,onChecked:d.selected,default:c.columns},null,8,["options","onChecked","default"])]),mt("div",$$,[mt("div",H$,[Ji(T,{onSelected:t[0]||(t[0]=Q=>c.trendParams.date=Q)}),Pa(mt("select",{class:"form-control w-5 bordered","onUpdate:modelValue":t[1]||(t[1]=Q=>c.trendParams.interval=Q)},q$,512),[[Vd,c.trendParams.interval]]),mt("button",{onClick:t[2]||(t[2]=(...Q)=>d.showChart&&d.showChart(...Q)),class:"btn btn-primary"},"SHOW")])])]),Ji(V,{fleet:c.fleet,params:c.trendParams,ref:"trendNav",default:c.columns},null,8,["fleet","params","default"])])])])])):yr("",!0)}const K$=Zr(n$,[["render",Z$]]),J$={name:"ChartSvg",props:{path:String,svgData:Object,height:Number},data(){return{scadavis:null,tags:[]}},async mounted(){await this.init(),Object.keys(this.svgData).forEach(e=>{this.setValue(e,this.svgData[e])})},created(){window.addEventListener("resize",this.resize)},destroyed(){window.removeEventListener("resize",this.resize)},watch:{svgData:function(e,t){let r=this;Object.keys(e).forEach(l=>{r.setValue(l,e[l])})}},methods:{async init(){this.scadavis=await scadavisInit({container:"scada-svg",svgurl:this.path}),this.scadavis.enableTools(!1,!0),this.scadavis.hideWatermark(),this.tags=this.scadavis.getTagsList().split(","),this.tags.forEach(e=>{this.scadavis.setValue(e,0)}),this.resize()},resize(){this.scadavis.zoomToOriginal();let e=this.$refs.cnsvg;this.scadavis.zoomTo(1*(e.clientWidth<e.clientHeight?e.clientWidth/600:e.clientHeight/600))},setValue(e,t){this.scadavis&&this.scadavis.setValue(e,t)}}};function Q$(e,t,r,l,c,d){return ki(),Fi("div",null,[mt("div",{id:"scada-svg",class:"scada",ref:"cnsvg",style:Rf({height:this.height+"px"})},null,4)])}const Px=Zr(J$,[["render",Q$]]),eH={props:{url:String},components:{ChartSvg:Px},data(){return{fleet:null,data:{}}},created(){this.fetchData()},mounted(){setInterval(()=>this.fetchData(),5*1e3)},methods:{async fetchData(){this.fleet=await axios.get(this.url).then(t=>t.data);let e=this.fleet.cargo_data;e&&(this.data=e)}}},tH={key:0},iH={class:"container"},nH={class:"row"},rH={class:"col-12"};function sH(e,t,r,l,c,d){const m=ar("chart-svg");return c.fleet?(ki(),Fi("div",tH,[mt("div",iH,[mt("div",nH,[mt("div",rH,[Ji(m,{path:"/svg/cargo_bargraph.svg",svgData:c.data,height:550},null,8,["svgData"])])])])])):yr("",!0)}const oH=Zr(eH,[["render",sH]]),aH={props:{url:String},components:{ChartSvg:Px},data(){return{fleet:null,data:{}}},created(){this.fetchData()},mounted(){setInterval(()=>this.fetchData(),5*1e3)},methods:{async fetchData(){this.fleet=await axios.get(this.url).then(t=>t.data);let e=this.fleet.cargo_data;e&&(this.data=e,this.data.fleet_name=this.fleet.name)}}},lH={key:0},cH={class:"container"},hH={class:"row"},dH={class:"col-12"};function uH(e,t,r,l,c,d){const m=ar("chart-svg");return c.fleet?(ki(),Fi("div",lH,[mt("div",cH,[mt("div",hH,[mt("div",dH,[Ji(m,{path:"/svg/bunker_bargraph.svg",svgData:c.data,height:550},null,8,["svgData"])])])])])):yr("",!0)}const pH=Zr(aH,[["render",uH]]),fH={props:{url:String},components:{ChartSvg:Px},data(){return{fleet:null,data:{}}},created(){this.fetchData()},mounted(){setInterval(()=>this.fetchData(),5*1e3)},methods:{async fetchData(){this.fleet=await axios.get(this.url).then(t=>t.data);let e=this.fleet.cargo_data;e&&(this.data=e,this.data.fleet_name=this.fleet.name)}}},mH={key:0},gH={class:"container"},_H={class:"row"},yH={class:"col-12"};function vH(e,t,r,l,c,d){const m=ar("chart-svg");return c.fleet?(ki(),Fi("div",mH,[mt("div",gH,[mt("div",_H,[mt("div",yH,[Ji(m,{path:"/svg/water_ballast_bargraph.svg",svgData:c.data,height:550},null,8,["svgData"])])])])])):yr("",!0)}const xH=Zr(fH,[["render",vH]]),bH={props:{url:String},components:{ChartSvg:Px},data(){return{fleet:null,data:{}}},created(){this.fetchData()},mounted(){setInterval(()=>this.fetchData(),5*1e3)},methods:{async fetchData(){this.fleet=await axios.get(this.url).then(t=>t.data);let e=this.fleet.engine;e&&(this.data=e)}}};function wH(e,t,r,l,c,d){const m=ar("chart-svg");return ki(),Fi("div",null,[Ji(m,{path:"/svg/engine-2.svg",svgData:c.data,height:550},null,8,["svgData"])])}const TH=Zr(bH,[["render",wH]]),ma=G3({});ma.component("map-dashboard",ZN);ma.component("map-history",dF);ma.component("map-default",gF);ma.component("map-voyage",jF);ma.component("map-bridge",ZF);ma.component("slider-submenu",$U);ma.component("charts-fuel",fG);ma.component("charts-graph",vG);ma.component("charts-spline",TG);ma.component("fleet-information",K$);ma.component("fleet-cargo",oH);ma.component("fleet-bunker",pH);ma.component("fleet-ballast",xH);ma.component("compass",kA);ma.component("engine-type-s",TH);ma.config.globalProperties.$filters={dateformat(e,t="DD/MM/YYYY HH:mm"){return tn(e,"YYYY-MM-DD HH:mm:ss").format(t)},str_limit(e,t=7){return e.toString().substring(0,t)},textFormat(e){return e.toLowerCase().capitalize()}};ma.mount("#app")});export default SH();
